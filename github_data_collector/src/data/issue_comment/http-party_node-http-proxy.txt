This PR contains the following updates:

| Package | Type | Update | Change |
|---|---|---|---|
| [mocha](https://mochajs.org/) ([source](https://togithub.com/mochajs/mocha)) | devDependencies | major | [`^3.5.3` -> `^7.0.0`](https://renovatebot.com/diffs/npm/mocha/3.5.3/7.0.0) |

---

### Release Notes

<details>
<summary>mochajs/mocha</summary>

### [`v7.0.0`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;700--2020-01-05)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v6.2.2...v7.0.0)

#### :boom: Breaking Changes

-   [#&#8203;3885](https://togithub.com/mochajs/mocha/issues/3885): **Drop Node.js v6.x support** ([**@&#8203;mojosoeun**](https://togithub.com/mojosoeun))
-   [#&#8203;3890](https://togithub.com/mochajs/mocha/issues/3890): Remove Node.js debug-related flags `--debug`/`--debug-brk` and deprecate `debug` argument ([**@&#8203;juergba**](https://togithub.com/juergba))
-   [#&#8203;3962](https://togithub.com/mochajs/mocha/issues/3962): Changes to command-line options ([**@&#8203;ParkSB**](https://togithub.com/ParkSB)):
    -   `--list-interfaces` replaces `--interfaces`
    -   `--list-reporters` replaces `--reporters`
-   Hook pattern of `this.skip()` ([**@&#8203;juergba**](https://togithub.com/juergba)):
    -   [#&#8203;3859](https://togithub.com/mochajs/mocha/issues/3859): When conditionally skipping in a `it` test, related `afterEach` hooks are now executed
    -   [#&#8203;3741](https://togithub.com/mochajs/mocha/issues/3741): When conditionally skipping in a `beforeEach` hook, subsequent inner `beforeEach` hooks are now skipped and related `afterEach` hooks are executed
    -   [#&#8203;4136](https://togithub.com/mochajs/mocha/issues/4136): Disallow `this.skip()` within `after` hooks
-   [#&#8203;3967](https://togithub.com/mochajs/mocha/issues/3967): Remove deprecated `getOptions()` and `lib/cli/options.js` ([**@&#8203;juergba**](https://togithub.com/juergba))
-   [#&#8203;4083](https://togithub.com/mochajs/mocha/issues/4083): Uncaught exception in `pending` test: don't swallow, but retrospectively fail the test for correct exit code ([**@&#8203;juergba**](https://togithub.com/juergba))
-   [#&#8203;4004](https://togithub.com/mochajs/mocha/issues/4004): Align `Mocha` constructor's option names with command-line options ([**@&#8203;juergba**](https://togithub.com/juergba))

#### :tada: Enhancements

-   [#&#8203;3980](https://togithub.com/mochajs/mocha/issues/3980): Refactor and improve `--watch` mode with chokidar ([**@&#8203;geigerzaehler**](https://togithub.com/geigerzaehler)):
    -   adds command-line options `--watch-files` and `--watch-ignore`
    -   removes `--watch-extensions`
-   [#&#8203;3979](https://togithub.com/mochajs/mocha/issues/3979): Type "rs\\n" to restart tests ([**@&#8203;broofa**](https://togithub.com/broofa))

#### :fax: Deprecations

These are _soft_-deprecated, and will emit a warning upon use. Support will be removed in (likely) the next major version of Mocha:

-   [#&#8203;3968](https://togithub.com/mochajs/mocha/issues/3968): Deprecate legacy configuration via `mocha.opts` ([**@&#8203;juergba**](https://togithub.com/juergba))

#### :bug: Fixes

-   [#&#8203;4125](https://togithub.com/mochajs/mocha/issues/4125): Fix timeout handling with `--inspect-brk`/`--inspect` ([**@&#8203;juergba**](https://togithub.com/juergba))
-   [#&#8203;4070](https://togithub.com/mochajs/mocha/issues/4070): `Mocha` constructor: improve browser setup ([**@&#8203;juergba**](https://togithub.com/juergba))
-   [#&#8203;4068](https://togithub.com/mochajs/mocha/issues/4068): XUnit reporter should handle exceptions during diff generation ([**@&#8203;rgroothuijsen**](https://togithub.com/rgroothuijsen))
-   [#&#8203;4030](https://togithub.com/mochajs/mocha/issues/4030): Fix `--allow-uncaught` with `this.skip()` ([**@&#8203;juergba**](https://togithub.com/juergba))

#### :mag: Coverage

-   [#&#8203;4109](https://togithub.com/mochajs/mocha/issues/4109): Add Node.js v13.x to CI test matrix ([**@&#8203;juergba**](https://togithub.com/juergba))

#### :book: Documentation

-   [#&#8203;4129](https://togithub.com/mochajs/mocha/issues/4129): Fix broken links ([**@&#8203;SaeromB**](https://togithub.com/SaeromB))
-   [#&#8203;4127](https://togithub.com/mochajs/mocha/issues/4127): Add reporter alias names to docs ([**@&#8203;khg0712**](https://togithub.com/khg0712))
-   [#&#8203;4101](https://togithub.com/mochajs/mocha/issues/4101): Clarify invalid usage of `done()` ([**@&#8203;jgehrcke**](https://togithub.com/jgehrcke))
-   [#&#8203;4092](https://togithub.com/mochajs/mocha/issues/4092): Replace `:coffee:` with emoji ☕️ ([**@&#8203;pzrq**](https://togithub.com/pzrq))
-   [#&#8203;4088](https://togithub.com/mochajs/mocha/issues/4088): Initial draft of project charter ([**@&#8203;boneskull**](https://togithub.com/boneskull))
-   [#&#8203;4066](https://togithub.com/mochajs/mocha/issues/4066): Change `sh` to `bash` for code block in docs/index.md ([**@&#8203;HyunSangHan**](https://togithub.com/HyunSangHan))
-   [#&#8203;4045](https://togithub.com/mochajs/mocha/issues/4045): Update README.md concerning GraphicsMagick installation ([**@&#8203;HyunSangHan**](https://togithub.com/HyunSangHan))
-   [#&#8203;3988](https://togithub.com/mochajs/mocha/issues/3988): Fix sponsors background color for readability ([**@&#8203;outsideris**](https://togithub.com/outsideris))

#### :nut_and_bolt: Other

-   [#&#8203;4118](https://togithub.com/mochajs/mocha/issues/4118): Update node-environment-flags to 1.0.6 ([**@&#8203;kylef**](https://togithub.com/kylef))
-   [#&#8203;4097](https://togithub.com/mochajs/mocha/issues/4097): Add GH Funding Metadata ([**@&#8203;SheetJSDev**](https://togithub.com/SheetJSDev))
-   [#&#8203;4089](https://togithub.com/mochajs/mocha/issues/4089): Add funding information to `package.json` ([**@&#8203;Munter**](https://togithub.com/Munter))
-   [#&#8203;4077](https://togithub.com/mochajs/mocha/issues/4077): Improve integration tests ([**@&#8203;soobing**](https://togithub.com/soobing))

### [`v6.2.2`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;622--2019-10-18)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v6.2.1...v6.2.2)

#### :bug: Fixes

-   [#&#8203;4025](https://togithub.com/mochajs/mocha/issues/4025): Fix duplicate `EVENT_RUN_END` events upon uncaught exception ([**@&#8203;juergba**](https://togithub.com/juergba))
-   [#&#8203;4051](https://togithub.com/mochajs/mocha/issues/4051): Fix "unhide" function in `html` reporter (browser) ([**@&#8203;pec9399**](https://togithub.com/pec9399))
-   [#&#8203;4063](https://togithub.com/mochajs/mocha/issues/4063): Fix use of [esm](https://npm.im/esm) in Node.js v8.x ([**@&#8203;boneskull**](https://togithub.com/boneskull))
-   [#&#8203;4033](https://togithub.com/mochajs/mocha/issues/4033): Fix output when multiple async exceptions are thrown ([**@&#8203;juergba**](https://togithub.com/juergba))

#### :book: Documentation

-   [#&#8203;4046](https://togithub.com/mochajs/mocha/issues/4046): Site accessibility fixes ([**@&#8203;Mia-jeong**](https://togithub.com/Mia-jeong))
-   [#&#8203;4026](https://togithub.com/mochajs/mocha/issues/4026): Update docs for custom reporters in browser ([**@&#8203;Lindsay-Needs-Sleep**](https://togithub.com/Lindsay-Needs-Sleep))
-   [#&#8203;3971](https://togithub.com/mochajs/mocha/issues/3971): Adopt new OpenJS Foundation Code of Conduct ([**@&#8203;craigtaub**](https://togithub.com/craigtaub))

### [`v6.2.1`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;621--2019-09-29)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v6.2.0...v6.2.1)

#### :bug: Fixes

-   [#&#8203;3955](https://togithub.com/mochajs/mocha/issues/3955): tty.getWindowSize is not a function inside a "worker_threads" worker ([**@&#8203;1999**](https://togithub.com/1999))
-   [#&#8203;3970](https://togithub.com/mochajs/mocha/issues/3970): remove extraGlobals() ([**@&#8203;juergba**](https://togithub.com/juergba))
-   [#&#8203;3984](https://togithub.com/mochajs/mocha/issues/3984): Update yargs-unparser to v1.6.0 ([**@&#8203;juergba**](https://togithub.com/juergba))
-   [#&#8203;3983](https://togithub.com/mochajs/mocha/issues/3983): Package 'esm': spawn child-process for correct loading ([**@&#8203;juergba**](https://togithub.com/juergba))
-   [#&#8203;3986](https://togithub.com/mochajs/mocha/issues/3986): Update yargs to v13.3.0 and yargs-parser to v13.1.1 ([**@&#8203;juergba**](https://togithub.com/juergba))

#### :book: Documentation

-   [#&#8203;3886](https://togithub.com/mochajs/mocha/issues/3886): fix styles on mochajs.org ([**@&#8203;outsideris**](https://togithub.com/outsideris))
-   [#&#8203;3966](https://togithub.com/mochajs/mocha/issues/3966): Remove jsdoc index.html placeholder from eleventy file structure and fix broken link in jsdoc tutorial ([**@&#8203;Munter**](https://togithub.com/Munter))
-   [#&#8203;3765](https://togithub.com/mochajs/mocha/issues/3765): Add Matomo to website ([**@&#8203;MarioDiaz98**](https://togithub.com/MarioDiaz98))
-   [#&#8203;3947](https://togithub.com/mochajs/mocha/issues/3947): Clarify effect of .skip() ([**@&#8203;oliversalzburg**](https://togithub.com/oliversalzburg))

### [`v6.2.0`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;620--2019-07-18)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v6.1.4...v6.2.0)

#### :tada: Enhancements

-   [#&#8203;3827](https://togithub.com/mochajs/mocha/issues/3827): Do not fork child-process if no Node flags are present ([**@&#8203;boneskull**](https://togithub.com/boneskull))
-   [#&#8203;3725](https://togithub.com/mochajs/mocha/issues/3725): Base reporter store ref to console.log, see [mocha/wiki](https://togithub.com/mochajs/mocha/wiki/HOW-TO:-Correctly-stub-stdout) ([**@&#8203;craigtaub**](https://togithub.com/craigtaub))

#### :bug: Fixes

-   [#&#8203;3942](https://togithub.com/mochajs/mocha/issues/3942): Fix "No test files found" Error when file is passed via `--file` ([**@&#8203;gabegorelick**](https://togithub.com/gabegorelick))
-   [#&#8203;3914](https://togithub.com/mochajs/mocha/issues/3914): Modify Mocha constructor to accept options `global` or `globals` ([**@&#8203;pascalpp**](https://togithub.com/pascalpp))
-   [#&#8203;3894](https://togithub.com/mochajs/mocha/issues/3894): Fix parsing of config files with `_mocha` binary ([**@&#8203;juergba**](https://togithub.com/juergba))
-   [#&#8203;3834](https://togithub.com/mochajs/mocha/issues/3834): Fix CLI parsing with default values ([**@&#8203;boneskull**](https://togithub.com/boneskull), [**@&#8203;juergba**](https://togithub.com/juergba))
-   [#&#8203;3831](https://togithub.com/mochajs/mocha/issues/3831): Fix `--timeout`/`--slow` string values and duplicate arguments ([**@&#8203;boneskull**](https://togithub.com/boneskull), [**@&#8203;juergba**](https://togithub.com/juergba))

#### :book: Documentation

-   [#&#8203;3906](https://togithub.com/mochajs/mocha/issues/3906): Document option to define custom report name for XUnit reporter ([**@&#8203;pkuczynski**](https://togithub.com/pkuczynski))
-   [#&#8203;3889](https://togithub.com/mochajs/mocha/issues/3889): Adds doc links for mocha-examples ([**@&#8203;craigtaub**](https://togithub.com/craigtaub))
-   [#&#8203;3887](https://togithub.com/mochajs/mocha/issues/3887): Fix broken links ([**@&#8203;toyjhlee**](https://togithub.com/toyjhlee))
-   [#&#8203;3841](https://togithub.com/mochajs/mocha/issues/3841): Fix anchors to configuration section ([**@&#8203;trescube**](https://togithub.com/trescube))

#### :mag: Coverage

-   [#&#8203;3915](https://togithub.com/mochajs/mocha/issues/3915), [#&#8203;3929](https://togithub.com/mochajs/mocha/issues/3929): Increase tests coverage for `--watch` options ([**@&#8203;geigerzaehler**](https://togithub.com/geigerzaehler))

#### :nut_and_bolt: Other

-   [#&#8203;3953](https://togithub.com/mochajs/mocha/issues/3953): Collect test files later, prepares improvements to the `--watch` mode behavior ([**@&#8203;geigerzaehler**](https://togithub.com/geigerzaehler))
-   [#&#8203;3939](https://togithub.com/mochajs/mocha/issues/3939): Upgrade for npm audit ([**@&#8203;boneskull**](https://togithub.com/boneskull))
-   [#&#8203;3930](https://togithub.com/mochajs/mocha/issues/3930): Extract `runWatch` into separate module ([**@&#8203;geigerzaehler**](https://togithub.com/geigerzaehler))
-   [#&#8203;3922](https://togithub.com/mochajs/mocha/issues/3922): Add `mocha.min.js` file to stacktrace filter ([**@&#8203;brian-lagerman**](https://togithub.com/brian-lagerman))
-   [#&#8203;3919](https://togithub.com/mochajs/mocha/issues/3919): Update CI config files to use Node-12.x ([**@&#8203;plroebuck**](https://togithub.com/plroebuck))
-   [#&#8203;3892](https://togithub.com/mochajs/mocha/issues/3892): Rework reporter tests ([**@&#8203;plroebuck**](https://togithub.com/plroebuck))
-   [#&#8203;3872](https://togithub.com/mochajs/mocha/issues/3872): Rename `--exclude` to `--ignore` and create alias ([**@&#8203;boneskull**](https://togithub.com/boneskull))
-   [#&#8203;3963](https://togithub.com/mochajs/mocha/issues/3963): Hide stacktrace when cli args are missing ([**@&#8203;outsideris**](https://togithub.com/outsideris))
-   [#&#8203;3956](https://togithub.com/mochajs/mocha/issues/3956): Do not redeclare variable in docs array example ([**@&#8203;DanielRuf**](https://togithub.com/DanielRuf))
-   [#&#8203;3957](https://togithub.com/mochajs/mocha/issues/3957): Remove duplicate line-height property in `mocha.css` ([**@&#8203;DanielRuf**](https://togithub.com/DanielRuf))
-   [#&#8203;3960](https://togithub.com/mochajs/mocha/issues/3960): Don't re-initialize grep option on watch re-run ([**@&#8203;geigerzaehler**](https://togithub.com/geigerzaehler))

### [`v6.1.4`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;614--2019-04-18)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v6.1.3...v6.1.4)

#### :lock: Security Fixes

-   [#&#8203;3877](https://togithub.com/mochajs/mocha/issues/3877): Upgrade [js-yaml](https://npm.im/js-yaml), addressing [code injection vulnerability](https://www.npmjs.com/advisories/813) ([**@&#8203;bjornstar**](https://togithub.com/bjornstar))

### [`v6.1.3`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;613--2019-04-11)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v6.1.2...v6.1.3)

#### :bug: Fixes

-   [#&#8203;3863](https://togithub.com/mochajs/mocha/issues/3863): Fix `yargs`-related global scope pollution ([**@&#8203;inukshuk**](https://togithub.com/inukshuk))
-   [#&#8203;3869](https://togithub.com/mochajs/mocha/issues/3869): Fix failure when installed w/ `pnpm` ([**@&#8203;boneskull**](https://togithub.com/boneskull))

### [`v6.1.2`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;612--2019-04-08)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v6.1.1...v6.1.2)

#### :bug: Fixes

-   [#&#8203;3867](https://togithub.com/mochajs/mocha/issues/3867): Re-publish v6.1.1 from POSIX OS to avoid dropped executable flags ([**@&#8203;boneskull**](https://togithub.com/boneskull))

### [`v6.1.1`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;611--2019-04-07)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v6.1.0...v6.1.1)

#### :bug: Fixes

-   [#&#8203;3866](https://togithub.com/mochajs/mocha/issues/3866): Fix Windows End-of-Line publishing issue ([**@&#8203;juergba**](https://togithub.com/juergba) & [**@&#8203;cspotcode**](https://togithub.com/cspotcode))

### [`v6.1.0`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;610--2019-04-07)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v6.0.2...v6.1.0)

#### :lock: Security Fixes

-   [#&#8203;3845](https://togithub.com/mochajs/mocha/issues/3845): Update dependency "js-yaml" to v3.13.0 per npm security advisory ([**@&#8203;plroebuck**](https://togithub.com/plroebuck))

#### :tada: Enhancements

-   [#&#8203;3766](https://togithub.com/mochajs/mocha/issues/3766): Make reporter constructor support optional `options` parameter ([**@&#8203;plroebuck**](https://togithub.com/plroebuck))
-   [#&#8203;3760](https://togithub.com/mochajs/mocha/issues/3760): Add support for config files with `.jsonc` extension ([**@&#8203;sstephant**](https://togithub.com/sstephant))

#### :fax: Deprecations

These are _soft_-deprecated, and will emit a warning upon use. Support will be removed in (likely) the next major version of Mocha:

-   [#&#8203;3719](https://togithub.com/mochajs/mocha/issues/3719): Deprecate `this.skip()` for "after all" hooks ([**@&#8203;juergba**](https://togithub.com/juergba))

#### :bug: Fixes

-   [#&#8203;3829](https://togithub.com/mochajs/mocha/issues/3829): Use cwd-relative pathname to load config file ([**@&#8203;plroebuck**](https://togithub.com/plroebuck))
-   [#&#8203;3745](https://togithub.com/mochajs/mocha/issues/3745): Fix async calls of `this.skip()` in "before each" hooks ([**@&#8203;juergba**](https://togithub.com/juergba))
-   [#&#8203;3669](https://togithub.com/mochajs/mocha/issues/3669): Enable `--allow-uncaught` for uncaught exceptions thrown inside hooks ([**@&#8203;givanse**](https://togithub.com/givanse))

and some regressions:

-   [#&#8203;3848](https://togithub.com/mochajs/mocha/issues/3848): Fix `Suite` cloning by copying `root` property ([**@&#8203;fatso83**](https://togithub.com/fatso83))
-   [#&#8203;3816](https://togithub.com/mochajs/mocha/issues/3816): Guard against undefined timeout option ([**@&#8203;boneskull**](https://togithub.com/boneskull))
-   [#&#8203;3814](https://togithub.com/mochajs/mocha/issues/3814): Update "yargs" in order to avoid deprecation message ([**@&#8203;boneskull**](https://togithub.com/boneskull))
-   [#&#8203;3788](https://togithub.com/mochajs/mocha/issues/3788): Fix support for multiple node flags ([**@&#8203;aginzberg**](https://togithub.com/aginzberg))

#### :book: Documentation

-   [mochajs/mocha-examples](https://togithub.com/mochajs/mocha-examples): New repository of working examples of common configurations using mocha ([**@&#8203;craigtaub**](https://togithub.com/craigtaub))
-   [#&#8203;3850](https://togithub.com/mochajs/mocha/issues/3850): Remove pound icon showing on header hover on docs ([**@&#8203;jd2rogers2**](https://togithub.com/jd2rogers2))
-   [#&#8203;3812](https://togithub.com/mochajs/mocha/issues/3812): Add autoprefixer to documentation page CSS ([**@&#8203;Munter**](https://togithub.com/Munter))
-   [#&#8203;3811](https://togithub.com/mochajs/mocha/issues/3811): Update doc examples "tests.html" ([**@&#8203;DavidLi119**](https://togithub.com/DavidLi119))
-   [#&#8203;3807](https://togithub.com/mochajs/mocha/issues/3807): Mocha website HTML tweaks ([**@&#8203;plroebuck**](https://togithub.com/plroebuck))
-   [#&#8203;3793](https://togithub.com/mochajs/mocha/issues/3793): Update config file example ".mocharc.yml" ([**@&#8203;cspotcode**](https://togithub.com/cspotcode))

#### :nut_and_bolt: Other

-   [#&#8203;3830](https://togithub.com/mochajs/mocha/issues/3830): Replace dependency "findup-sync" with "find-up" for faster startup ([**@&#8203;cspotcode**](https://togithub.com/cspotcode))
-   [#&#8203;3799](https://togithub.com/mochajs/mocha/issues/3799): Update devDependencies to fix many npm vulnerabilities ([**@&#8203;XhmikosR**](https://togithub.com/XhmikosR))

### [`v6.0.2`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;602--2019-02-25)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v6.0.1...v6.0.2)

#### :bug: Fixes

Two more regressions fixed:

-   [#&#8203;3768](https://togithub.com/mochajs/mocha/issues/3768): Test file paths no longer dropped from `mocha.opts` ([**@&#8203;boneskull**](https://togithub.com/boneskull))
-   [#&#8203;3767](https://togithub.com/mochajs/mocha/issues/3767): `--require` does not break on module names that look like certain `node` flags ([**@&#8203;boneskull**](https://togithub.com/boneskull))

### [`v6.0.1`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;601--2019-02-21)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v6.0.0...v6.0.1)

The obligatory round of post-major-release bugfixes.

#### :bug: Fixes

These issues were regressions.

-   [#&#8203;3754](https://togithub.com/mochajs/mocha/issues/3754): Mocha again finds `test.js` when run without arguments ([**@&#8203;plroebuck**](https://togithub.com/plroebuck))
-   [#&#8203;3756](https://togithub.com/mochajs/mocha/issues/3756): Mocha again supports third-party interfaces via `--ui` ([**@&#8203;boneskull**](https://togithub.com/boneskull))
-   [#&#8203;3755](https://togithub.com/mochajs/mocha/issues/3755): Fix broken `--watch` ([**@&#8203;boneskull**](https://togithub.com/boneskull))
-   [#&#8203;3759](https://togithub.com/mochajs/mocha/issues/3759): Fix unwelcome deprecation notice when Mocha run against languages (CoffeeScript) with implicit return statements; _returning a non-`undefined` value from a `describe` callback is no longer considered deprecated_ ([**@&#8203;boneskull**](https://togithub.com/boneskull))

#### :book: Documentation

-   [#&#8203;3738](https://togithub.com/mochajs/mocha/issues/3738): Upgrade to `@mocha/docdash@2` ([**@&#8203;tendonstrength**](https://togithub.com/tendonstrength))
-   [#&#8203;3751](https://togithub.com/mochajs/mocha/issues/3751): Use preferred names for example config files ([**@&#8203;Szauka**](https://togithub.com/Szauka))

### [`v6.0.0`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;600--2019-02-18)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v5.2.0...v6.0.0)

#### :tada: Enhancements

-   [#&#8203;3726](https://togithub.com/mochajs/mocha/issues/3726): Add ability to unload files from `require` cache ([**@&#8203;plroebuck**](https://togithub.com/plroebuck))

#### :bug: Fixes

-   [#&#8203;3737](https://togithub.com/mochajs/mocha/issues/3737): Fix falsy values from options globals ([**@&#8203;plroebuck**](https://togithub.com/plroebuck))
-   [#&#8203;3707](https://togithub.com/mochajs/mocha/issues/3707): Fix encapsulation issues for `Suite#_onlyTests` and `Suite#_onlySuites` ([**@&#8203;vkarpov15**](https://togithub.com/vkarpov15))
-   [#&#8203;3711](https://togithub.com/mochajs/mocha/issues/3711): Fix diagnostic messages dealing with plurality and markup of output ([**@&#8203;plroebuck**](https://togithub.com/plroebuck))
-   [#&#8203;3723](https://togithub.com/mochajs/mocha/issues/3723): Fix "reporter-option" to allow comma-separated options ([**@&#8203;boneskull**](https://togithub.com/boneskull))
-   [#&#8203;3722](https://togithub.com/mochajs/mocha/issues/3722): Fix code quality and performance of `lookupFiles` and `files` ([**@&#8203;plroebuck**](https://togithub.com/plroebuck))
-   [#&#8203;3650](https://togithub.com/mochajs/mocha/issues/3650), [#&#8203;3654](https://togithub.com/mochajs/mocha/issues/3654): Fix noisy error message when no files found ([**@&#8203;craigtaub**](https://togithub.com/craigtaub))
-   [#&#8203;3632](https://togithub.com/mochajs/mocha/issues/3632): Tests having an empty title are no longer confused with the "root" suite ([**@&#8203;juergba**](https://togithub.com/juergba))
-   [#&#8203;3666](https://togithub.com/mochajs/mocha/issues/3666): Fix missing error codes ([**@&#8203;vkarpov15**](https://togithub.com/vkarpov15))
-   [#&#8203;3684](https://togithub.com/mochajs/mocha/issues/3684): Fix exiting problem in Node.js v11.7.0+ ([**@&#8203;addaleax**](https://togithub.com/addaleax))
-   [#&#8203;3691](https://togithub.com/mochajs/mocha/issues/3691): Fix `--delay` (and other boolean options) not working in all cases ([**@&#8203;boneskull**](https://togithub.com/boneskull))
-   [#&#8203;3692](https://togithub.com/mochajs/mocha/issues/3692): Fix invalid command-line argument usage not causing actual errors ([**@&#8203;boneskull**](https://togithub.com/boneskull))
-   [#&#8203;3698](https://togithub.com/mochajs/mocha/issues/3698), [#&#8203;3699](https://togithub.com/mochajs/mocha/issues/3699): Fix debug-related Node.js options not working in all cases ([**@&#8203;boneskull**](https://togithub.com/boneskull))
-   [#&#8203;3700](https://togithub.com/mochajs/mocha/issues/3700): Growl notifications now show the correct number of tests run ([**@&#8203;outsideris**](https://togithub.com/outsideris))
-   [#&#8203;3686](https://togithub.com/mochajs/mocha/issues/3686): Avoid potential ReDoS when diffing large objects ([**@&#8203;cyjake**](https://togithub.com/cyjake))
-   [#&#8203;3715](https://togithub.com/mochajs/mocha/issues/3715): Fix incorrect order of emitted events when used programmatically ([**@&#8203;boneskull**](https://togithub.com/boneskull))
-   [#&#8203;3706](https://togithub.com/mochajs/mocha/issues/3706): Fix regression wherein `--reporter-option`/`--reporter-options` did not support comma-separated key/value pairs ([**@&#8203;boneskull**](https://togithub.com/boneskull))

#### :book: Documentation

-   [#&#8203;3652](https://togithub.com/mochajs/mocha/issues/3652): Switch from Jekyll to Eleventy ([**@&#8203;Munter**](https://togithub.com/Munter))

#### :nut_and_bolt: Other

-   [#&#8203;3677](https://togithub.com/mochajs/mocha/issues/3677): Add error objects for createUnsupportedError and createInvalidExceptionError ([**@&#8203;boneskull**](https://togithub.com/boneskull))
-   [#&#8203;3733](https://togithub.com/mochajs/mocha/issues/3733): Removed unnecessary processing in post-processing hook ([**@&#8203;wanseob**](https://togithub.com/wanseob))
-   [#&#8203;3730](https://togithub.com/mochajs/mocha/issues/3730): Update nyc to latest version ([**@&#8203;coreyfarrell**](https://togithub.com/coreyfarrell))
-   [#&#8203;3648](https://togithub.com/mochajs/mocha/issues/3648), [#&#8203;3680](https://togithub.com/mochajs/mocha/issues/3680): Fixes to support latest versions of [unexpected](https://npm.im/unexpected) and [unexpected-sinon](https://npm.im/unexpected-sinon) ([**@&#8203;sunesimonsen**](https://togithub.com/sunesimonsen))
-   [#&#8203;3638](https://togithub.com/mochajs/mocha/issues/3638): Add meta tag to site ([**@&#8203;MartijnCuppens**](https://togithub.com/MartijnCuppens))
-   [#&#8203;3653](https://togithub.com/mochajs/mocha/issues/3653): Fix parts of test suite failing to run on Windows ([**@&#8203;boneskull**](https://togithub.com/boneskull))

### [`v5.2.0`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;520--2018-05-18)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v5.1.1...v5.2.0)

#### :tada: Enhancements

-   [#&#8203;3375](https://togithub.com/mochajs/mocha/pull/3375): Add support for comments in `mocha.opts` ([@&#8203;plroebuck](https://togithub.com/plroebuck))

#### :bug: Fixes

-   [#&#8203;3346](https://togithub.com/mochajs/mocha/pull/3346): Exit correctly from `before` hooks when using `--bail` ([@&#8203;outsideris](https://togithub.com/outsideris))

#### :book: Documentation

-   [#&#8203;3328](https://togithub.com/mochajs/mocha/pull/3328): Mocha-flavored [API docs](https://mochajs.org/api/)! ([@&#8203;Munter](https://togithub.com/munter))

#### :nut_and_bolt: Other

-   [#&#8203;3330](https://togithub.com/mochajs/mocha/pull/3330): Use `Buffer.from()` ([@&#8203;harrysarson](https://togithub.com/harrysarson))
-   [#&#8203;3295](https://togithub.com/mochajs/mocha/pull/3295): Remove redundant folder ([@&#8203;DavNej](https://togithub.com/DajNev))
-   [#&#8203;3356](https://togithub.com/mochajs/mocha/pull/3356): Refactoring ([@&#8203;plroebuck](https://togithub.com/plroebuck))

### [`v5.1.1`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;511--2018-04-18)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v5.1.0...v5.1.1)

#### :bug: Fixes

-   [#&#8203;3325](https://togithub.com/mochajs/mocha/issues/3325): Revert change which broke `--watch` ([@&#8203;boneskull](https://togithub.com/boneskull))

### [`v5.1.0`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;510--2018-04-12)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v5.0.5...v5.1.0)

#### :tada: Enhancements

-   [#&#8203;3210](https://togithub.com/mochajs/mocha/pull/3210): Add `--exclude` option ([@&#8203;metalex9](https://togithub.com/metalex9))

#### :bug: Fixes

-   [#&#8203;3318](https://togithub.com/mochajs/mocha/pull/3318): Fix failures in circular objects in JSON reporter ([@&#8203;jeversmann](https://togithub.com/jeversmann), [@&#8203;boneskull](https://togithub.com/boneskull))

#### :book: Documentation

-   [#&#8203;3323](https://togithub.com/mochajs/mocha/pull/3323): Publish actual [API documentation](https://mochajs.org/api/)! ([@&#8203;dfberry](https://togithub.com/dfberry), [@&#8203;Munter](https://togithub.com/munter))
-   [#&#8203;3299](https://togithub.com/mochajs/mocha/pull/3299): Improve docs around exclusive tests ([@&#8203;nicgirault](https://togithub.com/nicgirault))

#### :nut_and_bolt: Other

-   [#&#8203;3302](https://togithub.com/mochajs/mocha/pull/3302), [#&#8203;3308](https://togithub.com/mochajs/mocha/pull/3308), [#&#8203;3310](https://togithub.com/mochajs/mocha/pull/3310), [#&#8203;3315](https://togithub.com/mochajs/mocha/pull/3315), [#&#8203;3316](https://togithub.com/mochajs/mocha/pull/3316): Build matrix improvements ([more info](https://boneskull.com/mocha-and-travis-ci-build-stages/)) ([@&#8203;outsideris](https://togithub.com/outsideris), [@&#8203;boneskull](https://togithub.com/boneskull))
-   [#&#8203;3272](https://togithub.com/mochajs/mocha/pull/3272): Refactor reporter tests ([@&#8203;jMuzsik](https://togithub.com/jMuzsik))

### [`v5.0.5`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;505--2018-03-22)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v5.0.4...v5.0.5)

Welcome [@&#8203;outsideris](https://togithub.com/outsideris) to the team!

#### :bug: Fixes

-   [#&#8203;3096](https://togithub.com/mochajs/mocha/issues/3096): Fix `--bail` failing to bail within hooks ([@&#8203;outsideris](https://togithub.com/outsideris))
-   [#&#8203;3184](https://togithub.com/mochajs/mocha/issues/3184): Don't skip too many suites (using `describe.skip()`) ([@&#8203;outsideris](https://togithub.com/outsideris))

#### :book: Documentation

-   [#&#8203;3133](https://togithub.com/mochajs/mocha/issues/3133): Improve docs regarding "pending" behavior ([@&#8203;ematicipo](https://togithub.com/ematicipo))
-   [#&#8203;3276](https://togithub.com/mochajs/mocha/pull/3276), [#&#8203;3274](https://togithub.com/mochajs/mocha/pull/3274): Fix broken stuff in `CHANGELOG.md` ([@&#8203;tagoro9](https://togithub.com/tagoro9), [@&#8203;honzajavorek](https://togithub.com/honzajavorek))

#### :nut_and_bolt: Other

-   [#&#8203;3208](https://togithub.com/mochajs/mocha/issues/3208): Improve test coverage for AMD users ([@&#8203;outsideris](https://togithub.com/outsideris))
-   [#&#8203;3267](https://togithub.com/mochajs/mocha/pull/3267): Remove vestiges of PhantomJS from CI ([@&#8203;anishkny](https://togithub.com/anishkny))
-   [#&#8203;2952](https://togithub.com/mochajs/mocha/issues/2952): Fix a debug message ([@&#8203;boneskull](https://togithub.com/boneskull))

### [`v5.0.4`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;504--2018-03-07)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v5.0.3...v5.0.4)

#### :bug: Fixes

-   [#&#8203;3265](https://togithub.com/mochajs/mocha/issues/3265): Fixes regression in "watch" functionality introduced in v5.0.2 ([@&#8203;outsideris](https://togithub.com/outsideris))

### [`v5.0.3`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;503--2018-03-06)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v5.0.2...v5.0.3)

This patch features a fix to address a potential "low severity" [ReDoS vulnerability](https://snyk.io/vuln/npm:diff:20180305) in the [diff](https://npm.im/diff) package (a dependency of Mocha).

#### :lock: Security Fixes

-   [#&#8203;3266](https://togithub.com/mochajs/mocha/pull/3266): Bump `diff` to v3.5.0 ([@&#8203;anishkny](https://togithub.com/anishkny))

#### :nut_and_bolt: Other

-   [#&#8203;3011](https://togithub.com/mochajs/mocha/issues/3011): Expose `generateDiff()` in `Base` reporter ([@&#8203;harrysarson](https://togithub.com/harrysarson))

### [`v5.0.2`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;502--2018-03-05)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v5.0.1...v5.0.2)

This release fixes a class of tests which report as _false positives_. **Certain tests will now break**, though they would have previously been reported as passing. Details below. Sorry for the inconvenience!

#### :bug: Fixes

-   [#&#8203;3226](https://togithub.com/mochajs/mocha/issues/3226): Do not swallow errors that are thrown asynchronously from passing tests ([@&#8203;boneskull](https://togithub.com/boneskull)). Example:

    \```js
    it('should actually fail, sorry!', function (done) {
    // passing assertion
    assert(true === true);

    // test complete & is marked as passing
    done();

    // ...but something evil lurks within
    setTimeout(() => {
    throw new Error('chaos!');
    }, 100);
    });
    \```

    Previously to this version, Mocha would have _silently swallowed_ the `chaos!` exception, and you wouldn't know. Well, _now you know_. Mocha cannot recover from this gracefully, so it will exit with a nonzero code.

    **Maintainers of external reporters**: _If_ a test of this class is encountered, the `Runner` instance will emit the `end` event _twice_; you _may_ need to change your reporter to use `runner.once('end')` intead of `runner.on('end')`.

-   [#&#8203;3093](https://togithub.com/mochajs/mocha/issues/3093): Fix stack trace reformatting problem ([@&#8203;outsideris](https://togithub.com/outsideris))

#### :nut_and_bolt: Other

-   [#&#8203;3248](https://togithub.com/mochajs/mocha/issues/3248): Update `browser-stdout` to v1.3.1 ([@&#8203;honzajavorek](https://togithub.com/honzajavorek))

### [`v5.0.1`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;501--2018-02-07)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v5.0.0...v5.0.1)

...your garden-variety patch release.

Special thanks to [Wallaby.js](https://wallabyjs.com) for their continued support! :heart:

#### :bug: Fixes

-   [#&#8203;1838](https://togithub.com/mochajs/mocha/issues/1838): `--delay` now works with `.only()` ([@&#8203;silviom](https://togithub.com/silviom))
-   [#&#8203;3119](https://togithub.com/mochajs/mocha/issues/3119): Plug memory leak present in v8 ([@&#8203;boneskull](https://togithub.com/boneskull))

#### :book: Documentation

-   [#&#8203;3132](https://togithub.com/mochajs/mocha/issues/3132), [#&#8203;3098](https://togithub.com/mochajs/mocha/issues/3098): Update `--glob` docs ([@&#8203;outsideris](https://togithub.com/outsideris))
-   [#&#8203;3212](https://togithub.com/mochajs/mocha/pull/3212): Update [Wallaby.js](https://wallabyjs.com)-related docs ([@&#8203;ArtemGovorov](https://togithub.com/ArtemGovorov))
-   [#&#8203;3205](https://togithub.com/mochajs/mocha/pull/3205): Remove outdated cruft ([@&#8203;boneskull](https://togithub.com/boneskull))

#### :nut_and_bolt: Other

-   [#&#8203;3224](https://togithub.com/mochajs/mocha/pull/3224): Add proper Wallaby.js config ([@&#8203;ArtemGovorov](https://togithub.com/ArtemGovorov))
-   [#&#8203;3230](https://togithub.com/mochajs/mocha/pull/3230): Update copyright year ([@&#8203;josephlin55555](https://togithub.com/josephlin55555))

### [`v5.0.0`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;500--2018-01-17)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v4.1.0...v5.0.0)

Mocha starts off 2018 right by again dropping support for _unmaintained rubbish_.

Welcome [@&#8203;vkarpov15](https://togithub.com/vkarpov15) to the team!

#### :boom: Breaking Changes

-   **[#&#8203;3148](https://togithub.com/mochajs/mocha/issues/3148): Drop support for IE9 and IE10** ([@&#8203;Bamieh](https://togithub.com/Bamieh))
    Practically speaking, only code which consumes (through bundling or otherwise) the userland [buffer](https://npm.im/buffer) module should be affected. However, Mocha will no longer test against these browsers, nor apply fixes for them.

#### :tada: Enhancements

-   [#&#8203;3181](https://togithub.com/mochajs/mocha/issues/3181): Add useful new `--file` command line argument ([documentation](https://mochajs.org/#--file-file)) ([@&#8203;hswolff](https://togithub.com/hswolff))

#### :bug: Fixes

-   [#&#8203;3187](https://togithub.com/mochajs/mocha/issues/3187): Fix inaccurate test duration reporting ([@&#8203;FND](https://togithub.com/FND))
-   [#&#8203;3202](https://togithub.com/mochajs/mocha/pull/3202): Fix bad markup in HTML reporter ([@&#8203;DanielRuf](https://togithub.com/DanielRuf))

#### :sunglasses: Developer Experience

-   [#&#8203;2352](https://togithub.com/mochajs/mocha/issues/2352): Ditch GNU Make for [nps](https://npm.im/nps) to manage scripts ([@&#8203;TedYav](https://togithub.com/TedYav))

#### :book: Documentation

-   [#&#8203;3137](https://togithub.com/mochajs/mocha/issues/3137): Add missing `--no-timeouts` docs ([@&#8203;dfberry](https://togithub.com/dfberry))
-   [#&#8203;3134](https://togithub.com/mochajs/mocha/issues/3134): Improve `done()` callback docs ([@&#8203;maraisr](https://togithub.com/maraisr))
-   [#&#8203;3135](https://togithub.com/mochajs/mocha/issues/3135): Fix cross-references ([@&#8203;vkarpov15](https://togithub.com/vkarpov15))
-   [#&#8203;3163](https://togithub.com/mochajs/mocha/pull/3163): Fix tpyos ([@&#8203;tbroadley](https://togithub.com/tbroadley))
-   [#&#8203;3177](https://togithub.com/mochajs/mocha/pull/3177): Tweak `README.md` organization ([@&#8203;xxczaki](https://togithub.com/xxczaki))
-   Misc updates ([@&#8203;boneskull](https://togithub.com/boneskull))

#### :nut_and_bolt: Other

-   [#&#8203;3118](https://togithub.com/mochajs/mocha/issues/3118): Move TextMate Integration to [its own repo](https://togithub.com/mochajs/mocha.tmbundle) ([@&#8203;Bamieh](https://togithub.com/Bamieh))
-   [#&#8203;3185](https://togithub.com/mochajs/mocha/issues/3185): Add Node.js v9 to build matrix; remove v7 ([@&#8203;xxczaki](https://togithub.com/xxczaki))
-   [#&#8203;3172](https://togithub.com/mochajs/mocha/issues/3172): Markdown linting ([@&#8203;boneskull](https://togithub.com/boneskull))
-   Test & Netlify updates ([@&#8203;Munter](https://togithub.com/munter), [@&#8203;boneskull](https://togithub.com/boneskull))

### [`v4.1.0`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;410--2017-12-28)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v4.0.1...v4.1.0)

This is mainly a "housekeeping" release.

Welcome [@&#8203;Bamieh](https://togithub.com/Bamieh) and [@&#8203;xxczaki](https://togithub.com/xxczaki) to the team!

#### :bug: Fixes

-   [#&#8203;2661](https://togithub.com/mochajs/mocha/issues/2661): `progress` reporter now accepts reporter options ([@&#8203;canoztokmak](https://togithub.com/canoztokmak))
-   [#&#8203;3142](https://togithub.com/mochajs/mocha/issues/3142): `xit` in `bdd` interface now properly returns its `Test` object ([@&#8203;Bamieh](https://togithub.com/Bamieh))
-   [#&#8203;3075](https://togithub.com/mochajs/mocha/pull/3075): Diffs now computed eagerly to avoid misinformation when reported ([@&#8203;abrady0](https://togithub.com/abrady0))
-   [#&#8203;2745](https://togithub.com/mochajs/mocha/issues/2745): `--help` will now help you even if you have a `mocha.opts` ([@&#8203;Zarel](https://togithub.com/Zarel))

#### :tada: Enhancements

-   [#&#8203;2514](https://togithub.com/mochajs/mocha/issues/2514): The `--no-diff` flag will completely disable diff output ([@&#8203;CapacitorSet](https://togithub.com/CapacitorSet))
-   [#&#8203;3058](https://togithub.com/mochajs/mocha/issues/3058): All "setters" in Mocha's API are now also "getters" if called without arguments ([@&#8203;makepanic](https://togithub.com/makepanic))

#### :book: Documentation

-   [#&#8203;3170](https://togithub.com/mochajs/mocha/pull/3170): Optimization and site speed improvements ([@&#8203;Munter](https://togithub.com/munter))
-   [#&#8203;2987](https://togithub.com/mochajs/mocha/issues/2987): Moved the old [site repo](https://togithub.com/mochajs/mochajs.github.io) into the main repo under `docs/` ([@&#8203;boneskull](https://togithub.com/boneskull))
-   [#&#8203;2896](https://togithub.com/mochajs/mocha/issues/2896): Add [maintainer guide](https://togithub.com/mochajs/mocha/blob/master/MAINTAINERS.md) ([@&#8203;boneskull](https://togithub.com/boneskull))
-   Various fixes and updates ([@&#8203;xxczaki](https://togithub.com/xxczaki), [@&#8203;maty21](https://togithub.com/maty21), [@&#8203;leedm777](https://togithub.com/leedm777))

#### :nut_and_bolt: Other

-   Test improvements and fixes ([@&#8203;eugenet8k](https://togithub.com/eugenet8k), [@&#8203;ngeor](https://togithub.com/ngeor), [@&#8203;38elements](https://togithub.com/38elements), [@&#8203;Gerhut](https://togithub.com/Gerhut), [@&#8203;ScottFreeCode](https://togithub.com/ScottFreeCode), [@&#8203;boneskull](https://togithub.com/boneskull))
-   Refactoring and cruft excision ([@&#8203;38elements](https://togithub.com/38elements), [@&#8203;Bamieh](https://togithub.com/Bamieh), [@&#8203;finnigantime](https://togithub.com/finnigantime), [@&#8203;boneskull](https://togithub.com/boneskull))

### [`v4.0.1`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;401--2017-10-05)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v4.0.0...v4.0.1)

#### :bug: Fixes

-   [#&#8203;3051](https://togithub.com/mochajs/mocha/pull/3051): Upgrade Growl to v1.10.3 to fix its [peer dep problems](https://togithub.com/tj/node-growl/pull/68) ([@&#8203;dpogue](https://togithub.com/dpogue))

### [`v4.0.0`](https://togithub.com/mochajs/mocha/blob/master/CHANGELOG.md#&#8203;400--2017-10-02)

[Compare Source](https://togithub.com/mochajs/mocha/compare/v3.5.3...v4.0.0)

You might want to read this before filing a new bug! :stuck_out_tongue_closed_eyes:

#### :boom: Breaking Changes

For more info, please [read this article](https://boneskull.com/mocha-v4-nears-release/).

##### Compatibility

-   [#&#8203;3016](https://togithub.com/mochajs/mocha/issues/3016): Drop support for unmaintained versions of Node.js ([@&#8203;boneskull](https://togithub.com/boneskull)):
    -   0.10.x
    -   0.11.x
    -   0.12.x
    -   iojs (any)
    -   5.x.x
-   [#&#8203;2979](https://togithub.com/mochajs/mocha/issues/2979): Drop support for non-ES5-compliant browsers ([@&#8203;boneskull](https://togithub.com/boneskull)):
    -   IE7
    -   IE8
    -   PhantomJS 1.x
-   [#&#8203;2615](https://togithub.com/mochajs/mocha/issues/2615): Drop Bower support; old versions (3.x, etc.) will remain available ([@&#8203;ScottFreeCode](https://togithub.com/ScottFreeCode), [@&#8203;boneskull](https://togithub.com/boneskull))

##### Default Behavior

-   [#&#8203;2879](https://togithub.com/mochajs/mocha/issues/2879): By default, Mocha will no longer force the process to exit once all tests complete. This means any test code (or code under test) which would normally prevent `node` from exiting will do so when run in Mocha. Supply the `--exit` flag to revert to pre-v4.0.0 behavior ([@&#8203;ScottFreeCode](https://togithub.com/ScottFreeCode), [@&#8203;boneskull](https://togithub.com/boneskull))

##### Reporter Output

-   [#&#8203;2095](https://togithub.com/mochajs/mocha/issues/2095): Remove `stdout:` prefix from browser reporter logs ([@&#8203;skeggse](https://togithub.com/skeggse))
-   [#&#8203;2295](https://togithub.com/mochajs/mocha/issues/2295): Add separator in "unified diff" output ([@&#8203;olsonpm](https://togithub.com/olsonpm))
-   [#&#8203;2686](https://togithub.com/mochajs/mocha/issues/2686): Print failure message when `--forbid-pending` or `--forbid-only` is specified ([@&#8203;ScottFreeCode](https://togithub.com/ScottFreeCode))
-   [#&#8203;2814](https://togithub.com/mochajs/mocha/pull/2814): Indent contexts for better readability when reporting failures ([@&#8203;charlierudolph](https://togithub.com/charlierudolph))

#### :-1: Deprecations

-   [#&#8203;2493](https://togithub.com/mochajs/mocha/issues/2493): The `--compilers` command-line option is now soft-deprecated and will emit a warning on `STDERR`. Read [this](https://togithub.com/mochajs/mocha/wiki/compilers-deprecation) for more info and workarounds ([@&#8203;ScottFreeCode](https://togithub.com/ScottFreeCode), [@&#8203;boneskull](https://togithub.com/boneskull))

#### :tada: Enhancements

-   [#&#8203;2628](https://togithub.com/mochajs/mocha/issues/2628): Allow override of default test suite name in XUnit reporter ([@&#8203;ngeor](https://togithub.com/ngeor))

#### :book: Documentation

-   [#&#8203;3020](https://togithub.com/mochajs/mocha/pull/3020): Link to CLA in `README.md` and `CONTRIBUTING.md` ([@&#8203;skeggse](https://togithub.com/skeggse))

#### :nut_and_bolt: Other

-   [#&#8203;2890](https://togithub.com/mochajs/mocha/issues/2890): Speed up build by (re-)consolidating SauceLabs tests ([@&#8203;boneskull](https://togithub.com/boneskull))

</details>

---

### Renovate configuration

:date: **Schedule**: At any time (no schedule defined).

:vertical_traffic_light: **Automerge**: Disabled by config. Please merge this manually once you are satisfied.

:recycle: **Rebasing**: Whenever PR becomes conflicted, or if you modify the PR title to begin with "`rebase!`".

:no_bell: **Ignore**: Close this PR and you won't be reminded about this update again.

---

 - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box

---

This PR has been generated by [WhiteSource Renovate](https://renovate.whitesourcesoftware.com). View repository job log [here](https://app.renovatebot.com/dashboard#http-party/node-http-proxy).
`follow-redirects` defaults `maxBodyLength` to 10MB.

http-proxy does not expose a way to set any options for this module, what's worse is that the error is actually swallowed silently and the request aborted... 

Converted url.parse over to URL object
Updated 'var' to let/const where appropriate

TODO: Review & Discuss this change, then perform cleanup
I have some strange problem, if I launch AXIOS or proxy twice, it doesn't send the correct headers to the second one.

## My logic:
- Server (http.createServer) get client petition
- Launch proxy to "json-server" using the proxy
  - ALTERNATIVE CODE: Use AXIOS to get "json-server" data
  - BOTH: Duplicates with lodash `_.cloneDeep` the request
     - (If I use it directly, it not work)
     - If I use `cloned.headers` don't work
     - If I do nothing (not clone), it doesn't work
- If mock reply error (404/500) launch the second proxy.

If I launch directly the `second proxy` (development environment), the server can't handle the correct reply, so break the petition.

If I launch TWO AXIOS (simply imitating the original request) it WORKS.

So, when you launch SOME `.headers` proxy don't launch correctly the query (if I remove from the first axios, it works).

## Example code (one of the multiple tests I've done)

```js
const PORT = 8080;
const TARGET_URL = 'http://192.168.100.13:9081/';
const TIMEOUT = 300;

// Load the mock server instance
// const MOCK_SERVER = require('./mock-server'); // This will launch an "json-server" on other port

// Script dependences
const http = require('http');
const httpProxy = require('http-proxy');
const axios = require('axios').default;
const _ = require('lodash');

// const httpStatus = require('http-status');

// Create proxy for mock server (currently not used but AXIOS)
// var proxyMock = httpProxy.createProxyServer({
//   target: 'http://localhost:3001',
//   selfHandleResponse : true,
//   preserveHeaderKeyCase: true,
//   // proxyTimeout: 10000,
//   // timeout: 10000,
//   // ignorePath: true,
// });

// Create proxy for back end
var proxyBackEnd = httpProxy.createProxyServer({
  target: TARGET_URL,
  // selfHandleResponse : false,
  // proxyTimeout: 10000,
  // timeout: 10000,
});


// Create the server listener which will proxy to mocks or BE
const httpServer = http.createServer((req, res) => {
  // console.log('request', req.url)
  
  const requestOr = _.cloneDeep(req);

  // Launch the proxy request to mock server
    mockServerRequest(req, res, () => {
      console.log('Redirecting to backend')
      proxyBackEnd.web(req, res, {
        ...requestOr, // The latest try
      }, (error) => {
        // req.flushHeaders();
        console.error('BACKEND:', error);
      });
    })
});


httpServer.listen(PORT, (err) => {
  console.log('Main server is running on port ' + PORT);
});


function mockServerRequest(req, res, realBackendCallback = null) {
  const requestCopy = _.cloneDeep(req);
  const requestAxios = {
    method: requestCopy.method,
    url: requestCopy.url,
    headers: requestCopy.headers, // WITH THIS COMMENTED, IT WILL WORK
    withCredentials: true,
    baseURL: 'http://localhost:3001',
    data: requestCopy.body
  };

  // console.log(requestAxios);
  axios(requestAxios)
  // axios.request(req)
    .then(() => {
      // console.log(response);
      // console.log('success', res);
      console.log('success');
      // TODO: Set response headers

    //   This won't work if "headers:" send
      realBackendCallback(req);

    //   res.end('OK');
    })
    .catch((error) => {
      // console.log('AXIOS ERROR:', error);
      if (realBackendCallback) {
        realBackendCallback(req);
      }
    });
}
```

## Temporal solution:

As I mentioned, we found a method: create AXIOS instance for "mock-server", if it doesn't work, we recreate another AXIOS to the backend (in our case don't need cookies or something "hard").

This PR contains the following updates:

| Package | Type | Update | Change |
|---|---|---|---|
| [nyc](https://togithub.com/istanbuljs/nyc) | devDependencies | major | [`^14.0.0` -> `^15.0.0`](https://renovatebot.com/diffs/npm/nyc/14.1.1/15.0.0) |

---

### Release Notes

<details>
<summary>istanbuljs/nyc</summary>

### [`v15.0.0`](https://togithub.com/istanbuljs/nyc/blob/master/CHANGELOG.md#&#8203;1500httpsgithubcomistanbuljsnyccomparev1411v1500-2019-12-20)

[Compare Source](https://togithub.com/istanbuljs/nyc/compare/v14.1.1...v15.0.0)

##### ⚠ BREAKING CHANGES

-   The `flow` and `jsx` parser plugins are no longer
    enabled by default.
-   Node.js 8 is now required to run nyc
-   Remove NYC_ROOT_ID and NYC_INSTRUMENTER environmental
    variables.
-   The `root` field has been removed from processinfo
    files.

##### Features

-   Add `--use-spawn-wrap=true` option ([#&#8203;1169](https://togithub.com/istanbuljs/nyc/issues/1169)) ([df4de4d](https://togithub.com/istanbuljs/nyc/commit/df4de4d490f8cd32204fba66a810ed0444c26d0d))
-   Add `.cjs`, `.mjs`, `.ts`, `.tsx`, `.jsx` to default extensions ([#&#8203;1110](https://togithub.com/istanbuljs/nyc/issues/1110)) ([914b776](https://togithub.com/istanbuljs/nyc/commit/914b776215ad3ea54f0e46b4ba2904a8a9d4dfdd)), closes [#&#8203;1103](https://togithub.com/istanbuljs/nyc/issues/1103)
-   Allow `nyc instrument` to instrument code in place ([#&#8203;1149](https://togithub.com/istanbuljs/nyc/issues/1149)) ([7783284](https://togithub.com/istanbuljs/nyc/commit/77832845b85134d21eca3a23c812c4f21f36713f))
-   Drop node.js 6, upgrade dependencies ([#&#8203;1134](https://togithub.com/istanbuljs/nyc/issues/1134)) ([00c3b34](https://togithub.com/istanbuljs/nyc/commit/00c3b3440a5b2ffe11b9c19ae4e08ad2f5b70e33))
-   Filenames relative to project cwd in coverage reports ([#&#8203;1212](https://togithub.com/istanbuljs/nyc/issues/1212)) ([5258e9f](https://togithub.com/istanbuljs/nyc/commit/5258e9fdb1d9e3d4abd4cc9768bc09cd8040a6be))
-   Use [@&#8203;istanbuljs/schema](https://togithub.com/istanbuljs/schema) for yargs setup ([#&#8203;1194](https://togithub.com/istanbuljs/nyc/issues/1194)) ([fd40d49](https://togithub.com/istanbuljs/nyc/commit/fd40d49331665d936b86f30e9a873ba80071b770))
-   Use istanbul-lib-processinfo ([#&#8203;1145](https://togithub.com/istanbuljs/nyc/issues/1145)) ([7943413](https://togithub.com/istanbuljs/nyc/commit/7943413dc032f8f98a164fdde88d7344e817bb5e))
-   Use source base name to prefix cache files ([#&#8203;1144](https://togithub.com/istanbuljs/nyc/issues/1144)) ([5c1b7a9](https://togithub.com/istanbuljs/nyc/commit/5c1b7a9c43771f3439af44a1104e5426519e1123))

##### Bug Fixes

-   Avoid `source-map` module during `signal-exit` handler ([#&#8203;1191](https://togithub.com/istanbuljs/nyc/issues/1191)) ([83eb629](https://togithub.com/istanbuljs/nyc/commit/83eb6294f9492bf98405ee9fdf6281c3bc199a3d))
-   Better error handling for main execution, reporting ([#&#8203;1229](https://togithub.com/istanbuljs/nyc/issues/1229)) ([dfd629d](https://togithub.com/istanbuljs/nyc/commit/dfd629d95716e6159aa7216c03e28a7fbbb161e7))
-   Correct handling of source-maps for pre-instrumented files ([#&#8203;1216](https://togithub.com/istanbuljs/nyc/issues/1216)) ([8411a26](https://togithub.com/istanbuljs/nyc/commit/8411a26c9e520c66251cc8044cde2c81f33f1c5f)), closes [#&#8203;1208](https://togithub.com/istanbuljs/nyc/issues/1208)
-   Drop coverage produced by `nyc --all` for files that were tested ([#&#8203;1155](https://togithub.com/istanbuljs/nyc/issues/1155)) ([fc1bbbf](https://togithub.com/istanbuljs/nyc/commit/fc1bbbf490f6ab0272359ce10ceb4987d1716256)), closes [#&#8203;1113](https://togithub.com/istanbuljs/nyc/issues/1113) [#&#8203;1124](https://togithub.com/istanbuljs/nyc/issues/1124) [#&#8203;1148](https://togithub.com/istanbuljs/nyc/issues/1148)
-   Honor eager setting (false by default) ([#&#8203;1179](https://togithub.com/istanbuljs/nyc/issues/1179)) ([c18fb0a](https://togithub.com/istanbuljs/nyc/commit/c18fb0a9a8eae5904298d87c62d9934243de8674))
-   Remove vestigial environment variables ([#&#8203;1078](https://togithub.com/istanbuljs/nyc/issues/1078)) ([cfd3da0](https://togithub.com/istanbuljs/nyc/commit/cfd3da05156b98952f03f7be2dd3d23ba328073f))

</details>

---

### Renovate configuration

:date: **Schedule**: At any time (no schedule defined).

:vertical_traffic_light: **Automerge**: Disabled by config. Please merge this manually once you are satisfied.

:recycle: **Rebasing**: Whenever PR becomes conflicted, or if you modify the PR title to begin with "`rebase!`".

:no_bell: **Ignore**: Close this PR and you won't be reminded about this update again.

---

 - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box

---

This PR has been generated by [WhiteSource Renovate](https://renovate.whitesourcesoftware.com). View repository job log [here](https://app.renovatebot.com/dashboard#http-party/node-http-proxy).
I have been able to write a proxy for one domain that supports HTTPS, but I have two domains and only server; can't find how this might be supported, or even if it is.

All my starter code is here: https://stackoverflow.com/questions/59254619/write-ssl-proxy-for-multi-domain-web-server-using-node-and-http-proxy

I can proxy HTTP with 2 domains, but what about HTTPS? 
Following issues https://github.com/http-party/node-http-proxy/issues/490 and https://github.com/http-party/node-http-proxy/issues/1403, currently the library does not support async handler for the `proxyReqWs` event for modifying the request before proxying it forward.

This suggested PR solved the problem, without breaking backward compatibility, by introducing a new argument `asyncContext` which is used as follows:

```js 

onProxyReqWs: (proxyReq, req, socket, options, head, asyncContext) =>
      asyncContext(async () => {
        // code ...
        const result = await anyAsyncOperation()
        // code ...
        proxyReq.setHeader('key', result)
      }),

```
This PR contains the following updates:

| Package | Type | Update | Change |
|---|---|---|---|
| [semver](https://togithub.com/npm/node-semver) | devDependencies | major | [`^5.0.3` -> `^7.0.0`](https://renovatebot.com/diffs/npm/semver/5.7.1/7.1.1) |

---

### Release Notes

<details>
<summary>npm/node-semver</summary>

### [`v7.1.1`](https://togithub.com/npm/node-semver/compare/v7.1.0...v7.1.1)

[Compare Source](https://togithub.com/npm/node-semver/compare/v7.1.0...v7.1.1)

### [`v7.1.0`](https://togithub.com/npm/node-semver/blob/master/CHANGELOG.md#&#8203;710)

[Compare Source](https://togithub.com/npm/node-semver/compare/v7.0.0...v7.1.0)

-   Add `require('semver/preload')` to load the entire module without using
    lazy getter methods.

### [`v7.0.0`](https://togithub.com/npm/node-semver/blob/master/CHANGELOG.md#&#8203;700)

[Compare Source](https://togithub.com/npm/node-semver/compare/v6.3.0...v7.0.0)

-   Refactor module into separate files for better tree-shaking
-   Drop support for very old node versions, use const/let, `=>` functions,
    and classes.

### [`v6.3.0`](https://togithub.com/npm/node-semver/blob/master/CHANGELOG.md#&#8203;630)

[Compare Source](https://togithub.com/npm/node-semver/compare/v6.2.0...v6.3.0)

-   Expose the token enum on the exports

### [`v6.2.0`](https://togithub.com/npm/node-semver/blob/master/CHANGELOG.md#&#8203;620)

[Compare Source](https://togithub.com/npm/node-semver/compare/v6.1.3...v6.2.0)

-   Coerce numbers to strings when passed to semver.coerce()
-   Add `rtl` option to coerce from right to left

### [`v6.1.3`](https://togithub.com/npm/node-semver/blob/master/CHANGELOG.md#&#8203;613)

[Compare Source](https://togithub.com/npm/node-semver/compare/v6.1.2...v6.1.3)

-   Handle X-ranges properly in includePrerelease mode

### [`v6.1.2`](https://togithub.com/npm/node-semver/blob/master/CHANGELOG.md#&#8203;612)

[Compare Source](https://togithub.com/npm/node-semver/compare/v6.1.1...v6.1.2)

-   Do not throw when testing invalid version strings

### [`v6.1.1`](https://togithub.com/npm/node-semver/blob/master/CHANGELOG.md#&#8203;611)

[Compare Source](https://togithub.com/npm/node-semver/compare/v6.1.0...v6.1.1)

-   Add options support for semver.coerce()
-   Handle undefined version passed to Range.test

### [`v6.1.0`](https://togithub.com/npm/node-semver/blob/master/CHANGELOG.md#&#8203;610)

[Compare Source](https://togithub.com/npm/node-semver/compare/v6.0.0...v6.1.0)

-   Add semver.compareBuild function
-   Support `*` in semver.intersects

### [`v6.0.0`](https://togithub.com/npm/node-semver/compare/v5.7.1...v6.0.0)

[Compare Source](https://togithub.com/npm/node-semver/compare/v5.7.1...v6.0.0)

</details>

---

### Renovate configuration

:date: **Schedule**: At any time (no schedule defined).

:vertical_traffic_light: **Automerge**: Disabled by config. Please merge this manually once you are satisfied.

:recycle: **Rebasing**: Whenever PR becomes conflicted, or if you modify the PR title to begin with "`rebase!`".

:no_bell: **Ignore**: Close this PR and you won't be reminded about this update again.

---

 - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box

---

This PR has been generated by [WhiteSource Renovate](https://renovate.whitesourcesoftware.com). View repository job log [here](https://app.renovatebot.com/dashboard#http-party/node-http-proxy).
In order to measure the duration of a proxified request (request sent to backend and reponse back, useful for logs), it might be nice to have the request object given back to **end** event callback to discriminate concurrente requests.
Another solution would be to simply implement such value/property given back to end event callback?

What do you think?
Need to sniff WebSocket messages from client to server. Tried following snippet from the documentation. But it's giving Reference Error: hybiParseAndLogMessage is not defined
```
proxy.on('open', function (proxySocket) {
  // listen for messages coming FROM the target here
  proxySocket.on('data', hybiParseAndLogMessage);
});

```
does that mean writing my own WebSocket stream parser and use it there?