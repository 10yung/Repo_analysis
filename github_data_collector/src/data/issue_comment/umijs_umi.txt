Here's the **Weekly Digest** for [*umijs/umi*](https://github.com/umijs/umi):

 - - - 
# ISSUES
Last week 32 issues were created.
Of these, 13 issues have been closed and 19 issues are still open.
## OPEN ISSUES
:green_heart: #3935 [feat: support all history options for each history type](https://github.com/umijs/umi/pull/3935), by [zhiyuc123](https://github.com/zhiyuc123)
:green_heart: #3932 [使用脚手架创建工程，安装依赖报错](https://github.com/umijs/umi/issues/3932), by [knightingal](https://github.com/knightingal)
:green_heart: #3931 [fix: umi-ui moment locale](https://github.com/umijs/umi/pull/3931), by [ycjcl868](https://github.com/ycjcl868)
:green_heart: #3930 [ 刷新浏览器，不展开路由相匹配的menu](https://github.com/umijs/umi/issues/3930), by [duchaojie](https://github.com/duchaojie)
:green_heart: #3929 [axios请求报500,400后，不深度刷新页面的情况下进入组件中再次触发请求，this.props.dispatch,不在被执行，其他非mode里面的异步方法可正常请求。这是为什么](https://github.com/umijs/umi/issues/3929), by [jerry625257379](https://github.com/jerry625257379)
:green_heart: #3928 [修复NotFound在卸载后setState的问题](https://github.com/umijs/umi/pull/3928), by [yuyic](https://github.com/yuyic)
:green_heart: #3926 [How to pass dva-loading configLoading opts?](https://github.com/umijs/umi/issues/3926), by [bravoeguizabal](https://github.com/bravoeguizabal)
:green_heart: #3924 [使用 yarn create umi 创建 ant design pro，选择 TS 却得到 JS 版本代码](https://github.com/umijs/umi/issues/3924), by [heming6666](https://github.com/heming6666)
:green_heart: #3920 [上传类请求支持通过mock  json 对象响应](https://github.com/umijs/umi/pull/3920), by [DelBlank](https://github.com/DelBlank)
:green_heart: #3919 [history和single-spa冲突，单一回调会重复执行两次，导致umi和qiankun一起使用时行为异常 ](https://github.com/umijs/umi/issues/3919), by [shengbeiniao](https://github.com/shengbeiniao)
:green_heart: #3918 [fix:avoid require method warning](https://github.com/umijs/umi/pull/3918), by [JChord](https://github.com/JChord)
:green_heart: #3916 [权限路由修改不能实时编译](https://github.com/umijs/umi/issues/3916), by [llfylwg](https://github.com/llfylwg)
:green_heart: #3915 [-webkit-box-orient: vertical; 编译后丢失！！！](https://github.com/umijs/umi/issues/3915), by [GeNa-jj](https://github.com/GeNa-jj)
:green_heart: #3914 [面包屑给的例子中，Breadcrumbs.js有2处错误](https://github.com/umijs/umi/issues/3914), by [gitNodeJs](https://github.com/gitNodeJs)
:green_heart: #3913 [Configuration routing doesn't work if routes are more than two level deep](https://github.com/umijs/umi/issues/3913), by [aquibbaig](https://github.com/aquibbaig)
:green_heart: #3911 [[Feature Request] 针对型项目的targets](https://github.com/umijs/umi/issues/3911), by [hzgotb](https://github.com/hzgotb)
:green_heart: #3908 [Translate or customize the message: "Disconnected from the devServer, trying to reconnect..." ](https://github.com/umijs/umi/issues/3908), by [michelveloso](https://github.com/michelveloso)
:green_heart: #3905 [在Layout组件里面我想这样子向子路由组件传递属性，传递不过去，有办法嘛](https://github.com/umijs/umi/issues/3905), by [bibiehy](https://github.com/bibiehy)
:green_heart: #3904 [Better type](https://github.com/umijs/umi/pull/3904), by [chenshuai2144](https://github.com/chenshuai2144)
## CLOSED ISSUES
:heart: #3934 [[Feature Request] 有打算對Doc 進行English Translation嗎?我有空可以幫忙](https://github.com/umijs/umi/issues/3934), by [JonathanSum](https://github.com/JonathanSum)
:heart: #3933 [如何通过config/config.js中的theme配置，使用antd v4 的dark theme?](https://github.com/umijs/umi/issues/3933), by [jonahfang](https://github.com/jonahfang)
:heart: #3927 [Update deploy.md](https://github.com/umijs/umi/pull/3927), by [vegan2019](https://github.com/vegan2019)
:heart: #3925 [使用指定端口后,启动报错](https://github.com/umijs/umi/issues/3925), by [joesdu](https://github.com/joesdu)
:heart: #3923 [fix: ui message group error](https://github.com/umijs/umi/pull/3923), by [ycjcl868](https://github.com/ycjcl868)
:heart: #3922 [怎么关闭umi项目的eslint？](https://github.com/umijs/umi/issues/3922), by [980961628](https://github.com/980961628)
:heart: #3921 [Revert "chore(umi-plugin-react): upgrade the preact version to 10.x (…](https://github.com/umijs/umi/pull/3921), by [ycjcl868](https://github.com/ycjcl868)
:heart: #3917 [fix: umi ui flag ts](https://github.com/umijs/umi/pull/3917), by [ycjcl868](https://github.com/ycjcl868)
:heart: #3912 [create umi 报错](https://github.com/umijs/umi/issues/3912), by [hanfengmi](https://github.com/hanfengmi)
:heart: #3910 [chore: upgrade father-build](https://github.com/umijs/umi/pull/3910), by [ycjcl868](https://github.com/ycjcl868)
:heart: #3909 [fix: ui dark theme var](https://github.com/umijs/umi/pull/3909), by [ycjcl868](https://github.com/ycjcl868)
:heart: #3907 [feat: expose "urls" on "onDevCompileDone" hook.](https://github.com/umijs/umi/pull/3907), by [ulivz](https://github.com/ulivz)
:heart: #3906 [fix: ui bubble line-heigth and add umi-request api](https://github.com/umijs/umi/pull/3906), by [ycjcl868](https://github.com/ycjcl868)
## NOISY ISSUE
:speaker: #3933 [如何通过config/config.js中的theme配置，使用antd v4 的dark theme?](https://github.com/umijs/umi/issues/3933), by [jonahfang](https://github.com/jonahfang)
It received 4 comments.

 - - - 
# PULL REQUESTS
Last week, 14 pull requests were created, updated or merged.
## UPDATED PULL REQUEST
Last week, 6 pull requests were updated.
:yellow_heart: #3935 [feat: support all history options for each history type](https://github.com/umijs/umi/pull/3935), by [zhiyuc123](https://github.com/zhiyuc123)
:yellow_heart: #3931 [fix: umi-ui moment locale](https://github.com/umijs/umi/pull/3931), by [ycjcl868](https://github.com/ycjcl868)
:yellow_heart: #3928 [修复NotFound在卸载后setState的问题](https://github.com/umijs/umi/pull/3928), by [yuyic](https://github.com/yuyic)
:yellow_heart: #3920 [上传类请求支持通过mock  json 对象响应](https://github.com/umijs/umi/pull/3920), by [DelBlank](https://github.com/DelBlank)
:yellow_heart: #3918 [fix:avoid require method warning](https://github.com/umijs/umi/pull/3918), by [JChord](https://github.com/JChord)
:yellow_heart: #3904 [Better type](https://github.com/umijs/umi/pull/3904), by [chenshuai2144](https://github.com/chenshuai2144)
## MERGED PULL REQUEST
Last week, 8 pull requests were merged.
:purple_heart: #3927 [Update deploy.md](https://github.com/umijs/umi/pull/3927), by [vegan2019](https://github.com/vegan2019)
:purple_heart: #3923 [fix: ui message group error](https://github.com/umijs/umi/pull/3923), by [ycjcl868](https://github.com/ycjcl868)
:purple_heart: #3921 [Revert "chore(umi-plugin-react): upgrade the preact version to 10.x (…](https://github.com/umijs/umi/pull/3921), by [ycjcl868](https://github.com/ycjcl868)
:purple_heart: #3917 [fix: umi ui flag ts](https://github.com/umijs/umi/pull/3917), by [ycjcl868](https://github.com/ycjcl868)
:purple_heart: #3910 [chore: upgrade father-build](https://github.com/umijs/umi/pull/3910), by [ycjcl868](https://github.com/ycjcl868)
:purple_heart: #3909 [fix: ui dark theme var](https://github.com/umijs/umi/pull/3909), by [ycjcl868](https://github.com/ycjcl868)
:purple_heart: #3907 [feat: expose "urls" on "onDevCompileDone" hook.](https://github.com/umijs/umi/pull/3907), by [ulivz](https://github.com/ulivz)
:purple_heart: #3906 [fix: ui bubble line-heigth and add umi-request api](https://github.com/umijs/umi/pull/3906), by [ycjcl868](https://github.com/ycjcl868)

 - - - 
# COMMITS
Last week there were 12 commits.
:hammer_and_wrench: [Update deploy.md (#3927)  又没有定义 fallback 的路由，比如 404，那就会显示空白页。](https://github.com/umijs/umi/commit/3285a1f97faf787cef273b892ec321a7708403e1) by [vegan2019](https://github.com/vegan2019)
:hammer_and_wrench: [Publish   - umi-plugin-react@1.15.2  - umi-ui@1.4.2  - umi@2.13.3](https://github.com/umijs/umi/commit/eac6e99f7a6bfb1f994f760bf68deead0ea2829b) by [ycjcl868](https://github.com/ycjcl868)
:hammer_and_wrench: [Revert "chore(umi-plugin-react): upgrade the preact version to 10.x (#3855)" (#3921)  This reverts commit 275cc743f1c20eb0e8704c0d45bc6dc0f44f4062.](https://github.com/umijs/umi/commit/6654dea6b8cd911ab606b72d89270cb2f7c5e2b3) by [ycjcl868](https://github.com/ycjcl868)
:hammer_and_wrench: [fix: ui message group ui (#3923)](https://github.com/umijs/umi/commit/57bceda81dfaeaf2cfc20a46da690b20417045b6) by [ycjcl868](https://github.com/ycjcl868)
:hammer_and_wrench: [Publish   - umi@2.13.2](https://github.com/umijs/umi/commit/9a651a8dbed0dac98f5e3b955fadeb62c989ef13) by [ycjcl868](https://github.com/ycjcl868)
:hammer_and_wrench: [fix: umi ui flag ts (#3917)](https://github.com/umijs/umi/commit/ca7baada9337a439ba3ad737c7dddc6361a354ac) by [ycjcl868](https://github.com/ycjcl868)
:hammer_and_wrench: [Publish   - af-webpack@1.14.7  - babel-preset-umi@1.8.3  - umi-build-dev@1.17.1  - umi-core@1.9.7  - umi-plugin-auto-externals@1.5.7  - umi-plugin-react@1.15.1  - umi-plugin-routes@1.8.7  - umi-plugin-ui@1.5.1  - umi-serve@1.9.8  - umi-test@1.9.3  - umi-types@0.5.12  - umi-ui-tasks@1.3.10  - umi-ui-theme@1.2.3  - umi-ui@1.4.1  - umi@2.13.1](https://github.com/umijs/umi/commit/dccaf286f6e4438495657fa986b760df9ff6689d) by [ycjcl868](https://github.com/ycjcl868)
:hammer_and_wrench: [chore: upgrade father-build (#3910)  * chore: upgrade father-build version  * fix: fatherrc peerDeps  * fix: add npmClient required](https://github.com/umijs/umi/commit/86a8fa7c5de32255115c2909e9493c8d6b651c3e) by [ycjcl868](https://github.com/ycjcl868)
:hammer_and_wrench: [fix: ui dark theme var (#3909)  * fix: dark base  * fix: test](https://github.com/umijs/umi/commit/0709a60faedd4f584021189747d6ee9504baa5ce) by [ycjcl868](https://github.com/ycjcl868)
:hammer_and_wrench: [fix: ui bubble line-heigth and add umi-request api (#3906)  * fix: ui bubble line heigth  * upd: yarn.lock version  * fix: babel test  * feat: api.request](https://github.com/umijs/umi/commit/b72c521ce329fd525301bb9b183940fcccaa69ad) by [ycjcl868](https://github.com/ycjcl868)
:hammer_and_wrench: [feat($plugin): expose "urls" on "onDevCompileDone" hook. (#3907)](https://github.com/umijs/umi/commit/1333bf52707368f28a89aebfd70ead77d3f517d6) by [ulivz](https://github.com/ulivz)
:hammer_and_wrench: [Publish   - umi-build-dev@1.17.0  - umi-plugin-react@1.15.0  - umi-plugin-ui@1.5.0  - umi-ui@1.4.0  - umi@2.13.0](https://github.com/umijs/umi/commit/c0a2ac5aa91ac70a05a35ed8e31b4c283c693f0c) by [ycjcl868](https://github.com/ycjcl868)

 - - - 
# CONTRIBUTORS
Last week there were 3 contributors.
:bust_in_silhouette: [vegan2019](https://github.com/vegan2019)
:bust_in_silhouette: [ycjcl868](https://github.com/ycjcl868)
:bust_in_silhouette: [ulivz](https://github.com/ulivz)

 - - - 
# STARGAZERS
Last week there were 60 stagazers.
:star: [jpdan](https://github.com/jpdan)
:star: [ZeroKill1024](https://github.com/ZeroKill1024)
:star: [sqrtsix](https://github.com/sqrtsix)
:star: [Kaisir](https://github.com/Kaisir)
:star: [Inakiz](https://github.com/Inakiz)
:star: [lwdgit](https://github.com/lwdgit)
:star: [1wyf](https://github.com/1wyf)
:star: [shimaomao](https://github.com/shimaomao)
:star: [charles0212](https://github.com/charles0212)
:star: [jgcmarins](https://github.com/jgcmarins)
:star: [zhangminqiang](https://github.com/zhangminqiang)
:star: [p01000](https://github.com/p01000)
:star: [huangang](https://github.com/huangang)
:star: [nova-qiang](https://github.com/nova-qiang)
:star: [dreampasssser](https://github.com/dreampasssser)
:star: [Bigcaitou](https://github.com/Bigcaitou)
:star: [threefish](https://github.com/threefish)
:star: [chengxc](https://github.com/chengxc)
:star: [Octavio000416](https://github.com/Octavio000416)
:star: [jiniechen](https://github.com/jiniechen)
:star: [ThienPhuc92](https://github.com/ThienPhuc92)
:star: [yunyi1895](https://github.com/yunyi1895)
:star: [wangjingf](https://github.com/wangjingf)
:star: [cnitfarmer](https://github.com/cnitfarmer)
:star: [ericsun2](https://github.com/ericsun2)
:star: [divayang](https://github.com/divayang)
:star: [ShaoWeibin](https://github.com/ShaoWeibin)
:star: [lPaths](https://github.com/lPaths)
:star: [qhanw](https://github.com/qhanw)
:star: [zousandian](https://github.com/zousandian)
:star: [swordcarefree](https://github.com/swordcarefree)
:star: [qinjia](https://github.com/qinjia)
:star: [717021](https://github.com/717021)
:star: [ShirlyChenLaLaLa](https://github.com/ShirlyChenLaLaLa)
:star: [1466587594](https://github.com/1466587594)
:star: [yale8848](https://github.com/yale8848)
:star: [980961628](https://github.com/980961628)
:star: [eamonzym](https://github.com/eamonzym)
:star: [lgqAozora](https://github.com/lgqAozora)
:star: [jiaoyk](https://github.com/jiaoyk)
:star: [ManuRodgers](https://github.com/ManuRodgers)
:star: [yunusbayazit](https://github.com/yunusbayazit)
:star: [exceptiondc](https://github.com/exceptiondc)
:star: [Diaoyu1988](https://github.com/Diaoyu1988)
:star: [godlin-gh](https://github.com/godlin-gh)
:star: [qixiaobro](https://github.com/qixiaobro)
:star: [zhangjiuyang](https://github.com/zhangjiuyang)
:star: [ceopaludetto](https://github.com/ceopaludetto)
:star: [YJeremy](https://github.com/YJeremy)
:star: [ballackCaptian](https://github.com/ballackCaptian)
:star: [cyz980908](https://github.com/cyz980908)
:star: [Clementine1995](https://github.com/Clementine1995)
:star: [Jude-summery](https://github.com/Jude-summery)
:star: [zasqw2222](https://github.com/zasqw2222)
:star: [eddy99](https://github.com/eddy99)
:star: [lblblong](https://github.com/lblblong)
:star: [wangcheng319](https://github.com/wangcheng319)
:star: [kapbook-zhuhaibo](https://github.com/kapbook-zhuhaibo)
:star: [devmsg](https://github.com/devmsg)
:star: [AnHongpeng](https://github.com/AnHongpeng)
You all are the stars! :star2:

 - - - 
# RELEASES
Last week there were 4 releases.
:rocket: [umi@2.13.3 umi@2.13.3](https://github.com/umijs/umi/releases/tag/umi%402.13.3)
:rocket: [umi@2.13.2 umi@2.13.2](https://github.com/umijs/umi/releases/tag/umi%402.13.2)
:rocket: [umi@2.13.1 umi@2.13.1](https://github.com/umijs/umi/releases/tag/umi%402.13.1)
:rocket: [umi@2.13.0 umi@2.13.0](https://github.com/umijs/umi/releases/tag/umi%402.13.0)

 - - - 

That's all for last week, please <kbd>:eyes: **Watch**</kbd> and <kbd>:star: **Star**</kbd> the repository [*umijs/umi*](https://github.com/umijs/umi) to receive next weekly updates. :smiley:

*You can also [view all Weekly Digests by clicking here](https://github.com/umijs/umi/issues?q=is:open+is:issue+label:weekly-digest).* 

> Your [**Weekly Digest**](https://github.com/apps/weekly-digest) bot. :calendar:

## What happens?
` starting  node service.js  `一直提示错误

[示例工程](https://github.com/umijs/umi-server/tree/master/examples/normal)可以正常使用
配置完全抄示例工程的

## Mini Showcase Repository(REQUIRED)

https://github.com/JonChanGit/test-umi-ssr

## How To Reproduce
 
`yarn run start`

## Context
![image](https://user-images.githubusercontent.com/20020550/72677545-8e1f8a00-3ad8-11ea-87f6-b09b0f470094.png)

- **Umi Version**:  2.12.5
- **Node Version**:  v10.15.3
- **Platform**:  Windows

<!--
Thank you for your pull request. Please review the below requirements.
Bug fixes and new features should include tests.
Contributors guide: https://github.com/umijs/umi/blob/master/CONTRIBUTING.md

感谢您贡献代码。请确认下列 checklist 的完成情况。
Bug 修复和新功能必须包含测试。
Contributors guide: https://github.com/umijs/umi/blob/master/CONTRIBUTING.md
-->

##### Checklist

<!-- Remove items that do not apply. For completed items, change [ ] to [x]. -->

- [x] `npm test` passes
- [ ] tests are included
- [ ] documentation is changed or added
- [x] commit message follows commit guidelines


##### Description of change

<!-- Provide a description of the change below this comment. -->

- dva plugin now ignore files that export a function.

在ssr模式下 dynamicImport 问题
1.开启dynamicImport后，组件不会卸载，但是会报服务端与客户端不一致
2.关闭dynamicImport后，组件会走到卸载，造成页面重新渲染，刷两次
3.走服务端渲染以后，在服务端打印的props和客户端打印的props，history和location内的query不一致，不知道会不会影响客户端尽行hydrate

复现方式 
[eggjs.zip](https://github.com/umijs/umi/files/4082225/eggjs.zip)

<!--
Thank you for your pull request. Please review the below requirements.
Bug fixes and new features should include tests.
Contributors guide: https://github.com/umijs/umi/blob/master/CONTRIBUTING.md

感谢您贡献代码。请确认下列 checklist 的完成情况。
Bug 修复和新功能必须包含测试。
Contributors guide: https://github.com/umijs/umi/blob/master/CONTRIBUTING.md
-->

##### Checklist

<!-- Remove items that do not apply. For completed items, change [ ] to [x]. -->

- [x] `npm test` passes
- [ ] tests are included
- [x] documentation is changed or added
- [ ] commit message follows commit guidelines


##### Description of change

<!-- Provide a description of the change below this comment. -->

- history 配置支持数组传入 history [支持的所有 options](https://github.com/ReactTraining/history/blob/master/docs/GettingStarted.md#basic-usage)

  可以通过传入getUserConfirmation函数或函数路径实现自定义的 confirmation。

  https://github.com/umijs/umi/issues/2503
  https://github.com/umijs/umi/issues/2337
  https://github.com/umijs/umi/issues/1688

  使用示例

  ```js
  // .umirc.js
  export default {
    history: [
      'hash',
      {
        basename: '',
        hashType: 'noslash'
        getUserConfirmation: './components/LeavePrompt', 
      }
    ],
  };
  ```

  ```js
  // /src/components/LeavePrompt.js
  import { Modal } from 'antd';
  export default function(message, callback) {
    Modal.confirm({
      title: message,
      onOk() {
        callback(true);
      },
      onCancel() {
       callback(false);
      },
    })
  }
  ```
 
  页面中配合 `umi/prompt` 即可实现自定义路由切换询问提示

- close https://github.com/umijs/umi/ISSUE_URL


-----
[View rendered docs/config/README.md](https://github.com/zhiyuc123/umi/blob/leaveConfirmation/docs/config/README.md)
[View rendered docs/zh/config/README.md](https://github.com/zhiyuc123/umi/blob/leaveConfirmation/docs/zh/config/README.md)
<!--
感谢您向我们反馈问题，为了高效的解决问题，我们期望你能提供以下信息：
-->

## What happens?

使用脚手架创建工程，安装依赖报错

## 最小可复现仓库

> 请使用 `yarn create umi` 创建，并上传到你的 GitHub 仓库

<!-- 为节约大家的时间，无复现步骤的 ISSUE 会被关闭，提供之后再 REOPEN -->
https://github.com/knightingal/umi-client

## 复现步骤，错误日志以及相关配置
1.
```npm create umi ```
2.
```
? Select the boilerplate type app
? Do you want to use typescript? Yes
? What functionality do you want to enable? dva
```
3
```
npm install
```
此时报错
```
npm WARN deprecated @types/webpack-chain@5.2.0: This is a stub types definition. webpack-chain provides its own type definitions, so you do not need this installed.
npm WARN deprecated core-js@2.6.0: core-js@<3 is no longer maintained and not recommended for usage due to the number of issues. Please, upgrade your dependencies to the actual version of core-js@3.npm WARN deprecated core-js@2.6.9: core-js@<3 is no longer maintained and not recommended for usage due to the number of issues. Please, upgrade your dependencies to the actual version of core-js@3.npm WARN deprecated core-js@2.6.11: core-js@<3 is no longer maintained and not recommended for usage due to the number of issues. Please, upgrade your dependencies to the actual version of core-js@3.
npm WARN deprecated joi@11.4.0: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).
npm WARN deprecated intl-relativeformat@2.2.0: This package has been deprecated, please see migration guide at 'https://github.com/formatjs/formatjs/tree/master/packages/intl-relativeformat#migration-guide'
npm WARN deprecated core-js@1.2.7: core-js@<3 is no longer maintained and not recommended for usage due to the number of issues. Please, upgrade your dependencies to the actual version of core-js@3.npm WARN deprecated hoek@4.2.1: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).
npm WARN deprecated topo@2.0.2: This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).
npm WARN deprecated superagent@3.8.3: Please note that v5.0.1+ of superagent removes User-Agent header by default, therefore you may need to add it yourself (e.g. GitHub blocks requests without a User-Agent header).  This notice will go away with v5.0.2+ once it is released.
npm WARN deprecated left-pad@1.3.0: use String.prototype.padStart()
npm WARN deprecated @types/vfile-message@2.0.0: This is a stub types definition. vfile-message provides its own type definitions, so you do not need this installed.
npm ERR! Unexpected end of JSON input while parsing near '...PjNRh3YtjeAbZ6oJSIUq/'

npm ERR! A complete log of this run can be found in:
npm ERR!     C:\Users\Knightingal\AppData\Roaming\npm-cache\_logs\2020-01-17T15_36_37_059Z-debug.log
```

<!-- 请提供复现步骤，错误日志以及相关配置 -->
<!-- 可以尝试不要锁版本，重新安装依赖试试先 -->

## 相关环境信息

- **Umi 版本**：
```
  "dependencies": {
    "dva": "^2.6.0-beta.6",
    "react": "^16.8.6",
    "react-dom": "^16.8.6"
  },
  "devDependencies": {
    "@types/jest": "^23.3.12",
    "@types/react": "^16.7.18",
    "@types/react-dom": "^16.0.11",
    "@types/react-test-renderer": "^16.0.3",
    "babel-eslint": "^9.0.0",
    "eslint": "^5.4.0",
    "eslint-config-umi": "^1.4.0",
    "eslint-plugin-flowtype": "^2.50.0",
    "eslint-plugin-import": "^2.14.0",
    "eslint-plugin-jsx-a11y": "^5.1.1",
    "eslint-plugin-react": "^7.11.1",
    "husky": "^0.14.3",
    "lint-staged": "^7.2.2",
    "react-test-renderer": "^16.7.0",
    "umi": "^2.9.0",
    "umi-plugin-react": "^1.8.0",
    "umi-types": "^0.3.0"
  },
```
- **Node 版本**：v12.14.1
- **操作系统**：Windows 10 1903

<!--
Thank you for your pull request. Please review the below requirements.
Bug fixes and new features should include tests.
Contributors guide: https://github.com/umijs/umi/blob/master/CONTRIBUTING.md

感谢您贡献代码。请确认下列 checklist 的完成情况。
Bug 修复和新功能必须包含测试。
Contributors guide: https://github.com/umijs/umi/blob/master/CONTRIBUTING.md
-->

##### Checklist

<!-- Remove items that do not apply. For completed items, change [ ] to [x]. -->

- [ ] `npm test` passes
- [ ] tests are included
- [ ] documentation is changed or added
- [ ] commit message follows commit guidelines


##### Description of change

<!-- Provide a description of the change below this comment. -->

- any feature?
- close https://github.com/umijs/umi/ISSUE_URL

## What happens?
使用create umi 创建ant-design-pro 项目并启动，刷新浏览器，不展开路由相匹配的菜单，菜单全部关闭了。


## How To Reproduce
**Steps to reproduce the behavior:**
1. 新创建ant-design-pro 项目，启动后刷新浏览器就可以复现问题

**Expected behavior**
1. 打开菜单，去到详情页，在详情页刷新浏览器，还能展开路由相应匹配菜单（高亮显示）.

- **Umi Version**:2.12.9
- **Node Version**:v10.14.1
- **Platform**:Mac

dva，组件中通过this.props.dispatch,调用mode里面的异步方法，请求方式是用的axios，如果请求服务器没有500,400，的错误返回，这this.props.dispatch，再次触发都正常，一旦服务器返回了这个500,400，那么再次触发这个this.props.dispatch，将不被执行，所以无法调用到dva里面的mode异步方法！------求大神解答下，这是为什么？急！
<!--
Thank you for your pull request. Please review the below requirements.
Bug fixes and new features should include tests.
Contributors guide: https://github.com/umijs/umi/blob/master/CONTRIBUTING.md

感谢您贡献代码。请确认下列 checklist 的完成情况。
Bug 修复和新功能必须包含测试。
Contributors guide: https://github.com/umijs/umi/blob/master/CONTRIBUTING.md
-->

##### Checklist

<!-- Remove items that do not apply. For completed items, change [ ] to [x]. -->

- [x] `npm test` passes
- [x] commit message follows commit guidelines


##### Description of change

<!-- Provide a description of the change below this comment. -->

- any feature?
- close https://github.com/umijs/umi/ISSUE_URL
