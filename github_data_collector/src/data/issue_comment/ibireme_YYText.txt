ä»£ç ä¸æ•ˆæœï¼Œè§å›¾ç‰‡ï¼š

![ä½¿ç”¨ç‰¹æ®Šæ–‡æœ¬æ—¶ï¼ŒYYLabelä¼šæœ‰ä¸€é•¿ä¸²çš„ç©ºæ ¼](https://i.loli.net/2019/12/30/CWyHPMDwRs274XK.png)
ä¿®å¤iOS13 ä¸Šè®¾ç½®yy_setBaselineOffsetä¸ç”Ÿæ•ˆçš„é—®é¢˜ã€‚
åœ¨Tableview é‡Œé¢ä½¿ç”¨äº†YYTextView ï¼Œå¯¼è‡´ç‚¹å‡»çŠ¶æ€æ æ²¡æ³•æ»šåŠ¨åˆ°é¡¶éƒ¨
YYLabelçš„attributedTextå±æ€§è®¾ç½®äº†åä¸èƒ½è·Ÿç€æ¨¡å¼çš„åˆ‡æ¢è€Œå˜åŒ–ã€‚æ˜¯ä¸æ˜¯ä¸æ”¯æŒé»‘æš—æ¨¡å¼

é•¿åº¦é™åˆ¶æ˜¯éå¸¸å¸¸è§çš„éœ€æ±‚ï¼Œä¹‹å‰ç”¨textfieldæ˜¯åœ¨
``` objectivec

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
```
å¹¶ä¸”åœ¨è¾“å…¥å†…å®¹å˜åŒ–ç›‘å¬é‡Œåšåˆ¤æ–­ï¼Œ
æ”¹ç”¨YYTextViewååŒæ ·åœ¨
```objectivec
-(BOOL)textView:(YYTextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
```
å’Œå†…å®¹å˜åŒ–ç›‘å¬é‡Œåšåˆ¤æ–­ï¼Œå‘ç°YYTextViewçš„æ­¤æ–¹æ³•å’Œç³»ç»Ÿçš„å®Œå…¨ä¸åŒ,ç³»ç»Ÿæ–¹æ³•æ­¤æ–¹æ³•é‡Œçš„é«˜äº®æƒ…å†µä¸‹stringæ˜¯æ¯æ¬¡è¾“å…¥çš„å­—ç¬¦ï¼Œä½†åœ¨YYTextViewé‡Œå°±æ˜¯æ‰€æœ‰é«˜äº®å­—ç¬¦ï¼Œå¹¶ä¸”å½“æˆ‘åšäº†é™åˆ¶returnåï¼Œé”®ç›˜ä¾ç„¶å¯ä»¥è¾“å…¥ï¼Œè¿™å¯¼è‡´ç”¨YYTextViewåšé•¿åº¦åˆ¤æ–­å˜å¾—å›°éš¾ï¼Œ
æ–‡å­—ã€ä¸‹åˆ’çº¿æ˜¾ç¤ºï¼Œé»˜è®¤æ˜¯ä¸‹åˆ’çº¿æ˜¯è´´ç€æ–‡å­—çš„ï¼Œå¯ä»¥è°ƒæ•´æ–‡å­—ä¸ä¸‹åˆ’çº¿ä¹‹é—´çš„é—´è·å—ï¼Ÿ
åœ¨è®¾ç½®NSLineBreakByTruncatingMiddleä¹‹åï¼Œå‘ç°YYLabelçš„æŠ˜è¡Œå’ŒUILabelçš„åŸç”Ÿæ•ˆæœä¸ä¸€æ ·ï¼Œæ€ä¹ˆç ´ï¼Ÿ
åœ¨ä½¿ç”¨YYTextViewçš„æ—¶å€™ , å¦‚æœä½¿ç”¨åŸç”Ÿçš„ç³»ç»Ÿè‹±æ–‡è¾“å…¥æ³• , è¾“å…¥ä¸€ä¸ªå­—ç¬¦ç„¶åç‚¹å‡»è”æƒ³çš„è¯ , ä¼šå¯¼è‡´æ·»åŠ å®Œå•è¯å , åœ¨ä¹‹å‰è¾“å…¥çš„å­—ç¬¦çš„åé¢å¤šäº†ä¸€ä¸ªç©ºæ ¼
![21wkm-1e75g](https://user-images.githubusercontent.com/16735123/66616952-7b5a0700-ec05-11e9-81a5-870cee4ce747.gif)

è€Œä½¿ç”¨ç¬¬ä¸‰æ–¹è¾“å…¥æ³•(æ¯”å¦‚æˆ‘ç”¨çš„ç™¾åº¦è¾“å…¥æ³•) è¿›è¡Œè”æƒ³è¾“å…¥åˆ™ä¼šæœ‰å…‰æ ‡ä½ç½®é—®é¢˜ , ä»¥åŠåŒå…‰æ ‡é—®é¢˜
![bd76a796-edc0-4114-92ee-1e4375e4dd2f](https://user-images.githubusercontent.com/16735123/66617371-6f6f4480-ec07-11e9-98d4-f8ef16488d27.gif)

ç¬¬ä¸€ä¸ªé—®é¢˜ , å®é™…ä¸Šæ˜¯ç³»ç»Ÿè¾“å…¥æ³•ç‚¹å‡»è”æƒ³çš„å•è¯ä¹‹å , ä¼šå†æ’å…¥ä¸€ä¸ªç©ºæ ¼ , è€ŒTextViewçš„å…‰æ ‡Rangeè¿˜æ²¡æœ‰æ›´æ–°å¯¼è‡´ã€‚ ç›®å‰æˆ‘çš„è§£å†³æ–¹æ³•æ˜¯åœ¨shouldChangeTextInRangeæ–¹æ³•ä¸­ , åšå…‰æ ‡Rangeçš„è®¾ç½®
```
- (BOOL)textView:(YYTextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text{
    __block NSRange curRange = textView.selectedRange;
    dispatch_async(dispatch_get_main_queue(), ^{
        curRange.location += (text.length - range.length);
        textView.selectedRange = curRange;
    });
    return YES;
}
```

ç¬¬äºŒä¸ªé—®é¢˜ä¹Ÿèƒ½ç”¨è¿™ä¸ªæ–¹æ³•è§£å†³ , ä½†æ˜¯åœ¨å•è¯å¤´éƒ¨è¿˜æ˜¯ä¼šæœ‰é‚£ä¸ªè™šå‡çš„å…‰æ ‡ , è™½ç„¶çœŸæ­£çš„å…‰æ ‡æ˜¯åé¢çš„é‚£ä¸ª , ä¸å½±å“è¾“å…¥ğŸ¤” , ç„¶è€Œè¿™ä¸ªä¸çŸ¥é“å…·ä½“åŸå› ä¹Ÿæ²¡è§£å†³æ€è·¯

[Window] Manually adding the rootViewController's view to the view hierarchy is no longer supported. Please allow UIWindow to add the rootViewController's view to the view hierarchy itself.