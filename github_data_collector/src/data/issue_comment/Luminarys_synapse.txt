I've been reading over the RPC code in synapse and I wonder if it would make sense to use a websocket crate like tungstenite to handle the the sockets and connections and the read/write implementations. I look forward to hearing opinions on this.
It seems synapse-rpc is on crates.io, but only defines the structs. There's a nice client inside sycli that is used to talk to the daemon, but when starting a project that automates synapse this code needs to be copy-pasted into the new project. Any chance this could be wrapped into a library on crates.io that can be imported into projects?
I've been unable to connect to a synapse instance with sycli over wss, whereas ws works fine. @Luminarys can you reproduce this?

If it means anything, receptor works fine.
Though if the synapse instance is listening on ws, then the cors policy in firefox prevents receptor from working. So I have the issue of not being able to use both. This is with current master.
Tribler protocol support for anonymised traffic would be a nice feature.
Hello,

I'm really liking this, but there is lack of a single feature that is preventing me from using it for all my torrenting. I figured out how to set separate watch directories by simply running multiple instances and combining that with fswatch and in general I really like how this is done as a very nice, self-contained, module. Please keep up the good work.

The feature I would like to recommend is the ability to move torrents to a configured directory upon completion. I apologize if this is already in there, but I couldn't find it in the configuration example or the source code.

Thank you
Here is the full activity log:
```
torrent@arni-pc ~ $ synapse
09/05/19 21:55:19 [synapse::init:24] I: Initializing
09/05/19 21:55:19 [synapse::config:173] I: Loaded config file
09/05/19 21:55:19 [synapse:112] I: Initialized, starting!
09/05/19 21:55:19 [synapse::rpc::processor:92] I: user data could not be read from disk, creating a fresh version: No such file or directory (os error 2)
09/05/19 21:55:19 [synapse::rpc:603] I: RPC SSL parameters not specified, using insecure connections!
09/05/19 21:55:19 [synapse::tracker::dht::rt:102] I: Loaded 23 dht buckets, 183 nodes
09/05/19 21:55:19 [synapse::tracker::dht:57] I: Attempting DHT bootstrap!
thread 'disk' panicked at 'index 207566898 out of range for slice of length 206518322', src/libcore/slice/mod.rs:2555:5
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace.
09/05/19 21:57:22 [synapse::control:145] E: crashed thread detected, terminating!
09/05/19 21:57:22 [synapse::init:41] E: Unclean shutdown detected, terminating
```
The panic occured during the initial hash-verification of my torrents. This was my torrent list one or two minutes before, in case it gives any clues (don't judge me):
```
[arni][~]% sycli list
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| Name                                                                                                    | Done    | DL        | UL        | DL RT | UL RT   | Peers |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| 1-0004317770.flac                                                                                       | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [HorribleSubs] Tejina-senpai - 01 [1080p].mkv                                                           | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [Touhou] - Fantasy Kaleidoscope Ep. 6 ~ The Flowers Incident (Later Part) [Eng subbed].mp4              | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 1     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [FullSet] Gensou Mangekyou ~The Memories of Phantasm~ Ep 01-11 [HD720p JapDub Rus Chi Eng sub]          | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 9     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [SaltyBucket] Touhou Niji Sousaku Doujin Anime ~ Musou Kakyou                                           | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 6     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [RH] Kiss x Sis [BDRip] [1080p]                                                                         | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 4     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [HorribleSubs] Sounan desu ka - 01 [1080p].mkv                                                          | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 6     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [AnimeFreak] Miru Tights - 10 [1080p].mkv                                                               | 100.00% | 31.25 MiB | 0 B       | 0 B/s | 0 B/s   | 20    |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [qx] Touhou Gensou Mangekyou OVA 01-11 [DVDRip 852x480 x264] [x3]                                       | 0.00%   | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [Maid-chan] TRUE - Soundscape (Hibike! Euphonium 2 OP Single) (FLAC)                                    | 0.00%   | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [mikudb] ☆VOCALOSSLESS Project -Hatsune Miku &+ Vocaloid in FLAC- (300 albums) [FLAC]                   | 100.00% | 0 B       | 303.5 MiB | 0 B/s | 0 B/s   | 7     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| 【Touhou Anime】東方Fantasy Kaleidoscope Ep.7 ~ The Mysterious Giant Youkai .mp4                        | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 1     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [HorribleSubs] Sewayaki Kitsune no Senko-san - 05 [1080p].mkv                                           | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| 東方魔法少女 アルティメット☆れいむ【通常版】                                                            | 0.00%   | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [Audio-4U] (C87) DDBY — Cafe de Touhou 6 (東方) (flac+scans)                                            | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [Sheldonsuckz] TRUE - Blast! [Hi-RES]                                                                   | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [Tsundere] Non Non Biyori [BDRip h264 1920x1080 10bit FLAC]                                             | 28.14%  | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [HorribleSubs] Vinland Saga - 02 [1080p].mkv                                                            | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 24    |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [Komorebi] Violet Evergarden [BD 1080p x264-10bit FLAC]                                                 | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| FK_2A_TSDX                                                                                              | 0.00%   | 0 B       | 0 B       | 0 B/s | 0 B/s   | 1     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| Yuru Music                                                                                              | 0.00%   | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| Yuru Yuri 2 (2012) [Doki][1920x1080 Hi10P BD FLAC]                                                      | 0.00%   | 0 B       | 0 B       | 0 B/s | 0 B/s   | 2     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [Audio-4U] (С88) DDBY — Cafe de Touhou 7 (東方) (flac)                                                  | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| tails-amd64-3.14.img                                                                                    | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 11    |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [fong] Lupin III - Touhou Kenbunroku - Another Page [BDrip.1080p.10bit].mkv                             | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [Nep_Blanc] KonoSuba II [1080p] [x265] [10Bit] [Subbed]                                                 | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 1     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [sono1998] Touhou - Bad Apple!! [PV] (1440x1080 x264 Hi10P AAC).mkv                                     | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 1     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [HorribleSubs] Vinland Saga - 01 [1080p].mkv                                                            | 100.00% | 0 B       | 96 kiB    | 0 B/s | 0 B/s   | 43    |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| Yuru Yuri BD 1080p HEVC AAC                                                                             | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [HorribleSubs] Sounan desu ka - 03 [1080p].mkv                                                          | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 34    |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| YURUYURI BEST ALBUM3 ゆるゆりずむ♪3                                                                     | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 1     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [Erai-raws] Machikado Mazoku - 01 [1080p].mkv                                                           | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [qx] Touhou Gensou Mangekyou OVA 1-7 [BDRip 1920x1080 x264] [x3]                                        | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 6     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [Tsundere] Non Non Biyori Repeat [BDRip h264 1920x1080 10bit FLAC]                                      | 0.00%   | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| Kiss x Sis (TV) (2010) [Doki][1920x1080 h264 BD FLAC]                                                   | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 2     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [VCB-Studio] Gensou Mangekyou ~The Memories Of Phantasm~ [Ma10p_1080p]                                  | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 20    |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [Maid-chan] TRUE - DREAM SOLISTER (Hibike! Euphonium OP Single) (FLAC)                                  | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| phantasm3.iso                                                                                           | 0.00%   | 0 B       | 0 B       | 0 B/s | 0 B/s   | 1     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [VCB-Studio] Gekijouban Hibike! Euphonium Todoketai Melody [Ma10p_1080p]                                | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [FFF-Vivid] Non Non Biyori Vacation [BD 1080p AAC] [3D65299C].mkv                                       | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 26    |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| ZUN Touhou Official Music Collection                                                                    | 100.00% | 0 B       | 29.94 MiB | 0 B/s | 178 B/s | 12    |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [HorribleSubs] YuruYuri S3 (01-12) [1080p] (Batch)                                                      | 0.00%   | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [HorribleSubs] Sewayaki Kitsune no Senko-san - 04 [1080p].mkv                                           | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 21    |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [Komorebi] Violet Evergarden - 14 (OVA) [BD 1080p x264-10bit FLAC]                                      | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 15    |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| FantasyKaleidoscope_04_05_untouched                                                                     | 0.00%   | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [HorribleSubs] Vinland Saga - 03 [1080p].mkv                                                            | 100.00% | 0 B       | 128 kiB   | 0 B/s | 209 B/s | 44    |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [HorribleSubs] Sounan desu ka - 02 [1080p].mkv                                                          | 100.00% | 0 B       | 400 kiB   | 0 B/s | 0 B/s   | 2     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [HorribleSubs] One Punch Man S2 - 03 [1080p].mkv                                                        | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 18    |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [1080p] Hibike! Euphonium S1 [FFF]+ S2 [pls] + OVA [anon] + Liz to Aoi Tori [ReinForce + ChannelOrange] | 100.00% | 0 B       | 5.5 MiB   | 0 B/s | 0 B/s   | 10    |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| Touhou Project Side Story - Memory of Stars (DVDRip)                                                    | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 3     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [Nep_Blanc] KonoSuba II OVA [1080p] [x265] [10Bit] [Subbed] V2                                          | 0.00%   | 0 B       | 0 B       | 0 B/s | 0 B/s   | 8     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| 1-0004245678.flac                                                                                       | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [Maid-chan] Hibike! Euphonium 2 Original Soundtrack - Ongaku Endless (FLAC)                             | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [Audio-4U] (C85) DDBY — Cafe de Touhou 5 (東方) (flac)                                                  | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| Yuru Yuri (2011) [Doki][1920x1080 Hi10P BD FLAC]                                                        | 0.00%   | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [U3-Tsundere] Non Non Biyori OAD 1&2 [BDRip 10bit 1920x1080 FLAC]                                       | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 2     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| Touhou Project                                                                                          | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 4     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [AnimeFreak] Miru Tights - 08 [1080p].mkv                                                               | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [HorribleSubs] One Punch Man S2 - 04 [1080p].mkv                                                        | 100.00% | 0 B       | 0 B       | 0 B/s | 0 B/s   | 0     |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
| [HorribleSubs] Sewayaki Kitsune no Senko-san - 06 [1080p].mkv                                           | 0.00%   | 0 B       | 0 B       | 0 B/s | 0 B/s   | 19    |
+---------------------------------------------------------------------------------------------------------+---------+-----------+-----------+-------+---------+-------+
```
Would be nice to add custom labels or tags to torrents for easier organization
This is handy for keeping .torrent sizes down.
There's a limited number of unit tests currently implemented for synapse, however these aren't nearly sufficient to catch significant regressions in behavior or simulate certain types of unusual situations. To deal with this, I'd like to implement a general end to end testing suite for bittorrent clients to validate their conformance to the various BEPs and track down any bugs they might have.
Something I've noticed quite a few bittorrent clients lack is the ability to effectively cross seed. It's worth supporting this due to lots of duplication across private trackers. The general approach for allowing this should be deduplicating torrents by both infohash AND announce(maybe url list too).