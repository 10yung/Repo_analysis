I'm honestly not sure why this was here in the first place. Git blame seems to suggest that maybe it was added when the class was first created in anticipation for something that never materialized or has since been deprecated.

As far as I can tell, `Enumerable` offers no advantages to the class since `Statement` doesn't implement `#each`.

Here's an example of what I'm referring to
```ruby
client = Mysql2::Client.new
statement = client.prepare('select 1')

statement.respond_to? :first
#=> true
statement.first
#=> NoMethodError: undefined method `each' for #<Mysql2::Statement:0x000055f59aa8b2c8>

statement.respond_to? :any?
#=> true
statement.any?
#=> NoMethodError: undefined method `each' for #<Mysql2::Statement:0x000055f59aa8b2c8>

statement.respond_to? :min
#=> true
statement.min
#=> NoMethodError: undefined method `each' for #<Mysql2::Statement:0x000055f59aa8b2c8>
```

Also all test pass with `Enumerable` gone, so it seems reasonable to remove it.

Hi,

I was trying to build and install the driver. when I was running the make file I have faced an error.
```
C:\Users\rakhil\Documents\mysql2-master\ext\mysql2>mingw32-make
linking shared-object mysql2/mysql2.so
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x20b): undefined reference to `mysql_send_query@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x25e): undefined reference to `mysql_real_connect@32'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x2ee): undefined reference to `mysql_options4@16'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x30f): undefined reference to `mysql_init@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x432): undefined reference to `mysql_ssl_set@24'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x472): undefined reference to `mysql_get_ssl_cipher@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x4d2): undefined reference to `mysql_info@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x532): undefined reference to `mysql_warning_count@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x56f): undefined reference to `mysql_use_result@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x59f): undefined reference to `mysql_store_result@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x5e2): undefined reference to `mysql_more_results@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x632): undefined reference to `mysql_set_server_option@8'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x674): undefined reference to `mysql_select_db@8'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x69b): undefined reference to `mysql_ping@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x6bb): undefined reference to `mysql_read_query_result@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x731): undefined reference to `mysql_get_server_version@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x758): undefined reference to `mysql_get_server_info@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x8a7): undefined reference to `mysql_real_escape_string@16'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x98f): undefined reference to `mysql_escape_string@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0xa8e): undefined reference to `mysql_get_client_info@0'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0xad5): undefined reference to `mysql_get_client_version@0'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0xb4e): undefined reference to `mysql_get_client_version@0'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0xb9c): undefined reference to `mysql_options@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0xc11): undefined reference to `mysql_error@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0xc28): undefined reference to `mysql_sqlstate@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0xc70): undefined reference to `mysql_errno@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0xf09): undefined reference to `mysql_options@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0xf6c): undefined reference to `mysql_get_server_version@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0xffb): undefined reference to `mysql_options@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x10e3): undefined reference to `mysql_options@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x1117): undefined reference to `mysql_options@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x11ef): undefined reference to `mysql_errno@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x1242): undefined reference to `mysql_next_result@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x1297): undefined reference to `mysql_next_result@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x12cd): undefined reference to `mysql_more_results@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x12ec): undefined reference to `mysql_free_result@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x1355): undefined reference to `mysql_thread_id@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x1455): undefined reference to `mysql_affected_rows@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x14e5): undefined reference to `mysql_insert_id@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x1597): undefined reference to `mysql_close@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x15fc): undefined reference to `mysql_close@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x16f7): undefined reference to `mysql_options@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x1755): undefined reference to `mysql_error@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x1b57): undefined reference to `mysql_errno@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x1c09): undefined reference to `mysql_options@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x1c3e): undefined reference to `mysql_error@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x1d04): undefined reference to `mysql_options@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x1d77): undefined reference to `mysql_error@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x1df5): undefined reference to `mysql_options@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x1e2a): undefined reference to `mysql_error@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x1ec2): undefined reference to `mysql_options@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x1ef6): undefined reference to `mysql_error@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x1f92): undefined reference to `mysql_options@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x1fc6): undefined reference to `mysql_error@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x2062): undefined reference to `mysql_options@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x2096): undefined reference to `mysql_error@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x2132): undefined reference to `mysql_options@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x2166): undefined reference to `mysql_error@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x21f9): undefined reference to `mysql_options@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x2236): undefined reference to `mysql_error@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x22f3): undefined reference to `mysql_options@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x2367): undefined reference to `mysql_error@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x2413): undefined reference to `mysql_options@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x248f): undefined reference to `mysql_error@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x256c): undefined reference to `mysql_close@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x2625): undefined reference to `mysql_get_client_info@0'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: client.o:client.c:(.text+0x26a7): undefined reference to `mysql_server_init@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: infile.o:infile.c:(.text+0x223): undefined reference to `mysql_set_local_infile_handler'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0x35): undefined reference to `mysql_stmt_num_rows@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0xa7): undefined reference to `mysql_num_rows@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0x11f): undefined reference to `mysql_num_fields@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0x163): undefined reference to `mysql_fetch_field_direct@8'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0x20b): undefined reference to `mysql_fetch_row@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0x25b): undefined reference to `mysql_stmt_fetch@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0x312): undefined reference to `mysql_free_result@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0x347): undefined reference to `mysql_stmt_free_result@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0x662): undefined reference to `mysql_fetch_fields@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0x6eb): undefined reference to `mysql_error@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0x74a): undefined reference to `mysql_fetch_fields@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0x86b): undefined reference to `mysql_data_seek@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0x8f6): undefined reference to `mysql_stmt_num_rows@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0x964): undefined reference to `mysql_num_rows@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0xad3): undefined reference to `mysql_stmt_bind_result@8'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0xdb7): undefined reference to `mysql_num_fields@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0x174d): undefined reference to `mysql_num_fields@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0x1793): undefined reference to `mysql_fetch_field_direct@8'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0x1857): undefined reference to `mysql_num_fields@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0x1923): undefined reference to `mysql_fetch_lengths@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: result.o:result.c:(.text+0x223c): undefined reference to `mysql_num_fields@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x13): undefined reference to `mysql_stmt_close@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x4b): undefined reference to `mysql_stmt_prepare@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x8b): undefined reference to `mysql_stmt_execute@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x16d): undefined reference to `mysql_stmt_insert_id@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x1cd): undefined reference to `mysql_stmt_field_count@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x23d): undefined reference to `mysql_stmt_param_count@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x299): undefined reference to `mysql_stmt_close@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x2d9): undefined reference to `mysql_stmt_close@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x327): undefined reference to `mysql_stmt_error@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x33f): undefined reference to `mysql_stmt_sqlstate@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x3ca): undefined reference to `mysql_stmt_errno@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x44d): undefined reference to `mysql_stmt_affected_rows@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x50a): undefined reference to `mysql_stmt_result_metadata@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x521): undefined reference to `mysql_fetch_fields@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x52e): undefined reference to `mysql_stmt_field_count@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x5b8): undefined reference to `mysql_free_result@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x62c): undefined reference to `mysql_stmt_errno@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x6ef): undefined reference to `mysql_stmt_param_count@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x89e): undefined reference to `mysql_stmt_bind_param@8'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x9d7): undefined reference to `mysql_stmt_result_metadata@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x9f8): undefined reference to `mysql_stmt_store_result@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0xd15): undefined reference to `mysql_stmt_attr_set@12'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0xff7): undefined reference to `mysql_stmt_errno@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x1361): undefined reference to `mysql_free_result@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x13ea): undefined reference to `mysql_stmt_init@4'
C:/Ruby26/msys32/mingw32/bin/../lib/gcc/i686-w64-mingw32/9.2.0/../../../../i686-w64-mingw32/bin/ld.exe: statement.o:statement.c:(.text+0x1429): undefined reference to `mysql_stmt_attr_set@12'
collect2.exe: error: ld returned 1 exit status
mingw32-make: *** [Makefile:261: mysql2.so] Error 1
```
what am I missing?

Thanks,
Akhil
Hi,

I'm using snap ruby 2.6, mariadb 10.4, on ubuntu 16.04.

Building mysql2 through bundle leads to

```
Fetching mysql2 0.5.3 (was 0.5.2)
Installing mysql2 0.5.3 (was 0.5.2) with native extensions
Gem::Ext::BuildError: ERROR: Failed to build gem native extension.

    current directory: /[redacted]/bundle/ruby/2.6.0/gems/mysql2-0.5.3/ext/mysql2
/snap/ruby/161/bin/ruby -I /snap/ruby/161/lib/ruby/2.6.0 -r ./siteconf20200103-2873-nyakla.rb extconf.rb
checking for rb_absint_size()... no
checking for rb_absint_singlebit_p()... no
checking for rb_wait_for_single_fd()... no
-----
Using mysql_config at /usr/bin/mysql_config
-----
checking for mysql.h... yes
checking for errmsg.h... yes
checking for SSL_MODE_DISABLED in mysql.h... yes
checking for SSL_MODE_PREFERRED in mysql.h... yes
checking for SSL_MODE_REQUIRED in mysql.h... yes
checking for SSL_MODE_VERIFY_CA in mysql.h... yes
checking for SSL_MODE_VERIFY_IDENTITY in mysql.h... yes
checking for MYSQL.net.vio in mysql.h... yes
checking for MYSQL.net.pvio in mysql.h... no
checking for MYSQL_ENABLE_CLEARTEXT_PLUGIN in mysql.h... yes
checking for SERVER_QUERY_NO_GOOD_INDEX_USED in mysql.h... yes
checking for SERVER_QUERY_NO_INDEX_USED in mysql.h... yes
checking for SERVER_QUERY_WAS_SLOW in mysql.h... yes
checking for MYSQL_OPTION_MULTI_STATEMENTS_ON in mysql.h... yes
checking for MYSQL_OPTION_MULTI_STATEMENTS_OFF in mysql.h... yes
checking for my_bool in mysql.h... yes
-----
Setting libpath to /usr/lib/x86_64-linux-gnu
-----
creating Makefile

current directory: /[redacted]/bundle/ruby/2.6.0/gems/mysql2-0.5.3/ext/mysql2
make "DESTDIR=" clean

current directory: /[redacted]/bundle/ruby/2.6.0/gems/mysql2-0.5.3/ext/mysql2
make "DESTDIR="
compiling client.c
In file included from client.c:13:
wait_for_single_fd.h: In function ‘my_wait_for_single_fd’:
wait_for_single_fd.h:32:10: warning: implicit declaration of function ‘rb_thread_select’; did you mean ‘rb_thread_fd_select’?
[-Wimplicit-function-declaration]
   return rb_thread_select(fd + 1, rfds, wfds, efds, tvp);
          ^~~~~~~~~~~~~~~~
          rb_thread_fd_select
client.c: At top level:
cc1: warning: unrecognized command line option ‘-Wno-used-but-marked-unused’
cc1: warning: unrecognized command line option ‘-Wno-static-in-inline’
cc1: warning: unrecognized command line option ‘-Wno-reserved-id-macro’
cc1: warning: unrecognized command line option ‘-Wno-missing-variable-declarations’
cc1: warning: unrecognized command line option ‘-Wno-documentation-unknown-command’
cc1: warning: unrecognized command line option ‘-Wno-disabled-macro-expansion’
cc1: warning: unrecognized command line option ‘-Wno-covered-switch-default’
cc1: warning: unrecognized command line option ‘-Wno-conditional-uninitialized’
cc1: warning: unrecognized command line option ‘-Wno-self-assign’
cc1: warning: unrecognized command line option ‘-Wno-parentheses-equality’
cc1: warning: unrecognized command line option ‘-Wno-constant-logical-operand’
compiling infile.c
compiling mysql2_ext.c
compiling result.c
compiling statement.c
statement.c: In function ‘my_big2ll’:
statement.c:209:9: warning: implicit declaration of function ‘RBIGNUM_LEN’; did you mean ‘RBIGNUM_SIGN’?
[-Wimplicit-function-declaration]
   len = RBIGNUM_LEN(bignum) * SIZEOF_BDIGITS;
         ^~~~~~~~~~~
         RBIGNUM_SIGN
statement.c:209:31: error: ‘SIZEOF_BDIGITS’ undeclared (first use in this function); did you mean ‘SIZEOF_INT’?
   len = RBIGNUM_LEN(bignum) * SIZEOF_BDIGITS;
                               ^~~~~~~~~~~~~~
                               SIZEOF_INT
statement.c:209:31: note: each undeclared identifier is reported only once for each function it appears in
statement.c: At top level:
cc1: warning: unrecognized command line option ‘-Wno-used-but-marked-unused’
cc1: warning: unrecognized command line option ‘-Wno-static-in-inline’
cc1: warning: unrecognized command line option ‘-Wno-reserved-id-macro’
cc1: warning: unrecognized command line option ‘-Wno-missing-variable-declarations’
cc1: warning: unrecognized command line option ‘-Wno-documentation-unknown-command’
cc1: warning: unrecognized command line option ‘-Wno-disabled-macro-expansion’
cc1: warning: unrecognized command line option ‘-Wno-covered-switch-default’
cc1: warning: unrecognized command line option ‘-Wno-conditional-uninitialized’
cc1: warning: unrecognized command line option ‘-Wno-self-assign’
cc1: warning: unrecognized command line option ‘-Wno-parentheses-equality’
cc1: warning: unrecognized command line option ‘-Wno-constant-logical-operand’
Makefile:244: recipe for target 'statement.o' failed
make: *** [statement.o] Error 1

make failed, exit code 2

Gem files will remain installed in /[redacted]/bundle/ruby/2.6.0/gems/mysql2-0.5.3 for inspection.
Results logged to /[redacted]/bundle/ruby/2.6.0/extensions/x86_64-linux/2.6.0/mysql2-0.5.3/gem_make.out

An error occurred while installing mysql2 (0.5.3), and Bundler cannot continue.
Make sure that `gem install mysql2 -v '0.5.3' --source 'https://rubygems.org/'` succeeds before bundling.

In Gemfile:
  mysql2
```

```
gcc --version
gcc (Ubuntu 8.3.0-16ubuntu3~16.04) 8.3.0

openssl version
OpenSSL 1.0.2g  1 Mar 2016
```

I can't figure out a way to fix this. Installing the `libmysqlclient-dev` library didn't help, neither `openssl`. 

Below is the mkmf.log if it may help:

```
have_func: checking for rb_absint_size()... -------------------- no

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I.    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic     -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby  -lm   -lc"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main(int argc, char **argv)
4: {
5:   return 0;
6: }
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I.    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic     -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby  -lm   -lc"
//snap/core18/current/lib/x86_64-linux-gnu/libcrypt.so.1: undefined reference to `__open_nocancel@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `_IO_enable_locks@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `__mmap@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `__munmap@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libdl.so.2: undefined reference to `_dl_catch_error@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `__mprotect@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libcrypt.so.1: undefined reference to `__snprintf@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `__tunable_get_val@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libcrypt.so.1: undefined reference to `__read_nocancel@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/librt.so.1: undefined reference to `__close_nocancel@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `__sigtimedwait@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libdl.so.2: undefined reference to `_dl_signal_error@GLIBC_PRIVATE'
/snap/ruby/161/lib/libruby.so: undefined reference to `__explicit_bzero_chk@GLIBC_2.25'
collect2: error: ld returned 1 exit status
checked program was:
/* begin */
 1: #include "ruby.h"
 2:
 3: /*top*/
 4: extern int t(void);
 5: int main(int argc, char **argv)
 6: {
 7:   if (argc > 1000000) {
 8:     int (* volatile tp)(void)=(int (*)(void))&t;
 9:     printf("%d", (*tp)());
10:   }
11:
12:   return 0;
13: }
14: int t(void) { void ((*volatile p)()); p = (void ((*)()))rb_absint_size; return !p; }
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I.    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic     -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby  -lm   -lc"
conftest.c:14:13: error: conflicting types for ‘rb_absint_size’
 extern void rb_absint_size();
             ^~~~~~~~~~~~~~
In file included from /snap/ruby/161/include/ruby-2.6.0/ruby/ruby.h:2111,
                 from /snap/ruby/161/include/ruby-2.6.0/ruby.h:33,
                 from conftest.c:1:
/snap/ruby/161/include/ruby-2.6.0/ruby/intern.h:166:8: note: previous declaration of ‘rb_absint_size’ was here
 size_t rb_absint_size(VALUE val, int *nlz_bits_ret);
        ^~~~~~~~~~~~~~
cc1: warning: unrecognized command line option ‘-Wno-self-assign’
cc1: warning: unrecognized command line option ‘-Wno-parentheses-equality’
cc1: warning: unrecognized command line option ‘-Wno-constant-logical-operand’
checked program was:
/* begin */
 1: #include "ruby.h"
 2:
 3: /*top*/
 4: extern int t(void);
 5: int main(int argc, char **argv)
 6: {
 7:   if (argc > 1000000) {
 8:     int (* volatile tp)(void)=(int (*)(void))&t;
 9:     printf("%d", (*tp)());
10:   }
11:
12:   return 0;
13: }
14: extern void rb_absint_size();
15: int t(void) { rb_absint_size(); return 0; }
/* end */

--------------------

have_func: checking for rb_absint_singlebit_p()... -------------------- no

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I.    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic     -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby  -lm   -lc"
//snap/core18/current/lib/x86_64-linux-gnu/libcrypt.so.1: undefined reference to `__open_nocancel@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `_IO_enable_locks@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `__mmap@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `__munmap@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libdl.so.2: undefined reference to `_dl_catch_error@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `__mprotect@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libcrypt.so.1: undefined reference to `__snprintf@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `__tunable_get_val@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libcrypt.so.1: undefined reference to `__read_nocancel@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/librt.so.1: undefined reference to `__close_nocancel@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `__sigtimedwait@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libdl.so.2: undefined reference to `_dl_signal_error@GLIBC_PRIVATE'
/snap/ruby/161/lib/libruby.so: undefined reference to `__explicit_bzero_chk@GLIBC_2.25'
collect2: error: ld returned 1 exit status
checked program was:
/* begin */
 1: #include "ruby.h"
 2:
 3: /*top*/
 4: extern int t(void);
 5: int main(int argc, char **argv)
 6: {
 7:   if (argc > 1000000) {
 8:     int (* volatile tp)(void)=(int (*)(void))&t;
 9:     printf("%d", (*tp)());
10:   }
11:
12:   return 0;
13: }
14: int t(void) { void ((*volatile p)()); p = (void ((*)()))rb_absint_singlebit_p; return !p; }
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I.    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic     -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby  -lm   -lc"
conftest.c:14:13: error: conflicting types for ‘rb_absint_singlebit_p’
 extern void rb_absint_singlebit_p();
             ^~~~~~~~~~~~~~~~~~~~~
In file included from /snap/ruby/161/include/ruby-2.6.0/ruby/ruby.h:2111,
                 from /snap/ruby/161/include/ruby-2.6.0/ruby.h:33,
                 from conftest.c:1:
/snap/ruby/161/include/ruby-2.6.0/ruby/intern.h:168:5: note: previous declaration of ‘rb_absint_singlebit_p’ was here
 int rb_absint_singlebit_p(VALUE val);
     ^~~~~~~~~~~~~~~~~~~~~
cc1: warning: unrecognized command line option ‘-Wno-self-assign’
cc1: warning: unrecognized command line option ‘-Wno-parentheses-equality’
cc1: warning: unrecognized command line option ‘-Wno-constant-logical-operand’
checked program was:
/* begin */
 1: #include "ruby.h"
 2:
 3: /*top*/
 4: extern int t(void);
 5: int main(int argc, char **argv)
 6: {
 7:   if (argc > 1000000) {
 8:     int (* volatile tp)(void)=(int (*)(void))&t;
 9:     printf("%d", (*tp)());
10:   }
11:
12:   return 0;
13: }
14: extern void rb_absint_singlebit_p();
15: int t(void) { rb_absint_singlebit_p(); return 0; }
/* end */

--------------------

have_func: checking for rb_wait_for_single_fd()... -------------------- no

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I.    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic     -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby  -lm   -lc"
conftest.c: In function ‘t’:
conftest.c:14:57: error: ‘rb_wait_for_single_fd’ undeclared (first use in this function)
 int t(void) { void ((*volatile p)()); p = (void ((*)()))rb_wait_for_single_fd; return !p; }
                                                         ^~~~~~~~~~~~~~~~~~~~~
conftest.c:14:57: note: each undeclared identifier is reported only once for each function it appears in
conftest.c: At top level:
cc1: warning: unrecognized command line option ‘-Wno-self-assign’
cc1: warning: unrecognized command line option ‘-Wno-parentheses-equality’
cc1: warning: unrecognized command line option ‘-Wno-constant-logical-operand’
checked program was:
/* begin */
 1: #include "ruby.h"
 2:
 3: /*top*/
 4: extern int t(void);
 5: int main(int argc, char **argv)
 6: {
 7:   if (argc > 1000000) {
 8:     int (* volatile tp)(void)=(int (*)(void))&t;
 9:     printf("%d", (*tp)());
10:   }
11:
12:   return 0;
13: }
14: int t(void) { void ((*volatile p)()); p = (void ((*)()))rb_wait_for_single_fd; return !p; }
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I.    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic     -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby  -lm   -lc"
//snap/core18/current/lib/x86_64-linux-gnu/libcrypt.so.1: undefined reference to `__open_nocancel@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `_IO_enable_locks@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `__mmap@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `__munmap@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libdl.so.2: undefined reference to `_dl_catch_error@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `__mprotect@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libcrypt.so.1: undefined reference to `__snprintf@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `__tunable_get_val@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libcrypt.so.1: undefined reference to `__read_nocancel@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/librt.so.1: undefined reference to `__close_nocancel@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libpthread.so.0: undefined reference to `__sigtimedwait@GLIBC_PRIVATE'
//snap/core18/current/lib/x86_64-linux-gnu/libdl.so.2: undefined reference to `_dl_signal_error@GLIBC_PRIVATE'
/snap/ruby/161/lib/libruby.so: undefined reference to `__explicit_bzero_chk@GLIBC_2.25'
collect2: error: ld returned 1 exit status
checked program was:
/* begin */
 1: #include "ruby.h"
 2:
 3: /*top*/
 4: extern int t(void);
 5: int main(int argc, char **argv)
 6: {
 7:   if (argc > 1000000) {
 8:     int (* volatile tp)(void)=(int (*)(void))&t;
 9:     printf("%d", (*tp)());
10:   }
11:
12:   return 0;
13: }
14: extern void rb_wait_for_single_fd();
15: int t(void) { rb_wait_for_single_fd(); return 0; }
/* end */

--------------------

have_header: checking for mysql.h... -------------------- yes

"gcc -E -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC  conftest.c -o conftest.i"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: #include <mysql.h>
/* end */

--------------------

have_header: checking for errmsg.h... -------------------- yes

"gcc -E -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC  conftest.c -o conftest.i"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: #include <errmsg.h>
/* end */

--------------------

have_const: checking for SSL_MODE_DISABLED in mysql.h... -------------------- no

"gcc -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC   -c conftest.c"
conftest.c:7:34: error: ‘SSL_MODE_DISABLED’ undeclared here (not in a function)
 conftest_type conftestval = (int)SSL_MODE_DISABLED;
                                  ^~~~~~~~~~~~~~~~~
cc1: warning: unrecognized command line option ‘-Wno-self-assign’
cc1: warning: unrecognized command line option ‘-Wno-parentheses-equality’
cc1: warning: unrecognized command line option ‘-Wno-constant-logical-operand’
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: #include <mysql.h>
4:
5: /*top*/
6: typedef int conftest_type;
7: conftest_type conftestval = (int)SSL_MODE_DISABLED;
/* end */

--------------------

have_const: checking for MYSQL_OPT_SSL_ENFORCE in mysql.h... -------------------- yes

"gcc -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC   -c conftest.c"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: #include <mysql.h>
4:
5: /*top*/
6: typedef int conftest_type;
7: conftest_type conftestval = (int)MYSQL_OPT_SSL_ENFORCE;
/* end */

--------------------

have_struct_member: checking for MYSQL.net.vio in mysql.h... -------------------- no

"gcc -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC   -c conftest.c"
conftest.c:6:35: error: ‘NET’ {aka ‘struct st_net’} has no member named ‘vio’; did you mean ‘pvio’?
 int s = (char *)&((MYSQL*)0)->net.vio - (char *)0;
                                   ^~~
                                   pvio
cc1: warning: unrecognized command line option ‘-Wno-self-assign’
cc1: warning: unrecognized command line option ‘-Wno-parentheses-equality’
cc1: warning: unrecognized command line option ‘-Wno-constant-logical-operand’
checked program was:
/* begin */
 1: #include "ruby.h"
 2:
 3: #include <mysql.h>
 4:
 5: /*top*/
 6: int s = (char *)&((MYSQL*)0)->net.vio - (char *)0;
 7: int main(int argc, char **argv)
 8: {
 9:   return 0;
10: }
/* end */

--------------------

have_struct_member: checking for MYSQL.net.pvio in mysql.h... -------------------- yes

"gcc -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC   -c conftest.c"
checked program was:
/* begin */
 1: #include "ruby.h"
 2:
 3: #include <mysql.h>
 4:
 5: /*top*/
 6: int s = (char *)&((MYSQL*)0)->net.pvio - (char *)0;
 7: int main(int argc, char **argv)
 8: {
 9:   return 0;
10: }
/* end */

--------------------

have_const: checking for MYSQL_ENABLE_CLEARTEXT_PLUGIN in mysql.h... -------------------- yes

"gcc -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC   -c conftest.c"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: #include <mysql.h>
4:
5: /*top*/
6: typedef int conftest_type;
7: conftest_type conftestval = (int)MYSQL_ENABLE_CLEARTEXT_PLUGIN;
/* end */

--------------------

have_const: checking for SERVER_QUERY_NO_GOOD_INDEX_USED in mysql.h... -------------------- yes

"gcc -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC   -c conftest.c"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: #include <mysql.h>
4:
5: /*top*/
6: typedef int conftest_type;
7: conftest_type conftestval = (int)SERVER_QUERY_NO_GOOD_INDEX_USED;
/* end */

--------------------

have_const: checking for SERVER_QUERY_NO_INDEX_USED in mysql.h... -------------------- yes

"gcc -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC   -c conftest.c"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: #include <mysql.h>
4:
5: /*top*/
6: typedef int conftest_type;
7: conftest_type conftestval = (int)SERVER_QUERY_NO_INDEX_USED;
/* end */

--------------------

have_const: checking for SERVER_QUERY_WAS_SLOW in mysql.h... -------------------- yes

"gcc -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC   -c conftest.c"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: #include <mysql.h>
4:
5: /*top*/
6: typedef int conftest_type;
7: conftest_type conftestval = (int)SERVER_QUERY_WAS_SLOW;
/* end */

--------------------

have_const: checking for MYSQL_OPTION_MULTI_STATEMENTS_ON in mysql.h... -------------------- yes

"gcc -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC   -c conftest.c"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: #include <mysql.h>
4:
5: /*top*/
6: typedef int conftest_type;
7: conftest_type conftestval = (int)MYSQL_OPTION_MULTI_STATEMENTS_ON;
/* end */

--------------------

have_const: checking for MYSQL_OPTION_MULTI_STATEMENTS_OFF in mysql.h... -------------------- yes

"gcc -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC   -c conftest.c"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: #include <mysql.h>
4:
5: /*top*/
6: typedef int conftest_type;
7: conftest_type conftestval = (int)MYSQL_OPTION_MULTI_STATEMENTS_OFF;
/* end */

--------------------

have_type: checking for my_bool in mysql.h... -------------------- yes

"gcc -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC   -c conftest.c"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: #include <mysql.h>
4:
5: /*top*/
6: typedef my_bool conftest_type;
7: int conftestval[sizeof(conftest_type)?1:-1];
/* end */

--------------------

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic    -L/usr/lib/x86_64-linux-gnu/ -lmariadb  -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby -Werror -Weverything -lm   -lc"
gcc: error: unrecognized command line option ‘-Weverything’
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic    -L/usr/lib/x86_64-linux-gnu/ -lmariadb  -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby -Werror -Wno-bad-function-cast -lm   -lc"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic    -L/usr/lib/x86_64-linux-gnu/ -lmariadb  -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby -Werror -Wno-conditional-uninitialized -lm   -lc"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic    -L/usr/lib/x86_64-linux-gnu/ -lmariadb  -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby -Werror -Wno-covered-switch-default -lm   -lc"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic    -L/usr/lib/x86_64-linux-gnu/ -lmariadb  -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby -Werror -Wno-declaration-after-statement -lm   -lc"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic    -L/usr/lib/x86_64-linux-gnu/ -lmariadb  -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby -Werror -Wno-disabled-macro-expansion -lm   -lc"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic    -L/usr/lib/x86_64-linux-gnu/ -lmariadb  -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby -Werror -Wno-documentation-unknown-command -lm   -lc"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic    -L/usr/lib/x86_64-linux-gnu/ -lmariadb  -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby -Werror -Wno-missing-field-initializers -lm   -lc"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic    -L/usr/lib/x86_64-linux-gnu/ -lmariadb  -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby -Werror -Wno-missing-variable-declarations -lm   -lc"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic    -L/usr/lib/x86_64-linux-gnu/ -lmariadb  -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby -Werror -Wno-padded -lm   -lc"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic    -L/usr/lib/x86_64-linux-gnu/ -lmariadb  -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby -Werror -Wno-reserved-id-macro -lm   -lc"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic    -L/usr/lib/x86_64-linux-gnu/ -lmariadb  -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby -Werror -Wno-sign-conversion -lm   -lc"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic    -L/usr/lib/x86_64-linux-gnu/ -lmariadb  -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby -Werror -Wno-static-in-inline -lm   -lc"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic    -L/usr/lib/x86_64-linux-gnu/ -lmariadb  -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby -Werror -Wno-switch-enum -lm   -lc"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic    -L/usr/lib/x86_64-linux-gnu/ -lmariadb  -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby -Werror -Wno-undef -lm   -lc"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic    -L/usr/lib/x86_64-linux-gnu/ -lmariadb  -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby -Werror -Wno-unreachable-code -lm   -lc"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */

"gcc -o conftest -I/snap/ruby/161/include/ruby-2.6.0/x86_64-linux -I/snap/ruby/161/include/ruby-2.6.0/ruby/backward -I/snap/ruby/161/include/ruby-2.6.0 -I. -I/usr/include/mariadb -I/usr/include/mariadb/mysql    -O3 -ggdb3 -Wall -Wextra -Wdeclaration-after-statement -Wdeprecated-declarations -Wduplicated-cond -Wimplicit-function-declaration -Wimplicit-int -Wmisleading-indentation -Wpointer-arith -Wrestrict -Wwrite-strings -Wimplicit-fallthrough=0 -Wmissing-noreturn -Wno-cast-function-type -Wno-constant-logical-operand -Wno-long-long -Wno-missing-field-initializers -Wno-overlength-strings -Wno-packed-bitfield-compat -Wno-parentheses-equality -Wno-self-assign -Wno-tautological-compare -Wno-unused-parameter -Wno-unused-value -Wsuggest-attribute=format -Wsuggest-attribute=noreturn -Wunused-variable  -fPIC conftest.c  -L. -L/snap/ruby/161/lib -Wl,-rpath,/snap/ruby/161/lib -L. -fstack-protector-strong -rdynamic -Wl,-export-dynamic    -L/usr/lib/x86_64-linux-gnu/ -lmariadb  -Wl,-rpath,/snap/ruby/161/lib -L/snap/ruby/161/lib -lruby -Werror -Wno-used-but-marked-unused -lm   -lc"
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */
```
Hello, I'm trying to use this gem but I'm having an error when I use this command `bundle exec rake db:seed`

I'm getting the following error, I'm using MacOS:

```
** Invoke db:seed (first_time)
** Execute db:seed
rake aborted!
LoadError: dlopen(/Users/qiqemtz/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/mysql2-0.5.2/lib/mysql2/mysql2.bundle, 9): Library not loaded: libssl.1.1.dylib
  Referenced from: /Users/qiqemtz/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/mysql2-0.5.2/lib/mysql2/mysql2.bundle
  Reason: image not found - /Users/luisj.eronimo/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/mysql2-0.5.2/lib/mysql2/mysql2.bundle
```

I thought that it was a link error, so I tried to locate the libssl.1.1.dylib and create a link in the location where is trying to be found but it didn't worked for me

I'd like to know if anybody had the same issue

Thanks
## Versions

* OS: MacOS
* MySQL driver: MariaDB 10.3 installed via Homebrew
* Ruby 2.5.0
* mysql2: 0.5.3

## Behaviour

I see the following warnings:

```
/Users/alaz/.gem/ruby/2.5.0/gems/mysql2-0.5.3/lib/mysql2/client.rb:51: warning: Your mysql client library does not support ssl_mode as expected.
/Users/alaz/.gem/ruby/2.5.0/gems/mysql2-0.5.3/lib/mysql2/client.rb:51: warning: Your mysql client library does not support ssl_mode as expected.
```

I guess the reason is that the MySQL library installed at my system is MariaDB 10.3:

```
[2] pry(main)> Mysql2::Client.info
=> {:id=>100320, :version=>"10.3.20", :header_version=>"10.3.20"}
```

and this version is unknown to mysql2:
https://github.com/brianmario/mysql2/blob/785969fbceadd96d495ec9fecc67efee03d0056c/ext/mysql2/client.c#L116-L129
When I tried to execute `rails c production` on server,  I got following error.
```
/apps/moldb/project/shared/bundle/ruby/2.5.0/gems/mysql2-0.5.1/lib/mysql2.rb:33:in `require': incompatible library version - /apps/moldb/project/shared/bundle/ruby/2.5.0/gems/mysql2-0.5.1/lib/mysql2/mysql2.so (LoadError)
```

My Gemfile:
```
 source 'https://rubygems.org'
ruby '2.5.1'

gem 'rails', '~> 4.2.0'
gem 'mysql2', '<= 0.5.1'
...
```

I tried `gem pristine --all` and it doesn't solve the issue.

Thanks! 
This adds support for Oracle/Percona MySQL 5.7+ session tracking to the client.

Docs on the function: https://dev.mysql.com/doc/refman/5.7/en/mysql-session-track-get-first.html

At Shopify, we wanted to be able to tell which GTID was generated by a given `COMMIT` so that when we are reading from delayed replicas we can be sure that a given replica has the data that we want on it. This is pretty much the exact flow that's described by the [Oracle worklog entry describing the implementation of the feature](https://dev.mysql.com/worklog/task/?id=6128)

Example usage:

```ruby
require 'mysql2'
c = Mysql2::Client.new(:host => "127.0.0.1", :username => "root", :password => "test1", :flags => "SESSION_TRACK", :database => "test");
c.query("SET SESSION session_track_gtids=OWN_GTID")
c.query("INSERT INTO test VALUES (1)");
gtid = c.session_track(Mysql2::Client::SESSION_TRACK_GTIDS)[0]

c2 = Mysql2::Client.new(:host => "replica.host")
c2.query("SELECT WAIT_FOR_EXECUTED_GTID_SET('#{gtid}')")
# waits forever, by default, probably not what people want
c2.query("SELECT * FROM test")
```

I mirrored the implementation of `client.last_id` -- I noticed that wasn't documented in the `README.md` so I hadn't added this, but if you have any suggestions about how or where to document this feature I'd appreciate that.

I believe that all the `ifdef`ing is right to not compile this feature for MariaDB (which doesn't support it).
While looking into making mysql2 support non-integer timeouts, @pushrax and I found a bug in the client.

There is a specific edge case where neither the [do_query file descriptor](https://github.com/brianmario/mysql2/blob/785969fbceadd96d495ec9fecc67efee03d0056c/ext/mysql2/client.c#L665) timeout nor the `MYSQL_OPT_READ_TIMEOUT ` apply.

The error can be reproduced by running a query that responds quickly with the first reply but fills the query response buffer, therefore taking a while to read.

As you can see from the run below, this causes the query the run successfully, despite going over the 1 second read timeout time.

### Instructions to reproduce

Set the client configuration in the following test and run it. 

```ruby
  it "timeout overflow buffer timeout edge case" do
    client = Mysql2::Client.new(
      host: '<insert>',
      port: '<insert>',
      username: '<insert>',
      database: '<insert>',
      connect_timeout: 1,
      read_timeout: 1,
      write_timeout: 1,
    )

    client.query("CREATE TABLE IF NOT EXISTS test_table (c1 MEDIUMTEXT, c2 MEDIUMTEXT)")

    s = StringIO.new
    1500.times { s << "sdjsdjsdjssadaskdhasfhasjdhaskdjhasdjkhsadjkh" }
    3000.times do
    client.query("INSERT INTO test_table (c1, c2) VALUES ('#{s.string}', '#{s.string}')")
    end

    start_time = Time.now
    client.query("SELECT * from test_table")
    query_time = Time.now - start_time

    expect(query_time).to be <= 1.0
  ensure
    client.query("DROP TABLE IF EXISTS test_table")
  end
```

The result on my local machine:
![image](https://user-images.githubusercontent.com/19417045/70471798-e7d57300-1a9b-11ea-8b2c-e9e57f6df8ce.png)

I upgraded to 0.5.3 earlier this week from 0.5.2, and upon deployment to production, my app went down.

Luckily, reverting to the previous release brought things back up, though the mysql query cache was screwed up. (I am not sure if this is a related problem or not).

Here's the original problem that I'm seeing when trying to load the main page:
```
F, [2019-12-04T20:20:37.247797 #15929] FATAL -- : [53a2b69a-1981-4883-852f-cfd2527a3409]   
F, [2019-12-04T20:20:37.247846 #15929] FATAL -- : [53a2b69a-1981-4883-852f-cfd2527a3409] ActionView::Template::Error (Mysql2::Error::ConnectionError: Lost connection to MySQL server during query: SHOW FULL FIELDS FROM `academic_years`):
```

When using the rails console, I see some other strange behaviors:
```
> School.count

ActiveRecord::StatementInvalid (Mysql2::Error::ConnectionError: Lost connection to MySQL server during query: SHOW FULL FIELDS FROM `schools`)
```

and also
```
> AcademicYear.count
Traceback (most recent call last):
        1: from (irb):1
ActiveRecord::StatementInvalid (Mysql2::Error: : SELECT COUNT(*) FROM `academic_years`
```

...strangely, I was able to resolve the above by performing `RESET QUERY CACHE` on the mysql server, but upon upgrading to 0.5.3 again, I continue to have problems.


I'm running:
- Rails 5.2.3
- Ruby 2.5.0
- mysql2 0.5.3
- AWS RDS MySql: Server version: 5.7.19-log MySQL Community Server
- Amazon Linux AMI 2018.03 based server image

If you need more details about my exact configuration, please let me know.

Further frustrating, this works correctly on my staging server, which is nearly identical to the prod server (same, rails, same ruby, same mysql2, same AMI, but mysql server is 5.7.17, that can't be it, can it?).

My current theory is that it may be related to the ruby 2.5.0, as I have another application running 2.5.1 (a different application, on a different database on the same db instance), and it doesn't seem to have the same problem. I have not had a chance to test this theory yet, as upgrading ruby versions in prod (since it only happens in prod) is not something I can do easily.