Copy from consumer-api

As concurrency in scalajs? 
