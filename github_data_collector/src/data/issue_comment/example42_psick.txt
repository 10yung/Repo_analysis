## Before submitting your PR

  1. Open an **issue** and refer to its number in your PR title
  1. If it's a bug and you have the solution, go on with the PR! 
  1. If it's a new profile got with the PR (possibly with docs, samples and tests)

## After submitting your PR

  1. Verify Travis checks and fix the errors if needed
  1. Feel free to ping us if we don't reply promptly 


- Update Ruby Version
- Update Puppet Modules
- Updates for onceover
- Update PE Version for Vagrant
- Add r10k to Gemfile

In the page below,   image is missing in the line `178`.
https://github.com/example42/psick/blob/production/docs/change_process_integration.md

> A screen like this appears during online file editing:
Gitlab CI variable `CI_BUILD_REF_NAME` is deprecated. Rename it to `CI_COMMIT_REF_NAME` as in future releases  it will be removed.

> Note: Starting with GitLab 9.0, we have deprecated the $CI_BUILD_* variables. You are strongly advised to use the new variables as we will remove the old ones in future GitLab releases.

Reference:  
https://docs.gitlab.com/ee/ci/variables/#gitlab-90-renaming

Affected files:   
psick\.gitlab-ci.yml
psick\gitlab\.gitlab-ci.yml-integration
psick\gitlab\.gitlab-ci.yml-with-fakes
## Expected Behavior 
Link that work on https://github.com/example42/psick 
For more details check the automatically generated Control repo documentation.
-> http://puppet.pages.lab.psick.io/psick/

## Actual Behavior
Error 502 Ray ID: 45fcc22c15152342 â€¢ 2018-09-25 10:20:29 UTC
Bad gateway

## Steps to Reproduce the Problem

  1. Go to https://github.com/example42/psick 
  2. click on link "automatically generated Control repo documentation."

## Expected Behavior 

windows2008-ostest boots up, puppet gets installed and I can test out my puppet code.

## Actual Behavior

windows2008-ostest boots up, vagrant command gets stuck on applying 

## Steps to Reproduce the Problem

  1.  cd into psick\vagrant\psick\vagrant\environments\ostest
  1.  vagrant up windows2008-ostest
  1.  get stuck

## Specifications

For the forementioned reasons, I can't get add facter's output result.
Additional details (shame on me): I'm running vagrant from a Windows 10 machine.
The vagrant up log is the following:
```

==> windows2008-ostest: Matching MAC address for NAT networking...
==> windows2008-ostest: Setting the name of the VM: ostest_windows2008-ostest_1530083481921_1843
==> windows2008-ostest: Clearing any previously set network interfaces...
==> windows2008-ostest: Preparing network interfaces based on configuration...
    windows2008-ostest: Adapter 1: nat
    windows2008-ostest: Adapter 2: hostonly
==> windows2008-ostest: Forwarding ports...
    windows2008-ostest: 3389 (guest) => 33894 (host) (adapter 1)
    windows2008-ostest: 5985 (guest) => 55985 (host) (adapter 1)
    windows2008-ostest: 5986 (guest) => 55986 (host) (adapter 1)
    windows2008-ostest: 22 (guest) => 2222 (host) (adapter 1)
    windows2008-ostest: 5986 (guest) => 55986 (host) (adapter 1)
    windows2008-ostest: 22 (guest) => 2222 (host) (adapter 1)
==> windows2008-ostest: Running 'pre-boot' VM customizations...
==> windows2008-ostest: Booting VM...
==> windows2008-ostest: Waiting for machine to boot. This may take a few minutes...
    windows2008-ostest: WinRM address: 127.0.0.1:55985
    windows2008-ostest: WinRM username: vagrant
    windows2008-ostest: WinRM execution_time_limit: PT2H
    windows2008-ostest: WinRM transport: negotiate
==> windows2008-ostest: Machine booted and ready!
Sorry, don't know how to check guest version of Virtualbox Guest Additions on this platform. Stopping installation.
==> windows2008-ostest: Checking for guest additions in VM...
==> windows2008-ostest: Setting hostname...
==> windows2008-ostest: Configuring and enabling network interfaces...
==> windows2008-ostest: Mounting shared folders...
    windows2008-ostest: /vagrant => C:/Users/massimo.sporchia/workspace/vagrant/psick/vagrant/environments/ostest
    windows2008-ostest: /vagrant_puppet => C:/Users/massimo.sporchia/workspace/vagrant/psick
==> windows2008-ostest: Running provisioner: shell...
    windows2008-ostest: Running: ../../bin/vagrant-sethostname.sh as c:\tmp\vagrant-shell.sh
```

## Expected Behavior 
Machine comes up without manual intervention

## Actual Behavior
Had to install the following packages manually via:
```
vargant ssh gitlab.foss.psick.io
sudo apt-get install -y git gcc make bzip2
sudo apt-get install -y libssl-dev libreadline-dev zlib1g-dev g++
logout
```
After reexecuting vargant provision gitlab.foss.psick.io the machine came up as expected.

## Steps to Reproduce the Problem

  1. Install CentOS7 Host with git, VirtualBox 5.2, latest Vargant
  2. Setup Ruby Environment https://www.example42.com/2017/06/26/psick-developer-environment-setup/ and clone PSICK
  3. vagrant up puppet.foss.psick.io
  4. vagrant up gitlab.foss.psick.io

## Specifications

```
duh@duh-notebook ~/psick/vagrant/environments/foss (git)-[production] % vagrant status
Current machine states:

puppet.foss.psick.io      running (virtualbox)
gitlab.foss.psick.io      not created (virtualbox)
icinga.foss.psick.io      not created (virtualbox)
grafana.foss.psick.io     not created (virtualbox)
build.foss.psick.io       not created (virtualbox)
docker.foss.psick.io      not created (virtualbox)
jenkins.foss.psick.io     not created (virtualbox)
centos6.foss.psick.io     not created (virtualbox)
centos7.foss.psick.io     not created (virtualbox)

This environment represents multiple VMs. The VMs are all listed
above with their current state. For more information about a specific
VM, run `vagrant status NAME`.
duh@duh-notebook ~/psick/vagrant/environments/foss (git)-[production] % vagrant up gitlab.foss.psick.io
Bringing machine 'gitlab.foss.psick.io' up with 'virtualbox' provider...
==> gitlab.foss.psick.io: Importing base box 'ubuntu/xenial64'...
==> gitlab.foss.psick.io: Matching MAC address for NAT networking...
==> gitlab.foss.psick.io: Checking if box 'ubuntu/xenial64' is up to date...
==> gitlab.foss.psick.io: Setting the name of the VM: foss_gitlabfosspsickio_1522139601143_46707
==> gitlab.foss.psick.io: Fixed port collision for 22 => 2222. Now on port 2200.
==> gitlab.foss.psick.io: Clearing any previously set network interfaces...
==> gitlab.foss.psick.io: Preparing network interfaces based on configuration...
    gitlab.foss.psick.io: Adapter 1: nat
    gitlab.foss.psick.io: Adapter 2: hostonly
==> gitlab.foss.psick.io: Forwarding ports...
    gitlab.foss.psick.io: 443 (guest) => 1944 (host) (adapter 1)
    gitlab.foss.psick.io: 22 (guest) => 2200 (host) (adapter 1)
==> gitlab.foss.psick.io: Running 'pre-boot' VM customizations...
==> gitlab.foss.psick.io: Booting VM...
==> gitlab.foss.psick.io: Waiting for machine to boot. This may take a few minutes...
    gitlab.foss.psick.io: SSH address: 127.0.0.1:2200
    gitlab.foss.psick.io: SSH username: vagrant
    gitlab.foss.psick.io: SSH auth method: private key
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: Vagrant insecure key detected. Vagrant will automatically replace
    gitlab.foss.psick.io: this with a newly generated keypair for better security.
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: Inserting generated public key within guest...
    gitlab.foss.psick.io: Removing insecure key from the guest if it's present...
    gitlab.foss.psick.io: Key inserted! Disconnecting and reconnecting using new SSH key...
==> gitlab.foss.psick.io: Machine booted and ready!
==> gitlab.foss.psick.io: Checking for guest additions in VM...
    gitlab.foss.psick.io: The guest additions on this VM do not match the installed version of
    gitlab.foss.psick.io: VirtualBox! In most cases this is fine, but in rare cases it can
    gitlab.foss.psick.io: prevent things such as shared folders from working properly. If you see
    gitlab.foss.psick.io: shared folder errors, please make sure the guest additions within the
    gitlab.foss.psick.io: virtual machine match the version of VirtualBox you have installed on
    gitlab.foss.psick.io: your host and reload your VM.
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: Guest Additions Version: 5.0.40
    gitlab.foss.psick.io: VirtualBox Version: 5.2
==> gitlab.foss.psick.io: Setting hostname...
==> gitlab.foss.psick.io: Configuring and enabling network interfaces...
==> gitlab.foss.psick.io: Mounting shared folders...
    gitlab.foss.psick.io: /vagrant => /home/duh/psick/vagrant/environments/foss
    gitlab.foss.psick.io: /vagrant_puppet => /home/duh/psick
==> gitlab.foss.psick.io: Running provisioner: shell...
    gitlab.foss.psick.io: Running: /tmp/vagrant-shell20180327-32682-amynw4.sh
    gitlab.foss.psick.io: ### Setting hostname gitlab.foss.psick.io
==> gitlab.foss.psick.io: Running provisioner: shell...
    gitlab.foss.psick.io: Running: /tmp/vagrant-shell20180327-32682-8jc737.sh
    gitlab.foss.psick.io: ### Setting external facts role=gitlab env=devel zone=foss datacenter=vagrant application=puppetinfra
==> gitlab.foss.psick.io: Running provisioner: shell...
    gitlab.foss.psick.io: Running: /tmp/vagrant-shell20180327-32682-1jkwbri.sh
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: ### Detected Linux distro: ubuntu version 16.04 on arch 64 ###
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: ### Adding repo for Puppet 5 ###
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: ### Running apt-get update ###
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: ### Installing Puppet and its dependencies ###
    gitlab.foss.psick.io: dpkg-preconfigure: unable to re-open stdin: No such file or directory
==> gitlab.foss.psick.io: Running provisioner: shell...
    gitlab.foss.psick.io: Running: /tmp/vagrant-shell20180327-32682-1a93ir.sh
    gitlab.foss.psick.io: ### Linking Puppet host environment to local development directory.
==> gitlab.foss.psick.io: Running provisioner: shell...
    gitlab.foss.psick.io: Running: /tmp/vagrant-shell20180327-32682-16i8aoz.sh
    gitlab.foss.psick.io: ### Installing dependencies needed for puppet apply mode
    gitlab.foss.psick.io: Notice: /Package[ruby]/ensure: created
    gitlab.foss.psick.io: package { 'ruby':
    gitlab.foss.psick.io:   ensure => '1:2.3.0+1',
    gitlab.foss.psick.io: }
    gitlab.foss.psick.io: ### Installing gems with provider gem
    gitlab.foss.psick.io: Notice: /Package[hiera-eyaml]/ensure: created
    gitlab.foss.psick.io: package { 'hiera-eyaml':
    gitlab.foss.psick.io:   ensure => ['2.1.0'],
    gitlab.foss.psick.io: }
    gitlab.foss.psick.io: Notice: /Package[deep_merge]/ensure: created
    gitlab.foss.psick.io: package { 'deep_merge':
    gitlab.foss.psick.io:   ensure => ['1.2.1'],
    gitlab.foss.psick.io: }
    gitlab.foss.psick.io: ### Installing gems with provider puppet_gem
    gitlab.foss.psick.io: Notice: /Package[hiera-eyaml]/ensure: created
    gitlab.foss.psick.io: package { 'hiera-eyaml':
    gitlab.foss.psick.io:   ensure => ['2.1.0'],
    gitlab.foss.psick.io: }
    gitlab.foss.psick.io: package { 'deep_merge':
    gitlab.foss.psick.io:   ensure => ['1.0.1'],
    gitlab.foss.psick.io: }
==> gitlab.foss.psick.io: Running provisioner: shell...
    gitlab.foss.psick.io: Running: /tmp/vagrant-shell20180327-32682-1j29dcg.sh
    gitlab.foss.psick.io: ## Running Puppet apply on /etc/puppetlabs/code/environments/host/manifests/site.pp. Version 5.5.0
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Warning: Undefined variable 'psick::auto_conf'; class psick has not been evaluated\n   (file & line not available)
    gitlab.foss.psick.io: Warning: The function 'hiera_hash' is deprecated in favor of using 'lookup'. See https://docs.puppet.com/puppet/5.5/reference/deprecated_language.html\n   (file & line not available)
    gitlab.foss.psick.io: Notice: Compiled catalog for gitlab.foss.psick.io in environment host in 6.11 seconds
    gitlab.foss.psick.io: Info: Applying configuration version '27a3a38 - Alessandro Franceschi, Sun Mar 25 10:43:05 2018 +0200 : Updated on noop mode'
    gitlab.foss.psick.io: Error: Execution of '/opt/puppetlabs/puppet/bin/gem install --no-rdoc --no-ri msgpack' returned 1: Building native extensions.  This could take a while...
    gitlab.foss.psick.io: ERROR:  Error installing msgpack:
    gitlab.foss.psick.io: 	ERROR: Failed to build gem native extension.
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io:     current directory: /opt/puppetlabs/puppet/lib/ruby/gems/2.4.0/gems/msgpack-1.2.4/ext/msgpack
    gitlab.foss.psick.io: /opt/puppetlabs/puppet/bin/ruby -r ./siteconf20180327-3080-nju3kc.rb extconf.rb
    gitlab.foss.psick.io: checking for ruby/st.h... *** extconf.rb failed ***
    gitlab.foss.psick.io: Could not create Makefile due to some reason, probably lack of necessary
    gitlab.foss.psick.io: libraries and/or headers.  Check the mkmf.log file for more details.  You may
    gitlab.foss.psick.io: need configuration options.
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: Provided configuration options:
    gitlab.foss.psick.io: 	--with-opt-dir
    gitlab.foss.psick.io: 	--with-opt-include
    gitlab.foss.psick.io: 	--without-opt-include=${opt-dir}/include
    gitlab.foss.psick.io: 	--with-opt-lib
    gitlab.foss.psick.io: 	--without-opt-lib=${opt-dir}/lib
    gitlab.foss.psick.io: 	--with-make-prog
    gitlab.foss.psick.io: 	--without-make-prog
    gitlab.foss.psick.io: 	--srcdir=.
    gitlab.foss.psick.io: 	--curdir
    gitlab.foss.psick.io: 	--ruby=/opt/puppetlabs/puppet/bin/$(RUBY_BASE_NAME)
    gitlab.foss.psick.io: /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:457:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
    gitlab.foss.psick.io: You have to install development tools first.
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:588:in `try_cpp'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:1095:in `block in have_header'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:945:in `block in checking_for'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:351:in `block (2 levels) in postpone'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:321:in `open'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:351:in `block in postpone'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:321:in `open'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:347:in `postpone'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:944:in `checking_for'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:1094:in `have_header'
    gitlab.foss.psick.io: 	from extconf.rb:3:in `<main>'
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: To see why this extension failed to compile, please check the mkmf.log which can be found here:
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io:   /opt/puppetlabs/puppet/lib/ruby/gems/2.4.0/extensions/x86_64-linux/2.4.0/msgpack-1.2.4/mkmf.log
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: extconf failed, exit code 1
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: Gem files will remain installed in /opt/puppetlabs/puppet/lib/ruby/gems/2.4.0/gems/msgpack-1.2.4 for inspection.
    gitlab.foss.psick.io: Results logged to /opt/puppetlabs/puppet/lib/ruby/gems/2.4.0/extensions/x86_64-linux/2.4.0/msgpack-1.2.4/gem_make.out
    gitlab.foss.psick.io: Error: /Stage[main]/Psick::Puppet::Gems/Package[puppet_msgpack]/ensure: change from 'absent' to 'present' failed: Execution of '/opt/puppetlabs/puppet/bin/gem install --no-rdoc --no-ri msgpack' returned 1: Building native extensions.  This could take a while...
    gitlab.foss.psick.io: ERROR:  Error installing msgpack:
    gitlab.foss.psick.io: 	ERROR: Failed to build gem native extension.
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io:     current directory: /opt/puppetlabs/puppet/lib/ruby/gems/2.4.0/gems/msgpack-1.2.4/ext/msgpack
    gitlab.foss.psick.io: /opt/puppetlabs/puppet/bin/ruby -r ./siteconf20180327-3080-nju3kc.rb extconf.rb
    gitlab.foss.psick.io: checking for ruby/st.h... *** extconf.rb failed ***
    gitlab.foss.psick.io: Could not create Makefile due to some reason, probably lack of necessary
    gitlab.foss.psick.io: libraries and/or headers.  Check the mkmf.log file for more details.  You may
    gitlab.foss.psick.io: need configuration options.
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: Provided configuration options:
    gitlab.foss.psick.io: 	--with-opt-dir
    gitlab.foss.psick.io: 	--with-opt-include
    gitlab.foss.psick.io: 	--without-opt-include=${opt-dir}/include
    gitlab.foss.psick.io: 	--with-opt-lib
    gitlab.foss.psick.io: 	--without-opt-lib=${opt-dir}/lib
    gitlab.foss.psick.io: 	--with-make-prog
    gitlab.foss.psick.io: 	--without-make-prog
    gitlab.foss.psick.io: 	--srcdir=.
    gitlab.foss.psick.io: 	--curdir
    gitlab.foss.psick.io: 	--ruby=/opt/puppetlabs/puppet/bin/$(RUBY_BASE_NAME)
    gitlab.foss.psick.io: /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:457:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
    gitlab.foss.psick.io: You have to install development tools first.
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:588:in `try_cpp'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:1095:in `block in have_header'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:945:in `block in checking_for'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:351:in `block (2 levels) in postpone'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:321:in `open'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:351:in `block in postpone'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:321:in `open'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:347:in `postpone'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:944:in `checking_for'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:1094:in `have_header'
    gitlab.foss.psick.io: 	from extconf.rb:3:in `<main>'
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: To see why this extension failed to compile, please check the mkmf.log which can be found here:
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io:   /opt/puppetlabs/puppet/lib/ruby/gems/2.4.0/extensions/x86_64-linux/2.4.0/msgpack-1.2.4/mkmf.log
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: extconf failed, exit code 1
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: Gem files will remain installed in /opt/puppetlabs/puppet/lib/ruby/gems/2.4.0/gems/msgpack-1.2.4 for inspection.
    gitlab.foss.psick.io: Results logged to /opt/puppetlabs/puppet/lib/ruby/gems/2.4.0/extensions/x86_64-linux/2.4.0/msgpack-1.2.4/gem_make.out
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Hostname/File[/etc/hostname]/content: 
    gitlab.foss.psick.io: --- /etc/hostname	2018-03-27 08:33:57.997997573 +0000
    gitlab.foss.psick.io: +++ /tmp/puppet-file20180327-2993-75vqhj	2018-03-27 08:34:52.913439584 +0000
    gitlab.foss.psick.io: @@ -1 +1 @@
    gitlab.foss.psick.io: -gitlab
    gitlab.foss.psick.io: +gitlab.foss.psick.io
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: Info: Computing checksum on file /etc/hostname
    gitlab.foss.psick.io: Info: /Stage[main]/Psick::Hostname/File[/etc/hostname]: Filebucketed /etc/hostname to puppet with sum 32596e8376077c3ef8d5cf52f15279ba
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Hostname/File[/etc/hostname]/content: content changed '{md5}32596e8376077c3ef8d5cf52f15279ba' to '{md5}734c8be889be1dfb023f8efe148f4f19'
    gitlab.foss.psick.io: Info: /Stage[main]/Psick::Hostname/File[/etc/hostname]: Scheduling refresh of Exec[apply_hostname]
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Hostname/Exec[apply_hostname]: Triggered 'refresh' from 1 event
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Hosts::File/File[/etc/hosts]/content: 
    gitlab.foss.psick.io: --- /etc/hosts	2018-03-27 08:33:58.046021571 +0000
    gitlab.foss.psick.io: +++ /tmp/puppet-file20180327-2993-r6oztw	2018-03-27 08:34:53.021493580 +0000
    gitlab.foss.psick.io: @@ -1,11 +1,10 @@
    gitlab.foss.psick.io: -127.0.0.1	localhost
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -# The following lines are desirable for IPv6 capable hosts
    gitlab.foss.psick.io: -::1	ip6-localhost	ip6-loopback
    gitlab.foss.psick.io: -fe00::0	ip6-localnet
    gitlab.foss.psick.io: -ff00::0	ip6-mcastprefix
    gitlab.foss.psick.io: -ff02::1	ip6-allnodes
    gitlab.foss.psick.io: -ff02::2	ip6-allrouters
    gitlab.foss.psick.io: -ff02::3	ip6-allhosts
    gitlab.foss.psick.io: -127.0.1.1	gitlab.foss.psick.io	gitlab
    gitlab.foss.psick.io: +# File managed by Puppet
    gitlab.foss.psick.io: +127.0.0.1       localhost       localhost.localdomain 
    gitlab.foss.psick.io: +10.0.2.15 gitlab gitlab.foss.psick.io
    gitlab.foss.psick.io:  
    gitlab.foss.psick.io: +10.42.49.101 puppet puppet.foss.psick.io
    gitlab.foss.psick.io: +10.42.49.102 git git.foss.psick.io
    gitlab.foss.psick.io: +10.42.49.103 cirunner cirunner.foss.psick.io
    gitlab.foss.psick.io: +10.42.49.105 build build.lab.psick.io
    gitlab.foss.psick.io: +10.42.49.106 docker docker.foss.psick.io
    gitlab.foss.psick.io: +10.42.49.107 jenkins jenkins.foss.psick.io
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: Info: Computing checksum on file /etc/hosts
    gitlab.foss.psick.io: Info: /Stage[main]/Psick::Hosts::File/File[/etc/hosts]: Filebucketed /etc/hosts to puppet with sum adae028a6af2c6a07073171e4a94cd7f
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Hosts::File/File[/etc/hosts]/content: content changed '{md5}adae028a6af2c6a07073171e4a94cd7f' to '{md5}1a71bdd30ac583827dda15eee8be0b1e'
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Dns::Resolver/File[/etc/resolv.conf]/ensure: defined content as '{md5}3ccdb679ea166bdf52104b3ae3a4499d'
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Users/User[al]/ensure: created
    gitlab.foss.psick.io: Info: Class[Psick::Pre]: Unscheduling all events on Class[Psick::Pre]
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Sudo/File[/etc/sudoers.d]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Sudo/File[/etc/sudoers.d]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Sudo/File[/etc/sudoers.d/90-cloud-init-users]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Sudo/File[/etc/sudoers.d/90-cloud-init-users]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Sudo/File[/etc/sudoers.d/README]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Sudo/File[/etc/sudoers.d/README]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Sudo/File[/etc/sudoers.d/vagrant]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Sudo/File[/etc/sudoers.d/vagrant]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Timezone/File[timezone]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Timezone/File[timezone]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Timezone/Exec[set-timezone]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Timezone/Exec[set-timezone]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Sysctl/File[/etc/sysctl.conf]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Sysctl/File[/etc/sysctl.conf]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Sysctl/Exec[psick refresh sysctl]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Sysctl/Exec[psick refresh sysctl]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Update/File[/usr/local/sbin/update.sh]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Update/File[/usr/local/sbin/update.sh]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Update/File[/etc/cron.d/system_update]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Update/File[/etc/cron.d/system_update]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Motd/File[/etc/motd]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Motd/File[/etc/motd]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Motd/File[/etc/issue]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Motd/File[/etc/issue]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Profile/File[/etc/profile.d/tz.sh]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Profile/File[/etc/profile.d/tz.sh]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Network/Exec[/sbin/ifdown -a && /sbin/ifup -a]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Network/Exec[/sbin/ifdown -a && /sbin/ifup -a]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Monitor::Sar/Package[sysstat]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Monitor::Sar/Package[sysstat]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Monitor::Sar/File[/etc/cron.d/sysstat]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Monitor::Sar/File[/etc/cron.d/sysstat]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Puppet::Tp/Tp::Install[puppet-agent]/Service[puppet]/ensure: ensure changed 'stopped' to 'running'
    gitlab.foss.psick.io: Info: /Stage[main]/Psick::Puppet::Tp/Tp::Install[puppet-agent]/Service[puppet]: Unscheduling refresh on Service[puppet]
    gitlab.foss.psick.io: Notice: /Stage[main]/Tp/File[/etc/tp]/ensure: created
    gitlab.foss.psick.io: Notice: /Stage[main]/Tp/File[/etc/tp/app]/ensure: created
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Puppet::Tp/Tp::Install[puppet-agent]/File[/etc/tp/app/puppet-agent]/ensure: defined content as '{md5}28236d4dca9f79c731a4de6b4103f1ea'
    gitlab.foss.psick.io: Notice: /Stage[main]/Tp/File[/etc/tp/test]/ensure: created
    gitlab.foss.psick.io: Notice: /Stage[main]/Tp/File[/usr/local/bin/tp]/ensure: defined content as '{md5}25f3e0efb4cf72cebf5561362f598ba5'
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Postfix::Tp/Tp::Install[postfix]/Package[postfix]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Postfix::Tp/Tp::Install[postfix]/Package[postfix]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Postfix::Tp/Tp::Install[postfix]/File[/etc/tp/app/postfix]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Postfix::Tp/Tp::Install[postfix]/File[/etc/tp/app/postfix]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Postfix::Tp/Tp::Conf[postfix]/File[/etc/postfix/main.cf]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Postfix::Tp/Tp::Conf[postfix]/File[/etc/postfix/main.cf]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Postfix::Tp/Tp::Install[postfix]/Service[postfix]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Postfix::Tp/Tp::Install[postfix]/Service[postfix]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Openssh/Tp::Install[openssh]/Package[openssh-server]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Openssh/Tp::Install[openssh]/Package[openssh-server]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Openssh/Tp::Install[openssh]/Service[ssh]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Openssh/Tp::Install[openssh]/Service[ssh]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Openssh/Tp::Install[openssh]/File[/etc/tp/app/openssh]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Openssh/Tp::Install[openssh]/File[/etc/tp/app/openssh]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Logs::Rsyslog/Tp::Install[rsyslog]/Package[rsyslog]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Logs::Rsyslog/Tp::Install[rsyslog]/Package[rsyslog]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Logs::Rsyslog/Tp::Install[rsyslog]/File[/etc/tp/app/rsyslog]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Logs::Rsyslog/Tp::Install[rsyslog]/File[/etc/tp/app/rsyslog]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Logs::Rsyslog/Tp::Dir[rsyslog]/File[/etc/rsyslog.d]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Logs::Rsyslog/Tp::Dir[rsyslog]/File[/etc/rsyslog.d]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Logs::Rsyslog/Tp::Install[rsyslog]/Service[rsyslog]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Logs::Rsyslog/Tp::Install[rsyslog]/Service[rsyslog]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Time::Ntpdate/Tp::Install[ntpdate]/Package[ntpdate]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Time::Ntpdate/Tp::Install[ntpdate]/Package[ntpdate]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Time::Ntpdate/Tp::Install[ntpdate]/File[/etc/tp/app/ntpdate]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Time::Ntpdate/Tp::Install[ntpdate]/File[/etc/tp/app/ntpdate]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Time::Ntpdate/Exec[ntpdate -s pool.ntp.org]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Time::Ntpdate/Exec[ntpdate -s pool.ntp.org]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Info: Stage[main]: Unscheduling all events on Stage[main]
    gitlab.foss.psick.io: Notice: Applied catalog in 1.97 seconds
    gitlab.foss.psick.io: Changes:
    gitlab.foss.psick.io:             Total: 10
    gitlab.foss.psick.io: Events:
    gitlab.foss.psick.io:           Failure: 1
    gitlab.foss.psick.io:           Success: 10
    gitlab.foss.psick.io:             Total: 11
    gitlab.foss.psick.io: Resources:
    gitlab.foss.psick.io:            Failed: 1
    gitlab.foss.psick.io:         Restarted: 1
    gitlab.foss.psick.io:           Changed: 10
    gitlab.foss.psick.io:       Out of sync: 11
    gitlab.foss.psick.io:           Skipped: 30
    gitlab.foss.psick.io:             Total: 50
    gitlab.foss.psick.io: Time:
    gitlab.foss.psick.io:          Schedule: 0.00
    gitlab.foss.psick.io:              Exec: 0.02
    gitlab.foss.psick.io:              User: 0.04
    gitlab.foss.psick.io:              File: 0.12
    gitlab.foss.psick.io:           Service: 0.22
    gitlab.foss.psick.io:           Package: 1.20
    gitlab.foss.psick.io:    Transaction evaluation: 1.96
    gitlab.foss.psick.io:    Catalog application: 1.97
    gitlab.foss.psick.io:          Last run: 1522139693
    gitlab.foss.psick.io:    Config retrieval: 6.87
    gitlab.foss.psick.io:        Filebucket: 0.00
    gitlab.foss.psick.io:             Total: 12.40
    gitlab.foss.psick.io: Version:
    gitlab.foss.psick.io:            Config: 27a3a38 - Alessandro Franceschi, Sun Mar 25 10:43:05 2018 +0200 : Updated on noop mode
    gitlab.foss.psick.io:            Puppet: 5.5.0
The SSH command responded with a non-zero exit status. Vagrant
assumes that this means the command failed. The output for this command
should be in the log above. Please read the output to determine what
went wrong.
vagrant up gitlab.foss.psick.io  4.27s user 4.28s system 8% cpu 1:42.54 total
1 duh@duh-notebook ~/psick/vagrant/environments/foss (git)-[production] % vagrant provision gitlab.foss.psick.io   :(
==> gitlab.foss.psick.io: Running provisioner: shell...
    gitlab.foss.psick.io: Running: /tmp/vagrant-shell20180327-2822-w7ons2.sh
    gitlab.foss.psick.io: ### Setting hostname gitlab.foss.psick.io
==> gitlab.foss.psick.io: Running provisioner: shell...
    gitlab.foss.psick.io: Running: /tmp/vagrant-shell20180327-2822-14aaugy.sh
    gitlab.foss.psick.io: ### Setting external facts role=gitlab env=devel zone=foss datacenter=vagrant application=puppetinfra
==> gitlab.foss.psick.io: Running provisioner: shell...
    gitlab.foss.psick.io: Running: /tmp/vagrant-shell20180327-2822-rh3uft.sh
    gitlab.foss.psick.io: 5.5.0
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: ### Puppet version 5 or higher present. Skipping installation. ###
==> gitlab.foss.psick.io: Running provisioner: shell...
    gitlab.foss.psick.io: Running: /tmp/vagrant-shell20180327-2822-1rqyt6v.sh
==> gitlab.foss.psick.io: Running provisioner: shell...
    gitlab.foss.psick.io: Running: /tmp/vagrant-shell20180327-2822-1h60m61.sh
    gitlab.foss.psick.io: ### Found /var/tmp/vagrant-setup_papply.lock. Skipping installation of dependencies needed for puppet apply mode
    gitlab.foss.psick.io: ## Remove /var/tmp/vagrant-setup_papply.lock on the Vagrant VM to retry their installation
==> gitlab.foss.psick.io: Running provisioner: shell...
    gitlab.foss.psick.io: Running: /tmp/vagrant-shell20180327-2822-phrc6g.sh
    gitlab.foss.psick.io: ## Running Puppet apply on /etc/puppetlabs/code/environments/host/manifests/site.pp. Version 5.5.0
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Warning: Undefined variable 'psick::auto_conf'; class psick has not been evaluated\n   (file & line not available)
    gitlab.foss.psick.io: Warning: The function 'hiera_hash' is deprecated in favor of using 'lookup'. See https://docs.puppet.com/puppet/5.5/reference/deprecated_language.html\n   (file & line not available)
    gitlab.foss.psick.io: Notice: Compiled catalog for gitlab.foss.psick.io in environment host in 6.03 seconds
    gitlab.foss.psick.io: Info: Applying configuration version '27a3a38 - Alessandro Franceschi, Sun Mar 25 10:43:05 2018 +0200 : Updated on noop mode'
    gitlab.foss.psick.io: Error: Execution of '/opt/puppetlabs/puppet/bin/gem install --no-rdoc --no-ri msgpack' returned 1: Building native extensions.  This could take a while...
    gitlab.foss.psick.io: ERROR:  Error installing msgpack:
    gitlab.foss.psick.io: 	ERROR: Failed to build gem native extension.
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io:     current directory: /opt/puppetlabs/puppet/lib/ruby/gems/2.4.0/gems/msgpack-1.2.4/ext/msgpack
    gitlab.foss.psick.io: /opt/puppetlabs/puppet/bin/ruby -r ./siteconf20180327-3494-yyk754.rb extconf.rb
    gitlab.foss.psick.io: checking for ruby/st.h... *** extconf.rb failed ***
    gitlab.foss.psick.io: Could not create Makefile due to some reason, probably lack of necessary
    gitlab.foss.psick.io: libraries and/or headers.  Check the mkmf.log file for more details.  You may
    gitlab.foss.psick.io: need configuration options.
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: Provided configuration options:
    gitlab.foss.psick.io: 	--with-opt-dir
    gitlab.foss.psick.io: 	--with-opt-include
    gitlab.foss.psick.io: 	--without-opt-include=${opt-dir}/include
    gitlab.foss.psick.io: 	--with-opt-lib
    gitlab.foss.psick.io: 	--without-opt-lib=${opt-dir}/lib
    gitlab.foss.psick.io: 	--with-make-prog
    gitlab.foss.psick.io: 	--without-make-prog
    gitlab.foss.psick.io: 	--srcdir=.
    gitlab.foss.psick.io: 	--curdir
    gitlab.foss.psick.io: 	--ruby=/opt/puppetlabs/puppet/bin/$(RUBY_BASE_NAME)
    gitlab.foss.psick.io: /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:457:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
    gitlab.foss.psick.io: You have to install development tools first.
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:588:in `try_cpp'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:1095:in `block in have_header'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:945:in `block in checking_for'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:351:in `block (2 levels) in postpone'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:321:in `open'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:351:in `block in postpone'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:321:in `open'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:347:in `postpone'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:944:in `checking_for'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:1094:in `have_header'
    gitlab.foss.psick.io: 	from extconf.rb:3:in `<main>'
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: To see why this extension failed to compile, please check the mkmf.log which can be found here:
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io:   /opt/puppetlabs/puppet/lib/ruby/gems/2.4.0/extensions/x86_64-linux/2.4.0/msgpack-1.2.4/mkmf.log
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: extconf failed, exit code 1
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: Gem files will remain installed in /opt/puppetlabs/puppet/lib/ruby/gems/2.4.0/gems/msgpack-1.2.4 for inspection.
    gitlab.foss.psick.io: Results logged to /opt/puppetlabs/puppet/lib/ruby/gems/2.4.0/extensions/x86_64-linux/2.4.0/msgpack-1.2.4/gem_make.out
    gitlab.foss.psick.io: Error: /Stage[main]/Psick::Puppet::Gems/Package[puppet_msgpack]/ensure: change from 'absent' to 'present' failed: Execution of '/opt/puppetlabs/puppet/bin/gem install --no-rdoc --no-ri msgpack' returned 1: Building native extensions.  This could take a while...
    gitlab.foss.psick.io: ERROR:  Error installing msgpack:
    gitlab.foss.psick.io: 	ERROR: Failed to build gem native extension.
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io:     current directory: /opt/puppetlabs/puppet/lib/ruby/gems/2.4.0/gems/msgpack-1.2.4/ext/msgpack
    gitlab.foss.psick.io: /opt/puppetlabs/puppet/bin/ruby -r ./siteconf20180327-3494-yyk754.rb extconf.rb
    gitlab.foss.psick.io: checking for ruby/st.h... *** extconf.rb failed ***
    gitlab.foss.psick.io: Could not create Makefile due to some reason, probably lack of necessary
    gitlab.foss.psick.io: libraries and/or headers.  Check the mkmf.log file for more details.  You may
    gitlab.foss.psick.io: need configuration options.
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: Provided configuration options:
    gitlab.foss.psick.io: 	--with-opt-dir
    gitlab.foss.psick.io: 	--with-opt-include
    gitlab.foss.psick.io: 	--without-opt-include=${opt-dir}/include
    gitlab.foss.psick.io: 	--with-opt-lib
    gitlab.foss.psick.io: 	--without-opt-lib=${opt-dir}/lib
    gitlab.foss.psick.io: 	--with-make-prog
    gitlab.foss.psick.io: 	--without-make-prog
    gitlab.foss.psick.io: 	--srcdir=.
    gitlab.foss.psick.io: 	--curdir
    gitlab.foss.psick.io: 	--ruby=/opt/puppetlabs/puppet/bin/$(RUBY_BASE_NAME)
    gitlab.foss.psick.io: /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:457:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
    gitlab.foss.psick.io: You have to install development tools first.
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:588:in `try_cpp'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:1095:in `block in have_header'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:945:in `block in checking_for'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:351:in `block (2 levels) in postpone'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:321:in `open'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:351:in `block in postpone'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:321:in `open'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:347:in `postpone'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:944:in `checking_for'
    gitlab.foss.psick.io: 	from /opt/puppetlabs/puppet/lib/ruby/2.4.0/mkmf.rb:1094:in `have_header'
    gitlab.foss.psick.io: 	from extconf.rb:3:in `<main>'
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: To see why this extension failed to compile, please check the mkmf.log which can be found here:
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io:   /opt/puppetlabs/puppet/lib/ruby/gems/2.4.0/extensions/x86_64-linux/2.4.0/msgpack-1.2.4/mkmf.log
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: extconf failed, exit code 1
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: Gem files will remain installed in /opt/puppetlabs/puppet/lib/ruby/gems/2.4.0/gems/msgpack-1.2.4 for inspection.
    gitlab.foss.psick.io: Results logged to /opt/puppetlabs/puppet/lib/ruby/gems/2.4.0/extensions/x86_64-linux/2.4.0/msgpack-1.2.4/gem_make.out
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Sudo/File[/etc/sudoers.d]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Sudo/File[/etc/sudoers.d]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Sudo/File[/etc/sudoers.d/90-cloud-init-users]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Sudo/File[/etc/sudoers.d/90-cloud-init-users]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Sudo/File[/etc/sudoers.d/README]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Sudo/File[/etc/sudoers.d/README]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Sudo/File[/etc/sudoers.d/vagrant]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Sudo/File[/etc/sudoers.d/vagrant]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Timezone/File[timezone]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Timezone/File[timezone]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Timezone/Exec[set-timezone]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Timezone/Exec[set-timezone]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Sysctl/File[/etc/sysctl.conf]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Sysctl/File[/etc/sysctl.conf]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Sysctl/Exec[psick refresh sysctl]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Sysctl/Exec[psick refresh sysctl]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Update/File[/usr/local/sbin/update.sh]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Update/File[/usr/local/sbin/update.sh]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Update/File[/etc/cron.d/system_update]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Update/File[/etc/cron.d/system_update]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Motd/File[/etc/motd]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Motd/File[/etc/motd]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Motd/File[/etc/issue]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Motd/File[/etc/issue]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Profile/File[/etc/profile.d/tz.sh]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Profile/File[/etc/profile.d/tz.sh]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Network/Exec[/sbin/ifdown -a && /sbin/ifup -a]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Network/Exec[/sbin/ifdown -a && /sbin/ifup -a]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Monitor::Sar/Package[sysstat]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Monitor::Sar/Package[sysstat]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Monitor::Sar/File[/etc/cron.d/sysstat]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Monitor::Sar/File[/etc/cron.d/sysstat]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Postfix::Tp/Tp::Install[postfix]/Package[postfix]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Postfix::Tp/Tp::Install[postfix]/Package[postfix]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Postfix::Tp/Tp::Install[postfix]/File[/etc/tp/app/postfix]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Postfix::Tp/Tp::Install[postfix]/File[/etc/tp/app/postfix]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Postfix::Tp/Tp::Conf[postfix]/File[/etc/postfix/main.cf]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Postfix::Tp/Tp::Conf[postfix]/File[/etc/postfix/main.cf]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Postfix::Tp/Tp::Install[postfix]/Service[postfix]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Postfix::Tp/Tp::Install[postfix]/Service[postfix]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Openssh/Tp::Install[openssh]/Package[openssh-server]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Openssh/Tp::Install[openssh]/Package[openssh-server]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Openssh/Tp::Install[openssh]/Service[ssh]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Openssh/Tp::Install[openssh]/Service[ssh]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Openssh/Tp::Install[openssh]/File[/etc/tp/app/openssh]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Openssh/Tp::Install[openssh]/File[/etc/tp/app/openssh]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Logs::Rsyslog/Tp::Install[rsyslog]/Package[rsyslog]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Logs::Rsyslog/Tp::Install[rsyslog]/Package[rsyslog]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Logs::Rsyslog/Tp::Install[rsyslog]/File[/etc/tp/app/rsyslog]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Logs::Rsyslog/Tp::Install[rsyslog]/File[/etc/tp/app/rsyslog]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Logs::Rsyslog/Tp::Dir[rsyslog]/File[/etc/rsyslog.d]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Logs::Rsyslog/Tp::Dir[rsyslog]/File[/etc/rsyslog.d]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Logs::Rsyslog/Tp::Install[rsyslog]/Service[rsyslog]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Logs::Rsyslog/Tp::Install[rsyslog]/Service[rsyslog]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Time::Ntpdate/Tp::Install[ntpdate]/Package[ntpdate]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Time::Ntpdate/Tp::Install[ntpdate]/Package[ntpdate]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Time::Ntpdate/Tp::Install[ntpdate]/File[/etc/tp/app/ntpdate]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Time::Ntpdate/Tp::Install[ntpdate]/File[/etc/tp/app/ntpdate]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Time::Ntpdate/Exec[ntpdate -s pool.ntp.org]: Dependency Package[puppet_msgpack] has failures: true
    gitlab.foss.psick.io: Warning: /Stage[main]/Psick::Time::Ntpdate/Exec[ntpdate -s pool.ntp.org]: Skipping because of failed dependencies
    gitlab.foss.psick.io: Notice: Applied catalog in 1.44 seconds
    gitlab.foss.psick.io: Changes:
    gitlab.foss.psick.io: Events:
    gitlab.foss.psick.io:           Failure: 1
    gitlab.foss.psick.io:             Total: 1
    gitlab.foss.psick.io: Resources:
    gitlab.foss.psick.io:            Failed: 1
    gitlab.foss.psick.io:       Out of sync: 1
    gitlab.foss.psick.io:           Skipped: 30
    gitlab.foss.psick.io:             Total: 50
    gitlab.foss.psick.io: Time:
    gitlab.foss.psick.io:        Filebucket: 0.00
    gitlab.foss.psick.io:          Schedule: 0.00
    gitlab.foss.psick.io:              User: 0.00
    gitlab.foss.psick.io:              File: 0.01
    gitlab.foss.psick.io:              Exec: 0.02
    gitlab.foss.psick.io:           Service: 0.03
    gitlab.foss.psick.io:           Package: 1.02
    gitlab.foss.psick.io:    Transaction evaluation: 1.43
    gitlab.foss.psick.io:    Catalog application: 1.44
    gitlab.foss.psick.io:          Last run: 1522139799
    gitlab.foss.psick.io:    Config retrieval: 6.74
    gitlab.foss.psick.io:             Total: 10.69
    gitlab.foss.psick.io: Version:
    gitlab.foss.psick.io:            Config: 27a3a38 - Alessandro Franceschi, Sun Mar 25 10:43:05 2018 +0200 : Updated on noop mode
    gitlab.foss.psick.io:            Puppet: 5.5.0
The SSH command responded with a non-zero exit status. Vagrant
assumes that this means the command failed. The output for this command
should be in the log above. Please read the output to determine what
went wrong.
1 duh@duh-notebook ~/psick/vagrant/environments/foss (git)-[production] % vagrant ssh gitlab.foss.psick.io         :(
Welcome to Ubuntu 16.04.4 LTS (GNU/Linux 4.4.0-116-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  Get cloud support with Ubuntu Advantage Cloud Guest:
    http://www.ubuntu.com/business/services/cloud

3 packages can be updated.
0 updates are security updates.


vagrant@gitlab:~$ apt-get install -y git gcc make bzip2
E: Could not open lock file /var/lib/dpkg/lock - open (13: Permission denied)
E: Unable to lock the administration directory (/var/lib/dpkg/), are you root?
vagrant@gitlab:~$ sudo su -
root@gitlab:~# apt-get install -y git gcc make bzip2
Reading package lists... Done
Building dependency tree       
Reading state information... Done
bzip2 is already the newest version (1.0.6-8).
git is already the newest version (1:2.7.4-0ubuntu1.3).
The following additional packages will be installed:
  binutils cpp cpp-5 gcc-5 libasan2 libatomic1 libc-dev-bin libc6-dev libcc1-0 libcilkrts5 libgcc-5-dev libgomp1
  libisl15 libitm1 liblsan0 libmpc3 libmpx0 libquadmath0 libtsan0 libubsan0 linux-libc-dev manpages-dev
Suggested packages:
  binutils-doc cpp-doc gcc-5-locales gcc-multilib autoconf automake libtool flex bison gdb gcc-doc gcc-5-multilib
  gcc-5-doc libgcc1-dbg libgomp1-dbg libitm1-dbg libatomic1-dbg libasan2-dbg liblsan0-dbg libtsan0-dbg libubsan0-dbg
  libcilkrts5-dbg libmpx0-dbg libquadmath0-dbg glibc-doc make-doc
The following NEW packages will be installed:
  binutils cpp cpp-5 gcc gcc-5 libasan2 libatomic1 libc-dev-bin libc6-dev libcc1-0 libcilkrts5 libgcc-5-dev libgomp1
  libisl15 libitm1 liblsan0 libmpc3 libmpx0 libquadmath0 libtsan0 libubsan0 linux-libc-dev make manpages-dev
0 upgraded, 24 newly installed, 0 to remove and 3 not upgraded.
Need to get 27.7 MB of archives.
After this operation, 100 MB of additional disk space will be used.
Get:1 http://archive.ubuntu.com/ubuntu xenial/main amd64 libmpc3 amd64 1.0.3-1 [39.7 kB]
Get:2 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 binutils amd64 2.26.1-1ubuntu1~16.04.6 [2,311 kB]
Get:3 http://archive.ubuntu.com/ubuntu xenial/main amd64 libisl15 amd64 0.16.1-1 [524 kB]
Get:4 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 cpp-5 amd64 5.4.0-6ubuntu1~16.04.9 [7,685 kB]
Get:5 http://archive.ubuntu.com/ubuntu xenial/main amd64 cpp amd64 4:5.3.1-1ubuntu1 [27.7 kB]
Get:6 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libcc1-0 amd64 5.4.0-6ubuntu1~16.04.9 [38.8 kB]
Get:7 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libgomp1 amd64 5.4.0-6ubuntu1~16.04.9 [55.0 kB]
Get:8 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libitm1 amd64 5.4.0-6ubuntu1~16.04.9 [27.4 kB]
Get:9 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libatomic1 amd64 5.4.0-6ubuntu1~16.04.9 [8,882 B]
Get:10 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libasan2 amd64 5.4.0-6ubuntu1~16.04.9 [264 kB]
Get:11 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 liblsan0 amd64 5.4.0-6ubuntu1~16.04.9 [105 kB]
Get:12 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libtsan0 amd64 5.4.0-6ubuntu1~16.04.9 [244 kB]
Get:13 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libubsan0 amd64 5.4.0-6ubuntu1~16.04.9 [95.2 kB]
Get:14 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libcilkrts5 amd64 5.4.0-6ubuntu1~16.04.9 [40.1 kB]
Get:15 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libmpx0 amd64 5.4.0-6ubuntu1~16.04.9 [9,774 B]
Get:16 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libquadmath0 amd64 5.4.0-6ubuntu1~16.04.9 [131 kB]
Get:17 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libgcc-5-dev amd64 5.4.0-6ubuntu1~16.04.9 [2,242 kB]
Get:18 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 gcc-5 amd64 5.4.0-6ubuntu1~16.04.9 [8,650 kB]
Get:19 http://archive.ubuntu.com/ubuntu xenial/main amd64 gcc amd64 4:5.3.1-1ubuntu1 [5,244 B]                       
Get:20 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libc-dev-bin amd64 2.23-0ubuntu10 [68.7 kB]        
Get:21 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 linux-libc-dev amd64 4.4.0-116.140 [823 kB]        
Get:22 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libc6-dev amd64 2.23-0ubuntu10 [2,079 kB]          
Get:23 http://archive.ubuntu.com/ubuntu xenial/main amd64 make amd64 4.1-6 [151 kB]                                  
Get:24 http://archive.ubuntu.com/ubuntu xenial/main amd64 manpages-dev all 4.04-2 [2,048 kB]                         
Fetched 27.7 MB in 10s (2,623 kB/s)                                                                                  
Selecting previously unselected package libmpc3:amd64.
(Reading database ... 63831 files and directories currently installed.)
Preparing to unpack .../libmpc3_1.0.3-1_amd64.deb ...
Unpacking libmpc3:amd64 (1.0.3-1) ...
Selecting previously unselected package binutils.
Preparing to unpack .../binutils_2.26.1-1ubuntu1~16.04.6_amd64.deb ...
Unpacking binutils (2.26.1-1ubuntu1~16.04.6) ...
Selecting previously unselected package libisl15:amd64.
Preparing to unpack .../libisl15_0.16.1-1_amd64.deb ...
Unpacking libisl15:amd64 (0.16.1-1) ...
Selecting previously unselected package cpp-5.
Preparing to unpack .../cpp-5_5.4.0-6ubuntu1~16.04.9_amd64.deb ...
Unpacking cpp-5 (5.4.0-6ubuntu1~16.04.9) ...
Selecting previously unselected package cpp.
Preparing to unpack .../cpp_4%3a5.3.1-1ubuntu1_amd64.deb ...
Unpacking cpp (4:5.3.1-1ubuntu1) ...
Selecting previously unselected package libcc1-0:amd64.
Preparing to unpack .../libcc1-0_5.4.0-6ubuntu1~16.04.9_amd64.deb ...
Unpacking libcc1-0:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Selecting previously unselected package libgomp1:amd64.
Preparing to unpack .../libgomp1_5.4.0-6ubuntu1~16.04.9_amd64.deb ...
Unpacking libgomp1:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Selecting previously unselected package libitm1:amd64.
Preparing to unpack .../libitm1_5.4.0-6ubuntu1~16.04.9_amd64.deb ...
Unpacking libitm1:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Selecting previously unselected package libatomic1:amd64.
Preparing to unpack .../libatomic1_5.4.0-6ubuntu1~16.04.9_amd64.deb ...
Unpacking libatomic1:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Selecting previously unselected package libasan2:amd64.
Preparing to unpack .../libasan2_5.4.0-6ubuntu1~16.04.9_amd64.deb ...
Unpacking libasan2:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Selecting previously unselected package liblsan0:amd64.
Preparing to unpack .../liblsan0_5.4.0-6ubuntu1~16.04.9_amd64.deb ...
Unpacking liblsan0:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Selecting previously unselected package libtsan0:amd64.
Preparing to unpack .../libtsan0_5.4.0-6ubuntu1~16.04.9_amd64.deb ...
Unpacking libtsan0:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Selecting previously unselected package libubsan0:amd64.
Preparing to unpack .../libubsan0_5.4.0-6ubuntu1~16.04.9_amd64.deb ...
Unpacking libubsan0:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Selecting previously unselected package libcilkrts5:amd64.
Preparing to unpack .../libcilkrts5_5.4.0-6ubuntu1~16.04.9_amd64.deb ...
Unpacking libcilkrts5:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Selecting previously unselected package libmpx0:amd64.
Preparing to unpack .../libmpx0_5.4.0-6ubuntu1~16.04.9_amd64.deb ...
Unpacking libmpx0:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Selecting previously unselected package libquadmath0:amd64.
Preparing to unpack .../libquadmath0_5.4.0-6ubuntu1~16.04.9_amd64.deb ...
Unpacking libquadmath0:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Selecting previously unselected package libgcc-5-dev:amd64.
Preparing to unpack .../libgcc-5-dev_5.4.0-6ubuntu1~16.04.9_amd64.deb ...
Unpacking libgcc-5-dev:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Selecting previously unselected package gcc-5.
Preparing to unpack .../gcc-5_5.4.0-6ubuntu1~16.04.9_amd64.deb ...
Unpacking gcc-5 (5.4.0-6ubuntu1~16.04.9) ...
Selecting previously unselected package gcc.
Preparing to unpack .../gcc_4%3a5.3.1-1ubuntu1_amd64.deb ...
Unpacking gcc (4:5.3.1-1ubuntu1) ...
Selecting previously unselected package libc-dev-bin.
Preparing to unpack .../libc-dev-bin_2.23-0ubuntu10_amd64.deb ...
Unpacking libc-dev-bin (2.23-0ubuntu10) ...
Selecting previously unselected package linux-libc-dev:amd64.
Preparing to unpack .../linux-libc-dev_4.4.0-116.140_amd64.deb ...
Unpacking linux-libc-dev:amd64 (4.4.0-116.140) ...
Selecting previously unselected package libc6-dev:amd64.
Preparing to unpack .../libc6-dev_2.23-0ubuntu10_amd64.deb ...
Unpacking libc6-dev:amd64 (2.23-0ubuntu10) ...
Selecting previously unselected package make.
Preparing to unpack .../archives/make_4.1-6_amd64.deb ...
Unpacking make (4.1-6) ...
Selecting previously unselected package manpages-dev.
Preparing to unpack .../manpages-dev_4.04-2_all.deb ...
Unpacking manpages-dev (4.04-2) ...
Processing triggers for libc-bin (2.23-0ubuntu10) ...
Processing triggers for man-db (2.7.5-1) ...
Setting up libmpc3:amd64 (1.0.3-1) ...
Setting up binutils (2.26.1-1ubuntu1~16.04.6) ...
Setting up libisl15:amd64 (0.16.1-1) ...
Setting up cpp-5 (5.4.0-6ubuntu1~16.04.9) ...
Setting up cpp (4:5.3.1-1ubuntu1) ...
Setting up libcc1-0:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Setting up libgomp1:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Setting up libitm1:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Setting up libatomic1:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Setting up libasan2:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Setting up liblsan0:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Setting up libtsan0:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Setting up libubsan0:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Setting up libcilkrts5:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Setting up libmpx0:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Setting up libquadmath0:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Setting up libgcc-5-dev:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Setting up gcc-5 (5.4.0-6ubuntu1~16.04.9) ...
Setting up gcc (4:5.3.1-1ubuntu1) ...
Setting up libc-dev-bin (2.23-0ubuntu10) ...
Setting up linux-libc-dev:amd64 (4.4.0-116.140) ...
Setting up libc6-dev:amd64 (2.23-0ubuntu10) ...
Setting up make (4.1-6) ...
Setting up manpages-dev (4.04-2) ...
Processing triggers for libc-bin (2.23-0ubuntu10) ...
root@gitlab:~# apt-get install -y libssl-dev libreadline-dev zlib1g-dev g++
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following additional packages will be installed:
  g++-5 libreadline6-dev libssl-doc libstdc++-5-dev libtinfo-dev
Suggested packages:
  g++-multilib g++-5-multilib gcc-5-doc libstdc++6-5-dbg readline-doc libstdc++-5-doc
The following NEW packages will be installed:
  g++ g++-5 libreadline-dev libreadline6-dev libssl-dev libssl-doc libstdc++-5-dev libtinfo-dev zlib1g-dev
0 upgraded, 9 newly installed, 0 to remove and 3 not upgraded.
Need to get 12.6 MB of archives.
After this operation, 50.7 MB of additional disk space will be used.
Get:1 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libstdc++-5-dev amd64 5.4.0-6ubuntu1~16.04.9 [1,427 kB]
Get:2 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 g++-5 amd64 5.4.0-6ubuntu1~16.04.9 [8,333 kB]
Get:3 http://archive.ubuntu.com/ubuntu xenial/main amd64 g++ amd64 4:5.3.1-1ubuntu1 [1,504 B]
Get:4 http://archive.ubuntu.com/ubuntu xenial/main amd64 libtinfo-dev amd64 6.0+20160213-1ubuntu1 [77.4 kB]
Get:5 http://archive.ubuntu.com/ubuntu xenial/main amd64 libreadline6-dev amd64 6.3-8ubuntu2 [124 kB]
Get:6 http://archive.ubuntu.com/ubuntu xenial/main amd64 libreadline-dev amd64 6.3-8ubuntu2 [992 B]
Get:7 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 zlib1g-dev amd64 1:1.2.8.dfsg-2ubuntu4.1 [168 kB]
Get:8 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libssl-dev amd64 1.0.2g-1ubuntu4.10 [1,341 kB]
Get:9 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 libssl-doc all 1.0.2g-1ubuntu4.10 [1,079 kB]
Fetched 12.6 MB in 3s (3,337 kB/s)
Selecting previously unselected package libstdc++-5-dev:amd64.
(Reading database ... 67718 files and directories currently installed.)
Preparing to unpack .../libstdc++-5-dev_5.4.0-6ubuntu1~16.04.9_amd64.deb ...
Unpacking libstdc++-5-dev:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Selecting previously unselected package g++-5.
Preparing to unpack .../g++-5_5.4.0-6ubuntu1~16.04.9_amd64.deb ...
Unpacking g++-5 (5.4.0-6ubuntu1~16.04.9) ...
Selecting previously unselected package g++.
Preparing to unpack .../g++_4%3a5.3.1-1ubuntu1_amd64.deb ...
Unpacking g++ (4:5.3.1-1ubuntu1) ...
Selecting previously unselected package libtinfo-dev:amd64.
Preparing to unpack .../libtinfo-dev_6.0+20160213-1ubuntu1_amd64.deb ...
Unpacking libtinfo-dev:amd64 (6.0+20160213-1ubuntu1) ...
Selecting previously unselected package libreadline6-dev:amd64.
Preparing to unpack .../libreadline6-dev_6.3-8ubuntu2_amd64.deb ...
Unpacking libreadline6-dev:amd64 (6.3-8ubuntu2) ...
Selecting previously unselected package libreadline-dev:amd64.
Preparing to unpack .../libreadline-dev_6.3-8ubuntu2_amd64.deb ...
Unpacking libreadline-dev:amd64 (6.3-8ubuntu2) ...
Selecting previously unselected package zlib1g-dev:amd64.
Preparing to unpack .../zlib1g-dev_1%3a1.2.8.dfsg-2ubuntu4.1_amd64.deb ...
Unpacking zlib1g-dev:amd64 (1:1.2.8.dfsg-2ubuntu4.1) ...
Selecting previously unselected package libssl-dev:amd64.
Preparing to unpack .../libssl-dev_1.0.2g-1ubuntu4.10_amd64.deb ...
Unpacking libssl-dev:amd64 (1.0.2g-1ubuntu4.10) ...
Selecting previously unselected package libssl-doc.
Preparing to unpack .../libssl-doc_1.0.2g-1ubuntu4.10_all.deb ...
Unpacking libssl-doc (1.0.2g-1ubuntu4.10) ...
Processing triggers for man-db (2.7.5-1) ...
Processing triggers for install-info (6.1.0.dfsg.1-5) ...
Setting up libstdc++-5-dev:amd64 (5.4.0-6ubuntu1~16.04.9) ...
Setting up g++-5 (5.4.0-6ubuntu1~16.04.9) ...
Setting up g++ (4:5.3.1-1ubuntu1) ...
update-alternatives: using /usr/bin/g++ to provide /usr/bin/c++ (c++) in auto mode
Setting up libtinfo-dev:amd64 (6.0+20160213-1ubuntu1) ...
Setting up libreadline6-dev:amd64 (6.3-8ubuntu2) ...
Setting up libreadline-dev:amd64 (6.3-8ubuntu2) ...
Setting up zlib1g-dev:amd64 (1:1.2.8.dfsg-2ubuntu4.1) ...
Setting up libssl-dev:amd64 (1.0.2g-1ubuntu4.10) ...
Setting up libssl-doc (1.0.2g-1ubuntu4.10) ...
root@gitlab:~# logout
vagrant@gitlab:~$ ^C
vagrant@gitlab:~$ logout
Connection to 127.0.0.1 closed.
130 duh@duh-notebook ~/psick/vagrant/environments/foss (git)-[production] % vagrant provision gitlab.foss.psick.io :(
==> gitlab.foss.psick.io: Running provisioner: shell...
    gitlab.foss.psick.io: Running: /tmp/vagrant-shell20180327-3864-4a079n.sh
    gitlab.foss.psick.io: ### Setting hostname gitlab.foss.psick.io
==> gitlab.foss.psick.io: Running provisioner: shell...
    gitlab.foss.psick.io: Running: /tmp/vagrant-shell20180327-3864-17yc8rn.sh
    gitlab.foss.psick.io: ### Setting external facts role=gitlab env=devel zone=foss datacenter=vagrant application=puppetinfra
==> gitlab.foss.psick.io: Running provisioner: shell...
    gitlab.foss.psick.io: Running: /tmp/vagrant-shell20180327-3864-1aghyyz.sh
    gitlab.foss.psick.io: 5.5.0
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: ### Puppet version 5 or higher present. Skipping installation. ###
==> gitlab.foss.psick.io: Running provisioner: shell...
    gitlab.foss.psick.io: Running: /tmp/vagrant-shell20180327-3864-1qn5n20.sh
==> gitlab.foss.psick.io: Running provisioner: shell...
    gitlab.foss.psick.io: Running: /tmp/vagrant-shell20180327-3864-1pr9l68.sh
    gitlab.foss.psick.io: ### Found /var/tmp/vagrant-setup_papply.lock. Skipping installation of dependencies needed for puppet apply mode
    gitlab.foss.psick.io: ## Remove /var/tmp/vagrant-setup_papply.lock on the Vagrant VM to retry their installation
==> gitlab.foss.psick.io: Running provisioner: shell...
    gitlab.foss.psick.io: Running: /tmp/vagrant-shell20180327-3864-rvkamn.sh
    gitlab.foss.psick.io: ## Running Puppet apply on /etc/puppetlabs/code/environments/host/manifests/site.pp. Version 5.5.0
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Info: Loading facts
    gitlab.foss.psick.io: Warning: Undefined variable 'psick::auto_conf'; class psick has not been evaluated\n   (file & line not available)
    gitlab.foss.psick.io: Warning: The function 'hiera_hash' is deprecated in favor of using 'lookup'. See https://docs.puppet.com/puppet/5.5/reference/deprecated_language.html\n   (file & line not available)
    gitlab.foss.psick.io: Notice: Compiled catalog for gitlab.foss.psick.io in environment host in 5.96 seconds
    gitlab.foss.psick.io: Info: Applying configuration version '27a3a38 - Alessandro Franceschi, Sun Mar 25 10:43:05 2018 +0200 : Updated on noop mode'
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Puppet::Gems/Package[puppet_msgpack]/ensure: created
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Sudo/File[/etc/sudoers.d]/mode: mode changed '0750' to '0550'
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Timezone/File[timezone]/content: 
    gitlab.foss.psick.io: --- /etc/timezone	2018-03-23 08:15:21.399465385 +0000
    gitlab.foss.psick.io: +++ /tmp/puppet-file20180327-10527-kko6bf	2018-03-27 08:50:58.620048000 +0000
    gitlab.foss.psick.io: @@ -1 +1 @@
    gitlab.foss.psick.io: -Etc/UTC
    gitlab.foss.psick.io: +Europe/Berlin
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: Info: Computing checksum on file /etc/timezone
    gitlab.foss.psick.io: Info: /Stage[main]/Psick::Timezone/File[timezone]: Filebucketed /etc/timezone to puppet with sum 4f24b133ba38d8fd565168742c9aedeb
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Timezone/File[timezone]/content: content changed '{md5}4f24b133ba38d8fd565168742c9aedeb' to '{md5}749357f70f40574f632071ec7d5f41a9'
    gitlab.foss.psick.io: Info: /Stage[main]/Psick::Timezone/File[timezone]: Scheduling refresh of Exec[set-timezone]
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Timezone/Exec[set-timezone]: Triggered 'refresh' from 1 event
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Sysctl/File[/etc/sysctl.conf]/content: 
    gitlab.foss.psick.io: --- /etc/sysctl.conf	2015-09-06 07:30:20.000000000 +0200
    gitlab.foss.psick.io: +++ /tmp/puppet-file20180327-10527-w5sylt	2018-03-27 10:50:58.748111999 +0200
    gitlab.foss.psick.io: @@ -1,60 +1,2 @@
    gitlab.foss.psick.io: -#
    gitlab.foss.psick.io: -# /etc/sysctl.conf - Configuration file for setting system variables
    gitlab.foss.psick.io: -# See /etc/sysctl.d/ for additional system variables.
    gitlab.foss.psick.io: -# See sysctl.conf (5) for information.
    gitlab.foss.psick.io: -#
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -#kernel.domainname = example.com
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -# Uncomment the following to stop low-level messages on console
    gitlab.foss.psick.io: -#kernel.printk = 3 4 1 3
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -##############################################################3
    gitlab.foss.psick.io: -# Functions previously found in netbase
    gitlab.foss.psick.io: -#
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -# Uncomment the next two lines to enable Spoof protection (reverse-path filter)
    gitlab.foss.psick.io: -# Turn on Source Address Verification in all interfaces to
    gitlab.foss.psick.io: -# prevent some spoofing attacks
    gitlab.foss.psick.io: -#net.ipv4.conf.default.rp_filter=1
    gitlab.foss.psick.io: -#net.ipv4.conf.all.rp_filter=1
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -# Uncomment the next line to enable TCP/IP SYN cookies
    gitlab.foss.psick.io: -# See http://lwn.net/Articles/277146/
    gitlab.foss.psick.io: -# Note: This may impact IPv6 TCP sessions too
    gitlab.foss.psick.io: -#net.ipv4.tcp_syncookies=1
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -# Uncomment the next line to enable packet forwarding for IPv4
    gitlab.foss.psick.io: -#net.ipv4.ip_forward=1
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -# Uncomment the next line to enable packet forwarding for IPv6
    gitlab.foss.psick.io: -#  Enabling this option disables Stateless Address Autoconfiguration
    gitlab.foss.psick.io: -#  based on Router Advertisements for this host
    gitlab.foss.psick.io: -#net.ipv6.conf.all.forwarding=1
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -###################################################################
    gitlab.foss.psick.io: -# Additional settings - these settings can improve the network
    gitlab.foss.psick.io: -# security of the host and prevent against some network attacks
    gitlab.foss.psick.io: -# including spoofing attacks and man in the middle attacks through
    gitlab.foss.psick.io: -# redirection. Some network environments, however, require that these
    gitlab.foss.psick.io: -# settings are disabled so review and enable them as needed.
    gitlab.foss.psick.io: -#
    gitlab.foss.psick.io: -# Do not accept ICMP redirects (prevent MITM attacks)
    gitlab.foss.psick.io: -#net.ipv4.conf.all.accept_redirects = 0
    gitlab.foss.psick.io: -#net.ipv6.conf.all.accept_redirects = 0
    gitlab.foss.psick.io: -# _or_
    gitlab.foss.psick.io: -# Accept ICMP redirects only for gateways listed in our default
    gitlab.foss.psick.io: -# gateway list (enabled by default)
    gitlab.foss.psick.io: -# net.ipv4.conf.all.secure_redirects = 1
    gitlab.foss.psick.io: -#
    gitlab.foss.psick.io: -# Do not send ICMP redirects (we are not a router)
    gitlab.foss.psick.io: -#net.ipv4.conf.all.send_redirects = 0
    gitlab.foss.psick.io: -#
    gitlab.foss.psick.io: -# Do not accept IP source route packets (we are not a router)
    gitlab.foss.psick.io: -#net.ipv4.conf.all.accept_source_route = 0
    gitlab.foss.psick.io: -#net.ipv6.conf.all.accept_source_route = 0
    gitlab.foss.psick.io: -#
    gitlab.foss.psick.io: -# Log Martian Packets
    gitlab.foss.psick.io: -#net.ipv4.conf.all.log_martians = 1
    gitlab.foss.psick.io: -#
    gitlab.foss.psick.io: +# File managed by Puppet
    gitlab.foss.psick.io: +net.ipv4.conf.all.forwarding=0
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: Info: Computing checksum on file /etc/sysctl.conf
    gitlab.foss.psick.io: Info: /Stage[main]/Psick::Sysctl/File[/etc/sysctl.conf]: Filebucketed /etc/sysctl.conf to puppet with sum 76c1d8285c578d5e827c3e07b9738112
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Sysctl/File[/etc/sysctl.conf]/content: content changed '{md5}76c1d8285c578d5e827c3e07b9738112' to '{md5}f0c4ad8fec734ecd482c98b969327874'
    gitlab.foss.psick.io: Info: /Stage[main]/Psick::Sysctl/File[/etc/sysctl.conf]: Scheduling refresh of Exec[psick refresh sysctl]
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Sysctl/Exec[psick refresh sysctl]: Triggered 'refresh' from 1 event
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Update/File[/usr/local/sbin/update.sh]/ensure: defined content as '{md5}cca89b45faaa9ec125a79ba9e559207d'
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Update/File[/etc/cron.d/system_update]/ensure: defined content as '{md5}26494f295947ab1b7f4816a941300278'
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Motd/File[/etc/motd]/ensure: defined content as '{md5}12810728d43c1ac368a637338db754f3'
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Motd/File[/etc/issue]/content: 
    gitlab.foss.psick.io: --- /etc/issue	2018-02-20 09:44:08.000000000 +0100
    gitlab.foss.psick.io: +++ /tmp/puppet-file20180327-10527-12zwchr	2018-03-27 10:50:58.796136000 +0200
    gitlab.foss.psick.io: @@ -1,2 +1,7 @@
    gitlab.foss.psick.io: -Ubuntu 16.04.4 LTS \n \l
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: +System Managed by Puppet
    gitlab.foss.psick.io: +Role              : gitlab
    gitlab.foss.psick.io: +Environment       : devel
    gitlab.foss.psick.io: +Datacenter        : vagrant
    gitlab.foss.psick.io: +Zone              : foss
    gitlab.foss.psick.io: +Application       : puppetinfra
    gitlab.foss.psick.io: +Puppet environment: host
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: Info: Computing checksum on file /etc/issue
    gitlab.foss.psick.io: Info: /Stage[main]/Psick::Motd/File[/etc/issue]: Filebucketed /etc/issue to puppet with sum df83af441843aaf15b83ebec82fb2c5a
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Motd/File[/etc/issue]/content: content changed '{md5}df83af441843aaf15b83ebec82fb2c5a' to '{md5}d34721915071e8254f64ba77638abe94'
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Profile/File[/etc/profile.d/tz.sh]/ensure: defined content as '{md5}b438a8fd881816977b79907e3d23a7b4'
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Monitor::Sar/Package[sysstat]/ensure: created
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Monitor::Sar/File[/etc/cron.d/sysstat]/content: 
    gitlab.foss.psick.io: --- /etc/cron.d/sysstat	2016-01-27 23:21:05.000000000 +0100
    gitlab.foss.psick.io: +++ /tmp/puppet-file20180327-10527-noybrs	2018-03-27 10:51:02.049762000 +0200
    gitlab.foss.psick.io: @@ -1,9 +1,4 @@
    gitlab.foss.psick.io: -# The first element of the path is a directory where the debian-sa1
    gitlab.foss.psick.io: -# script is located
    gitlab.foss.psick.io: -PATH=/usr/lib/sysstat:/usr/sbin:/usr/sbin:/usr/bin:/sbin:/bin
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -# Activity reports every 10 minutes everyday
    gitlab.foss.psick.io: -5-55/10 * * * * root command -v debian-sa1 > /dev/null && debian-sa1 1 1
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -# Additional run at 23:59 to rotate the statistics file
    gitlab.foss.psick.io: -59 23 * * * root command -v debian-sa1 > /dev/null && debian-sa1 60 2
    gitlab.foss.psick.io: +# File managed by Puppet
    gitlab.foss.psick.io: +PATH=/usr/lib64/sysstat:/usr/lib/sysstat:/usr/lib64/sa:/usr/lib/sa:/usr/sbin:/usr/sbin:/usr/bin:/sbin:/bin
    gitlab.foss.psick.io: +*/5 * * * * root sa1 1 1
    gitlab.foss.psick.io: +53 23 * * * root sa2 -A
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: Info: Computing checksum on file /etc/cron.d/sysstat
    gitlab.foss.psick.io: Info: /Stage[main]/Psick::Monitor::Sar/File[/etc/cron.d/sysstat]: Filebucketed /etc/cron.d/sysstat to puppet with sum 455c3c071b6daabb4e4490828975034c
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Monitor::Sar/File[/etc/cron.d/sysstat]/content: content changed '{md5}455c3c071b6daabb4e4490828975034c' to '{md5}21353c258813382679dea65ea5ec1197'
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Postfix::Tp/Tp::Install[postfix]/Package[postfix]/ensure: created
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Postfix::Tp/Tp::Install[postfix]/File[/etc/tp/app/postfix]/ensure: defined content as '{md5}43e104d4c98f716472bdc6189bcef287'
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Postfix::Tp/Tp::Conf[postfix]/File[/etc/postfix/main.cf]/content: 
    gitlab.foss.psick.io: --- /etc/postfix/main.cf	2018-03-27 10:51:09.357413995 +0200
    gitlab.foss.psick.io: +++ /tmp/puppet-file20180327-10527-xiawdt	2018-03-27 10:51:13.143306000 +0200
    gitlab.foss.psick.io: @@ -1,41 +1,50 @@
    gitlab.foss.psick.io: -# See /usr/share/postfix/main.cf.dist for a commented, more complete version
    gitlab.foss.psick.io: +# File managed by Puppet
    gitlab.foss.psick.io:  
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -# Debian specific:  Specifying a file name will cause the first
    gitlab.foss.psick.io: -# line of that file to be used as the name.  The Debian default
    gitlab.foss.psick.io: -# is /etc/mailname.
    gitlab.foss.psick.io: -#myorigin = /etc/mailname
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -smtpd_banner = $myhostname ESMTP $mail_name (Ubuntu)
    gitlab.foss.psick.io: -biff = no
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -# appending .domain is the MUA's job.
    gitlab.foss.psick.io: -append_dot_mydomain = no
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -# Uncomment the next line to generate "delayed mail" warnings
    gitlab.foss.psick.io: -#delay_warning_time = 4h
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -readme_directory = no
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -# TLS parameters
    gitlab.foss.psick.io: -smtpd_tls_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem
    gitlab.foss.psick.io: -smtpd_tls_key_file=/etc/ssl/private/ssl-cert-snakeoil.key
    gitlab.foss.psick.io: -smtpd_use_tls=yes
    gitlab.foss.psick.io: -smtpd_tls_session_cache_database = btree:${data_directory}/smtpd_scache
    gitlab.foss.psick.io: -smtp_tls_session_cache_database = btree:${data_directory}/smtp_scache
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -# See /usr/share/doc/postfix/TLS_README.gz in the postfix-doc package for
    gitlab.foss.psick.io: -# information on enabling SSL in the smtp client.
    gitlab.foss.psick.io: -
    gitlab.foss.psick.io: -smtpd_relay_restrictions = permit_mynetworks permit_sasl_authenticated defer_unauth_destination
    gitlab.foss.psick.io: +#soft_bounce = no
    gitlab.foss.psick.io: +queue_directory = /var/spool/postfix
    gitlab.foss.psick.io: +command_directory = /usr/sbin
    gitlab.foss.psick.io: +daemon_directory = /usr/lib/postfix/sbin
    gitlab.foss.psick.io: +data_directory = /var/lib/postfix
    gitlab.foss.psick.io: +mail_owner = postfix
    gitlab.foss.psick.io: +#default_privs = nobody
    gitlab.foss.psick.io:  myhostname = gitlab
    gitlab.foss.psick.io: +mydomain = foss.psick.io
    gitlab.foss.psick.io: +inet_interfaces = 127.0.0.1
    gitlab.foss.psick.io: +inet_protocols = all
    gitlab.foss.psick.io: +#proxy_interfaces = 1.2.3.4
    gitlab.foss.psick.io: +mydestination = 
    gitlab.foss.psick.io: +#local_recipient_maps =
    gitlab.foss.psick.io: +unknown_local_recipient_reject_code = 550
    gitlab.foss.psick.io: +#mynetworks_style = host
    gitlab.foss.psick.io: +#relay_recipient_maps = hash:/etc/postfix/relay_recipients
    gitlab.foss.psick.io: +#in_flow_delay = 1s
    gitlab.foss.psick.io:  alias_maps = hash:/etc/aliases
    gitlab.foss.psick.io:  alias_database = hash:/etc/aliases
    gitlab.foss.psick.io: -myorigin = /etc/mailname
    gitlab.foss.psick.io: -mydestination = $myhostname, gitlab.foss.psick.io, gitlab, localhost.localdomain, localhost
    gitlab.foss.psick.io: -relayhost = 
    gitlab.foss.psick.io: -mynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128
    gitlab.foss.psick.io: -mailbox_size_limit = 0
    gitlab.foss.psick.io: -recipient_delimiter = +
    gitlab.foss.psick.io: -inet_interfaces = all
    gitlab.foss.psick.io: -inet_protocols = all
    gitlab.foss.psick.io: +#recipient_delimiter = +
    gitlab.foss.psick.io: +#home_mailbox = Maildir/
    gitlab.foss.psick.io: +#mail_spool_directory = /var/spool/mail
    gitlab.foss.psick.io: +#mailbox_command = /some/where/procmail -a "$EXTENSION"
    gitlab.foss.psick.io: +#mailbox_transport = lmtp:unix:/var/lib/imap/socket/lmtp
    gitlab.foss.psick.io: +# local_destination_recipient_limit = 300
    gitlab.foss.psick.io: +# local_destination_concurrency_limit = 5
    gitlab.foss.psick.io: +#mailbox_transport = cyrus
    gitlab.foss.psick.io: +#fallback_transport = lmtp:unix:/var/lib/imap/socket/lmtp
    gitlab.foss.psick.io: +#luser_relay = admin+$local
    gitlab.foss.psick.io: +#header_checks = regexp:/etc/postfix/header_checks
    gitlab.foss.psick.io: +#fast_flush_domains = $relay_domains
    gitlab.foss.psick.io: +#smtpd_banner = $myhostname ESMTP $mail_name
    gitlab.foss.psick.io: +#local_destination_concurrency_limit = 2
    gitlab.foss.psick.io: +#default_destination_concurrency_limit = 20
    gitlab.foss.psick.io: +debug_peer_level = 2
    gitlab.foss.psick.io: +#debug_peer_list = 127.0.0.1
    gitlab.foss.psick.io: +debugger_command =
    gitlab.foss.psick.io: +	 PATH=/bin:/usr/bin:/usr/local/bin:/usr/X11R6/bin
    gitlab.foss.psick.io: +	 ddd $daemon_directory/$process_name $process_id & sleep 5
    gitlab.foss.psick.io: +sendmail_path = /usr/sbin/sendmail
    gitlab.foss.psick.io: +newaliases_path = /usr/sbin/sendmail
    gitlab.foss.psick.io: +mailq_path = /usr/bin/mailq
    gitlab.foss.psick.io: +setgid_group = postdrop
    gitlab.foss.psick.io: +html_directory = no
    gitlab.foss.psick.io: +manpage_directory = /usr/share/man
    gitlab.foss.psick.io: +#sample_directory = /usr/share/doc/postfix-2.10.1/samples
    gitlab.foss.psick.io: +#readme_directory = /usr/share/doc/postfix-2.10.1/README_FILES
    gitlab.foss.psick.io: 
    gitlab.foss.psick.io: Info: Computing checksum on file /etc/postfix/main.cf
    gitlab.foss.psick.io: Info: /Stage[main]/Psick::Postfix::Tp/Tp::Conf[postfix]/File[/etc/postfix/main.cf]: Filebucketed /etc/postfix/main.cf to puppet with sum 07ffb3639aec5d6fd22d7546661b5b3e
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Postfix::Tp/Tp::Conf[postfix]/File[/etc/postfix/main.cf]/content: content changed '{md5}07ffb3639aec5d6fd22d7546661b5b3e' to '{md5}6c2d24159e6d2b2c8da4a838ea0c168c'
    gitlab.foss.psick.io: Info: /Stage[main]/Psick::Postfix::Tp/Tp::Conf[postfix]/File[/etc/postfix/main.cf]: Scheduling refresh of Service[postfix]
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Postfix::Tp/Tp::Install[postfix]/Service[postfix]: Triggered 'refresh' from 1 event
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Openssh/Tp::Install[openssh]/File[/etc/tp/app/openssh]/ensure: defined content as '{md5}b8c72a09c295cb7e46e974399425db17'
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Logs::Rsyslog/Tp::Install[rsyslog]/File[/etc/tp/app/rsyslog]/ensure: defined content as '{md5}0246978e5b100bc7b36a358e7a2bfd01'
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Time::Ntpdate/Tp::Install[ntpdate]/Package[ntpdate]/ensure: created
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Time::Ntpdate/Tp::Install[ntpdate]/File[/etc/tp/app/ntpdate]/ensure: defined content as '{md5}36523bbe51a352746224af21646f3258'
    gitlab.foss.psick.io: Info: Tp::Install[ntpdate]: Scheduling refresh of Exec[ntpdate -s pool.ntp.org]
    gitlab.foss.psick.io: Notice: /Stage[main]/Psick::Time::Ntpdate/Exec[ntpdate -s pool.ntp.org]: Triggered 'refresh' from 1 event
    gitlab.foss.psick.io: Notice: Applied catalog in 32.14 seconds
    gitlab.foss.psick.io: Changes:
    gitlab.foss.psick.io:             Total: 18
    gitlab.foss.psick.io: Events:
    gitlab.foss.psick.io:           Success: 18
    gitlab.foss.psick.io:             Total: 18
    gitlab.foss.psick.io: Resources:
    gitlab.foss.psick.io:           Changed: 18
    gitlab.foss.psick.io:       Out of sync: 18
    gitlab.foss.psick.io:         Restarted: 4
    gitlab.foss.psick.io:             Total: 50
    gitlab.foss.psick.io: Time:
    gitlab.foss.psick.io:          Schedule: 0.00
    gitlab.foss.psick.io:              User: 0.00
    gitlab.foss.psick.io:              Exec: 0.01
    gitlab.foss.psick.io:           Service: 0.15
    gitlab.foss.psick.io:              File: 0.19
    gitlab.foss.psick.io:          Last run: 1522140685
    gitlab.foss.psick.io:           Package: 21.46
    gitlab.foss.psick.io:    Transaction evaluation: 32.12
    gitlab.foss.psick.io:    Catalog application: 32.14
    gitlab.foss.psick.io:        Filebucket: 0.00
    gitlab.foss.psick.io:    Config retrieval: 6.61
    gitlab.foss.psick.io:             Total: 92.69
    gitlab.foss.psick.io: Version:
    gitlab.foss.psick.io:            Config: 27a3a38 - Alessandro Franceschi, Sun Mar 25 10:43:05 2018 +0200 : Updated on noop mode
    gitlab.foss.psick.io:            Puppet: 5.5.0
duh@duh-notebook ~/psick/vagrant/environments/foss (git)-[production] % vagrant status
Current machine states:

puppet.foss.psick.io      running (virtualbox)
gitlab.foss.psick.io      running (virtualbox)
icinga.foss.psick.io      not created (virtualbox)
grafana.foss.psick.io     not created (virtualbox)
build.foss.psick.io       not created (virtualbox)
docker.foss.psick.io      not created (virtualbox)
jenkins.foss.psick.io     not created (virtualbox)
centos6.foss.psick.io     not created (virtualbox)
centos7.foss.psick.io     not created (virtualbox)

This environment represents multiple VMs. The VMs are all listed
above with their current state. For more information about a specific
VM, run `vagrant status NAME`.
```

- Verify if all the available Vagrant environments are working flawlessly
- Review configurations defined in each config.yaml 
- Optimise Vagrantfile
