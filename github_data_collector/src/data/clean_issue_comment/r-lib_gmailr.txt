Hello when I am trying to install package I am receiving message dependencies gargle lifecycle are not available for package gmailr Can you help me please Aleksandar I would like to use in rstudio server gmailr without interactive authorization Since I am already using googledrive when I run gmauthpath credentialsjson I get createTcpServer address already in use How can I specify a different port for gmailr The same issue is reported also here Ive created a simple rscript to send emails with the help of gmailR As a local R script works just fine but when I create a docker container it fails I have this error msg Error lexical error invalid char in json text authjsongmailauthjson right here I use the same json here what I use at the local r script I also added the auth token So I dont understand what is the problem Ie for the text Only very heavy usage of the Gmail API requires payment so use of the API for most people should be free add When using gmsendmessage the same email that was sent a few moments ago would not be sent It appears that R is processing something in the background and nothing happens for a long time When I waited out I got the following error messages It seems a little better with a single email but when I loop through a few emails in batch this always happens Please help Error in gmailrPOSTcmessages send userid class gmailmessage Gmail API error I have an R server setup that I use to create and automatically send reports using cron and gmailR package ie noninteractive session Prior to the most recent version release if I ran optionshttroobdefaultTRUE gmailauthpath gmailrjson It would return the following prompt Use a local file httroauth to cache OAuth access credentials between R sessions If you hit yes it went through the authentication dance and then created the httroauth token that was cached Once the token was cached I had several cron scripts that were scheduled to run that would automatically generate and email reports With the newest version of gmailR if I run gmauthconfigurekey key secret secret path path app oauthappappname key secret cache TRUE gmauth It returns the following prompt The gmailr package is requesting access to your Google account Select a preauthorised account or enter to obtain a new token Press EscCtrl C to abort I can authenticate by selecting my account or I can go through the authentication dance but it does not cache a httroauth token If I run a script manually it autorefreshes the stale OAuth token and sends However anytime I try to send an email through an automated cron script it returns the following error Error Must create an app and register it with gmauthconfigure Any insight into what I am doing wrong or how I can fix this would be greatly appreciated close I just replaced colons with underscore but maybe some other characters will cause issues Regards This kind of attachments is ok Subject Nouvelle facture fournisseur New supplier invoice Attachments OCRe cd fa c ed b e d d datapdf but this is not ok Subject Nouvelle facture fournisseur New supplier invoice Attachments OUIsncf pdf with Error in filecon wb cannot open the connection In addition Warning message In filecon wb cannot open file OUIsncf pdf Invalid argument Full reprex r ok structurelistid d bf f aa df threadId d bf f aa df labelIds listUNREAD CATEGORYUPDATES INBOX snippet Un nouveau document a t t l charg sur Azopio A new document has been uploaded on Azopio historyId internalDate payload list partId mimeType multipartmixed filename headers listlistname DeliveredTo value pop thinkrgmailcom listname Received value by ac with SMTP id f csp qtj Sun Sep PDT listname XGoogleSmtpSource value APXvYqzdrT tGVLy ttJYXtac G rjNE OZtiWGqSf C CJ gzO YrIxO PzpeEtcMrHcdmH listname XReceived value by a c ed with SMTP id z mr wmc Sun Sep PDT listname ARCSeal value i arsasha t cvnone dgooglecom sarc buutKPCJ OyC A GKpcf wHtvIrESlF HDWJdqYSTKpiWd DaKcPYejjDCj N T mR f mJ iu ubRHL r cqdYlUktLKNPBjpHQZDFMFrNr Ua NVdIN D WtQFrn B rbpMpLgkHAHn HPkghN qMgy VGPmhS Xvkha Ep JHXcEUTLErTPTHfdV jbVO oQIxpfc UBJb lC Q f YiLcH lH sbGdMzzRGYYkqhxcWCnFV Z MH d bKGV M SEqWh W U zX G vIkBwHO W CSLRoRv WWcDVvlZ Bz S Vb SJbN qgPADR HrxQ listname ARCMessageSignature value i arsasha crelaxedrelaxed dgooglecom sarc hfromfeedbackidmimeversionoriginmessageidmessageidsubject datetodkimsignature bhGUnf CjRrmZBVPu G YwBNW s wRfNGnDysIPZE b C LrEuEROeX sjfwbvidVxPDqlJ pCowHl p r o B ZLEra oadWfeRQ dPu fDIqktYpY NfNSTxChsoFhg z ymAi TOsAOgFNFjnyI VJhKDHFFsnD h YWrbVz Zdr qxmGBI F obnMzro jR SQmBHBB IOC cL tGYu g AMq qyxhFZRYiyHs FHO ztvcrv O IOTtGb UvKsJ OZP HaUwCdTWF pZOkMbvO f RTYNoCMPcxh Q KiMogN YyGARazAUhUFddeJbHJc cO Sc yEPRktIoWf fJ LfaBA nsWTuzGlmI GCeg listname ARCAuthenticationResults value i mxgooglecom dkimpass headeriappazopiocom headersmail headerbX XvM xH spfsoftfail googlecom domain of transitioning bounces XXXNDDfraadsendersibcom does not designate as permitted sender smtpmailfrom bounces XXXNDDfraadsendersibcom dmarcpass pNONE spNONE disNONE headerfromappazopiocom listname ReturnPath value bounces XXXNDDfraadsendersibcom listname Received value from mailNDDfr mailaNDDfr by mxgooglecom with ESMTPS id a si wrf versionTLS cipherECDHERSACHACHA POLY bits Sun Sep PDT listname ReceivedSPF value softfail googlecom domain of transitioning bounces XXXNDDfraadsendersibcom does not designate as permitted sender clientip listname AuthenticationResults value mxgooglecom dkimpass headeriappazopiocom headersmail headerbX XvM xH spfsoftfail googlecom domain of transitioning bounces XXXNDDfraadsendersibcom does not designate as permitted sender smtpmailfrom bounces XXXNDDfraadsendersibcom dmarcpass pNONE spNONE disNONE headerfromappazopiocom listname ReceivedSPF value Pass mailfrom identitymailfrom clientip heloaadsendersibcom envelopefrombounces XXXNDDfraadsendersibcom receiverUNKNOWN listname AuthenticationResults value mailNDDfr dmarcpass pnone disnone headerfromappazopiocom listname AuthenticationResults value mailNDDfr dkimpass bit key unprotected headerdappazopiocom headeriappazopiocom headerb X XvM xH dkimatpsneutral listname Received value from aadsendersibcom aadsendersibcom by mailNDDfr Postfix with ESMTPS id EEE C for XXXNDDfr Sun Sep UTC listname DKIMSignature value v arsasha crelaxedrelaxed dappazopiocom qdnstxt smail bhGUnf CjRrmZBVPu G YwBNW s wRfNGnDysIPZE hfromsubjectdatemimeversioncontenttype bX XvM xHNM K GJViXgw kxzeEcPW b dqj X z wvfadPCwD PPU vJMEQZqa xs sH KAgF Zts iFmKZHjG reVWBaZxiVN ZoXlssxfbTbXnMUJJvgf qHjEUQHc HalG nSScMf OoIdCbUSVudY VtFI E listname XMailinEID value NTUzMTE MTR BbGVzanVzdGlmc B aGlua IuZnJ BPDIwMTkwOTI MDk Mi MDIzMjY MTI MkBzbXRwLXJlbGF Lm haWxpbi mcj BYWEuZC zZW kZXItc liLmNvbQ D D listname To value XXXNDDfr listname Date value Sun Sep listname Subject value Nouvelle facture fournisseur New supplier invoice listname MessageId value f b a a fd fb d smtprelaysendinbluecom listname OriginmessageId value smtprelaymailinfr listname ContentType value multipartmixed boundary listname MIMEVersion value list name Xsibid value fshvzKKDQ ORfrQ UA Vg qi AE TeU pLnU oVcGcFrq NWsnkfrFxkGo ZSxPVFaz vpKSV leMtDCWGqbNRpLzK iAwNCOP R oP w ocOnvDUcI Gx F DO cfQsCmkmVySge aO iJm YkNtwkYb v sYDZdHg listname FeedbackID value Sendinblue listname From value Azopio noreplyappazopiocom body listsize L parts listlistpartId mimeType texthtml filename headers list listname ContentType value texthtml charset utf listname MIMEVersion value list name ContentTransferEncoding value base body listsize L data VW gbm dmVhdSBkb N bWVudCBhIMOpdMOpIHTDqWzDqWNoYXJnw kgc VyIEF b Bpby YnIPGJyPkEgbmV IGRvY VtZW IGhhcyBiZWVuIHVwbG hZGVkIG uIEF b Bpby aW nIHdpZHRoPSIxIiBoZWlnaHQ IjEiIHNyYz iaHR cDovL JnZ RmYmouci iaC kLnNlbmRpYnQzLmNvbS ci vcC memRlWFdVcVV Qy YQXNOVFExMGxBeGtDeFJkYlZoT N M k SmE MDNQRmYzQ VYYjRwa RDWURTWjcwNDZ SWhOYXY SEU NzNHTkdpb FfOHkyd pwXy kTW ZkR QnFMU VQNkdieTlOUUpDMmUtMk Rd JtTXBRTV HRkR MC OSUdoUkFnR lBIiBhbHQ IiIgLz NCg listpartId mimeType applicationoctetstream filename OCRe cd fa c ed b e d d datapdf headers listlistname ContentType value applicationoctetstream listname MIMEVersion value listname ContentTransferEncoding value base listname ContentDisposition value attachment filename OCRe cd fa c ed b e d d datapdf body listattachmentId ANGjdJ XrvFcKXnbMQlYswly uWJTOkx v Cg MshY kZa hLkQigig qZoPMyJmnGp ieCp jTmMaqTVJlnH YgnO DfLl sRk FrAcwMf CZzQHryvncUJK gIvee PPNjPeTsO aG WzEVgrZOro IH svYwpWMtUto qNGyQWz wRxg oyZ a v rnEva xEhcUB Q JLkkU x QFKKBX uhRhVaiP Op jnmKkTOScsID o aor Mku HBcz eTuV p AUIlGunoSE pn LDFQx ouHr rp QmeMdHp motZ fUmdmtxY zF CT rf ZhKoAYuwXew anretDlrBAZVYmN VbwpKFxQ size L sizeEstimate L class gmailmessage notok structurelistid d a b c a b threadId d a b c a b labelIds listUNREAD CATEGORYUPDATES INBOX snippet Un nouveau document a t t l charg sur Azopio A new document has been uploaded on Azopio historyId internalDate payload list partId mimeType multipartmixed filename headers listlistname DeliveredTo value pop thinkrgmailcom listname Received value by ac with SMTP id f csp qtj Sun Sep PDT listname XGoogleSmtpSource value APXvYqwFQd Iyrndt TjOHMzQwBEay Sl e DkrJXhRkBvOyhFnb dcmDvWjp AKFeQFkhUiPN listname XReceived value by a d f with SMTP id k mr wru Sun Sep PDT listname ARCSeal value i arsasha t cvnone dgooglecom sarc bAfW KXdMkUwmuhOLsuQz co yUu BOA Gp oUwDFJCaUNcetblsvrTETmyQ A oo dVkwkd kj qt bZNUpOMCAjuxs p D zFFdx n CQvW pguaWYW mPChQlQ i qvPooo ujgfbHUUM a cTit QT Ajo rA WewO IQ CgM LQc f YFqNwIPbAB v UP YRclY JHGPdR JNyvhSjon ukpqC mue dNpGw zSAENRgK ZcTagXMp WJjX sCdkmbcqbCvT ho wbOuAEjpi v G n JGb D nCksYuyQwbIKccCH o d EbzWvQh Ky g listname ARCMessageSignature value i arsasha crelaxedrelaxed dgooglecom sarc hfromfeedbackidmimeversionoriginmessageidmessageidsubject datetodkimsignature bh UnLXqzs ExfllQa vQR CBYYvRpZ PveHDFd l pRI bUxPjQ BhBMxxX RXQzTvpmS UkPvldPNh yyDXKyFa DTb BqiDc k JHFQ yZiRuHSNtkIVPHdcile TR dGhOvkTKjrYH fGGGBcVQzy d qPFqpUaDl Vt L rG F EFIg cAbltH EKom nAyqTVugmiDpVRIVD ZOmM Tvq goVWZhYgHLC cjN ON ZxB JZFOfHCZZXgh jsdYYHvfk Lo IgANU RibqGuIzELeRKlhyU cADHfGGL w lGWy UCuR TebSOCxlVbRm Iu ciiT JX MMAdjD xJb ot R Ll EQUORjH kdsQ listname ARCAuthenticationResults value i mxgooglecom dkimpass headeriappazopiocom headersmail headerbadG PUfw spfsoftfail googlecom domain of transitioning bounces lesjustifsNDDfraedmailinfr does not designate as permitted sender smtpmailfrom bounces lesjustifsNDDfraedmailinfr dmarcpass pNONE spNONE disNONE headerfromappazopiocom listname ReturnPath value bounces lesjustifsNDDfraedmailinfr listname Received value from mailNDDfr mailNDDfr by mxgooglecom with ESMTPS id i si wmg versionTLS cipherECDHERSACHACHA POLY bits Sun Sep PDT listname ReceivedSPF value softfail googlecom domain of transitioning bounces lesjustifsNDDfraedmailinfr does not designate as permitted sender clientip listname AuthenticationResults value mxgooglecom dkimpass headeriappazopiocom headersmail headerbadG PUfw spfsoftfail googlecom domain of transitioning bounces lesjustifsNDDfraedmailinfr does not designate as permitted sender smtpmailfrom bounces lesjustifsNDDfraedmailinfr dmarcpass pNONE spNONE disNONE headerfromappazopiocom listname ReceivedSPF value Pass mailfrom identitymailfrom clientip heloaedmailinfr envelopefrombounces lesjustifsNDDfraedmailinfr receiverUNKNOWN listname AuthenticationResults value mailNDDfr dmarcpass pnone disnone headerfromappazopiocom listname AuthenticationResults value mailNDDfr dkimpass bit key unprotected headerdappazopiocom headeriappazopiocom headerb adG PUfw dkimatpsneutral listname Received value from aedmailinfr aedmailinfr by mailNDDfr Postfix with ESMTPS id B C for lesjustifsNDDfr Sun Sep UTC listname DKIMSignature value v arsasha crelaxedrelaxed dappazopiocom qdnstxt smail bh UnLXqzs ExfllQa vQR CBYYvRpZ PveHDFd l pRI hfromsubjectdatemimeversioncontenttype badG PUfwTJbiYU e ogqQVQnrHReZLGXPfvuoT CsgtJoiiPYXbwxIEMYaEwgHqShL W nrn F hDjEs kMqJgNy vg VDthaJXN oKAdhYOPWJclLNQ Jb x iPr UOQmW TrFLPiob S EV EqRMF MZD lUcT listname XMailinEID value NTUzMTE MTR BbGVzanVzdGlmc B aGlua IuZnJ BPDIwMTkwOTIyMjEwOS NDk MDI MjY NUBzbXRwLXJlbGF Lm haWxpbi mcj BYWUuZC tYWlsaW uZnI D listname To value lesjustifsNDDfr listname Date value Sun Sep listname Subject value Nouvelle facture fournisseur New supplier invoice listname MessageId value ca c b e ba f smtprelaysendinbluecom listname OriginmessageId value smtprelaymailinfr listname ContentType value multipartmixed boundary listname MIMEVersion value list name Xsibid value cq cRQN vEtXd TuI A zGSW yLnJksHmwf h heGfHjbjRxLiLBaYRBOEyXFCWRmCYPpTa Y mqr mMxLTZ hr l ptpZtd mNzH aU uXB gBqdq hdaHQLq hi cH s ZQte P M rniVBRnTosPD zenxutoPpgibA listname FeedbackID value Sendinblue listname From value Azopio noreplyappazopiocom body listsize L parts listlistpartId mimeType texthtml filename headers list listname ContentType value texthtml charset utf listname MIMEVersion value list name ContentTransferEncoding value base body listsize L data VW gbm dmVhdSBkb N bWVudCBhIMOpdMOpIHTDqWzDqWNoYXJnw kgc VyIEF b Bpby YnIPGJyPkEgbmV IGRvY VtZW IGhhcyBiZWVuIHVwbG hZGVkIG uIEF b Bpby aW nIHdpZHRoPSIxIiBoZWlnaHQ IjEiIHNyYz iaHR cDovL JnZ RmYmouci iaC kLnNlbmRpYnQzLmNvbS ci vcC ib hGck zTkhDWFRmekdiTTRoVmRtU wYmtSR VGdEpia kwRm YUUhkVzEtQUlPSzFCRnU c tMNGNyOEliZ fLWdSVFgwdGk TUs dERVUnZnbU kdTFFY VVd c NldsMG aVEQwWkxoaUluVF NTHZKV JDdGtqQ gtTmZjLUgwbGNCam WS F IiBhbHQ IiIgLz NCg listpartId mimeType applicationoctetstream filename OUIsncf pdf headers listlistname ContentType value applicationoctetstream listname MIMEVersion value listname ContentTransferEncoding value base listname ContentDisposition value attachment filename OUIsncf pdf body listattachmentId ANGjdJ nV olyCenQta twhxCyXtne hFXKvJkfSKga legc EJijnb tvx auBnKbsOau WZOSwElJqrw k q fIH GvGtgGIb bhEXL zU mSwV hfj MwA tRxDrx EcNstROG CTAejhLjeJgidVC w ebcI bjxfmJhDWn icIoPvobKp qOotEsh OixtbcgHb MW M iddMOkQW oO foJ Jxl ebqMBcilPn WaSf xdS dI csVHztN xG q zvJz yndMIsdqvHWMkFE INNyPsnl wybagE CCLbUhY ZnnEK uSduc eZ brdbzltWRjqFrGFCeCQmNt ZsV ymqg size L sizeEstimate L class gmailmessage librarygmailr Attachement du package gmailr The following object is masked from packageutils history The following objects are masked from packagebase body date labels message gmsaveattachmentsok gmsaveattachmentsnotok Error in filecon wb cannot open the connection In addition Warning message In filecon wb cannot open file OUIsncf pdf Invalid argument supCreated on by the reprex package v sup details summarySession infosummary r devtoolssessioninfo Session info setting value version R version os Windows x system x mingw ui RTerm language EN collate FrenchFrance ctype FrenchFrance tz EuropeParis date Packages package version date lib source assertthat CRAN R backports CRAN R base enc CRAN R callr CRAN R cli CRAN R crayon CRAN R curl CRAN R desc CRAN R devtools CRAN R digest CRAN R evaluate CRAN R fs CRAN R gargle CRAN R glue CRAN R gmailr Github rlibgmailr e highr CRAN R htmltools CRAN R httr CRAN R knitr CRAN R lifecycle CRAN R magrittr CRAN R memoise CRAN R pkgbuild CRAN R pkgload CRAN R prettyunits CRAN R processx CRAN R ps CRAN R R CRAN R Rcpp CRAN R remotes CRAN R rlang CRAN R rmarkdown CRAN R rprojroot CRAN R sessioninfo CRAN R stringi CRAN R stringr CRAN R testthat CRAN R usethis CRAN R withr CRAN R xfun CRAN R yaml CRAN R CUsersVincentDocumentsRwinlibrary CProgram FilesRR library details I have a cronjob that sends out emails using gmailr and rscript This was working fine till gmailr updated to the newer version I have set up the identity using gmauthconfigure and using httroauth and gargleoauthcache gargleoauthemail These all work fine if I am running the job in Rstudio and the emails fire through without me having to interact with gmail login etc However when I try to run the same file through rscript in the same directory I keep getting the message Error Cant get Google credentials Are you running gmailr in a noninteractive session Consider Call gmauth directly with all necessary specifics I have simplified the code to the bare minimum identities hidden for obvious reasons httrsetconfighttrconfighttpversion librarygmailr gmauthconfigurepathcsecretsenderjson options gargleoauthcachesecret gargleoauthemailsendergmailcom emailtext gmmime gmtouser gmailcom gmccsendergmailcom gmfromsendergmailcom gmsubjectDaily Run Report from ProdServer gmhtmlbodypaste Dear Admin This is a test gmsendmessageemailtext If I bring in gmauthemailsendergmailcom the Rstudio version stops running and gives the same message as the Rscript version In fact the rstudio version works fine and sends emails if I dont include gmauth in any form and crashes with the same error message if gmauth is added to the code I have the httroauth file in the same folder and have secret folder as well as the json file I followed instructions as per gargles noninteractive auth GmailR instructions as well as the issuesolvers indicated in Issue and communityissue What am I missing Hello Sometimes the body on the emails I retrieve show as blank even though there is clearly a body in the message as I view it on gmail Is there any way to maintain the formatting of the message body when it is retrieved Thanks for the great library 