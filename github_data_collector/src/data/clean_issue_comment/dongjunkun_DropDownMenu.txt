 mDropDownMenusetTabTexttypes position mDropDownMenucloseMenu app public void setDropDownMenuNonNull ListString tabTexts NonNull ListView popupViews NonNull View contentView iftabTextssize popupViewssize throw new IllegalArgumentExceptionparams not match tabTextssize should be equal popupViewssize else if thistabMenuViewgetChildCount thistabMenuViewremoveAllViews forint i i tabTextssize i thisaddTabtabTexts i if thiscontainerViewgetChildAt null thiscontainerViewremoveViewAt thiscontainerViewaddViewcontentView thismaskView new ViewthisgetContext thismaskViewsetLayoutParamsnew androidwidgetFrameLayoutLayoutParams thismaskViewsetBackgroundColorthismaskColor thismaskViewsetOnClickListenernew ViewOnClickListener public void onClickView v DropDownMenuthiscloseMenu if thiscontainerViewgetChildAt null thiscontainerViewremoveViewAt thiscontainerViewaddViewthismaskView thismaskViewsetVisibility ifthiscontainerViewgetChildAt null thiscontainerViewremoveViewAt thispopupMenuViews new FrameLayoutthisgetContext thispopupMenuViewssetLayoutParamsnew androidwidgetFrameLayoutLayoutParams intfloat DisplayUtilsgetScreenSizethisgetContexty thismenuHeighPercent thispopupMenuViewssetVisibility thiscontainerViewaddViewthispopupMenuViews if popupMenuViewsgetChildCount popupMenuViewsremoveAllViews forint i i popupViewssize i ViewpopupViewsgetisetLayoutParamsnew androidviewViewGroupLayoutParams thispopupMenuViewsaddViewViewpopupViewsgeti i Process comyyydjkdropdownmenu PID javalangRuntimeException Unable to start activity ComponentInfocomyyydjkdropdownmenucomyyydjkdropdownmenuMainActivity javalangNullPointerException Attempt to invoke virtual method void comyyydjklibraryDropDownMenusetDropDownMenujavautilList javautilList androidviewView on a null object reference at androidappActivityThreadperformLaunchActivityActivityThreadjava at androidappActivityThreadhandleLaunchActivityActivityThreadjava at androidappActivityThreadwrap ActivityThreadjava at androidappActivityThreadHhandleMessageActivityThreadjava at androidosHandlerdispatchMessageHandlerjava at androidosLooperloopLooperjava at androidappActivityThreadmainActivityThreadjava at javalangreflectMethodinvokeNative Method at comandroidinternalosZygoteInitMethodAndArgsCallerrunZygoteInitjava at comandroidinternalosZygoteInitmainZygoteInitjava Caused by javalangNullPointerException Attempt to invoke virtual method void comyyydjklibraryDropDownMenusetDropDownMenujavautilList javautilList androidviewView on a null object reference at comyyydjkdropdownmenuMainActivityinitViewMainActivityjava at comyyydjkdropdownmenuMainActivityonCreateMainActivityjava at androidappActivityperformCreateActivityjava at androidappInstrumentationcallActivityOnCreateInstrumentationjava at androidappActivityThreadperformLaunchActivityActivityThreadjava at androidappActivityThreadhandleLaunchActivityActivityThreadjava at androidappActivityThreadwrap ActivityThreadjava at androidappActivityThreadHhandleMessageActivityThreadjava at androidosHandlerdispatchMessageHandlerjava at androidosLooperloopLooperjava at androidappActivityThreadmainActivityThreadjava at javalangreflectMethodinvokeNative Method at comandroidinternalosZygoteInitMethodAndArgsCallerrunZygoteInitjava at comandroidinternalosZygoteInitmainZygoteInitjava 