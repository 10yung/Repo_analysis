Enables the nodejs runtime metrics for meteor applications Type of problem Runtime problem after the build succeeds Summary Explain the problem briefly forcessl no longer works on Heroku when prodOnly is true I added forcessl to my manual meteor packages directory to double check this When I remove the prodOnly flag it redirects properly When I add it back in my site will stay on the http version Contents of meteorrelease Please paste the contents of the meteorrelease file between the quotes below Example METEOR METEOR Buildpack version Please paste the output of heroku buildpacks between the quotes below Example Deployment target Are you deploying to Heroku or to an alternative target like Dokku Flynn etc Please specify here Please note that only heroku is supported though we welcome PRs and issues that help add support for other targets Heroku Failure to build Runtime problem after the build succeeds We have seen that post deploy our changes are not getting reflected properly We need to deploy twice or so or sometimes never reflect We are also observing an issue in the build logs related to native metrics apptmpcachemeteormeteorpackagesmeteortool puot aoslinuxx webbrowserwebcordovamtoslinuxx devbundlebinnode apptmpcachemeteormeteorpackagesmeteortool puot aoslinuxx webbrowserwebcordovamtoslinuxx devbundlelibnodemodulesnpmnodemodulesnodegypbinnodegypjs build j nativemetrics make Entering directory tmpbuild ab ab b f c ghmeteorherokubuildappprogramsservernpmnodemodulesnewrelicnativemetricsbuild CXXtarget Releaseobjtargetnativemetricssrcnativemetricso CXXtarget ReleaseobjtargetnativemetricssrcGCBindero srcGCBindercpp In static member function static void nrGCBinderdoCallbackuvworkt int srcGCBindercpp warning v Localv Value NanMakeCallbackv Localv Object v Localv String int v Localv Value is deprecated Wdeprecateddeclarations In file included from srcGCBinderhpp from srcGCBindercpp nannanh note declared here NANDEPRECATED inline v Localv Value MakeCallback CXXtarget ReleaseobjtargetnativemetricssrcLoopCheckero CXXtarget ReleaseobjtargetnativemetricssrcRUsageMetero SOLINKMODULEtarget Releaseobjtargetnativemetricsnode COPY Releasenativemetricsnode Please advise Are you deploying to Heroku or to an alternative target like Dokku Flynn etc Heroku Verions we are using Meteor New Relic Thanks Aniket Type of problem Failure to build Summary Explain the problem briefly MONGOURL missing error but it IS set I have no idea why the buildpack does not see it Using instructions from Contents of meteorrelease Please paste the contents of the meteorrelease file between the quotes below Example METEOR METEOR Buildpack version Please paste the output of heroku buildpacks between the quotes below Example rootdokku dokku buildpacks buildpacks is not a dokku command See dokku help for a list of available commands cat env export BUILDPACKURL I wish there WERE a version Logs If this is a failure to build Use heroku configset BUILDPACKVERBOSE to enable verbose logging Push to heroku again git push heroku master Paste the full output from the console into the quotes below If the build was successful and this is a runtime problem please paste any relevant logs from heroku logs dokku configset trial ROOTURL dokku configset trial MONGOURLmongodbmyusermypassdsXXXXXXmon golabcomXXXXXtest autoReconnecttrue dokku config trial trial env vars DOKKUAPPTYPE herokuish MONGOURL mongodbmyusermypassdsXXXXXmongolabcomXXXXXtest autoReconnecttrue ROOTURL remote echo export ROOTURL remote export ROOTURL remote for line in docker logs CID remote dokkulogverbosequiet ROOTURL remote declare desclog verbose formatter with quiet option remote z remote echo ROOTURL remote ROOTURL remote for line in docker logs CID remote dokkulogverbosequiet for file in apppathprofiledsh remote declare desclog verbose formatter with quiet option remote z remote echo for file in apppathprofiledsh remote for file in apppathprofiledsh remote for line in docker logs CID remote dokkulogverbosequiet source appprofiledmongourlsh remote declare desclog verbose formatter with quiet option remote z remote echo source appprofiledmongourlsh remote source appprofiledmongourlsh remote for line in docker logs CID remote dokkulogverbosequiet z remote declare desclog verbose formatter with quiet option remote z remote echo z remote z remote for line in docker logs CID remote dokkulogverbosequiet export MONGOURL remote declare desclog verbose formatter with quiet option remote z remote echo export MONGOURL remote export MONGOURL remote for line in docker logs CID remote dokkulogverbosequiet MONGOURL remote declare desclog verbose formatter with quiet option remote z remote echo MONGOURL remote MONGOURL remote for line in docker logs CID remote dokkulogverbosequiet z remote declare desclog verbose formatter with quiet option remote z remote echo z remote z remote for line in docker logs CID remote dokkulogverbosequiet echo meteorbuildpackhorse MONGOURL missing you must define it for meteor to work remote declare desclog verbose formatter with quiet option remote z remote echo echo meteorbuildpackhorse MONGOURL missing you must define it for meteor to work normal output remote Adding PATH environment remote Running extras remote Adding profile script to resolve MONGOURL from mongolab addon remote Adding profile script to resolve ROOTURL from heroku app name remote Discovering process types remote Default types for web remote Releasing trial dokkutriallatest remote Deploying trial dokkutriallatest remote Attempting to run scriptsdokkupredeploy from appjson if defined remote App Procfile file found homedokkutrialDOKKUPROCFILE remote DOKKUSCALE file found homedokkutrialDOKKUSCALE remote web snip remote trial web container output remote meteorbuildpackhorse MONGOURL missing you must define it for meteor to work remote appmeteorherokubuildappprogramsservernodemodulesfibersfuturejs remote throwex remote remote Error MONGOURL must be set in environment remote at Objectanonymous packagesmongoremo Deployment target Are you deploying to Heroku or to an alternative target like Dokku Flynn etc Please specify here Please note that only heroku is supported though we welcome PRs and issues that help add support for other targets Dokku on Digital Ocean Simply shows the duration after the build in the format hhmmss Ive added caching for development and production nodemodules Im also saving the cache meteor generates during the build Reusing that cache reduced my build time from minutes to minutes Type of problem Build wrong packages Summary Explain the problem briefly Contents of meteorrelease Please paste the contents of the meteorrelease file between the quotes below Example METEOR METEOR Buildpack version Please paste the output of heroku buildpacks between the quotes below Example Deployment target Are you deploying to Heroku or to an alternative target like Dokku Flynn etc Please specify here Please note that only heroku is supported though we welcome PRs and issues that help add support for other targets Heroku Hi I cant have METEORPACKAGEDIRS to be taken into account during app buildrun It is set to appsubmodulesmyrepopackages and the folder exist I checked out in the bash However it behaves as if ignored I guess during build the path is different eg I should write tmpsubmodules instead of app or simply could not test yet but I am not sure and I cant find a solution Maybe the buildpack is a good place to handle this This uses yarn instead of npm for application installation At OK GROW we are changing our process to pretty much use yarn everywhere we wanted our buildpack to reflect that as well For your consideration Thanks The idea of the buildpack is to install devDependencies even if the NODEENV is set to production simply avoiding the flag production on npm install Unfortunately this doesnt work since npm never installs devDependencies if the environment is set to production Official documentation states With the production flag or when the NODEENV environment variable is set to production npm will not install modules listed in devDependencies link To fix that we can run npm install as development Type of problem Pick one below and delete the others Please note that runtime problems are usually due to bugs in your code and not bugs with this buildpack The Nodejs team has announced that a high severity remote Denial of Service DoS Constant Hashtable Seeds vulnerability in Nodejs versions x through x has been patched in the following versions Summary Explain the problem briefly Need to make sure the build works with Node and above Contents of meteorrelease Please paste the contents of the meteorrelease file between the quotes below Example METEOR METEOR looks to have Node Buildpack version Please paste the output of heroku buildpacks between the quotes below Example Logs If this is a failure to build Use heroku configset BUILDPACKVERBOSE to enable verbose logging Push to heroku again git push heroku master Paste the full output from the console into the quotes below If the build was successful and this is a runtime problem please paste any relevant logs from heroku logs Deployment target Are you deploying to Heroku or to an alternative target like Dokku Flynn etc Please specify here Please note that only heroku is supported though we welcome PRs and issues that help add support for other targets 