Describe the bug When pointing satis to a Gitlab repo it chooses a dist url that mirrors the source url instead of finding the Gitlab Release and using the dist zip artifact To Reproduce Make your satisjson look like this repositories type vcs url gitgitlabcomgroupnameprojectnamegit requireall true Then run satis build satisjson and satis will create a packagesjson that looks like this packages groupnameprojectname v name groupnameprojectname version v versionnormalized source type git url gitgitlabcomgroupnameprojectnamegit reference da ec d e a b eb c dist type zip url reference da ec d e a b eb c shasum require composerinstallers v requiredev wpcodingstandardswpcs time T type wordpressplugin Expected behavior The dist is supposed to be a distributable build of my app NOT the source code version stored in git The dist versions scripts are minified css is build from sass and various other things have been optimized The dist version is stored as a zip artifact referenced by the Gitlab Release The above disturl is simply an API call to Gitlab to generate a zip of the files as they appear within the git repo I expected satis to use the carefully constructed zip distributable thats associated with the Release In my case the url points to a GitlabCI artifact dist type zip url reference da ec d e a b eb c shasum Describe the bug For repository typegitlab Satisfy is not working with rearchivefalse option in archive sectiondownload existing archive To Reproduce Create satisjson with repositories type gitlab url installationsource dist archive format zip rearchive false checksum true execute binsatis build satisjson web noansi verbose repositoryurl repositorystrict Outcome In Filesystemphp line ErrorException copytmpcomposerarchiver de e b archivezipsha b b e db a f e b failed to open stream No such file or directory Exception trace at varwwwsatisfyvendorcomposercomposersrcComposerUtilFilesystemphp Composer Util ErrorHandlerhandle at nana copy at varwwwsatisfyvendorcomposercomposersrcComposerUtilFilesystemphp Composer Util Filesystemcopy at varwwwsatisfyvendorcomposercomposersrcComposerUtilFilesystemphp Composer Util FilesystemcopyThenRemove at varwwwsatisfyvendorcomposercomposersrcComposerUtilFilesystemphp Composer Util Filesystemrename at varwwwsatisfyvendorcomposersatissrcBuilderArchiveBuilderphp Composer Satis Builder ArchiveBuilderarchive at varwwwsatisfyvendorcomposersatissrcBuilderArchiveBuilderphp Composer Satis Builder ArchiveBuilderdump at varwwwsatisfyvendorcomposersatissrcConsoleCommandBuildCommandphp Composer Satis Console Command BuildCommandexecute at varwwwsatisfyvendorsymfonyconsoleCommandCommandphp Symfony Component Console Command Commandrun at varwwwsatisfyvendorsymfonyconsoleApplicationphp Symfony Component Console ApplicationdoRunCommand at varwwwsatisfyvendorsymfonyconsoleApplicationphp Symfony Component Console ApplicationdoRun at varwwwsatisfyvendorcomposersatissrcConsoleApplicationphp Composer Satis Console ApplicationdoRun at varwwwsatisfyvendorsymfonyconsoleApplicationphp Symfony Component Console Applicationrun at varwwwsatisfyvendorcomposersatisbinsatis Expected behavior Archive for gitlab repository downloaded and stored in dist directory Additional context Theres no archivezipsha b b e db a f e b in directory for corresponding commit but it has simple tmpcomposerarchiver de e b archivezip file So question iswhy satis tries to create file with name including hash it downloaded from bash composer Downloading composer Writing composercacherepohttpspackagesdrupalorg providerdrupalrulesuijson into cache composer composer In ComposerRepositoryphp line composer composer ErrorException composer Undefined index packages composer composer composer Exception trace composer at satisvendorcomposercomposersrcComposerRepositoryComposerRepositoryphp composer Composer Util ErrorHandlerhandle at satisvendorcomposercomposersrcComposerRepositoryComposerRepositoryphp composer Composer Repository ComposerRepositorywhatProvides at satisvendorcomposercomposersrcComposerDependencyResolverPoolphp composer Composer DependencyResolver PoolcomputeWhatProvides at satisvendorcomposercomposersrcComposerDependencyResolverPoolphp composer Composer DependencyResolver PoolwhatProvides at satissrcPackageSelectionPackageSelectionphp composer Composer Satis PackageSelection PackageSelectionselectLinks at satissrcPackageSelectionPackageSelectionphp composer Composer Satis PackageSelection PackageSelectionselect at satissrcConsoleCommandBuildCommandphp composer Composer Satis Console Command BuildCommandexecute at satisvendorsymfonyconsoleCommandCommandphp composer Symfony Component Console Command Commandrun at satisvendorsymfonyconsoleApplicationphp composer Symfony Component Console ApplicationdoRunCommand at satisvendorsymfonyconsoleApplicationphp composer Symfony Component Console ApplicationdoRun at satissrcConsoleApplicationphp composer Composer Satis Console ApplicationdoRun at satisvendorsymfonyconsoleApplicationphp composer Symfony Component Console Applicationrun at satisbinsatis composer composer build repositoryurl REPOSITORYURL repositorystrict nohtmloutput skiperrors stats file outputdir packages composer drupalcomposermirrorcomposer exited with code composercacherepohttpspackagesdrupalorg providerdrupalrulesuijson files content is an empty array Describe the bug I am getting an array to string conversion error when attempting to build a specific package To Reproduce Specify a package for the build command Outcome Loading config file homedkinne composerconfigjson Loading config file homedkinne composerauthjson Checked CA file etcpkicatrustextractedpemtlscabundlepem valid Executing command varwwwcdxochtmlsatis git branch nocolor noabbrev v Executing command varwwwcdxochtmlsatis git describe exactmatch tags Executing command varwwwcdxochtmlsatis git log prettyH n HEAD Executing command varwwwcdxochtmlsatis hg branch Executing command varwwwcdxochtmlsatis fossil branch list Executing command varwwwcdxochtmlsatis fossil tag list Executing command varwwwcdxochtmlsatis svn info xml Failed to initialize global composer Composer could not find the config file homedkinne composercomposerjson To initialize a project please create a composerjson file as described in the Getting Started section Reading varwwwcdxochtmlsatisvendorcomposerinstalledjson Scanning packages In PackageSelectionphp line ErrorException Array to string conversion Exception trace at varwwwcdxochtmlsatissrcPackageSelectionPackageSelectionphp Composer Util ErrorHandlerhandle at nana sprintf at varwwwcdxochtmlsatissrcPackageSelectionPackageSelectionphp Composer Satis PackageSelection PackageSelectionselect at varwwwcdxochtmlsatissrcConsoleCommandBuildCommandphp Composer Satis Console Command BuildCommandexecute at varwwwcdxochtmlsatisvendorsymfonyconsoleCommandCommandphp Symfony Component Console Command Commandrun at varwwwcdxochtmlsatisvendorsymfonyconsoleApplicationphp Symfony Component Console ApplicationdoRunCommand at varwwwcdxochtmlsatisvendorsymfonyconsoleApplicationphp Symfony Component Console ApplicationdoRun at varwwwcdxochtmlsatissrcConsoleApplicationphp Composer Satis Console ApplicationdoRun at varwwwcdxochtmlsatisvendorsymfonyconsoleApplicationphp Symfony Component Console Applicationrun at varwwwcdxochtmlsatisbinsatis build repositoryurl REPOSITORYURL repositorystrict nohtmloutput skiperrors stats file outputdir packages Expected behavior I expect Satis to reprocess the specified package Additional context According to git bisect the issue started with a July th commit e ef cf a beca e d c is the first bad commit commit e ef cf a beca e d c Author Pierre pierrebasilegmailcom Date Wed Jul Update only one package Add using documentation e dba aa d b fdf e f f db b cc f fda eaef dd f c M docs c d e fa eaf db e cddb a b b f c f a efc c ff a M src skiperrors NOT WORKING My Commend shell php d memorylimit binsatis build satisjson web v skiperrors Error Logs shell In RemoteFilesystemphp line Composer Downloader TransportException The c b a dfa ae c b f d ac d e e b c bdccdcc json file cou ld not be downloaded HTTP Not Found Exception trace at homeworkKalistavendorcomposercomposersrcComposerUtilRemoteFilesystemphp Composer Util RemoteFilesystemget at homeworkKalistavendorcomposercomposersrcComposerUtilRemoteFilesystemphp Composer Util RemoteFilesystemgetContents at homeworkKalistavendorcomposercomposersrcComposerRepositoryComposerRepositoryphp Composer Repository ComposerRepositoryfetchFile at homeworkKalistavendorcomposercomposersrcComposerRepositoryComposerRepositoryphp Composer Repository ComposerRepositorywhatProvides at homeworkKalistavendorcomposercomposersrcComposerDependencyResolverPoolphp Composer DependencyResolver PoolcomputeWhatProvides at homeworkKalistavendorcomposercomposersrcComposerDependencyResolverPoolphp Composer DependencyResolver PoolwhatProvides at homeworkKalistasrcPackageSelectionPackageSelectionphp Composer Satis PackageSelection PackageSelectionselectLinks at homeworkKalistasrcPackageSelectionPackageSelectionphp Composer Satis PackageSelection PackageSelectionselect at homeworkKalistasrcConsoleCommandBuildCommandphp Composer Satis Console Command BuildCommandexecute at homeworkKalistavendorsymfonyconsoleCommandCommandphp Symfony Component Console Command Commandrun at homeworkKalistavendorsymfonyconsoleApplicationphp Symfony Component Console ApplicationdoRunCommand at homeworkKalistavendorsymfonyconsoleApplicationphp Symfony Component Console ApplicationdoRun at homeworkKalistasrcConsoleApplicationphp Composer Satis Console ApplicationdoRun at homeworkKalistavendorsymfonyconsoleApplicationphp Symfony Component Console Applicationrun at homeworkKalistabinsatis I have a set of github packages in my satisjson like repositories type git url gitgithubcomuserpackagegit and satis generates a page with Release links like which is obviously wrong How to produce correct links What I did Im running satis in Jenkins with the command satisbinsatis build nointeraction noansi composerjson buildout What I expected to happen I expected there to be no ansi control characters in the the output What actually happened I get the following output with ansi control characters m m Reading composerjson of designsphumbor m m m mReading composerjson of designsphumbor m m Reading composerjson of designsphumbor m m Reading composerjson of designsphumbor m m Reading composerjson of designsphumbor m m Reading composerjson of designsphumbor m m Reading composerjson of designsphumbor m m Reading composerjson of designsphumbor m m Reading composerjson of designsphumbor m m Reading composerjson of designsphumbor m m Reading composerjson of designsphumbor m m m mReading composerjson of designsphumbor cloneableurlbuilder m m Reading composerjson of designsphumbor fixurlencoding m m Reading composerjson of designsphumbor master m mReading composerjson of squizlabsphpcodesniffer Hello On BuildCommand if we have a packagerepository filter we load all packages to dump them with the PackagesBuilder if packageSelectionhasFilterForPackages packageSelectionhasRepositoryFilter in case of an active filter we need to load the dumped packagesjson and merge the updated packages in oldPackages packageSelectionload packages oldPackages ksortpackages packagesBuilder new PackagesBuilderoutput outputDir config skipErrors packagesBuilderdumppackages Is it really needed if providers option is enabled If no I can create a pull request to change the code Using the latest version from master specifying vcs git over http Satis is requesting the password when the credentials are present in authjson in Composers home Giving it the password it succeeds but doesnt offer to install them in the authjson file running vvv is states to following lines Loading config file homeubuntucomposerconfigjson Loading config file homeubuntucomposerauthjson Oddly running composer exec satis build satisjson public it works fine albeit theres not Stdout Suggesting theres an issue with the way the satis binary is reading the auth file When I set onlybestcandidates flag there is a situation Ive found where Composer is calculating the wrong package I cannot be sure its a satis problem Ive not finished testing this but wanted to capture the beginning of what I have The full satisjson is name govcmssatistest homepage repositories type composer url type composer url type composer url type vcs url require govcmsgovcms beta simesyscaffoldtooling devmaster requiredependencies true onlybestcandidates true govcmsgovcms beta requires drupalchosen while the latest version is The relevant parts of the chosen packages coming from drupalchosen homepagehttps wwwdrupalorg project chosen version versionnormalized typedrupalmodule namedrupal chosen require drupal chosenlib drupal core homepagehttps wwwdrupalorg project chosen version versionnormalized typedrupalmodule namedrupal chosen require drupal chosenlib drupal core drupalchosenlib homepagehttps wwwdrupalorg project chosen version versionnormalized typemetapackage namedrupal chosenlib require drupal chosenselfversion drupal core homepagehttps wwwdrupalorg project chosen version versionnormalized typemetapackage namedrupal chosenlib require drupal chosenselfversion drupal core The resulting satis repo when used as a source for govcmsgovcms beta results in only chosen But logically when getting the best candidate for drupalchosenlib composer should determine that govcms requires chosen which is constrained to chosenlib I feel the use of selfversion is having an impact here When building a site the outcome is Loading composer repositories with package information Updating dependencies including requiredev Your requirements could not be resolved to an installable set of packages Problem drupalchosenlib requires drupalchosen satisfiable by drupalchosen drupalchosen requires drupalchosenlib satisfiable by drupalchosenlib Can only install one of drupalchosen govcmsgovcms beta requires drupalchosen satisfiable by drupalchosen Installation request for govcmsgovcms satisfiable by govcmsgovcms beta 