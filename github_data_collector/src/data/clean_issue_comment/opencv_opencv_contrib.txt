 If you have a question rather than reporting a bug please go to where you get much faster responses If you need further assistance please read How To Contribute This is a template helping you to create an issue which can be processed as quickly as possible This is the bug reporting section for the OpenCV library System information version OpenCV Operating System Platform Mac OSX Docker Detailed description Im trying to build opencv for javascript by following the Docker instructions in I modify the buildjspy file to add the opencvcontrib directory def getcmakecmdself cmd cmake DOPENCVEXTRAMODULESPATHUsersmeopencvcontribmodules When I run docker run rm workdir code v PWDcode trzeciemscriptenlatest python platformsjsbuildjspy build I get the following error CMake Error at cmakeOpenCVModulecmake message No modules has been found Usersmeopencvcontribmodules But that directory exists because when I ls the directory I get a result ls la Usersmeopencvcontribmodules total drwxrxrx me ANT Domain Users Jan drwxrxrx me ANT Domain Users Jan rwrr me ANT Domain Users Jan READMEmd drwxrxrx me ANT Domain Users Jan aruco drwxrxrx me ANT Domain Users Jan bgsegm drwxrxrx me ANT Domain Users Jan bioinspired drwxrxrx me ANT Domain Users Jan ccalib etc Steps to reproduce to add code example fence it with triple backticks and optional file extension cpp C code example or attach as txt or zip file OpenCV Operating System Platform Linux acer generic Ubuntu SMP Wed Dec UTC x x x GNULinux Compiler gcc Ubuntu ubuntu Detailed description error opencvcaffepbh not found Steps to reproduce build with DWITHPROTOBUFBOOLON DBUILDPROTOBUFBOOLFALSE DPROTOBUFUPDATEFILESBOOLON DOPENCVDNNEXTERNALPROTOBUFBOOLON to fix in dnnCMakeListstxt fileGLOB protofiles CMAKECURRENTLISTDIRsrctensorflowproto CMAKECURRENTLISTDIRsrccaffeopencvcaffeproto CMAKECURRENTLISTDIRsrconnxopencvonnxproto setPROTOBUFGENERATECPPAPPENDPATH ON required for tensorflow protobufgeneratecppfwsrcs fwhdrs protofiles setfwinc CMAKECURRENTBINARYDIRsrccaffe CMAKECURRENTBINARYDIRsrctensorflow CMAKECURRENTBINARYDIRsrconnx Hello I compiled OpenCV with CUDA because I wanted to try to offload to gpu some tasks on a jetson nano I tried the most expensive part of my project of course that involved background subtractor I think I figured out how to use it from python but I cannot understand if Im using it wrong or theres a bug I cannot get the background image back from the background subtractor System information version OpenCV Operating System Platform Ubuntu Compiler GCC Detailed description python Traceback most recent call last File bgsegmpy line in module background bgsubtractorgetBackgroundImagestream cv error OpenCV homeanasopencvmodulescoresrcmatrixwrapcpp error The functionfeature is not implemented getGpuMat is available only for cudaGpuMat and cudaHostMem in function getGpuMat Steps to reproduce python import cv image cv imreadassetsS bmp gray cv cvtColorimage cv COLORBGR GRAY gpugray cv cudaGpuMat gpugrayuploadgray bgsubtractor cv cudacreateBackgroundSubtractorMOG stream cv cudaStream foregroundgpu bgsubtractorapplygpugray stream foreground foregroundgpudownload background bgsubtractorgetBackgroundImagestream System information version OpenCV Operating System Platform Windows Bit Compiler Visual Studio Python using Anaconda Detailed description I would like to use the Tracker classes from Python on Windows and it seems that in Python the only way to access algorithm parameters is by writingreading the Tracker object tofrom a yaml file When I try Trackerwrite I get a cv error Here is my test case Steps to reproduce py import cv import os Display OpenCV version printfOpenCV version cv version Create tracker object tracker cv TrackerCSRTcreate settingsfile settingsyaml Delete settings file if it exists if ospathisfilesettingsfile osremovesettingsfile Create FileNode fs cv FileStoragesettingsfilecv FILESTORAGEWRITE Write defaults trackerwritefs Release file fsrelease When I tried this Python OpenCV with prepackaged binaries or when rebuilt from source code it failed on the trackerwritefs line with this message Traceback most recent call last File stdin line in module cv error OpenCV C Users dick OpenCV opencv modules core src matrixwrapcpp error The functionfeature is not implemented You should explicitly call mapHostunmapHost methods for oglBuffer object in function cvInputArraygetMat On a slightly different test I got this error message Traceback most recent call last File stdin line in module cv error OpenCV C Users dick OpenCV opencv modules core src matrixwrapcpp error The functionfeature is not implemented Unknownunsupported array type in function cvInputArraygetMat I have a friend who is more CLinuxVisual Studio savvy than I am and she confirmed for me that this trackerwrite works fine on Linux writing a yaml file as does using trackerread to read it back as follows py Read in the settings fssettings cv FileStoragesettingsfilecv FILESTORAGEREAD trackerreadfssettingsroot Release file fssettingsrelease When I try trackerread with a knowngood yaml file Python crashes straight to the command prompt no error message at all I guess this is a closely related issue My friends assessment was As far as I can tell in Windows the Mat object being created is the wrong datatype whether is it has an extra dimension or wrong type ie float vs int or its an empty null pointer and Ive imposed on her time quite enough to this point Could someone please look into the C code to see whats going wrong and perhaps why it works on Linux but not Windows In looking around for similar issues I thought that looked somewhat familiar where the Mat class wasnt behaving as expected Note This is my first time opening an issue Im not fluent in C or using VS I got a lot of help to do the recompiling and Im still learning Python I hope the OpenCV team will support Python endusers like me to access tracking algorithm parameters even if they have no option but Windows Thank you According to the original paper of SURF the list of box filter sizes is as follows Octave Octave Octave Octave However OpenCV SURF implementation has resulted in different values Octave Octave Octave Octave Please use this line to close one or multiple issues when this pullrequest gets merged You can add another line right under the first one resolves resolves This pullrequest changes Please describe what your pullrequest is changing the list of filter sizes to become consistent with the SURF paper The new module intensitytransform implements the following intensity transformation algorithms gamma correction log transformation autoscaling and contrast stretching This pullrequest changes Adds a new module called intensitytransform Main PR resolves This pullrequest changes Adds overloads to C functions to generate the missing python bindings for cudaobjdetect cudawarping cudaarithm and cudabgsegm functions Python tests have been added for the missing functions and all module specific python tests have also been moved here from the main repo System information version OpenCV Operating System Platform Linux Ubuntu Bit Nvidia Xavier CUDA x OpenCV OpenCV cuda bindings for python seem receive wrong param types for cudawarpingsrcwarpcpp Detailed description The parameter M for warpAffine buildWarpAffineMaps warpPerspective buildWarpPerspectiveMaps is all defined as cvMat However in python binding they are expected as cvcudaGpuMat ohterwise TypeError Expected PtrcvUMat for argument s will be raised However pass cudaGpuMat will trigger error at Mat M MgetMat with xxxopencvmodulescoresrcmatrixwrapcpp error The functionfeature is not implemented You should explicitly call download method for cudaGpuMat object in function getMat Steps to reproduce python usrbinenv python encoding utf Demo usage of cudawarpAffine from OpenCV x import cv as cv import numpy as np mask nprandomrandintlow high size astypenpuint mapping nparray imagecontainer cvcudaGpuMat mappingcontainer cvcudaGpuMat dsize stream cvcudaStream imagecontaineruploadmask mappingcontaineruploadmapping cropmask cvcudawarpAffinesrcimagecontainer Mmappingcontainer dsizedsize flagscvWARPINVERSEMAP streamstreamdownload cvimshowCropMask cropmask cvwaitKey Possible solutions I am not so familiar with InputArray as onceforall param type so maybe this can be some easy fix for you guys Currently I replace Mat M MgetMat to Mat M MdownloadM to make python happy and will break cpp codes Another gossip the cuda version seems no good than CPU version Please use this line to close one or multiple issues when this pullrequest gets merged You can add another line right under the first one resolves resolves Fixes This pullrequest changes Please describe what your pullrequest is changing This PR tries to fix the out of range error that occurs due to numSamples and hence sampleStep becomes INTMIN which is the root cause of all the errors This pullrequest changes Minor change in the postdetect loop of MultiTrackerTLD to delay early exit in case of low Sc value in NN classification Instead of early exit it continues for all trackers Return value is false in case of failure for all trackers not just one tracker 