Creating this PR in anticipation of which were going to merge into master Im using Rails and Ruby Fetching bluecloth Installing bluecloth with native extensions GemExtBuildError ERROR Failed to build gem native extension current directory CRuby x librubygems gemsbluecloth ext CRuby x binrubyexe r siteconf akh parb extconfrb checking for srand yes checking for random no checking for rand yes checking for bzero in stringhstringsh no checking for strcasecmp yes checking for strncasecmp yes checking for mkdioh yes checking for rubyencodingh yes creating extconfh creating Makefile current directory CRuby x librubygems gemsbluecloth ext make DESTDIR clean current directory CRuby x librubygems gemsbluecloth ext make DESTDIR generating blueclothextx mingw def compiling Csioc compiling blueclothc In file included from blueclothh from blueclothc configh error duplicate unsigned define BYTE unsigned char configh error two or more data types in declaration specifiers define BYTE unsigned char configh error duplicate unsigned define WORD unsigned int configh error duplicate unsigned define DWORD unsigned long In file included from CRuby x includeruby rubyh from blueclothh from blueclothc CRuby x includeruby rubyrubyh warning const attribute on function returning void Wattributes CONSTFUNCvoid rbsecureupdateVALUE In file included from CRuby x includeruby rubyrubyh from CRuby x includeruby rubyh from blueclothh from blueclothc CRuby x includeruby rubyinternh warning const attribute on function returning void Wattributes CONSTFUNCvoid rberroruntrustedVALUE CRuby x includeruby rubyinternh warning const attribute on function returning void Wattributes CONSTFUNCvoid rbchecktrustedVALUE make Makefile blueclotho Error make failed exit code Gem files will remain installed in CRuby x librubygems gemsbluecloth for inspection Results logged to CRuby x librubygems extensionsx mingw bluecloth g emmakeout An error occurred while installing bluecloth and Bundler cannot continue Make sure that gem install bluecloth v source succeeds before bundling In Gemfile koudoku was resolved to which depends on bluecloth Process finished with exit code Im just checking out Koudokus demo readme quick start guide While its great to see that there are builtin forms to collect credit card I would love to see an even simpler implementation that relies on Stripe Checkout using their modal to collect card details or Stripe Elements rather than having a fully custom or Bootstrap form that frankly isnt as nice or trustenducing as Stripes own forms Has anyone done this already Sharing an example of this would be highly appreciated People frequently ask whether Koudoku is still maintained because master hasnt received much attention for a long time Many people are still actively using Koudoku but most of my personal efforts with development on it are now limited to keeping it working well in the context of Bullet Train specifically This work is much easier for me and much less time consuming because I control so much more of the context of the apps that are built on top of Bullet Train eg Rails version Devise CanCanCan Bootstrap UI etc It also doesnt hurt that Im compensated financially by folks who run into issues or need new features eg the support we recently added for Rewardful and Link Mink affiliate programs Ive kept many of these updates in a separate branch until now In the short term this PR can help people understand which things have changed in the bullettrain branch of Koudoku Its possible that using this branch will help Koudoku work better in modern Rails apps but I cant be sure because the only modern Rails apps I work on anymore are Bullet Trainbased The only thing not included in this branch are lots of modifications and customizations made to the htmlerb views All of those are specific to Bullet Trains UI CSS and are only contained in the private Bullet Train repo I have no idea off the top of my head what state the views in this repository are in or which version of Bootstrap they use etc If someone wants to provide fixing updates for the latest version of Bootstrap please send a PR Im getting wrong number of arguments given number expected from BlueClothnewplanfeaturesgsub n n ntohtmlgsub p lihtmlsafe BlueClothnewtest is giving the same error Rails Also clones stripe customer ID to subscription owner Team too This keeps backwards compatibility by naming the attribute Subscriptionstripesubscriptionid rather than repurposing Subscriptionstripeid which is really the stripe customer ID I didnt see any tests for this concern so please advise if theres a preferred test approach So when i choose a plan as a user in my project stripe registers it and the new subscription is visible in the stripe dashboard This seem to be working just fine However when i try to edit the plan as the user inside my project via linkto Check profile koudokuownersubscriptionspathuser i always get the unauthorized page Association between subscription user is working in rails c Subscriptionlast Subscription id stripeid cusnotimportant planid lastfour couponid nil cardtype undefined currentprice userid createdat updatedat Userlast User id email test testcom createdat updatedat name Test provider nil uid nil image nil description nil planid nil So this seems to be working just fine Im using devise and when i installed koudoku i used rails g koudokuinstall user Inside Koudokurb Koudokusetup do config configsubscriptionsownedby user configstripepublishablekey ENV configstripesecretkey ENV Stripeapiversion Making sure the API version used is compatible configprorate false Default is true set to false to disable prorating subscriptions configfreetriallength Specify layout you want to use for the subscription pages default is application configlayout application you can subscribe to additional webhooks here we use stripeevent under the hood and you can subscribe using the stripeevent syntax on the config object configsubscribe chargefailed KoudokuChargeFailed end Any ideas whats going on EDIT When i add h tkoudokufailureunauthorized h ownername to the unauthorizedhtmlerb file the owner names is displayed correctly If this may help fixes 