Hi I recently installed the standalone version but I get this error when I try to open any example CT data LoadMatFileFcn Could not load selected data Thanks in advance for the help I create mat file from dicom files The mat file load in the matrad gui but this error will appear for dose calculation How can i solve this error Added base data generation in MatRadMCsquareBaseData EnergySpread is determined using a fit to TOPAS data Added possibility to give mcSquare maximal statistical uncertainty instead of nCasePerBixel Fixed offset in HLUT Now water is exactly at HU Added function to fit analytical base data to given dose cube fixes a dimensional error in the mexinterfaced sparse matrix reader that would crash Matlab if cube dimensions in x and y are not the same thanks pamede I changed the cppfile and recompiled the interface for windows btw can someone compile this on win linux Since there is some reformatting going on as well in the changed file The bug was in line now Issue from line in matRadimportDicomRTDose dev resultName strcatdoseTypeHelpernum strdoseInstanceHelperbeamSuffix I think the additional underscore mess up resultGUI in the end You will find a resultGUIphysicalDose after import in your workspace If you now try to recalc you get an reference to a non existing field w error dialog Unbenannt In my case this error occurs because of a missing InstanceNumber To keep the functionality one could edit num strdoseInstanceHelper like beamSuffix in line and add this to line or we should accordingly edit the string concatenationcreation of resultGUIw Originally posted by mingersming in Merged dev into photonKernelVal with an additional update for photon dose calculation The Update takes care of the extended kernel version see photonPencilBeamKernelCalc Furthermore implementation of the collimator rotation for import process and recalculation which takes account for possible collimator rotation of imported plans Be aware Collimator rotation is not yet implemented in GUI Dear markbangert eric this is my updated attempt at merging devVMAT with dev especially concerning the new optimization interface but also dose calculation What I did here is merge devVMAT into a copy of the current dev branch I think that this is better than what I did before because know you have a better acces to the changed files within this pull request and see the changes i did within the merge commit Also markangert should be able to close It seems like it runs smoothly now with the old settings ie fluence Opt DAO opt without preconditioning It doesnt work with VMAT yet dose calculation works but fluence optimization is weird and DAOVMAT doesnt work But anyways I hope you now have a better basis to continue with the merge Some comments integration worked quite well with VMAT Optimization Problem deriving from DAO Yet I am not clear on how to do something similar with the daoVec Aperture stuff I am not familiar enough with the implementation at the moment the changes are in the OptimizationProblemDAO class within the respective functions for me siochi leaf sequencing with fails with the matRadm script but only when sequencing is turned on and DAO of course VMAT is turned of Yet I like the idea of putting the number of leves into pln so I changed all sequencers to have the pln struct in their call With preconditioning enabled DAO gives worse results than directly after sequencing I dont like that the fluence optimization now needs the stf only because the tiny part of VMAT code Can this be handled differently Should we just write a matRadVMAToptimization that itself calls fluence optimization and dao Merging was at some points weird git associated some wierd code parts with each other esp in generateStf and dosecalc I hope I didnt mess something up there Let me know if you have questions I will let you know if I forgot something in the list PS Does someone of you have a very light test script for the VMAT issue with the previous idea of dose grid speed up was that our carbon ion spot could be smaller than the voxel here we sample some percentage of voxels from each structure but maintain a ring of voxels on the inside of each stucture for full resolution of edge effects Here selecting samples from a full dij to be kept for use in final dose calculation ideas that can be further developed I can think of scalar mulitplication with mask vector for voxel selection also can define unique sampling fractions for each structure if needed eg target OAR body Hi there after switching the photon machine recalc fails The problem occurs because the bixel width in the propStf is set from field to NaN after changing the machine The GUI still shows field There must be a mistake for the initial procedure For the first you can solve it with the command plnpropStfbixelWidth field before pressing recalc These developments change the main and dicom GUI so it uses external Layout and MainFunctions The layout function mainfcn are obtained by exporting from MATLABs guide editor To minimize the changes to the used GUI file and maximize compability a custom function for altering the exported guide m file and automatically creating the external files is provided called matRadfixExportedGUI This also allows to apply the same procedure on other branches The external layout function may also be used to create the figure again being editable with guide to be exported again however this has not been thoroughly tested Nevertheless this should help us with merging GUI developments in the future and also provide experimental GUIs to Octave users version 