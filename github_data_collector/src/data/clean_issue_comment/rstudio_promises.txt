Since there is no way to easily retrieve value of fulfilled promise what is the recommended way to debug shiny promises Lets take for example following code libraryshiny libraryshinydashboard libraryglue librarypromises header dashboardHeader title Example Shiny app body dashboardBody fluidRow columnwidth boxwidth NULL solidHeader TRUE shinydateInputdate Date value ui dashboardPage header dashboardSidebardisable TRUE body server functioninput output session data eventReactiveinputdate date inputdate Example year lubridateyeardate Example url glue if direxistsdatacache dircreatedatacache path filepathdatacache paste date csvgz futurefuture if fileexistspath downloadfileurl path readcsvpath coltypes Dticci progress FALSE whales reactive df data countipid arrangedescn headinputcount browser df observe df whales browser shinyAppui ui server server So what do you recommend in debugging scenario where Id like to check result of data countipid Usually in non async app Id put browser and execute data countipid but in this case it returns nothing Browse data countipid Browse and final output as discussed here is not obtainable in easy and recommended way Browse df Promise pending Browse I know it is always possible for debugging needs to rewrite it to normal pipeline without future but still case shown in example is very simple pipeline using Imagine now production app where reactivity and pipelines are much more complex they are written using promises and you have to debug them x Create a GitHub issue for release checklist x Create branch labelled v rc x Change the DESCRIPTION and NEWS on this branch to change the version number to the desired version for CRAN x Rebuild pkgdown docs so they pick up the new version number x Commit and push to the RC branch x Clean your package directory to remove any extraneous files including ones that are gitignored Warning this will delete any unsaved buffers in RStudio Also be sure to close RStudio before taking this step git clean xdf x Build your package I jcheng personally do it from the Mac command line like this PATHPATHApplicationsRStudioappContentsMacOSpandoc R CMD build pkgdir x Do a sanity check by installingtesting the built package x Run R CMD check ascran pkgversiontargz both locally and on winbuilder You can also use x Perform revdepcheck x Read every bullet point in the CRAN Policies document if this is the first release of the package I usually print it out and check off the items one by one x Submit to CRAN via their online form x If there are R CMD check warnings that are unavoidable make sure to explain them in the comments When accepted tag the RC branch with a v tag and push the tag to origin Merge RC into master On master change the package version to Tweetblog In some context it would be useful to be able to block and wait for a promise to be resolved or rejected Typically I want to test with testthat some code that acts on futures or promises so I want to synchronously check that the resolved value is correct The future API offers the value method but it is not implemented by promises I see how you solved this with the extract function in teststestthatcommonR It would be useful to have access to this blocking extract function from the package without confusing the endusers who shouldnt use it How about as a nonexported function such as promisesextractblock or promisesvalue Or maybe it would be neater if testthat was promiseaware with eg expectpromiseresolved and expectpromiserejected In promisemap if the function f returns NULL the value of the fulfilled promise is incorrect Here is a minimal reproducible example r librarypromises testpromisemap functionfirstres secondres f functionindex switchindex firstres secondres promisemap f print testpromisemapanything anythingelse anything anythingelse testpromisemapNULL anythingelse NULL testpromisemapanything NULL anything My guess is the problem is located here When thisvalue is NULL the corresponding element of the results list is removed Heres an app that demonstrates the issue If the observers expression returns a promise then Shiny blocks until that promise is resolved If on the other hand it returns something else then that promise will still run but Shiny wont block waiting for it This is something that both I and aronatkins have run into and it would be helpful if it were better documented in R libraryshiny libraryfuture librarypromises planmultisession server functioninput output messages reactiveVal observeEventinputgo messagesstarting sleep in other session p future Syssleep p thenp functionvalue messagescmessages completed sleep if inputreturnvalue NULL ret NULL else if inputreturnvalue promise ret p ret outputmessages renderText paste messages collapse n ui fluidPage p Returning NULL causes the message to update two times one time immediately and one time after the future and subsequent promise is resolved p Returning a promise causes the message to update only once Shiny blocks until the future and subsequent promise is resolved radioButtonsreturnvalue Return value for observer cNULL promise actionButtongo Go tagspretagscodetextOutputmessages shinyAppui ui server server This works f future aspromisefutureSyssleep cat and prints after about secs as expected This does not work f future futureSyssleep cat the returned promise is stuck in pending I was expectinghoping to see printed after about secs I was playing around with promises and ended up with a promise which used a piped promise more or less like the above in its calculation but it never resolves making the above pattern useless Is this intentional I am new to this so perhaps there are fundamental problems with promises returning promises The first example makes me think it is not so much promises returning promises which seems to be fine in the simple example but promises returning pipes which is kind of strange I am trying to do async for a download button my shiny app The file download takes seconds so i want to run it in background and make the app available for the users in that time I wrapped the download function with future But it does not work as expected script outputReport shinydownloadHandler filename function fileName content functionfile params listorigin inputOrigin destination inputDestination knit the document observeprintparams observeheadflightsData future downloadPptfileName fileName inputParams params filecopyfilepathfilePathfileNamefile The then function gives an error when a nonfunctionable object is passed to it R promiseresolvestart thenthen thenfunctionvalue messagevalue Unhandled promise error Dont know how to convert object of class character into a promise However the then method doesnt give an error Im not sure what its doing R promiseresolvestart thenthen thenfunctionvalue messagevalue start For example this documentation Looks like this Hi when trying to install the promises package I gert the followign error devtoolsinstallgithubrstudiopromises Downloading GitHub repo rstudiopromisesmaster checking for file tmpRtmps Ik gremotes f bb rstudiopromises d f eDESCRIPTION preparing promises checking DESCRIPTION metainformation cleaning src checking for LF lineendings in source and make files and shell scripts checking for empty or unneeded directories building promises targz Installing package into homemknollRx pclinuxgnulibrary as lib is unspecified installing source package promises libs g IusrincludeR DNDEBUG IhomemknollRx pclinuxgnulibrary laterinclude IhomemknollRx pclinuxgnulibrary Rcppinclude DFORTIFYSOURCE fpic marchx mtunegeneric O pipe fstackprotectorstrong fnoplt c RcppExportscpp o RcppExportso g IusrincludeR DNDEBUG IhomemknollRx pclinuxgnulibrary laterinclude IhomemknollRx pclinuxgnulibrary Rcppinclude DFORTIFYSOURCE fpic marchx mtunegeneric O pipe fstackprotectorstrong fnoplt c promisetaskcpp o promisetasko promisetaskcpp Fehler later wurde nicht deklariert class PromiseTask public laterBackgroundTask promisetaskcpp Fehler expected before BackgroundTask class PromiseTask public laterBackgroundTask promisetaskcpp Fehler expected primaryexpression before public public promisetaskcpp Fehler expected before public promisetaskcpp Anmerkung andere Fundstelle von ist hier class PromiseTask public laterBackgroundTask promisetaskcpp Fehler expected unqualifiedid before protected protected promisetaskcpp Fehler virtual au erhalb einer Klassendeklaration virtual RcppRObject getresult promisetaskcpp Fehler Funktion RcppRObject getresult ist wie eine Variable initialisiert virtual RcppRObject getresult promisetaskcpp In Funktion void complete promisetaskcpp Fehler resolve wurde in diesem G ltigkeitsbereich nicht definiert resolveresult promisetaskcpp Anmerkung empfohlene Alternative remove resolveresult remove promisetaskcpp Im globalen G ltigkeitsbereich promisetaskcpp Fehler expected unqualifiedid before private private promisetaskcpp Fehler keine passende Funktion f r Aufruf von RcppFunctionImplRcppPreserveStorageFunctionImpl RcppFunction reject In file included from homemknollRx pclinuxgnulibrary RcppincludeRcpph from promisetaskcpp homemknollRx pclinuxgnulibrary RcppincludeRcppFunctionh Anmerkung candidate RcppFunctionImplStoragePolicyFunctionImplconst string const string mit StoragePolicy RcppPreserveStorage stdcxx string stdcxx basicstringchar FunctionImplconst stdstring name const stdstring ns homemknollRx pclinuxgnulibrary RcppincludeRcppFunctionh Anmerkung Kandidat erwartet Argumente angegeben homemknollRx pclinuxgnulibrary RcppincludeRcppFunctionh Anmerkung candidate RcppFunctionImplStoragePolicyFunctionImplconst string SEXP mit StoragePolicy RcppPreserveStorage stdcxx string stdcxx basicstringchar SEXP SEXPREC FunctionImplconst stdstring name const SEXP env homemknollRx pclinuxgnulibrary RcppincludeRcppFunctionh Anmerkung Kandidat erwartet Argumente angegeben homemknollRx pclinuxgnulibrary RcppincludeRcppFunctionh Anmerkung candidate RcppFunctionImplStoragePolicyFunctionImplconst string mit StoragePolicy RcppPreserveStorage stdcxx string stdcxx basicstringchar FunctionImplconst stdstring name homemknollRx pclinuxgnulibrary RcppincludeRcppFunctionh Anmerkung Kandidat erwartet Argument angegeben homemknollRx pclinuxgnulibrary RcppincludeRcppFunctionh Anmerkung candidate RcppFunctionImplStoragePolicyFunctionImplSEXP mit StoragePolicy RcppPreserveStorage SEXP SEXPREC FunctionImplSEXP x homemknollRx pclinuxgnulibrary RcppincludeRcppFunctionh Anmerkung Kandidat erwartet Argument angegeben In file included from homemknollRx pclinuxgnulibrary RcppincludeRcppmacrosmacrosh from homemknollRx pclinuxgnulibrary RcppincludeRcpprheadersh from homemknollRx pclinuxgnulibrary RcppincludeRcppCommonh from homemknollRx pclinuxgnulibrary RcppincludeRcpph from promisetaskcpp homemknollRx pclinuxgnulibrary RcppincludeRcppFunctionh Anmerkung candidate templateclass Proxy RcppFunctionImplStoragePolicyFunctionImplconst RcppGenericProxyProxy RCPPGENERATECTORASSIGNFunctionImpl homemknollRx pclinuxgnulibrary RcppincludeRcppmacrosinterfaceh Anmerkung in Definition des Makros RCPPCTORASSIGN CLASS const GenericProxyProxy proxy homemknollRx pclinuxgnulibrary RcppincludeRcppFunctionh Anmerkung bei Substitution des Makros RCPPGENERATECTORASSIGN RCPPGENERATECTORASSIGNFunctionImpl homemknollRx pclinuxgnulibrary RcppincludeRcppFunctionh Anmerkung HerleitungErsetzung von Templateargument gescheitert RCPPGENERATECTORASSIGNFunctionImpl homemknollRx pclinuxgnulibrary RcppincludeRcppmacrosinterfaceh Anmerkung in Definition des Makros RCPPCTORASSIGN CLASS const GenericProxyProxy proxy homemknollRx pclinuxgnulibrary RcppincludeRcppFunctionh Anmerkung bei Substitution des Makros RCPPGENERATECTORASSIGN RCPPGENERATECTORASSIGNFunctionImpl promisetaskcpp Anmerkung Kandidat erwartet Argument angegeben RcppFunction reject In file included from homemknollRx pclinuxgnulibrary RcppincludeRcppmacrosmacrosh from homemknollRx pclinuxgnulibrary RcppincludeRcpprheadersh from homemknollRx pclinuxgnulibrary RcppincludeRcppCommonh from homemknollRx pclinuxgnulibrary RcppincludeRcpph from promisetaskcpp homemknollRx pclinuxgnulibrary RcppincludeRcppFunctionh Anmerkung candidate RcppFunctionImplStoragePolicyFunctionImplconst RcppFunctionImplStoragePolicy mit StoragePolicy RcppPreserveStorage RCPPGENERATECTORASSIGNFunctionImpl homemknollRx pclinuxgnulibrary RcppincludeRcppmacrosinterfaceh Anmerkung in Definition des Makros RCPPCTORASSIGN CLASS const CLASS other homemknollRx pclinuxgnulibrary RcppincludeRcppFunctionh Anmerkung bei Substitution des Makros RCPPGENERATECTORASSIGN RCPPGENERATECTORASSIGNFunctionImpl homemknollRx pclinuxgnulibrary RcppincludeRcppFunctionh Anmerkung Kandidat erwartet Argument angegeben RCPPGENERATECTORASSIGNFunctionImpl homemknollRx pclinuxgnulibrary RcppincludeRcppmacrosinterfaceh Anmerkung in Definition des Makros RCPPCTORASSIGN CLASS const CLASS other homemknollRx pclinuxgnulibrary RcppincludeRcppFunctionh Anmerkung bei Substitution des Makros RCPPGENERATECTORASSIGN RCPPGENERATECTORASSIGNFunctionImpl promisetaskcpp Fehler expected declaration before token make usrlib RetcMakeconf promisetasko Fehler ERROR compilation failed for package promises removing homemknollRx pclinuxgnulibrary promises Fehler in ip konvertiert von Warnung installation of package tmpRtmps Ik gfile f e apromises targz had nonzero exit status System Linux archlinux arch ARCH SMP PREEMPT x GNULinux gcc GCC R version Feather Spray 