 Version Vagrant Environment Mac Catalina Scenario Build ubuntu for vmware Steps to Reproduce packer build onlyvmwareiso ubuntu amd json Expected Result A ubuntu running inside vmware Actual Result vmwareiso Failed to enable unit Unit file vmtoolsdservice does not exist Builds finished but no artifacts were created The screenshot Description This modifies some Windows templates r and to add qemu builder This is based on the work of Bob Tanner For example with this PR you can use packer build onlyqemu windows json IMPORTANT You must download the iso image with the Windows drivers for paravirtualized KVMqemu hardware before starting this builder Types of changes Bug fix nonbreaking change which fixes an issue x New feature nonbreaking change which adds functionality Breaking change fix or feature that would cause existing functionality to change x Chore nonbreaking change that does not add functionality or fix an issue Checklist x I have read the CONTRIBUTING document x I have run the premerge tests locally and they pass I have updated the documentation accordingly I have added tests to cover my changes x All new and existing tests passed x All commits have been signedoff for the Developer Certificate of Origin Version master Environment cygwin Scenario Trying to use bento on command line under cygwin fails Steps to Reproduce t L cygdrivecdevbento bundle exec DEVbentobinbento build onlyvirtualboxiso packertemplatesubuntuubuntu amd json Starting build for templates packertemplatesubuntuubuntu amd ubuntu amd Building packer build var headlesstrue onlyvirtualboxiso force varfiletmpubuntu amd metadatajson u ly ubuntu amd json invalid value tmpubuntu amd metadatajson u ly for flag varfile open tmpubuntu amd metadatajson u ly The system cannot find the path specified Usage packer build options TEMPLATE Will execute multiple builds in parallel as defined in the template The various artifacts created by the template will be outputted Options colorfalse Disable color output Default color debug Debug mode enabled for builds exceptfoobarbaz Run all builds and postprocesors other than these onlyfoobarbaz Build only the specified builds force Force a build to continue if artifacts exist deletes existing artifacts machinereadable Produce machinereadable output onerror cleanupabortask If the build fails do clean up default abort or ask parallelfalse Disable parallelization Default true parallelbuilds Number of builds to run in parallel means no limit Default timestampui Enable prefixing of each ui output with an RFC timestamp var keyvalue Variable for templates can be used multiple times varfilepath JSON file containing user variables ubuntu amd Error building exited Expected Result bento builds the box so that I can upload and then publish under my vagrant cloud account Actual Result command fails with ubuntu amd Building packer build var headlesstrue onlyvirtualboxiso force varfiletmpubuntu amd metadatajson u ly ubuntu amd json invalid value tmpubuntu amd metadatajson u ly for flag varfile open tmpubuntu amd metadatajson u ly The system cannot find the path specified Usage packer build options TEMPLATE The next packer version is adding a new disk size convention for qemu builder Simplest solution disksize user disksizeM only in the qemu builder Affected template centos i json centos x json centos i json centos x json centos x json centos x json debian amd json debian i json debian amd json debian i json debian amd json debian i json debian ppc eljson fedora x json fedora x json fedora x json freebsd amd json freebsd i json freebsd amd json freebsd i json hardenedbsd amd json opensuseleap x json oracle i json oracle x json oracle i json oracle x json oracle x json rhel i json rhel x json rhel i json rhel x json rhel x json rhel x json sles sp x json sles sp x json sles sp x json sles sp json sles json ubuntu amd json ubuntu i json ubuntu amd json ubuntu amd json ubuntu amd json Hi The sles json and sles sp json is using an additional iso package but this is only added in the virtualboxiso I was working with qemu and to accomplish this I used this qemuars qemuargs drive filebuildspackeruser templateqemuuser templateifvirtiocachewritebackdiscardignoreformatqcow drive fileuser mirroruser packagesisoformatrawifnoneidcdrom readonlyon device virtioscsipciidscsi device scsicdbusscsi scsiid lun drivecdrom I did this because packer had an issue with additional drivedevice Describe the Enhancement Would like to build a RHEL box but no supplied json Describe the Need Use the CentOS as template Current Alternative Modify RHEL with new arguments Right now we retag the description with the current box metadata being uploaded This means if we build virtualbox and vmware it only lists vmware version information We should list it all If the SDK is missing then the builds dont work We should fail the build with a useful message Version Just cloned Environment Ubuntu Scenario What you are trying to achieve and you cant Building a VMware fedora box Steps to Reproduce Clone repo Cd into fedora directory packer build onlyvmwareiso fedora x json Expected Result No errors Actual Result What actually happens after the reproduction steps m vmwareiso Complete m m vmwareiso Provisioning with shell script commonmotdsh m m vmwareiso Provisioning with shell script commonsshdsh m m vmwareiso Provisioning with shell script commonvirtualboxsh m m vmwareiso Provisioning with shell script commonvmwaresh m m vmwareiso mount tmpvmware WARNING device writeprotected mounted readonly m m vmwareiso VMware Tools Version m m vmwareiso The installer has detected an existing installation of openvmtools packages m m vmwareiso on this system and will not attempt to remove and replace these userspace m m vmwareiso applications It is recommended to use the openvmtools packages provided by m m vmwareiso the operating system If you do not want to use the existing installation of m m vmwareiso openvmtools packages and use VMware Tools you must uninstall the m m vmwareiso openvmtools packages and rerun this installer m m vmwareiso The packages that need to be removed are m m vmwareiso openvmtools m m vmwareiso The installer will next check if there are any missing kernel drivers Type yes m m vmwareiso if you want to do this otherwise type no yes m m vmwareiso INPUT vagrant m m vmwareiso m m vmwareiso The answer vagrant is invalid It must be one of y or n m m vmwareiso m m vmwareiso The installer will next check if there are any missing kernel drivers Type yes m m vmwareiso if you want to do this otherwise type no yes m m vmwareiso INPUT yes default m m vmwareiso m m vmwareiso Creating a new VMware Tools installer database using the tar format m m vmwareiso m m vmwareiso Installing VMware Tools m m vmwareiso m m vmwareiso In which directory do you want to install the binary files m m vmwareiso usrbin m m vmwareiso INPUT usrbin default m m vmwareiso m m vmwareiso What is the directory that contains the init directories rc d to m m vmwareiso rc d m Version e a a e c f d d bc e f Environment DebianUbuntu Scenario The cleanupsh script is trying to remove all dev packages But in current versions of UbuntuDebian dpkg list will contain several packages which end in devamd instead of dev For example libstdc devamd Proposal If the intention of this purge is to remove all devpackages the regex should be expanded to something like this grep dev az This regex will find both dev and different archspecific packages like devmyarch 