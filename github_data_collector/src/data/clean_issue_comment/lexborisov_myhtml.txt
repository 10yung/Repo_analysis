Hi I installed according to the instructions then copied and pasted one of the examples and I get the error below I am compiling with gcc and I am on MacOS Any help is greatly appreciated Undefined symbols for architecture x myhtmlattributeadd referenced from main in hello f beco myhtmlattributebykey referenced from main in hello f beco myhtmlattributedelete referenced from main in hello f beco myhtmlattributevalue referenced from main in hello f beco myhtmlcollectiondestroy referenced from main in hello f beco myhtmlcreate referenced from main in hello f beco myhtmldestroy referenced from main in hello f beco myhtmlgetnodesbyname referenced from main in hello f beco myhtmlinit referenced from main in hello f beco myhtmlparsefragment referenced from main in hello f beco myhtmlserializationtreecallback referenced from main in hello f beco myhtmltreecreate referenced from main in hello f beco myhtmltreedestroy referenced from main in hello f beco myhtmltreegetnodehtml referenced from main in hello f beco myhtmltreeinit referenced from main in hello f beco ld symbols not found for architecture x clang error linker command failed with exit code use v to see invocation When fuzzing the AddressSanitizer hardened callbacktreenodehighlevel we found several vulnerabilitiescrashes due to multithreading A sample proofofcrash poc file zipped is NPErmcharasyncc htmlzip with the error message like AddressSanitizerDEADLYSIGNAL ERROR AddressSanitizer SEGV on unknown address x pc x b bp xcdce adcdcf b sp x ffff fdb T The signal is caused by a READ memory access Hint address points to the zero page x b in mcharasynccachedelete homehongxufuzzingTargetsmyhtmlmyhtmlasansourcemycoreutilsmcharasyncc x in mcharasyncmalloc homehongxufuzzingTargetsmyhtmlmyhtmlasansourcemycoreutilsmcharasyncc x cdb in mycorestringinit homehongxufuzzingTargetsmyhtmlmyhtmlasansourcemycoremystringc x cc in myhtmlparserworker homehongxufuzzingTargetsmyhtmlmyhtmlasansourcemyhtmlparserc x fcf in mythreadfunctionqueuebatch homehongxufuzzingTargetsmyhtmlmyhtmlasansourcemycorethreadqueuec x ffff f da in startthread libx linuxgnulibpthreadso x da x ffff f e in clone buildglibcOTsEL glibc miscsysdepsunixsysvlinuxx cloneS AddressSanitizer can not provide additional info SUMMARY AddressSanitizer SEGV homehongxufuzzingTargetsmyhtmlmyhtmlasansourcemycoreutilsmcharasyncc in mcharasynccachedelete Thread T created by T here x da a in pthreadcreate homehongxufuzzingTargetsmyhtmlmyhtmlasanbinmyhtmlcallbacktreenodehighlevel x da a x f c in mythreadthreadcreate homehongxufuzzingTargetsmyhtmlmyhtmlasansourcemyportposixmycorethreadc ABORTING In case it is not easily reproducible we use the following command bash for i in seq do callbacktreenodehighlevel FILE tmperrormsg grep AddressSanitizer tmperrormsg devnull if eq then cat tmperrormsg echo ni f break fi done We will provide other pocs later I read that one of the things you wanted to support was javascript parsing and DOM changes during processing etc Could you please elaborate or tell me if this was supported in the release I couldnt find javascript whatsoever searching although it may be plausible that I need to check V API and everything will be supported with some glue I just figured Id ask since someone else may read the same information so it cannot hurt I want to disable the automatically applied URL encodings in myhtmlattributeadd To be more specific please check the following example c include myhtmlapih int mainint argc const char argv char html img basic init myhtmlt myhtml myhtmlcreate myhtmlinitmyhtml MyHTMLOPTIONSDEFAULT init tree myhtmltreet tree myhtmltreecreate myhtmltreeinittree myhtml parse html myhtmlparsefragmenttree MyENCODINGUTF html strlenhtml MyHTMLTAGDIV MyHTMLNAMESPACEHTML get first img from index myhtmlcollectiont divlist myhtmlgetnodesbynametree NULL img NULL myhtmltreenodet node divlistlist add an attr const char srcValue customprotocolresourceid nameapple myhtmlattributeaddnode src srcValue strlensrcValue MyENCODINGUTF mycorestringrawt str myhtmlserializationtreebuffermyhtmltreegetdocumenttree str printfs strdata release resources myhtmlcollectiondestroydivlist myhtmltreedestroytree myhtmldestroymyhtml return The output is as follows html htmlimg srccustomprotocolresourceid ampnameappleimghtml As you can see the between id and nameapple was automatically URLencoded which is not what I want I want it to be the same as the one passed by me in other words I want the following result html htmlimg srccustomprotocolresourceid nameappleimghtml Is there anyway to do this When using the parser in MyHTMLOPTIONSPARSEMODESINGLE mode it is initialized in myhtmlinit like this case MyHTMLOPTIONSPARSEMODESINGLE ifstatus myhtmlcreatestreamandbatchmyhtml return status As this call specify that is need stream the myhtmlthreadstream is initialized to NULL myhtmlthreadstream NULL But then when parsing CDATA in myhtmltokenizerstatemarkupdeclarationopen the parser try to call myhtmltreewaitforlastdonetoken which try to access unconditionally treemyhtmlthreadstreamtimespec and obviously it crashes threadstream is NULL Backtrace myhtmltreewaitforlastdonetokentree tokenforwait at treec myhtmltokenizerstatemarkupdeclarationopentree tokennode html htmloffset htmlsize at tokenizerc myhtmltokenizerchunkprocesstree html htmllength at tokenizerc myhtmltokenizerchunktree html htmllength at tokenizerc myhtmltokenizerbegintree html htmllength at tokenizerc myhtmlparsefragmenttree encodingMyENCODINGDEFAULT html at mainc setCMAKEDEBUGPOSTFIX d Hi all There is a redundant check against null issue found by Qihoo CodeSafe Team Details as bellow if strraw is a null pointer function will return and the pointer strraw is dereferenced there is no need to check pointer strraw here Cheers Qihoo CodeSafe Team Environment cmake version vs x The C compiler identification is MSVC The CXX compiler identification is MSVC Check for working C compiler CProgram Files x Microsoft Visual Studio CommunityVCToolsMSVC binHostx x clexe Check for working C compiler CProgram Files x Microsoft Visual Studio CommunityVCToolsMSVC binHostx x clexe works Detecting C compiler ABI info Detecting C compiler ABI info done Detecting C compile features Detecting C compile features done Check for working CXX compiler CProgram Files x Microsoft Visual Studio CommunityVCToolsMSVC binHostx x clexe Check for working CXX compiler CProgram Files x Microsoft Visual Studio CommunityVCToolsMSVC binHostx x clexe works Detecting CXX compiler ABI info Detecting CXX compiler ABI info done Detecting CXX compile features Detecting CXX compile features done Looking for pthreadh Looking for pthreadh not found Found Threads TRUE CMake Error at CMakeListstxt message Could NOT find pthreads missing CMAKEUSEPTHREADSINIT Configuring incomplete errors occurred See also DProjectCmyhtml vs buildCMakeFilesCMakeOutputlog See also DProjectCmyhtml vs buildCMakeFilesCMakeErrorlog program codetestc C include stdioh include stdlibh include myhtmlapih include exampleh struct reshtml char html sizet size struct reshtml loadhtmlfileconst char filename FILE fh fopenfilename rb iffh NULL fprintfstderr Cant open html file s n filename exitEXITFAILURE iffseekfh L SEEKEND fprintfstderr Cant set position fseek in file s n filename exitEXITFAILURE long size ftellfh iffseekfh L SEEKSET fprintfstderr Cant set position fseek in file s n filename exitEXITFAILURE ifsize fprintfstderr Cant get file size or file is empty s n filename exitEXITFAILURE char html charmallocsize ifhtml NULL fprintfstderr Cant allocate mem for html file s n filename exitEXITFAILURE sizet nread freadhtml size fh if nread size fprintfstderr could not read ld bytes MyCOREFMTZ bytes done n size nread exitEXITFAILURE fclosefh struct reshtml res html sizetsize return res int mainint argc const char argv const char path const char pathinsert if argc path argv pathinsert argv else printfBad ARGV nUse serializationhighlevel pathtohtmlfile n exitEXITFAILURE struct reshtml res loadhtmlfilepath struct reshtml resinsert loadhtmlfilepathinsert basic init myhtmlt myhtml myhtmlcreate mystatust status myhtmlinitmyhtml MyHTMLOPTIONSDEFAULT printfstatus d n nstatus init tree myhtmltreet tree myhtmltreecreate myhtmltreeinittree myhtml parse html myhtmlparsetree MyENCODINGUTF reshtml ressize mycorestringrawt strraw mycorestringrawcleanall strraw myhtmltreenodet nodeinsert NULL myhtmlt myhtmlinsert myhtmlcreate myhtmlinitmyhtmlinsert MyHTMLOPTIONSDEFAULT init tree myhtmltreet treeinsert myhtmltreecreate myhtmltreeinittreeinsert myhtmlinsert parse html myhtmlparsetreeinsert MyENCODINGUTF resinserthtml resinsertsize nodeinsert myhtmltreegetnodehtmltreeinsert myhtmltreenodet root myhtmltreegetnodehtmltree myhtmltreenodet nodea myhtmlnodecreatetree MyHTMLTAGDIV MyHTMLNAMESPACEHTML myhtmltreenodeaddchildnodeanodeinsert myhtmlcollectiont collection myhtmlgetnodesbytagidtree NULL MyHTMLTAGFRAMESET NULL printfcollection p length d ncollectioncollectionlength ifcollection collectionlist collectionlength printf n myhtmltreenodet frame collectionlist myhtmltreenodeinsertbeforeframenodea myhtmlnodedeleteframe ifMyHTMLSTATUSOK myhtmlserializationtreebuffermyhtmltreegetdocumenttree strraw printfs strrawdata mycorestringrawdestroy strraw false release resources myhtmltreedestroytree myhtmldestroymyhtml freereshtml return mksh bash gcc testc g o test lmyhtmlstatic lpthread Ihomehaimamyhtmlinclude Lhomehaimamyhtmllib mainhtmlredhtml code mainhtml HTML html langen head meta httpequivContentType contenttexthtmlcharsetutf base targetblank title title head frameset cols frame srcredhtml nameredFrame frameset body test code test code test code body html redhtml html head titleredFrametitle style body backgroundcolor red style head body test content body html run parameter issue description test mainhtml redhtml program crash to myhtmlserializationtreebuffer when deleting the redhtml last line the program is running normally The program crashes when the last action of the html page is commented Hi I am using myhtml to parse following html code HTML html span classc span classsonne titleSonnenscheindauerimg width height srcwhatever img altsun hspan span classregen titleNiederschlagsmengeimg width height srcwhatever img altrain mmspan span html I expect to get the h and mm my understaning of the tree is tagspan class c tag span attrib class attrib title tag img attrib width attrib height attrib src mm I use node span with class c subnode the tags span img and the required text pseudo code C subNode myhtmlnodechildnode while subNode NULL if subNode NULL printfchild of lu s n myhtmlnodetagidnode myhtmlnodetext subNode len subNode myhtmlnodenextsubNode the compete source code is attached as well as the html file I am able to parse eg the tags span classregen the img with its attributes but not the text mm do you havea suggestion 