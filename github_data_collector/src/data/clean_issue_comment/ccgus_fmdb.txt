Good day In my project on objective c crashes began to appear in sqlite on ios and later devices I use the latest version of FMDB standalone Maybe you have ideas what could be the problem EXCBADACCESS columnNameForIndex objectForColumnIndex qL Attempted to dereference garbage pointer x ea sqlite x e sqlite DbFreeNN sqlite c sqlite x releaseMemArray sqlite c sqlite x sqlite VdbeClearObject sqlite c sqlite x c sqlite VdbeDelete sqlite c sqlite x c sqlite VdbeFinalize sqlite c sqlite x c vdbeSafety sqlite c sqlite x c sqlite finalize sqlite c FMDB x d FMStatement close FMDatabasem FMDB x d FMStatement dealloc FMDatabasem FMDB x d FMResultSet close FMResultSetm FMDB x d e FMResultSet nextWithError FMResultSetm GasEngineerSoftware x a e DBConnection fetchRecords DBConnectionm NSMutableArray fetchRecordsNSString query FUNCTIONSTART if LOGSON NSLogSelect Query query NSMutableArray recordArray NSMutableArray array BOOL isExecuted false FMResultSet res db executeQueryquery if res isExecuted true while res next NSInteger cnt res columnCount NSMutableDictionary row NSMutableDictionary dictionary for int i i cnt i row setObject NSString stringWithFormat res objectForColumnIndexi forKey res columnNameForIndexi if row recordArray addObjectrow if isExecuted query self performSelectorInBackgroundselectorsendApplog withObjectApplogQuery query FUNCTIONEND return recordArray executeQuery FMResultSet executeQueryNSStringsql valist args vastartargs sql id result self executeQuerysql withArgumentsInArraynil orDictionarynil orVAListargs vaendargs return result Last Exception Backtrace CoreFoundation x b b c exceptionPreprocess libobjcAdylib x b fa objcexceptionthrow CoreFoundation x b f NSException raiseformat DS x c UmengSignalHandler libsystemplatformdylib x b a sigtramp libsystempthreaddylib x b f pthreadkillVARIANTmp libsystemcdylib x b c abort libcabidylib x b c d abortmessage libcabidylib x b stdterminatevoid libcabidylib x b c stdterminate libdispatchdylib x b dispatchclientcallout libdispatchdylib x b dbc dispatchlanebarriersyncinvokeandcomplete DS x c FMDatabaseQueue inDatabase FMDatabaseQueuem DS x b JKDBModel findByCriteria JKDBModelm DS x a JKDBModel findWithFormat JKDBModelm fmdb please help The crash is quite strange it has no crash report on Xcode or other third part analyze sdks only happens on less than users When it happened it keeps crashing on launchBecause my app updates database on launch users have to reinstall the app after several days it happens again on the same users Its caused by below code When I removed below updating database code or let user delete and recreate the database users said the crashing issue was gone voidupdateFMDBByUpdateIndexJsonIndexItemJson updateIndexJson fmdbFMDatabase db if db open NSLog open failedupdate if updateIndexJson countOfIndexItems return NSArray mangaNameArray updateIndexJson mangaItems valueForKeyKJsonIndexMangaName NSString test for int i i mangaNameArraycount i test test stringByAppendingString stringByAppendingString test test stringByAppendingString test NSString stringWithFormatdelete from mangas where name in test try db executeUpdatetest withArgumentsInArraymangaNameArray catch NSException exception NSLogDelete Rows Error exception name exception reason NSString msg NSString stringWithFormatDelete Rows NSException exception name exception reason finally add update index items to db NSString strCreateTable create table mangas name text author text cover text latest text mJLink text r text rn integer isOn boolean genres text if db executeUpdatestrCreateTable NSLogcreate table failed or table existed if db tableExistsmangas db columnExistsgenres inTableWithNamemangas db executeUpdateALTER TABLE mangas ADD COLUMN genres TEXT db beginTransaction BOOL isRollBack NO try for int i i indexJson countOfIndexItems i NSString name indexJson mangaNameByIndexi NSString author indexJson authorByIndexi NSString cover indexJson coverUrlByIndexi NSString mjlink indexJson mangaJLinkByIndexi NSString rate indexJson rateByIndexi NSNumber rn indexJson rateCountByIndexi NSString latest indexJson latestChByIndexi NSString genres indexJson genresByIndexi NSNumber isOn indexJson isOnByIndexi db executeUpdateinsert into mangas name author cover latest mJLink r rn isOn genres values nameauthorcoverlatestmjlinkraternisOngenres catch NSException exception isRollBack YES db rollback NSString msg NSString stringWithFormatInsert Rows NSException exception name exception reason NSLog msg finally if isRollBack db commit db close Its executed like below BOOLapplicationUIApplication application didFinishLaunchingWithOptionsNSDictionary launchOptions NSSet websiteSet AppDelegate validSourcesFromFav for NSString website in websiteSet dispatchasyncdispatchgetglobalqueueDISPATCHQUEUEPRIORITYDEFAULT NSString updateIndexUrl StaticParameters getUpdateIndexJlinkByWebsitewebsite if updateIndexUrl NSData data Common urlCollectionSynchronousWithRefer StaticParameters getMangaRefer urlupdateIndexUrl IndexItemJson indexJson IndexItemJson alloc initWithData data gunzippedData update database dispatchasync self serialQueue FMDatabase db AppDelegate initDBwebsite if db columnExistsgenres inTableWithNamemangas AppDelegate updateFMDBByUpdateIndexJsonindexJson fmdbdb Using latest version of FMDB didnt fix it and this issue only happens on iOS It cant be fixed for more than one year Hope you guys can help me Thank you very much code selfdatabaseQueue inTransaction FMDatabase Nonnull db BOOL Nonnull rollback NSString sql NSString stringWithFormatUPDATE SET chatsatus ld tabnamestatus BOOL chatResult db executeUpdatesql if chatResult else Error Unknown error calling sqlite step database is locked eu DB Query begin exclusive transaction Unknown error finalizing or resetting statement database is locked DB Query begin exclusive transaction Error calling sqlite step cannot commit no transaction is active SQLITEERROR DB Query commit transaction Unknown error finalizing or resetting statement cannot commit no transaction is active DB Query commit transaction Unknown error calling sqlite step database is locked eu DB Query begin exclusive transaction Unknown error finalizing or resetting statement database is locked DB Query begin exclusive transaction Error calling sqlite step cannot commit no transaction is active SQLITEERROR when use fmdb like this NSString sqlString NSString stringWithFormatSELECT FROM workout where distance and duration and starttime and endtime and userIDd and sport ORDER BY starttime DESC LIMIT userID FMResultSet rs dataBase executeQuerysqlString while rs next there will be crash and location fmdb crash in this function BOOLnextWithErrorNSError outErr crashed in int rc sqlite step statement statement so i am feel uncertained crash in a serial queue background can you tell me how to resolve itThe error like this Crashed iogrowing libsystemplatformdylib x b c c osunfairlockunownedabort libsystemplatformdylib x b c f osunfairlockunlockslow libsqlite dylib x b b f sqlite snprintf libsqlite dylib x b b b sqlite snprintf libsqlite dylib x b b f sqlite vfsfind libsqlite dylib x b b sqlite openv SugarChat x a FMG Database open FMG Databasem SugarChat x d GrowingEventDataBase performDataBaseBlock GrowingEventDataBasem SugarChat x e GrowingEventDataBase flush GrowingEventDataBasem SugarChat x b GrowingEventDataBase setValueforKeyerror GrowingEventDataBasem SugarChat x c GrowingEventManager writeToDBWithEvent GrowingEventManagerm SugarChat x c dc GrowingEventManager handleEvent blockinvoke GrowingEventManagerm libdispatchdylib x b f a dispatchcallblockandrelease libdispatchdylib x b f d dispatchclientcallout libdispatchdylib x b a dispatchlaneserialdrainVARIANTmp libdispatchdylib x b a e dispatchlaneinvokeVARIANTmp libdispatchdylib x b ab ac dispatchworkloopworkerthread libsystempthreaddylib x b da pthreadwqthread libsystempthreaddylib x b dccd startwqthread Is there a way to use the standalone build with Carthage I see instruction for CocoaPods but not carthage Thanks for the help Are there plans for supporting the Swift Package Manager anytime soon XCode Was using pod FMDB without problem but recently need custom build sqlite rather than the one supplied by iOS so changed to pod FMDBstandalone It will not compile now Anything obvious am I missing Thanks When I run XCode Instruments on my app to analyze memory leak I can see that there are quite a lot of KB memory leaks added and that make Memory Usage increase time by time in Activity Monitor The stack trace shows something like this libsystemmallocdylib malloczonemalloc MyApp sqlite MemMalloc projectdirPodsSQLCiphersqlite c MyApp sqlciphermemmalloc projectdirPodsSQLCiphersqlite c MyApp sqlite Malloc projectdirPodsSQLCiphersqlite c MyApp pcache Alloc projectdirPodsSQLCiphersqlite c MyApp pcache FetchStage projectdirPodsSQLCiphersqlite c MyApp pcache FetchWithMutex projectdirPodsSQLCiphersqlite c MyApp pcache Fetch projectdirPodsSQLCiphersqlite c MyApp sqlite PcacheFetch projectdirPodsSQLCiphersqlite c MyApp getPageNormal projectdirPodsSQLCiphersqlite c MyApp sqlite PagerGet projectdirPodsSQLCiphersqlite c MyApp getAndInitPage projectdirPodsSQLCiphersqlite c MyApp moveToLeftmost projectdirPodsSQLCiphersqlite c MyApp sqlite VdbeExec projectdirPodsSQLCiphersqlite c MyApp sqlite step projectdirPodsSQLCiphersqlite c MyApp FMResultSet nextWithError projectdirPodsFMDBsrcfmdbFMResultSetm Does anyone have the same problem and how to fix that Thanks