added new param in Jsoupconnect method in order to connect to IDN This translates the URL to Punycode and at the end return the Document with data Document doc Jsoupconnect if you pass the string to the connect method with the cyrillic url in it ex the jsoup throws the UnknownHostException with the passed link encoded to another encoding Any work arounds When a script content contains a HTML variable with script tags obtained content by Elementhtml is not correct HTML Example scriptvar html scriptconsolelogTestscriptdivExampledivscript The result of calling Jsoupparse is html headhead body scriptvar html scriptconsolelogTestscript div Example div body html Here parser has detected the end script tag inside HTML variable as the end of main script tag And selecting script element the output for html is scriptvar html scriptconsolelogTestscript The expected result is obtain all content scriptvar html scriptconsolelogTestscriptdivExampledivscript adopt amazoncorretto The JVM version above is no longer provided by jabba Recently I want to do a feature to anti XSS using Jsoup Cleaner the requirement is only supports url which starts with http https or dataimage base image I use the following code like whitelistaddProtocolsimg src http https dataimage Jsoupcleanhtml whitelist I found it works well with ordinary urls but removed src attribute which contains base image I look into the source code found that it compare urls in this way urlstartWithprotocolxxxxxx the extra makes dataimage setting not match but if I set it into http https data other data url like datatexthtml scriptalertxssscript would be allowed which is dangerous I have to override the isSafeAttributeString tagName Element el Attribute attr method to implement my requirement Is there any better ideas Given the markup in the example from ruby rbc rb rb rb rb rb rb rbc rtc rtMonthrt rtDayrt rtYearrt rtc rtc rt rbspan Expiration Datert rtc ruby the jsoup parser treats the rtc element as an unknown element that gets closed immediately This causes it to serialize in xml mode as rtcrtcrtMonthrtrtDayrtrtYearrt I have checked the behaviour of Firefox and Chrome and they preserve the rtc element structure eg rtcrtMonthrtrtDayrtrtYearrtrtc The rtc element is supported in the W C HTML spec but not the WHATWG spec Also even though the rbc element is not listed in either of those only in the Ruby Annotations specification the jsoup parser preserves the rbc element structure The following Kotlin script reads and then writes an XML file kotlin usrbinenv kscript fileDependsOnorgjsoupjsoup import javaioFile import orgjsoupJsoup import orgjsoupparserParser val pom JsoupparseFilepomxmlreadText ParserxmlParser pomoutputSettingsprettyPrintfalse FilepomxmlwriteTextpomhtml jsoup seems to keep the formatting comments and even attribute order which is really nice but somehow messes up the root project element as shown by the git diff project xmlns xmlnsxsi xsischemaLocation project xmlns xmlnsxsi xsischemaLocation The original element has a line break after the xmlns attribute but jsoup somehow seems to remove it Any way to keep the linebreak span classcurrentEl span classchildspan span There is no easy way in the Element to find out a number of children available via the method childint The method childNodeSize acts on list of all children while childint acts on the filtered list of the children This trivial patch adds new method childrenCount that is complementary to childint as it works on the same filtered list A unit test is provided My observation Thank you for this wonderful library and for consideration of merging this proposal Version When a css class name contains white spaces at the end the following exception is thrown I am not sure whether white spaces at the end of a class name represent valid css syntax however I have seen it in a real live case Stack Trace and sample files attached bugreportzip Exception in thread main orgjsoupselectSelectorSelectorParseException Could not parse query unexpected token at at orgjsoupselectQueryParserfindElementsQueryParserjava at orgjsoupselectQueryParserparseQueryParserjava at orgjsoupselectQueryParserparseQueryParserjava at orgjsoupselectQueryParsercombinatorQueryParserjava at orgjsoupselectQueryParserparseQueryParserjava at orgjsoupselectQueryParserparseQueryParserjava at orgjsoupselectSelectorselectSelectorjava at orgjsoupnodesElementselectElementjava at JsoupBugmainJsoupBugjava 