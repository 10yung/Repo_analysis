When trying to publish NPM components to a repository registry requiring permissions NPM whoami and publish commands dont seem to work with Nodejs NPM build step Installed version of Nodejs build runner plugin npm commands in Nodejs NPM TeamCity build step config set registry userconfig npmrc config set myregistrymydomaincomapinpmnpmvirtualauthToken NPMTOKEN userconfig npmrc whoami userconfig npmrc publish userconfig npmrc Where NPMTOKEN is a TeamCity Configuration parameter whose value is a user token generated locally by npm login command result is a line in your local npmrc file just keep value after authToken string What I got in TeamCity build log Step npm whoami userconfig npmrc npm whoami userconfig npmrc npm ERR code ENEEDAUTH npm whoami userconfig npmrc npm ERR need auth this command requires you to be logged in npm whoami userconfig npmrc npm ERR need auth You need to authorize this machine using npm adduser npm whoami userconfig npmrc npm whoami userconfig npmrc npm ERR A complete log of this run can be found in npm whoami userconfig npmrc npm ERR homeubuntunpmlogs T Zdebuglog Step Process exited with code Same npm commands in a Command Line build step work fine with same token value Maybe issue with userconfig parameter with Nodejs build runner plugin Thx a lot in advance Regards Samuel I upgraded Teamcity to and now the node plugin appears to be stuck in this state After restarting I get the same issue I have a weird error that I cant resolve I have setup an Ubuntu server I have installed the nodejs latest using nvm and the team city agent latest and this nodejs tc plugin latest I had an older version but it didnt work and so I upgraded to latest and have same error This server is also windows domain joined and the tc agent is running under a domain account named teamcityagent teamcityagent is in sudo group and I installed nvm and nodejs using this account If I log into this account and type nvm version or node version or npm version or anything else using these commands it works but I have a stuck build that is reporting Please add Nodejs NVM Installer build runner and the log is reporting INFO snodeagentNodeToolsDetector Starting process Executionprogramnode arguments version INFO snodeagentNodeToolsDetector node was not found or failed exitcode INFO snodeagentNodeToolsDetector StdOut INFO snodeagentNodeToolsDetector StdErr INFO processesProcessExecutorImpl Starting process Executionprogramnpm arguments version INFO snodeagentNodeToolsDetector npm was not found or failed exitcode INFO snodeagentNodeToolsDetector StdOut INFO snodeagentNodeToolsDetector StdErr I cant figure out why the plugin says it cant detect node or nvm when it is detected and works I had a hard time to figure out that the agent tool archive was inside the teamcity plugin archive Maybe split up those as artifacts and provide two separate download links for the teamcity plugin and the teamcity agent tool Hi do you have any plans in upgrading the NVM version to a later version The current build runner is running on Version v while the latest version is already on v Hi All I am getting following error could someone advise me what could be the root cause Nodejs version used Step Nodejs NVM Installer m s Step Download Fetching NVM m s Download Downloading creatonixnvm Download from Step Failed to start build runner jonnyzzznvm Step orgapachehttpconnHttpHostConnectException Connection to refused at orgapachehttpimplconnDefaultClientConnectionOperatoropenConnectionDefaultClientConnectionOperatorjava at orgapachehttpimplconnManagedClientConnectionImplopenManagedClientConnectionImpljava at orgapachehttpimplclientDefaultRequestDirectortryConnectDefaultRequestDirectorjava at orgapachehttpimplclientDefaultRequestDirectorexecuteDefaultRequestDirectorjava at orgapachehttpimplclientAbstractHttpClientexecuteAbstractHttpClientjava at orgapachehttpimplclientAbstractHttpClientexecuteAbstractHttpClientjava at orgapachehttpimplclientAbstractHttpClientexecuteAbstractHttpClientjava at comjonnyzzzteamcitypluginsnodeagentnvmHttpClientWrapperImplexecuteHttpClientkt at comjonnyzzzteamcitypluginsnodeagentnvmNVMDownloaderdownloadNVMNVMkt at comjonnyzzzteamcitypluginsnodeagentnvmNVMRunnercreateBuildProcessinlinedlogginglambdalambda invokeNVMkt at comjonnyzzzteamcitypluginsnodeagentnvmNVMRunnercreateBuildProcessinlinedlogginglambdalambda invokeNVMkt at comjonnyzzzteamcitypluginsnodeagentprocessesCompositeProcessBuilderImplprocess waitForImplBuildProcessBuilderkt at comjonnyzzzteamcitypluginsnodeagentprocessesBuildProcessBasewaitForBuildProcesskt at comjonnyzzzteamcitypluginsnodeagentprocessesDelegatingBuildProcesswaitForImplBuildProcesskt at comjonnyzzzteamcitypluginsnodeagentprocessesBuildProcessBasewaitForBuildProcesskt at comjonnyzzzteamcitypluginsnodeagentprocessesCompositeBuildProcessImplwaitForImplCompositeBuildProcesskt at comjonnyzzzteamcitypluginsnodeagentprocessesBuildProcessBasewaitForBuildProcesskt at jetbrainsbuildServeragentimplbuildStagesrunnerStagesstartCallRunnerStagedoBuildStageCallRunnerStagejava at jetbrainsbuildServeragentimplbuildStagesRunnerStagesExecutor callStageRunnerStagesExecutorjava at jetbrainsbuildServeragentimplbuildStagesRunnerStagesExecutor callStageRunnerStagesExecutorjava at jetbrainsbuildServeragentimplbuildStagesStagesExecutorcallRunStageStagesExecutorjava at jetbrainsbuildServeragentimplbuildStagesStagesExecutordoStagesStagesExecutorjava at jetbrainsbuildServeragentimplbuildStagesRunnerStagesExecutordoStagesRunnerStagesExecutorjava at jetbrainsbuildServeragentimplbuildStagesstartStagesstepsRunnerContextExecutorcallRunnerStagesRunnerContextExecutorjava at jetbrainsbuildServeragentimplbuildStagesstartStagesstepsStepExecutorprocessNextStepStepExecutorjava at jetbrainsbuildServeragentimplbuildStagesstartStagesstepsForEachBuildRunnerStageexecuteRunnerStepForEachBuildRunnerStagejava at jetbrainsbuildServeragentimplbuildStagesstartStagesstepsForEachBuildRunnerStagerunStepForEachBuildRunnerStagejava at jetbrainsbuildServeragentimplbuildStagesstartStagesstepsForEachBuildRunnerStageexecuteBuildRunnersForEachBuildRunnerStagejava at jetbrainsbuildServeragentimplbuildStagesstartStagesstepsForEachBuildRunnerStagedoBuildStageForEachBuildRunnerStagejava at jetbrainsbuildServeragentimplbuildStagesBuildStagesExecutor callStageBuildStagesExecutorjava at jetbrainsbuildServeragentimplbuildStagesBuildStagesExecutor callStageBuildStagesExecutorjava at jetbrainsbuildServeragentimplbuildStagesStagesExecutorcallRunStageStagesExecutorjava at jetbrainsbuildServeragentimplbuildStagesStagesExecutordoStagesStagesExecutorjava at jetbrainsbuildServeragentimplbuildStagesBuildStagesExecutordoStagesBuildStagesExecutorjava at jetbrainsbuildServeragentimplBuildRunActionImpldoStagesBuildRunActionImpljava at jetbrainsbuildServeragentimplBuildRunActionImplrunBuildBuildRunActionImpljava at jetbrainsbuildServeragentimplBuildAgentImpldoActualBuildBuildAgentImpljava at jetbrainsbuildServeragentimplBuildAgentImplaccess BuildAgentImpljava at jetbrainsbuildServeragentimplBuildAgentImpl runBuildAgentImpljava at javalangThreadrunThreadjava Caused by javanetConnectException Connection timed out at javanetPlainSocketImplsocketConnectNative Method at javanetPlainSocketImpldoConnectPlainSocketImpljava at javanetPlainSocketImplconnectToAddressPlainSocketImpljava at javanetPlainSocketImplconnectPlainSocketImpljava at javanetSocksSocketImplconnectSocksSocketImpljava at javanetSocketconnectSocketjava at comsunnetsslinternalsslSSLSocketImplconnectSSLSocketImpljava at orgapachehttpconnsslSSLSocketFactoryconnectSocketSSLSocketFactoryjava at orgapachehttpimplconnDefaultClientConnectionOperatoropenConnectionDefaultClientConnectionOperatorjava more Step Step Nodejs NVM Installer failed with unexpected error Step integration tests Nodejs NPM Step Build step integration tests Nodejs NPM is skipped because the previous step has failed We generally use the following command to point NPM against a private repo we use artifactory npm config set registry npm login username xxxx password xxxx How do I configure the addin to use this private repo instead of the default JetBrains have a plugins page which they link to directly from TeamCity and I couldnt find this plugin in that list It would be a good idea to be in that library list Would a Working directory like the one for NPM install be possible for gulp runner Right now it always expect gulp to be installed in root of checkout dir which is not always the case Ive uploaded same version I was using successfully with TeamCity build I backed up and restored into TeamCity and now my NPM Install task are failing I cant find a newer version or a specific binary version for TeamCity x though I spent a while looking through the teamcity build server which is linked I cant find any mention on TeamCitys plugin web site Thanks for your help