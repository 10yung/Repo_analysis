I have an Opsworks stack with a Rails layer I need to upgrade Ruby beyond because it is reaching end of life Ruby is now under the state of the security maintenance phase until the end of March of After that date maintenance of Ruby will be ended Given the state of Ruby I dont understand why it is the highest version of Ruby that can be changed to in the Opsworks console but when I reached out to AWS Developer Support they told me to do the upgrade manually So I ran the following commands sudo yum install ruby y sudo alternatives set ruby usrbinruby And now when I run ruby v I get the response ruby p revision x linuxgnu However Im having trouble getting Opsworks to recognize and use this version of Ruby Looking at the Opsworks ruby cookbook and through trial and error I figured out that the attributes that I need to pass in during app deployment are opsworks rubyversion ruby version pkgrelease However deployment fails because Opsworks cant find the rpm file in the S bucket where it looks From the deployment logs T WARN Unsupported Ruby version Unable to set passenger gemspath T WARN Unsupported Ruby version Unable to set passenger gemspath Error executing action install on resource opsworkscommonsassetsinstaller Install user space OpsWorks ruby package ChefExceptionsResourceNotFound Failed to download asset opsworksruby for Install user space OpsWorks ruby package with url The asset is probably not available for your operating system amazon Please have a look what versions are supported for this operating system at Per this page the ruby package should be included So why cant it be found during the deployment process How do I get past this error As you can see Im running Amazon Linux AMI Ruby was released on with new features and performance improvements Please support Ruby x Hello Im using an Ubuntu AMI with OpsWorks howevern after adding an instance it fails with the following error Thu Nov downloader Deleting content of directory tmpopsworksdownloaderj Hux Ak Thu Nov downloader ERROR File size test failed HTTP Forbidden url Thu Nov downloader Retrying download after seconds I am using default cookbooks for a custom layer Has anyone else seen this Hello I can see that log format for ganglia are not wellformed Referer Cookie UserAgent are not considered by Apache Regards PS Im using Chef fix for error T INFO Processing execute passengermodule action run passengerapache default line T INFO Processing bash Enable selinux httpdt for passenger action run passengerapache default line T INFO Processing template etchttpdmodsavailablepassengerload action create passengerapache modrails line T INFO Processing template etchttpdmodsavailablepassengerconf action create passengerapache modrails line T INFO Processing file etchttpdmodsavailablepassengerload action create passengerapache modrails line T INFO Processing execute a enmod passenger action run passengerapache modrails line T INFO Processing execute stop unicorn action run unicornstop line T INFO Processing group apache action create deploydefault line T INFO Processing user deploy action create deploydefault line T INFO Processing package postgresqldevel action install opsworkspostgresqlclientinstall line T WARN package postgresqldevel matched multiple Provides for postgresqldevel but we can only use the first match postgresql devel Please use a more specific version T INFO package postgresqldevel installing postgresql devel amzn from amznupdates repository Error executing action install on resource package postgresqldevel ChefExceptionsExec returned expected Resource Declaration In varlibawsopsworkscachestage cookbooksopsworkspostgresqlrecipesclientinstallrb package pkg do action install end end Compiled Resource Declared in varlibawsopsworkscachestage cookbooksopsworkspostgresqlrecipesclientinstallrb in block in fromfile packagepostgresqldevel do action install retries retrydelay packagename postgresql devel version amzn cookbookname opsworkspostgresql recipename clientinstall end T INFO Running queued delayed notifications before reraising exception T INFO bash logdirexistenceandrestartapache sending restart action to service apache delayed T INFO Processing service apache action restart apache default line T INFO service apache restarted T ERROR Running exception handlers T ERROR Exception handlers complete T FATAL Stacktrace dumped to varlibawsopsworkscachestage chefstacktraceout T ERROR package postgresqldevel opsworkspostgresqlclientinstall line had an error ChefExceptionsExec returned expected T FATAL ChefExceptionsChildConvergeError Chef run process exited unsuccessfully exit code fix for error T INFO Processing execute passengermodule action run passengerapache default line T INFO Processing bash Enable selinux httpdt for passenger action run passengerapache default line T INFO Processing template etchttpdmodsavailablepassengerload action create passengerapache modrails line T INFO Processing template etchttpdmodsavailablepassengerconf action create passengerapache modrails line T INFO Processing file etchttpdmodsavailablepassengerload action create passengerapache modrails line T INFO Processing execute a enmod passenger action run passengerapache modrails line T INFO Processing execute stop unicorn action run unicornstop line T INFO Processing group apache action create deploydefault line T INFO Processing user deploy action create deploydefault line T INFO Processing package postgresqldevel action install opsworkspostgresqlclientinstall line T WARN package postgresqldevel matched multiple Provides for postgresqldevel but we can only use the first match postgresql devel Please use a more specific version T INFO package postgresqldevel installing postgresql devel amzn from amznupdates repository Error executing action install on resource package postgresqldevel ChefExceptionsExec returned expected Resource Declaration In varlibawsopsworkscachestage cookbooksopsworkspostgresqlrecipesclientinstallrb package pkg do action install end end Compiled Resource Declared in varlibawsopsworkscachestage cookbooksopsworkspostgresqlrecipesclientinstallrb in block in fromfile packagepostgresqldevel do action install retries retrydelay packagename postgresql devel version amzn cookbookname opsworkspostgresql recipename clientinstall end T INFO Running queued delayed notifications before reraising exception T INFO bash logdirexistenceandrestartapache sending restart action to service apache delayed T INFO Processing service apache action restart apache default line T INFO service apache restarted T ERROR Running exception handlers T ERROR Exception handlers complete T FATAL Stacktrace dumped to varlibawsopsworkscachestage chefstacktraceout T ERROR package postgresqldevel opsworkspostgresqlclientinstall line had an error ChefExceptionsExec returned expected T FATAL ChefExceptionsChildConvergeError Chef run process exited unsuccessfully exit code This flag is to avoid errors on interactive session on aptget upgrade Ref Example Setting up sudo p ubuntu STDERR debconf unable to initialize frontend Dialog debconf TERM is not set so the dialog frontend is not usable debconf falling back to frontend Readline debconf unable to initialize frontend Readline debconf This frontend requires a controlling tty debconf falling back to frontend Teletype dpkgpreconfigure unable to reopen stdin Configuration file etcsudoers Modified by you or by a script since installation Package distributor has shipped an updated version What would you like to do about it Your options are Y or I install the package maintainers version N or O keep your currentlyinstalled version D show the differences between the versions Z start a shell to examine the situation The default action is to keep your current version sudoers YINODZ defaultN dpkg error processing package sudo configure EOF on stdin at conffile prompt Errors were encountered while processing sudo E Subprocess usrbindpkg returned an error code As seen here It sure would be nice if the request path could be changed through the OpsWorks app configuration instead of needing to create a custom recipe I am using the Nodejs app layer to run the prerender node app but the root path returns a so monit just keeps trying to restart it even though its working fine 