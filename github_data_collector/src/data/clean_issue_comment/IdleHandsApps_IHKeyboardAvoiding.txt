I have got a crash report from Fabric in the library IHKeyboardAvoiding version The stack trace below Fatal Exception NSRangeException CoreFoundation x b c exceptionPreprocess libobjcAdylib x b fc a objcexceptionthrow CoreFoundation x b ee f NSCFString characterAtIndex cold CoreFoundation x b c c NSArrayM objectAtIndexedSubscript IHKeyboardAvoiding x f IHKeyboardAvoiding applicationDidEnterBackground IHKeyboardAvoidingm CoreFoundation x b f c CFNOTIFICATIONCENTERISCALLINGOUTTOANOBSERVER CoreFoundation x b f e CFXRegistrationPost blockinvoke CoreFoundation x b f CFXRegistrationPost CoreFoundation x b f fc CFXNotificationPostblockinvoke CoreFoundation x b f c CFXNotificationRegistrar findobjectobserverenumerator CoreFoundation x b f a c CFXNotificationPost Foundation x b f d NSNotificationCenter postNotificationNameobjectuserInfo UIKitCore x b abd UIApplication applicationDidEnterBackground blockinvoke UIKitCore x b ca da UIViewController performWithoutDeferringTransitionsAllowingAnimationactions UIKitCore x b abb c UIApplication applicationDidEnterBackground UIKitCore x b a c UISceneLifecycleMultiplexer evalTransitionToSettingsfromSettingsforceExitwithTransitionStore blockinvoke UIKitCore x b f ec UIScenePerformActionsWithLifecycleActionMask UIKitCore x b a f UISceneLifecycleMultiplexer evalTransitionToSettingsfromSettingsforceExitwithTransitionStore blockinvoke UIKitCore x b a d UISceneLifecycleMultiplexer performBlockwithApplicationOfDeactivationReasonsfromReasons UIKitCore x b a UISceneLifecycleMultiplexer evalTransitionToSettingsfromSettingsforceExitwithTransitionStore UIKitCore x b a e UISceneLifecycleMultiplexer uiScenetransitionedFromStatewithTransitionContext UIKitCore x b f UIScene invalidate UIKitCore x b ceec UIWindowScene invalidate UIKitCore x b a b UIApplication workspacewillDestroyScenewithTransitionContextcompletion UIKitCore x b e c UIApplicationSceneClientAgent scenewillInvalidateWithEventcompletion FrontBoardServices x b bdc FBSSceneImpl callOutQueueagentwillDestroyWithTransitionContextcompletion FrontBoardServices x b b FBSWorkspaceScenesClient queueinvalidateScenewithTransitionContextcompletion blockinvoke FrontBoardServices x b c f FBSWorkspace calloutQueueexecuteCalloutFromSourcewithBlock FrontBoardServices x b e FBSWorkspaceScenesClient queueinvalidateScenewithTransitionContextcompletion blockinvoke libdispatchdylib x b f dispatchclientcallout libdispatchdylib x b f f dispatchblockinvokedirectVARIANTmp FrontBoardServices x b b FBSSERIALQUEUEISCALLINGOUTTOABLOCK FrontBoardServices x b b c FBSSerialQueue queueperformNextIfPossible FrontBoardServices x b b FBSSerialQueue performNextFromRunLoopSource CoreFoundation x b e CFRUNLOOPISCALLINGOUTTOASOURCE PERFORMFUNCTION CoreFoundation x b CFRunLoopDoSource CoreFoundation x b ed CFRunLoopDoSources CoreFoundation x b c CFRunLoopRun CoreFoundation x b bc CFRunLoopRunSpecific GraphicsServices x bd c GSEventRunModal UIKitCore x b a d UIApplicationMain MyApp x cc main mainm libdylddylib x b b start References Issue The avoidingView was not moving back to the original position after undo typing click Basically the problem is after the undo typing click the keyboardWillChangeFrameNotification observer will be called three times time target to show the keyboard time target to hide the keyboard time target to show the keyboard The third call will be executed bevor the restore state animation from the second call is finished Therefore in the third call all auto location are still saved in updatedConstraints updatedConstraintConstants So we need to wait for the animation to finish and then call didChange with the preserved notification object Hi thanks for this nice little package It helps me a lot as a Swift beginner to just avoid the keyboard problem However I found one little problem In order to subclass a class outside the current module the access level needs to be open Current When a text message is received with an authorization code a suggestions toolbar will appear above the keyboard IHKeyboardAvoiding does not update with this new height from the suggestions toolbar Avoiding view is not pushed further up When the authorization code is consumed the suggestions toolbar disappears and IHKeyboardAvoiding shifts the view down by the suggestions toolbars height Expected IHKeyboardAvoiding updates with this new height from the suggestions toolbar Avoiding view is pushed further up Added KeyboardLockiOSt to the similar solutions There is an issue when switching from keyboard with suggestions on one screen to keyboard without suggestions on another screen avoidview offset is calculated incorrectly and textfiled is placed under keyboard How to reproduce I have created sample project to reproduce this issue Also you can check recorded video Shake Gesture undo typing and click cancel optionthen dimiss keyboardthe view can not back to the original position When the avoiding view height keyboard height is bigger than actual height of screen it crashes Could we anyhow avoid the crash How to reproduce Set a container view with a textfield inside and a bottom constraint from the container to the bottom layout guide in a View Controller Set the container view as the avoiding view Click on the textfield on an iPad while in landscape The keyboard comes up While the keyboard is showing up turn the iPad to portrait While in portrait dismiss the keyboard The view goes down way further than it should seems like the device thinks it is still in landscape mode and tries to lower the view the same distance as if it were in landscape which is greater than in portrait due to less available height If you repeat this process several times ie put in landscape invoke the keyboard turn to portrait the view keeps going lower and lower First sorry for last post did not give the detail information Here is what happen I have a View controller and it has a navigation controller as child view controller and navigation controllers root view controller has a tableview tableview has many cell some of them has textview I want to keyboard not block the textview when user start to enter something i tried KeyboardAvoidingavoidingView textview at textviews delegate but not work textview move up in cells content And now i use KeyboardAvoidingavoidingView tableView its ok but not perfect because child view move up and its parent view still there used a lot space I think may be it is better to have a config can choose which view move up for my case it is better move the parent view or window may be the best And my english is not well hope u can understand 