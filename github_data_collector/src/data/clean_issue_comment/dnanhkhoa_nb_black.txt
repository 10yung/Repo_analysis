In your setuppy these extra quotes break conda builds and are not required I think python yapf pythonversion black pythonversion I think they should be better python yapf pythonversion black pythonversion Maybe you try if your build process works without them I think they should and then you could remove these quotes Just got badly trapped by trying to use labblack when running Jupyter notebook it would be best if this could be done transparently on the plugin side there should be a way to determine if its run inside either I would really like to permanently enable nbblack in Jupyter Notebook but unfortunately when I put cInteractiveShellAppextensions nbblack in my IPython profile I get the output IPythoncoredisplayJavascript object after each line of evaluation in IPython Editing locallibpython sitepackagesjupytercoretestsdotipythonprofiledefaultipythonconfigpy worked as intended but is not a very elegant solution Is there any possibility to specify a IPython profile which should only be used by Jupyter Or maybe make nbblack more agnostic towards IPython so that it only shows effect in Jupyter Notebook nbblack listing a path ending with results in an error ls ERRORrootCannot parse ls Traceback most recent call last File usrlocallibpython distpackageslabblackpy line in formatcell formattedcode formatcodecell File usrlocallibpython distpackageslabblackpy line in formatcode return formatstrsrccontentscode modeFileMode File usrlocallibpython distpackagesblackpy line in formatstr srcnode lib to parsesrccontentslstrip modetargetversions File usrlocallibpython distpackagesblackpy line in lib to parse raise exc from None blackInvalidInput Cannot parse ls And listing a path without ls somethingelse formats the path which shouldnt be the case It seems that black by default deletes trailing semicolons in notebook cells As these are commonly used to suppress the output of the cells this can be a bit annoying Is there any possibility to tell nbblack black to change this behaviour I know that I can just write None in the last line of each python cell but this makes the code kind of ugly Thanks in advance and kind regards Carsten Hi First of all thank you for this extension I plan to use nbblack and Jupyter Notebooks to generate blog posts where code blocks are indented This means I would like to set the line length to ie not the default I would also like to preserve single quote strings a black option Can you indicate where in your code it might be possible to change the default parameters for black Second I am running Jupyter lab Version in an environment as below python version default Dec MSC v bit AMD python environment ac py pandas version current wkg dir C Users donrc Documents JupyterNotebooks OSMNXNotebookProject develop Notebook name Communitiesipynb Notebook run at local time Notebook run at UTC Notebook run on Windows SP IPythoncoredisplayJavascript object You will notice that Jupyterlab displays after each cell execution I assume this is unintended behaviour IPythoncoredisplayJavascript object I am running nbblack as below ac py C Users donrcconda list nbblack packages in environment at D Anaconda envs ac py Name Version Build Channel nbblack py condaforge Now I cant reproduce this behaviour in smaller Notebooks so you may see fit to ignore this until I can Third invoking loadext labblack seems to stick with the notebook Even if you reload the notebook and delete the loadext cell the black formatting is still applied to new cells You may wish to mention that you turn it off by a unloadext labblack call Happy to supply more info if needed Don Cameron