Hi Tim Im working on the stars branch of tmap and trying to get the view mode working I found your handy function addStarsImage Two questions Did you consider to add it to leaflet Or a leafletaddon package It would make sense to me It doesnt work as expected with my dataset tmaps land r librarystars libraryleaflet librarymapview dataland package tmap raster libraryraster leaflet addProviderTilesOpenStreetMap addRasterImagerasterland layer project TRUE stars leaflet addProviderTilesOpenStreetMap addStarsImagestasstarsland band project TRUE The first one overlays the raster image correctly the second one addStarsImage produces this Screenshot from PS Not sure if you know this but is there an easy way to project a stars object from to without loosing the offset and delta columns of the stdimensions instead of the values Hi there I am struggling to overlay several large rasters of mio pixels each I keep getting an error message saying Error in leafletaddRasterImagemap m x x colors pal project FALSE Raster image too large bytes is greater than maximum bytes To overcome the problem I have compressed each raster to Mb and set the mapviewOptions to Inf as recommended on the help page mapviewOptions platform leaflet basemaps CartoDBPositron CartoDBDarkMatter OpenStreetMap EsriWorldImagery OpenTopoMap rastersize Inf mapviewmaxpixels Inf plainviewmaxpixels Inf but nothing works and I keep getting an error message Any hint Thanks Ervan I get the error Error in getReactiveEnvironmentcurrentContext Operation not allowed without an active reactive context You tried to do something that can only be done from inside a reactive expression or observer when using mapview in a Shiny app where the map is based on reactive data Here is an example libraryshiny librarysf librarymapview ui fluidPage sidebarLayoutsidebarPanel selectInput county County Name choices cAll levelsfranconiaNAMEASCI selected All mainPanelmapviewOutputmapPlot server functioninput output fran reactive f franconia if inputcounty All f franconia filterNAMEASCI inputcounty f mapPlot reactive mapviewfran zcol NAMEASCI outputmapPlot renderMapviewmapPlot Run the application shinyAppui ui server server My guess is that the problem is the mapview leafletexpr call in renderMapview because the same example works if converted to use leaflet instead of mapview One fix is to enclose the outputmapPlot in observe However according to this discussion that is not recommended If I have two rasters r and r the following code throws up an error re leaflet not handling the mapview S class mapviewr layername r mapviewr layername r leaflethideGroupgroup r It would be nice however if this functionality were available instead of having to use map to push the leaflet map through the pipe especially as this seems like a common use case On that note it would be really helpful if you all mentioned in your R documentation that layername is sent to the group parameter in the leafletaddRasterImage call That was not obvious and I had to dig through your code to find it Thanks in advance Also mapview is awesome Hi everyone I cant run the example from the manual It creates an empty mappng and returns mapshotm file paste getwd mappng TypeError Attempting to change the setter of an unconfigurable property TypeError Attempting to change the setter of an unconfigurable property here is mappng map Any idea Full code with version and sessionInfo below librarymapview m mapviewbreweries create standalone html mapshotm url paste getwd maphtml create standalone png temporary html is removed automatically unless removeurl FALSE is specified mapshotm file paste getwd mappng TypeError Attempting to change the setter of an unconfigurable property TypeError Attempting to change the setter of an unconfigurable property version platform x pclinuxgnu arch x os linuxgnu system x linuxgnu status major minor year month day svn rev language R versionstring R version nickname Feather Spray sessionInfo R version Platform x pclinuxgnu bit Running under Ubuntu Matrix products default BLAS usrlibx linuxgnuatlaslibblasso LAPACK usrlibx linuxgnuatlasliblapackso locale LCCTYPEenCAUTF LCNUMERICC LCTIMEenCAUTF LCCOLLATEenCAUTF LCMONETARYenCAUTF LCMESSAGESenCAUTF LCPAPERenCAUTF LCNAMEC LCADDRESSC LCTELEPHONEC LCMEASUREMENTenCAUTF LCIDENTIFICATIONC attached base packages stats graphics grDevices utils datasets methods base other attached packages mapview loaded via a namespace and not attached Rcpp RColorBrewer compiler later class base enc tools digest packrat jsonlite viridisLite satellite evaluate lifecycle lattice png rlang shiny DBI crosstalk yaml blogdown xfun fastmap e knitr raster leafletproviders htmlwidgets webshot classInt stats leaflet grid sf R processx rmarkdown bookdown leafpop sp callr magrittr ps units scales promises codetools htmltools mime xtable colorspace httpuv KernSmooth munsell leafem I was wondering if its possible to switch to viewing order of layers created from mapViewrasterStack If I understand correctly it appears that the viewing dominant layer is the bottom most layer in the layer label list For example with libraryplainview libraryraster kilidata systemfileextdata kiliNDVItif package mapview kiliNDVI stackkilidata mapviewx kiliNDVI alpharegions the last raster in the stack kiliNDVI is the topmost viewing raster despite being the bottommost in the layer label list Is it possible to change this so that the topmost in the layer label list kiliNDVI is also the topmost viewable layer I see that this isnt the case though when an object is added to a mapview object as in the vignette example where poppendorf is the bottommost in the layer label list and is also bottommost in viewing dominance libraryplainview mapview object mapviewlistfranconia breweries poppendorf mapview adds automaticaaly homebuttons zoombuttons for included layers Id like to change the standard position of them as it is possible in this function without the necessity of specifying the extents which up until now I did not manage either Is there already a way to do that Hi Tim not sure if this is an issue or the bug is in front of the computer I want to map factor levels to colors in mapview As I am frequently mapping only spatial subsets of my dataset where some factor levels are not present I wanted to make sure to display the correct colors by simply adding a col to the dataset with the color value in it Whereas mapping on the map works fine the legend is incorrect Here is a reprex with the breweries dataset librarymapview librarytidyverse adding some random factor breweries breweries mutateFACT factorsamplex cA B C D size nrowbreweries replace TRUE cols cred green blue orange breweries mapviewzcol FACT colregions cols As I have created four factor levels and defined four colors everything is fine Now if I omit records with factor level D the legend is correct C gets blue whereas records with level C on the map are displayed in orange breweries filterFACT D mapviewzcol FACT colregions cols Appending the colors as a new column to the dataset resolves the problem of the wrong assignment on the map but produces a weird legend breweries breweries mutateCOL cols matchbreweriesFACT cA B C D breweries filterFACT D mapviewzcol FACT colregions COL Here s the session sessionInfo R version Platform x w mingw x bit Running under Windows x build Matrix products default locale LCCOLLATEGermanGermany LCCTYPEGermanGermany LCMONETARYGermanGermany LCNUMERICC LCTIMEGermanGermany attached base packages stats graphics grDevices utils datasets methods base other attached packages forcats stringr dplyr purrr readr tidyr tibble ggplot tidyverse mapview loaded via a namespace and not attached Rcpp lubridate lattice png class assertthat zeallot digest mime cellranger R backports leafpop stats e httr pillar rlang lazyeval readxl rstudioapi raster webshot htmlwidgets munsell shiny broom compiler httpuv modelr pkgconfig base enc htmltools tidyselect codetools viridisLite withr crayon later sf grid nlme jsonlite satellite xtable gtable lifecycle DBI magrittr units scales KernSmooth cli stringi promises leaflet sp xml vctrs generics tools leafem glue hms crosstalk yaml colorspace rvest classInt haven Again if there is overall a better way how to do this feel free to remind me Cheers Hendrik I would be interesting to have a way to colour the points but also set the shape of each point I have a case where it would help a lot to colour the points with a palette but to shape them differently depending on another variable Could this be added Quick note is there a way to add a ggplot graph to mapview Screen Shot at Screen Shot at In order to make mapview a bit nicer to use and more versatile to control on a persession basis were going to refactor the mapviewOptions so they include all relevant arguments passable to mapview At the same time we will only leave the most commonly used arguments in the function definition and pass everything else via This obviously needs some adjustments namely add all possible arguments to mapviewOptions delete all lesser used arguments from function definition see use modifyList to update these options within the mapview call see below provide proper documentation section for deleted arguments now accepted via Other things to tackle in this major refactoring convert internal raster stuff to stars if possible edzer I might pick your brains at some stage for this add support for mapdeck as a rendering platform SymbolixAU dcooley I might pick your brains at some stage for this move remaining functionality to leafem see lbusset I havent forgotten about this slide this or some variant of it should be sufficient r opts mapviewOptions get all potentially user modified options opts modifyListopts list override with whatever was passed via garnishMapmapview opts or whatever function is being called at this stage garnishMap should be able to handle pretty much all cases here incl mapdeck once we allow for it We might need some sort of lookup function to map mapview arguments to leafletmapdeck 