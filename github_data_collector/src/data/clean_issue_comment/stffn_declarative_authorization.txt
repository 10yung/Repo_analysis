We are in the process of migrating to Rails and have done the work to ensure DA continues to work for us Would you consider merging this one It would be great to have a command line that outputs the list of all the roles defined HI incontrollerrb line ish ancestors is the issue ruby protected def filteraccesspermissions nodoc unless filteraccesspermissions ancestors reverseeach do mod modfilteraccesspermissions if modrespondtofilteraccesspermissions true end end classvariablesetdeclarativeauthorizationpermissions unless filteraccesspermissions classvariablegetdeclarativeauthorizationpermissions selfname end This is a recursive method and ancestors appears to be designed to remove the current objects class from the iterator with the assumption that the current object is its own first ancestor eg if ancestors returns ActionControllerBase ActiveRecordRailtiesControllerRuntime removes the first element which is assumed to be the current object in this case ActionControllerBase However this fails if other gem modules eg wickedpdf are designed to prepend to the front of the ancestors chain See Nice Moduleprepend explanation here For example prepend excerpt from the wickedpdf gem ruby class WickedPdf if definedRails if RailsVERSIONMAJOR class WickedRailtie RailsRailtie initializer wickedpdfregister do app ActionControllerBasesend prepend PdfHelper ActionViewBasesend include WickedPdfHelperAssets end end ancestors returns WickedPdfPdfHelper ActionControllerBase ActiveRecordRailtiesControllerRuntime removes the first element in this case the prepended WickedPdfPdfHelper leaving the current object ActionControllerBase in the iterator which causes the infinite loop FIX Replace ruby ancestors reverseeach do mod WITH ruby ancestors self reverseeach do mod Thanks Simon Im using Rails After I install the gem and run rails g authorizationinstall I get the following error Usersblahblahrbenvversions librubygems gemsbundler libbundlerruntimerb in rescue in block levels in require There was an error while trying to load the gem declarativeauthorization Gem Load Error is undefined method hideaction for ActionControllerBaseClass Backtrace for gem load error is Usersblahblahrbenvversions librubygems gemsdeclarativeauthorization libdeclarativeauthorizationincontrollerrb in included Usersblahblahrbenvversions librubygems gemsdeclarativeauthorization libdeclarativeauthorizationrb in include Usersblahblahrbenvversions librubygems gemsdeclarativeauthorization libdeclarativeauthorizationrb in top required Usersblahblahrbenvversions librubygems gemsbundler libbundlerruntimerb in require Usersblahblahrbenvversions librubygems gemsbundler libbundlerruntimerb in block levels in require Usersblahblahrbenvversions librubygems gemsbundler libbundlerruntimerb in each Usersblahblahrbenvversions librubygems gemsbundler libbundlerruntimerb in block in require Usersblahblahrbenvversions librubygems gemsbundler libbundlerruntimerb in each Usersblahblahrbenvversions librubygems gemsbundler libbundlerruntimerb in require Usersblahblahrbenvversions librubygems gemsbundler libbundlerrb in require Let me know if this is something that the maintainers want to fix I would be happy to help with this Without this bundle console will fail on a Gemfile such as this ruby source gem rails gem declarativeauthorization github stffndeclarativeauthorization I reproduced the bug on the following system Ubuntu within docker Rubygems Bundler This method is not more available Youre using sexpprocessor and rubyparser but not declaring dependencies on them Please do so This site is down There is a lot of good documentation in rdoc that is good to be accessible screenshot Add support for testing Rails development testunit isnt provided by Ruby anymore so add that to development dependencies Lock rubyparser to a version thats capable of being used for development and move to development dependencies Ive upgraded from from Rails to Rails and I get the following error on in development mode RuntimeError Circular dependency detected while autoloading constant AuthorizationRulesController What can be wrong Im using declarativeauthorization 