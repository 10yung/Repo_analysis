I have been trying to get CloudKit Subscriptions working basically it doesnt do anything after you attempt to send the invitation I came across this little note in CKSubscriptions Apple doc Overview Note CKQuerySubscription is not supported in a sharedCloudDatabase Can anyone enlighten me andor describe how to get the subscription workflow working Or a least confirm that it does work Many thanks I have a countdown app that allows you to put countdowns into different categories The Category class has a tomany relationship with a Countdown so a countdown can be in more than one category or none When I add a countdown to a category it gets added to the category on other devices as well just as Id expect However removing a countdown from a category doesnt work correctly Removing a countdown from a category triggers a sync On the other device a sync is triggered but the countdown is not removed from the category on the other device Another sync then occurs on the other device which then triggers a sync on the first device The countdown gets readded to the category on the first device Im not sure what Im doing wrong or whats causing this Videos of this happening I didnt make any changes to the code that worked in iOS but now I get the following errors when attempting to sync error error addPersistentStoreWithTypeBinary configurationnull URLfilevarmobileContainersDataApplication D ACBED BAD AAB BA CF BLibraryApplication SupportcommycompanymyappcommentalfacultyensembleseventdatatransitcacheMainStoredownload BF C BCE DA DEE A D A B B A C B DC A Fcdeevent options NSInferMappingModelAutomaticallyOption NSMigratePersistentStoresAutomaticallyOption returned error Error DomainNSCocoaErrorDomain Code The file couldn t be opened because it isn t in the correct format UserInfoNSUnderlyingExceptionCant read binary data from file NSUnderlyingError x c be Error DomainNSCocoaErrorDomain Code The file BF C BCE DA DEE A D A B B A C B DC A Fcdeevent couldn t be opened because it isn t in the correct format UserInfoNSFilePathvarmobileContainersDataApplication D ACBED BAD AAB BA CF BLibraryApplication SupportcommycompanymyappcommentalfacultyensembleseventdatatransitcacheMainStoredownload BF C BCE DA DEE A D A B B A C B DC A Fcdeevent NSUnderlyingExceptionvalue for key NSobjects was of unexpected class CDEPropertyChangeValue Allowed classes are NSDictionaryMapNode NSOrderedSet NSString NSNumber NSArray NSDictionary NSNull NSDate NSSet NSData NSUUID NSDecimalNumber NSURL with userInfo dictionary NSUnderlyingError Error DomainNSCocoaErrorDomain Code The file U c BF C BCE DA DEE A D A B B A C B DC A Fcdeevent U d couldn U t be opened because it isn U t in the correct format UserInfoNSFilePathvarmobileContainersDataApplication D ACBED BAD AAB BA CF BLibraryApplication SupportcommycompanymyappcommentalfacultyensembleseventdatatransitcacheMainStoredownload BF C BCE DA DEE A D A B B A C B DC A Fcdeevent NSUnderlyingExceptionvalue for key NSobjects was of unexpected class CDEPropertyChangeValue Allowed classes are n NSDictionaryMapNode n NSOrderedSet n NSString n NSNumber n NSArray n NSDictionary n NSNull n NSDate n NSSet n NSData n NSUUID n NSDecimalNumber n NSURL n NSUnderlyingException Cant read binary data from file During development I see a very strange error When I insert data into core data its synced perfectly fine If I update some part of the object the title on my Mac though I sometimes see fields becoming nil but only specific ones For me that is the two binary fields I have Even stranger At times I see data from other CoreData objects appearing instead of nil and in a consistent manner so its the preview actual binary data from the same wrong document appearing under the title I just changed All of this strangeness resolves if I remove the app on my phone and reinstall it General logic is the following I subscribe to CDEMonitoredManagedObjectContextDidSave and sync on my Mac On the iOS side I react to CDEICloudFileSystemDidDownloadFiles then trigger the usual merge on the main thread I also implement didSaveMergeChangesWith to update my main context from the delegate callback which I also do in the main thread Logging the notification received shows data not being nil or anything We re just troubleshooting a little problem at the moment and I thought see if I can get some help here on Issues So we ve been getting lots of reports over the past few month of our app which uses Ensembles slowing down dramatically for long term users to the point where the main thread is blocked for minutes on end We ve been looking into it and have discovered that as soon as iCloud sync Ensembles is turned off things speed right up again We set up a data generator that creates a a years worth of data forcing a sync after each piece of data creation This mimics well how long term users would be using the app Here s what we ve found After running the data importer and relaunching the app you get endless printouts of CDERevisionManager CheckModelVersionOfStoredModificationEvents and a big pause with the UI slow At this point our sync indicator is up and takes ages to complete sync up to minutes This is the behaviour for a few runs of the app with sync taking a long time to complete then it miraculously sorts itself out sometimes after leaving the app till the next day other times just leaving it open for a good minutes or so sync is super quick again and all is good again Users are never getting to the point where Ensembles sorts itself out as theyre not going to sit with the app open and frozen for minutes so theyre just abandoning the app which isnt great We re having trouble finding the source or reason for this happening Knowing Ensembles as you do is anything I m describing here ringing any bells for you Cheers Hi Drew My name is Hans I am integrating my app with ensemble Ive already purchased v production version of ensemble I am using webDAV as a cloud service Actually I am running my WebDAV server on my local machine for testing purpose When I run the app first time it gives me CDEErrorDomain Code null And there is no directory creation on the server storage When I run the app second time that error does not occur and the new directoryensemble events created on the server storage Please let me know what is the issue Thanks This ones definitely an enhancementfeature request Have you given any thought to adding Watch Connectivity as a supported backend for Ensembles It would probably behave similarly to Multipeer Connectivity as its also a peertopeer service that supports sending direct messages andor files It also has some niceties like background transfers delivered in order that they were sent Id very much like to handle the error CDEErrorCodecloudIdentityChange as a runtime alert but cannot get any line to work Logic would suggest the following in the completion block func sync completion Void if ensembleisLeeched ensembleleechPersistentStore error in completion else ensemblemerge ensemblemergecompletion error in if error CDEErrorCodecloudIdentityChanged iCloudAlert completion But the if error line returns the message Binary operator cannot be applied to operands of type Error and CDEErrorCode Have tried many variants type casts to no avail Suggestions would be hugely appreciated PS This is Swift with Ensembles v Everything works wonderfully just cant catch this error specifically Ensembles is unable to load its omo on Xcode resulting in completely disabled functionality Firstly it gives the error CoreData annotation Failed to load optimized model at path varcontainersBundleApplication C E DA D B B C D MyAppappCDEEventStoreModelmomdCDEEventStoreModel omo And then we see CoreData error addPersistentStoreWithTypeBinary configurationnull URLfilevarmobileContainersDataApplicationFBE CF EA D EBA B BLibraryApplication SupportcommyappMyAppcommentalfacultyensembleseventdatatransitcacheMyAppSyncdownload E FA B BC C B FD E A EF cdeevent options NSInferMappingModelAutomaticallyOption NSMigratePersistentStoresAutomaticallyOption returned error Error DomainNSCocoaErrorDomain Code The file couldn t be opened because it isn t in the correct format UserInfoNSUnderlyingExceptionCant read binary data from file NSUnderlyingError x c Error DomainNSCocoaErrorDomain Code The file E FA B BC C B FD E A EF cdeevent couldn t be opened because it isn t in the correct format UserInfoNSFilePathvarmobileContainersDataApplicationFBE CF EA D EBA B BLibraryApplication SupportcommyappMyAppcommentalfacultyensembleseventdatatransitcacheMyAppSyncdownload E FA B BC C B FD E A EF cdeevent NSUnderlyingExceptionvalue for key NSobjects was of unexpected class CDEPropertyChangeValue Allowed classes are NSNumber NSUUID NSOrderedSet NSDate NSSet NSDictionary NSNull NSDictionaryMapNode NSData NSArray NSString NSDecimalNumber NSURL with userInfo dictionary NSUnderlyingError Error DomainNSCocoaErrorDomain Code The file U c E FA B BC C B FD E A EF cdeevent U d couldn U t be opened because it isn U t in the correct format UserInfoNSFilePathvarmobileContainersDataApplicationFBE CF EA D EBA B BLibraryApplication SupportcommyappMyAppcommentalfacultyensembleseventdatatransitcacheMyAppSyncdownload E FA B BC C B FD E A EF cdeevent NSUnderlyingExceptionvalue for key NSobjects was of unexpected class CDEPropertyChangeValue Allowed classes are n NSNumber n NSUUID n NSOrderedSet n NSDate n NSSet n NSDictionary n NSNull n NSDictionaryMapNode n NSData n NSArray n NSString n NSDecimalNumber n NSURL n NSUnderlyingException Cant read binary data from file I am not sure how I can proceed here so I wanted to open an issue for this The Ensembles binary framework was not built with the Xcode option Allow app extension API only enabled When the framework is included in another target that may have a extension API only requirement Xcode emits the warning linking against a dylib which is not safe for use in application extensions Please enable this option to eliminate the warning emitted by Xcode 