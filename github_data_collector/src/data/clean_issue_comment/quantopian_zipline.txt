The function getstockdividends shouldnt read from tuple as the order of the columns is not known This lead to errors when upgrading the dependencies to higher releases Adding a dictionary fast to get the id for the each datum is safer I have observed that AppVeyor pipelines time out sometimes even when the changes should clearly not affect the CI process Se how is only updating the README file The only pattern I see is those people opening the PR are not part of Quantopian Could it be that AppVeyor executes the pipelines differently when the PR is opened by a member of the organization Do you Quantopian have a paying AppVeyor account Otherwise I cannot explain the behavior Any other ideas Dear Zipline Maintainers Before I tell you about my issue let me describe my environment Environment details Operating System Windows Version or uname all Python Version python version Python Bitness python c import math sysprintintmathlogsysmaxsize How did you install Zipline pip conda or other please explain Python packages pip freeze or conda list details Now that you know a little about me let me tell you about the issue I am having Description of Issue What did you expect to happen What happened instead Here is how you can reproduce this issue on your machine Reproduction Steps What steps have you taken to resolve this already Anything else Sincerely whoami Background Zipline currently officially supports running on Python and Python These are the Python versions currently available on Quantopian These are both relatively old versions of Python and many Zipline users including users internally at Quantopian would like to be able to use Zipline on more modern versions of Python Supporting newer Python versions is particularly important because Python is no longer supported by the Python Software Foundation and Python will reach end of life in September Wed like to support a range of modern Python versions without dramatically increasing the cost of maintaining Zipline In the short term this probably means adding CI builds for Zipline on and possibly also In the mediumtolong term we need a more sustainable process for adding new Python versions without having to expend a ton of effort This is especially important now that Python has adopted an annual release cadence Challenges Supporting new Python versions is more challenging for Zipline than the average Python project for a few reasons We maintain backwards compatibility for older Python versions so adding support for newer Pythons increases the total range of versions that we need to test package and triage issues for We also maintain backwards compatibility for relatively old versions of NumPy and Pandas At the time of this writing Quantopian supports pandas which was released in May of That version of pandas has a few notable bugs on Python and it doesnt work at all on Python and above due to an issue in Cython Supporting newer versions of Python requires us to also support a larger range of numpy and pandas versions which further increases our maintenance burden We currently build our own conda packages are part of Ziplines Travis and Appveyor builds These package builds take a while and I believe cant be easily updated by nonQuantopian employees which effectively means that only Q employees can work on this Additional Thoughts One of the biggest costs of adding new Python versions is that it adds new entries to the TravisAppveyor build matrices Since the number of workers in these builds are limited adding new entries causes the builds to run in serial which slows down development One promising alternative would be to switch to using Github Actions which provides a pretty generous number of workers for open source projects gmanoimquantopian has prototyped a version of this over in tradingcalendars I think we could replace a lot of the complexity in our TravisAppveyor config with a much simpler Github Actions setup Another big maintenance headache here is building our own conda packages We might benefit from switching to Conda Forge for many of these dependenciesx Dear Zipline Maintainers Before I tell you about my issue let me describe my environment Environment details Operating System Windows Version or uname all Windows SP Python Version python version Python Anaconda Inc Running on Jupyter Lab Python Bitness python c import math sysprintintmathlogsysmaxsize How did you install Zipline pip conda or other please explain conda clean install within env python Python packages pip freeze or conda list packages in environment at C Users Jaepil Anaconda envs finance Name Version Build Channel alembic py quantopian asn crypto py backcall py bcolz np py quantopian blas mkl bleach py blosc h bd a bottleneck py h e ab bzip he cacertificates certifi py cffi py h b da chardet py click py colorama py contextlib post py cryptography py h b da cycler py hcc cyordereddict py quantopian cython py h decorator py defusedxml py empyrical py quantopian entrypoints py freetype ha f hdf hac f iccrt h cc a icu ha f fd idna py inflection py intelopenmp intervaltree py quantopian ipykernel py ipython py ipythongenutils py ha e jedi py jinja py jpeg b hb a c json py jsonschema py h d d jupyterclient py jupytercore py jupyterlab pyhf ae jupyterlabserver py kiwisolver py h libiconv h df libpng h a f b libsodium h d ae libxml h c ec libxslt h f logbook py quantopian lrudict py quantopian lxml py hef cd lz c h fa f lzo h df m w gcclibgfortran m w gcclibs m w gcclibscore m w gmp m w libwinpthreadgit f mako py markupsafe py hfa e cd matplotlib py hd mistune py hfa e cd mkl moreitertools py msys condaepoch multipledispatch py nbconvert py nbformat py h c d networkx py notebook py numexpr np py quantopian numpy py h c openssl u he pandas py h pandasdatareader py pandoc pandocfilters py parso py patsy py pickleshare py h f f pip pypi pypi prometheusclient py prompttoolkit py h c cb pycparser py pygments py pyopenssl py pyparsing py pyqt py h pysocks py pytables py he f python he d pythondateutil py pytz py pywin py hfa e cd pywinpty py pyzmq py hfa e cd qt vc h e a quandl py requests py requestsfile py scipy py hc f send trash py setuptools py simplegeneric py sip py h six py snappy h e sortedcontainers py quantopian sqlalchemy py hfa e cd sqlite he statsmodels py h e ab terminado py testpath py toolz py tornado py hfa e cd tradingcalendars py quantopian traitlets py h b b urllib py vc h ff vs runtime hf eaf b wcwidth py h e d a webencodings py wheel py wininetpton py winunicodeconsole py h b wincertstore py hfebbdb winpty xz h fa f zeromq he d zipline np py quantopian zlib h dcd zstd h b e details Now that you know a little about me let me tell you about the issue I am having Description of Issue What did you expect to happen I expected the custom csv data to be ingested and my data bundle to be registered What happened instead It seems the data bundle has been added to bundle but when I try to ingest it it says theres no such bundle registered Here is how you can reproduce this issue on your machine Reproduction Steps Get AAPL data from yahoo using pandasdatareader import pandas as pd import pandasdatareaderdata as web from ziplineapi import order symbol record from ziplinedatabundles import register from ziplinedatabundlescsvdir import csvdirequities import datetime import matplotlibpyplot as plt import os sys platform start datetimedatetime end datetimedatetime data webDataReaderAAPL yahoo start end Change column names to fit ziplines data format OHLCV dividend split data data Open High Low Adj Close Volume To OHLCV format data datarenamecolumnsOpenopen Highhigh Lowlow Adj Closeclose Volumevolume dataindexnames date data dividend data split datatail open high low close volume dividend split date datahead open high low close volume dividend split date Export it to csv datatocsvAAPLcsv Follow custom csv ingesting tutorial in the documentation then you get an error We ll then want to specify the start and end sessions of our bundle data startsession pdTimestamp tzutc endsession pdTimestamp tzutc AAPLpath osgetcwd AAPLcsv printAAPLpath E VSCodeProjects BOOKpythonalgorithmtrading bitjupyternotes AAPLcsv And then we can register our bundle and pass the location of the directory in which our csv files exist register customcsvdirbundle csvdirequities daily AAPLpath calendarnameNYSE US equities startsessionstartsession endsessionendsession C Users Jaepil Anaconda envs finance lib sitepackages ipykernellauncherpy UserWarning Overwriting bundle with name customcsvdirbundle This is added back by InteractiveShellAppinitpath zipline ingest b customcsvdirbundle Which is equivalent to zipline ingest b Error No bundle registered with the name customcsvdirbundle What steps have you taken to resolve this already I cant understand how my custom bundle could be overwritten which indicates that it has already existed and not have been registered at the same time I searched existing issues and tried this to change C Users Jaepil Anaconda envs finance Lib sitepackages zipline data bundles csvdirpy And so I changed the line from import core as bundles to from ziplinedatabundles import core as bundles the extensionpy doesnt know about the the quandl bundle is referencing because the extension code lives in zipline However it didnt work freddiev seems to have managed to make No bundle issue go away but I didnt even get there Anything else On ziplines official documentation it says Once you have your data in the correct format you can edit your extensionpy file in ziplineextensionpy and import the csvdir bundle along with pandas However it is extremely unclear how I should edit my extensionpy I really could use some help Sincerely whoami jaepilpc jaepil Upgrades knowngood pip version Upgrades to latest setuptools which resolves an error message Uses pip env vars instead of options Removes the need to forward positional args Reduces the number of pip install invocations Lets hold off on merging until were sure this wont break anything downstream Dear Zipline Maintainers Before I tell you about my issue let me describe my environment Environment Operating System Windows Version or uname all uname rvmo amd SMP Debian deb u x GNULinux Python Version python version python version Python Python Bitness python c import math sysprintintmathlogsysmaxsize python c import math sysprintintmathlogsysmaxsize How did you install Zipline pip conda or other please explain pip show zipline Name zipline Version Summary A backtester for financial algorithms Homepage Author Quantopian Inc Authoremail opensourcequantopiancom License Apache Location homejupyterenvlibpython sitepackages Requires numexpr pytz lrudict bcolz multipledispatch sortedcontainers numpy alembic empyrical Mako pythondateutil tables tradingcalendars click intervaltree requestsfile setuptools bottleneck statsmodels Cython cyordereddict networkx patsy pandasdatareader MarkupSafe pandas requests Logbook six toolz pip scipy decorator sqlalchemy contextlib Requiredby Now that you know a little about me let me tell you about the issue I am having Description of Issue ziplinerunalgorithm is failing because internally it calls ziplinedatabenchmarksgetbenchmarkreturns which then tries to fetch some data from the however the site returns Forbidden Example In r requestsget In rstatuscode Out In rreason Out Forbidden Relevant zipline stack trace File homejupyterenvlibpython sitepackagesziplineutilsrunalgopy line in runalgorithm blotterblotter File homejupyterenvlibpython sitepackagesziplineutilsrunalgopy line in run tradingdaystradingcalendarschedule startend index File homejupyterenvlibpython sitepackagesziplinefinancetradingpy line in init selfbmsymbol File homejupyterenvlibpython sitepackagesziplinedataloaderpy line in loadmarketdata environ File homejupyterenvlibpython sitepackagesziplinedataloaderpy line in ensurebenchmarkdata data getbenchmarkreturnssymbol File homejupyterenvlibpython sitepackagesziplinedatabenchmarkspy line in getbenchmarkreturns data rjson File homejupyterenvlibpython sitepackagesrequestsmodelspy line in json return complexjsonloadsselftext kwargs File usrlibpython jsoninitpy line in loads return defaultdecoderdecodes File usrlibpython jsondecoderpy line in decode obj end selfrawdecodes idxws end File usrlibpython jsondecoderpy line in rawdecode raise JSONDecodeErrorExpecting value s errvalue from None jsondecoderJSONDecodeError Expecting value line column char Here is how you can reproduce this issue on your machine In from ziplinedatabenchmarks import getbenchmarkreturns In getbenchmarkreturnsAAPL JSONDecodeError Traceback most recent call last ipythoninput a dcf e f in module getbenchmarkreturnsAAPL envlibpython sitepackagesziplinedatabenchmarkspy in getbenchmarkreturnssymbol data rjson df pdDataFramedata envlibpython sitepackagesrequestsmodelspy in jsonself kwargs used pass return complexjsonloadsselftext kwargs property usrlibpython jsoninitpy in loadss encoding cls objecthook parsefloat parseint parseconstant objectpairshook kw parseint is None and parsefloat is None and parseconstant is None and objectpairshook is None and not kw return defaultdecoderdecodes if cls is None cls JSONDecoder usrlibpython jsondecoderpy in decodeself s w obj end selfrawdecodes idxws end end ws endend if end lens usrlibpython jsondecoderpy in rawdecodeself s idx obj end selfscanonces idx except StopIteration as err raise JSONDecodeErrorExpecting value s errvalue from None return obj end JSONDecodeError Expecting value line column char Importing ABC from collections module was removed in Python collectionsabc can be used for better compatibility Below is a sample instance but there are other places also where this is done and would raise DeprecationWarning before Python Thanks for the library Dear Zipline Maintainers I attempted to use zipline according to the tutorial And I tried to create environment with python and imported zipline but encountered a problem in using the loadext magic which states The zipline module is not an IPython extension loadext zipline The following is my environment Environment conda create n envzipline python activate envzipline conda install c Quantopian zipline conda install ipykernel python m ipykernel install user name envzipline displayname envzipline jupyter notebook details Operating System Windows Python Version python How did you install Zipline conda install c Quantopian zipline Python packages Name Version Build Channel alembic py quantopian asn crypto py backcall py bcolz np py quantopian blas mkl bleach py anaconda blosc h bd a bottleneck py h e ab bzip he cacertificates anaconda certifi py anaconda cffi py h b da chardet py click py colorama py contextlib post py cryptography py h b da cyordereddict py quantopian cython py h decorator py defusedxml py anaconda empyrical py quantopian entrypoints py anaconda hdf hac f iccrt h cc a icu vc vc anaconda idna py intelopenmp intervaltree py quantopian ipykernel py ipython py ipythongenutils py ha e ipywidgets py anaconda jedi py jinja py anaconda jpeg b vc h d e vc anaconda jsonschema py h d d anaconda jupyter py anaconda jupyterclient py jupyterconsole py anaconda jupytercore py libiconv h df libpng vc h vc anaconda libsodium h d ae libxml h c ec libxslt h f logbook py quantopian lrudict py quantopian lxml py hef cd lz c h fa f lzo h df m w gcclibgfortran m w gcclibs m w gcclibscore m w gmp m w libwinpthreadgit f mako py markupsafe py hfa e cd mistune py hfa e cd anaconda mkl msys condaepoch multipledispatch py nbconvert py anaconda nbformat py h c d anaconda networkx py notebook py anaconda numexpr np py quantopian numpy py h c openssl u he anaconda pandas py h pandasdatareader py pandoc anaconda pandocfilters py anaconda parso py patsy py pickleshare py h f f pip py prometheusclient py anaconda prompttoolkit py h c cb pycparser py pygments py pyopenssl py pyqt py anaconda pysocks py pytables py he f python he d pythondateutil py pytz py pywinpty py anaconda pyzmq py hfa e cd qt vc vc anaconda qtconsole py anaconda requests py quantopian requestsfile py scipy py hc f send trash py anaconda setuptools py simplegeneric py sip py h anaconda six py snappy h e sortedcontainers py quantopian sqlalchemy py hfa e cd statsmodels py h e ab terminado py anaconda testpath py anaconda toolz py tornado py hfa e cd tradingcalendars py quantopian traitlets py h b b urllib py vc h ff vs runtime hf eaf b wcwidth py h e d a webencodings py anaconda wheel py widgetsnbextension py anaconda wininetpton py winunicodeconsole py h b wincertstore py hfebbdb winpty anaconda xz h fa f zeromq he d zipline np py quantopian zlib h dcd zstd h b e details Here is how you can reproduce this issue on your machine Reproduction Steps Create the environment as mentioned above in anaconda prompt import zipline loadext zipline What steps have you taken to resolve this already I removed my environment and repeats the steps still got the same result Many thanks for your help Sincerely Felix 