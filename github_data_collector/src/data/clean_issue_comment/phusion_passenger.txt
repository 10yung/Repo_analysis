NOTE GemSpecificationrubyforgeproject is deprecated with no replacement It will be removed on or after NOTE GemSpecificationrubyforgeproject is deprecated with no replacement It will be removed on or after NOTE GemSpecificationrubyforgeproject is deprecated with no replacement It will be removed on or after Issue report When running rails for the first time passenger starts compiling and then fails Both yes and no to the optimisation option result in the build failing The Phusion Passenger agent binary could not be downloaded Compiling it from source instead Checking for required software Checking for C compiler Found yes Location usrbincc Checking for C compiler Found yes Location usrbinc Checking for Rake associated with homelukepicicaurvmgemsruby wrappersruby Found yes Location homelukepicicaurvmgemsruby wrappersrake Checking for Curl development headers with SSL support Found yes curlconfig location usrbincurlconfig Header location usrincludecurlcurlh Version libcurl Usable yes Supports SSL yes Checking for OpenSSL development headers Found yes Location usrincludeopensslsslh Checking for Zlib development headers Found yes Location usrincludezlibh Compile the agent with optimizations Compiling the agent with optimizations will make Phusion Passenger faster but it will take longer to compile and it requires at least GB of memory You have GB memory Compile with optimizations yn y Compiling Phusion Passenger agent ERROR a Rake command failed You can find the full log in tmppassengerinstalllog bzyg Below you can find the last few lines of the commands output Begin command output snippet rake aborted Command failed with status c o tmppassengerinstall suekssupportbinariesWatchdogMaino Isrcagent Isrccxxsupportlib Isrccxxsupportlibvendorcopy Isrccxxsupportlibvendormodified Isrccxxsupportlibvendormodifiedlibev Isrccxxsupportlibvendorcopylibuvinclude Isrccxxsupportlibvendorcopywebsocketpp DREENTRANT Iusrlocalinclude Wall Wextra Wnounusedparameter Wnoparentheses Wpointerarith Wwritestrings Wnolonglong Wnomissingfieldinitializers feliminateunuseddebugsymbols feliminateunuseddebugtypes fvisibilityhidden DVISIBILITYATTRIBUTESUPPORTED Wnoattributes DHASALLOCAH DHAVEACCEPT DHASSFENCE DHASLFENCE DPASSENGERDEBUG DBOOSTDISABLEASSERTS ggdb stdgnu Wnounusedlocaltypedefs Wnoformatnonliteral DHASUNORDEREDMAP c srcagentWatchdogWatchdogMaincpp Full compile log passengerinstalllogb pvftxt Question Passenger version and integration mode gem passenger Question OS or Linux distro platform including version Fedora Question Passenger installation method Your answer x RubyGems Gemfile RubyGems no Gemfile Phusion APT repo Phusion YUM repo OS X Homebrew source tarball Other please specify Question Your apps programming language including any version managers and framework including versions For example Ruby RVM Rails Nodejs with Express Your answer Ruby RVM Rails Question Are you using a PaaS andor containerization If so which one For example Heroku Amazon Container Services Docker with an image based on passengerdocker Your answer no Question Anything else about your setup that we should know Your answer no Issue I can t reinstall Passenger after FreeBSD upgrade Steps I upgraded my test servers from FreeBSD to I followed the official handbook as usual I installed Ruby using RVM The same version has been running before the upgrade It s the latest public version All my Rails gems were installed and Rails tests passed When I try to install Passenger the following happens Note that my systems are as close to the default FreeBSD install as possible I m using the default compilers etc c o buildoutapache modulelibboostoxtboosttssnullo Isrccxxsupportlib Isrccxxsupportlibvendorcopy Isrccxxsupportlibvendormodified fPIC Iusrlocalincludeapr Iusrlocalincludeapr Iusrinclude Iusrlocalinclude Iusrlocalincludedb pipe DLIBICONVPLUG fstackprotectorstrong fnostrictaliasing Iusrlocalincludeapache DREENTRANT Iusrlocalinclude Wall Wextra Wnounusedparameter Wnoparentheses Wpointerarith Wwritestrings Wnolonglong Wnomissingfieldinitializers Wnoambiguousmembertemplate fvisibilityhidden DVISIBILITYATTRIBUTESUPPORTED DHAVEACCEPT DHASSFENCE DHASLFENCE DPASSENGERDEBUG DBOOSTDISABLEASSERTS g fnolimitdebuginfo Wnounusedlocaltypedefs Wnoformatnonliteral DHASUNORDEREDMAP c srccxxsupportlibvendormodifiedboostlibsthreadsrctssnullcpp mkdir p buildoutapache modulelibboostoxtoxt c o buildoutapache modulelibboostoxtoxtsystemcallso Isrccxxsupportlib Isrccxxsupportlibvendorcopy Isrccxxsupportlibvendormodified fPIC Iusrlocalincludeapr Iusrlocalincludeapr Iusrinclude Iusrlocalinclude Iusrlocalincludedb pipe DLIBICONVPLUG fstackprotectorstrong fnostrictaliasing Iusrlocalincludeapache DREENTRANT Iusrlocalinclude Wall Wextra Wnounusedparameter Wnoparentheses Wpointerarith Wwritestrings Wnolonglong Wnomissingfieldinitializers Wnoambiguousmembertemplate fvisibilityhidden DVISIBILITYATTRIBUTESUPPORTED DHAVEACCEPT DHASSFENCE DHASLFENCE DPASSENGERDEBUG DBOOSTDISABLEASSERTS g fnolimitdebuginfo Wnounusedlocaltypedefs Wnoformatnonliteral DHASUNORDEREDMAP c srccxxsupportliboxtsystemcallscpp srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION thisthreadsyscallsinterruptable usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION intrrequested thisthreadinterruptionrequested usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION thisthreadsyscallsinterruptable usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION thisthreadsyscallsinterruptable usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION intrrequested thisthreadinterruptionrequested usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION thisthreadsyscallsinterruptable usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION thisthreadsyscallsinterruptable usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION intrrequested thisthreadinterruptionrequested usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION thisthreadsyscallsinterruptable usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION thisthreadsyscallsinterruptable usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION intrrequested thisthreadinterruptionrequested usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION thisthreadsyscallsinterruptable usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION thisthreadsyscallsinterruptable usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION intrrequested thisthreadinterruptionrequested usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION thisthreadsyscallsinterruptable usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION thisthreadsyscallsinterruptable usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION intrrequested thisthreadinterruptionrequested usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION thisthreadsyscallsinterruptable usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread srccxxsupportliboxtsystemcallscpp error reference to thisthread is ambiguous CHECKINTERRUPTION srccxxsupportliboxtsystemcallscpp note expanded from macro CHECKINTERRUPTION thisthreadsyscallsinterruptable usrincludecv threadingsupport note candidate found by name lookup is std thisthread namespace thisthread srccxxsupportlibvendormodifiedboostthreadpthreadconditionvariablehpp note candidate found by name lookup is boostthisthread namespace thisthread fatal error too many errors emitted stopping now ferrorlimit errors generated rake aborted Command failed with status c o buildoutapache modulelibboostoxtoxtsystemcallso Isrccxxsupportlib Isrccxxsupportlibvendorcopy Isrccxxsupportlibvendormodified fPIC Iusrlocalincludeapr Iusrlocalincludeapr Iusrinclude Iusrlocalinclude Iusrlocalincludedb pipe DLIBICONVPLUG fstackprotectorstrong fnostrictaliasing Iusrlocalincludeapache DREENTRANT Iusrlocalinclude Wall Wextra Wnounusedparameter Wnoparentheses Wpointerarith Wwritestrings Wnolonglong Wnomissingfieldinitializers Wnoambiguousmembertemplate fvisibilityhidden DVISIBILITYATTRIBUTESUPPORTED DHAVEACCEPT DHASSFENCE DHASLFENCE DPASSENGERDEBUG DBOOSTDISABLEASSERTS g fnolimitdebuginfo Wnounusedlocaltypedefs Wnoformatnonliteral DHASUNORDEREDMAP c srccxxsupportliboxtsystemcallscpp usrhomemagervmgemsruby gemspassenger buildsupportcplusplusrb in runcompiler usrhomemagervmgemsruby gemspassenger buildsupportcplusplusrb in compilecxx usrhomemagervmgemsruby gemspassenger buildsupportcplusplusrb in block in definecxxobjectcompilationtask Tasks TOP apache buildoutapache modpassengerso buildoutapache modulelibboostoxta buildoutapache modulelibboostoxtoxtsystemcallso See full trace by running task with trace It looks like something went wrong Please read our documentation for troubleshooting tips If that doesnt help please use our support facilities Well do our best to help you Yes the issue is with Nginxpassenger I have the same configuration running on my local ubuntu Machine but it is not working on the server I am receiving an error or sometimes passengers is not able to spawn the process I have added the backtrace at the bottom Open source Phusion Passenger nginx OS Ubuntu Passenger installation method RubyGems Gemfile RubyGems no Gemfile x Phusion APT repo Phusion YUM repo OS X Homebrew source tarball Other please specify Meteor The app is deployed on VPS and I am not using docker or anything Backtrace in bool PassengerSpawningKitHandshakePerformcheckCurrentState Performh in void PassengerSpawningKitHandshakePerformwaitUntilSpawningFinishedboostuniquelockboostmutex Performh in PassengerSpawningKitResult PassengerSpawningKitHandshakePerformexecute Performh in PassengerSpawningKitResult PassengerSpawningKitDirectSpawnerinternalSpawnconst AppPoolOptions PassengerSpawningKitConfig PassengerSpawningKitHandshakeSession const PassengerJsonValue PassengerSpawningKitJourneyStep DirectSpawnerh in virtual PassengerSpawningKitResult PassengerSpawningKitDirectSpawnerspawnconst AppPoolOptions DirectSpawnerh in void PassengerApplicationPool GroupspawnThreadRealMainconst SpawnerPtr const PassengerApplicationPool Options unsigned int SpawningAndRestartingcpp Issue report Fill in as much as possible so that we can understand find and fix the problem Are you sure this is a bug in Passenger Please read our troubleshooting and debugging guides first Please try with the newest version of Passenger to avoid issues that have already been fixed Question What is the problem Application sends replies only headers without body with http code to client nodejs api is used Client does not get any response from passenger Logs show nothing App output writeProcessing here app tried to send responce App output CheckTaskStatus Creating Virtual Datacenter vdc ee fa e f e ebdb bd e ae Your answer Question Passenger version and integration mode Phusion Passenger opensource nginx integration mode Question OS or Linux distro platform including version Ubuntu LTS Question Passenger installation method Your answer Phusion APT repo Question Your apps programming language including any version managers and framework including versions Nodejs v Your answer Question Are you using a PaaS andor containerization If so which one No just simple vm on Ubuntu We strive for quality and appreciate you taking the time to submit a report Please note that if you want guaranteed response times and priority issue support we encourage you to join our enterprise customer base They also provide us with the means to continue our high level of open source support Yes the issue is with Nginxpassenger I dont see anything wrong with anything but sometimes we receive the following message application did not send a complete response out of nowhere while using the application and when I refresh the same page the page works Open source Phusion Passenger nginx OS Ubuntu Passenger installation method RubyGems Gemfile RubyGems no Gemfile x Phusion APT repo Phusion YUM repo OS X Homebrew source tarball Other please specify Meteor The app is deployed on VPS and I am not using docker or anything Issue report Are you sure this is a bug in Passenger Please read our troubleshooting and debugging guides first Read those guides as well as a lot of docs SO questions Question What is the problem Initially a sufficient amount of instances are started Then after minutes instance count sometimes drops below the PassengerMinInstances count Logs say they are garbage collected What is the expected behavior Passenger instance process count should be at least PassengerMinInstances What is the actual behavior Passenger instance process count drops to PassengerMinInstances How can we reproduce it Please try to provide a sample application or Virtual Machine demonstrating the issue Otherwise if we cant reproduce it we might have to ask you a number of followup questions or run certain commands to try and figure out the problem Feel free to ask questions and to perform additional checkslogs on my live installation It can be reproduced easily Let we have PassengerMinInstances as in config below Apache was restarted at ps before looks good root PassengerAgent watchdog root PassengerAgent core redmine ruby Passenger AppPreloader srvredmine ruby redmine ruby Passenger AppPreloader srvredmine forking ruby redmine ruby Passenger AppPreloader srvredmine forking ruby redmine ruby Passenger AppPreloader srvredmine forking ruby redmine ruby Passenger AppPreloader srvredmine forking ruby redmine ruby Passenger AppPreloader srvredmine forking ruby ps after killing instances root usrlocalsbinhttpd DNOHTTPACCEPT root PassengerAgent watchdog root PassengerAgent core redmine ruby Passenger AppPreloader srvredmine forking ruby redmine ruby Passenger AppPreloader srvredmine forking ruby So instances are killed and there are only two processes for ten minutes at least Also it seems interesting that remaining processes now have as their parent PID not the passenger core Logs dont say anything about detaching them Full log since the start until the problem Logs for this interval D T ageCorAppPooAnalyticsCollectioncpp Collecting system metrics D T ageCorAppPooAnalyticsCollectioncpp Analytics collection done next analytics collection in sec D T ageCorAppPooGarbageCollectioncpp Garbage collection time D T ageCorAppPooGarbageCollectioncpp Garbage collection done next garbage collect in sec D T ageCorAppPooGarbageCollectioncpp Garbage collection time D T ageCorAppPooGarbageCollectioncpp Garbage collect idle process pid groupsrvredmine production groupsrvredmine production D T ageCorAppGroProcessListManagementcpp Detaching process pid groupsrvredmine production N T ageCorCoreMaincpp Checking whether to disconnect longrunning connections for process application srvredmine production D T ageCorAppGroProcessListManagementcpp Starting detached processes checker D T ageCorConTurboCachingh Clearing turbocache D Tc ageCorConTurboCachingh Clearing turbocache D Tb ageCorConTurboCachingh Clearing turbocache D Te ageCorConTurboCachingh Clearing turbocache D T ageCorAppPooGarbageCollectioncpp Garbage collection done next garbage collect in sec D T n ageCorAppGroProcessListManagementcpp Detached process pid groupsrvredmine production has active sessions now Triggering shutdown App output x dc Main thread requesthandlerrb Waiting until all threads have become idle App output x dc Main thread requesthandlerrb There are currently threads App output x dc Main thread requesthandlerrb All threads are now idle App output x dc Main thread requesthandlerrb Stopping all threads App output x f c Worker requesthandlerthreadhandlerrb Thread handler main loop exited normally App output x da HTTP helper worker requesthandlerthreadhandlerrb Thread handler main loop exited normally App output x dc Main thread requesthandlerrb All threads stopped App output x dc Main thread requesthandlerrb Request handler main loop exited normally App output x dc Main thread requesthandlerrb Exiting request handler main loop D T ageCorAppPooGarbageCollectioncpp Garbage collection time D T ageCorAppPooGarbageCollectioncpp Garbage collect idle process pid groupsrvredmine production groupsrvredmine production D T ageCorAppGroProcessListManagementcpp Detaching process pid groupsrvredmine production N T ageCorCoreMaincpp Checking whether to disconnect longrunning connections for process application srvredmine production D T ageCorAppPooGarbageCollectioncpp Garbage collection done next garbage collect in sec D T n ageCorAppGroProcessListManagementcpp Detached process pid groupsrvredmine production has shut down Cleaning up associated resources D T n ageCorAppGroProcessListManagementcpp Detached process pid groupsrvredmine production has active sessions now Triggering shutdown App output x dc Main thread requesthandlerrb Waiting until all threads have become idle App output x dc Main thread requesthandlerrb There are currently threads D T ageCorAppPooGarbageCollectioncpp Garbage collection time D T ageCorAppPooGarbageCollectioncpp Garbage collect idle process pid groupsrvredmine production groupsrvredmine production D T ageCorAppGroProcessListManagementcpp Detaching process pid groupsrvredmine production N T ageCorCoreMaincpp Checking whether to disconnect longrunning connections for process application srvredmine production D T ageCorAppPooGarbageCollectioncpp Garbage collect idle spawner groupsrvredmine production D T ageCorAppPooGarbageCollectioncpp Garbage collection done next garbage collect in sec App output x dc Main thread requesthandlerrb All threads are now idle App output x dc Main thread requesthandlerrb Stopping all threads App output x f Worker requesthandlerthreadhandlerrb Thread handler main loop exited normally App output x d b HTTP helper worker requesthandlerthreadhandlerrb Thread handler main loop exited normally App output x dc Main thread requesthandlerrb All threads stopped App output x dc Main thread requesthandlerrb Request handler main loop exited normally App output x dc Main thread requesthandlerrb Exiting request handler main loop D T n ageCorAppGroProcessListManagementcpp Detached process pid groupsrvredmine production has active sessions now Triggering shutdown App output x dc Main thread requesthandlerrb Waiting until all threads have become idle App output x dc Main thread requesthandlerrb There are currently threads App output x dc Main thread requesthandlerrb All threads are now idle App output x dc Main thread requesthandlerrb Stopping all threads App output x d HTTP helper worker requesthandlerthreadhandlerrb Thread handler main loop exited normally App output x fd Worker requesthandlerthreadhandlerrb Thread handler main loop exited normally App output x dc Main thread requesthandlerrb All threads stopped App output x dc Main thread requesthandlerrb Request handler main loop exited normally App output x dc Main thread requesthandlerrb Exiting request handler main loop D T n ageCorAppGroProcessListManagementcpp Detached process pid groupsrvredmine production has shut down Cleaning up associated resources D T ageCorAppPooGarbageCollectioncpp Garbage collection time D T ageCorAppPooGarbageCollectioncpp Garbage collection done next garbage collect in sec D T n ageCorAppGroProcessListManagementcpp Detached process pid groupsrvredmine production has shut down Cleaning up associated resources D T n ageCorAppGroProcessListManagementcpp Stopping detached processes checker Question Passenger version and integration mode opensource apache module Question OS or Linux distro platform including version FreeBSD RELEASEp GENERIC amd Question Passenger installation method x RubyGems no Gemfile Just gem install passenger Question Your apps programming language including any version managers and framework including versions Ruby rubygems passenger apache Apache FreeBSD OpenSSL afreebsd modfcgid modfastcgimodfastcgiSNAP modwsgi Python PhusionPassenger Question Are you using a PaaS andor containerization If so which one No local installation Question Anything else about your setup that we should know Apache config LoadModule passengermodule usrlocallibrubygems gemspassenger buildoutapache modpassengerso IfModule modpassengerc PassengerRoot usrlocallibrubygems gemspassenger PassengerDefaultRuby usrlocalbinruby IfModule PassengerDisableSecurityUpdateCheck on PassengerMaxPoolSize PassengerMaxRequestQueueSize PassengerMinInstances PassengerPreStart PassengerLogLevel We strive for quality and appreciate you taking the time to submit a report Please note that if you want guaranteed response times and priority issue support we encourage you to join our enterprise customer base They also provide us with the means to continue our high level of open source support Issue report hi Today we had a crash of PassengerAgent during the daily logrotate for apache varlogapache errorlog rotate daily maxsize missingok notifempty compress sharedscripts postrotate binsystemctl reload apache devnull endscript Backtrace Core was generated by Passenger core Program terminated with signal SIGSEGV Segmentation fault x e fd fa in PassengerAgentFundamentalsdumpBacktrace state userData x at srcagentSharedFundamentalsAbortHandlercpp srcagentSharedFundamentalsAbortHandlercpp No such file or directory Current thread is Thread x f d fff LWP gdb bt x e fd fa in PassengerAgentFundamentalsdumpBacktrace state userData x at srcagentSharedFundamentalsAbortHandlercpp x e fc d in PassengerAgentFundamentalsrunInSubprocessWithTimeLimit state callback x e fcd b PassengerAgentFundamentalsdumpBacktracePassengerAgentFundamentalsAbortHandlerWorkingState void userData x timeLimit at srcagentSharedFundamentalsAbortHandlercpp x e fdb in PassengerAgentFundamentalsdumpDiagnostics state at srcagentSharedFundamentalsAbortHandlercpp x e ff in PassengerAgentFundamentalsabortHandler signo info x f d f fb unused x f d f e at srcagentSharedFundamentalsAbortHandlercpp signal handler called x f d b fff in raise from libx linuxgnulibcso x f d b b a in abort from libx linuxgnulibcso x f d ad in gnucxxverboseterminatehandler from usrlibx linuxgnulibstdcso x f d in from usrlibx linuxgnulibstdcso x f d f in from usrlibx linuxgnulibstdcso x f d f dd in gxxpersonalityv from usrlibx linuxgnulibstdcso x f d ed f in from libx linuxgnulibgccsso x f d ed in UnwindResume from libx linuxgnulibgccsso x e a f in PassengerremoveDirTree pathtmppassengerspawnXXXXS B C at srccxxsupportlibFileToolsFileManipcpp x e aba in PassengerSpawningKitHandshakeWorkDirHandshakeWorkDir this x f cdc inchrgoptimized out at srcagentCoreSpawningKitHandshakeWorkDirh x e b f in boostcheckeddeletePassengerSpawningKitHandshakeWorkDir x x f cdc at srccxxsupportlibvendormodifiedboostcorecheckeddeletehpp x e b ed f in boostscopedptrPassengerSpawningKitHandshakeWorkDirscopedptr this x f d f inchrgoptimized out at srccxxsupportlibvendormodifiedboostsmartptrscopedptrhpp x e abae in PassengerSpawningKitHandshakeSessionHandshakeSession this x f d f inchrgoptimized out at srcagentCoreSpawningKitHandshakeSessionh x e ad in PassengerSpawningKitSmartSpawnerspawn this x f d c ca options at srcagentCoreSpawningKitSmartSpawnerh x e c bb in PassengerApplicationPool GroupspawnThreadRealMain this x f d c spawner options restartsInitiated at srcagentCoreApplicationPoolGroupSpawningAndRestartingcpp x e c d in PassengerApplicationPool GroupspawnThreadMain this x f d c self spawner options restartsInitiated at srcagentCoreApplicationPoolGroupSpawningAndRestartingcpp x e c in boostmfimf void PassengerApplicationPool Group boostsharedptrPassengerApplicationPool Group boostsharedptrPassengerSpawningKitSpawner PassengerApplicationPool Options unsigned intoperator this x f d c fa p x f d c a a a a at srccxxsupportlibvendormodifiedboostbindmemfntemplatehpp x e c de in boostbilist boostbivaluePassengerApplicationPool Group boostbivalueboostsharedptrPassengerApplicationPool Group boostbivalueboostsharedptrPassengerSpawningKitSpawner boostbivaluePassengerApplicationPool Options boostbivalueunsigned int operatorboostmfimf void PassengerApplicationPool Group boostsharedptrPassengerApplicationPool Group boostsharedptrPassengerSpawningKitSpawner PassengerApplicationPool Options unsigned int boostbilist this x f d c fb f a at srccxxsupportlibvendormodifiedboostbindbindhpp x e c d in boostbibindtvoid boostmfimf void PassengerApplicationPool Group boostsharedptrPassengerApplicationPool Group boostsharedptrPassengerSpawningKitSpawner PassengerApplicationPool Options unsigned int boostbilist boostbivaluePassengerApplicationPool Group boostbivalueboostsharedptrPassengerApplicationPool Group boostbivalueboostsharedptrPassengerSpawningKitSpawner boostbivaluePassengerApplicationPool Options boostbivalueunsigned int operator this x f d c fa at srccxxsupportlibvendormodifiedboostbindbindhpp x e c in boostdetailfunctionvoidfunctionobjinvoker boostbibindtvoid boostmfimf void PassengerApplicationPool Group boostsharedptrPassengerApplicationPool Group boostsharedptrPassengerSpawningKitSpawner PassengerApplicationPool Options unsigned int boostbilist boostbivaluePassengerApplicationPool Group boostbivalueboostsharedptrPassengerApplicationPool Group boostbivalueboostsharedptrPassengerSpawningKitSpawner boostbivaluePassengerApplicationPool Options boostbivalueunsigned int voidinvoke functionobjptr at srccxxsupportlibvendormodifiedboostfunctionfunctiontemplatehpp x e b c in boostfunction voidoperator this x f d c a at srccxxsupportlibvendormodifiedboostfunctionfunctiontemplatehpp x e aa fb in oxtdynamicthreadgroupthreadmain this x f d c b data x f d c a at srccxxsupportliboxtdynamicthreadgrouphpp x e b cbe in boostmfimf void oxtdynamicthreadgroup oxtdynamicthreadgroupthreadfuncdataoperator this x f cdc e p x f d c b a x f d c a at srccxxsupportlibvendormodifiedboostbindmemfntemplatehpp x e b dde in boostbilist boostbivalueoxtdynamicthreadgroup boostbivalueoxtdynamicthreadgroupthreadfuncdata operatorboostmfimf void oxtdynamicthreadgroup oxtdynamicthreadgroupthreadfuncdata boostbilist this x f cdc f f a at srccxxsupportlibvendormodifiedboostbindbindhpp x e b cbdb in boostbibindtvoid boostmfimf void oxtdynamicthreadgroup oxtdynamicthreadgroupthreadfuncdata boostbilist boostbivalueoxtdynamicthreadgroup boostbivalueoxtdynamicthreadgroupthreadfuncdata operator this x f cdc e at srccxxsupportlibvendormodifiedboostbindbindhpp x e b e in boostdetailfunctionvoidfunctionobjinvoker boostbibindtvoid boostmfimf void oxtdynamicthreadgroup oxtdynamicthreadgroupthreadfuncdata boostbilist boostbivalueoxtdynamicthreadgroup boostbivalueoxtdynamicthreadgroupthreadfuncdata voidinvoke functionobjptr at srccxxsupportlibvendormodifiedboostfunctionfunctiontemplatehpp x e b c in boostfunction voidoperator this x f d f e at srccxxsupportlibvendormodifiedboostfunctionfunctiontemplatehpp x e cd in oxtthreadthreadmainboostfunctionvoid boostsharedptroxtthreadlocalcontext func ctx at srccxxsupportliboxtimplementationcpp x e c in boostbilist boostbivalueboostfunctionvoid boostbivalueboostsharedptroxtthreadlocalcontext operatorvoid boostfunctionvoid boostsharedptroxtthreadlocalcontext boostbilist boostbitypevoid void boostfunctionvoid boostsharedptroxtthreadlocalcontext boostbilist int asynthetic pointer foptimized out thisoptimized out at srccxxsupportlibvendormodifiedboostbindbindhpp boostbibindtvoid void boostfunctionvoid boostsharedptroxtthreadlocalcontext boostbilist boostbivalueboostfunctionvoid boostbivalueboostsharedptroxtthreadlocalcontext operator thisoptimized out at srccxxsupportlibvendormodifiedboostbindbindhpp boostdetailthreaddataboostbibindtvoid void boostfunctionvoid boostsharedptroxtthreadlocalcontext boostbilist boostbivalueboostfunctionvoid boostbivalueboostsharedptroxtthreadlocalcontext run thisoptimized out at srccxxsupportlibvendormodifiedboostthreaddetailthreadhpp x e cc da in boostanonymous namespacethreadproxy param x f d c b at srccxxsupportlibvendormodifiedboostlibsthreadsrcpthreadthreadcpp x f d ba a in startthread from libx linuxgnulibpthreadso x f d c fd f in clone from libx linuxgnulibcso Question Passenger version and integration mode passenger stretch and libapache modpassenger stretch Question OS or Linux distro platform including version Debian Question Passenger installation method x Phusion APT repo Question Your apps programming language including any version managers and framework including versions ruby running redmine Question Are you using a PaaS andor containerization If so which one no