When using drupal inside a docker container it can be useful to make the sitesdefaultfiles directory a symlink instead For example here in the wodby documentation I propose adding a check to islink to prevent errors caused by fsexists not handling symlinks As of the release of Drupal the recommend composer template changed from drupalcomposerdrupalproject to the officially supported drupalrecommendedproject I think this should be indicated in the readme We use dockerproject in our single command rollout of new projects The sitesdefaultfiles directory is created by the ScriptHandler and afterward the sitesdefaultfiles directory is then symlinked by wodby for use with docker This is all working fine the problem comes with the postupdatecmd and postinstallcmd events They are run multiple times during our creation process and createRequiredFiles check if the sitesdefaultfiles directory exists every times Which causes an exception because it doesnt exist it is actually a symlink now I would love to fix this problem and I have come up with solutions Check if directories are symlinks if they dont exist Only run the createRequiredFiles method only in the postcreateprojectcmd event instead of every time How do you feel about this Hello this adjusts code style according to the phpcs and Drupal flavor sh phpcs standardDrupalDrupalPracticePHPCompatibility extensionsphp There is dependencies that are not going to be updated by running composer update drupalcore drupalcoredev withdependencies Some its because the core didnt update them yet But other is just because they are not part of the core Would be so much easier if we can just do a composer update composer outdated Screenshot at The project should not upgrade himself Typically after people have to manually copypast the files SACORE Hello I have been trying to update my website to the newest version of drupal core Composer update works fine but when I run drush updatedb y it gives me a syntax error Any help much appreciated Command prompt output can be seen below C inetpub wwwroot myProject webdrush updatedb y Module Update ID Type Description system hookupdaten Remove pathtemporary config if redundant system hookupdaten Fix systemthemeadmin when the default theme is used as the admin theme system hookupdaten Install the pathalias entity type system hookupdaten Convert path aliases to entities system hookupdaten Change the provider of the pathalias entity type and its base fields locale hookupdaten Clear Locale project storage to use new all instead of x in URLs embed hookupdaten Moved to embedpostupdateconvertencodedicondata embed convertencodedicondata postupdate Convert embed button icons from managed files to encoded data path createlanguagecontentsettings postupdate Create the language content settings configuration object for path aliases search blockpage postupdate Configures default search page for instantiated blocks system entityreferenceautocompletematchlimit postupdate Populate the new matchlimit setting for the ER autocomplete widget system layoutpluginschemachange postupdate Clear the schema cache taxonomy configurestatusfieldwidget postupdate Add status with settings to all form displays for taxonomy entities text addrequiredsummaryflag postupdate Update textwithsummary fields and widgets to add summary required flags views limitoperatordefaults postupdate Define default values for limit operators settings in all filters views removecorekey postupdate Remove core key from views configuration Do you wish to run the specified pending updates yes notice Update started systemupdate notice Update completed systemupdate notice Update started systemupdate notice Update completed systemupdate notice Update started systemupdate notice The pathalias entity type has been installed notice Update completed systemupdate notice Update started systemupdate notice Path aliases have been converted to entities notice Update completed systemupdate notice Update started systemupdate notice Update completed systemupdate notice Update started localeupdate notice Update completed localeupdate notice Update started embedupdate notice Update completed embedupdate notice Update started embedpostupdateconvertencodedicondata notice Update completed embedpostupdateconvertencodedicondata notice Update started pathpostupdatecreatelanguagecontentsettings notice Update completed pathpostupdatecreatelanguagecontentsettings notice Update started searchpostupdateblockpage notice Update completed searchpostupdateblockpage notice Update started systempostupdateentityreferenceautocompletematchlimit notice Update completed systempostupdateentityreferenceautocompletematchlimit notice Update started systempostupdatelayoutpluginschemachange notice Update completed systempostupdatelayoutpluginschemachange notice Update started taxonomypostupdateconfigurestatusfieldwidget notice Update completed taxonomypostupdateconfigurestatusfieldwidget notice Update started textpostupdateaddrequiredsummaryflag notice Update completed textpostupdateaddrequiredsummaryflag notice Update started viewspostupdatelimitoperatordefaults notice Update completed viewspostupdatelimitoperatordefaults notice Update started viewspostupdateremovecorekey notice Update completed viewspostupdateremovecorekey In ProcessBasephp line Unable to decode output into JSON Syntax error system results query null success true type update results query null success true type update results query The pathalias entity type has been installed success true type update results query Path aliases have been converted to entities success true type update results query null success true type update entityreferenceautocompletematchlimit results query null success true type postupdate layoutpluginschemachange results query null success true type postupdate locale results query null success true type update embed results query null success true type update convertencodedicondata results query null success true type postupdate path createlanguagecontentsettings results query null success true type postupdate search blockpage results query null success true type postupdate taxonomy configurestatusfieldwidget results query null success true type postupdate text addrequiredsummaryflag results query null success true type postupdate views limitoperatordefaults results query null success true type postupdate removecorekey results query null success true type postupdate drushbatchprocessfinished true updatedb cacheclear CACHECLEAR entityupdates postupdates POSTUPDATES nocacheclear nopostupdates hhelp qquiet vvvvvvverbose Vversion ansi noansi nnointeraction ddebug yyes no remotehost REMOTEHOST remoteuser REMOTEUSER rroot ROOT luri URI simulate pipe Ddefine DEFINE druplicon notify NOTIFY xhlink XHLINK command Issue Im not entirely sure this issue has anything to do with this composer project or its just a Drupal core issue So if you think its definitely not feel free to close this issue Ive already posted it to drupalstackexchangecom Im using this composer project with the only one modification I freeze Drupal core in composerjson And since the core version has been updated to I get the following errors after installing Drupal from a browser php Uncaught PHP Exception InvalidArgumentException Class Drupal system Controller Http xxController does not exist at varwwwhtmlwebcorelibDrupalCoreDependencyInjectionClassResolverphp line Uncaught PHP Exception InvalidArgumentException No check has been registered for accesscheckpermission at varwwwhtmlwebcorelibDrupalCoreAccessCheckProviderphp line This happens on PHP and latest patches Steps to reproduce Clone Update DRUPALTAG in env to or Run make youll need docker running Give it a few seconds for containers to start Go to drupaldockerlocalhost if youre not on chrome you have to add it to etchosts Install Drupal as usual with a standard profile You should get The website encountered an unexpected error Please try again later after finishing the installation It seems theres something with the dependency injection container because such class within the namespace exists Whats interesting is that this issue does not happen with Drupal core with the same PHP versions Contrib drush packages are intended to be ignored in gitignore but in path drushcontrib Composer installs drush packages into drushCommandscontrib Not sure which one is incorrect but probably gitignore is easier to fix