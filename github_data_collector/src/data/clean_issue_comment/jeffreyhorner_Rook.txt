hello how can i upload multiple file from front end Hi Jeffrey Background and a thank you Ive just started using Rook to create a web interface for a digitizing application I was previously using shiny because I was unaware of Rook but I was basically using shiny just to sendreceive data between the server and R I designed the entire htmljavascript interface myself see the current version here Of course for that shiny is overkill I now realize Rook is sufficient for what I need and will in fact be better because I can access multiple local directories using Filenew eg to load images from the users computer With shiny Ive been having to copy over everything that I want to access to the www folder This is all to say that Rook is a gamechanger for me thank you very much for writing it The code that generates the error Here is the code Im running Rook v R v Safari v that generates the error its a server that provides access to my Downloads folder Ive reduced it down to a near minimal working example with some extra bits to confirm things are working libraryRook tryCatch Rserverstop error functione warning functione Rserver Rhttpdnew Rserveraddapp FilenewUsersaaronDownloads name picdir RserverstartquietTRUE iter Rookapp functionenv iter iter printpaste Rookapp iter request Requestnewenv response Responsenew writeHTMLresponse Rserver responsefinish writeHTML functionresponse server responsewriteform method POST responsewriteinput type submit value Submit name submitbutton Rserveraddapp Rookapp name Rook app RserverbrowseRook app The error When I run this code I periodically get the following error message in the R console Error in appList i subscript out of bounds I dont get the error every time I call the server Sometimes I have to submit a request multiple times or closeopen the server multiple times to get the error Less frequently the error just spontaneously occurs while the server is running with no user interaction The error causes the server to crash so I have to close the browser window and restart This may have something to do with me making the server a global variable But I want to use a global variable so that I can access the server outside the function to stop it Thats why Ive included a Rserverstop command before I start the server in case its still running A solution I tracked down the source of the error to the finalize method of the Rhttpd class Somehow this method is being called while the server is running but when it gets called seems somewhat unpredictable It seems all this method does is remove the apps associated with the server So to solve the issue I wrote a revised Rhttpd class Rhttpd with the finalize method actions commented out Rhttpd is the same as the current version of Rhttpd with the following changes Rhttpd setRefClass Rhttpd finalize function if lengthappList return for i in rev lengthappList removeappList i listenPort suppressMessagestoolsstartDynamicHelpTRUE stop function listenPort suppressMessagestoolsstartDynamicHelpFALSE And here is the revised code that sets up and starts the server assuming the revised Rhttpd above has been loaded libraryRook tryCatch Rserverstop error functione warning functione tryCatch removeRserver error functione warning functione Rserver Rhttpd new Rserveraddapp FilenewUsersaaronDownloads name picdir RserverstartquietTRUE iter Rookapp functionenv iter iter printpaste Rookapp iter request Requestnewenv response Responsenew writeHTMLresponse Rserver responsefinish writeHTML functionresponse server responsewriteform method POST responsewriteinput type submit value Submit name submitbutton Rserveraddapp Rookapp name Rook app RserverbrowseRook app At this point I dont have a need for stopping and restarting the same server So for me when I stop the server Im content to simply remove the entire server and redefine everything when I want to start it up again Thats why Ive also included a removeRserver command after stopping the server This should cover everything that the finalize method was doing previously If the user quits R Im assuming Rserver is also removed so I see no way the server object would stick around I see you havent been developing Rook actively for some time now which is totally OK so I dont necessarily expect a response If you do have a chance to look into this thatd be great But Im also posting here so that if others encounter the same error this will give them an idea of how to find a solution Many thanks Aaron Header names are case insensitive as per eg RFC and Responseheader records them asis This is fine except for ContentType and ContentLength which are treated specially by Rhttpd the treatment fails if the apps choice of capitalization doesnt match Rhttpds eg a Rook app using this fragment R resheaderContenttype applicationjson still leads to the client getting a response with header ContentType texthtml because lookup in Rhttpdhandler is by the differentlycapitalized ContentType I was trying to sent a custom parameter in the request header from java to R which is the transaction ID but the Rook was not able to get the custom request parameters other than the one already present in the environment variable So kindly suggest me the solution for my problem and it would be nice if you provide the facility to add new custom parameter in the environment We re having an issue with Rook handling long GET requests longer than bytes the request doesnt complete resulting in a no response being returned The problem essentially seems equivalent to this nginx issue but there doesnt seem to be anywhere in Rook where that buffersize of is set It appears that the Hmisc example application is no longer working at least in Windows and Example code from RookBuilder r libraryRook s Rhttpdnew libraryHmisc dircreatefilepathtempdirplotsshowWarningsFALSE sadd nameHmisc appBuildernew Staticnew urls ccssimagesjavascript root systemfileexampleAppsHmiscpackageRook Staticnewurlsplotsroottempdir Brewerynew urlbrew root systemfileexampleAppsHmiscpackageRook imagepathfilepathtempdirplots imageurlplots RedirectnewbrewuseR rhtml sstartquietTRUE sbrowseHmisc Opens a browser window to the application And customHmiscbrewuseR rhtml results in The page isnt working with ERRTOOMANYREDIRECTS Chrome browser r sessionInfo R version Platform x w mingw x bit Running under Windows x build locale LCCOLLATEEnglishUnited States LCCTYPEEnglishUnited States LCMONETARYEnglishUnited States LCNUMERICC LCTIMEEnglishUnited States attached base packages stats graphics grDevices utils datasets methods base other attached packages brew Hmisc ggplot Formula survival lattice Rook loaded via a namespace and not attached Rcpp chron grid plyr gtable acepack scales datatable latticeExtra rpart Matrix splines RColorBrewer tools foreign munsell colorspace cluster nnet gridExtra Hi A user of one of my packages emailed me with the following error message Error in greplpaste root url Platformfilesep sep filepath invalid regular expression C Users USER Documents R winlibrary pkg examplebrew reason Invalid back reference This appeared to be caused by Platformfilesep being a backref in regexland when used on Windows ie Platformfilesep is I made a minor change so that there is a char vector substring match instead of a regular expression should be faster too not that it matters Unfortunately I was unable to test whether this fixes the problem dont have a Windows machine handy but it does not break anything in Linux anyway After some number of cookies is set for me about cookies stops returning the truth and starts returning an empty list Test case below Run and hit refresh in your browser until you get Then check that in fact your browser has and is sending the right number of cookies Tested in Firefox and Chrome r libraryRook app function env r RookRequestenv cookies rcookies res RookResponsenew ressetcookiepaste foo sample paste barsample reswritehtmlbody reswritepasteI can see lengthcookies cookies in your last request adding another one with random name and contentbodyhtml resfinish svr Rhttpdnew rhapp RhttpdAppnewnamecookies appapp svraddrhapp requiretools svrstartport Rook packageVersion R version As far as I understand see gWidgetsWWW issue Rook apps can be quite easily manipulated by other users on a multiuser system This makes it possible to run arbitrary R code including system calls with the privileges of the user running the Rook app Would it be possible to add some basic security mechanism to prevent this I guess because Rhttpd now listens only on the loopback still it makes things break 