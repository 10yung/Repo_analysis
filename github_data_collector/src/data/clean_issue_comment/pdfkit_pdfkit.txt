Im getting this error using Rails Not sure if its an issue with my code or if the Gem needs to be updated my DownloadsController class DownloadsController ApplicationController def show respondto do format formatpdf sendauditpdf end end private def auditpdf audit Auditlast Downloadnewaudit end def sendauditpdf sendfile downloadtopdf downloadattributes end def sendauditpdf sendfile auditpdftopdf filename auditpdffilename type applicationpdf disposition inline end end My Download model require renderanywhere class Download include RenderAnywhere def initializeaudit audit audit end def topdf kit PDFKitnewashtml pagesize A kittofileRailsrootpublicauditpdf end def filename audit auditidpdf end private attrreader audit def ashtml byebug render template auditspdf layout auditpdf locals audit audit end end I have a template in auditpdfhtmlerb h Requesth div classflexgrid div classitemscol h Stateh h Time Modifiedh h Licenseh h Accounth h DPPA Reasonh div div classitemscol h audit requeststate h h audit timemodified h h audit requestlicense h h audit account h h audit customersreason h div div and layoutsauditpdfhtmlerb DOCTYPE html html head titleAudit PDFtitle style Railsapplicationassetsfindassetauditpdftos style head body yield body html Ive byebugged myself all the way down and dont appear to be missing any paramsvariables upto tohtml method When passing footerhtml options from application to wkhtmltopdf via pdfkit html html meta namepdfkitfooterhtml content html Pdfkit compose the following command to send to wkhtmltopdf binwkhtmltopdf footerhtml This causes a malformed command to wkhmtltopdf command output You need to specify at least one input file and exactly one output file Use for stdin or stdout Note the command is valid when there is no in command string eg binwkhtmltopdf footerhtml I also read about similar issues being reported such as however those were issues with source url instead of pdfkit options The RubyGems property rubyforgeproject is removed without a replacement I am generating PDF using the method mentioned in wiki I feel since the PDFKit config is modified this is not thread safe I am running sidekiq with concurrency and I already getting mixed output The PDF are generated with the right body content but the header and footer came from another PDF Is there a way to mention headerhtml in an instance variable instead of the constant PDFKit def config PDFKitconfigure do config configwkhtmltopdf usrlocalbinwkhtmltopdf configdefaultoptions encodingUTF dpi margintop marginbottom marginleft marginright headerspacing headerhtml renderheaderfooterheader footerspacing footerhtml renderheaderfooterfooter quiet true userstylesheet Railsrootappassetsstylesheetspdfkitscss end end I have different header and footer for every PDF document generated This PR adds the ability to log the output of wkhtmltopdf and the commands used to a separate logfile Using ie PDFKitconfigure do config configlogfile RailsrootjoinlogpdfkitRailsenvlog end makes the output is no longer read from stderr and injected into the standard webserver logs Update to wkhtmltopdfbinaryedge as wkhtmltopdfbinary gem is deprecated pefkit wkhtmltopdf platform linux import pdfkit pdfkitfromstring x Cscript src x filepath Actual Output Expected Output x Cscript src x in pdf I am not sure whether this issue is solely with wkhtmltopdf or in calling wkhtmltopdf by pdfkit The spec states If the body is replaced by a middleware after action the original body must be closed first if it responds to close However we can see that this does not happen I am getting an error in my Ubuntu OS The error is sh pdf printergenerate The switch footerright is not support using unpatched qt and will be ignoredThe switch footerfontsize is not support using unpatched qt and will be ignoredThe switch footercenter is not support using unpatched qt and will be ignoredThe switch headerhtml is not support using unpatched qt and will be ignoredThe switch headerspacing is not support using unpatched qt and will be ignoredThe switch footerspacing is not support using unpatched qt and will be ignoredwkhtmltopdf cannot connect to X server ErrnoEPIPE Broken pipe from homeinspectionapplicationreleases backendrubyvendorbundleruby gemspdfkit libpdfkitpdfkitrb in write from homeinspectionapplicationreleases backendrubyvendorbundleruby gemspdfkit libpdfkitpdfkitrb in puts from homeinspectionapplicationreleases backendrubyvendorbundleruby gemspdfkit libpdfkitpdfkitrb in block in topdf from homeinspectionapplicationreleases backendrubyvendorbundleruby gemspdfkit libpdfkitpdfkitrb in popen from homeinspectionapplicationreleases backendrubyvendorbundleruby gemspdfkit libpdfkitpdfkitrb in topdf from homeinspectionapplicationreleases backendrubyvendorbundleruby gemspdfkit libpdfkitpdfkitrb in tofile from homeinspectionapplicationreleases backendrubyappservicespdfprinterrb in generate from irb from homeinspectionapplicationreleases backendrubyvendorbundleruby gemsrailties librailscommandsconsolerb in start from homeinspectionapplicationreleases backendrubyvendorbundleruby gemsrailties librailscommandsconsolerb in start from homeinspectionapplicationreleases backendrubyvendorbundleruby gemsrailties librailscommandscommandstasksrb in console from homeinspectionapplicationreleases backendrubyvendorbundleruby gemsrailties librailscommandscommandstasksrb in runcommand from homeinspectionapplicationreleases backendrubyvendorbundleruby gemsrailties librailscommandsrb in top required from binrails in require from binrails in main The version of wkhtmltopdf is as follows sh wkhtmltopdf V Name wkhtmltopdf final License Copyright C wkhtmltopdfwkhtmltoimage Authors License LGPLv GNU Lesser General Public License version or later This is free software you are free to change and redistribute it There is NO WARRANTY to the extent permitted by law I installed wkhtmltopdf as described here Any idea how to fix this