Bumps rack from to details summaryChangelogsummary Sourced from racks changelog Changelog All notable changes to this project will be documented in this file For info on how to format all future additions to this file please reference Keep A Changelog Unreleased Note There are many unreleased changes in Rack master is around commits ahead of stable and below is not an exhaustive list If you would like to help out and document some of the unreleased changes PRs are welcome Added Changed Use Timehttpdate format for Expires as proposed by RFC nanaya Make Utilsstatuscode raise an error when the status symbol is invalid instead of Rename RequestSCHEMEWHITELIST to RequestALLOWEDSCHEMES Make MultipartParsergetfilename accept files with in their name Add Falcon to the default handler fallbacks ioquatix Update codebase to avoid string mutations in preparation for frozenstringliterals pat Change MockRequestenvfor to rely on the input optionally responding to size instead of length janko Rename RackFile RackFiles and add deprecation notice postmodern Removed Documentation Update broken example in SessionAbstractID documentation tonytonyjan Add Padrino to the list of frameworks implmenting Rack wikimatze Remove Mongrel from the suggested server options in the help output tricknotes Replace HISTORYmd and NEWSmd with CHANGELOGmd twitnithegirl Backfill CHANGELOGmd from to releases drenmi Fixed Remove calls to eof on Rack input in MultipartParser as this breaks the specification matthewd Preserve forwarded IP addresses for trusted proxy chains SamSaffron Fixed CVE Reduce buffer size of MultipartParser to avoid pathological parsing tenderlove Fix a call to a nonexisting method acceptshtml in the ShowExceptions middleware tomelm CVE Whitelist HTTP and HTTPS schemes in Requestscheme to prevent a possible XSS attack PatrickTulskie Fixed trtable truncated details details summaryCommitssummary e ee Bumping version f a b Introduce a new base class to avoid breaking when upgrading b cab Add a version prefix to the private id to make easier to migrate old values e e f Fallback to the public id when reading the session in the pool adapter ba d Also drop the session with the public id when destroying sessions a bbf Fallback to the legacy id when the new id is not found dc a Add the private id a f revert conditionals to master e remove NullSession c e b remove raise and get closer to master Additional commits viewable in compare view details br Dependabot compatibility score Dependabot will resolve any conflicts with this PR as long as you dont alter it yourself You can also trigger a rebase manually by commenting dependabot rebase dependabotautomergestart dependabotautomergeend details summaryDependabot commands and optionssummary br You can trigger Dependabot actions by commenting on this PR dependabot rebase will rebase this PR dependabot recreate will recreate this PR overwriting any edits that have been made to it dependabot merge will merge this PR after your CI passes on it dependabot squash and merge will squash and merge this PR after your CI passes on it dependabot cancel merge will cancel a previously requested merge and block automerging dependabot reopen will reopen this PR if it is closed dependabot ignore this patchminormajor version will close this PR and stop Dependabot creating any more for this minormajor version unless you reopen the PR or upgrade to it yourself dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency unless you reopen the PR or upgrade to it yourself dependabot use these labels will set the current labels as the default for future PRs for this repo and language dependabot use these reviewers will set the current reviewers as the default for future PRs for this repo and language dependabot use these assignees will set the current assignees as the default for future PRs for this repo and language dependabot use this milestone will set the current milestone as the default for future PRs for this repo and language You can disable automated security fix PRs for this repo from the Security Alerts page details Bumps loofah from to details summaryRelease notessummary Sourced from loofahs releases Security Address CVE Unsanitized JavaScript may occur in sanitized output when a crafted SVG element is republished This CVEs public notice is at flavorjonesloofah Features Expand set of allowed protocols to include tel and line Expand set of allowed CSS functions related to Allow greater precision in shorthand CSS values Thanks danfstucky Allow CSS property liststyle Thanks jaredbeck Allow CSS keywords thick and thin Thanks georgeclaghorn Allow HTML property contenteditable Thanks andreynering Bug fixes CSS hex values are no longer limited to lowercase hex Previously uppercase hex were scrubbed Thanks asok Deprecations Name Changes The following method and constants are hereby deprecated and will be completely removed in a future release Deprecate LoofahHelpersActionViewwhitelistsanitizer please use LoofahHelpersActionViewsafelistsanitizer instead Deprecate LoofahHelpersActionViewWhiteListSanitizer please use LoofahHelpersActionViewSafeListSanitizer instead Deprecate LoofahHTML WhiteList please use LoofahHTML SafeList instead Thanks to JuanitoFatas for submitting these changes in and for making the language used in Loofah more inclusive v Notably this release addresses CVE v Make public LoofahHTML Scrubforcecorrectattributeescaping which was previously a private method This is so that downstream gems like railshtmlsanitizer can use this logic directly for their own attribute scrubbers should they need to address CVE details details summaryChangelogsummary Sourced from loofahs changelog Security Address CVE Unsanitized JavaScript may occur in sanitized output when a crafted SVG element is republished This CVEs public notice is at flavorjonesloofah Features Expand set of allowed protocols to include tel and line Expand set of allowed CSS functions related to Allow greater precision in shorthand CSS values Thanks danfstucky Allow CSS property liststyle Thanks jaredbeck Allow CSS keywords thick and thin Thanks georgeclaghorn Allow HTML property contenteditable Thanks andreynering Bug fixes CSS hex values are no longer limited to lowercase hex Previously uppercase hex were scrubbed Thanks asok Deprecations Name Changes The following method and constants are hereby deprecated and will be completely removed in a future release Deprecate LoofahHelpersActionViewwhitelistsanitizer please use LoofahHelpersActionViewsafelistsanitizer instead Deprecate LoofahHelpersActionViewWhiteListSanitizer please use LoofahHelpersActionViewSafeListSanitizer instead Deprecate LoofahHTML WhiteList please use LoofahHTML SafeList instead Thanks to JuanitoFatas for submitting these changes in and for making the language used in Loofah more inclusive Security Address CVE Unsanitized JavaScript may occur in sanitized output when a crafted SVG element is republished This CVEs public notice is at flavorjonesloofah Meta The mailing list is now on Google Groups trtable truncated details details summaryCommitssummary df version bump to v e a Merge pull request from flavorjones xssvulnerability d f update CHANGELOG c a mitigate XSS vulnerability in SVG animate attributes a bd rufo formatting bdf formatting in README dc update CHANGELOG with release date bcbd b update dev gemspec f d c d version bump to v fee c update dev deps Additional commits viewable in compare view details br Dependabot compatibility score Dependabot will resolve any conflicts with this PR as long as you dont alter it yourself You can also trigger a rebase manually by commenting dependabot rebase dependabotautomergestart dependabotautomergeend details summaryDependabot commands and optionssummary br You can trigger Dependabot actions by commenting on this PR dependabot rebase will rebase this PR dependabot recreate will recreate this PR overwriting any edits that have been made to it dependabot merge will merge this PR after your CI passes on it dependabot squash and merge will squash and merge this PR after your CI passes on it dependabot cancel merge will cancel a previously requested merge and block automerging dependabot reopen will reopen this PR if it is closed dependabot ignore this patchminormajor version will close this PR and stop Dependabot creating any more for this minormajor version unless you reopen the PR or upgrade to it yourself dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency unless you reopen the PR or upgrade to it yourself dependabot use these labels will set the current labels as the default for future PRs for this repo and language dependabot use these reviewers will set the current reviewers as the default for future PRs for this repo and language dependabot use these assignees will set the current assignees as the default for future PRs for this repo and language dependabot use this milestone will set the current milestone as the default for future PRs for this repo and language You can disable automated security fix PRs for this repo from the Security Alerts page details Bumps nokogiri from to details summaryRelease notessummary Sourced from nokogiris releases Dependencies MRI vendored libxml is updated from to MRI vendored libxslt is updated from to Security Address CVE A command injection vulnerability in Nokogiri v and earlier allows commands to be executed in a subprocess by Rubys Kernelopen method Processes are vulnerable only if the undocumented method NokogiriCSSTokenizerloadfile is being passed untrusted user input This vulnerability appears in code generated by the Rexical gem versions v and earlier Rexical is used by Nokogiri to generate lexical scanner code for parsing CSS queries The underlying vulnerability was addressed in Rexical v and Nokogiri upgraded to this version of Rexical in Nokogiri v This CVEs public notice is sparklemotionnokogiri Security Notes MRI Pulled in upstream patch from libxslt that addresses CVE Full details are available in Note that this patch is not yet as of in an upstream release of libxslt Security MRI Remove support from vendored libxml for future script macros MRI Remove support from vendored libxml for serverside includes within attributes Bug fixes JRuby Fix node ownership in duplicated documents JRuby Rethrow exceptions caught by Java SAX handler Thanks adjam Features MRI During installation handle Xcode s new library pathOS Thanks mlj and deepj Avoid unnecessary creation of Procs in many methods Thanks chopraanmol trtable truncated details details summaryChangelogsummary Sourced from nokogiris changelog Dependencies MRI vendored libxml is updated from to MRI vendored libxslt is updated from to Security Address CVE A command injection vulnerability in Nokogiri v and earlier allows commands to be executed in a subprocess by Rubys Kernelopen method Processes are vulnerable only if the undocumented method NokogiriCSSTokenizerloadfile is being passed untrusted user input This vulnerability appears in code generated by the Rexical gem versions v and earlier Rexical is used by Nokogiri to generate lexical scanner code for parsing CSS queries The underlying vulnerability was addressed in Rexical v and Nokogiri upgraded to this version of Rexical in Nokogiri v This CVEs public notice is sparklemotionnokogiri Security Notes MRI Pulled in upstream patch from libxslt that addresses CVE Full details are available in Note that this patch is not yet as of in an upstream release of libxslt Security MRI Remove support from vendored libxml for future script macros MRI Remove support from vendored libxml for serverside includes within attributes Bug fixes JRuby Fix node ownership in duplicated documents JRuby Rethrow exceptions caught by Java SAX handler Thanks adjam Features MRI During installation handle Xcode s new library path Thanks mlj and deepj Avoid unnecessary creation of Procs in many methods Thanks chopraanmol trtable truncated details details summaryCommitssummary bc ff version bump to v c f update CHANGELOG a dependency update libxslt to final d a b dependency update libxml to final a add suppressions for ruby dca a update CHANGELOG with correct release date for v e update rakecompiler commands to install bundler beb e version bump to v d Merge branch csstokenizerloadfilevulnerabilityv x into v x c b fc update CHANGELOG Additional commits viewable in compare view details br Dependabot compatibility score Dependabot will resolve any conflicts with this PR as long as you dont alter it yourself You can also trigger a rebase manually by commenting dependabot rebase dependabotautomergestart dependabotautomergeend details summaryDependabot commands and optionssummary br You can trigger Dependabot actions by commenting on this PR dependabot rebase will rebase this PR dependabot recreate will recreate this PR overwriting any edits that have been made to it dependabot merge will merge this PR after your CI passes on it dependabot squash and merge will squash and merge this PR after your CI passes on it dependabot cancel merge will cancel a previously requested merge and block automerging dependabot reopen will reopen this PR if it is closed dependabot ignore this patchminormajor version will close this PR and stop Dependabot creating any more for this minormajor version unless you reopen the PR or upgrade to it yourself dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency unless you reopen the PR or upgrade to it yourself dependabot use these labels will set the current labels as the default for future PRs for this repo and language dependabot use these reviewers will set the current reviewers as the default for future PRs for this repo and language dependabot use these assignees will set the current assignees as the default for future PRs for this repo and language dependabot use this milestone will set the current milestone as the default for future PRs for this repo and language You can disable automated security fix PRs for this repo from the Security Alerts page details Server currently throws if a job is posted to it w an unknown action type After restarting PostgreSQL writingreading to the database fails needing a restart to cloud crowd server and node settable in the configyml current log messages in the server log look like Job WorkUnit largedocumentimport succeeded in Job largedocumentimport succeeded It would be nice if it were clear what kind of WorkUnit each unit is whether its a split process or merge for example or even go so far as to set up a system where completedfailed work units when posted back to the central server include a customizable message in the JSON data blob it each worker sends Currently were logging using good ole puts Itd be nice to be able to set levels in the config file and only spew the verbose logging messages when the level is set to debug Since Ruby has a nice Logger class thats built into the standard lib we should use that I have hit a problem with a big set of inputs I am building a file compression box An action to zip a set of inputs When I try and merge the input it appears that upstream in the process the inputs have blown up Process is just saving each file to S and should return the new path to the inputs Array Specifically in the merge inputs should be an Array but instead it is coming though as a String Error Message looks like this Worker pid id time statusfailed output output undefined method each for String x Anyone else ever hit this I thought this Could this be due to a text field on the database filling up with many characters I switched this to a longtext field but that didnt do the trick Is there some other memory issue with filling an array Heres my action It is erroring on the block with inputseach require zipzip require zipzipfilesystem require fileutils require restclient require json class ScanZipper CloudCrowdAction Download files def process savepath savefilename savepath end Archive them def merge puts inputclass puts input name options lastname date Timenow date datestrftimeYmd url options point scanid options scanid filestoremove zipfilename namedatezip zipfile ZipZipFileopenzipfilename ZipZipFileCREATE do zip inputeach do batchurl batchpath Filebasenamebatchurl file downloadbatchurl batchpath puts batchpath tmpfile batchpath zipadd batchpath file filestoremove file end end zippath savenamedatezip filestoremoveeach f Filedelete f zippath end end Hi We are evaluating cloudcrowd We are able to set both server and node up via the crowd command currently on the same server machine running Ubuntu and run some actions However when stopping a node via CtrlC I got the following errors on both node and server and they both crashed Current cloudcrowd version Not sure if this is a bug or something I did not do right and Id appreciate it if you could shed some light on me Thanks Alex Exception on node paths are shown as relative rvmgemsruby p gemsrestclient librestclientrequestrb in transmit Server broke connection RestClientServerBrokeConnection from rvmgemsruby p gemsrestclient librestclientrequestrb inexecute from rvmgemsruby p gemsrestclient librestclientrequestrb in execute from rvmgemsruby p gemsrestclient librestclientresourcerb indelete from rvmgemsruby p gemscloudcrowd libcloudcrowdnoderb in checkout from rvmgemsruby p gemscloudcrowd libcloudcrowdnoderb inshutdown from rvmgemsruby p gemscloudcrowd libcloudcrowdnoderb in trapsignals from rvmgemsruby p gemscloudcrowd libcloudcrowdnoderb incall from rvmgemsruby p gemscloudcrowd libcloudcrowdnoderb in join from rvmgemsruby p gemscloudcrowd libcloudcrowdnoderb instart from rvmgemsruby p gemscloudcrowd libcloudcrowdnoderb in initialize from rvmgemsruby p gemssinatra libsinatrabaserb innew from rvmgemsruby p gemssinatra libsinatrabaserb in new from rvmgemsruby p gemscloudcrowd libcloudcrowdcommandlinerb instartnode from rvmgemsruby p gemscloudcrowd libcloudcrowdcommandlinerb in runnode from rvmgemsruby p gemscloudcrowd libcloudcrowdcommandlinerb ininitialize Exception on server paths are shown as relative rvmgemsruby p gemsactiverecord libactiverecordconnectionadaptersabstractadapterrb in log MysqlError You have an error in your SQL syntax check the manual that corresponds to your MySQL server version for the right syntax to use near LIMIT at line UPDATEworkunitsSET reservation WHERE reservation is null and noderecordid is null and status in and action in LIMIT ActiveRecordStatementInvalid from rvmgemsruby p gemsactiverecord libactiverecordconnectionadaptersmysqladapterrb inexecute from rvmgemsruby p gemsactiverecord libactiverecordconnectionadaptersabstractdatabasestatementsrb in updatesql from rvmgemsruby p gemsactiverecord libactiverecordconnectionadaptersmysqladapterrb inupdatesql from rvmgemsruby p gemsactiverecord libactiverecordconnectionadaptersabstractdatabasestatementsrb in updatewithoutquerydirty from rvmgemsruby p gemsactiverecord libactiverecordconnectionadaptersabstractquerycacherb inupdate from rvmgemsruby p gemsactiverecord libactiverecordbaserb in updateall from rvmgemsruby p gemscloudcrowd libcloudcrowdmodelsworkunitrb inreserveavailable from rvmgemsruby p gemscloudcrowd libcloudcrowdmodelsworkunitrb in distributetonodes from rvmgemsruby p gemscloudcrowd libcloudcrowdmodelsworkunitrb inloop from rvmgemsruby p gemscloudcrowd libcloudcrowdmodelsworkunitrb in distributetonodes from rvmgemsruby p gemscloudcrowd libcloudcrowdmodelsnoderecordrb inredistributeworkunits from rvmgemsruby p gemscloudcrowd libcloudcrowdmodelsnoderecordrb in initialize from rvmgemsruby p gemscloudcrowd libcloudcrowdmodelsnoderecordrb innew from rvmgemsruby p gemscloudcrowd libcloudcrowdmodelsnoderecordrb in redistributeworkunits from rvmgemsruby p gemsactivesupport libactivesupportcallbacksrb insend from rvmgemsruby p gemsactivesupport libactivesupportcallbacksrb in evaluatemethod from rvmgemsruby p gemsactivesupport libactivesupportcallbacksrb incall from rvmgemsruby p gemsactivesupport libactivesupportcallbacksrb in run from rvmgemsruby p gemsactivesupport libactivesupportcallbacksrb ineach from rvmgemsruby p gemsactivesupport libactivesupportcallbacksrb in send from rvmgemsruby p gemsactivesupport libactivesupportcallbacksrb inrun from rvmgemsruby p gemsactivesupport libactivesupportcallbacksrb in runcallbacks from rvmgemsruby p gemsactiverecord libactiverecordcallbacksrb incallback from rvmgemsruby p gemsactiverecord libactiverecordcallbacksrb in destroywithouttransactions from rvmgemsruby p gemsactiverecord libactiverecordtransactionsrb insend from rvmgemsruby p gemsactiverecord libactiverecordtransactionsrb in withtransactionreturningstatus from rvmgemsruby p gemsactiverecord libactiverecordconnectionadaptersabstractdatabasestatementsrb intransaction from rvmgemsruby p gemsactiverecord libactiverecordtransactionsrb in transaction from rvmgemsruby p gemsactiverecord libactiverecordtransactionsrb inwithtransactionreturningstatus from rvmgemsruby p gemsactiverecord libactiverecordtransactionsrb in destroy from rvmgemsruby p gemsactiverecord libactiverecordbaserb indestroyall from rvmgemsruby p gemsactiverecord libactiverecordbaserb in each from rvmgemsruby p gemsactiverecord libactiverecordbaserb indestroyall from rvmgemsruby p gemscloudcrowd libcloudcrowdserverrb in DELETE nodehost from rvmgemsruby p gemssinatra libsinatrabaserb incall from rvmgemsruby p gemssinatra libsinatrabaserb in route from rvmgemsruby p gemssinatra libsinatrabaserb ininstanceeval from rvmgemsruby p gemssinatra libsinatrabaserb in routeeval from rvmgemsruby p gemssinatra libsinatrabaserb inroute from rvmgemsruby p gemssinatra libsinatrabaserb in catch from rvmgemsruby p gemssinatra libsinatrabaserb inroute from rvmgemsruby p gemssinatra libsinatrabaserb in each from rvmgemsruby p gemssinatra libsinatrabaserb inroute from rvmgemsruby p gemssinatra libsinatrabaserb in dispatch from rvmgemsruby p gemssinatra libsinatrabaserb incall from rvmgemsruby p gemssinatra libsinatrabaserb in instanceeval from rvmgemsruby p gemssinatra libsinatrabaserb ininvoke from rvmgemsruby p gemssinatra libsinatrabaserb in catch from rvmgemsruby p gemssinatra libsinatrabaserb ininvoke from rvmgemsruby p gemssinatra libsinatrabaserb in call from rvmgemsruby p gemssinatra libsinatrabaserb incall from rvmgemsruby p gemsrack librackshowexceptionsrb in call from rvmgemsruby p gemsrack librackmethodoverriderb incall from rvmgemsruby p gemssinatra libsinatrabaserb in call from rvmgemsruby p gemssinatra libsinatrabaserb insynchronize from rvmgemsruby p gemssinatra libsinatrabaserb in call from rvmgemsruby p gemsrack librackbuilderrb incall from rvmgemsruby p gemsrack librackurlmaprb in call from rvmgemsruby p gemsrack librackurlmaprb ineach from rvmgemsruby p gemsrack librackurlmaprb in call from rvmgemsruby p gemsthin libthinconnectionrb inpreprocess from rvmgemsruby p gemsthin libthinconnectionrb in catch from rvmgemsruby p gemsthin libthinconnectionrb inpreprocess from rvmgemsruby p gemsthin libthinconnectionrb in process from rvmgemsruby p gemsthin libthinconnectionrb inreceivedata from rvmgemsruby p gemseventmachine libeventmachinerb in runmachine from rvmgemsruby p gemseventmachine libeventmachinerb inrun from rvmgemsruby p gemsthin libthinbackendsbaserb in start from rvmgemsruby p gemsthin libthinserverrb instart from rvmgemsruby p gemsthin libthincontrollerscontrollerrb in start from rvmgemsruby p gemsthin libthinrunnerrb insend from rvmgemsruby p gemsthin libthinrunnerrb in runcommand from rvmgemsruby p gemsthin libthinrunnerrb inrun from rvmgemsruby p gemsthin binthin from rvmgemsruby p binthin in load from rvmgemsruby p binthin 