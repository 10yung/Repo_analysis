Xcode fail build atlas pod because it have infoplist duplicate introduces messages cache in ATLConversationDataSource One issue is that it gets objectChanges but dont updateMessages at the same time If there are messages coming between the time objectChanges is got and the time updateMessages is called inside performBatchUpdates the number of sections will not be consistent between the changes made in the performBatchUpdates closure and after the update completes which leads to a crash This PR fixes the issue by updateMessages right when objectChanges is got According the the documentation comments above ATLConversationViewControllerDelegate messagesForMediaAttachments If nil is returned the controller will fall back to default behavior If an empty NSOrderedSet is returned the controller will not send any messages However returning an empty set will cause the location message to be set This PR fixes that so that functionality matches the documentation comment pod install changes might be the version of cocoa pods Im using Fixing Terminating app due to uncaught exception NSInvalidArgumentException reason LYRConversationMock synchronizeMoreMessageserror unrecognized selector sent to instance x ec For our implementation of Layer wed like to use a custom presentation for avatars for conversations that involve more than two participants This allows for those avatars to be squares Presently all avatars are forced to be rounded due to this line in ATLAvatarViewm The following changes were made to facilitate square avatars Add shouldApplyRounding property to ATLAvatarItem Default it to YES in LYRIdentityATLParticipant Query this property in ATLAvatarViews layoutSubviews Presence state Recipient name This branch provides Gfycat GIF sharing integration This prevents the view controller from crashing when Apples UICollectionView bug for inserts manifests itself When tapping on the camera button it gives the option to choose Last PhotoVideo When selecting this option the action sheet disappears but the messageInputToolbar never reappears This fixes that issue To better customize the appearance