Hi I ran into an error without any detail info when running mina deploy Precompiling asset files ERROR Deploy failed Cleaning up build Unlinking current OK Connection to myservercom closed Run Error My configdeployrb content ruby frozenstringliteral true require minarails require minagit require minarvm for rvm support set applicationname myapp set domain mydomaincom set deployto varwwwmyapp set repository gitmyrepogit set branch master Shared dirs and files will be symlinked into the appfolder by the deploylinksharedpaths step Some plugins already add folders to shareddirs like minarails add publicassets vendorbundle and many more run mina d to see all folders and files already included in shareddirs and sharedfiles set shareddirs fetchshareddirs pushpublicassets set sharedfiles fetchsharedfiles pushconfigdatabaseyml configmasterkey This task is the environment that is loaded for all remote run commands such as mina deploy or mina rake task remoteenvironment do For those using RVM use this to load an RVM versiongemset invoke rvmuse ruby end Put any custom commands you need to run at setup All paths in shareddirs and sharedpaths will be created on their own task setup do command rbenv install skipexisting end desc Deploys the current version to the server task deploy do uncomment this line to make sure you pushed your local branch to the remote origin invoke gitensurepushed deploy do Put things that will set up an empty directory into a fully setup instance of your project invoke gitclone invoke deploylinksharedpaths invoke bundleinstall invoke railsdbmigrate invoke railsassetsprecompile invoke deploycleanup on launch do inpathfetchcurrentpath do command mkdir p tmp command touch tmprestarttxt end end end end The previous stepsbundle installing db migration seem to be working fine My env Ruby Rails Ubuntu Any idea why and how to fix it DEPRECATED The deployment flag is deprecated because it relies on being remembered across bundler invocations which bundler will no longer do in future versions Instead please use bundle config set deployment true and stop using this flag DEPRECATED The path flag is deprecated because it relies on being remembered across bundler invocations which bundler will no longer do in future versions Instead please use bundle config set path vendorbundle and stop using this flag DEPRECATED The without flag is deprecated because it relies on being remembered across bundler invocations which bundler will no longer do in future versions Instead please use bundle config set without development test and stop using this flag In Rails Webpacker is the default JavaScript compiler This PR adds appjavascript to assetdir publicpacks to compliedassetpath as it is the default directory used by Webpacker Mina throws exception during deploy while commit owners name contains special characters in this case character When i changed my git name to another without special characters and then pushed commit with deploy it works fine Error buildsprojectvendorruby gemsmina libminahelpersoutputrb in invalid byte sequence in USASCII ArgumentError from buildsprojectvendorruby gemsmina libminahelpersoutputrb in printline from buildsprojectvendorruby gemsmina libminarunnerprettyrb in block levels in run Thread x buildsprojectvendorruby gemsmina libminarunnerprettyrb run terminated with exception reportonexception is true buildsprojectvendorruby gemsmina libminarunnerprettyrb in gets stream closed in another thread IOError from buildsprojectvendorruby gemsmina libminarunnerprettyrb in block levels in run mina aborted ArgumentError invalid byte sequence in USASCII I wanted to ask if there is an existing code or plugin that allows one to log in to the server a deploy was done We want to log our deploys just basic information such as when it happened Related to Id like to execute some commands depending on whether a deployment is the first one or not In the following pseudo code Im using a hypothetical firstdeploy method ruby task deploy do uncomment this line to make sure you pushed your local branch to the remote origin invoke gitensurepushed deploy do invoke gitclone invoke deploylinksharedpaths invoke bundleinstall invoke railsdbschemaload if firstdeploy invoke railsdbmigrate command fetchrails dbseed if firstdeploy invoke railsassetsprecompile invoke deploycleanup on launch do if firstdeploy invoke pumastart else invoke pumaphasedrestart end end end end How can I achieve this Hello Im still unsure when to load my DB schema when setting up a new application using Mina I know about invoke railsdbschemaload in deploy but I only need to run it the very first deploy So why not move it to setup Or at least only run it the very first time because now I have to uncomment it manually after the first run otherwise rake aborted ActiveRecordProtectedEnvironmentError You are attempting to run a destructive action against your production database Thank you Hi I have been stuck with an issue for months that I still could not resolve so any help is much appreciated Everytime I run mina deploy I come across this error Symlinking shared paths Files varwwwtestcurrentdbmigrate createjobsrb and dbmigrate createjobsrb differ Because of this the deployment fails and is rolled back Ive tried downloading this file from my git repository and comparing it to my local version of the file using diff cmp and also hexdump They all report absolutely no differences so I cant understand why mina says there is a difference Happy to share any other detailsanswer questions that could help resolve this Hi I succesfully deployed my app using mina deploy then I deleted my app folder from the server and again tried to deploy from start I am using mina gem After the mina setup when I run mina deploy verbose I am getting cd homedeployappsmyappscm git fetch mastermaster force fatal not a git repository or any of the parent directories git desc Deploys the current version to the server task deploy environment do to beforehook do Put things to run locally before ssh end deploy do Put things that will set up an empty directory into a fully setup instance of your project invoke gitclone invoke deploylinksharedpaths invoke bundleinstall invoke railsdbmigrate invoke railsassetsprecompile invoke deploycleanup to launch do invoke unicornrestart queue cd fetchdeploytocurrent mkdir p tmp touch tmprestarttxt queue mkdir p deploytocurrenttmp queue touch deploytocurrenttmp restarttxt end end end my setup task setup environment do queue mkdir p fetchdeploytosharedlog queue chmod grxurwx fetchdeploytosharedlog queue mkdir p fetchdeploytosharedconfig queue chmod grxurwx fetchdeploytosharedconfig queue mkdir p fetchdeploytosharedsockets queue chmod grxurwx fetchdeploytosharedsockets queue touch fetchdeploytosharedconfigdatabaseyml queue echo Be sure to edit sharedconfigdatabaseyml queue touch fetchdeploytosharedconfigsecretsyml queue echo Be sure to edit sharedconfigsecretsyml queue touch fetchdeploytosharedconfigconfigyml queue echo Be sure to edit sharedconfigconfigyml queue touch fetchdeploytoenv queue echo Be sure to edit env queue mkdir p fetchdeploytosharedpids queue chmod grxurwx fetchdeploytosharedpids end I have a git repo dir structure like this These is a config to set sub dir arailsapp as rails base for running rails commands This config seems like capistrano repotree arailsapp app config Gemfile Gemfilelock anotherdir 