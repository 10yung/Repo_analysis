 Bug Report Current Behavior appUrlGeneratorclasstoforumroutediscussion id appUrlGeneratorclasstoforumroutediscussion id near Expected Behavior appUrlGeneratorclasstoforumroutediscussion id appUrlGeneratorclasstoforumroutediscussion id near Possible Solution This feature can probably be implemented without too many troubles inside RouteCollection Currently all variations of the route first with a single parameter then with two parameters are parsed by fastroute and added to both the routing and the reverse array The limitation is that we currently always take the first route matching the name from the reverse whereas the one with the optional parameter is likely in second place We should probably try replacing the parameters in each of the thisreverse name matches then return the one where we were able to replace the most tokens Or alternatively index the reverse array based not only on name but also on the parameter names or count in order to pick the correct reverse route in a single access Once implemented we should use the route builder in places where its currently skipped for this very reason Additional Context Discussed on the forum here IMPORTANT We applaud pull requests they excite us every single time As we have an obligation to maintain a healthy code standard and quality we take sufficient time for reviews Please do create a separate pull request per changeissuefeature we will ask you to split bundled pull requests Fixes Changes proposed in this pull request fill this out mention the pages andor components which have been impacted Implements the remove insertBefore insertAfter and replace functionality for middlewares Changed the original flarumfrontendmiddleware container to array Moved middleware piping to flarumfrontendhandler container Reviewers should focus on fill this out ask for feedback on specific changes you are unsure about General code style hopefully StyleCI catches most of it Variable names could we name them better Does anyone see a better way to handle the foreach loops Confirmed x Backend changes tests are green run composer test Fixes This extender implements several methods for extending the new error handling stack implemented in Most usecases should be covered but I expect some challenges for more complex setups We can tackle those once they come up though Basic usecases should be covered Confirmed x Tested on a local Flarum installation x Backend changes tests are green run composer test Feature Request I feel this request is pretty small I think it would be better if the left menu having all the tags is kept stationary even when the page is being scrolled Bug Report Current Behavior As of now if a discussion has say posts with of them deleted the number of unread posts in total should be But the number of unread posts still show Steps to Reproduce Go to Create an account and add a discussion Add a couple of replies and delete a few of those replies them Register a new user and note the number of unread posts before opening the discussion Expected Behavior I expect the number of unread discussions to be excluding the deleted posts Screenshots The image bellow shows that I created a few posts and deleted of them A total of posts including the deleted Screenshot from This image shows the number of unread posts for a new user Test Discussion Screenshot from This image shows the total number of actual posts when the new user clicks the discussion Screenshot from I have been unable to get the admin checkbox to work even though it exactly resembles the one from the Tag extension Help appreciated For reviewers Is this approach okay Alternative suggestions Fixes added permission changed serializer created column modified policy Confirmed Frontend changes tested on a local Flarum installation x Backend changes tests are green run composer test Required changes Related core extension PRs TODO Feature Request Ive found that quite a few users on my forum softdelete posts by mistake and sometimes dont even realize they do that I think this could be improved by asking for confirmation when deletinghiding a post I dont think it would be annoying since deleting a post is not something you do very often It could also be an option actually depending on how people feel this issue Bug Report Current Behavior If a moderator is assigned with the permission to edit users the user is also able to make itself admin by editing and assigning the administrator role to itself Expected Behavior Only administrators should be able to assign or remove the admin role on a user Environment Flarum version beta After Flarum will start using the Laminas namespace in beta instead of Zend as a temp solution to backwards compatibility the zendbridge was added to composer This bridge should be removed in beta as beta deprecates the Zend namespace This follows the discussion from in which franzliedke mentions some missing feature regarding the fallback language The fallback locale is currently hardcoded here as English Its already possible to customize it via extendphp by adding a resolving function to the container I think But its not ideal We need to make it customizable in a userfriendly manner Use case as Flarum becomes more and more international we might start seeing extensions developed without any English language files If for example many extensions were developed in Chinese only Chinese forums that enabled multiple languages might want to set their default locale to Chinese so that the text from those extensions default to Chinese It seems to be possible to define multiple default locales so we might want to allow setting multiple ones maybe always including English as the last fallback Implementation ideas we could start by making the default locale a customizable setting inside configphp It could also be added to the admin panel If we can indeed set multiple fallback languages we could set the default language chosen by the user as the first fallback language followed by English However this could have unintended side effects if users expect the English text to show up for untranslated texts For example a forum in French default and German might want English used for all extensions not translated in German instead of French So in my opinion English should always be the default fallback unless another locale has been explicitly set via a dedicated setting