Following this SO question browsers dont persist shared workers when navigating to a new page or refreshingapparently an undefined behavior in the spec which is a shame because many would benefit from that feature specially relevant for people trying to persist a costly websocket or webRTC data channel I think its something that should be solved for the normal navigation but since it looks unlikely to be solved what about shared worker persistence when navigating using portals Seems like an undefined behavior again as Its not mentioned in the draft it probably isnt hard to implement as the new page is created while the previous one is around right it might even work already Portals are a nice gimmick but not life changing want to add a killer feature that alone can convince people to use them Consider persistence of shared workers smiley In the latest chrome canary whenever portal is activated the change gets pushed into the history stack so user can use the browser back button to navigate back to the previous page This is super nice But I am having trouble detecting the history change Under Site A I activated a portal pointing to Site B url changed to Site B and i pressed browser back button it navigates back to Site A Under Site B i have windowonpopstate attached to an event handler but it is not triggered when browser back button is clicked I am trying to activate the Site A portal under Site B under the onpopstate handler After I create a portal with Site B in Site A i would like to detect whether the portal content is loaded Is there a way to achieve this I initially thought it could be achieved using messaging but it seems only Site A can message the portal Site B and not vice versa Using portals with external website for test purpose I got stack in the successor page because obviously there was no portalactivate event listeners May we be able to make a custom portalactivate handler that can control how we want to interact with the successor page Or will a default action for this event be supplied If not can an HTML property be specified to make sure that the user can navigate back to the predecessor page using the history controls I can imagine a future where a site is expecting a data in PortalActivateEvent from trusted site But PortalActivateEvent can be triggered by any site similar to message event therefore origin attribute has to be exposed in PortalActivateEvent Otherwise itll be an XSS nightmare It is failed to nodegyp build on Node v The gulp depends on fsevents through globwatcher chokidar portalembeddemo depends on fsevents in packagelockjson This fsevents version is reported that it is failed to build on node v I think that it needs to update fsevents But globwatcher issue say that it cannot update chokidar v So it cannot update fsevents through gulp structurally By the way in my local Macbook pro I changed gulp in packagejson to gulp and I tried reinstalling npm modules The chokidarv is installed implicitly and I succeeded to install fsevents and to build it But I do not know it is collect way because I did not tried it in Windows I will show this issue following the failing logs of my npm install and npm ls portalembeddemo gitmaster node v v portalembeddemo gitmaster npm v portalembeddemo gitmaster npm i fsevents install UsersjunyaProgramswicgportalsdemosportalembeddemonodemodulesfsevents node install nodepregyp WARN Using needle for nodepregyp https download nodepregyp WARN Tried to download nodepregyp WARN Prebuilt binaries not found for fsevents and node nodev ABI unknown falling back to source compile with nodegyp SOLINKMODULEtarget Releasenode CXXtarget Releaseobjtargetfsefseventso fseventscc error no template named Handle in namespace v static void Initializev Handlev Object exports In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagNoneToLo UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagMustScanSub UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagUserDropped UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagKernelDropp UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagEventIdsWra UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagHistoryDone UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagRootChanged UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagMountToL UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagUnmountT UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagItemCreated UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagItemRemoved UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagItemInodeMe UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagItemRenamed UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagItemModifie UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagItemFinderI UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagItemChangeO UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagItemXattrMo UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagItemIsFile UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagItemIsDir UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage In file included from fseventscc srcconstantscc warning Set is deprecated Use maybe version Wdeprecateddeclarations objectSetNanNewv StringkFSEventStreamEventFlagItemIsSymli UsersjunyaLibraryCachesnodegyp includenodev h note Set has been explicitly marked deprecated here V DEPRECATEDUse maybe version UsersjunyaLibraryCachesnodegyp includenodev configh note expanded from macro V DEPRECATED declarator attributedeprecatedmessage fseventscc error variable has incomplete type void void FSEventsInitializev Handlev Object exports fseventscc error no member named Handle in namespace v void FSEventsInitializev Handlev Object exports fseventscc error expected for functionstyle cast or type construction void FSEventsInitializev Handlev Object exports fseventscc error use of undeclared identifier exports void FSEventsInitializev Handlev Object exports fseventscc error expected after top level declarator void FSEventsInitializev Handlev Object exports warnings and errors generated make Releaseobjtargetfsefseventso Error gyp ERR build error gyp ERR stack Error make failed with exit code gyp ERR stack at ChildProcessonExit Usersjunyanodebrewnodev libnodemodulesnpmnodemodulesnodegyplibbuildjs gyp ERR stack at ChildProcessemit eventsjs gyp ERR stack at ProcessChildProcesshandleonexit internalchildprocessjs gyp ERR System Darwin gyp ERR command Usersjunyanodebrewnodev binnode Usersjunyanodebrewnodev libnodemodulesnpmnodemodulesnodegypbinnodegypjs build fallbacktobuild moduleUsersjunyaProgramswicgportalsdemosportalembeddemonodemodulesfseventslibbindingReleasenodev darwinx fsenode modulenamefse modulepathUsersjunyaProgramswicgportalsdemosportalembeddemonodemodulesfseventslibbindingReleasenodev darwinx napiversion nodeabinapinapi napibuildversion nodenapilabelnodev gyp ERR cwd UsersjunyaProgramswicgportalsdemosportalembeddemonodemodulesfsevents gyp ERR node v v gyp ERR nodegyp v v gyp ERR not ok nodepregyp ERR build error nodepregyp ERR stack Error Failed to execute Usersjunyanodebrewnodev binnode Usersjunyanodebrewnodev libnodemodulesnpmnodemodulesnodegypbinnodegypjs build fallbacktobuild moduleUsersjunyaProgramswicgportalsdemosportalembeddemonodemodulesfseventslibbindingReleasenodev darwinx fsenode modulenamefse modulepathUsersjunyaProgramswicgportalsdemosportalembeddemonodemodulesfseventslibbindingReleasenodev darwinx napiversion nodeabinapinapi napibuildversion nodenapilabelnodev nodepregyp ERR stack at ChildProcessanonymous UsersjunyaProgramswicgportalsdemosportalembeddemonodemodulesfseventsnodemodulesnodepregyplibutilcompilejs nodepregyp ERR stack at ChildProcessemit eventsjs nodepregyp ERR stack at maybeClose internalchildprocessjs nodepregyp ERR stack at ProcessChildProcesshandleonexit internalchildprocessjs nodepregyp ERR System Darwin nodepregyp ERR command Usersjunyanodebrewnodev binnode UsersjunyaProgramswicgportalsdemosportalembeddemonodemodulesfseventsnodemodulesnodepregypbinnodepregyp install fallbacktobuild nodepregyp ERR cwd UsersjunyaProgramswicgportalsdemosportalembeddemonodemodulesfsevents nodepregyp ERR node v v nodepregyp ERR nodepregyp v v nodepregyp ERR not ok Failed to execute Usersjunyanodebrewnodev binnode Usersjunyanodebrewnodev libnodemodulesnpmnodemodulesnodegypbinnodegypjs build fallbacktobuild moduleUsersjunyaProgramswicgportalsdemosportalembeddemonodemodulesfseventslibbindingReleasenodev darwinx fsenode modulenamefse modulepathUsersjunyaProgramswicgportalsdemosportalembeddemonodemodulesfseventslibbindingReleasenodev darwinx napiversion nodeabinapinapi napibuildversion nodenapilabelnodev npm WARN optional SKIPPING OPTIONAL DEPENDENCY fsevents nodemodulesfsevents npm WARN optional SKIPPING OPTIONAL DEPENDENCY fsevents install node install npm WARN optional SKIPPING OPTIONAL DEPENDENCY Exit status added packages from contributors and audited packages in s found vulnerabilities portalembeddemo gitmaster npm ls fsevents portalembeddemo UsersjunyaProgramswicgportalsdemosportalembeddemo gulp globwatcher chokidar UNMET OPTIONAL DEPENDENCY fsevents Hello I am trying to use portal element with electronjs framework But I face a problem with loading local files into portal element Portals only allow navigation to protocols in the HTTP family Is it possible to load local html files into portal element If not what are the reasons At the TPAC breakout session it was proposed that to mitigate author abuse UAs could impose limits of the creation of portals and reflect this through an error or by rendering fallback children Minutes my memory suggests it was Matt Woodrow AdrianHB and Peter Linss who suggested this Should it be possible to handle a response as a download This might permit driveby downloads or at a minimum user annoyance There might be legitimate reasons to want to allow this but Im not currently aware of them Related to which also involves hooks into navigate Based on feedback from annevk In order handle decisions such as XFOCSP decisions that should depend on it 