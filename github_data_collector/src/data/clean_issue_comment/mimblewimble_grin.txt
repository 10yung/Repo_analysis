 name Pull Request about Pull Request checklist title labels assignees If your PR is a work in progress please feel free to create it and include a WIP tag in the PR name We encourage everyone to PR early and often so that other developers know what youre working on Before submitting your PR for final review please ensure that it Includes a proper description of what problems the PR addresses as well as a detailed explanation as to what it changes Explains whetherhow the change is consensus breaking or breaks existing client functionality Contains unit tests exercising newchanged functionality Fully considers the potential impact of the change on other parts of the system Describes how youve tested the change eg against Floonet etc Updates any documentation thats affected by the PR Describe the bug When using older versions of the grinwallet or wallet against grin check command fails The API is supposed to return highestindex and lastretrievedindex but appears to return a different value This is related to a change in txhashsetrs Making this change fixes the issue highest output insertion index available pub fn highestoutputinsertionindex self u pmmrnleavesselfoutputpmmrhlastpos pmmrnleavesselfoutputpmmrhlastpos API expected the max vali in mmrindex units that are sparce selfoutputpmmrhlastpos Not only does this error produce issues with running older wallets that rely on highestindex but also the API is inaccurate To Reproduce Steps to reproduce the behavior Run using grinwallet grinwallet check The result is an infinite loop Hello I am running Grin on win The node keeps shutting down automatically while synchronizing chain state What causes the problem Thanks Got this just while trying to sync my node Just after txhashset download INFO grinutilzip extractfiles kernelpmmrdatabin Usersquentingrinmaintmptxhashsetkernelpmmrdatabin INFO grinutilzip extractfiles kernelpmmrhashbin Usersquentingrinmaintmptxhashsetkernelpmmrhashbin INFO grinutilzip extractfiles outputpmmrdatabin Usersquentingrinmaintmptxhashsetoutputpmmrdatabin INFO grinutilzip extractfiles outputpmmrhashbin Usersquentingrinmaintmptxhashsetoutputpmmrhashbin INFO grinutilzip extractfiles outputpmmrprunbin Usersquentingrinmaintmptxhashsetoutputpmmrprunbin INFO grinutilzip extractfiles rangeproofpmmrdatabin Usersquentingrinmaintmptxhashsetrangeproofpmmrdatabin INFO grinutilzip extractfiles rangeproofpmmrhashbin Usersquentingrinmaintmptxhashsetrangeproofpmmrhashbin INFO grinutilzip extractfiles rangeproofpmmrprunbin Usersquentingrinmaintmptxhashsetrangeproofpmmrprunbin INFO grinutilzip extractfiles outputpmmrleafbin a b Usersquentingrinmaintmptxhashsetoutputpmmrleafbin a b INFO grinutilzip extractfiles rangeproofpmmrleafbin a b Usersquentingrinmaintmptxhashsetrangeproofpmmrleafbin a b DEBUG grinstoreleafset leafset copying rewound file Usersquentingrinmaintmptxhashsetoutputpmmrleafbin a b to Usersquentingrinmaintmptxhashsetoutputpmmrleafbin DEBUG grinstoreleafset bitmap pos bytes DEBUG grinserversgrinseed monitorpeers on connected mostwork all healthy banned defunct DEBUG grinchaintxhashsettxhashset Rewind header extension to b b at from b b at DEBUG grinp ppeer Requesting compact block c aaf from DEBUG grinp ppeer Requesting compact block c aaf from DEBUG grinp ppeer Requesting compact block c aaf from DEBUG grinp ppeer Requesting compact block c aaf from DEBUG grinp pprotocol handlepayload received compact block msglen DEBUG grinserverscommonadapters Received compactblock c aaf at from outkernkernids going to process DEBUG grinserverscommonadapters compactblockreceived txs from tx pool unknown kernids DEBUG grinp ppeer Requesting block c aaf from peer DEBUG grinp pprotocol handlepayload received block msglen DEBUG grinp ppeer Requesting compact block c aaf from DEBUG grinserverscommonadapters Received block c aaf at from inoutkern going to process DEBUG grinchainpipe pipe processblock c aaf at inoutkern DEBUG grinchainchain processblock orphan c aaf orphans DEBUG grinp pprotocol handlepayload received compact block msglen DEBUG grinserverscommonadapters Received compactblock c aaf at from outkernkernids going to process DEBUG grinserverscommonadapters compactblockreceived txs from tx pool unknown kernids DEBUG grinp ppeer Requesting block c aaf from peer DEBUG grinp pprotocol handlepayload received compact block msglen DEBUG grinserverscommonadapters Received compactblock c aaf at from outkernkernids going to process DEBUG grinserverscommonadapters compactblockreceived txs from tx pool unknown kernids DEBUG grinp ppeer Requesting block c aaf from peer DEBUG grinp pprotocol handlepayload received compact block msglen DEBUG grinserverscommonadapters Received compactblock c aaf at from outkernkernids going to process DEBUG grinserverscommonadapters compactblockreceived txs from tx pool unknown kernids DEBUG grinp ppeer Requesting block c aaf from peer DEBUG grinp pprotocol handlepayload received block msglen DEBUG grinserverscommonadapters Received block c aaf at from inoutkern going to process DEBUG grinchainpipe pipe processblock c aaf at inoutkern DEBUG grinchainchain processblock orphan c aaf orphans DEBUG grinp pprotocol handlepayload received block msglen DEBUG grinserverscommonadapters Received block c aaf at from inoutkern going to process DEBUG grinchainpipe pipe processblock c aaf at inoutkern DEBUG grinchainchain processblock orphan c aaf orphans DEBUG grinp pprotocol handlepayload received block msglen DEBUG grinserverscommonadapters Received block c aaf at from inoutkern going to process DEBUG grinchainpipe pipe processblock c aaf at inoutkern DEBUG grinchainchain processblock orphan c aaf orphans DEBUG grinp pprotocol handlepayload received compact block msglen DEBUG grinserverscommonadapters Received compactblock c aaf at from outkernkernids going to process DEBUG grinserverscommonadapters compactblockreceived txs from tx pool unknown kernids DEBUG grinp ppeer Requesting block c aaf from peer DEBUG grinp pprotocol handlepayload received block msglen DEBUG grinserverscommonadapters Received block c aaf at from inoutkern going to process DEBUG grinchainpipe pipe processblock c aaf at inoutkern DEBUG grinchainchain processblock orphan c aaf orphans DEBUG grinstoreprunelist bitmap pos bytes prunedcache pos bytes shiftcache leafshiftcache DEBUG grinstoreleafset leafset copying rewound file Usersquentingrinmaintmptxhashsetrangeproofpmmrleafbin a b to Usersquentingrinmaintmptxhashsetrangeproofpmmrleafbin DEBUG grinstoreleafset bitmap pos bytes DEBUG grinserversgrinseed monitorpeers on connected mostwork all healthy banned defunct DEBUG grinp pprotocol handlepayload received tx kernel c e df msglen DEBUG grinp pprotocol handlepayload received tx kernel c e df msglen DEBUG grinp pprotocol handlepayload received tx kernel c e df msglen DEBUG grinp pprotocol handlepayload received tx kernel c e df msglen DEBUG grinp pprotocol handlepayload received tx kernel c e df msglen DEBUG grinstoreprunelist bitmap pos bytes prunedcache pos bytes shiftcache leafshiftcache DEBUG grinchaintxhashsetbitmapaccumulator applied chunks from idx to idx ms DEBUG grinstoretypes rebuildsizefile Usersquentingrinmaintmptxhashsetkernelpmmrsizetmp DEBUG grinchaintxhashsettxhashset attempting to open kernel PMMR using ProtocolVersion FAIL verify failed DEBUG grinstoretypes rebuildsizefile Usersquentingrinmaintmptxhashsetkernelpmmrsizetmp DEBUG grinchaintxhashsettxhashset attempting to open kernel PMMR using ProtocolVersion SUCCESS DEBUG grinchainchain validatekernelhistory rewinding and validating kernel history readonly DEBUG grinp pprotocol handlepayload received tx kernel a df f msglen DEBUG grinp pprotocol handlepayload received tx kernel a df f msglen DEBUG grinp pprotocol handlepayload received tx kernel a df f msglen DEBUG grinp pprotocol handlepayload received tx kernel a df f msglen DEBUG grinp pprotocol handlepayload received tx kernel a df f msglen DEBUG grinserversgrinseed monitorpeers on connected mostwork all healthy banned defunct DEBUG grinchainchain validatekernelhistory validated kernel root on headers DEBUG grinchainchain txhashsetwrite rewinding a nd time writeable DEBUG grinchaintxhashsettxhashset Rewind extension to a b at from da at DEBUG grinchaintxhashsetbitmapaccumulator applied chunks from idx to idx ms ERROR grinserversgrinsyncsyncer unexpected error failed to obtain lock for tryheaderhead ERROR grinserversgrinsyncsyncer unexpected error failed to obtain lock for tryheaderhead ERROR grinserversgrinsyncsyncer unexpected error failed to obtain lock for tryheaderhead ERROR grinserversgrinsyncsyncer unexpected error failed to obtain lock for tryheaderhead DEBUG grinchaintxhashsettxhashset txhashset validated the output rproof kernel mmrs took s DEBUG grinchaintypes validate roots a b at dfb aedd vs dfb aedd original dfb aedd merged f e ab a DEBUG grinp pprotocol handlepayload received tx kernel a a eaff msglen ERROR grinserversgrinsyncsyncer unexpected error failed to obtain lock for tryheaderhead name Fixed issues with fuzz in core about Cargo fuzz returned an error and a warning Overview Using instructions at grincorefuzzREADMEmd cargo run bin gencorpus returned an error and a warning The error The error related to including serProtocolVersion in calls to serserialize error E this function takes parameters but parameters were supplied srcmainrs serserialize mut file obj expected parameters error aborting due to previous error For more information about this error try rustc explain E error could not compile grincorefuzz To learn more run the command again with verbose The error solution I added serProtocolVersion where needed including appropriate protocol version numbers The warning The warning related to blockreadv showing up twice in Cargotoml warning homeandroidDocumentsgrincorefuzzCargotoml file found to be present in multiple build targets homeandroidDocumentsgrincorefuzzfuzztargetsblockreadv rs The warning solution I simply corrected the version number in the blockreadv bin section Testing cargo test all came back clean for me The build requirements list as the minimum rust version required to build grin Unfortunately current master c can no longer be built with it Part of the issue was solved thanks to cadwgan effort at Unfortunately some other issues remain related to dependency libraries Building with rustc works However keeping grin compatible with rustc would be much handy for the time being as thats the rust version available on Debian stable Debian buster Here follows the compile errors I get with rustc Compiling smallvec v error E use of unstable library feature alloc this library is unlikely to be stabilized in its current form or name see issue homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs extern crate alloc error E use of unstable library feature maybeuninit see issue homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs use corememMaybeUninit error E use of unstable library feature maybeuninit see issue homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs InlineMaybeUninitA error E use of unstable library feature maybeuninit see issue homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs fn frominlineinline MaybeUninitA SmallVecDataA error E use of unstable library feature maybeuninit see issue homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs unsafe fn intoinlineself MaybeUninitA error E use of unstable library feature maybeuninit see issue homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs data SmallVecDatafrominlineMaybeUninituninit error E use of unstable library feature maybeuninit see issue homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs let mut data SmallVecDataAfrominlineMaybeUninituninit error E use of unstable library feature maybeuninit see issue homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs data SmallVecDatafrominlineMaybeUninitnewbuf error E use of unstable library feature maybeuninit see issue homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs unsafe SmallVecfrombufandlenuncheckedMaybeUninitnewbuf len error E use of unstable library feature maybeuninit see issue homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs pub unsafe fn frombufandlenuncheckedbuf MaybeUninitA len usize SmallVecA error E use of unstable library feature maybeuninit see issue homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs selfdata SmallVecDatafrominlineMaybeUninituninit error E use of unstable library feature maybeuninit see issue homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs selfdata SmallVecDatafrominlineMaybeUninituninit error E use of unstable library feature maybeuninit see issue homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs let mut data MaybeUninitA MaybeUninituninit error E use of unstable library feature maybeuninit see issue homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs let mut data MaybeUninitA MaybeUninituninit Compiling removedirall v error E use of unstable library feature maybeuninit see issue homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs SmallVecDataInlinea aasptr as const AItem error E use of unstable library feature maybeuninit see issue homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs SmallVecDataInlinea aasmutptr as mut AItem error E no function or associated item named uninit found for type corememMaybeUninit in the current scope homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs data SmallVecDatafrominlineMaybeUninituninit function or associated item not found in corememMaybeUninit error E no function or associated item named uninit found for type corememMaybeUninit in the current scope homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs let mut data SmallVecDataAfrominlineMaybeUninituninit function or associated item not found in corememMaybeUninit error E no function or associated item named uninit found for type corememMaybeUninit in the current scope homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs selfdata SmallVecDatafrominlineMaybeUninituninit function or associated item not found in corememMaybeUninit error E no function or associated item named uninit found for type corememMaybeUninit in the current scope homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs selfdata SmallVecDatafrominlineMaybeUninituninit function or associated item not found in corememMaybeUninit Compiling httparse v error E no method named assumeinit found for type corememMaybeUninitA in the current scope homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs Okdataintoinlineassumeinit error E no function or associated item named uninit found for type corememMaybeUninit in the current scope homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs let mut data MaybeUninitA MaybeUninituninit function or associated item not found in corememMaybeUninit error E use of unstable library feature maybeuninit see issue homedagoncargoregistrysrcgithubcom ecc db ec smallvec librs dataasmutptr as mut AItem error aborting due to previous errors Some errors occurred E E For more information about an error try rustc explain E error Could not compile smallvec warning build failed waiting for other jobs to finish error build failed Remove Azure Pipelines by GitHub Actions CI and Release with automated changelog are working well Pros No need to get to a third party website to check the status of the CI Way better UI Much simpler syntax and better documentation Overall simplify the whole CI and release process Cons We loose the GitHub connector created by igno and release wont appear as release by ignopeverell anymore Example here Rust compiler found this issue we were preparing a response and the dropping it and returning a default one CentOS Linux release Core Linux iZj c qa sruykd hh ufkZ el x SMP Thu Nov UTC x x x GNULinux grin server run grin lib libtinfoso no version information available required by grin grin lib libncurseswso no version information available required by grin grin lib libncurseswso no version information available required by grin