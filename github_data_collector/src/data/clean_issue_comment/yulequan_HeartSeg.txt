Hi Thanks for sharing your nice work I tried to train your model on our tissue cleared dataset but unfortunately the prepareh data function is not creating x x patches I debugged code and realised that its creating ROIs and patches with the same size of the given image Could you please explain where the problem is I debugged it on two files trainingaxialcroppat niigz and trainingaxialcroppat labelniigz with the size x x The generated patches are also the same size Shouldnt the patches be x x regards Hi Thank you for sharing the code I have compiled DCaffe for pycaffe and I created the h files in python At first since I saw that the input shape based on DCaffe should be in this order NxCxDxHxW I hdf datalayercpp Number of HDF files I hdf cpp Datatype class H TFLOAT I hdf cpp Datatype class H TINTEGER I netcpp Setting up loaddata I netcpp Top shape I netcpp Top shape I netcpp Memory required for data I layerfactoryhpp Creating layer convd ab I netcpp Creating Layer convd ab I netcpp convd ab data I netcpp convd ab d b F blobhpp Check failed numaxes vs Cannot use legacy accessors on Blobs with axes Check failure stack trace x f c cd googleLogMessageFail x f c a googleLogMessageSendToLog x f c b googleLogMessageFlush x f c ae e googleLogMessageFatalLogMessageFatal x f d caffeBlobLegacyShape x f d a caffeMSRAFillerFill x f a e caffeBaseConvolutionLayerLayerSetUp x f a caffeNetInit x f caffeNetNet x f c ea caffeSolverInitTrainNet x f cd caffeSolverInit x f d ea caffeSolverSolver x f c caffeCreatorSGDSolver x c f train x main x f da libcstartmain x b start nil unknown Then I changed the code to only have CxHxWxD img imgreshape imgshape imgshape imgshape lbl imgreshape lblshape lblshape lblshape shape of h files for example for a volume with grayscale images is for both data and label which is in order CxHxWxD channel heightwidthdepth Once I want to run it in DCaffe it is showing this error which is related to Concat layer netcpp Top shape I netcpp Memory required for data I layerfactoryhpp Creating layer concatd cu ab I netcpp Creating Layer concatd cu ab I netcpp concatd cu ab scaleu a I netcpp concatd cu ab scaled crelud c split I netcpp concatd cu ab u b F concatlayercpp Check failed topshape j bottom i shapej vs All inputs must have the same shape except at concataxis Check failure stack trace x ff fdc cd googleLogMessageFail x ff fdc googleLogMessageSendToLog x ff fdc b googleLogMessageFlush x ff fdc e e googleLogMessageFatalLogMessageFatal x ff b a caffeConcatLayerReshape x ff afa caffeNetInit x ff b caffeNetNet x ff b ea caffeSolverInitTrainNet x ff bd caffeSolverInit x ff c ea caffeSolverSolver x ff c caffeCreatorSGDSolver x c f train x main x ff e libcstartmain x b start nil unknown Aborted core dumped But the problem is that the number of slices is different from patient to patient Then then based on what I saw in HeartSeg I added transformparam cropsizel cropsizeh cropsizew to HDF Data layer But am still getting an error I hdf datalayercpp Number of HDF files I hdf cpp Datatype class H TFLOAT I hdf cpp Datatype class H TINTEGER F blobhpp Check failed axisindex numaxes vs axis out of range for D Blob with shape Check failure stack trace x fb ed cd googleLogMessageFail x fb ed googleLogMessageSendToLog x fb ed b googleLogMessageFlush x fb ed e e googleLogMessageFatalLogMessageFatal x fb edbea d caffeBlobCanonicalAxisIndex x fb edcd cf caffeHDF DataLayerHDF DataTransform x fb edccec caffeHDF DataLayerLoadHDF FileData x fb edccda caffeHDF DataLayerLayerSetUp x fb edd ea caffeNetInit x fb edd caffeNetNet x fb edd a ea caffeSolverInitTrainNet x fb edd ad caffeSolverInit x fb edd b ea caffeSolverSolver x fb edbd c caffeCreatorSGDSolver x c f train x main x fb ec a libcstartmain x b start nil unknown Aborted core dumped How to solve the issue what is the reason that problem coming from Should I change the order of channels Hi Im trying to run your code and follow your instructions to generate h file But errors came out when I try to train the model I have no idea what caused this problem By the way I changed the trainlist file so that it only contains one file The error also appeared when there are eight files Also I checked the h file and found out that the size of the data and label was I wonder whether this size is corrent Thank you very much if you could tell me what went wrong hdf datalayercpp Check failed thislayerparamhastransformparam HDF Data does not transform data when i run the strarttrainsh this have some error