 cripts we should update the README for Autobahn supports Python on CPython and PyPy The last Autobahn version supporting Python was v which also supported Python and Now that we have deprecate support for python we should use promote the asyncawait syntax in documentation examples Docs are living here are writeen in ReST can be build manually using make docs and are published automatically from Travis to RTD here Currently one needs to have autobahn twisted installed for the wamp commandline tool to work Just like the rest of the project I believe it would make sense to add an asyncio backend as well so that the commandline tool could be used with much less dependencies The test occasionally fails here is one such instance hi I have been looking at autobahnpython client code it looks like we do not have correct error message for scenarios where we are trying to use a secured raw socket rss and connection fails for any reason Currently we have ssl argument value passed to s conflicts with the ws prefix of the url argument Did you mean to use wss selfclassname which can certainly be improved upon Hi everybody I am having an issue on connecting to JEX Websocket API while deriving it from pythonbinance which is really similar to JEX Following example with Partial Book Depth Streams I already tested my restpy implementation and it works properly for all the endpoints Steps to reproduce environment img width altOSconfiguration src Python pip from Usersmepyenvversions libpython sitepackagespip python exceptionspy python class JEXAPIExceptionException def initself response selfcode try jsonres responsejson except ValueError selfmessage Invalid JSON error message from JEX formatresponsetext else selfcode jsonres code selfmessage jsonres msg selfstatuscode responsestatuscode selfresponse response selfrequest getattrresponse request None def strself pragma no cover return APIErrorcodes s selfcode selfmessage class JEXRequestExceptionException def initself message selfmessage message def strself return JEXRequestException s selfmessage restpy python codingutf import hashlib import hmac import requests import time from binancehelpers import datetomilliseconds intervaltomilliseconds from exceptions import JEXAPIException JEXRequestException class Restobject def initself apikeyNone apisecretNone selfAPIKEY apikey selfAPISECRET apisecret selfsession selfinitsession init DNS and SSL cert selfping def initsessionself session requestsSession sessionheadersupdateAccept applicationjson UserAgent jexpython XJEXAPIKEY selfAPIKEY return session def urlself domain version path return domain api version path def encryptself message return hmacnewselfAPISECRETencodeutf messageencodeutf hashlibsha hexdigest def stringifyself data return join formatk v for k v in dataitems def signself data stringified selfstringifydata encrypted selfencryptstringified return encrypted def nonceself return inttimetime def handleself response if not strresponsestatuscodestartswith raise JEXAPIExceptionresponse try return responsejson except ValueError raise JEXRequestExceptionInvalid Response s responsetext def requestself method domain version path signed kwargs url selfurldomain version path beware of the order of the parameters if signed kwargs timestamp selfnonce kwargs signature selfsignkwargs call getattrselfsession method if method get or method delete if lenkwargs url selfstringifykwargs response callurl else response callurl kwargs printmethodupper url printparams kwargs json selfhandleresponse printresponse json print return json def publicself method path domain version v kwargs return selfrequestmethod domain version path signed False kwargs def privateself method path domain version v kwargs return selfrequestmethod domain version path signed True kwargs beware of the order of the parameters in each methods below PUBLIC def pingself return selfpublicmethod get path ping def tickerself symbol return selfpublicmethod get path contractticker hr symbol symbol def depthself symbol return selfpublicmethod get path contractdepth symbol symbol limit PRIVATE def openordersself symbol return selfprivatemethod get path contractopenOrders symbol symbol def createorderself symbol side quantity price type LIMIT recvWindow path contractorder return selfprivate method post path path symbol symbol side side type type quantity quantity price price recvWindow recvWindow def deleteorderself symbol orderId recvWindow return selfprivate method delete path contractorder symbol symbol orderId orderId recvWindow recvWindow def positionself symbol recvWindow return selfprivate method get path contractposition symbol symbol recvWindow recvWindow def openstreamself return selfprivatemethod post path userDataStream def keepstreamself listenKey return selfprivatemethod put path userDataStream listenKey listenKey def closestreamself listenKey return selfprivatemethod delete path userDataStream listenKey listenKey wspy python from twistedinternet import ssl from binanceclient import Client from binancewebsockets import BinanceSocketManager BinanceClientFactory BinanceClientProtocol BinanceReconnectingClientFactory from autobahntwistedwebsocket import connectWS WebSocketClientFactory from rest import Rest from os import getenv from dotenv import loaddotenv loaddotenv def processmessagemsg printmessage type formatmsg e printmsg do something class MyClientProtocolBinanceClientProtocol def onConnectself response printServer connected formatresponsepeer def onConnectingself transportdetails printConnecting transport details formattransportdetails return None def onCloseself wasClean code reason printWebSocket connection closed formatreason class MySocketManagerBinanceSocketManager def startsocketself path callback prefixws if path in selfconns return False factoryurl selfSTREAMURL prefix path printfactoryurl factory BinanceClientFactoryfactoryurl factoryprotocol MyClientProtocol factoryprotocollogRxFrame True factorycallback callback factoryreconnect True contextfactory sslClientContextFactory selfconns path connectWSfactory contextfactory return path def teststreamself symbol callback return selfstartsocketsymbollower spotDepth callback client RestapikeygetenvapiKey apisecretgetenvsecret bm MySocketManagerclient bmSTREAMURL wsswsjexcom bmteststreamLTCBTC processmessage bmstart Expected output I would expect to be able to connect and receive data from the Partial Book Depth Streams properly Real output sh GET params response wsswsjexcomwsltcbtcspotDepth Connecting transport details peer tcp SOMEIP issecure true securechannelid tlsunique null replaced actual IP with SOMEIP as its not relevant WebSocket connection closed connection was closed uncleanly SSL error sslv alert handshake failure in ssl readbytes Further notes I also gave a try with a simple rust implementation using websocket crate and another Python lib called websocketclient and both work as expected hence my confusion Also past this simple example my wspy implementation wouldnt work as theres some inner method which calls different restpy method but its sufficient enough to test and of course I would rebuild it from scratch once being able to correctly connect with the Websocket Looks like the API has changed and it needs to call addauthenticator with a IAuthenticator instance and not uwampcra authidxxxx secretxxxx python examplestwistedwampauthbackendpy T ApplicationSession could not be instantiated addauthenticator got an unexpected keyword argument authid T Traceback most recent call last File homeProjectsvenv lib python sitepackagesautobahnwampwebsocketpy line in onOpen selfsession selffactoryfactory File homeProjectsvenv lib python sitepackagesautobahntwistedwamppy line in create session makecfg File examplestwistedwampauthbackendpy line in make uwampcra authiduusername secretup ssw rd TypeError addauthenticator got an unexpected keyword argument authid T failing WebSocket connection code WAMP Internal Error addauthenticator got an unexpected keyword argument authid T Main loop terminated Python documentation encourages users to use asynciorun to launch the main coroutine ApplicationRunner does not expose how to integrate itself into that pattern as the run method encapsulates the looprunforever One use case is to add other nonWAMP coroutines to the event loop Desired use case integrate nonautobahn tasks into the event loop async def main coro runnerhypotheticalasynciofriendlymethod then t asynciocreatetask t asynciocreatetask tN asynciocreatetask await asynciogathert t t coro if name main asynciorunmain Specifically how do you convert the examples to idiomatic asynciorun Attempting to do this with examplesasynciowamprpccomplexfrontendpy First attempt runner ApplicationRunnerurl realm coro runnerrunComponent startloopFalse asyncioruncoro blows up OK so this coro is not suitable to be a asyncio main it is the return value of loopcreateconnection in any case asynciorun wants to create a new event loop Results in RuntimeError Task Task pending coroBaseEventLoopcreateconnection running at usrlib python asynciobaseeventspy cb rununtilcompletecb at usrlib python asynciobaseeventspy got Future Future pending cb BaseSelectorEventLoopsockconnectdone attached to a different loop pip install autobahn all fails on CPython in cytoolz with Installing collected packages cytoolz ethutils ethkeys attrdict hexbytes rlp ethrlp ethkeyfile parsimonious ethabi ethaccount protobuf certifi urllib chardet idna requests lrudict varint netaddr base multiaddr ipfshttpclient websockets attrs pyrsistent moreitertools zipp importlibmetadata jsonschema web pyubjson argon cffi wsaccel zopeinterface cbor flatbuffers pyethsigutils cbor constantly incremental Automat hyperlink PyHamcrest twisted pyasn pyasn modules serviceidentity pynacl msgpack mypyextensions pyecc sortedcontainers pytrie lz ujson passlib pyopenssl lmdb click numpy pyyaml zlmdb pyqrcode autobahn Running setuppy install for cytoolz error ERROR Command errored out with exit status command homeoberstetcpy binpython u c import sys setuptools tokenize sysargv tmppipinstall s f cytoolzsetuppy filetmppipinstall s f cytoolzsetuppyfgetattrtokenize open openfilecodefreadreplace r n nfcloseexeccompilecode file exec install record tmppiprecordg pr installrecordtxt singleversionexternallymanaged compile installheaders homeoberstetcpy includesitepython cytoolz cwd tmppipinstall s f cytoolz Complete output lines running install running build running buildpy creating build creating buildliblinuxx creating buildliblinuxx cytoolz copying cytoolzinitpy buildliblinuxx cytoolz copying cytoolzversionpy buildliblinuxx cytoolz copying cytoolzsignaturespy buildliblinuxx cytoolz copying cytoolzutilstestpy buildliblinuxx cytoolz copying cytoolzcompatibilitypy buildliblinuxx cytoolz creating buildliblinuxx cytoolzcurried copying cytoolzcurriedinitpy buildliblinuxx cytoolzcurried copying cytoolzcurriedexceptionspy buildliblinuxx cytoolzcurried copying cytoolzcurriedoperatorpy buildliblinuxx cytoolzcurried copying cytoolzitertoolzpyx buildliblinuxx cytoolz copying cytoolzrecipespyx buildliblinuxx cytoolz copying cytoolzutilspyx buildliblinuxx cytoolz copying cytoolzfunctoolzpyx buildliblinuxx cytoolz copying cytoolzdicttoolzpyx buildliblinuxx cytoolz copying cytoolzfunctoolzpxd buildliblinuxx cytoolz copying cytoolzutilspxd buildliblinuxx cytoolz copying cytoolzdicttoolzpxd buildliblinuxx cytoolz copying cytoolzcpythonpxd buildliblinuxx cytoolz copying cytoolzrecipespxd buildliblinuxx cytoolz copying cytoolzitertoolzpxd buildliblinuxx cytoolz copying cytoolzinitpxd buildliblinuxx cytoolz creating buildliblinuxx cytoolztests copying cytoolztestsdevskiptestpy buildliblinuxx cytoolztests copying cytoolzteststestdocstringspy buildliblinuxx cytoolztests copying cytoolzteststestdicttoolzpy buildliblinuxx cytoolztests copying cytoolzteststestitertoolzpy buildliblinuxx cytoolztests copying cytoolzteststestcurriedpy buildliblinuxx cytoolztests copying cytoolzteststestdevskiptestpy buildliblinuxx cytoolztests copying cytoolzteststestserializationpy buildliblinuxx cytoolztests copying cytoolzteststestcompatibilitypy buildliblinuxx cytoolztests copying cytoolzteststestcurriedtoolzlikepy buildliblinuxx cytoolztests copying cytoolzteststestutilspy buildliblinuxx cytoolztests copying cytoolzteststestinspectargspy buildliblinuxx cytoolztests copying cytoolzteststesttlzpy buildliblinuxx cytoolztests copying cytoolzteststestrecipespy buildliblinuxx cytoolztests copying cytoolzteststestfunctoolzpy buildliblinuxx cytoolztests copying cytoolzteststestembeddedsigspy buildliblinuxx cytoolztests copying cytoolzteststestdoctestspy buildliblinuxx cytoolztests copying cytoolzteststestsignaturespy buildliblinuxx cytoolztests copying cytoolzteststestnonesafepy buildliblinuxx cytoolztests running buildext building cytoolzdicttoolz extension creating buildtemplinuxx creating buildtemplinuxx cytoolz gcc pthread Wnounusedresult Wsigncompare DNDEBUG g fwrapv O Wall fPIC Ihomeoberstetcpy include Ihomeoberstetcpy includepython c cytoolzdicttoolzc o buildtemplinuxx cytoolzdicttoolzo cytoolzdicttoolzc In function PyxInitCachedConstants cytoolzdicttoolzc error macro PyxPyCodeNew requires arguments but only given pyxcodeobj PyObjectPyxPyCodeNew COOPTIMIZEDCONEWLOCALS pyxemptybytes pyxemptytuple pyxemptytuple pyxtuple pyxemptytuple pyxemptytuple pyxkpsstringsource pyxnsreducecython pyxemptybytes if unlikelypyxcodeobj PYXERR pyxL error cytoolzdicttoolzc error PyxPyCodeNew undeclared first use in this function did you mean PyCodeNew pyxcodeobj PyObjectPyxPyCodeNew COOPTIMIZEDCONEWLOCALS pyxemptybytes pyxemptytuple pyxemptytuple pyxtuple pyxemptytuple pyxemptytuple pyxkpsstringsource pyxnsreducecython pyxemptybytes if unlikelypyxcodeobj PYXERR pyxL error PyCodeNew cytoolzdicttoolzc note each undeclared identifier is reported only once for each function it appears in cytoolzdicttoolzc error macro PyxPyCodeNew requires arguments but only given pyxcodeobj PyObjectPyxPyCodeNew COOPTIMIZEDCONEWLOCALS pyxemptybytes pyxemptytuple pyxemptytuple pyxtuple pyxemptytuple pyxemptytuple pyxkpsstringsource pyxnssetstatecython pyxemptybytes if unlikelypyxcodeobj PYXERR pyxL error cytoolzdicttoolzc error macro PyxPyCodeNew requires arguments but only given pyxcodeobj PyObjectPyxPyCodeNew COOPTIMIZEDCONEWLOCALSCOVARARGSCOVARKEYWORDS pyxemptybytes pyxemptytuple pyxemptytuple pyxtuple pyxemptytuple pyxemptytuple pyxkpscytoolzdicttoolzpyx pyxnsmerge pyxemptybytes if unlikelypyxcodeobj PYXERR pyxL error cytoolzdicttoolzc error macro PyxPyCodeNew requires arguments but only given pyxcodeobj PyObjectPyxPyCodeNew COOPTIMIZEDCONEWLOCALSCOVARARGSCOVARKEYWORDS pyxemptybytes pyxemptytuple pyxemptytuple pyxtuple pyxemptytuple pyxemptytuple pyxkpscytoolzdicttoolzpyx pyxnsmergewith pyxemptybytes if unlikelypyxcodeobj PYXERR pyxL error cytoolzdicttoolzc error macro PyxPyCodeNew requires arguments but only given pyxcodeobj PyObjectPyxPyCodeNew COOPTIMIZEDCONEWLOCALS pyxemptybytes pyxemptytuple pyxemptytuple pyxtuple pyxemptytuple pyxemptytuple pyxkpscytoolzdicttoolzpyx pyxnsvalmap pyxemptybytes if unlikelypyxcodeobj PYXERR pyxL error cytoolzdicttoolzc error macro PyxPyCodeNew requires arguments but only given pyxcodeobj PyObjectPyxPyCodeNew COOPTIMIZEDCONEWLOCALS pyxemptybytes pyxemptytuple pyxemptytuple pyxtuple pyxemptytuple pyxemptytuple pyxkpscytoolzdicttoolzpyx pyxnskeymap pyxemptybytes if unlikelypyxcodeobj PYXERR pyxL error cytoolzdicttoolzc error macro PyxPyCodeNew requires arguments but only given pyxcodeobj PyObjectPyxPyCodeNew COOPTIMIZEDCONEWLOCALS pyxemptybytes pyxemptytuple pyxemptytuple pyxtuple pyxemptytuple pyxemptytuple pyxkpscytoolzdicttoolzpyx pyxnsitemmap pyxemptybytes if unlikelypyxcodeobj PYXERR pyxL error cytoolzdicttoolzc error macro PyxPyCodeNew requires arguments but only given pyxcodeobj PyObjectPyxPyCodeNew COOPTIMIZEDCONEWLOCALS pyxemptybytes pyxemptytuple pyxemptytuple pyxtuple pyxemptytuple pyxemptytuple pyxkpscytoolzdicttoolzpyx pyxnsvalfilter pyxemptybytes if unlikelypyxcodeobj PYXERR pyxL error cytoolzdicttoolzc error macro PyxPyCodeNew requires arguments but only given pyxcodeobj PyObjectPyxPyCodeNew COOPTIMIZEDCONEWLOCALS pyxemptybytes pyxemptytuple pyxemptytuple pyxtuple pyxemptytuple pyxemptytuple pyxkpscytoolzdicttoolzpyx pyxnskeyfilter pyxemptybytes if unlikelypyxcodeobj PYXERR pyxL error cytoolzdicttoolzc error macro PyxPyCodeNew requires arguments but only given pyxcodeobj PyObjectPyxPyCodeNew COOPTIMIZEDCONEWLOCALS pyxemptybytes pyxemptytuple pyxemptytuple pyxtuple pyxemptytuple pyxemptytuple pyxkpscytoolzdicttoolzpyx pyxnsitemfilter pyxemptybytes if unlikelypyxcodeobj PYXERR pyxL error cytoolzdicttoolzc error macro PyxPyCodeNew requires arguments but only given pyxcodeobj PyObjectPyxPyCodeNew COOPTIMIZEDCONEWLOCALS pyxemptybytes pyxemptytuple pyxemptytuple pyxtuple pyxemptytuple pyxemptytuple pyxkpscytoolzdicttoolzpyx pyxnsassoc pyxemptybytes if unlikelypyxcodeobj PYXERR pyxL error cytoolzdicttoolzc error macro PyxPyCodeNew requires arguments but only given pyxcodeobj PyObjectPyxPyCodeNew COOPTIMIZEDCONEWLOCALS pyxemptybytes pyxemptytuple pyxemptytuple pyxtuple pyxemptytuple pyxemptytuple pyxkpscytoolzdicttoolzpyx pyxnsassocin pyxemptybytes if unlikelypyxcodeobj PYXERR pyxL error cytoolzdicttoolzc error macro PyxPyCodeNew requires arguments but only given pyxcodeobj PyObjectPyxPyCodeNew COOPTIMIZEDCONEWLOCALSCOVARARGSCOVARKEYWORDS pyxemptybytes pyxemptytuple pyxemptytuple pyxtuple pyxemptytuple pyxemptytuple pyxkpscytoolzdicttoolzpyx pyxnsdissoc pyxemptybytes if unlikelypyxcodeobj PYXERR pyxL error cytoolzdicttoolzc error macro PyxPyCodeNew requires arguments but only given pyxcodeobj PyObjectPyxPyCodeNew COOPTIMIZEDCONEWLOCALS pyxemptybytes pyxemptytuple pyxemptytuple pyxtuple pyxemptytuple pyxemptytuple pyxkpscytoolzdicttoolzpyx pyxnsupdatein pyxemptybytes if unlikelypyxcodeobj PYXERR pyxL error cytoolzdicttoolzc error macro PyxPyCodeNew requires arguments but only given pyxcodeobj PyObjectPyxPyCodeNew COOPTIMIZEDCONEWLOCALS pyxemptybytes pyxemptytuple pyxemptytuple pyxtuple pyxemptytuple pyxemptytuple pyxkpscytoolzdicttoolzpyx pyxnsgetin pyxemptybytes if unlikelypyxcodeobj PYXERR pyxL error cytoolzdicttoolzc In function PyxCreateCodeObjectForTraceback cytoolzdicttoolzc error macro PyxPyCodeNew requires arguments but only given cytoolzdicttoolzc error PyxPyCodeNew undeclared first use in this function did you mean PyCodeNew pycode PyxPyCodeNew PyCodeNew error command gcc failed with exit status ERROR Command errored out with exit status homeoberstetcpy binpython u c import sys setuptools tokenize sysargv tmppipinstall s f cytoolzsetuppy filetmppipinstall s f cytoolzsetuppyfgetattrtokenize open openfilecodefreadreplace r n nfcloseexeccompilecode file exec install record tmppiprecordg pr installrecordtxt singleversionexternallymanaged compile installheaders homeoberstetcpy includesitepython cytoolz Check the logs for full command output WARNING You are using pip version however version is available You should consider upgrading via the pip install upgrade pip command cpy oberstetintelnuci 