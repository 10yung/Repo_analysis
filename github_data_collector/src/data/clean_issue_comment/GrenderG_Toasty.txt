 at androidxappcompatwidgetResourceManagerInternalcreateDrawableIfNeeded ResourceManagerInternaljava at androidxappcompatwidgetResourceManagerInternalgetDrawable ResourceManagerInternaljava at androidxappcompatwidgetResourceManagerInternalgetDrawable ResourceManagerInternaljava at androidxappcompatcontentresAppCompatResourcesgetDrawable AppCompatResourcesjava at esdmoraltoastyToastyUtilsgetDrawable ToastyUtilsjava at esdmoraltoastyToastywarning Toastyjava AppCompat support libraries are obsolete and have been replaced by androidx libraries As the author of this library suggested in it is recommended to avoid obfuscation for libraries that use LGPL license as it could be considered as modification This requires adding proguard rules Either the user can add the rules or the library itself can provide these rules It would be better if this library itself provides a consumer proguard file that prevents this obfuscation This makes it easy as most users may forget to add these rules manually otherwise More details about gradles consumerProguardFiles can be found here If allowQueue parameter set to false Toasty uses lastToast static variable to save previous Toast object which holds reference to Context causing memory leak Leak is reported by comsquareupleakcanary library You need to set allowQueue to true to eliminate leak no static reference to Context Causing leak Toastycustomcontext text ContextCompatgetDrawablecontext Rdrawableicalertwhite dp ContextCompatgetColorcontext Rcolorwarnbackground ContextCompatgetColorcontext RcolordefaultTextColor duration true trueshow No leak ToastyConfiggetInstanceallowQueuetrueapply Toastycustomcontext text ContextCompatgetDrawablecontext Rdrawableicalertwhite dp ContextCompatgetColorcontext Rcolorwarnbackground ContextCompatgetColorcontext RcolordefaultTextColor duration true trueshow Great job I am using the library on my latest game I love it I use it as an achievement unlock message among other things Thanks This is the game Replaced older support dependencies with AndroidX Simplify dependencies I created a clean project for API and connected the library Code import esdmoraltoastyToasty public void clickView view ToastyerrorgetApplicationContext This is an error toast ToastLENGTHSHORT trueshow And I get this exception comexampletoast EAndroidRuntime FATAL EXCEPTION main javalangIllegalStateException Could not execute method for androidonClick at androidsupportv appAppCompatViewInflaterDeclaredOnClickListeneronClickAppCompatViewInflaterjava at androidviewViewperformClickViewjava at androidviewViewPerformClickrunViewjava at androidosHandlerhandleCallbackHandlerjava at androidosHandlerdispatchMessageHandlerjava at androidosLooperloopLooperjava at androidappActivityThreadmainActivityThreadjava at javalangreflectMethodinvokeNativeNative Method at javalangreflectMethodinvokeMethodjava at comandroidinternalosZygoteInitMethodAndArgsCallerrunZygoteInitjava at comandroidinternalosZygoteInitmainZygoteInitjava at dalviksystemNativeStartmainNative Method Caused by javalangreflectInvocationTargetException at javalangreflectMethodinvokeNativeNative Method at javalangreflectMethodinvokeMethodjava at androidsupportv appAppCompatViewInflaterDeclaredOnClickListeneronClickAppCompatViewInflaterjava at androidviewViewperformClickViewjava at androidviewViewPerformClickrunViewjava at androidosHandlerhandleCallbackHandlerjava at androidosHandlerdispatchMessageHandlerjava at androidosLooperloopLooperjava at androidappActivityThreadmainActivityThreadjava at javalangreflectMethodinvokeNativeNative Method at javalangreflectMethodinvokeMethodjava at comandroidinternalosZygoteInitMethodAndArgsCallerrunZygoteInitjava at comandroidinternalosZygoteInitmainZygoteInitjava at dalviksystemNativeStartmainNative Method Caused by javalangNoSuchFieldError esdmoraltoastyRidtoasticon at esdmoraltoastyToastycustomToastyjava at esdmoraltoastyToastyerrorToastyjava at comexampletoastMainActivityclickMainActivityjava at javalangreflectMethodinvokeNativeNative Method at javalangreflectMethodinvokeMethodjava at androidsupportv appAppCompatViewInflaterDeclaredOnClickListeneronClickAppCompatViewInflaterjava at androidviewViewperformClickViewjava at androidviewViewPerformClickrunViewjava at androidosHandlerhandleCallbackHandlerjava at androidosHandlerdispatchMessageHandlerjava at androidosLooperloopLooperjava at androidappActivityThreadmainActivityThreadjava at javalangreflectMethodinvokeNativeNative Method at javalangreflectMethodinvokeMethodjava at comandroidinternalosZygoteInitMethodAndArgsCallerrunZygoteInitjava at comandroidinternalosZygoteInitmainZygoteInitjava at dalviksystemNativeStartmainNative Method I run on the phone with android Help I am getting a NPM at ToastyUtils because of null reference to getDrawable method My initial thought is because Ive enabled minify and remove unwanted resources it is causing problem Is there any workaround for this I am not willing to disable minify iosilvrrinstallment EAndroidRuntime FATAL EXCEPTION main Process iosilvrrinstallment PID javalangIllegalStateException View androidwidgetLinearLayouta c VE I has already been added to the window manager at androidviewWindowManagerGlobaladdViewWindowManagerGlobaljava at androidviewWindowManagerImpladdViewWindowManagerImpljava at androidwidgetToastTNhandleShowToastjava at androidwidgetToastTN handleMessageToastjava at androidosHandlerdispatchMessageHandlerjava at androidosLooperloopLooperjava at androidappActivityThreadmainActivityThreadjava at javalangreflectMethodinvokeNative Method at comandroidinternalosRuntimeInitMethodAndArgsCallerrunRuntimeInitjava at comandroidinternalosZygoteInitmainZygoteInitjava how fix this exception 