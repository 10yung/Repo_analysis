I am using macOS Catalina and the brew version of gitcrypt there is no v option so I am not sure which version of gitcrypt but it is the todays brew install gitcrypt I have a repo without gitcrypt my dotfiles and I have just initialized it with gitcrypt init and gitcrypt answers Generating key However when I gitcrypt addgpguser ChristopherALifeWithAlacritycom I get gpg xFDFE A ECB FC D EFF D C ED skipped Unusable public key gpg stdin encryption failed Unusable public key gitcrypt GPG error Failed to encrypt gitcrypt is finding my key thus the fingerprint in response but says it is unusable gpg listkeys looks good as well gpg listkeys master dotfiles Userschristopheragnupgpubringkbx pub rsa SC expires FDFE A ECB FC D EFF D C ED uid unknown Christopher Allen ChristopherALifeWithAlacritycom uid unknown jpeg image of size A few points that GPG key is properly signed lsignkey and has ultimate trust and I am able to use that commit to my dotfiles repo using my GPG key and it shows as verified So in all other ways my GPG key works But I cant add myself as the first gitcrypt user Ideas I guess this is not intended behavior it makes it hard to detect when gitcrypt unlock fails due to GPG My workflow I generated a GPG key pair on my laptop macOS High Sierra and exported the private key to a second computer On the second computer Ubuntu I ran the following commands gitcrypt version is installed on both machines gitcrypt init gitcrypt addgpguser myuserid I created and committed a gitattributes file I created and committed a test file that matched the gitattributes file I pushed the resulting branch to GitHub Returning to my laptop I fetched and checked out the branch then attempted to run gitcrypt unlock The result Error no GPG secret key available to unlock this repository To unlock with a shared symmetric key instead specify the path to the symmetric key as an argument to gitcrypt unlock I found the key that was generated by gitcrypt addgpguser and was able to manually decrypt it with gpg decrypt gitcryptkeysdefault FOOBARgpg where FOOBARgpg is the name of the file that was generated This gave me the symmetric key that is supposed to be automatically handled by the tool The following workaround is therefore possible binsh gitcryptunlock Work around a bug in gitcrypt This will unlock the repo even though gitcrypt cant do it May not be as secure as gitcrypts correct implementation would be umask for FILE in find gitcryptkeysdefault type f do if gpg decrypt FILE gitcryptsymmetrickey then gitcrypt unlock gitcryptsymmetrickey rm f gitcryptsymmetrickey exit fi done I get this error when unlocking on windows These were my settings before running the command Computer HKEYLOCALMACHINE SYSTEM CurrentControlSet Control FileSystem Set LongPathsEnabled Value data git config system corelongpaths true This is the repo if curious Hi completely forgot that we need to trust the key when adding a collaborator to the repository having error like gpg XXX There is no assurance this key belongs to the named user gpg stdin encryption failed Unusable public key gitcrypt GPG error Failed to encrypt ref Cheers Laurent Occasionally tracked files are incorrectly shown as modified in git status output A closely related issue is gitlfsgitlfs The fix described in the initial comment seems to work with the gitcrypt version of the issue as well As far as I can tell however as that issue thread is very long no fix was ever committed for it Interestingly in a state where git status erroneously shows files as changed different git clients exhibit different behavior when checking the status For example the error is not seen in Sublime Merge but it is still in Git Cola Hi I have been looking for ways to automate the process of unlocking encrypted files during the deployment process on Windows Hosts I can do it manually but ofcourse a password prompt is required Any suggestions on how to automate this process Thanks Michael S Im attempting to clone my repo in a production server and decrypt my files there I had already encrypted the repo beforehand with gitcrypt addgpguser and it works fine on my development machine but nothing Im doing seems to reunlock the repo on the production server Specifically I get the error Error no GPG secret key available to unlock this repository I attempted to make a new GPG key on the production server but that didnt help I also dont know if my development machine has a GPG key linked to gitcrypt addgpguser meaning I dont have a key to export I apologize if this seems like a trivial problem this is my first time using GPG and I have no idea whats going on Can someone give me some guidance This PR is a refactoring of PR The original PR mixes multiple unrelated changes in a single commit including some maybe unwanted changes and codestyle violations which is probably the reason why it s still not merged This PR contains only and only the changes needed for the merge driver support with minimum changes to the existing code separated into an extra commit so it should be easy for review I ve also fixed a few shortcomings in the original PR