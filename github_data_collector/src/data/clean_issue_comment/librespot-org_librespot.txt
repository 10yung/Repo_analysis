Based on I started migrating the audio and core crates to futures tokio hyper There is still quite a lot left to do I think the remaining crates could then first use futures compat and then be migrated one by one Migrated to rust edition using cargo fix and removed extern crate as this is redundant in Rust For more details about the transition here Added subprocess audio backend Simple test with ffmpeg installed cargo run n Librespot Speaker b backend subprocess device ffplay i f s le ac nodisp Also Sink is stopping and starting again after every track Is there a way to prevent this behaviour There is sometimes a problem that is really hard to fix Basically how to reproduce it is like follows use two Spotify accounts Connect and play a song from account Play song locally on account device Try connectingtaking over Librespot connect This is when Librespot will crash and not recover by itself At this point the only way to recover is by stopping Librespot and the Spotify client on your device Once both stopped you need to first open your Spotify client and afterwards start Librespot then you will be able to connect to Librespot connect Here the logs T Z INFO librespot librespot raspotify v ga ae b Built on Build ID lqPey SF T Z INFO librespotcoresession Connecting to AP gew accesspointafn qapspotifycom T Z INFO librespotcoresession Authenticated as pyl v faqqytciloorhidn px T Z INFO librespotplaybackaudiobackendalsa Using alsa sink T Z INFO librespotcoresession Country DE T Z INFO librespotplaybackplayer Loading I Dream Of You with Spotify URI spotifytrack hk vxMqUzHmediqECGXlh T Z INFO librespotplaybackplayer I Dream Of You loaded thread main panicked at channel closed srclibcoreoptionrs stack backtrace x backtracebacktracelibunwindtraceh d cb b at cargoregistrysrcgithubcom ecc db ec backtrace srcbacktracelibunwindrs x backtracebacktracetraceunsynchronizedh fd d e d at cargoregistrysrcgithubcom ecc db ec backtrace srcbacktracemodrs x stdsyscommonbacktraceprintfmthe a f b e b at srclibstdsyscommonbacktracers x stdsyscommonbacktraceprintDisplayBacktrace as corefmtDisplayfmthe e d ed f bc at srclibstdsyscommonbacktracers x corefmtwriteh f f eb c at srclibcorefmtmodrs x stdioWritewritefmthfae bf dea b at srclibstdiomodrs x bd stdsyscommonbacktraceprintha d e at srclibstdsyscommonbacktracers x bd stdsyscommonbacktraceprinth ae d a f be at srclibstdsyscommonbacktracers x bd stdpanickingdefaulthookclosureh bfaacab ec at srclibstdpanickingrs x stdpanickingdefaulthookh fa de a at srclibstdpanickingrs x d stdpanickingrustpanicwithhookh c bf a b at srclibstdpanickingrs x ed stdpanickingcontinuepanicfmth c cbca aac ef at srclibstdpanickingrs x dd rustbeginunwind at srclibstdpanickingrs x corepanickingpanicfmthdeb ab at srclibcorepanickingrs x b coreoptionexpectfailedh c ec ee d at srclibcoreoptionrs x c librespotcorechannelChannelrecvpackethe f c x librespotcorechannelChannel as futuresstreamStreampollh ea dab a d x a b librespotcorechannelChannelData as futuresstreamStreampollh f x d librespotaudiofetchAudioFileFetchDataReceiver as futuresfutureFuturepollh e c f x ed futurestaskimplstdseth cf d f b x e aa tokiocurrentthreadCurrentRunnersetspawnh a b ad c x f c tokiocurrentthreadschedulerSchedulerUtickhc f a x e c tokiocurrentthreadEnteredPturnhc f a df f x e a scopedtlsScopedKeyTseth e a aee x f f stdthreadlocalLocalKeyTwithhc f e c x f c stdthreadlocalLocalKeyTwithhd d a ac x f b c stdthreadlocalLocalKeyTwithh e b e b d x f tokiocorereactorCorepollh e ce a x af f tokiocorereactorCorerunh bf ec a ff x bb librespotmainh e eea edfb x a c stdrtlangstartclosurehe ace ff d x d stdrtlangstartinternalclosureh ff b at srclibstdrtrs x d stdpanickingtrydocallhf a bb fb db b at srclibstdpanickingrs x f rustmaybecatchpanic at srclibpanicunwindlibrs x stdpanickingtryh da acad f at srclibstdpanickingrs x stdpaniccatchunwindhaf e a at srclibstdpanicrs x stdrtlangstartinternalh bfca e d at srclibstdrtrs x bc cc main x ccb libcstartmain raspotifyservice Main process exited codeexited status na raspotifyservice Failed with result exitcode raspotifyservice Service RestartSec s expired scheduling restart raspotifyservice Scheduled restart job restart counter is at Stopped Raspotify Starting Raspotify Started Raspotify T Z INFO librespot librespot raspotify v ga ae b Built on Build ID lqPey SF Hi guys Ive read over issue and from what I understand the premium account restriction is in librespot to comply with Spotifys TOS Is it technically possible to stream songs on a free account using the same approach as librespot or is this a server side limitation by Spotify I ask because Id like to use librespot as a base to make a custom player for an embedded device that supports free accounts Ideally Id be able to integrate ad breaks skip limits and everything else needed to comply with Spotify free I just want to know if librespot is a good starting point for me or if whatever APIs it utilizes are limited by Spotify to only premium accounts Hello I was wondering if there was a way to start the clientplayer as an active device according to this api directly from the runtime options because I havent found any programmatical way the only other way is to run librespot then use the officiel clientonline client to make a music play from this device using Spotify Connect If this option isnt available Id be glad if it could be added As I read devcoresrccachers it seems the cachepath is filled with audio files and read from but never expired so eventually the disk will run full I can manually expire old cache entries that have not been used in a time eg with a daily cronjob running find CACHEDIR type f atime delete but maybe you consider pruning the cache in scope Hello I am encountring this error while trying to build librespot Screenshot of the error when compiling librespotcore Same output for cargo build and cargo build release bash successfully compiled crates Compiling librespotcore v homefarisslibrespotcore Compiling tokiocore v Compiling rodio v Compiling tokioproto v Compiling libmdns v Compiling hyper v Compiling hyperproxy v error E use of unstable library feature durationasu see issue coresrcchannelrs if currenttime downloadmeasurementstartasmillis error E use of unstable library feature durationasu see issue coresrcchannelrs currenttime downloadmeasurementstartasmillis as usize error aborting due to previous errors For more information about this error try rustc explain E error Could not compile librespotcore To learn more run the command again with verbose Hi since there are PlayerEvents playerrs for started changed and stopped would it be possible to add events for VolUp and VolDown This way I could control the volume of my receiver by running scripts that use HDMICEC Event better would be to directly integrate HDMICECsupport but I assume this would consume too much time Thanks for your reply Kind regards Hi there Ive tried to build librespot via the docker image for armhf with various flags None of the builds are working Librespot does not connect and stops at T Z INFO librespot librespot f a d Built on Build ID d Ol kL T Z DEBUG librespotconnectdiscovery Zeroconf server listening on I want to use pipe backend for snapcast and userpassword authentication librespot n testname u emailmailcom p secretpass disableaudiocache v backend pipe device tmpsnapfifo Also librespot does not respond to ctrlc at that point Any help Amd build is connecting and works as it should Likewise the java version of librespot but I would prefer the native build 