benchmark between socket io wswrapper and this im exploring what ws should I use for fun xD In my verifyConnection code I am calling an api After the api returns I try to set nexttrue but connection is closed I am testing a node server app to node client app my code function Worker Get websocket server const wss thiswss Get httphttps server const server thisserver wsssetMiddlewareverifyConnection info next consolelogverifyConnection ex consoleloginforeqheadersauthorization ex var tmp inforeqheadersauthorizationsplit Split on a space the original auth looks like Basic Y hhcmxlczoxMjM NQ and we need the nd part var buf new Bufferalloc tmp base create a buffer and tell it the data coming in is base var plainauth buftoString read it back out as a string consolelogDecoded Authorization plainauth At this point plainauth usernamepassword var creds plainauthsplit split on a var username creds var accessToken creds requestget auth bearer accessToken err res body nexttrue if err return consolelogerr consolelogbody ifbody ALIVE consolelogauthenticated varNexttrue else consolelogconnection rejected nexttrue log error error Error socket hang up at createHangUpError httpclientjs at SocketsocketOnEnd httpclientjs at Socketemit eventsjs at endReadableNT streamreadablejs at processtickCallback internalprocessnexttickjs code ECONNRESET disconnected Submitting Bug X Question Suggestion Other Details Hi man today I migrate from Apache to nginx because the number of client connected to websocket server is increased and because I use Apache proxypass to redirect all requests to NodeJS Before of that Ive this Apache configuration on my server Location api RewriteEngine On RewriteCond HTTPUpgrade websocket NC RewriteRule wsslocalhost P ProxyPass ProxyPassReverse Location This work fine with Apache and ClusterWS Now in Nginx I translate it to location ws accesslog on proxypass THE PROBLEM IS HERE proxyhttpversion proxysetheader Upgrade httpupgrade proxysetheader Connection Upgrade proxysetheader Proxy proxysetheader XRealIP remoteaddr proxysetheader XForwardedFor proxyaddxforwardedfor proxysetheader XForwardedProto scheme proxysetheader Host host proxysetheader XNginXProxy true proxycachebypass httpupgrade The problem is that nginx does not support proxypass on wws or ws Now when the requests are redirect to my ClusterWS arent handled by websocket but by default application How I can bypass or solve this problem Submitting Select from following by placing x between brackets ex x Bug do not forget to remove space afterbefore x x Bug x Question Suggestion Other I need to use Redis for token blacklisting but the code below causes the connection to be closed every time How to make it work with Redis callback thiswssaddMiddlewareMiddlewareverifyConnection info next const token thisgetTokenFromUrlinforequrl if token return nextfalse let decodedToken any try decodedToken jwtverifytoken processenvJWTSECRET catch err return nextfalse const id decodedTokenjti if id return nextfalse Redisclientexistsid err Error res any if err return nextfalse if res return nextfalse setinforeq user decodedToken return nexttrue thiswssonconnection socket SocketWS req IUserAuthRequest consolelogClient connected consolelogrequser socketonclose code any reason any consolelogClient disconnected reason code InkedScreenshot LI Submitting Select from following by placing x between brackets ex x Bug do not forget to remove space afterbefore x Bug Question Suggestion x Other Details Describe your bug question suggestion below In case of bug do not forget to mention Node version ClusterWS version Ways to reproduce Is there any plan about providing more language of document Submitting Select from following by placing x between brackets ex x Bug do not forget to remove space afterbefore x Bug x Question x Suggestion Other Details Describe your bug question suggestion below In case of bug do not forget to mention Node version ClusterWS version Ways to reproduce I would like a way to programmatically stop the server Usually this would be done with a close or kill method which would terminate all existing connections then unbind from the port However it seems that the ClusterWS class does not have such a method Usually the websocket connected is available but today it report a issue here is clusterwsminjs WebSocket connection to wsswssamberainsidercombirdstrx failed Error in connection establishment netERRCONNECTIONRESET Submitting Select from following by placing x between brackets ex x Bug do not forget to remove space afterbefore x Bug x Question Suggestion Other Details Whats the suggested brokerperworker ratio Like if you want to spawn X workers you should use Y brokers Im asking because I noticed sometimes the worker will show an alert that it could not find any broker so Im assuming its something related to it Submitting Select from following by placing x between brackets ex x Bug do not forget to remove space afterbefore x Bug Question X Suggestion Other Details Describe your bug question suggestion below In case of bug do not forget to mention Node version ClusterWS version Ways to reproduce Pass custom logger to the ClusterWS instance with mainly used functions error info ex js new ClusterWS logger error msg consolelogmsg info msg consolelogmsg It is useful if you use some kind of logger system such as Papertrail to easily track logs coming from ClusterWS Submitting Select from following by placing x between brackets ex x Bug do not forget to remove space afterbefore x Bug Question x Suggestion Other Details Describe your bug question suggestion below In case of bug do not forget to mention Node version ClusterWS version Ways to reproduce Add option to the ClusterWS to specify different path than root for WebSocket connections ex js new ClusterWS wssUrl socket 