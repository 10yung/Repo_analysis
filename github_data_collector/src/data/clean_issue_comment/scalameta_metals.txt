Describe the bug The rundebug option is moving to weird positions and not just above the App entry point See screenshot To Reproduce Steps to reproduce the behavior Use the following code scala trait Foo val a val b val c object Lab extends App The spaces are very weirdly important for the bug Make sure that the file name will be Lab scala Expected behavior The rundebug should appear only above the entry point Screenshots Installation Operating system Windows Editor Visual Studio Code Metals version v Additional context None Describe the bug Undo ctrlz doesnt revert changes made by Rename symbol on different files To Reproduce Steps to reproduce the behavior Create a case class in one file and second case class in another file File scala case class Notevalue String File scala case class Testnote Note Then use the feature Rename Symbol or F to rename Note to a different name After the rename use Undo or CtrlZ to revert back the name to the original Note Expected behavior All occurrences of the symbol across all files should be reverted back Installation Operating system Windows Editor Visual Studio Code Metals version v Search terms refactor rename undo Describe the bug When trying to compile a project crossbuilt against Scala Native the import fails with an error message INFO error no clang clang clang clang clang clang clang clang clang clang clang clang clang clang clang clang clang clang clang clang clang found in PATH Install clang To Reproduce Steps to reproduce the behavior Open VS Code with an application crossbuilt against Scala Native I experienced when working on ZIO Import build Check logs See error Expected behavior Would expect build to be successfully imported and normal functionality to be available including run and debug Installation Operating system macOS Editor Visual Studio Code Metals version v Additional context Was working fine on last version of Metals ekrich reported that he was experiencing the issue as well adamfraserAdamsMacBook Desktop usrbinclang version Apple clang version clang Target x appledarwin Thread model posix InstalledDir LibraryDeveloperCommandLineToolsusrbin Search terms Scala Native Run Debug Import Build As mentioned recently on gitter Please assign to me so I dont forget to contribute this Describe the bug A clear and concise description of what the bug is To Reproduce Steps to reproduce the behavior Set up the new Pants integration by setting metalspantstargetssomething Attempt to import the build lspmetalsbuildimport in Emacs Pants get invoked with the concurrent option which is not supported in older versions of Pants causing the import to fail Expected behavior Build imported and outoffile completion available Installation Metals version v Additional context The solution would be to either add an option to toggle the concurrent option or have metals autodetect if Pants supports concurrent before invoking it Search terms Pants v Build Describe the bug When Ive updated my metals installation to and snapshot Im unable to properly import my project I suspect that the issue may be related with my custom cacerts For previous version it worked fine When I run my emacs after some time I get this error INFO started Metals version f cSNAPSHOT in workspace myworkspace INFO time initialize in s INFO running nixstorewilpyg acq fglcchd gh gl hb fjetbrainsjdk b jrebinjava DjlineterminaljlineUnsupportedTerminal Dsbtlognoformattrue DfileencodingUTF DjavaxnetssltrustStorepathtomycacerts DjavaxnetssltrustStorePasswordchangeit Xss K jar tmpmetals sbtlaunchjar Dbloopexportjarclassifierssources bloopInstall D Waiting for a connection at localtmpbsplauncher bspsocket The server is listening for incoming connections at localtmpbsplauncher bspsocket Starting thread that pumps stdin and redirects it to the bsp server Starting thread that pumps server stdout and redirects it to the client stdout INFO tracing is disabled for protocol BSP to enable tracing of incoming and outgoing JSON messages create an empty file at myhomecachemetalsbsptracejson ERROR Timeout waiting for buildinitialize response ERROR Failed to connect with build server no functionality will work javautilconcurrentTimeoutException at javautilconcurrentCompletableFuturetimedGetCompletableFuturejava at javautilconcurrentCompletableFuturegetCompletableFuturejava at scalametainternalmetalsBuildServerConnectioninitializeBuildServerConnectionscala at scalametainternalmetalsBuildServerConnectionanonfunfromSockets BuildServerConnectionscala at scalautilSuccessanonfunmap Tryscala at scalautilSuccessmapTryscala at scalaconcurrentFutureanonfunmap Futurescala at scalaconcurrentimplPromiseliftedTree Promisescala at scalaconcurrentimplPromiseanonfuntransform Promisescala at scalaconcurrentimplCallbackRunnablerunPromisescala at javautilconcurrentThreadPoolExecutorrunWorkerThreadPoolExecutorjava at javautilconcurrentThreadPoolExecutorWorkerrunThreadPoolExecutorjava at javalangThreadrunThreadjava WARN Stopped configuration of SemanticDB in Scala projects Error downloading orgscalametasemanticdbscalac not found myhomedirivy localorgscalametasemanticdbscalac ivysivyxml download error Caught javaxnetsslSSLHandshakeException sunsecurityvalidatorValidatorException PKIX path building failed sunsecurityprovidercertpathSunCertPathBuilderException unable to find valid certification path to requested target sunsecurityvalidatorValidatorException PKIX path building failed sunsecurityprovidercertpathSunCertPathBuilderException unable to find valid certification path to requested target while downloading not found Jan AM orgeclipselsp jjsonrpcservicesGenericEndpoint notify WARNING Unsupported notification method textDocumentwillSave Steps to reproduce the behavior This is how metals was installed I tried both snapshot and release coursier JDjavaxnetssltrustStorepathtomycacerts JDjavaxnetssltrustStorePasswordchangeit bootstrap javaopt Xss m javaopt Xms m javaopt Dmetalsclientemacs javaopt DjavaxnetssltrustStorepathtomycacerts javaopt DjavaxnetssltrustStorePasswordchangeit orgscalametametals f cSNAPSHOT r bintrayscalacenterreleases r sonatypesnapshots o HOMEbinmetalsemacs f Ive never used custom bloop installation It was always embedded one I suspect that something bloop no longer respects DjavaxnetssltrustStore option or it wasnt passed somehow there Of course Ive placed jvmopts file in the root of my project with the following content it worked with metals DjavaxnetssltrustStorepathtomycacerts DjavaxnetssltrustStorePasswordchangeit Moreover I see that something has changed when it comes to sbtbloop installation and from now on you use additional sbt file git status On branch master Your branch is up to date with originmaster Untracked files use git add file to include in what will be committed projectmetalssbt nothing added to commit but untracked files present use git add to track Installation Operating system nixos Editor emacs Metals version v or f cSNAPSHOT Search terms build import javaxnetssltrustStore jvmopts Question Metals import sbt build failed to work on VSCode when using remoteSSH to a CentOS machine log INFO warn INFO warn UNRESOLVED DEPENDENCIES INFO warn INFO warn chepflscalasbtbloop RC not found INFO warn INFO warn INFO warn Note Some unresolved dependencies have extra attributes Check that these dependencies exist with the requested attributes INFO warn chepflscalasbtbloop RC scalaVersion sbtVersion INFO warn INFO warn Note Unresolved dependencies path INFO warn chepflscalasbtbloop RC scalaVersion sbtVersion mntssdliushisparksourceprojectmetalssbtL INFO warn defaultsparksourcebuild SNAPSHOT scalaVersion sbtVersion INFO sbtResolveException unresolved dependency chepflscalasbtbloop RC not found INFO at sbtIvyActionssbtIvyActionsresolveIvyActionsscala omitted Installation Operating system CentOS via remoteSSH from a macOS machine Editor Visual Studio Code Metals version v Describe the bug Taking the same multiline string in both a scala file and a worksheetsc file are returning different indentations with the worksheet one being off by one Given the following in a worksheet youll get the wrong indentation scala val x stripMargin newText this was returned in a sc file newText this was return in the scala file for the same thing To Reproduce Steps to reproduce the behavior Make sure you have the correct editor settings to enable onTypeFormatting Create a val x stripMargin val x enterstripMargin See the wrong indentation Expected behavior Id expect the newText being returned from Metals to have the correct indentation Screenshots Installation Operating system macOS Editor Visual Studio Code and cocmetals with Neovim Metals version v Search terms worksheets multiline strings onTypeFormatting indentation Previously there was not way to override all of the build plugins Bloop versions Now we add a unified setting for doing so one setting should be enough since for each workspace we can only use one build tool Or do we want to have a separate setting for each build tool That would be for different ones Sbt Gradle and Maven I also promoted some setting to LSP ones Describe the bug I am trying to use the new Metals functionality with Caliban I am able to import the build successfully but when I do so I dont see the run and debug options that I see when creating a new workspace from scratch I think it may have to do with the project being cross built against JVM and ScalaJS On one occasion I did see the option but since then it has not reappeared despite numerous attempts including deleting bloop and metals folders and uninstalling and reinstalling Metals To Reproduce Steps to reproduce the behavior Fork Caliban Import the build in Visual Studio Code Navigate to an executable file eg ExampleAppscala See that there is no debug or run option above the definition Expected behavior I would expect the run and debug options to be available and execute the program Installation Operating system MacOS Editor Visual Studio Code Metals version v 