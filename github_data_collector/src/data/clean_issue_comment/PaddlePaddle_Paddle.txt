fluidlite dnn bug lite commit id CI nogradset chenjiaoAngel You must have one RD chenjiaoAngel Recommend luotao or phlrain approval for the pythonpaddlefluidtestsunittestswhitelistnogradsetwhitelistpy which manages the white list of nogradset without value in operators Traceback most recent call last File testfusedembseqpooloppy line in testcheckgrad W Out nogradsetIds checkdygraphFalse File optestpy line in checkgrad userdefinedgrads checkdygraph File optestpy line in checkgradwithplace selfoptype Op AssertionError nogradset must be None optype is fusedembeddingseqpool Op img width altimage src PaddlePaddle paddle coding utf import paddlefluid as fluid import numpy as np class ConvBnLayerfluiddygraphLayer def initself namescope numfilters filtersize stride groups actNone superConvBnLayer selfinitnamescope selfconv d fluiddygraphConv Dconv d numfiltersnumfilters filtersizefiltersize stridestride paddingfiltersize groupsgroups biasattrFalse paramattrfluidParamAttrnameweights selfbatchnorm fluiddygraphBatchNormselffullname numfilters actact def forwardself inputs out selfconv dinputs out selfbatchnormout return out class ShortCutfluiddygraphLayer def initself namescope chout stride superShortCut selfinitnamescope selfchout chout selfstride stride selfconv ConvBnLayerselffullname chout stride def forwardself inputs chin inputsshape if chin selfchout or selfstride return selfconvinputs else return inputs class BottleneckBlockfluiddygraphLayer def initself namescope numfilters stride superBottleneckBlock selfinitnamescope selfconv ConvBnLayerselffullname numfilters filtersize actrelu selfconv ConvBnLayerselffullname numfilters filtersize stridestride actrelu selfconv ConvBnLayerselffullname numfilters filtersize actNone selfshort ShortCutselffullname numfilters stride def forwardself inputs out selfconv inputs out selfconv out out selfconv out short selfshortinputs return fluidlayerselementwiseaddshort out actrelu class DecoderBlockfluiddygraphLayer def initself namescope numfilters superDecoderBlock selfinitnamescope selfdimensionreduction ConvBnLayerselffullname numfilters filtersize actrelu selfconv ConvBnLayerselffullname numfilters filtersize stride actrelu selfconv ConvBnLayerselffullname numfilters filtersize stride actrelu def forwardself inputs featuremap out selfdimensionreductioninputs b c w h outshape out out fluidlayersresizebilinearout outshape w h featuremap out fluidlayersconcat out featuremap axis out selfconv out out selfconv out return out class DecoderfluiddygraphLayer def initself namescope superDecoder selfinitnamescope selfdecode DecoderBlockselffullname selfdecode DecoderBlockselffullname selfdecode DecoderBlockselffullname selfdecode ConvBnLayerselffullname def forwardself inputs featuremap out selfdecode inputs featuremap out selfdecode out featuremap out selfdecode out featuremap out selfdecode out return out class DisResNetfluiddygraphLayer def initself namescope layers superDisResNet selfinitnamescope selflayers layers supportlayers assert layers in supportlayers supported layers are but input layer is formatsupportlayers layers if layers depth elif layers depth else depth numfilters selfbottleneckdeeplist for block in rangelendepth bottleneckblocklist for i in rangedepth block bottleneckblock BottleneckBlockselffullname numfiltersnumfilters block stride if i and block else bottleneckblocklistappendbottleneckblock selfbottleneckdeeplistappendbottleneckblocklist selfdecoder Decoderselffullname selffeaturemap def forwardself inputs out inputs for bottleneckblocklist in selfbottleneckdeeplist for bottleneckblock in bottleneckblocklist out bottleneckblockout selffeaturemapappendout out selfdecoderout selffeaturemap return out if name main with fluiddygraphguard seresnext DisResNetseresnext img npzeros astypefloat label npzeros astypefloat gtbox locallabel label gtbox gtbox gtbox gtbox img fluiddygraphtovariableimg label fluiddygraphtovariablelabel locallabel fluiddygraphtovariablelocallabel outs seresnextimg localout outs gtbox gtbox gtbox gtbox loss fluidlayerssquareerrorcostouts label localloss fluidlayerssquareerrorcostlocalout locallabel meanloss fluidlayersmeanloss meanlocalloss fluidlayersmeanlocalloss totalloss meanlocalloss meanloss totallossbackward printtotalloss step update docker image of CIpy and CIinference because it has updated cmake version from to before Hi Not sure why this happens I defined a class as following with fluiddygraphLayer python class DeConv DfluiddygraphLayer def initself namescope numfilters filtersize stride stddev padding outpadding reluTrue normTrue relufactor usebiasFalse superDeConv Dselfinitnamescope if usebias False debiasattr False else debiasattr fluidParamAttrnamedebiasinitializerfluidinitializerConstant selfdeconv Conv DTransposeselffullname numfilters filtersizefiltersize stridestride paddingpadding paramattrfluidParamAttr namethisisdeconvweights initializerfluidinitializerNormalInitializerloc scalestddev biasattrdebiasattr if norm selfbn BatchNormselffullname numchannelsnumfilters paramattrfluidParamAttr namedewights initializerfluidinitializerNormalInitializer biasattrfluidParamAttrnamedebnbiasinitializerfluidinitializerConstant trainablestatisticsTrue selfoutpadding outpadding selfrelufactor relufactor selfusebias usebias selfnorm norm selfrelu relu def forwardselfinputs todo add usebias if selfusebiasFalse with fluiddygraphguard conv selfdeconvinputs else conv selfdeconvinputs conv fluidlayerspad dconv paddingsselfoutpadding modeconstant padvalue conv tovariableconv if selfnorm conv selfbnconv if selfrelu conv fluidlayersleakyreluconvalphaselfrelufactor return conv But I got the following error when I called this class with a generator defined as following python class generatorfluiddygraphLayer Network Architecture is exactly same as in infoGAN Architecture FC BRFC x x BR dc sBR dc sS from the main we can see that inputdim inputsize and outputdim def initself namescope inputdim outputdim inputsize normTrue supergenerator selfinitnamescope selfinputdim inputdim selfoutputdim outputdim selfinputsize inputsize selffc Linearnamescopenamescope fc inputsizeselfinputdim outputsize selfinputsize selfinputsize selfinputsize selfinputsize if norm with fluiddygraphguard selfbn BatchNormselffullname numchannels selfinputsize selfinputsize paramattrfluidParamAttr namescale initializerfluidinitializerNormalInitializer biasattrfluidParamAttr namebias initializerfluidinitializerConstant trainablestatisticsTrue selfdeconv DeConv Dselffullname numfilters filtersize stride stddev padding outpadding def forwardself input x selffcinput x selfbnx x fluidlayersrelux x fluidlayersreshapex selfinputsize selfinputsize x selfdeconvtovariablex printsize of x in forward discriminatorformatxshape return x The error information is as follows PaddleCheckError unsupported type NULL must be Variable list Variable or tuple Variable at paddlepaddlefluidpybindimperativecc The error line is conv selfbnconv Thanks This PR improves the elementwiseadd MKLDNN kernels test code coverage testdevelop PaddlePaddle CPU IntelR XeonR CPU E v GPU no CentOS Python truevalues layerselementwisemulvalueenc condition axis valueenc condition shape dtype VarTypeFP VarTypeFP homexxpaddleenvlibpython sitepackagespaddlefluidexecutorpy UserWarning The following exception is not an EOF exception The following exception is not an EOF exception Traceback most recent call last File modelsgrammarinferdecoderpy line in module result exerunfeeddata fetchlistoutputs inputs File homexxpaddleenvutilsdebugexecutorpy line in run return selfexerunfluiddefaultmainprogram args kwargs File homexxpaddleenvlibpython sitepackagespaddlefluidexecutorpy line in run sixreraisesysexcinfo File homexxpaddleenvlibpython sitepackagessixpy line in reraise raise value File homexxpaddleenvlibpython sitepackagespaddlefluidexecutorpy line in run useprogramcacheuseprogramcache File homexxpaddleenvlibpython sitepackagespaddlefluidexecutorpy line in runimpl useprogramcacheuseprogramcache File homexxpaddleenvlibpython sitepackagespaddlefluidexecutorpy line in runprogram fetchvarname paddlefluidcoreavxEnforceNotMet C Call Stacks More useful to developers stdstring paddleplatformGetTraceBackStringstdstring const stdstring const char const int paddlememorydetailMetadataCacheloadpaddlememorydetailMemoryBlock const const paddlememorydetailMemoryBlocktotalsizepaddlememorydetailMetadataCache const const paddlememorydetailMemoryBlocksplitpaddlememorydetailMetadataCache unsigned long paddlememorydetailBuddyAllocatorSplitToAllocstdRbtreeconstiteratorstdtupleunsigned long unsigned long void unsigned long paddlememorydetailBuddyAllocatorAllocunsigned long void paddlememorylegacyAllocpaddleplatformCPUPlacepaddleplatformCPUPlace const unsigned long paddlememoryallocationNaiveBestFitAllocatorAllocateImplunsigned long paddlememoryallocationAllocatorFacadeAllocpaddleplatformPlace const unsigned long paddlememoryallocationAllocatorFacadeAllocSharedpaddleplatformPlace const unsigned long paddlememoryAllocSharedpaddleplatformPlace const unsigned long paddleframeworkTensormutabledatapaddleplatformPlace paddleframeworkprotoVarTypeType unsigned long paddleoperatorsElementwiseMulKernelpaddleplatformCPUDeviceContext floatComputepaddleframeworkExecutionContext const const stdFunctionhandlervoid paddleframeworkExecutionContext const paddleframeworkOpKernelRegistrarFunctorpaddleplatformCPUPlace false ul paddleoperatorsElementwiseMulKernelpaddleplatformCPUDeviceContext float paddleoperatorsElementwiseMulKernelpaddleplatformCPUDeviceContext double paddleoperatorsElementwiseMulKernelpaddleplatformCPUDeviceContext int paddleoperatorsElementwiseMulKernelpaddleplatformCPUDe viceContext long operatorchar const char const int constlambdapaddleframeworkExecutionContext const MinvokestdAnydata const paddleframeworkExecutionContext const paddleframeworkOperatorWithKernelRunImplpaddleframeworkScope const paddleplatformPlace const paddleframeworkRuntimeContext const paddleframeworkOperatorWithKernelRunImplpaddleframeworkScope const paddleplatformPlace const const paddleframeworkOperatorBaseRunpaddleframeworkScope const paddleplatformPlace const paddleframeworkExecutorRunPreparedContextpaddleframeworkExecutorPrepareContext paddleframeworkScope bool bool bool paddleframeworkExecutorRunpaddleframeworkProgramDesc const paddleframeworkScope int bool bool stdvectorstdstring stdallocatorstdstring const bool Python Call Stacks More useful to users File homexxpaddleenvlibpython sitepackagespaddlefluidframeworkpy line in appendop attrskwargsgetattrs None File homexxpaddleenvlibpython sitepackagespaddlefluidlayerhelperpy line in appendop return selfmainprogramcurrentblockappendopargs kwargs File homexxpaddleenvlibpython sitepackagespaddlefluidlayersnnpy line in elementwiseop usemkldnn usemkldnn File homexxpaddleenvlibpython sitepackagespaddlefluidlayersnnpy line in elementwisemul return elementwiseopLayerHelperelementwisemul locals File homexxpaddleenvmodelsgrammarnetspy line in selectvalue truevalues layerselementwisemulvalueenc condition axis File homexxpaddleenvmodelsgrammarnetspy line in grammaroutput selectvoutput selectvaluecondselectv inputs valueenc valuelen zerooutput ptrnet grammar File modelsgrammarinferdecoderpy line in outputlayer return selffnoutputinputs actions gmrmask selfdecodevocab selfgrammar File modelsgrammarinferdecoderpy line in grammarstep logits selfoutputlayerlogits actions gmrmask File modelsgrammarinferdecoderpy line in step decodeoutputs decodestates selfgrammarstepcelloutputs nextcellstates states actions gmrmask File modelsgrammarinferdecoderpy line in module outputs states nextinput decodersteptimeNone inputsinputs statesstates actionsactions gmrmaskgmrmask Error Message Summary Error Paddle internal Check failed Please help us create a new issue here we need to find the developer to add a user friendly error message Hint Expected desccheckguards true but received desccheckguards true at paddlepaddlefluidmemorydetailmetacachecc operator elementwisemul error terminate called after throwing an instance of paddleplatformEnforceNotMet what C Call Stacks More useful to developers stdstring paddleplatformGetTraceBackStringstdstring const stdstring const char const int paddlememorydetailMetadataCacheloadpaddlememorydetailMemoryBlock const const paddlememorydetailMemoryBlocktypepaddlememorydetailMetadataCache const const paddlememorydetailBuddyAllocatorFreevoid void paddlememorylegacyFreepaddleplatformCPUPlacepaddleplatformCPUPlace const void unsigned long paddlememoryallocationNaiveBestFitAllocatorFreeImplpaddlememoryallocationAllocation stdSpcountedbasegnucxxLockpolicy Mrelease paddleframeworkVariablePlaceholderImplpaddleframeworkLoDTensorPlaceholderImpl paddleframeworkScopeScope paddleframeworkScopeDropKids paddleframeworkScopeScope paddleframeworkScopePoolDeleteScopepaddleframeworkScope paddleframeworkScopePoolClear Error Message Summary Error Paddle internal Check failed Please help us create a new issue here we need to find the developer to add a user friendly error message Hint Expected desccheckguards true but received desccheckguards true at paddlepaddlefluidmemorydetailmetacachecc W initcc Aborted at unix time try date d if you are using GNU date W initcc PC x unknown W initcc SIGABRT x f de received by PID TID x fa cf a from PID stack trace W initcc x fa cf f unknown W initcc x fa ce f f GIraise W initcc x fa ce d GIabort W initcc x fa f c gnucxxverboseterminatehandler W initcc x fa f e cxxabiv terminate W initcc x fa f ec cxacallterminate W initcc x fa f a a gxxpersonalityv W initcc x fa a d UnwindRaiseExceptionPhase W initcc x fa a d d UnwindResume W initcc x fa bf d paddlememorydetailBuddyAllocatorFree W initcc x fa be cb paddlememorylegacyFree W initcc x fa be d paddlememoryallocationNaiveBestFitAllocatorFreeImpl W initcc x fa a bc stdSpcountedbaseMrelease W initcc x fa a paddleframeworkVariablePlaceholderImplPlaceholderImpl W initcc x fa bbdadd paddleframeworkScopeScope W initcc x fa bbd f paddleframeworkScopeDropKids W initcc x fa bbda d paddleframeworkScopeScope W initcc x fa c f paddleframeworkScopePoolDeleteScope W initcc x fa c paddleframeworkScopePoolClear W initcc x b f capsuledealloc W initcc x f freekeysobject W initcc x aa dicttpclear W initcc x d collect W initcc x e e PyGCCollectNoFail W initcc x b PyImportCleanup W initcc x f PyFinalizeExpart W initcc x c c PyMain W initcc x e main W initcc x fa ce bbd libcstartmain W initcc x e unknown W initcc x unknown Command terminated python python coco shufflenetv ssd epochnum scorepy epochnum aistudio paddle QQ 