 token GetAccessToken gooauth config wechatConfig ENV develop pls review merge VerifySign NotifyResult coupon VerifySign NewServer Server httpHandler Template render go Render render from bytes func ctx Context Renderbytes byte debug fmtPrintlnresponse msg stringbytes ctxWriterWriteHeader err ctxWriterWritebytes if err nil panicerr beego stackoverflow The goroutine responsible for the ResponseWriter exits A better way would be to trigger the work block in the handler write the work to a buffer and then ioCopybuf w to write it out back in the handler Set a timeout to prevent the HTTP connection from timing out on the client side beego go func output BeegoOutput Bodycontent byte error var encoding string var buf bytesBuffer if outputEnableGzip encoding ParseEncodingoutputContextRequest if b n WriteBodyencoding buf content b outputHeaderContentEncoding n outputHeaderContentLength strconvItoabufLen else outputHeaderContentLength strconvItoalencontent Write status code if it has been set manually Set it to afterwards to prevent multiple responseWriteHeader calls if outputStatus outputContextResponseWriterWriteHeaderoutputStatus outputStatus else outputContextResponseWriterStarted true ioCopyoutputContextResponseWriter buf return nil sdk 