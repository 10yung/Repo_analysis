Hi Fernando I am new to spike sorting and I would really appreciate if you could answer some questions that I have First of all I want to sort the interictal spikes which always last about ms and most energy concentrate below Hz The samplingrate was Hz so each spike contains samples I use the Doclustering function following the step The spikes detected and save in matlab variable numbersspikelength set indextime in ms spikesin uV and save as sometingspikesmat run Doclustering I can get some resultsbut I still confuse about them Do I need to do Getspikes first The raw each spike contains samples do I need to do downsample function How many samples should maintain in each spike is the best Could you show me a rang I saw parsortfmin parsortfmax is it suit for my sorting When each spike contains more samples the inspk is larger Dose it mean more coeffecients were chose to do separation And how can I get the same picture as on waveclus when I choose the spike features Do I need to change other parameters Thank you very much I encountered this error when loading data binbash clustermaciexe Bad CPU type in executable Error using load Unable to read file datawcdg lab No such file or directory Error in runcluster line clu load fname dg lab Error in waveclusloaddatabuttonCallback line clutree runclusterhandlespar Error in guimainfcn line fevalvarargin Error in waveclus line guimainfcnguiState varargin Error while evaluating UIControl Callback Thanks Hi Im using WaveClus GUI to sort spikes of one channel data from microwire array recording of rat cortex It generates first figure here fig printCh GUI For the same raw data I run batch codes Getspikes dataPath mat Doclustering Ch spikesmat An it generates this fig printCh After a while when I run the same batch codes it keeps generating same one cluster result fig printCh I use same parameters for these three cases I increased maxtemp to see if clusters were really unseperatable Other changed SPC parameters like this stdmin stdmax I know SPC is stochastic but at least I need to eliminate some noise Cluster It seems it stucks within the same closetobeginingtemperature value Can I at least force it to seperate clusters Changing maxclus to or does not work Could you please let me know if I can extract the detection threshold from already sorted data Thanks Todor Firstly thanks for providing this great toolbox I have some problem on the begining stageSorry I am new guy in this field so maybe I asked many silly questions Any help will be appreciated I tried to modify parstdmin according to the original problem but there was still an error the error is as follows Waveclus didnt find a sampling rate in file It will use the set in setparametersm Error using waveclusloaddatabuttonCallback line Less than spikes detected Error in wavecluswaveclusOpeningFcn line loaddatabuttonCallbackwargvarargin handles Error in guimainfcn line fevalguiStateguiOpeningFcn guihFigure guidataguihFigure varargin Error in waveclus line guimainfcnguiState varargin waveclusloaddatabuttonCallback line Less than spikes detected Error in wavecluswaveclusOpeningFcn line loaddatabuttonCallbackwargvarargin handles Error in guimainfcn line fevalguiStateguiOpeningFcn guihFigure guidataguihFigure varargin Error in waveclus line guimainfcnguiState varargin In addition I also found that the parameter of waveclus datahandlermaxsegments is I got the error below for a seemingly normal file SPC v efficient KNN and mstree SPC v StopRunAtBreak option SPC v new param file revised data structures error at line of paramc N I ran this in a large loop with many similar files yet this is the only one which yielded this result even among files collecting immediately before and after this one a little digging around shows that at the top of the runcluster code when the tmp file is loaded dat loadparfnamein Dont add path here it needs to be added before n lengthdat fid fopensprintfsrun parfilepath filesep fname wt dat comes up empty despire the fact the spikes file has spikes in it Any thoughts Hi I just started to use WaveClus because I am interested in doing spike sorting on my data In particular my signals have been acquired in vivo using a probe inserted into the rat somatosensory cortex being anesthetized using urethane The sampling frequency is kHz I have two concerns Firstly I noticed that I always get a Cluster containing a high number of notassigned spikes even though those spikes have amplitude and shape highly similar to other spikes that instead got assigned to a specific cluster In the following figure Ch I show you an examplel with a zoom on the electrophysiological trace There are spikes two assigned to the red cluster Cluster and two assigned to the black cluster Cluster To me it looks like they should belong to the same cluster so I wonder if this could be a matter of shape signal or of tuning of specific parameters even if I already tried to play with SPC parameters such as minclus Do you have any suggestion about this point Ch Secondly there are several cases in which I have a sustained activity where no isolated spikes are present see figure below Ch and the activity is bursting with spikes very close to each other In this case just one cluster is detected even though there are events characterized by very different shape and amplitude Again I tried to play a little bit with parameters value but without any improvement Ch Any help andor suggestion would be very appreciated If you need other images or material to better document the issues please ask Best Marta Hi I ran batch mode with the default parameters for my silicon probe data But the results werent satisfactory in particular for one channel which has a unit with a great signaltonoise ratio ideal for manual spike sorting Waveclus somehow ignored the largest and clean unit entirely This is the result of Waveclus automatic spike sorting shown in Spike The large amplitude unit in the bottom channel is completely missing in the top channel for sorted units only much smaller ones were counted Image Now Im trying to get better results by using GUI and changing parameters But so far I havent managed to see the large unit as a cluster in the GUI Maybe Im overlooking some very basic parameters My best bet was parstdmax but even with times bigger value the large unit was still ignored parstdmax maximum threshold for detection Can someone give me an advice Best Kouichi Hi WaveClus team We wanted to ask you if you can implement WaveClus in the SpikeInterface project which is the engine behind SpikeForest With magland we are merging the SpikeForest and SpikeInterface implementation so that SpikeForest will call the SpikeInterface sorter wrappers which will only be maintained in one place The sorter wrappers are in this repo and I made an issue for the WaveClus implementation where we can discuss the details Please let us know how we can help for the implementation There should be plenty of examples among the other implemented wrappers The matlab ones are kilosort kilosort and ironclust Cheers Alessio the SpikeInterface Team