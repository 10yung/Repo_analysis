Several changes required for the PRFmodel project Now vistasoft can handle D files Changes in a couple of functions making function calls explicit instead of eval calls It is a requirement for deployed code Changes to rmSet so that one oval gaussian returns Thetas Dear all Another question on my Macbook Mojave mrMesh does work but there is an issue with transferring the ROI from the brains surface in the Mesh window to the Gray volume window I figured out a seemingly easy fix but if someone can confirm that it is a valid fix and wont cause any problems that would be great It appears that while Volumex updates the Mesh number eg Volume meshNum d it does not get updated in the vw variable mrMesh tries to find the selected mesh in view and crashes If I make the following change in the function meshROI Volume it appears to update the variable vw to Volume in my case but presumably the current volume and the issue dissappears vw now also contains the substructure meshNum d The change replace if notDefinedvw vw getSelectedVolume end by vw getSelectedVolume line Does anyone see any issue with this temporary fix Thank you In our lab I need a lab laptop that can run mrVista While I have succeeded multiple times in getting most of mrVista to run on both Windows and Ubuntu I keep having trouble with getting mrMesh to run on Linux This system has crashed multiple times despite checking advice online and from personal contacts who use mrMesh as well On my personal Macbooks El Capitan Mojave I got mrVista and mrMesh to run without any problems but I have read about issues with eg High Sierra I can most likely not get exactly the same specs for a new lab Macbook My question to fellow Macbook users what version of Mac OS are you using currently Are there any known unpublished issues with the newer Mac OS systems Mojave Catalina Do you have input on what kind of Macbook specs to look for or watch out for Hello experts I use MATLAB on a windows machine Im working on my retinotopy project and trying to perform pRF analysis using vistasoft The issue happens when opening mrVista with the inplane image mounted I click on Gray GrayWhite segmentation Install or reinstall segmentation I install the classification image NIFTI but when the process starts I get the an error that obliges me to close and restart MATLAB Please have a look at the file error It has been saved automatically by MATLAB matlabcrashdump txt Thank you in advance for the help I dont know how to proceed receiving this error Marco I am running dtiInit on a Mac with Matlab R a and get several errors with the mex files when running dtiInit I could easily resolve some my recompiling with the code suggested in dtiCompileMex but this needs serious updating see suggestions below and dtiFitTensor is not running correctly My current work around is to use the dtiInit docker but the dtiFitTensor needs to be fixed Am happy to troubleshoot or test necessary updates to dtiCompileMex compatibleArrayDims needs to be added to the mex build code dtiFiberTrackerc builds runs correctly with mex O compatibleArrayDims Ijama dtiFiberTrackercxx dtiSplitTensorc buildsruns correctly with mex v compatibleArrayDims dtiSplitTensorc error dtiFitTensorc It needs to have zero removed after return from line to compile but output is not sensible zeros instead of pdd Ive made various updates so that vistasoft can handle mil fibers in tck with G G of memory The current implementation of some diffusion related functions are very inefficient and require much larger memory than necessary Ive made the following updates updated externalmtrixexternal code from the latest version found in mrtrix repo I am not sure why these are hosted in vistasoft but they are old and it was missing writemrtrixtracksm altogether refactored code necessary to parse tck headers so that this can be used to both import and export fileFiltersmrtrixdtiImportFibersMrtrixm was updated to load tck data in batch Previously the entire raw data was loaded all at once before creating copies of the entire data to preprocess data By doing these process in batch the function now uses slightly more than the entire size of the tck Ive also updated so that this function now load the tck stored in bit float as singleprecision array This cuts the memory requirement by half and makes it possible to process million fibers in G of memory To handle larger number of fibers further memory optimization is necessary nearpointsmex was updated to allow handling of both single and double precision data Ive also added various new error checking For example destPrt roi coords could be empty and nearpoint could crash Now it displays error message dtiIntersectFibersWithRoim was updated to not crash if fgfibers is empty dtiRoiNiftiFromMatm was updated to check if the input refImg is already loaded Ive also replaced the deprecated function niftiGetStruct with niftiCreate as suggested All of these changes should be backward compatible and Ive been testing these with our various Apps although there might be some corner cases still I will fix them if that is the case This is not a bug but I would like to share what I found in dtiInit nowadays conTrack requires pddDispersionniigz When I simply used least square ls for tensor fitting in dtiInit this file is automatically created in the process However when I used RESOTRE method in dtiInit rt it seems to be that dtiRawFitTensorRobustm did not create pddDispersionniigz because the code may not perform a bootstrapping Therefore I noticed that we cant run conTrack analysis on dt structure created using RESTORE algorithm Nothing is wrong about this but this could be an existing limitation of the current pipeline Hypothetically speaking if the streamline coordinates of the input fg are not in double precision float doesnt this double the ram usage without any associated gain in precision Indeed at this point its actually single point precision so it seems that this is necessarily the case Also even in cases where the input is in double point precision is that level of precision actually useful given the diffusion resolutions we are typically working with Is this line necessary I have added a line that writes a timestamp field to the tck file In my experience this allows visualizing the streamlines in mrview Dear all Im running dtiInitwith SPM Matlab alatest Vistasoft release in windows and having some problems in getting Brain extraction using BET the following error occurs data will be saved to D data dtiasq cdn sub dti trilin Computing brain mask from average b saving data as int Warning Brain extraction using BET failed using a simple threshold method In dtiRawFitTensorMex line In dtiInit line Fitting the tensor model Error using dtiFitTensor Too many input arguments Error in dtiRawFitTensorMex line dt pddmdStdfaStdpddDisp dtiFitTensordX bspermutationsliberalBrainMask Error in dtiInit line dt FileName dtiRawFitTensorMexdwRawAligned dwDiralignedBvecsFile Thank you Best liyanyan