Thank you for sharing your work I have issue as below Linking CXX executable binFilePollerTest Built target FilePollerTest Building CXX object CMakeFilesSSLContextManagerTestdirssltestSSLContextManagerTestcppo homexxxxxxxxxwanglewanglessltestSSLContextManagerTestcpp In member function virtual void wangleSSLContextManagerTestDISABLEDTestSessionContextIfSuppliedTestTestBody homexxxxxxxxxwanglewanglessltestSSLContextManagerTestcpp error aggregate wangleSSLCacheOptions cacheOptions has incomplete type and cannot be defined SSLCacheOptions cacheOptions homexxxxxxxxxwanglewanglessltestSSLContextManagerTestcpp In member function virtual void wangleSSLContextManagerTestDISABLEDTestSessionContextIfSessionCacheAbsentTestTestBody homexxxxxxxxxwanglewanglessltestSSLContextManagerTestcpp error aggregate wangleSSLCacheOptions cacheOptions has incomplete type and cannot be defined SSLCacheOptions cacheOptions CMakeFilesSSLContextManagerTestdirbuildmake recipe for target CMakeFilesSSLContextManagerTestdirssltestSSLContextManagerTestcppo failed make CMakeFilesSSLContextManagerTestdirssltestSSLContextManagerTestcppo Error CMakeFilesMakefile recipe for target CMakeFilesSSLContextManagerTestdirall failed make CMakeFilesSSLContextManagerTestdirall Error Makefile recipe for target all failed make all Error Thanks Starting build The CXX compiler identification is GNU The C compiler identification is GNU Check for working CXX compiler binc Check for working CXX compiler binc works Detecting CXX compiler ABI info Detecting CXX compiler ABI info done Detecting CXX compile features Detecting CXX compile features done Check for working C compiler bincc Check for working C compiler bincc works Detecting C compiler ABI info Detecting C compiler ABI info done Detecting C compile features Detecting C compile features done Found folly usr Found fizz usr Found Boost lib cmakeBoost BoostConfigcmake found version found components system thread filesystem regex context programoptions Found OpenSSL usrliblibcryptoso found version d Found glog usrliblibglogso Found gflags from package config gflagsCONFIGlib cmakegflagsgflagsconfigcmake Found libevent usrliblibeventso Found doubleconversion usrliblibdoubleconversionso Found Threads TRUE Found librt usrliblibrtso Performing Test HAVECXXATOMICSWITHOUTLIB Performing Test HAVECXXATOMICSWITHOUTLIB Success Looking for SSLSESSIONdup in ssl Looking for SSLSESSIONdup in ssl found Check if compiler accepts pthread Check if compiler accepts pthread yes Found gmock via config defines includeusrinclude libsGTestgmockmainGTestgmockGTestgtest CMake Error The following variables are used in this project but they are set to NOTFOUND Please set them or make sure they are set and tested correctly in the CMake files dataaurbuildyaourttmprootaurwanglesrcwangle wangleBoostINCLUDEDIR used as include directory in directory dataaurbuildyaourttmprootaurwanglesrcwangle wangle Configuring incomplete errors occurred See also dataaurbuildyaourttmprootaurwanglesrcwangle wanglebuildCMakeFilesCMakeOutputlog See also dataaurbuildyaourttmprootaurwanglesrcwangle wanglebuildCMakeFilesCMakeErrorlog ERROR A failure occurred in build Aborting Linking CXX executable binTLSCredProcessorTest liblibwangleaTLSCredProcessorcppo In function stdvectorfollydynamic stdallocatorfollydynamic follydynamicgetstdvectorfollydynamic stdallocatorfollydynamic TLSCredProcessorcpptextZN folly dynamic getISt vectorIS SaIS EEEERTv ZN folly dynamic getISt vectorIS SaIS EEEERTv x undefined reference to follydynamicTypeInfostdvectorfollydynamic stdallocatorfollydynamic name liblibwangleaTLSCredProcessorcppo In function follydynamicObjectImpl follydynamicgetfollydynamicObjectImpl TLSCredProcessorcpptextZN folly dynamic getINS ObjectImplEEERTv ZN folly dynamic getINS ObjectImplEEERTv x undefined reference to follydynamicTypeInfofollydynamicObjectImplname liblibwangleaTLSCredProcessorcppo In function stdcxx basicstringchar stdchartraitschar stdallocatorchar follydynamicgetstdcxx basicstringchar stdchartraitschar stdallocatorchar TLSCredProcessorcpptextZN folly dynamic getINSt cxx basicstringIcSt chartraitsIcESaIcEEEEERTv ZN folly dynamic getINSt cxx basicstringIcSt chartraitsIcESaIcEEEEERTv x undefined reference to follydynamicTypeInfostdcxx basicstringcha r stdchartraitschar stdallocatorchar name collect error ld returned exit status CMakeFilesTLSCredProcessorTestdirbuildmake recipe for target binTLSCredProcessorTest failed make binTLSCredProcessorTest Error CMakeFilesMakefile recipe for target CMakeFilesTLSCredProcessorTestdirall failed make CMakeFilesTLSCredProcessorTestdirall Error Makefile recipe for target all failed make all Error I feel this is related the constexpr anem at define FOLLYDYNAMICDEFTYPEINFOT constexpr const char dynamicTypeInfoTname constexpr dynamicType dynamicTypeInfoTtype If the code is designed in this way will compiler or linker still expose the definition I tried to move the definition to follydynamicinth The error was gone However is this the correct fix Does anyone else have the similar issue Reduces compiled size slightly This is pull request was created automatically because we noticed your project was missing a Code of Conduct file Code of Conduct files facilitate respectful and constructive communities by establishing expected behaviors for project contributors This PR was crafted with love by Facebooks Open Source Team Hello Wanglers If I had to share some common state between filters in the Pipeline what is the recommended way to do this Say the first filter unwraps a network packet which contains header with information about the entire connection duration that can be shared between different filters how do I extract this informationheader in one filter and populate a map or something that can be used by other filters thanks UserslijunDownloadswangle wangleutilFilePollercpp warning stat is deprecated first deprecated in macOS Wdeprecateddeclarations int ret stat pathcstr info usrincludesysstath note stat has been explicitly marked deprecated here int stat const char struct stat OSXAVAILABLEBUTDEPRECATEDMAC MAC IPHONENAIPHONENA UserslijunDownloadswangle wangleutilFilePollercpp error no member named stmtim in stat stdchronosecondsinfostmtimtvsec UserslijunDownloadswangle wangleutilFilePollercpp error no member named stmtim in stat stdchrononanosecondsinfostmtimtvnsec I want to implement simple SIP frame decoder as you know SIP protocol is similar to HTTP protocol From the docs I think I should implement ByteToMessageDecoder I also inspects proxygen source but I didnt find similar approach for HTTP messages What is the best way to handle SIPHTTP messages with wangle Is implementing ByteToMessageDecoder a good approach Hi Team I used clang and ASAN to build wangle and multiple memory leaks was detected in wanglewanglebinBootstrapTest This is the ASAN information ERROR LeakSanitizer detected memory leaks Direct leak of bytes in objects allocated from x fbabf a in operator newunsigned long usrlibx linuxgnulibasanso xe x d e in TestClientPipelineFactorynewPipelinestdsharedptrfollyAsyncTransportWrapper homeinput DesktopwanglewanglebinBootstrapTest x af x d f fde in wangleBaseClientBootstrapwanglePipelinefollyIOBufQueue stduniqueptrfollyIOBuf stddefaultdeletefollyIOBuf makePipelinestdsharedptrfollyAsyncTransportWrapper homeinput DesktopwanglewanglebinBootstrapTest x cde x d f d eb in wangleClientBootstrapwanglePipelinefollyIOBufQueue stduniqueptrfollyIOBuf stddefaultdeletefollyIOBuf ConnectCallbackconnectSuccess homeinput DesktopwanglewanglebinBootstrapTest x a eb x fbabeb b d in follyAsyncSocketinvokeConnectSuccess homeinput DesktopproxygenproxygenfollyfollyioasyncAsyncSocketcpp x fbabeb f in follyAsyncSockethandleConnect homeinput DesktopproxygenproxygenfollyfollyioasyncAsyncSocketcpp x fbabeb f b in follyAsyncSockethandleWrite homeinput DesktopproxygenproxygenfollyfollyioasyncAsyncSocketcpp x fbabeb d a in follyAsyncSocketioReadyunsigned short homeinput DesktopproxygenproxygenfollyfollyioasyncAsyncSocketcpp x fbabeb e c in follyAsyncSocketIoHandlerhandlerReadyunsigned short homeinput DesktopproxygenproxygenfollyfollyioasyncAsyncSocketh x fbabeb d in follyEventHandlerlibeventCallbackint short void homeinput DesktopproxygenproxygenfollyfollyioasyncEventHandlercpp x fbaba fa usrlibx linuxgnulibevent so x ea Direct leak of bytes in objects allocated from x fbabf b in interceptormalloc usrlibx linuxgnulibasanso xdeb x d e a f in follycheckedMallocunsigned long usrlocalincludefollymemoryMalloch x fbabeb d in follyIOBufoperator newunsigned long homeinput DesktopproxygenproxygenfollyfollyioIOBufcpp x fbabeb d in stdMakeUniqfollyIOBufsingleobject stdmakeuniquefollyIOBuf follyIOBufCreateOp unsigned long follyIOBufCreateOp unsigned long usrincludec bitsuniqueptrh x fbabeb cca in follyIOBufcreateSeparateunsigned long homeinput DesktopproxygenproxygenfollyfollyioIOBufcpp x fbabeb aec in follyIOBufcreateunsigned long homeinput DesktopproxygenproxygenfollyfollyioIOBufcpp x fbabeb a in follyIOBufQueuepreallocateSlowunsigned long unsigned long unsigned long homeinput DesktopproxygenproxygenfollyfollyioIOBufQueuecpp x d e eb in follyIOBufQueuepreallocateunsigned long unsigned long unsigned long homeinput DesktopwanglewanglebinBootstrapTest x bb x d e in follyAsyncUDPServerSocketgetReadBuffervoid unsigned long homeinput DesktopwanglewanglebinBootstrapTest x a x fbabeb e in follyAsyncUDPSockethandleRead homeinput DesktopproxygenproxygenfollyfollyioasyncAsyncUDPSocketcpp x fbabeb a in follyAsyncUDPSockethandlerReadyunsigned short homeinput DesktopproxygenproxygenfollyfollyioasyncAsyncUDPSocketcpp x fbabeb d in follyEventHandlerlibeventCallbackint short void homeinput DesktopproxygenproxygenfollyfollyioasyncEventHandlercpp x fbaba f f usrlibx linuxgnulibevent so x e f Direct leak of bytes in objects allocated from x fbabf a in operator newunsigned long usrlibx linuxgnulibasanso xe x d e in TestClientPipelineFactorynewPipelinestdsharedptrfollyAsyncTransportWrapper homeinput DesktopwanglewanglebinBootstrapTest x af x d f fde in wangleBaseClientBootstrapwanglePipelinefollyIOBufQueue stduniqueptrfollyIOBuf stddefaultdeletefollyIOBuf makePipelinestdsharedptrfollyAsyncTransportWrapper homeinput DesktopwanglewanglebinBootstrapTest x cde x d f d eb in wangleClientBootstrapwanglePipelinefollyIOBufQueue stduniqueptrfollyIOBuf stddefaultdeletefollyIOBuf ConnectCallbackconnectSuccess homeinput DesktopwanglewanglebinBootstrapTest x a eb x fbabeb b d in follyAsyncSocketinvokeConnectSuccess homeinput DesktopproxygenproxygenfollyfollyioasyncAsyncSocketcpp x fbabeb e in follyAsyncSocketconnectfollyAsyncSocketConnectCallback follySocketAddress const int stdmapfollyAsyncSocketOptionKey int stdlessfollyAsyncSocketOptionKey stdallocatorstdpairfollyAsyncSocketOptionKey const int const follySocketAddress const homeinput DesktopproxygenproxygenfollyfollyioasyncAsyncSocketcpp x d e ef in wangleClientBootstrapwanglePipelinefollyIOBufQueue stduniqueptrfollyIOBuf stddefaultdeletefollyIOBuf connectfollySocketAddress const stdchronodurationlong stdratio l l lambda operator const homeinput DesktopwanglewanglebinBootstrapTest x beef x d ebf fd in void follydetailfunctionFunctionTraitsvoid callSmallwangleClientBootstrapwanglePipelinefollyIOBufQueue stduniqueptrfollyIOBuf stddefaultdeletefollyIOBuf connectfollySocketAddress const stdchronodurationlong stdratio l l lambda follydetailfunctionData homeinput DesktopwanglewanglebinBootstrapTest x ec fd x d e f in follydetailfunctionFunctionTraitsvoid operator homeinput DesktopwanglewanglebinBootstrapTest x b f x fbabeb b in follyEventBaserunImmediatelyOrRunInEventBaseThreadAndWaitfollyFunctionvoid homeinput DesktopproxygenproxygenfollyfollyioasyncEventBasecpp x d e f in wangleClientBootstrapwanglePipelinefollyIOBufQueue stduniqueptrfollyIOBuf stddefaultdeletefollyIOBuf connectfollySocketAddress const stdchronodurationlong stdratio l l homeinput DesktopwanglewanglebinBootstrapTest x bf f x d e c c in BootstrapUnixServerTestTestBody homeinput DesktopwanglewanglebootstraptestBootstrapTestcpp x d d f in void testinginternalHandleSehExceptionsInMethodIfSupportedtestingTest voidtestingTest void testingTest char const homeinput DesktopwanglewanglebinBootstrapTest x f x d cdec in void testinginternalHandleExceptionsInMethodIfSupportedtestingTest voidtestingTest void testingTest char const homeinput DesktopwanglewanglebinBootstrapTest x faec x d b f b in testingTestRun homeinput DesktopwanglewanglebinBootstrapTest x def b x d b in testingTestInfoRun homeinput DesktopwanglewanglebinBootstrapTest x df x d b ec in testingTestCaseRun homeinput DesktopwanglewanglebinBootstrapTest x dfec x d b d f in testinginternalUnitTestImplRunAllTests homeinput DesktopwanglewanglebinBootstrapTest x e d f x d d in bool testinginternalHandleSehExceptionsInMethodIfSupportedtestinginternalUnitTestImpl booltestinginternalUnitTestImpl bool testinginternalUnitTestImpl char const homeinput DesktopwanglewanglebinBootstrapTest x x d cec in bool testinginternalHandleExceptionsInMethodIfSupportedtestinginternalUnitTestImpl booltestinginternalUnitTestImpl bool testinginternalUnitTestImpl char const homeinput DesktopwanglewanglebinBootstrapTest x fbc x d b in testingUnitTestRun homeinput DesktopwanglewanglebinBootstrapTest x e x d f c in RUNALLTESTS usrlocalincludegtestgtesth x d f b in main homeinput DesktopwanglewangletestTestMaincpp x fbabbe b in libcstartmain libx linuxgnulibcso x b SUMMARY AddressSanitizer bytes leaked in allocations Please refer to memoryleaktxt for full ASAN leaks 