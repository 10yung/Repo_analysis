 s too long i want Manual refresh ServerList requestserverrun serviceMethodresponseresponseTime pingresponseTime which right thank you very much I have two services one is normal one is abnormal I set the maximum number of attempts is times MaxAutoRetriesNextServer is five times MaxAutoRetries is times single thread can get normal response multithreaded does not return a normal response Isnt the polling of the ribbon not supported for multithreading My env SpringBoot SpringCloud GreenwichSR jdk My configuration ribbonrestclientenabledtrue springcloudloadbalancerretryenabledtrue spidersourceribbonConnectTimeout hystrixcommanddefaultexecutionisolationthreadtimeoutinMilliseconds spidersourceribbonReadTimeout false get spidersourceribbonOkToRetryOnAllOperationstrue bug spidersourceribbonRequestSpecificRetryOntrue spidersourceribbonMaxAutoRetries spidersourceribbonMaxAutoRetriesNextServer Get request can be retried Post cant be retried Please help Whether Separating from eureka alone using Ribbon or using in SpringClouds zuul get request can be retried and post cant be retried ThreadStack PollingServerListUpdater Id WAITING on javautilconcurrentlocksReentrantReadWriteLockNonfairSync adcda at javabase jdkinternalmiscUnsafeparkNative Method waiting on javautilconcurrentlocksReentrantReadWriteLockNonfairSync adcda at javabase javautilconcurrentlocksLockSupportparkLockSupportjava at javabase javautilconcurrentlocksAbstractQueuedSynchronizerparkAndCheckInterruptAbstractQueuedSynchronizerjava at javabase javautilconcurrentlocksAbstractQueuedSynchronizeracquireQueuedAbstractQueuedSynchronizerjava at javabase javautilconcurrentlocksAbstractQueuedSynchronizeracquireAbstractQueuedSynchronizerjava at javabase javautilconcurrentlocksReentrantReadWriteLockWriteLocklockReentrantReadWriteLockjava at comnetflixloadbalancerBaseLoadBalancersetServersListBaseLoadBalancerjava at comnetflixloadbalancerDynamicServerListLoadBalancersetServersListDynamicServerListLoadBalancerjava at comnetflixloadbalancerDynamicServerListLoadBalancerupdateAllServerListDynamicServerListLoadBalancerjava at comnetflixloadbalancerDynamicServerListLoadBalancerupdateListOfServersDynamicServerListLoadBalancerjava at comnetflixloadbalancerDynamicServerListLoadBalancer doUpdateDynamicServerListLoadBalancerjava at comnetflixloadbalancerPollingServerListUpdater runPollingServerListUpdaterjava at javabase javautilconcurrentExecutorsRunnableAdaptercallExecutorsjava at javabase javautilconcurrentFutureTaskrunAndResetFutureTaskjava at javabase javautilconcurrentScheduledThreadPoolExecutorScheduledFutureTaskrunScheduledThreadPoolExecutorjava at javabase javautilconcurrentThreadPoolExecutorrunWorkerThreadPoolExecutorjava at javabase javautilconcurrentThreadPoolExecutorWorkerrunThreadPoolExecutorjava at javabase javalangThreadrunThreadjava Number of locked synchronizers javautilconcurrentThreadPoolExecutorWorker ab c f allServerLock is an Reentrant Lock and the read lock is acquired while read server list and ping each server However the code of reading server list has risk that not release lock while OOM BaseLoadBalancerjava allLock allServerLockreadLock allLocklock allServers allServerListtoArraynew Server allServerListsize allLockunlock WARN erListUpdater cnlPollingServerListUpdater Failed one update cycle javautilConcurrentModificationException null at javautilArrayListItrcheckForComodificationArrayListjava at javautilArrayListItrnextArrayListjava at orgspringframeworkbeansfactorysupportAbstractAutowireCapableBeanFactorypredictBeanTypeAbstractAutowireCapableBeanFactoryjava at orgspringframeworkbeansfactorysupportAbstractBeanFactoryisTypeMatchAbstractBeanFactoryjava at orgspringframeworkbeansfactorysupportDefaultListableBeanFactorydoGetBeanNamesForTypeDefaultListableBeanFactoryjava at orgspringframeworkbeansfactorysupportDefaultListableBeanFactorygetBeanNamesForTypeDefaultListableBeanFactoryjava at orgspringframeworkbeansfactoryBeanFactoryUtilsbeanNamesForTypeIncludingAncestorsBeanFactoryUtilsjava at orgspringframeworkbeansfactoryBeanFactoryUtilsbeanNamesForTypeIncludingAncestorsBeanFactoryUtilsjava at orgspringframeworkbeansfactorysupportDefaultListableBeanFactoryfindAutowireCandidatesDefaultListableBeanFactoryjava at orgspringframeworkbeansfactorysupportDefaultListableBeanFactorydoResolveDependencyDefaultListableBeanFactoryjava at orgspringframeworkbeansfactorysupportDefaultListableBeanFactoryDependencyObjectProvidergetObjectDefaultListableBeanFactoryjava at orgspringframeworkbeansfactorysupportDefaultListableBeanFactoryJsr DependencyProvidergetDefaultListableBeanFactoryjava at comnetflixniwsloadbalancerDiscoveryEnabledNIWSServerListobtainServersViaDiscoveryDiscoveryEnabledNIWSServerListjava at comnetflixniwsloadbalancerDiscoveryEnabledNIWSServerListgetUpdatedListOfServersDiscoveryEnabledNIWSServerListjava at orgspringframeworkcloudnetflixribboneurekaDomainExtractingServerListgetUpdatedListOfServersDomainExtractingServerListjava at comnetflixloadbalancerDynamicServerListLoadBalancerupdateListOfServersDynamicServerListLoadBalancerjava at comnetflixloadbalancerDynamicServerListLoadBalancer doUpdateDynamicServerListLoadBalancerjava at comnetflixloadbalancerPollingServerListUpdater runPollingServerListUpdaterjava at javautilconcurrentExecutorsRunnableAdaptercallExecutorsjava at javautilconcurrentFutureTaskrunAndResetFutureTaskjava at javautilconcurrentScheduledThreadPoolExecutorScheduledFutureTaskaccess ScheduledThreadPoolExecutorjava at javautilconcurrentScheduledThreadPoolExecutorScheduledFutureTaskrunScheduledThreadPoolExecutorjava at javautilconcurrentThreadPoolExecutorrunWorkerThreadPoolExecutorjava at javautilconcurrentThreadPoolExecutorWorkerrunThreadPoolExecutorjava Use a more specific artifact search For just comnetflixribbonribbon we can use For all artifacts under comnetflixribbon we can use Use the lastest comnetflixribbonribbon version in the decalred dependency example public void setMaxTotalPingTimeint maxTotalPingTimeSeconds if maxTotalPingTimeSeconds return thismaxTotalPingTimeSeconds maxTotalPingTimeSeconds loggerdebugLoadBalancer maxTotalPingTime set to name thismaxTotalPingTimeSeconds public int getMaxTotalPingTime return maxTotalPingTimeSeconds is the variable maxTotalPingTimeSeconds used comnetflixloadbalancerBaseLoadBalancer When running a ping by PingUrl to a server that is killed the flag in Server class is set to false However the thread comnetflixloadbalancerDynamicServerListLoadBalancerupdateAllServerList will set it back to true even it should be false