I see hundreds of these messages every day How do I fix this Here is the link to the code E T ERROR b f ccf f be f a ad Couldnt find Widget with id E T ERROR a d f d a bca cc e Couldnt find Widget with id E T ERROR d def f a ff d d bb fe Couldnt find Widget with id E T ERROR b f bfe e a e dba Couldnt find Widget with id E T ERROR d bd a baa ee b e Couldnt find Widget with id E T ERROR bc e ac b b fa cb Couldnt find Widget with id E T ERROR c b ec f fb b bda a cee Couldnt find Widget with id ISSUE Update to rack prevents session id to coerce into a string Please find changes here We are trying to store this into a string on impressionssessionhash which will try to convert it into string before storing Just added impressionist to my Rails ruby project found two deprecation warnings DEPRECATION WARNING Initialization autoloaded the constant ImpressionistController Being able to do this is deprecated Autoloading during initialization is going to be an error condition in future versions of Rails Reloading does not reboot the application and therefore code executed during initialization does not run again So if you reload ImpressionistController for example the expected changes wont be reflected in that stale Module object configautoloader is set to classic This autoloaded constant would have been unloaded if configautoloader had been set to zeitwerk Please check the Autoloading and Reloading Constants guide for solutions And another one here DEPRECATION WARNING ActionDispatchHttpParameterFilter is deprecated and will be removed from Rails Use ActiveSupportParameterFilter instead called from associativecreatestatement at UsersJulienrbenvversions librubygems gemsimpressionist appcontrollersimpressionistcontrollerrb Change the bot filtering system to use the device detector gem Very straightforward swap to use a much better maintained list however introduces an external dependancy Also updates the rake task Took the liberty to also fix some issues with the CI The crawlers list was out of date and was especially ineffective for facebook bots I moved to a more maintained one Hi is it possible to track the views of all the website Thanks Hello I am suddenly receiving a lot of PGCharacterNotInRepertoire exceptions coming from chinese IPs I dont know if this is an attempt at an attack or regular visitors I cant seem to see in the environment variables at the time of the exception where these characters are coming from but I am guessing that this comes from either inserting the requesthash or the referer as impressions The full exception message PGCharacterNotInRepertoire ERROR invalid byte sequence for encoding UTF xe x c x INSERT INTO impressions impressionabletype impressionableid controllername actionname requesthash ipaddress sessionhash referrer params createdat updatedat VALUES RETURNING id Using impressionist v rails v pg v So that impressionist does not stop the website from being browsed I fixed this temporarily by adding to my ApplicationController rb def impressionistrecord super rescue PGCharacterNotInRepertoire end Any hints on how to fix this properly First of all thank you so much for this gem it looks great and the documentation is crystal clear My question We have a Video model which we want to track types of impressions for views and downloads Im using the impressionist method with the message param to differentiate between them impressionistvideo view unique ipaddress message impressionistvideo download unique ipaddress message Is there a way to manage two different cached fields for this model where each one updates by the type of event Thanks again For example Started GET for at Processing by JobsControllerindex as HTML Job Load ms SELECT jobs FROM jobs WHERE jobspublishedat IS NOT NULL ORDER BY jobspublishedat DESC LIMIT OFFSET LIMIT OFFSET appcontrollersjobscontrollerrb User Load ms SELECT users FROM users WHERE usersid ORDER BY usersid ASC LIMIT id LIMIT appcontrollersjobscontrollerrb Impression Exists ms SELECT AS one FROM impressions WHERE impressionsimpressionableid AND impressionsimpressionabletype AND impressionssessionhash LIMIT impressionableid impressionabletype Job sessionhash d d dd a d e f LIMIT appcontrollersjobscontrollerrb Impression Exists ms SELECT AS one FROM impressions WHERE impressionsimpressionableid AND impressionsimpressionabletype AND impressionssessionhash LIMIT impressionableid impressionabletype Job sessionhash d d dd a d e f LIMIT appcontrollersjobscontrollerrb Impression Exists ms SELECT AS one FROM impressions WHERE impressionsimpressionableid AND impressionsimpressionabletype AND impressionssessionhash LIMIT impressionableid impressionabletype Job sessionhash d d dd a d e f LIMIT appcontrollersjobscontrollerrb Im using the impressionist method directly taking all of the Jobs on the page and logging an impression The problem is because Im only recording unique impressions for records that already have an impression these additional calls are redundant I tried to use jobsincludesimpressionseach to preload the associated data hoping Rails was smart enough to figure out which records existed but Rails still outputs numerous Impression Exists queries jobseachjob impressionistjob unique sessionhash 