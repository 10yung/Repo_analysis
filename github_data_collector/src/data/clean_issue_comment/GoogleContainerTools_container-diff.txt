 Issues without logs and details are more complicated to fix Please help us by filling the template below Expected behavior containerdiff diff does not panic due to concurrent map writes Actual behavior Will cause a panic due to concurrent map writes This is because processImage is called in two goroutines processImage eventually calls utilunpackTar which has unsynchronized access to utilhardlinks Information containerdiff version Im trying to figure this out its the kaniko kokoro build Operating system Im trying to figure this out its the kaniko kokoro build Steps to reproduce the behavior I havent seen this error locally only in the kaniko kokoro build Expected behavior A ready to run docker image containing containerdiff on DockerHub or GCR or another public registry Allows for using containerdiff conveniently via docker run without prio installation Actual behavior containerdiff must be installed locally manually before it can be used Information There is an inofficial image on DockerHub but can it be trusted Issues without logs and details are more complicated to fix Please help us by filling the template below Expected behavior Cache directory to be within XDGCACHEHOME and default to be within HOMEcache ie HOMEcachecontainerdiff Actual behavior Cache directory is on containerdiffcache which is a nonstandard location Information containerdiff version Operating system Arch Linux Steps to reproduce the behavior Use containerdiff Expected behavior containerdiff diff daemonlocalimage daemonlocalimage typehistory above command shows the diff Actual behavior fails with fatal error Information containerdiff version v Operating system Ubuntu LTS Steps to reproduce the behavior containerdiff diff daemonlocalimage daemonlocalimage typehistory Additional information docker images on local are approx GB in size Issues without logs and details are more complicated to fix Please help us by filling the template below Expected behavior Some kind of analysis reports Actual behavior containerdiff analyze a fee a ef ERRO error retrieving image a fee a ef UNAUTHORIZED authentication required map Typerepository Class Namelibrarya fee a ef Actionpull Information containerdiff version v Operating system MacOs Mojave Steps to reproduce the behavior Install containerdiff used brew containerdiff analyze a fee a ef Issues without logs and details are more complicated to fix Please help us by filling the template below Expected behavior do not try and pull images that are already locally available Actual behavior trying to pull images from someware and failing due to authorization issues Information containerdiff version v Operating system ubuntu Steps to reproduce the behavior install console curl LO chmod x containerdifflinuxamd sudo mv containerdifflinuxamd usrlocalbincontainerdiff use it console containerdiff diff a b a c b f d ERRO error retrieving image a b a c UNAUTHORIZED authentication required map Typerepository Class Namelibrary a b a c Actionpull error retrieving image a b a c UNAUTHORIZED authentication required map Typerepository Class Namelibrary a b a c Actionpull It goes without saying the images ids are correct and those correspond to images in my computer Ive also tried with names and names tags Expected behavior When running containerdiff diff path to tar file path to tar file typefile multiple times from different directories modifying paths to tar files as needed to point at the same tar files I expected to get the same correct output summary Actual behavior Changing dirs and running containerdiff for the same pair of tar files produces different diff summaries Information containerdiff version v Operating system linux Steps to reproduce the behavior Notes before reproducing The provided image tars have one file that is different that is etcsslcertsjavacacerts In the process of building the image some files were generated and deleted So the final image does not contain the following files varcachefontconfigd a ed a d f f f cle cache varcachefontconfig ef fde cc eeb af e b d le cache varcachefontconfig d c ddfd cd a b e ele cache varcachefontconfig c c bc c e d a eac b le cache Copy the pair of tar files with my existing directory structure gsutil cp r gscontainerdifftest Run the containerdiff tool from the first location cd containerdifftest containerdiff diff testscontribrbetestxenialreprotesttestimg outsimgoutsrbetestxenialwithpkgstar testscontribrbetestxenialreprotesttestimg outsimgoutsrbetestxenialwithpkgstar typefile This produces an output saying that the nonexisting files from above are different between the two images Also it says nothing about the actual file that is different Run the containerdiff tool from another location assuming your current dir is containerdifftest cd testscontrib containerdiff diff rbetestxenialreprotesttestimg outsimgoutsrbetestxenialwithpkgstar rbetestxenialreprotesttestimg outsimgoutsrbetestxenialwithpkgstar typefile This produces the correct output saying that only etcsslcertsjavacacerts is different I would like to see if this change makes sense If so please let me know what tests I should add and where So right now the typefile only reports if the file contents are different but not if the metadata are different Supporting file metadata diff will be useful in developmentdebugging related to file permissions timestamps in containers With the latest release containerdiff help doesnt print anything as it should see Expected behavior bash containerdiff help containerdiff is a CLI tool for analyzing and comparing container images Images can be specified from either a local Docker daemon or from a remote registry To specify a local image prefix the image ID with daemon eg daemongcriofoobar To specify a remote image prefix the image ID with remote eg remotegcriofoobar If no prefix is specified the local daemon will be checked first Tarballs can also be specified by simply providing the path to the tar targz or tgz file Usage containerdiff command Available Commands analyze Analyzes an image diff Compare two images image image help Help about any command version Print the version of containerdiff Flags format string Format to output diff in h help help for containerdiff v verbosity string This flag controls the verbosity of containerdiff default warning Use containerdiff command help for more information about a command Actual behavior bash containerdiff help Usage of containerdiff Information OS Tested on ubuntu and archlinx see issue linked above containerdiff version v Steps to reproduce the behavior Install containerdiff as specific for linux in the READMEmd and then run containerdiff help