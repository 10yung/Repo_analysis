Hello I am using libmodbus version In this library I am not able to identify which modbus protocol version is supported Could you please provide modbus protocol version Also in latest release which modbus protocol version is supported libmodbus version OS andor distribution Linux Gentoo Environment All documentation Description libmodbus on Linux does not install the NEWS and AUTHORS files as part of its installed documentation in usrsharedoclibmodbus This is a problem because they may be needed and are referred to from other files which are installed in that directory Michael Weber patched this in the Gentoo package for but the patch has not made it upstream Its only a oneline change to append AUTHORS NEWS to the value of distdocDATA libmodbus Makefilein libmodbus Makefilein pkgconfigdir libdirpkgconfig pkgconfigDATA libmodbuspc EXTRADIST libmodbuspcin distdocDATA MIGRATION READMEmd distdocDATA MIGRATION READMEmd AUTHORS NEWS SUBDIRS src doc amappend all configh MAKE AMMAKEFLAGS allrecursive apparently you cannot attach a patch file to this tracker so content pasted or download from URL above Issue describes it all Suggest fixing by adding a new pair of solution file project file to the Win directory modbusvs sln A new solution file with recent file format modbusvs vcxproj A new project file with recent file format note extension changed from vcproj to vcxproj this is the new format Also updated gitignore file to accommodate the new way Visual Studio is doing things libmodbus version Version Commit f fe b a f fbb f c bd fce df d OS andor distribution Windows Environment x bits Visual Studio Description Open modbus sln solution with recent versions of Visual Studio will trigger a OneWayUpdate dialog for the solution file and the project file In its current state both files have a very old format Since VS which is releases ago Current release is VS Moreover the project file has a build break when trying to build Debug Bad link argument as version format which currently is Windows support only majorminor Moreover the project doesnt have x build at all Expected behaviour Project build successfully and any DebugRelease and x x combination Actual behaviour Currently x doesnt exist Debug has a break Steps to reproduce the behavior commands or source code Open the project with recent Visual Studio previous test would fail if one byte was non zero But the whole ID need to be Hey the assert in modbusrtuc causes the entire program to abort when the RTU slave ID hasnt been set which is a bummer Here are changes to libmodbus which seem to do what I want cause a later modbusreadregisters to fail with the message Slave not set I did not look very closely at the places where I added return to confirm that it was appropriate but all tests still pass srcmodbushorig srcmodbush MODBUSEXCEPTIONNOTDEFINED MODBUSEXCEPTIONGATEWAYPATH MODBUSEXCEPTIONGATEWAYTARGET MODBUSEXCEPTIONNOSLAVESET MODBUSEXCEPTIONMAX define EMBXMEMPAR MODBUSENOBASE MODBUSEXCEPTIONMEMORYPARITY define EMBXGPATH MODBUSENOBASE MODBUSEXCEPTIONGATEWAYPATH define EMBXGTAR MODBUSENOBASE MODBUSEXCEPTIONGATEWAYTARGET define EMBXNSLAVE MODBUSENOBASE MODBUSEXCEPTIONNOSLAVESET Native libmodbus error codes define EMBBADCRC EMBXGTAR define EMBBADDATA EMBXGTAR define EMBBADEXC EMBXGTAR define EMBUNKEXC EMBXGTAR define EMBMDATA EMBXGTAR define EMBBADSLAVE EMBXGTAR define EMBBADCRC EMBXNSLAVE define EMBBADDATA EMBXNSLAVE define EMBBADEXC EMBXNSLAVE define EMBUNKEXC EMBXNSLAVE define EMBMDATA EMBXNSLAVE define EMBBADSLAVE EMBXNSLAVE extern const unsigned int libmodbusversionmajor extern const unsigned int libmodbusversionminor srcmodbuscorig srcmodbusc return Gateway path unavailable case EMBXGTAR return Target device failed to respond case EMBXNSLAVE return Slave not set case EMBBADCRC return Invalid CRC case EMBBADDATA uint t rsp MAXMESSAGELENGTH reqlength ctxbackendbuildrequestbasisctx function addr nb req if reqlength return rc sendmsgctx req reqlength if rc reqlength ctxbackendbuildrequestbasisctx function addr nb req if reqlength return rc sendmsgctx req reqlength if rc reqlength ctxbackendbuildrequestbasisctx function addr int value req if reqlength return rc sendmsgctx req reqlength if rc reqlength ctxbackendbuildrequestbasisctx MODBUSFCWRITEMULTIPLECOILS addr nb req if reqlength return bytecount nb nb req reqlength bytecount reqlength ctxbackendbuildrequestbasisctx MODBUSFCWRITEMULTIPLEREGISTERS addr nb req if reqlength return bytecount nb req reqlength bytecount reqlength ctxbackendbuildrequestbasisctx MODBUSFCMASKWRITEREGISTER addr req if reqlength return HACKISH count is not used reqlength reqlength ctxbackendbuildrequestbasisctx MODBUSFCWRITEANDREADREGISTERS readaddr readnb req if reqlength return req reqlength writeaddr req reqlength writeaddr x ff reqlength ctxbackendbuildrequestbasisctx MODBUSFCREPORTSLAVEID req if reqlength return HACKISH addr and count are not used reqlength srcmodbusrtucorig srcmodbusrtuc ifndef MSCVER include unistdh endif include asserth include modbusprivateh int addr int nb uint t req assertctxslave if ctxslave errno EMBXNSLAVE return req ctxslave req function req addr shouldnt there be an instead of an hello I am currently writing a program that reads and writes multiple ID registers with a bit machine Password verification is required before writing Password verification process is need to send command to the serial port and then a serial port to write write register function called after confirmation the situation is that I can write and write a success but there will be some errors after the write about reading the register I analyze the reason may be I receive password confirm function of no use for Please advise what function to select and how to use to receive password confirmation thank you The program source code is as follows printfsend password begin n uint t rawreq xC xDC xC xEB xD xE xD xA xA xBA x x x x x x int rsp sizeofuint t printfsend raw n int WS modbussendrawrequestctxrawreqrsp sleep if WS printfsendis OKWSd nWS int rspan sizeofuint t printfwaiting for replay n uint t rspan MODBUSRTUMAXADULENGTH int reccon modbusreceiveconfirmationctx rspan printfrescond nreccon if reccon printfreceiveOKreccond nreccon The results are as follows send password begin send raw C DC C EB D E D A A BA D sendis OKWS waiting for replay Waiting for a confirmation ERROR Operation timed out select F Brescon start write CDMOS D D Waiting for a confirmation D F ERROR modbuswriteregister Address D Val x Hi im trying to read data from a modbus device on my network I have the libmbus example code include stdioh include modbush int mainvoid modbust mb uint t tabreg mb modbusnewtcp modbusconnectmb Read registers from the address modbusreadregistersmb tabreg modbusclosemb modbusfreemb And I compile it with the next command gcc test c o testo pkgconfig libs cflags libmodbus The issue is that i dont know how to open testo file when I open it with nano or cat commands there is nothing readable on it I new on libmbus so any help will be apreciated have a nice day 