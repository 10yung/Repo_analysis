No code changes needed Sublime Text build introduced a new feature to sublimesyntax grammars called branch points The docs havent been published yet but the packages which ship with Sublime Text have started to use this new functionality ie This essentially uses backtracking to effectively allow looking ahead multiple lines up to etc and enables nondeterministic parsing as described at My understanding is that some official documentation should be coming soon but I wanted to log this here now in case we want to get a head start on it ie by experimenting with it in Sublime to see how it works and thinking about how we can go about implementing it for syntect This also serves as a note that updating the sublimehqPackages submodule will likely cause those syntax definitions relying on this new feature to not work as expected until syntect adds support for it This has the same goal as but with a different approach Note that the fancyregex implementation doesnt compile yet but I thought it would be useful to get this reviewed earlier rather than later I havent ported over the regex rewriting changes yet Im hoping that we can generate regexes that work on both onig and fancyregex x Add stderrorError impl for fancyregex see x Release Port regex rewriting changes Examples arent compiling on Windows Compiling onigsys v error failed to run custom build command for onigsys v stdout cargowarningcouldnt execute llvmconfig prefix error The system cannot find the file specified os error cargowarningset the LLVMCONFIGPATH environment variable to a valid llvmconfig executable Hi Im trying to build a HighlightState with a cached initialstack as described in the docs Alternatively you can save space by caching only the path field of this struct then recreate the HighlightState when needed by passing that stack as the initialstack parameter to the new method This takes less space but a small amount of time to recreate the style stack Im probably missing something very new to rust but to me it appears this is guaranteed to crash The first call to updatesinglecacheforpush in HighlightStatenew will pass path of length which results in pathlen panicking with attempt to subtract with overflow Is there an example somewhere of code using HighlightState with a nonempty initialstack What am I missing Thanks ahead and many thanks for building this incredible library As far as I can tell the easyHighlightLines and friends all through Style return a Color containing rgba components Having looked around through the examples and the html parser I was not able to find a place where highlighting occurs over a string of code except defers coloring to some later phase which binds the name or a unique id to the rgba components extracted from the theme If I understand correctly because the theme also contributes FontStyle etc the correct way to implement highlighting onceapply a theme map is via a ScopeRegionIterator which then converts the themes semantic names into both a FontStyleColor map Im not actually parsing to CSS but it would seem like basically the same idea Any pointers in the right direction would be appreciated I was trying to implement syntax highlighting to the previews in hunter but I noticed that syntect drastically increased memory usage after first use I guess it builds up some caches for things Im not sure what exactly is causing this I dont think regexes would be this big but maybe Unfortunately it doesnt seem to be possible to drop the caches or whatever is using that memory In hunters case memory usage went from MB to MB after highlighting the first file A bit too much for my tastes I pretty much just copied over the example code for HighlightFile but instead of printing the lines out I saved them to a buffer As a workaround Im using syntect indirectly through bat now so its not a big issue but maybe it would be nice if it was possible to uninitialize syntect somehow Needs a newer yamlrust to get this fix There are currently test failures and more syntests are failing than before Needs to be investigated Sorry if this is bothersome but Im pretty new to Rust so I dont know how to do what I am asking with the current knowledge I have What I am asking for is this say I have a string that contains the files text a string corresponding to the location of a sublimesyntax file and a string corresponding to the location of a tmtheme file how would I return a syntaxhighlighted HTML string I was trying to use the official Monokaisublimecolorscheme with syntect but it seems this fileformat is not supported or maybe its just me doing something fishy Ive tried to load it both as json or as xml ie used this converter but when feeding it with ThemeSetgettheme it will crash On the other hand if using a proper thTheme such as monokaitmTheme there wont be any problem