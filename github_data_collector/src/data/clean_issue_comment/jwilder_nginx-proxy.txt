If a Dockerfile has EXPOSE set for example but expose is provided during the creation of a container the expose flag is ignored and port is used This seems counterintuitive as youd expect the expose flag to override the Dockerfile default if you like Rebased and new feature that removes the incorrect behavior if the service expects deployment on the domain directly and under root path Without stripping requests fail because the VIRTUALPATH is propagated into the service and service might not be created with such behavior in mind Pretty much none of big projects nowadays because everyone wants separate DNS record that gets translated into Host for nginx to route grimacing Example accessing directly VIRTUALPATH with stripping GET service nginx uses to bump to the correct location GET service nginx allows communication with container GET the request as visible within the service container accessing VIRTUALPATH without stripping GET service nginx routes traffic directly to container GET service the request as visible within the service container service rejects request because cant handle path prefix Tests such as were failing but it seems to be wrong anyway since port should be written with a colon because the slash is a part of a locationroute for nginx Testing Alpine image available on Docker Hub I have a docker container with a websocket inside I need to have access to different container with websockets from one address How do I do that Many thanks I would like to add the following statement to a custom nginxconf in confd folder However when I do that it gives the error nginx emerg loadmodule directive is not allowed here in etcnginxconfdnginxconf This works if it were directly added to the nginxconf in the etcnginx folder but that would require modifying the original file which could cause problems across versions Can we support a way to add loadmodules to the nginxconf If I am using pure nginx everything works fine Angular serviceworker is there But with nginxproxy angular serviceworker is not registered Is there any difference then normal proxy server listen servername SUBDOMAINDOMAINTLD location proxypass proxyhttpversion proxysetheader Upgrade httpupgrade proxysetheader Connection upgrade proxysetheader Host host proxycachebypass httpupgrade If you need to configure Nginx beyond what is possible using environment variables you can provide custom configuration files on either a proxywide or perVIRTUALHOST basis What does this mean exactly I get conf for global stuff ie things that apply to all servers but how do I add specific things to specific servers like rate limiting or gzip using limitreq etc Does the conf file need to be in a specific format for it to be included I read through the nginx tmpl file and cant find how its being included Tried going to the google group to ask the question but getting This group either doesnt exist or you dont have permission to access it If youre sure this group exists contact the Owner of the group and ask them to give you access I have the following files env env DOMAINlocalhostcom dockerwhoamiyml yml version networks default name nginxproxy volumes certs dhpar vhost htmls services nginx image jwildernginxproxy ports volumes certsetcnginxcerts dhparetcnginxdhparam vhostetcnginxvhostd htmlsusrsharenginxhtml varrundockersocktmpdockersockro whoami environment VIRTUALHOST whoamiDOMAIN image jwilderwhoami ports When I run this in compose mode it works shell dockercompose projectname whoami f dockerwhoamiyml up d forcerecreate removeorphans But in swarm mode it just says shell docker stack deploy c dockernginxyml nginx Hello community I try to setup new Docker app using your very nice nginxproxy For only services my proxy work good But i would like proxy services or ports After add new port all proxy return error with this log nginx error no live upstreams while connecting to upstream client xxxxxxxxxx server myappmydomaincom request GET faviconico HTTP upstream host myappmydomaincom referrer You can see my dockercompose file version xcommonvariables commonvariables NODEENV production LOCALUSERID USERID LOCALGROUPID GROUPID PGID PUID TZ EuropeLondon LETSENCRYPTEMAIL MAILERDEFAUTSENDERADDRESS services app build configdocker containername app environment commonvariables VIRTUALHOST appSITEURL VIRTUALPORT LETSENCRYPTHOST appSITEURL ports command yarn webdev volumes app api build configdocker containername api environment commonvariables VIRTUALHOST apiSITEURL VIRTUALPORT LETSENCRYPTHOST apiSITEURL ports command yarn apidev volumes app networks default external name nginxproxy I see multiple ports is supported from docs Maybe ive wrong configuration If i use only services proxy work good Anyone have already use multiple ports Thank you community What happened I tried to execute this container on armv platform which unfortunately fails What you expected to happen I expected it to work outofthe box Error log standardinitlinuxgo exec user process caused exec format error docker image inspect jwildernginxproxy grep i Arch Architecture amd Related 