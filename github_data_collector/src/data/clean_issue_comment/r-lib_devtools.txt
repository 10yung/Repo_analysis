When specifying an invalid path to the pkg option of devtoolsbuild the following error message is returned via the call to pkgbuildbuild Error path must exist This causes some userconfusion because there is a separate unrelated path option for devtoolsbuild that is passed to the destpath option of pkgbuildbuild Without looking at the traceback the user would likely assume that their path option to devtoolsbuild was incorrect rather than the pkg option Two potential solutions are Check the validity of the pkg path in devtoolsbuild prior to calling pkgbuildbuild using a similar set of code to this snippet swapping in pkg instead of path Update the error snippet in pkgbuildbuild to something like Error pkg path must exist From my perspective the first option seems preferable but Im not sure whether that would fit philosophically with your approach of offloading much of the codebase to functions within the pkgbuild package Hi On devtools version fresh install from CRAN devtoolstest encounters an issue with input argument stoponfailureTRUE The closed issue from october was similar Example dummy package available at bash git clone cd dummy R q e devtoolstest stoponfailureTRUE Output devtoolstest stoponfailureTRUE Loading dummy Testing dummy Error in function path filter NULL reporter defaultreporter formal argument stoponfailure matched by multiple actual arguments Calls Anonymous Anonymous force Anonymous force docall Execution halted Session info bash R q e librarydevtools librarytestthat sessionInfo Output librarydevtools librarytestthat sessionInfo Loading required package usethis Attaching package testthat The following object is masked from packagedevtools testfile R version Platform x pclinuxgnu bit Running under Ubuntu LTS Matrix products default BLAS usrlibx linuxgnuopenblaslibblasso LAPACK usrlibx linuxgnulibopenblaspr so locale LCCTYPEenUSUTF LCNUMERICC LCTIMEfrFRUTF LCCOLLATEenUSUTF LCMONETARYfrFRUTF LCMESSAGESenUSUTF LCPAPERfrFRUTF LCNAMEC LCADDRESSC LCTELEPHONEC LCMEASUREMENTfrFRUTF LCIDENTIFICATIONC attached base packages stats graphics grDevices utils datasets methods base other attached packages testthat devtools usethis loaded via a namespace and not attached Rcpp prettyunits ps rprojroot withr digest crayon assertthat R backports magrittr rlang cli remotes fs callr ellipsis desc tools glue pkgload compiler processx pkgbuild sessioninfo memoise Error in fetchkey lazyload database CUsersadminDocumentsRwinlibrary devtoolshelpdevtoolsrdb is corrupt Closes Prepare for release x devtoolscheck x devtoolscheckwindevel rhubcheckforcran revdepcheckrevdepchecknumworkers x Polish NEWS x Polish pkgdown reference index Submit to CRAN x usethisuseversionpatch x Update crancommentsmd x devtoolssubmitcran Approve email Wait for CRAN Accepted tada usethisusegithubrelease usethisusedevversion Tweet It seems that devtoolsbuildvignettesTRUE does not install the Suggests packages prior building the vignette Version devtools Related Hi all I can see that all args besides upgrade and arent being passed through from devtoolsinstalldevdeps to remotesinstalldeps If you agree Im happy to raise a PR and add a test case to cover this Heres a reprex illustrating the bug r librarydevtools Loading required package usethis lets give it a package to install pkg docopt if pkg in rownamesinstalledpackages removepackagespkg Removing package from CUserstimjgDocumentsRwinlibrary as lib is unspecified directory tempdir createdirectory fields listSuggests pkg U Setting active project to CUserstimjgAppDataLocalTempRtmpGABqrf U Creating R U Writing DESCRIPTION Package RtmpGABqrf Title What the Package Does One Line Title Case Version AuthorsR parsed First Last firstlastexamplecom aut cre Description What the package does one paragraph License What license it uses Suggests docopt Encoding UTF LazyData true U Writing NAMESPACE U Setting active project to no active project wont pass through our type arg to remotesinstalldeps installdevdepsdirectory type stopoh no docopt NA CRAN Installing packages docopt Installing package into CUserstimjgDocumentsRwinlibrary as lib is unspecified package docopt successfully unpacked and MD sums checked The downloaded binary packages are in C Users timjg AppData Local Temp RtmpGABqrf downloadedpackages expected behaviour would be to throw the error remotesinstalldepsdirectory dependencies TRUE type stopoh no Error in serializelistrepos type NULL ascii TRUE oh no supCreated on by the reprex package v sup In a package project if I create a vignette with usethisusevignettefoo and then manually edit the YAML header of vignettesfooRmd to have output rmarkdownhtmlvignette keepmd true and then run devtoolsbuildvignetteskeepmd TRUE I get fooRmd fooR and foohtml files in doc but no foomd This may be the desired behavior see which concludes that keepmd true should not produce md files in the vignettes directory when rendering a vignette but if so then the documentation for keepmd in buildvignettes should be clarified so users understand this sessionInfo sessionInfo R version Platform x w mingw x bit Running under Windows x build Matrix products default Random number generation RNG MersenneTwister Normal Inversion Sample Rounding locale LCCOLLATEEnglishUnited States LCCTYPEEnglishUnited States LCMONETARYEnglishUnited States LCNUMERICC LCTIMEEnglishUnited States attached base packages stats graphics grDevices utils datasets methods base other attached packages devtools usethis loaded via a namespace and not attached Rcpp rstudioapi knitr magrittr pkgload R rlang tools pkgbuild packrat xfun sessioninfo cli withr ellipsis remotes assertthat digest rprojroot crayon processx callr clisymbols fs ps testthat memoise glue compiler desc backports prettyunits I cant seem to install private R package on Windows machine with R using devtoolsinstallgithubuserrepo I get the following error message Downloading GitHub repo userrepomaster Error in utilsdownloadfileurl path method method quiet quiet cannot open URL In addition Warning message In basedownloadnoheadersurl path quiet headers method R cannot send HTTP headers with the wininet download method This download will likely fail Please choose a different download method via the downloadfilemethod option The libcurl method is best if available and the wget and curl methods work as well if the corresponding external tool is available See downloadfile Note that I added GITHUBPAT in Renviron I tried passing a different download method but this doesnt work either devtoolsinstallgithubuserrepo method libcurl However I can install without an issue if I use R I am working on the development version of R and isntalled the Rtools When i load devtools I get the error findrtoolsT Scanning R CMD config CC ccpath does not exist Scanning path Scanning registry Found CRtools for WARNING Rtools is required to build R packages but the version of Rtools previously installed in CRtools has been deleted Please download and install Rtools custom from But I did not delete the Rtools directory and it is still there Please let me know how to fix this I am using devtools I have tried installing the devlopment version of devtools to see if that fixes the issue but I get the following error when loading development version of devtools librarydevtools Loading required package usethis Error package or namespace load failed for devtools in getmethod envir home lazyload database CUsersAshwathDocumentsRwinlibrary devtoolsRdevtoolsrdb is corrupt In addition Warning message In getmethod envir home internal error in Rdecompress 