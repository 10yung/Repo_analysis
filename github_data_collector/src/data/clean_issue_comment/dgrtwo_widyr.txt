Ive been benefited from widyrpairwisecount for years It is really fast however recently I need to get all the combinations within the group and I tried use it again but this time I want to keep the group ID Usually I would mutate a new id named id usually and group by this new column and then use pairwisecount But it is really slow Let me give an example librarydplyr dat tibblegroup rep each letter ca b a c a c b e b f count the number of times two letters appear together pairwisecountdat letter group A tibble x item item n chr chr dbl b a c a a b e b f b a c b e b f Any way I could get the group number Just like below librarydplyr librarywidyr dat tibblegroup rep each letter ca b a c a c b e b f dat mutategroup group groupbygroup pairwisecountlettergroup ungroup A tibble x group item item n int chr chr dbl b a a b c a a c c a a c e b b e f b b f But it is rather slow when there are more groups any solutions to make it faster Thanks Hi There I love your package I cant see anything about this in the current issues Ive been trying to create a function that uses widyrpairwisecor using the new tidy eval method embrace but it doesnt work I cant see why Here is a reproducible example librarydplyr librarygapminder librarytidyr librarywidyr this works gapminder pairwisecorcountry year lifeExp dummyfunction functiondata var var var data pairwisecor var var var return this doesnt work dummyfunctiongapminder country year lifeExp This returns Error Invalid column specification Are you able to help Many thanks Session info Session info setting value version R version os Windows x system x mingw ui RStudio language EN collate EnglishUnited Kingdom ctype EnglishUnited Kingdom tz EuropeLondon date Packages package version date lib source assertthat CRAN R backports CRAN R broom CRAN R cli CRAN R crayon CRAN R dplyr CRAN R fansi CRAN R gapminder CRAN R generics CRAN R glue CRAN R janeaustenr CRAN R lattice CRAN R lifecycle CRAN R magrittr CRAN R Matrix CRAN R nlme CRAN R packrat CRAN R pillar CRAN R pkgconfig CRAN R plyr CRAN R purrr CRAN R R CRAN R Rcpp CRAN R reshape CRAN R rlang CRAN R rstudioapi CRAN R sessioninfo CRAN R SnowballC CRAN R stringi CRAN R stringr CRAN R tibble CRAN R tidyr CRAN R tidyselect CRAN R tidytext CRAN R tokenizers CRAN R utf CRAN R vctrs CRAN R widyr CRAN R withr CRAN R zeallot CRAN R The latest version of dplyr on CRAN v and rlang on CRAN v throws such a warning that is a depreciation notice of the use of dataframe Warning message dataframe is deprecated use tibble tidyrnest and tidyrunnest have been deprecated for some time and are defunct in dev tidyr which is slated to become v Heres what we see in revdep checks Im hoping that the recent updates in fuzzyjoin and the thread below give some good leads on how to adapt widyr Let me know if I can be of help I was wondering if there was a function that takes the pairwise differences AB And then I realized maybe having a function that applies any function and applies it in a pairwise manner Something like subtract df pairwisef add df pairwisef multiply df pairwisef Would this be useful If theres interest I might try implementing something like that Im not totally sure if this is a feature or a bug but many pairwise comparisons drop s in the output For instance in the pairwise count example dat dataframegroup rep each letter ca b a c a c b e b f count the number of times two letters appear together pairwisecountdat letter group upper FALSE The output only includes those with a count greater than item item n chr chr dbl a b a c b e b f It would be great to have an option to include all pairs of items My actual use case is for having pairwise similarities of exactly so it would be great to have that feature there as well a bit of a longwinded RepEx but librarygutenbergr Warning package gutenbergr was built under R version librarytidytext librarytidyverse Attaching packages tidyverse v ggplot v purrr v tibble v dplyr v tidyr v stringr v readr v forcats Conflicts tidyverseconflicts x dplyrfilter masks statsfilter x dplyrlag masks statslag librarywidyr Warning package widyr was built under R version TI gutenbergworkstitle Treasure Island pullgutenbergid gutenbergdownload unnesttokens word text countword sort TRUE mutatesource TI Determining mirror for Project Gutenberg from Using mirror Wi gutenbergworkstitle The Wonderful Wizard of Oz pullgutenbergid gutenbergdownload unnesttokens word text countword sort TRUE mutatesource Wiz Co gutenbergworkstitle The United States Constitution pullgutenbergid gutenbergdownload unnesttokens word text countword sort TRUE mutatesource Con JFK gutenbergworkstitle John F Kennedys Inaugural Address pullgutenbergid gutenbergdownload unnesttokens word text countword sort TRUE mutatesource JFK Combine df bindrowsTI Wi Co JFK Do similarity df bindtfidfword source n arrangedesctfidf pairwisesimilaritysource word tfidf upper FALSE sort TRUE A tibble x item item similarity chr chr dbl Wiz TI Con JFK TI JFK Con TI Wiz JFK Con Wiz So far so good but what if I wanted to see which is most likely to say I love you Love tibbleword repI love you source TEST unnesttokensword word countsource word sort TRUE With four sources its possible bindrowsLove df bindtfidfword source n arrangedesctfidf pairwisesimilaritysource word tfidf upper FALSE sort TRUE filteritem TEST selectitem A tibble x item similarity chr dbl TI Wiz JFK Con But with only two it errors out df bindrowsTI Wi bindrowsLove df bindtfidfword source n arrangedesctfidf pairwisesimilaritysource word tfidf upper FALSE sort TRUE filteritem TEST selectitem Error in colnamestmp value citem item value attempt to set colnames on an object with less than two dimensions How come The limit should probably be documented no All examples I saw include only correlations between same variables For example correlations of sales between firms correlations widyrpairwisecorsampleoffirms id year sales What if I want to calculate correlations between different variables for example sales and costs columns correlations widyrpairwisecorsampleoffirms id year csales costs If I understand it right this is not possible since argument value includes only one column Since widyr has two distance based functions namely pairwisedelta and pairwisedist I was wondering if we can take it a step further and add functionality for the data analystscientist to scale these pairwise distances to k dimensions This is done in base R using cmdscale that takes a distance matrix and returns a matrix with each item as a row and each of the k dimensions as columns The points are calculated such that the distance is maintained Example euromat asmatrixeurodist euromat Athens Barcelona Brussels Calais Cherbourg Athens Barcelona Brussels Calais Cherbourg cmdscaleeuromat Athens Barcelona Brussels Calais Cherbourg In the tidy widy way I figured the following way to do this when we have a distance based result from a widyr method librarytidytext libraryjaneaustenr librarywidyr librarytidyverse Attaching packages tidyverse ggplot purrr tibble dplyr tidyr stringr readr forcats Conflicts tidyverseconflicts dplyrfilter masks statsfilter dplyrlag masks statslag austendist austenbooks unnesttokensword text countbook word pairwisedistbook word n From utilsR in widyr package private method didnt want to use colname functionx default stopPlease supply column name call FALSE if ischaracterx returnx if identicalx quoteexpr returndefault if isnamex returnascharacterx if isnullx returnx stopInvalid column specification call FALSE multiscale functiontbl item item value k multiscaletbl colnamesubstituteitem colnamesubstituteitem colnamesubstitutevalue k multiscale functiontbl item item value k tblmatrix tbl spreaditem colnamevalue fill asdataframe removerownames columntorownamesitem asmatrix cmdscaletblmatrix k k asdataframe rownamestocolumnitem astibble austendist multiscaleitem item distance A tibble x item V V chr dbl dbl Sense Sensibility Pride Prejudice Mansfield Park Emma Northanger Abbey Persuasion This can be used for something as shown below where we compare the distances between the austen books separated by euclidean distance austendist multiscaleitem item distance ggplotaesV V color item geompointsize alpha scaleycontinuouslimits c themebw multiscale Ive also solved by adding a fillvalue argument in widely previously used fill for all pairwise functions making correlations take values for missing data instead of NAs and in case of pairwisecor itll be NA and otherwise Since widyr has two distance based functions namely pairwisedelta and pairwisedist I was wondering if we can take it a step further and add functionality for the data analystscientist to scale these pairwise distances to k dimensions This is done in base R using cmdscale that takes a distance matrix and returns a matrix with each item as a row and each of the k dimensions as columns The points are calculated such that the distance is maintained Example euromat asmatrixeurodist euromat Athens Barcelona Brussels Calais Cherbourg Athens Barcelona Brussels Calais Cherbourg cmdscaleeuromat Athens Barcelona Brussels Calais Cherbourg In the tidy widy way I figured the following way to do this when we have a distance based result from a widyr method librarytidytext libraryjaneaustenr librarywidyr librarytidyverse Attaching packages tidyverse ggplot purrr tibble dplyr tidyr stringr readr forcats Conflicts tidyverseconflicts dplyrfilter masks statsfilter dplyrlag masks statslag austendist austenbooks unnesttokensword text countbook word pairwisedistbook word n From utilsR in widyr package private method didnt want to use colname functionx default stopPlease supply column name call FALSE if ischaracterx returnx if identicalx quoteexpr returndefault if isnamex returnascharacterx if isnullx returnx stopInvalid column specification call FALSE multiscale functiontbl item item value k multiscaletbl colnamesubstituteitem colnamesubstituteitem colnamesubstitutevalue k multiscale functiontbl item item value k tblmatrix tbl spreaditem colnamevalue fill removerownames columntorownamesitem asmatrix cmdscaletblmatrix k k asdataframe rownamestocolumnitem astibble austendist multiscaleitem item distance Warning Setting row names on a tibble is deprecated A tibble x item V V chr dbl dbl Sense Sensibility Pride Prejudice Mansfield Park Emma Northanger Abbey Persuasion This can be used for something like this austendist multiscaleitem item distance ggplotaesV V color item geompointsize alpha scaleycontinuouslimits c themebw multiscale Now this method returns a warning because of columntorownames that I would like to get rid of Im searching for one but wanted to know your thoughts before I submit a PR 