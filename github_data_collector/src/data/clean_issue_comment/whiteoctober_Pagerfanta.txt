Sample usecase php pager new Pagerfantanew DoctrineDbalAdapterquery function QueryBuilder queryBuilder return queryBuildergetConnection createQueryBuilder selectCOUNT AS total from queryBuildergetSQL QL setMaxResults setParametersqueryBuildergetParameters The current MongoAdaptor is based on the Depreciated phpmongo driver all post v x drivers are based on the phpmongodb driver that has a different access api We added this library to our api to pass in the results serialized to our UI however it seems like it does not work well with Symfony serializer Any idea why It s cause slowness and performance issues Seems like it s not playing well with the serializer Hi Sam here one of the current maintainers of this project Given that we no longer use PHP in our active projects its becoming harder to give this plugin the time it needs Therefore were looking for new maintainers for this project Wed like any new prospective maintainer to fork this project and then once that fork has moved forward enough to give us confidence in your ownership we would link to your fork prominently from the top of the README here encouraging others to use it instead If youre interested please go ahead and fork if you havent already and start work If youve forked and would like others to help you feel free to reply in this issue with details of your fork Please do reply here if you have questions Thanks in anticipation Currently the DoctrineODMMongoDBAdapter only supports the Query Builder But there is also the Aggregation Builder Adding an additional adapter based on the existing one is actually easy php use Doctrine ODM MongoDB Aggregation Builder use Pagerfanta Adapter AdapterInterface class DoctrineODMMongoDBAggregationAdapter implements AdapterInterface private aggregationBuilder Constructor param Builder aggregationBuilder A DoctrineMongo aggregation builder public function constructBuilder aggregationBuilder thisaggregationBuilder aggregationBuilder Returns the query builder return Builder The query builder public function getAggregationBuilder return thisaggregationBuilder inheritdoc public function getNbResults return thisaggregationBuilderexecutecount inheritdoc public function getSliceoffset length return thisaggregationBuilder limitlength skipoffset execute Unfortunately none of the two builders implement a common Interface But there is another reason why using a single adapter for both use cases could be problematic The aggregation builder uses a pipeline Each time a so called stage eg limit oder sort is added the return value of the assigned variable changes php qb this createAggregationBuilder sort leavingDate limitquerylimit dumpqb Instance of Limit extends Stage qb this createAggregationBuilder qb sort leavingDate limitquerylimit dumpqb Instance of Builder As soon as you pass a Stage instance you can not retrieve the original builder Also there are plans for ODM version which may change this behaviour Maybe alcaeus or malarzm could comment on this too Thanks in advance Possibly related issues ychanan Problem There was currently no way to have offset for pagerfanta disappointed Solution Offset is now working and I also added simple test smile public function getAuthorProductsuuid queryBuilder thiscreateQueryBuildero addSelectauthor innerJoinoauthor author andWhereauthoruuiduuid andWhereoenabledenabled andWhereoisShowisShow setParameterisShow true setParameterenabled true setParameteruuid uuid setFirstResult return thisgetPaginatorqueryBuilder I print the Paginator Query Builder has FirstResult in it But FirstResult didnt work in the end I notice that PagerfantaPagerfanta line is not going to fetch the initial FirstResult private function getCurrentPageResultsFromAdapter offset thiscalculateOffsetForCurrentPageResults length thisgetMaxPerPage return thisadaptergetSliceoffset length private function calculateOffsetForCurrentPageResults return thisgetCurrentPage thisgetMaxPerPage TODO Add docs Deprecate maxResults of ElasticaAdapter Hello I have code qb thiscreateQueryBuildercountry adapter new DoctrineORMAdapterqb thispagerfanta new Pagerfantaadapter thispagerfantasetMaxPerPage thispagerfantasetCurrentPage vardumpthispagerfantagetNbResults vardumpthispagerfantagetCurrentPageResults the result int objectArrayIterator storageArrayIteratorprivate array But I see following lines in devlog doctrineDEBUG SELECT DISTINCT id FROM SELECT c id AS id c name AS name c isocode AS isocode c phonecode AS phonecode c deletedat AS deletedat FROM countries c dctrnresult LIMIT doctrineDEBUG SELECT c id AS id c name AS name c isocode AS isocode c phonecode AS phonecode c deletedat AS deletedat FROM countries c WHERE c id IN object App Domain Country ValueObject CountryId f e d b e d d d e object App Domain Country ValueObject CountryId c f a f c e f object App Domain Country ValueObject CountryId bed c f c d c d d d be object App Domain Country ValueObject CountryId c d cf a e f c object App Domain Country ValueObject CountryId d dea e eceb object App Domain Country ValueObject CountryId d bbc ce ba bcf b e object App Domain Country ValueObject CountryId ce a b e ae ee a fd c object App Domain Country ValueObject CountryId f ec d ada bd ff a object App Domain Country ValueObject CountryId bafdf a e d db a f bb d object App Domain Country ValueObject CountryId c db a af d d b fe doctrineDEBUG SELECT COUNT AS dctrncount FROM SELECT DISTINCT id FROM SELECT c id AS id c name AS name c isocode AS isocode c phonecode AS phonecode c deletedat AS deletedat FROM countries c dctrnresult dctrntable So looks like something happens At least I get right NB count But empty getCurrentPageResults May be problem that my Id is CountryID UUID based This error occurred when I upgraded to version 