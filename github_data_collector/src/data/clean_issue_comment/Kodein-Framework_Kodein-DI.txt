We should be able to simplify the KodeinDI modules by merging modules kodeindicore kodeindierased kodeindigemericjvm into kodiendi Use typeOf in to handle erased type in AllNative targets Keep the use of generic for JVM targets Im not sure if this warrants a fix because it technically only can happen when something else is causing issues Theres a bug in R the Android code shrinker that could in rare occasions cause ClassTgetGenericInterfaces to return an array that contains T Kodein could fix it as a sanity check basically put a filter before any to ensure that typeToken isnt in the returned array or just let R get fixed I leave it to the maintainers to decide smile Following up from can we please get sources included Use case class MetricsServiceProvider private val configuration Configuration private val shutdownManager ShutdownManager ProviderMetricsService ovveride fun get MetricsService code that initializes and setups MetricsService I moved service initialization in class with dependencies Id like to do something like this bindMetricsService with providerMetricsServiceProvider right now only way is bindMetricsService with singleton MetricsServiceProviderinstance instanceget This is common pattern in guice I have a Kotlin multiplatform project with kotlin native iOS as one of the targets When I try to compile the iOS code in XCode I get the following errors Cannot find protocol declaration for AppKodeindicoreDKodein did you mean AppKodeindicoreKodein On the lines marked with a comment below objectivec attributeswiftnameKodeindicoreDKodeinAware protocol AppKodeindicoreDKodeinAware required Error on this line property readonly idAppKodeindicoreDKodein dkodein attributeswiftnamedkodein end attributeswiftnameKodeindicoreDKodeinBase protocol AppKodeindicoreDKodeinBase AppKodeindicoreDKodeinAware required id id NullableFactoryArgTypeidAppKodeindicoreTypeTokenargType typeidAppKodeindicoreTypeTokentype tagid Nullabletag attributeswiftnameFactoryargTypetypetag id Nullableid NullableFactoryOrNullArgTypeidAppKodeindicoreTypeTokenargType typeidAppKodeindicoreTypeTokentype tagid Nullabletag attributeswiftnameFactoryOrNullargTypetypetag idInstanceTypeidAppKodeindicoreTypeTokentype tagid Nullabletag attributeswiftnameInstancetypetag idInstanceArgTypeidAppKodeindicoreTypeTokenargType typeidAppKodeindicoreTypeTokentype tagid Nullabletag argid Nullablearg attributeswiftnameInstanceargTypetypetagarg id NullableInstanceOrNullTypeidAppKodeindicoreTypeTokentype tagid Nullabletag attributeswiftnameInstanceOrNulltypetag id NullableInstanceOrNullArgTypeidAppKodeindicoreTypeTokenargType typeidAppKodeindicoreTypeTokentype tagid Nullabletag argid Nullablearg attributeswiftnameInstanceOrNullargTypetypetagarg and on this line idAppKodeindicoreDKodeinOnContextidAppKodeindicoreKodeinContextcontext attributeswiftnameOncontext id voidProviderTypeidAppKodeindicoreTypeTokentype tagid Nullabletag attributeswiftnameProvidertypetag id voidProviderArgTypeidAppKodeindicoreTypeTokenargType typeidAppKodeindicoreTypeTokentype tagid Nullabletag argid Nullable voidarg attributeswiftnameProviderargTypetypetagarg id NullablevoidProviderOrNullTypeidAppKodeindicoreTypeTokentype tagid Nullabletag attributeswiftnameProviderOrNulltypetag id NullablevoidProviderOrNullArgTypeidAppKodeindicoreTypeTokenargType typeidAppKodeindicoreTypeTokentype tagid Nullabletag argid Nullable voidarg attributeswiftnameProviderOrNullargTypetypetagarg property readonly idAppKodeindicoreKodeinContainer container attributeswiftnamecontainer property readonly idAppKodeindicoreKodein kodein attributeswiftnamekodein property readonly idAppKodeindicoreKodein lazy attributeswiftnamelazy end Gradle version properties File gradleproperties kotlincodestyleofficial versions gradleandroidversion kotlinversion kotlinnativeversion ktorversion kotlinxcoroutinesversion kotlinxserializationversion kodeinversion groovy File settingsgradle pluginManagement resolutionStrategy eachPlugin if requestedidid kotlinmultiplatform useModuleorgjetbrainskotlinkotlingradlepluginrequestedversion enableFeaturePreviewGRADLEMETADATA rootProjectname DemoProject include app groovy File buildgradle in root buildscript repositories jcenter google dependencies classpath comandroidtoolsbuildgradlegradleandroidversion classpath orgjetbrainskotlinkotlingradlepluginkotlinversion classpath orgjetbrainskotlinkotlinserializationkotlinversion repositories google jcenter groovy FIle buildgralde in app plugins id kotlinmultiplatform id kotlinxserialization repositories google jcenter mavenCentral apply plugin comandroidapplication apply plugin kotlinandroidextensions apply plugin kotlinkapt android compileSdkVersion defaultConfig applicationId comexampleDemoProject minSdkVersion targetSdkVersion versionCode versionName testInstrumentationRunner androidsupporttestrunnerAndroidJUnitRunner buildTypes release minifyEnabled false packagingOptions exclude METAINFkotlinmodule dependencies implementation fileTreedir libs include jar implementation androidxappcompatappcompatappcompatversion implementation androidxrecyclerviewrecyclerviewrecycleviewversion implementation androidxconstraintlayoutconstraintlayoutconstraintlayoutversion androidTestImplementation comandroidsupporttestrunner kotlin targets fromPresetpresetsandroid android fromPresetpresetsiosX ios binaries framework baseName app sourceSets sourceSets commonMain dependencies implementation kotlinstdlibcommon implementation ioktorktorclientcorektorversion implementation ioktorktorclientjsonktorversion implementation ioktorktorclientserializationktorversion implementation orgjetbrainskotlinxkotlinxcoroutinescorecommonkotlinxcoroutinesversion implementation orgjetbrainskotlinxkotlinxserializationruntimekotlinxserializationversion implementation orgkodeindikodeindierasedkodeinversion commonTest dependencies implementation kotlintestcommon implementation kotlintestannotationscommon androidMain dependencies implementation kotlinstdlib implementation orgjetbrainskotlinxkotlinxcoroutinesandroidkotlinxcoroutinesversion implementation orgjetbrainskotlinxkotlinxserializationruntimekotlinxserializationversion implementation ioktorktorclientcorejvmktorversion implementation ioktorktorclientjsonjvmktorversion implementation ioktorktorclientserializationjvmktorversion implementation ioktorktorclientandroidktorversion androidTest dependencies implementation kotlintest implementation kotlintestjunit iosMain dependencies implementation orgjetbrainskotlinxkotlinxcoroutinescorenativekotlinxcoroutinesversion implementation orgjetbrainskotlinxkotlinxserializationruntimenativekotlinxserializationversion implementation ioktorktorclientiosiosx ktorversion implementation ioktorktorclientiosktorversion implementation ioktorktorclientcorenativektorversion implementation ioktorktorclientjsonnativektorversion implementation ioktorktorclientserializationiosx ktorversion iosTest This task attaches native framework built from ios module to Xcode project see iosApp directory Dont run this task directly Xcode runs this task itself during its build process Before opening the project from iosApp directory in Xcode make sure all Gradle infrastructure exists gradlewrapper gradlew task copyFramework def buildType projectfindPropertykotlinbuildtype DEBUG def target projectfindPropertykotlintarget ios dependsOn kotlintargetstargetbinariesgetFrameworkbuildTypelinkTask doLast def srcFile kotlintargetstargetbinariesgetFrameworkbuildTypeoutputFile def targetDir getPropertyconfigurationbuilddir def frameworkName kotlintargetstargetbinariesgetFrameworkbuildTypebaseName printsrcFileparent srcFileparent printtargetDir targetDir printframeworkName frameworkName copy from srcFileparent into targetDir include frameworkNameframework include frameworkNameframeworkdSYM I have this code in kodein erased wich returns all instances of Foo BinderasedComp ListFoo Foo with singleton val key KodeinKeykodeinkodeinContextanyType UnitToken erasedFoo null kodeincontainerallProviderskey contextmap itinvoke My project is android ios multiplatform and this code is working on Android but crashes on iOS Do you know why