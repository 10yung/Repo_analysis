Normally all folder names have dashes instead of underlines Unified it though all packages This PR is a bit a mixed bag and the result of our attempt to improve the robustness of the maplabservernode The problems this PR addresses are Since the maplabservernode can only run few optimization steps each iteration if a large loop closure is found it took a while for the map to converge The maps sometimes diverged in nearly all cases this happened when there were fewno visual observations between some frames To address this the following changesnew features were implemented There is an option to attach DoF odometry constraints in between vertices These constraints are simply derived from the Odometry DoF sensor that is used to build the map in the maplabnode Activate with maplabnode flag mapaddodometryedgesiflessthanncommonlandmarks Options Dont add edges default Add between all vertices n Only if the number of coobserved landmarks is n The DoF edges can be added to the optimization problem using the following flags bainclude dofodometry bafix dofodometryextrinsics Use the pose graph relaxation command in the maplabservernode to close large loops faster However since this command executes a full loop closure search but doesnt merge landmarks it wouldnt fully replace the loop closure Hence we introduce an option to merge landmarks as well which should result in a relax command that contains all functionality of the the lc command as well The flag is lcrelaxmergelandmarks Some general improvements to the maplabservernode mostly restructuring to make the code a bit more readable maplabservernode publishes TGM and TGB both as they are currently and as they were when the map arrived at the server for the most recent vertex of each robot after each iteration Credits The optimization integration was already there thanks to the DoFcapable relative pose constraint implementation that was added to support wheel odometry by smauq and bhahn Im working on windows is there anyone port this project to windows platform or planning to hi i added brief descriptor in maplabbut it is prompted that the invertedmultiindexquantizerbriefdat file cannot be read when the map is saved in the invertedmultiindexinterfaceh And I dont have this dat file on my computer how can I generate the dat file Hi Rovioli extracts a map which is actually a line I made calibration with Kalibr and made a video which is actually a loop However Rovioli gives a map below ekran g r nt s What could be the problem Any suggestion Thank you Implement Maplab with my video Hi Basically I am trying to implement Maplab with my video Here is my pipeline Convert video to bagfile done Create map with rovioli occur an error Load the map with Maplab During following this pipeline I achieved but I could not achieve I created bagfile with this script from there When I run rosrun rovioli tutorialeuroc savefolder homeMYNAMEPycharmProjectsempytbagfilebag output is I roviofactorycc Loading ROVIO configuration template homeeramasmaplabwssrcmaplabapplicationsroviolishareroviodefaultconfiginfo Set distortion parameters Radtan to k k k p p e Registered filter state update callback I mapbuilderflowcc Set VIMap folder to savefolder I roviolinodecc Starting data source I datasourcerosbagcc Rosbag playback finished I rovioliappcc Message delivery queues subscribernode queuetopic queueid num elements MapBuilderFlow LOCALIZATIONRESULT d d MapBuilderFlow TRACKEDNFRAMESANDIMU DataPublisherFlow VIOUPDATES a DataPublisherFlow RAWVIMAP DataPublisherFlow ROVIOESTIMATES d DataPublisherFlow LOCALIZATIONRESULT f e SyncedNFrameThrottlerFlow TRACKEDNFRAMESANDIMU c FeatureTrackingFlow ROVIOESTIMATES e RovioFlow IMAGEMEASUREMENTS dbfb FeatureTrackingFlow SYNCEDNFRAMESANDIMU a RovioFlow IMUMEASUREMENTS e c MapBuilderFlow ROVIOESTIMATES MapBuilderFlow VIOUPDATES aee ImuCameraSynchronizerFlow IMUMEASUREMENTS e RovioFlow LOCALIZATIONRESULT d ImuCameraSynchronizerFlow IMAGEMEASUREMENTS I roviolinodecc Closing data source W mapbuilderflowcc Map is empty nothing will be saved I roviolinodecc Closing data source Map is empty I coul not understand why How can I debug this issue Thank you in advance Hi I am planning to use maplab with a fisheye degree lens which it was suggested here and was wondering which are the best camera and distortion models to use from Kalibr which are currently supported I saw dymczykm reply in issue that you had tried the pinholeequidistant models which has worked back in early I was wondering if there had been any updates on this since then or the best one to use is still this one For example newer models introduced in Kalibr in the last years like double sphere or extended unified camera models Saw that the authors in these models mentioned that for fisheye cameras equal or above degrees that using the pinholeequidistant model could be problematic so wanted to check with you first Zachary Taylor from your lab also posted in October results using ROVIO with this same lens I think in this page but he did not mention the model he used Thanks again for the help my linux console script source maplabwsdevelsetupbash roscore rosrun rovioli tutorialeuroc savefolder homexxxxDEVProjsdatasetV difficultbag bug message GtkERROR GTK x symbols detected Using GTK x and GTK in the same process is not supported can anyone give me a hand ERROR log xxxxxxxxz rDEVProjsmaplab roscore rosrun rovioli tutorialeuroc savefolder homexxxxDEVProjsdatasetV difficultbag logging to homexxxxroslog f dfa a eab f ea c c aroslaunchxxxxz r log Checking log directory for disk usage This may take awhile Press CtrlC to interrupt Done checking log file disk usage Usage is GB started roslaunch server roscomm version SUMMARY PARAMETERS rosdistro melodic rosversion NODES autostarting new master process master started with pid I roviofactorycc Loading ROVIO configuration template homexxxxDEVProjsmaplabmaplabwssrcmaplabapplicationsroviolishareroviodefaultconfiginfo ROSMASTERURI setting runid to f dfa a eab f ea c c a Set distortion parameters Radtan to k k k p p e Registered filter state update callback process rosout started with pid started core service rosout I mapbuilderflowcc Set VIMap folder to savefolder I roviolinodecc Starting data source I rovioliappcc Message delivery queues subscribernode queuetopic queueid num elements MapBuilderFlow ROVIOESTIMATES fc MapBuilderFlow TRACKEDNFRAMESANDIMU a f MapBuilderFlow VIOUPDATES d ec MapBuilderFlow LOCALIZATIONRESULT ff DataPublisherFlow VIOUPDATES ba d DataPublisherFlow ROVIOESTIMATES DataPublisherFlow RAWVIMAP c SyncedNFrameThrottlerFlow TRACKEDNFRAMESANDIMU d c FeatureTrackingFlow ROVIOESTIMATES RovioFlow IMUMEASUREMENTS RovioFlow LOCALIZATIONRESULT ImuCameraSynchronizerFlow IMAGEMEASUREMENTS f FeatureTrackingFlow SYNCEDNFRAMESANDIMU DataPublisherFlow LOCALIZATIONRESULT d RovioFlow IMAGEMEASUREMENTS ImuCameraSynchronizerFlow IMUMEASUREMENTS afe Filter Initializing using accel measurement Filter Initialized at t FilterBaseaddUpdateMeas Warning included measurements at time before safeTime W rovioflowcc ROVIO rejected image measurement Latency is too large Tracker GtkERROR GTK x symbols detected Using GTK x and GTK in the same process is not supported homexxxxDEVProjsmaplabmaplabwssrcmaplabapplicationsrovioliscriptstutorialstutorialeuroc rosrun rovioli rovioli alsologtostderr v ncameracalibrationNCAMERACALIBRATION imuparametersmaplabIMUPARAMETERSMAPLAB imuparametersrovioIMUPARAMETERSROVIO datasourcetyperosbag savemapfolderLOCALIZATIONMAPOUTPUT optimizemaptolocalizationmapfalse mapbuildersaveimageasresourcesfalse datasourcerosbagROSBAG REST xxxxxxxxz rDEVProjsmaplab Now I want to merge three mission maps But how can I get multiple session maps in one step as mentioned in multi session use caseMy current practice is to run rovioli three times and then merge the maps Hello I appreciate your works I want to say it before a question Im trying to use map sparsification function in Keep it Brief Scalable Creation of Compressed Localization Maps The objective functions it uses are consist of linear terms and a quadratic term I want to use those objective functions but a linear objective function seems available in maplab I found some code on quadratic term But it looks a standalone code now How can I use an objective function this paper use Thanks Giho