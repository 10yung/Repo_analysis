When handlebarsjs version is above the coverage report will be blank I have made a pull request just for an update to handlebars which causes multiple run time vulnerabilities in istanbul I am wondering if we can just get this remedial update through I am trying to solve multiple vulnerabilities in karma packages karmatypescript and karmacoverage and this update to instanbul will solve all of these minus one Details Closes This is my first contribution here Im not sure using thiscurrentState for this is the best way to do it but Im open to suggestions Context At Tanda we run tests on CircleCI as part of our deployment process Recently when running with coverage flag our tests are only failing on CircleCI not locally builtbyproxy and I spent a whole day walking through the process to identify what may throw the error mentioned below These are our findings Prerequisites packagejson versions jest reactnative babeljest react We touch istanbullibinstrument babelpluginistanbul babeljest istanbulreports Description When running tests in our local env everything passes as intended However when deployed to CircleCI we get an error in the form of ReferenceError cov jyvcatev is not defined The id that comes after the cov changes depending on which file it is referring to The file referred to by the covid has so far never been the file that is being tested This only happens on CircleCI and when the jest coverage flag is on This also only happens to one test per test run Its always the same test and the covid is always the same but does not refer to the test or the tested component that fails For example we test component B and component Js covid will be the cause We have had cases where the two components are completely unrelated Generating the covid This covid is generated in istanbullibinstrumentdistvisitorjs using the function genVar genVar is called in the constructor for the VisitState class and is assigned to thisvarName A VisitState object is created in the function programVisitor and used in the enter and exit functions which is the default export for istanbullibinstrumentdistvisitorjs The covids journey With our programVisitor default export we found it is imported in istanbullibinstrumentdistindexjs and exported again as programVisitor Then it is imported by babelpluginistanbullibindexjs and is given types realPath and other options With the result being assigned to thisdv Then it gets imported and exported by babeljestbuildindexjs and exports it as a part of the transformer its the babelIstanbulPlugin part We logged transformResult and got a big string with two consistent values of code and map code looked something like this code var cov jyvcatev function n var path usrlocalreposrccomponentsCardsShiftAcceptancejs n a LOT more lines This gave us our first reference to the covid that was being used as a value thus pointing to a potential ReferenceError covid is not defined We searched our entire repo for instances of code being used and found the file istanbulreportslibhtmlannotatorjs running a map on the code variable after its been split on newlines to generate an array of code lines The istanbulreports code looks like this When running the same split on the same code string from transformResult as mentioned above we got an array looking like this Furthermore when scrolling through we noticed instances of covid value being specifically mutated This is the only place we can find reason for a ReferenceError covid is not defined Pictured is the babelplugingraphqltag import example however the covid increments are inserted throughout our code as well istanbulreport generates an interactive directory of coverage reports In these reports there is a counter beside each code line which indicates how often its called in tests The GUI for this looks like this We believe that there is a race condition assigning the covid which isnt finishing before babelor istanbulreports or something tries to increment it Before found vulnerabilities low moderate high critical in scanned packages run npm audit fix to fix of them vulnerability requires semvermajor dependency updates vulnerabilities require manual review See the full report for details After npm audit security report found vulnerabilities in scanned packages Please see In this sample code I use istanbul ignore if which works fine I get to coverage its OK But Id like to have a way to list all ignored lines so that later for example when I have the resources to clear some of those ignored cases I can identify the false and act on them Today only a global search on istanbul can help me and its not really visual js const LoginForm logIn loggedIn i n istanbul ignore if if i n null throw new Erroroh no No indication in the file HTML report And obviously nothing in the listing either where it would be cool to have a way to add a mention like ignored Is there any way to achieve this goal I am doing code coverage of an app running live and need to ignore some guard conditions that never are covered when app is running live I tried all options below and still have red flag near my if statement Ignore if and else in one tag istanbul ignore ifelse if A throw new Errornull or undefined Ignore if and else in two tags istanbul ignore if istanbul ignore else if A throw new Errornull or undefined Ignore else then ignore code inside if with next istanbul ignore else if A istanbul ignore next throw new Errornull or undefined Ignore if istanbul ignore if if A throw new Errornull or undefined Ignore with multiple nexts istanbul ignore next if A istanbul ignore next throw new Errornull or undefined It would be nice if import statements could be ignored as well so that the coverage is actually only taken from the file I want to test and not parts I may or may not mock