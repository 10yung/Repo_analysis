 What goes wrong I deployed my application on shinyappsio It works properly locally but it doesnt work online it seems like I have a bug with garsetclient Steps to reproduce the problem globalR libraryshiny librarygoogleAuthR librarysearchConsoleR librarygoogleAnalyticsR libraryggplot libraryurltools librarydplyr optionsgoogleAuthRredirect options googleAuthRscopesselected c optionsgoogleAuthRwebappclientid XXX optionsgoogleAuthRwebappclientsecret XXX garsetclientwebjson gcpclientjson serverR sourceglobalR Server functioninput output session Create access token and render login button accesstoken callModulegoogleAuthjs jstoken Create access token and render login button connectapi callModulegoogleAuth loginButton Positionctr Positionctr function site inputurl gAid inputgaid date range to fetch plage inputsdl start ascharacterSysDate plage end ascharacterSysDate Using new GA v API GAv filters googleseo filterclausega list dimfiltermedium EXACT organic dimfiltersource EXACT google operator AND maxresults inputresults Getting the GA data gadata googleanalytics gAid daterange cstart end metrics csessions pageviews dimensions clandingPagePath dimfilters googleseo max maxresults Getting the Search Console data scdata searchanalytics siteURL site startDate start endDate end dimensions cpage query rowLimit maxresults aggregationType byPage walkdata byBatch get urls in same format gadata has urls wwwexamplecompagePath scdata has urls in domainparse urlparsescdata page domainname paste domainparse scheme domainparse domain scdatapage gsubdomainname scdatapage of SEO traffic to each page per keyword scdata scdata groupbypage mutateclickPage clicks sumclicks ungroup join data on page joineddata gadata leftjoinscdata by clandingPagePath page mutatesessionEst clickPage sessions accuracyEst sessionEst clicks we only want clicks over and get rid of a few columns tidydata joineddata filterclicks selectsessions tidydataposition roundtidydataposition clickcurve tidydata groupbyposition summarise CTRmean meanctr n n clicksum sumclicks impressionssum sumimpressions sd sdctr E poissontestclicksumconfint poissontestimpressionssumconfint lower CTRmean E upper CTRmean E ungroup add increase to position could also include other positions clickcurve clickcurve mutate CTR CTRmean CTRmean CTR upper upper upper CTR lower lower lower sitename pasteMon Site nrowscdata requ tes hh ggplotclickcurve aesposition CTRmean thememinimal hh hh geomlinelinetype coordcartesianxlim c ylim c hh hh geomribbonaesposition ymin lower ymax upper alpha fill orange hh hh scaleycontinuouslabels scalespercent hh hh geompoint geomlabelaeslabel scalespercentCTRmean hh hh labstitle sitename hh hh labsx position y ctr moyen returnhh printhh Positionctroutput eventReactiveinputsubmit wrap existing function withshiny pass the reactive token in shinyaccesstoken pass other named arguments withshinyf Positionctr shinyaccesstoken accesstoken outputPositionctr renderPlot Positionctroutput Code has been cut to give you an overview Actual output T shinyapps Default Google Project for googleAnalyticsR is set T shinyapps If making a lot of API calls please T shinyapps visit T shinyapps for instructions on setting your own Google Project T shinyapps This is shared with all googleAnalyticsR users T shinyapps T shinyapps Warning Error in The default Google Cloud Project for googleAnalyticsR is intended T shinyapps Please set your own clientid and clientsecret via googleAuthRgarsetclient T shinyapps T shinyapps for evalutation only not production scripts T shinyapps T shinyapps or otherwise as suggested on the website T shinyapps T shinyapps googleanalytics T shinyapps stop T shinyapps hybridchain T shinyapps f srvconnectappstest serverR T shinyapps func T shinyapps withshiny T shinyapps contextFunc T shinyapps eventReactiveHandler srvconnectappstest serverR T shinyapps envrunWith T shinyapps handlerFunc T shinyapps ctxrun T shinyapps func T shinyapps selfupdateValue T shinyapps reactiveeventReactiveinputsubmit T shinyapps reactiveplotObj T shinyapps drawPlot T shinyapps drawReactive T shinyapps origRenderFunc T shinyapps f T shinyapps Positionctroutput T shinyapps Reduce T shinyapps renderPlot srvconnectappstest serverR T shinyapps do T shinyapps func T shinyapps outputPositionctr T shinyapps runApp T shinyapps fn T shinyapps eval T shinyapps connectretry T shinyapps eval He tells me to use garsetclient but thats what I already do I dont understand anymore Session Info Please run sessionInfo so we can check what versions of packages you have installed R version Platform x w mingw x bit Running under Windows x build Matrix products default locale LCCOLLATEFrenchFrance LCCTYPEFrenchFrance LCMONETARYFrenchFrance LCNUMERICC LCTIMEFrenchFrance attached base packages stats graphics grDevices utils datasets methods base other attached packages dplyr urltools ggplot googleAnalyticsR searchConsoleR googleAuthR shiny loaded via a namespace and not attached Rcpp compiler pillar later tools zeallot digest packrat gtable jsonlite memoise gargle tibble lifecycle pkgconfig rlang rstudioapi curl fastmap withr httr askpass fs vctrs triebeard grid tidyselect glue R purrr tidyr magrittr scales backports promises htmltools rsconnect assertthat colorspace mime xtable httpuv openssl lazyeval munsell crayon What goes wrong I want to authenticate via googleAuthR package using my client to then use the token to read a sheet from using googlesheets It seems that sheetsauth doesnt understand the token produced by googleAuthR and the app still wants to authenticate via Tidyverse API package client before loading the app Steps to reproduce the problem optionsgoogleAuthRscopesselected c optionsgoogleAuthRwebappclientid MYCLIENTID optionsgoogleAuthRwebappclientsecret MYCLIENTSECRET optionsshinyport librarygoogleAuthR librarygooglesheets libraryshinyjs ui shinyUInavbarPagetitle sampleapp tabPanel useShinyjs googleAuthUIgauthlogin tableOutputtest server functioninput output session accesstoken callModulegoogleAuth gauthlogin readmysheet function fil accesstoken sheetsauthtoken fil scopes cache FALSE useoob FALSE readsheetMYSHEETID outputtest renderTable readmysheet shinyAppui server Expected output I would like to be able to launch the app so that no authentication by googlesheets was popping up at the very beginning The flow should be load the app click the button for auth via googleAuthR and if that succeeds read a sheet Actual output Pop up window asking for authentication via googlesheets package optionsgoogleAuthRverbose Listening on Auth Token URL Waiting for authentication in browser Press EscCtrl C to abort Authentication complete Reading from MY SHEET NAME Session Info R version Platform x w mingw x bit Running under Windows x build Matrix products default locale LCCOLLATEPolishPoland LCCTYPEPolishPoland LCMONETARYPolishPoland LCNUMERICC LCTIMEPolishPoland attached base packages stats graphics grDevices utils datasets methods base other attached packages shinyjs googlesheets googleAuthR shiny loaded via a namespace and not attached Rcpp rstudioapi magrittr xtable R rlang fastmap httr tools htmltools yaml assertthat digest tibble gargle crayon purrr later fs promises rsconnect curl memoise glue mime pillar compiler cellranger jsonlite httpuv pkgconfig Hi Im working on a google cloud storage package and would like to make it compatible with the existing packages specifically googleCloudStorageR The main issue is that my package uses a python library which requires a JASON credential file googleCloudStorageR does use the JASON file but I cannot find a way to retrieve the file location from neither googleCloudStorageR nor googleAuthR Since googleCloudStorageR depends on googleAuthR to do the authentification I think this might be a good place to ask Is there any way to get the location of the JASON file If not is it possible to store the file location in a place for the other package to use Best Jiefei Blaz in Slack suggests adding this so it can be used for Firebase Hey all I just implemented Firebase into my app and for that you need to authenticate the user using his google tooken by posting its idtoken string I managed to add it to the the function which builds the token but I am still curious why it is not included as default the token was created using googleAuth to login Token newapp garapp endpoint oauthendpointsgoogle credentials listaccesstoken tokenaccesstoken tokentype tokentokentype expiresin tokenexpiresin refreshtoken tokenrefreshtoken idtoken tokenidtoken I added this line params listscope scopelist type NULL useoob FALSE asheader TRUE cachepath FALSE Looks like some help setting this up could be covered This allows to pass any parameter to any of the default functions used by tokenfetch for instance it works with offline refresh tokens as follows garauthconfigureapp oauthappgoogle key clientid secret clientsecret garauthcredentials listrefreshtoken refreshtokenhere What goes wrong An error message is seen when parsing objects generated via garapidiscovery jsonlitetoJSON does not have an S method for the new class name Fix Either add list to the object class or create a new S method for jsonlitetoJSON Hi there We discussed the OAuth token before in the googleCloudStorageR repo but given that it has to do with authentication I figured this repo is a better spot to discuss it Steps to reproduce the problem When using the upload function of googleCloudStorageR gcsupload I encounter a long freeze during which an attempt is made to refresh the OAuth token This happens consistently after minutes after the googleCloudStorageR is loaded with its respective environment variables Verbose Setting I did not run the verbose option before given our setup and the minute period for the bug to occur it is not straightforward to do that Happy to do it if it helps significantly with debugging Session Info I cannot share the entire sessionInfo but hopefully the following is helpful already R version Platform x pclinuxgnu bit Running under Debian GNULinux stretch packageVersiongoogleAuthR packageVersiongoogleCloudStorageR packageVersiongargle Best regards Michael What goes wrong Sometimes the API returns a nextPageToken URL but there is not data eg to results only out of pageLimit but a nextPageToken URL is present This means that the next page returns no results and raises an error Steps to reproduce the problem Noticed for deleting account links such as at this URL Expected output No error Actual output r Error in UseMethodselect nicht anwendbare Methode f r select auf Objekt der Klasse NULL angewendet Fehler API Data failed to parse Debug response Note the empty list for responses r items list r List of request List of requrl chr requesttype chr GET thebody NULL customConfig NULL response List of dataparseargs list dataparsefuncfunction x content List of kind chr analyticsentityUserLinks totalResults int startIndex int itemsPerPage int previousLink chr items list authenticationList of tokenClasses Gargle Token Token R Gargle Inherits from Token Public app oauthapp cache function cachepath UsersrsiegenthalerRgarglegargleoauth canrefresh function clone function deep FALSE credentials list email retosiegenthalerjobcloudch endpoint oauthendpoint hash function initcredentials function initialize function email gargleoauthemail app gargleapp package gargle loadfromcache function package googleAuthR params list print function privatekey NULL refresh function revoke function sign function method url validate function attr class chr garparseerror Attempting data parsing request requestrequrl requestrequesttype GET requestthebody NULL requestcustomConfig NULL response responsedataparseargs list responsedataparsefunc function x x managementapiparsing analyticsentityUserLinks selectuserRefkind endswith kind endswith href renamelinkId id bytecode x f e fa environment namespacegoogleAnalyticsR responsecontent responsecontentkind analyticsentityUserLinks responsecontenttotalResults responsecontentstartIndex responsecontentitemsPerPage responsecontentpreviousLink responsecontentitems list authentication authenticationtoken Token via gargle oauthendpoint google app googleAuthRclientid email retosiegenthalerjobcloudch scopes analytics analyticsedit analyticsmanageusers analyticsmanageusersreadonly analyticsreadonly analyticsuserdeletion userinfoemail credentials accesstoken expiresin refreshtoken scope tokentype idtoken attr class garparseerror API Data failed to parse diagnostics If you have an error starting with API Data failed to parse Please install googleAuthR v r remotesinstallgithubMarkEdmondson googleAuthR Restart the R session and run your bugged code It should write a file called garparseerrorrds to your working directory Run the below to output some diagnostic information and paste the response here r googleAuthRgardebugparsinggarparseerrorrds Session Info Unknown Maybe fix in googleAuthR Refer to gargle website where possible eg 