rbspy compiled from master today Press CtrlC to stop thread unnamed panicked at Ruby version not supported yet Please create a GitHub issue and well fix it srccoreinitializers note run with RUSTBACKTRACE environment variable to display a backtrace Wrote raw data to homeXXXcacherbspyrecordsrbspy nPi lgQl urawgz Writing formatted output to homeXXXcacherbspyrecordsrbspy hB FCDBIdNflamegraphsvg T Z ERROR infernoflamegraph No stack counts found thread main panicked at called Resultunwrap on an Err value IoCustom kind InvalidData error No stack counts found srclibcoreresultrs Iv been consistently finding that my recordings stop prematurely even with a duration specified without any sort of notification as to why I checked the docs and couldnt find any information about what might cause this Running currently with rbspy record rate duration pid I am seeing cpu usage on htop from with it typically being closer to At one point it did hit upwards of It would be nice to be able to merge the stack traces from multiple running servers eg via rbspy merge trace trace traceN into a single file for analysis Now that pyspy supports FreeBSD we can leverage its internal remoteprocess Crate which does everything related to obtaining information about remote processes memory reading obtaining threads info and native stack traces etc This change Refactors rbspy to use pyspys remoteprocess crate Tweaks Linuxs address finder code to support FreeBSD as well Adds Cirrus CI a FreeBSD CI config thread unnamed panicked at Ruby version not supported yet Please create a GitHub issue and well fix it srccoreinitializers Fixes WIP Multiple function is never used because of also noted in Multiple warnings in rubystructs crate because of autogend bindgen code Some indicate they may become errors in the future Some OS builds have unused import warnings check CI logs Compiling readprocessmemory v Compiling termsize v error E unresolved import platform usrlocalregistrysrcgithubcom ecc db ec readprocessmemory srclibrs pub use platformPid maybe a missing crate platform error E unresolved import platform usrlocalregistrysrcgithubcom ecc db ec readprocessmemory srclibrs pub use platformProcessHandle maybe a missing crate platform error E failed to resolve use of undeclared type or module platform usrlocalregistrysrcgithubcom ecc db ec readprocessmemory srclibrs fn tryintoprocesshandle self ioResultplatformProcessHandle use of undeclared type or module platform Compiling clap v error aborting due to previous errors Some errors have detailed explanations E E For more information about an error try rustc explain E error Could not compile readprocessmemory warning build failed waiting for other jobs to finish I wish it works like pyspy does I ran rbspy record pid and got the error Press CtrlC to stop Wrote raw data to rootcacherbspyrecordsrbspy E Qc TJIj rawgz Writing formatted output to rootcacherbspyrecordsrbspy cTpezCRXzxflamegraphsvg T Z ERROR infernoflamegraph No stack counts found thread main panicked at called Resultunwrap on an Err value IoCustom kind InvalidData error StringErrorNo stack counts found srclibcoreresultrs note Run with RUSTBACKTRACE environment variable to display a backtrace This was in a docker container on kubernetes but i dont think that should matter since im running rbspy in the same container as the process im trying to profile Running with rbspy record cmd does work but isnt very useful for us since the process im trying to look at is a web server that spawns other processes which do the actual work