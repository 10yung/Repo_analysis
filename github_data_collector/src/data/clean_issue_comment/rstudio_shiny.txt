The following app displays the value of x and has a button that will stop the app The value of x gets initialized by the onStart function Theres an onSessionEnded callback which increments x Wed expect the app to display x each time it runs R libraryshiny x NULL app shinyApp fluidPage textOutputtxt actionButtonclose Close app functioninput output outputtxt renderText paste x x observeEventinputclose messageclose button was clicked stopAppclose button onSessionEndedfunction messageExecuting onSessionEnded callback x x onStart function x When you run it like this with one runApp after the other without letting control go to the console the app displays x on the first run and then x on the second Also note the strange order that the diagnostic messages are printed out R runAppapp runAppapp Listening on close button was clicked Listening on Executing onSessionEnded callback close button was clicked close button Executing onSessionEnded callback Adding some runnow calls in between makes it display x both times R runAppapp for i in laterrunnow runAppapp Listening on close button was clicked Executing onSessionEnded callback Listening on close button was clicked close button Executing onSessionEnded callback The problem seems to be that without the runnow calls after the first app the onSessionEnded callback can bleed into the next app cc schloerke installing source package shiny package shiny successfully unpacked and MD sums checked R inst preparing package for lazy loading Warning replacing previous import by RcppevalCpp when loading later Warning S methods formatstaticPath formatstaticPathOptions printstaticPath printstaticPathOptions were declared in NAMESPACE but not found Error in librarydynamlib package packagelib shared object httpuvso not found ERROR lazy loading failed for package shiny removing homemmdokaRi pclinuxgnulibrary shiny Warning in installpackages installation of package shiny had nonzero exit status ERROR dependency shiny is not available for package crosstalk removing homemmdokaRi pclinuxgnulibrary crosstalk Warning in installpackages installation of package crosstalk had nonzero exit status ERROR dependency crosstalk is not available for package plotly removing homemmdokaRi pclinuxgnulibrary plotly Warning in installpackages installation of package plotly had nonzero exit status Shiny offers the snapshotPreprocessOutput function to preprocess the output of render functions This works fine if the render function outputs as intended If the render function returns an error such as when shinyreq is used package authors may not realize this value gets passed directly to the preprocessOutput function I suggest to simply adapt the documentation to say param fun A function that takes the output value from the render function either the intended output or an error as an input and returns a modified value The returned value will be used for the test snapshot Even within shiny itself code does not consider the possibility that output may be a silent error instead of the intended value See also Furthermore an error in a single preprocessOutput should probably not result in a cryptic error when requesting shinytest output Examples Gist appR file Shinytest file libraryshinytest app ShinyDrivernewpathmyApp catappenclosenvprivategetTestSnapshotUrl appgetAllValues appsetInputsgoplotFALSE this fails appgetAllValues appsetInputsgoplotTRUE aaand we are back appgetAllValues appsetInputsgotableFALSE this fails appgetAllValues appsetInputsgotableTRUE aaand we are back appgetAllValues Adds an autoColors argument to renderPlot which if TRUE detects the backgroundforeground color of the containing element and if bg is not detected searches for the nearest ancestor with a defined bg and applies sensible default theming of ggplot lattice and base graphics based on those colors This argument also accepts a suitably named vector of R color codes eg autoColors cbg gray fg red which is useful if you like the default theming rules but not the automatically detected colors r libraryshiny libraryggplot Globally set the autoColors argument to TRUE shinyOptionsplotautocolors TRUE ui fluidPage tagsstyleHTMLbodybackgroundcolor c d color fff tabPanelggplot plotOutputggplot tabPanelbase plotOutputbase server functioninput output session outputggplot renderPlot ggplotmtcars geomhistogramaesmpg color factorcyl facetwrapvs labstitle mtcars subtitle Such vroom outputbase renderPlotplot shinyAppui server TODO x Support lattice graphics x R docs x Example testing app Unit tests test parseCssColor and maybe use vdiffr to test the output of drawPlot Maybe an article or blog post Allow Bootstrap Sass variables eg autoColors listfg primary if a bootstraplib theme is set Support renderCachedPlot note that colors must be stirred into cache key Testing notes Install remotesinstallgithubrstudioshiny and run the example app The plot backgrounds should reflect the documents background and the plots textlabels should reflect the color of the header tags Im having difficulty serving Rmd files when the file is placed in a subdirectory rather than the main directory of the server The problem seems to be that the javascript and other resources eg shinyminjs are not being loaded returning errors and thus the page wont run Thus works fine but does not System details RHEL Apache Im redirecting the rdemos URL to shiny with Apache R version Shiny version Browser Version If applicable Output of sessionInfo Error in sessioninfo could not find function sessioninfo Example application or steps to reproduce the problem See the two URLs above These are publicly available The steps would be to create a subdirectory under the shinyserver directory on the host machine and then copy a Rmd file eg indexRmd into that subdirectory The Rmd file renders correctly at the top level but not in a lower level Describe the problem in detail The problem is that when loading shared resource files eg shinyminjs the sever returns a error instead of the file In particular if the Rmd file is in the XXX subdirectory then the browser expands sharedshinyminjs as XXXsharedshinyminjs This then returns a notfound Im calling this an error under shiny not shinyserver as Ive tracked the issue down into the shiny package and not the server code I think the issue is in resourcePathHandler as I think that XXXsharedshinyminjs needs to be remapped to sharedshinyminjs but this is not happening for some reason Im kind of stuck as Im not sure how to debug further than Ive gotten This is a stab at implementing and incorporates implementation suggestions by hadley The implementation is very small but this does bring in the commonmark and glue packages as dependencies but no transitive dependencies commonmark is widely used as a dependency of roxygen but is unlikely to be installed on user machines not geared toward package development glue is part of the tidyverse and so probably likelier to exist on user machines I prototyped a pureR implementation of gluetrim but maintaining and testing it seems onerous I include it at the bottom Its also wildly inefficient compared to glues C version Open questions Should this be an addition to htmltools instead of to Shiny Currently input strings are trimmed with gluetrim but are not passed to glueglue which would both trim them and support interpolation If the strings were passed to glueglue its not obvious to me how additional arguments to glueglue could be passed since additional arguments are currently passed as commonmarkmarkdownhtml arguments Remaining dev tasks Update NEWS Add tests Add more examples Add shinyexample trim in R R trim functiontxt stopifnotischaractertxt lengthtxt Remove leading and trailing whitespace txt gsub W txt txt gsub W txt Determine and strip leading indentation lines strsplittxt n fixed TRUE rest taillines indents vapply gregexpr W x function m attrm matchlength numeric stripped gsubpaste W minindents lines paste stripped collapse n System details Browser Version Chrome R version Platform x w mingw x bit Running under Windows x build Matrix products default locale LCCOLLATEPortugueseBrazil LCCTYPEPortugueseBrazil LCMONETARYPortugueseBrazil LCNUMERICC LCTIMEPortugueseBrazil attached base packages stats graphics grDevices utils datasets methods base other attached packages shinydashboard shiny loaded via a namespace and not attached compiler fastmap magrittr R promises later htmltools tools Rcpp jsonlite digest xtable httpuv mime rlang Example application or steps to reproduce the problem app r libraryshiny libraryshinydashboard ui fluidPage tagsscriptsrcjquerymaskjstypetextjavascript tagsscriptsrcjsMaskjstypetextjavascript Assembling page dashboardPage Assembling header dashboardHeadertitle JS in RenderUI titleWidth Assembling sidebar dashboardSidebar sidebarMenu menuItemJS in RenderUI tabName custom icon iconsearch Assembling the body of the page dashboardBody tabItems tabItemtabName custom br br uiOutputoutputId out server functioninput output session RenderUI outputout renderUIfluidPagetagsscriptsrcjsMaskjstypetextjavascripttextInputphoneInput label Phone Mask width outputout renderUIfluidPagetextInputphoneInput label Phone Mask width shinyAppui server www content jquery Mask jsMaskjs js function consolelogHello phoneInputmask consolelogHello again Points returned by brushedPoints can include some that are not shown on the plot eg if they are excluded by xlim which leaves some blank space at the edges of the plot where there could be invisible points This could be counterintuitive and might mean that the clip option in brushOpts is not working Brief discussion on RStudio Community R Shiny RStudio Windows Example code To reproduce the problem use the slider to change the xlim such that a point is just excluded then brush displayed points and note the average Finally extend the brushed range outside the xlim range such that it covers one of the excluded points and note that the average value changes libraryshiny librarytidyverse df mtcars ui fluidPage plotOutputplotbrushbrushOptsidplotbrushdirectionx fluidRow column sliderInputrange labelRange min max maxdfwt value c maxdfwt column tableOutputbrushinfo server functioninput output outputplot renderPlot ggplotdfaesxwtympg geompoint xliminputrange outputbrushinfo renderTable brushedPointsdfinputplotbrush summarizeatvarsmpgmean shinyAppui ui server server This issue tracker is for bugs and feature requests in the Shiny package If youre having trouble with Shiny Server or a related package please file an issue in the appropriate repository If youre having trouble with shinyappsio and you have a paid account Starter Basic Standard or Pro please file a support ticket via If you have a Free account please post to the RStudio Community with the shinyappsio tag Finally if you are an RStudio customer and are having trouble with one of our Pro products get in touch with our support team at supportrstudiocom Before you file an issue please upgrade to the latest version of Shiny from CRAN and confirm that the problem persists First restart R To install latest shiny from CRAN installpackagesshiny See our guide to writing good bug reports for further guidance The better your report is the likelier we are to be able to reproduce and ultimately solve it System details Browser Version inbuilt RStudio Firefox Chrome Output of sessionInfo sessionInfo output goes here R version Platform x w mingw x bit Running under Windows x build Matrix products default locale LCCOLLATEChinese SimplifiedChina LCCTYPEChinese SimplifiedChina LCMONETARYChinese SimplifiedChina LCNUMERICC LCTIMEChinese SimplifiedChina attached base packages stats graphics grDevices utils datasets methods base other attached packages RevoUtils RevoUtilsMath loaded via a namespace and not attached shiny compiler magrittr R promises later htmltools tools Rcpp digest xtable httpuv packrat mime Example application to reproduce the problem If youre able to create one a reproducible example is extremely helpful to us For instructions on how to create one please see R libraryshiny ui fluidPage mainPanel server functioninput output app shinyshinyAppui ui server server runAppapp shinyAppui server this works when runApp does not work Describe the problem in detail using shinyApp works but runApp results in garbled output HI All Your post is very helpful but I am not able to solve my problem following what is recommended in the previous post I get the same message when i open my shiny app i cannot open R using sudo su shiny which no R in sbinbinusrsbinusrbin i tried export PATH variable to bashrc under root directory but nothing positive Can you please help Thank you Poorva 