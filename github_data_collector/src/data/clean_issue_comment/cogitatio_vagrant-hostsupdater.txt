I ran into the following issue after updating to Fedora from Fedora I was running Vagrant and then updated contextually to When doing a vagrant up Vagrant threw some error about plugins needing attention so I tried first to repair That wasnt enough so I tried to reinstall at that point I got this error shell Vagrant failed to properly resolve required dependencies These errors can commonly be caused by misconfigured plugin installations or transient network issues The reported error is conflicting dependencies listen and listen Activated listen which does not match conflicting dependency Conflicting dependency chains listen activated versus middlemancore activated depends on listen I am not sure who introduced that dependency but the only way I could solve it was to reinstall the plugin with shell VAGRANTDISABLESTRICTDEPENDENCYENFORCEMENT vagrant plugin install vagranthostsupdater The VAGRANTDISABLESTRICTDEPENDENCYENFORCEMENT made it pass Perhaps this is something you should be aware of Thank you and happy new year System macOS Mojave I updated the sudoers file as recommended in README but it does not work for removing hosts For adding the hosts it works I changed it directly to my username Andi as it didnt work with the admin group Allow passwordless startup of Vagrant with vagranthostsupdater CmndAlias VAGRANTHOSTSADD binsh c echo etchosts CmndAlias VAGRANTHOSTSREMOVE binsed i e d etchosts Andi ALLroot NOPASSWD VAGRANTHOSTSADD VAGRANTHOSTSREMOVE homestead gitmaster vagrant destroy platreform Are you sure you want to destroy the platreform VM yN y platreform Forcing shutdown of VM platreform Destroying VM and associated drives platreform Pruning invalid NFS exports Administrator privileges will be required platreform vagranthostsupdater Removing hosts Password Does anyone know how the correct command in the sudoers file would be With vagrant recently upgraded to vagrant plugin install vagranthostsupdater local repeatedly fails with Unable to resolve dependency user requested vagrantbindfs When vagrants with different ip addresses assigned in their Vagrantfiles but the same domain configured and up I see entries for the same domain in hosts etchosts for instance ldapexamplecom VAGRANT ldapexamplecom VAGRANT bb Shouldnt hostsupdater detect this What should be done A warning shown during vagrant up Just asking Hi This doesnt work for me or my colleagues on windows and machines so I took a look at the code and Im a little confused how this is working for Windows users in its current setup unless they have made their systems open to attack by modifying their hosts attributes addToHosts The line if Filewritablerealhostspath is used and passes its bash commands to the sudo function Since Windows hosts files should be readonly for security reasons our machines pass the bash commands to the sudo windows function which of course fails there is no sh command The windows elsif VagrantUtilPlatformwindows never triggers because of the first if test is true so the hosts never updates Now if we modify this section to allow the windows actions to happen we also have to add in code to make hosts file temporarily writable eg def addToHostsentries return if entrieslength content entriesjoin nstrip uiinfo vagranthostsupdater Writing the following entries to hostspath uiinfo vagranthostsupdater entriesjoin n vagranthostsupdater if Filewritablerealhostspath uiinfo vagranthostsupdater This operation requires administrative access You may skip it by manually adding equivalent entries to the hosts file if VagrantUtilPlatformwindows uiinfo vagranthostsupdater Windows platform create hosts require tmpdir uuid machineid machineconfighostsupdaterid tmpPath FilejoinDirtmpdir hosts uuid cmd FiledeletetmpPath if FileexisttmpPath FileopentmpPath w do tmpFile tmpFileputs attrib R hostspath entrieseach line tmpFileputs hostspath echo line tmpFileputs attrib R hostspath end sudotmpPath FiledeletetmpPath elsif sudoQsh c echo content hostspath uierror vagranthostsupdater Failed to add hosts could not use sudo adviseOnSudo end else content n content n hostsFile Fileopenhostspath a hostsFilewritecontent hostsFileclose end end Youll notice I had to comment out FiledeletetmpPath We found that ruby does not wait for win ole to complete its action so while you are typing in your admin credentials ruby has continued and already deleted the temporary file removeFromHosts Now this one is stranger as again the test if the hosts file is not writable is true so the bash SED command is again sent to the windows part of the sudo function SED is not native to windows and all my standalone tests show this command does not work with win ole In the cmd windows the uierror is shown which is not surprising But after being asked my admin credentials my hosts file does get the entries removed I really cannot work out why that happens Inserting uiinfo comments show the alternative else actions are not triggered The final thing and it might be a clue about what is happening is that the removal of the entries converts my hosts file from CRLF to LF If anyone can explain this to me I would love to hear how removeFromHosts is working on Windows Thanks Hello I already posted this issue on the VVV repo When I try to install the hostsupdater Plugin I get this error message Vagrant has detected project local plugins configured for this project which are not installed vagranthostsupdater Install local plugins YN N Y Installing the vagranthostsupdater plugin This can take a few minutes CHashiCorpVagrantembeddedmingw libruby win registryrb in encode incomplete x on UTF LE EncodingInvalidByteSequenceError from CHashiCorpVagrantembeddedmingw libruby win registryrb in read from CHashiCorpVagrantembeddedmingw libruby win resolvrb in reads from CHashiCorpVagrantembeddedmingw libruby win resolvrb in block levels in getinfo from CHashiCorpVagrantembeddedmingw libruby win resolvrb in each from CHashiCorpVagrantembeddedmingw libruby win resolvrb in find from CHashiCorpVagrantembeddedmingw libruby win resolvrb in block levels in getinfo from CHashiCorpVagrantembeddedmingw libruby win registryrb in open from CHashiCorpVagrantembeddedmingw libruby win registryrb in open from CHashiCorpVagrantembeddedmingw libruby win resolvrb in block levels in getinfo from CHashiCorpVagrantembeddedmingw libruby win registryrb in eachkey from CHashiCorpVagrantembeddedmingw libruby win resolvrb in block levels in getinfo from CHashiCorpVagrantembeddedmingw libruby win registryrb in open from CHashiCorpVagrantembeddedmingw libruby win registryrb in open from CHashiCorpVagrantembeddedmingw libruby win resolvrb in block in getinfo from CHashiCorpVagrantembeddedmingw libruby win registryrb in open from CHashiCorpVagrantembeddedmingw libruby win registryrb in open from CHashiCorpVagrantembeddedmingw libruby win resolvrb in getinfo from CHashiCorpVagrantembeddedmingw libruby win resolvrb in getresolvinfo from CHashiCorpVagrantembeddedmingw libruby resolvrb in defaultconfighash from CHashiCorpVagrantembeddedmingw libruby resolvrb in block in lazyinitialize from CHashiCorpVagrantembeddedmingw libruby resolvrb in synchronize from CHashiCorpVagrantembeddedmingw libruby resolvrb in lazyinitialize from CHashiCorpVagrantembeddedmingw libruby resolvrb in block in lazyinitialize from CHashiCorpVagrantembeddedmingw libruby resolvrb in synchronize from CHashiCorpVagrantembeddedmingw libruby resolvrb in lazyinitialize from CHashiCorpVagrantembeddedmingw libruby resolvrb in fetchresource from CHashiCorpVagrantembeddedmingw libruby resolvrb in eachresource from CHashiCorpVagrantembeddedmingw libruby resolvrb in getresource from CHashiCorpVagrantembeddedmingw libruby rubygemsremotefetcherrb in apiendpoint from CHashiCorpVagrantembeddedmingw libruby rubygemssourcerb in apiuri from CHashiCorpVagrantembeddedmingw libruby rubygemssourcerb in loadspecs from CHashiCorpVagrantembeddedgems gemsvagrant libvagrantbundlerrb in block in validateconfiguredsources from CHashiCorpVagrantembeddedmingw libruby rubygemssourcelistrb in each from CHashiCorpVagrantembeddedmingw libruby rubygemssourcelistrb in eachsource from CHashiCorpVagrantembeddedgems gemsvagrant libvagrantbundlerrb in validateconfiguredsources from CHashiCorpVagrantembeddedgems gemsvagrant libvagrantbundlerrb in internalinstall from CHashiCorpVagrantembeddedgems gemsvagrant libvagrantbundlerrb in install from CHashiCorpVagrantembeddedgems gemsvagrant libvagrantpluginmanagerrb in block in installplugin from CHashiCorpVagrantembeddedgems gemsvagrant libvagrantpluginmanagerrb in installplugin from CHashiCorpVagrantembeddedgems gemsvagrant libvagrantenvironmentrb in block in processconfiguredplugins from CHashiCorpVagrantembeddedgems gemsvagrant libvagrantenvironmentrb in each from CHashiCorpVagrantembeddedgems gemsvagrant libvagrantenvironmentrb in processconfiguredplugins from CHashiCorpVagrantembeddedgems gemsvagrant libvagrantenvironmentrb in initialize from CHashiCorpVagrantembeddedgems gemsvagrant binvagrant in new from CHashiCorpVagrantembeddedgems gemsvagrant binvagrant in main I checked the spelling but it its correct I removed vagrant from my system and installed it again No change It seems to be a problem with the ruby gems install I am clueless Thanks in advance My hosts file had gotten messy unrelated to hostsupdater so I figured the simplest remedy was to delete it assuming hostsupdater would recreate it if needed But instead WINDIR System drivers etc hosts not existing lead to hostsupdater crashing in turn causing vagrant to fail during provisioning Ive attached a textfile with the error output As a sidenote I was running vagrant from an elevated command prompt hostsupdater error outputtxt Please let me know if I can contribute in any way to solving this or narrowing down the cause Previously only aliases for IPs that had been previously captured in network config in Vagrantfile were added From now on all the hash map of aliases is added regardless of the IP For example if a machine had private network configured for example with IP and map of aliases such as the following was provided alias for which wasnt directly mentioned in Vagrantfile was omitted confighostsupdateraliases exampleorg externalexampleorg This pull request traverses through all the items in the hash map with aliases and adds all of them regardless of the ip which seems more natural for the case when hash map is provided vagrant plugin install vagranthostsupdater Installing the vagranthostsupdater plugin This can take a few minutes usrsharegemsgemspsych libpsychrb warning already initialized constant PsychLIBYAMLVERSION usrsharerubypsychrb warning previous definition of LIBYAMLVERSION was here usrsharegemsgemspsych libpsychrb warning already initialized constant PsychFALLBACK usrsharerubypsychrb warning previous definition of FALLBACK was here Bundler the underlying system Vagrant uses to install plugins reported an error The error is shown below These errors are usually caused by misconfigured plugin installations or transient network issues The error from Bundler is conflicting dependencies vagranthostsupdater and vagranthostsupdater Activated vagranthostsupdater which does not match conflicting dependency Conflicting dependency chains vagranthostsupdater activated versus vagranthostsupdater Gems matching vagranthostsupdater vagranthostsupdater how to get rid of that I tried removinguninstalling all plugins andor vagrant itself how to proceed here Gem with spec version actually contains version of the plugin Heres how to see the difference sh gem fetch vagranthostsupdater gem unpack vagranthostsupdater gem curl L O gem unpack vagranthostsupdatergem The snippet above produces directories vagranthostsupdater From github vagranthostsupdater gem fetch difftxt is a difference between the two diff r vagranthostsupdater vagranthostsupdater left side is github version right side is from rubygems I expected that from rubygems would match from github Could you update the gem on ruygems 