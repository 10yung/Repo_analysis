When using Z format specifier some abbreviations are not the same as in abbreviation tables such as For instance Alaska Daylight Time should be abbreviated as AKDT and instead is showing as ADT which is Atlantic Daylight time Gem version used Steps to reproduce Include localtimeTimenow format IM p Z in a test view Force a geolocation using the browsers dev tools Use Location name Anchorage Lat Long Timezone ID AmericaAnchorage In Chrome this is done by opening Dev tools and selecting settingsmore tools sensors and then click on add location Bumps rack from to details summaryChangelogsummary Sourced from racks changelog Changelog All notable changes to this project will be documented in this file For info on how to format all future additions to this file please reference Keep A Changelog Unreleased Note There are many unreleased changes in Rack master is around commits ahead of stable and below is not an exhaustive list If you would like to help out and document some of the unreleased changes PRs are welcome Added Changed Use Timehttpdate format for Expires as proposed by RFC nanaya Make Utilsstatuscode raise an error when the status symbol is invalid instead of Rename RequestSCHEMEWHITELIST to RequestALLOWEDSCHEMES Make MultipartParsergetfilename accept files with in their name Add Falcon to the default handler fallbacks ioquatix Update codebase to avoid string mutations in preparation for frozenstringliterals pat Change MockRequestenvfor to rely on the input optionally responding to size instead of length janko Rename RackFile RackFiles and add deprecation notice postmodern Removed Documentation Update broken example in SessionAbstractID documentation tonytonyjan Add Padrino to the list of frameworks implmenting Rack wikimatze Remove Mongrel from the suggested server options in the help output tricknotes Replace HISTORYmd and NEWSmd with CHANGELOGmd twitnithegirl Backfill CHANGELOGmd from to releases drenmi Fixed Remove calls to eof on Rack input in MultipartParser as this breaks the specification matthewd Preserve forwarded IP addresses for trusted proxy chains SamSaffron Fixed CVE Reduce buffer size of MultipartParser to avoid pathological parsing tenderlove Fix a call to a nonexisting method acceptshtml in the ShowExceptions middleware tomelm CVE Whitelist HTTP and HTTPS schemes in Requestscheme to prevent a possible XSS attack PatrickTulskie Fixed trtable truncated details details summaryCommitssummary e ee Bumping version f a b Introduce a new base class to avoid breaking when upgrading b cab Add a version prefix to the private id to make easier to migrate old values e e f Fallback to the public id when reading the session in the pool adapter ba d Also drop the session with the public id when destroying sessions a bbf Fallback to the legacy id when the new id is not found dc a Add the private id a f revert conditionals to master e remove NullSession c e b remove raise and get closer to master Additional commits viewable in compare view details br Dependabot compatibility score Dependabot will resolve any conflicts with this PR as long as you dont alter it yourself You can also trigger a rebase manually by commenting dependabot rebase dependabotautomergestart dependabotautomergeend details summaryDependabot commands and optionssummary br You can trigger Dependabot actions by commenting on this PR dependabot rebase will rebase this PR dependabot recreate will recreate this PR overwriting any edits that have been made to it dependabot merge will merge this PR after your CI passes on it dependabot squash and merge will squash and merge this PR after your CI passes on it dependabot cancel merge will cancel a previously requested merge and block automerging dependabot reopen will reopen this PR if it is closed dependabot ignore this patchminormajor version will close this PR and stop Dependabot creating any more for this minormajor version unless you reopen the PR or upgrade to it yourself dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency unless you reopen the PR or upgrade to it yourself dependabot use these labels will set the current labels as the default for future PRs for this repo and language dependabot use these reviewers will set the current reviewers as the default for future PRs for this repo and language dependabot use these assignees will set the current assignees as the default for future PRs for this repo and language dependabot use this milestone will set the current milestone as the default for future PRs for this repo and language You can disable automated security fix PRs for this repo from the Security Alerts page details I nttimeformatsformat I ntdateformatsformat TimeDATEFORMATS format and DateDATEFORMATS format will be scanned in that order for your format According to this behavior a Date object will be formatted with time formats yml en time formats default H date formats default a erb localdateDatetoday format default will be formatted as time Bumps loofah from to details summaryRelease notessummary Sourced from loofahs releases Security Address CVE Unsanitized JavaScript may occur in sanitized output when a crafted SVG element is republished This CVEs public notice is at flavorjonesloofah Features Expand set of allowed protocols to include tel and line Expand set of allowed CSS functions related to Allow greater precision in shorthand CSS values Thanks danfstucky Allow CSS property liststyle Thanks jaredbeck Allow CSS keywords thick and thin Thanks georgeclaghorn Allow HTML property contenteditable Thanks andreynering Bug fixes CSS hex values are no longer limited to lowercase hex Previously uppercase hex were scrubbed Thanks asok Deprecations Name Changes The following method and constants are hereby deprecated and will be completely removed in a future release Deprecate LoofahHelpersActionViewwhitelistsanitizer please use LoofahHelpersActionViewsafelistsanitizer instead Deprecate LoofahHelpersActionViewWhiteListSanitizer please use LoofahHelpersActionViewSafeListSanitizer instead Deprecate LoofahHTML WhiteList please use LoofahHTML SafeList instead Thanks to JuanitoFatas for submitting these changes in and for making the language used in Loofah more inclusive v Notably this release addresses CVE v Make public LoofahHTML Scrubforcecorrectattributeescaping which was previously a private method This is so that downstream gems like railshtmlsanitizer can use this logic directly for their own attribute scrubbers should they need to address CVE v Notably this release mitigates CVE trtable truncated details details summaryChangelogsummary Sourced from loofahs changelog Security Address CVE Unsanitized JavaScript may occur in sanitized output when a crafted SVG element is republished This CVEs public notice is at flavorjonesloofah Features Expand set of allowed protocols to include tel and line Expand set of allowed CSS functions related to Allow greater precision in shorthand CSS values Thanks danfstucky Allow CSS property liststyle Thanks jaredbeck Allow CSS keywords thick and thin Thanks georgeclaghorn Allow HTML property contenteditable Thanks andreynering Bug fixes CSS hex values are no longer limited to lowercase hex Previously uppercase hex were scrubbed Thanks asok Deprecations Name Changes The following method and constants are hereby deprecated and will be completely removed in a future release Deprecate LoofahHelpersActionViewwhitelistsanitizer please use LoofahHelpersActionViewsafelistsanitizer instead Deprecate LoofahHelpersActionViewWhiteListSanitizer please use LoofahHelpersActionViewSafeListSanitizer instead Deprecate LoofahHTML WhiteList please use LoofahHTML SafeList instead Thanks to JuanitoFatas for submitting these changes in and for making the language used in Loofah more inclusive Security Address CVE Unsanitized JavaScript may occur in sanitized output when a crafted SVG element is republished This CVEs public notice is at flavorjonesloofah Meta The mailing list is now on Google Groups trtable truncated details details summaryCommitssummary df version bump to v e a Merge pull request from flavorjones xssvulnerability d f update CHANGELOG c a mitigate XSS vulnerability in SVG animate attributes a bd rufo formatting bdf formatting in README dc update CHANGELOG with release date bcbd b update dev gemspec f d c d version bump to v fee c update dev deps Additional commits viewable in compare view details br Dependabot compatibility score Dependabot will resolve any conflicts with this PR as long as you dont alter it yourself You can also trigger a rebase manually by commenting dependabot rebase dependabotautomergestart dependabotautomergeend details summaryDependabot commands and optionssummary br You can trigger Dependabot actions by commenting on this PR dependabot rebase will rebase this PR dependabot recreate will recreate this PR overwriting any edits that have been made to it dependabot merge will merge this PR after your CI passes on it dependabot squash and merge will squash and merge this PR after your CI passes on it dependabot cancel merge will cancel a previously requested merge and block automerging dependabot reopen will reopen this PR if it is closed dependabot ignore this patchminormajor version will close this PR and stop Dependabot creating any more for this minormajor version unless you reopen the PR or upgrade to it yourself dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency unless you reopen the PR or upgrade to it yourself dependabot use these labels will set the current labels as the default for future PRs for this repo and language dependabot use these reviewers will set the current reviewers as the default for future PRs for this repo and language dependabot use these assignees will set the current assignees as the default for future PRs for this repo and language dependabot use this milestone will set the current milestone as the default for future PRs for this repo and language You can disable automated security fix PRs for this repo from the Security Alerts page details Add translation for Persian language fa Bumps nokogiri from to details summaryRelease notessummary Sourced from nokogiris releases Security Address CVE A command injection vulnerability in Nokogiri v and earlier allows commands to be executed in a subprocess by Rubys Kernelopen method Processes are vulnerable only if the undocumented method NokogiriCSSTokenizerloadfile is being passed untrusted user input This vulnerability appears in code generated by the Rexical gem versions v and earlier Rexical is used by Nokogiri to generate lexical scanner code for parsing CSS queries The underlying vulnerability was addressed in Rexical v and Nokogiri upgraded to this version of Rexical in Nokogiri v This CVEs public notice is sparklemotionnokogiri Security Notes MRI Pulled in upstream patch from libxslt that addresses CVE Full details are available in Note that this patch is not yet as of in an upstream release of libxslt Security MRI Remove support from vendored libxml for future script macros MRI Remove support from vendored libxml for serverside includes within attributes Bug fixes JRuby Fix node ownership in duplicated documents JRuby Rethrow exceptions caught by Java SAX handler Thanks adjam Features MRI During installation handle Xcode s new library pathOS Thanks mlj and deepj Avoid unnecessary creation of Procs in many methods Thanks chopraanmol Bug fixes CSS selector has now correctly matches against any descendant Previously this selector matched against only direct children Thanks Phrogz NodeSetattr now returns nil if its empty Previously this raised a NoMethodError MRI XPath errors are no longer suppressed during XSLTStylesheettransform Previously these errors were suppressed which led to silent failures and a subsequent segfault trtable truncated details details summaryChangelogsummary Sourced from nokogiris changelog Security Address CVE A command injection vulnerability in Nokogiri v and earlier allows commands to be executed in a subprocess by Rubys Kernelopen method Processes are vulnerable only if the undocumented method NokogiriCSSTokenizerloadfile is being passed untrusted user input This vulnerability appears in code generated by the Rexical gem versions v and earlier Rexical is used by Nokogiri to generate lexical scanner code for parsing CSS queries The underlying vulnerability was addressed in Rexical v and Nokogiri upgraded to this version of Rexical in Nokogiri v This CVEs public notice is sparklemotionnokogiri Security Notes MRI Pulled in upstream patch from libxslt that addresses CVE Full details are available in Note that this patch is not yet as of in an upstream release of libxslt Security MRI Remove support from vendored libxml for future script macros MRI Remove support from vendored libxml for serverside includes within attributes Bug fixes JRuby Fix node ownership in duplicated documents JRuby Rethrow exceptions caught by Java SAX handler Thanks adjam Features MRI During installation handle Xcode s new library path Thanks mlj and deepj Avoid unnecessary creation of Procs in many methods Thanks chopraanmol Bug fixes CSS selector has now correctly matches against any descendant Previously this selector matched against only direct children Thanks Phrogz NodeSetattr now returns nil if its empty Previously this raised a NoMethodError MRI XPath errors are no longer suppressed during XSLTStylesheettransform Previously these errors were suppressed which led to silent failures and a subsequent segfault trtable truncated details details summaryCommitssummary beb e version bump to v d Merge branch csstokenizerloadfilevulnerabilityv x into v x c b fc update CHANGELOG fe f regenerate lexical scanner using rexical eliminate eval from Builderinitialize a bc rufo formatting ecb rubocop security scan is run as part of the test rake target d cd add rubocop as a dev dependency ee b adding a temporary pipeline for v x e af version bump to v Additional commits viewable in compare view details br Dependabot compatibility score Dependabot will resolve any conflicts with this PR as long as you dont alter it yourself You can also trigger a rebase manually by commenting dependabot rebase dependabotautomergestart dependabotautomergeend details summaryDependabot commands and optionssummary br You can trigger Dependabot actions by commenting on this PR dependabot rebase will rebase this PR dependabot recreate will recreate this PR overwriting any edits that have been made to it dependabot merge will merge this PR after your CI passes on it dependabot squash and merge will squash and merge this PR after your CI passes on it dependabot cancel merge will cancel a previously requested merge and block automerging dependabot reopen will reopen this PR if it is closed dependabot ignore this patchminormajor version will close this PR and stop Dependabot creating any more for this minormajor version unless you reopen the PR or upgrade to it yourself dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency unless you reopen the PR or upgrade to it yourself dependabot use these labels will set the current labels as the default for future PRs for this repo and language dependabot use these reviewers will set the current reviewers as the default for future PRs for this repo and language dependabot use these assignees will set the current assignees as the default for future PRs for this repo and language dependabot use this milestone will set the current milestone as the default for future PRs for this repo and language You can disable automated security fix PRs for this repo from the Security Alerts page details my requirement of adding this from js so how to use localtimeago in js file and in controllers I have a nonenglish Rails app which use localtime gem ruby localtimeagoobjcreatedat I am trying to localize it On the client side everything is working just fine The text shows in my custom language But on the first load of the page I get the english text I guess this is the server side text How to set the locale of localtime gem on server side I have already set configi ndefaultlocale Not sure if this is a known issue didnt find anything localtimebatchscheduledfor Ymd HM Z Works in Chrome but not in Firefox I dont think it makes a always makes sense to use a datetime format for the title attribute since it might be confusing to users when it doesnt match the current format they are viewing In my case I happen to be displaying dates daysmonths and times hoursminutes separately so I find it more consistent to have the title only use the date or time format in these cases Im open to making changes if you have any input