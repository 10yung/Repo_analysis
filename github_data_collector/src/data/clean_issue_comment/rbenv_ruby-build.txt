On a fresh install of ubuntu I had to install these dependencies to get rbenv install to work zlib gdev libssldev Perhaps it is useful to document Heres the question on SO with logs pertaining to Mojave The ones below pertain to MacOS Catalina rbenv install Downloading openssl dtargz Installing openssl d BUILD FAILED OS X using rubybuild Inspect or clean up the working tree at varfolderslxgbzwc j xncb m vr gnTrubybuild ELb GY Results logged to varfolderslxgbzwc j xncb m vr gnTrubybuild log Last log lines sservermain in sservero verifystatelesscookiecallback referenced from sservermain in sservero waitforasync referenced from sclientmain in scliento svbody in sservero ld symbols not found for architecture x clang error linker command failed with exit code use v to see invocation make appsopenssl Error make all Error Read somewhere that someone has pushed in C code on a plain C program somewhere Dont know how much of that is true I attempted to install ruby with rubybuild on a bit powerpc with freebsd and came across the following rubybuild log rootmachine rbenv install Downloading ruby tarbz Installing ruby BUILD FAILED FreeBSD RELEASE using rubybuild Inspect or clean up the working tree at tmprubybuild WmQdcU Results logged to tmprubybuild log Last log lines gmake Entering directory tmprubybuild WmQdcUruby gmake Entering directory tmprubybuild WmQdcUruby exttestarithseqextract compiling extractc linking sharedobject testarithseqextractso librubyso file not recognized File format not recognized gmake Makefile extpowerpcfreebsd testarithseqextractso Error gmake Leaving directory tmprubybuild WmQdcUruby exttestarithseqextract gmake extsmk exttestarithseqextractall Error gmake Leaving directory tmprubybuild WmQdcUruby gmake uncommonmk buildext Error rootmachine Hello I just set up a new mac and now RUBYCONFIGUREOPTSwithjemalloc rbenv install is failing with this error checking for utimeh yes checking gmph usability no checking gmph presence no checking for gmph no checking for library containing mallocconf no checking jemallocjemalloch usability no checking jemallocjemalloch presence no checking for jemallocjemalloch no checking for jemalloc with JEMALLOCMANGLE no configure error jemalloc requested but not found I ran brew install rbenv jemalloc to install rbenv and jemalloc How can I fix this issue Thanks Force enabling shared libraries is causing some issues in my environment Currently I am locking my environment to the git sha on rubybuild before this change was introduced I am still looking into moving everything over to be compatible with this change but a flag would be very helpful especially since there is no obvious way to prevent this this change from happening shell rbenv v rbenv rubybuild version rubybuild rbenv install Downloading openssl qtargz Installing openssl q BUILD FAILED OS X using rubybuild Inspect or clean up the working tree at varfoldersqswpmg r nz pvvs r gnTrubybuild QjQINd Results logged to varfoldersqswpmg r nz pvvs r gnTrubybuild log Last log lines helpful ld ldso ldso Solaris dldsl HP ldd crle Solaris pldd Solaris ldconfig Linux chatr HP cp libcryptopc Usersalexrbenvversions openssllibpkgconfig chmod Usersalexrbenvversions openssllibpkgconfiglibcryptopc cp libsslpc Usersalexrbenvversions openssllibpkgconfig chmod Usersalexrbenvversions openssllibpkgconfiglibsslpc cp opensslpc Usersalexrbenvversions openssllibpkgconfig chmod Usersalexrbenvversions openssllibpkgconfigopensslpc make Leaving directory privatevarfoldersqswpmg r nz pvvs r gnTrubybuild QjQINdopenssl q The actual failure in the middle of that log seems to be Cannot create directory Usersalexrbenvversions File exists However that folder does not exist when I run rbenv Installing with RUBYCONFIGUREOPTSwithoptdirusrlocaloptopenssl which still downloads and compiles OpenSSL not sure how to disable that seems to work rubybuild log Edit To clarify this is happening with all versions of Ruby that I try to install with rbenv Im trying to install ruby with rbenv Machine is macOS Mojave The command rbenv install just hangs after reaching rubybuild using readline from homebrew From other threads Ive tried running RUBYCONFIGUREOPTSwithreadlinedirbrew prefix readline rbenv install as well as disabling uninstalling my antivirus software Uninstalling and reinstalling brew rbenv rubybuild readline etc Same result Heres the log varfolders nxdg y z qj v qb y qc gnTrubybuild rbenv varfolders nxdg y z qj v qb y qc gnTrubybuild ruby varfolders nxdg y z qj v qb y qc gnTrubybuild rbenv checking for ruby Usersrbenvshimsruby toolconfigguess already exists toolconfigsub already exists checking build system type x appledarwin checking host system type x appledarwin checking target system type x appledarwin checking whether the C compiler works yes checking for C compiler default output file name aout checking for suffix of executables checking whether we are cross compiling no checking for suffix of object files o checking whether we are using the GNU C compiler yes checking whether clang accepts g yes checking for clang option to accept ISO C none needed checking whether we are using the GNU C compiler yes checking whether clang accepts g yes checking how to run the C preprocessor clang E checking for grep that handles long lines and e usrbingrep checking for egrep usrbingrep E checking whether clang needs traditional no checking for ld ld checking whether the linker is GNU ld no checking whether clang E accepts o yes checking for clang usrbinclang checking for real target cpu x checking for ranlib cached checking for ar cached libtool static checking for libtool static flags cached nowarningfornosymbols o checking for as as checking for objdump objdump checking for objcopy no checking for gobjcopy no checking for nm nm checking whether ln s works yes checking whether make sets MAKE make No targets specified and no makefile found Stop I am receiving the following error using ConEmuMINGW on Windows I have installed MinGW to original tackle the first error of no gcc installed After that was taken care of I now receive this error I cannot find anything to help with this problem so creating this issue is my last resort to hopefully finding or receiving a solution Please let me know if there is anything else I can do to help supply you with the information that you may need Thank you RyanRyanY MINGW rbenv install Downloading ruby tarbz Installing ruby BUILD FAILED MINGW NT x using rubybuild g e b Inspect or clean up the working tree at tmprubybuild Results logged to tmprubybuild log Last log lines c mingw include timeh note previous declaration of clockgetres was here int clockgetres clockidt struct timespec cc exe warning unrecognized command line option Wnoselfassign cc exe warning unrecognized command line option Wnoparenthesesequality cc exe warning unrecognized command line option Wnoconstantlogicaloperand make miniinito Error make Waiting for unfinished jobs make dmydlno Error make maino Error rbenv install Downloading ruby tarbz Installing ruby BUILD FAILED Ubuntu using rubybuild gd e Inspect or clean up the working tree at tmprubybuild Results logged to tmprubybuild log Last log lines randomo In function explicitbzero usrincludex linuxgnubitsstringfortifiedh undefined reference to explicitbzerochk usrincludex linuxgnubitsstringfortifiedh undefined reference to explicitbzerochk usrincludex linuxgnubitsstringfortifiedh undefined reference to explicitbzerochk usrincludex linuxgnubitsstringfortifiedh undefined reference to explicitbzerochk usrincludex linuxgnubitsstringfortifiedh undefined reference to explicitbzerochk randomousrincludex linuxgnubitsstringfortifiedh more undefined references to explicitbzerochk follow collect error ld returned exit status Makefile recipe for target miniruby failed make miniruby Error I get an openssl error when trying to install Ruby X I have successfully installed and It seems openssl doesnt support Ruby but openssl is required by rubybuild operative system openSUSE Leap openssl version OpenSSL ifips Aug rubybuild version rbenv version It may be related to Log rbenv install compiling osslsslc In file included from osslh from osslenginec usrincludeopensslasn mach error error This file is obsolete please update your software error This file is obsolete please update your software compiling osslpkeyrsac In file included from osslh from osslx c usrincludeopensslasn mach error error This file is obsolete please update your software error This file is obsolete please update your software In file included from osslh from osslcipherc usrincludeopensslasn mach error error This file is obsolete please update your software error This file is obsolete please update your software linking sharedobject gdbmso In file included from osslh from osslpkcs c usrincludeopensslasn mach error error This file is obsolete please update your software error This file is obsolete please update your software In file included from osslh from osslpkcs c usrincludeopensslasn mach error error This file is obsolete please update your software error This file is obsolete please update your software In file included from osslh from osslx attrc usrincludeopensslasn mach error error This file is obsolete please update your software error This file is obsolete please update your software In file included from osslh from osslenginec opensslmissingh error macro EVPMDCTXcreate passed arguments but takes just EVPMDCTX EVPMDCTXcreatevoid In file included from usrincludeopensslx h from usrincludeopensslx v h from osslh from osslenginec opensslmissingh error expected declaration specifiers or before token void EVPMDCTXinitEVPMDCTX ctx opensslmissingh error expected declaration specifiers or before token void EVPMDCTXdestroyEVPMDCTX ctx make Makefile osslengineo Error make Waiting for unfinished jobs In file included from osslh from osslpkeyrsac usrincludeopensslasn mach error error This file is obsolete please update your software error This file is obsolete please update your software In file included from osslh from osslsslc usrincludeopensslasn mach error error This file is obsolete please update your software error This file is obsolete please update your software In file included from osslh from osslx c opensslmissingh error macro EVPMDCTXcreate passed arguments but takes just EVPMDCTX EVPMDCTXcreatevoid In file included from usrincludeopensslx h from usrincludeopensslx v h from osslh from osslx c opensslmissingh error expected declaration specifiers or before token void EVPMDCTXinitEVPMDCTX ctx opensslmissingh error expected declaration specifiers or before token void EVPMDCTXdestroyEVPMDCTX ctx make Makefile osslx o Error make Leaving directory tmprubybuild ruby extgdbm In file included from osslh from osslcipherc opensslmissingh error macro EVPMDCTXcreate passed arguments but takes just EVPMDCTX EVPMDCTXcreatevoid In file included from usrincludeopensslx h from usrincludeopensslx v h from osslh from osslcipherc opensslmissingh error expected declaration specifiers or before token void EVPMDCTXinitEVPMDCTX ctx opensslmissingh error expected declaration specifiers or before token void EVPMDCTXdestroyEVPMDCTX ctx In file included from includerubyh from osslh from osslcipherc osslcipherc In function osslciphernew osslcipherc error invalid application of sizeof to incomplete type EVPCIPHERCTX aka struct evpcipherctxst DATAPTRobj ctx ZALLOCEVPCIPHERCTX includerubyrubyh note in definition of macro RBZALLOCN define RBZALLOCNtypen typerubyxcallocnsizeoftype includerubyrubyh note in expansion of macro RBZALLOC define ZALLOCtype RBZALLOCtype osslcipherc note in expansion of macro ZALLOC DATAPTRobj ctx ZALLOCEVPCIPHERCTX osslcipherc note in expansion of macro AllocCipher AllocCipherret ctx osslcipherc In function osslciphermemsize osslcipherc error dereferencing pointer to incomplete type EVPCIPHERCTX aka const struct evpcipherctxst return sizeofctx In file included from includerubyh from osslh from osslcipherc osslcipherc In function osslcipherinitialize osslcipherc error invalid application of sizeof to incomplete type EVPCIPHERCTX aka struct evpcipherctxst DATAPTRobj ctx ZALLOCEVPCIPHERCTX includerubyrubyh note in definition of macro RBZALLOCN define RBZALLOCNtypen typerubyxcallocnsizeoftype includerubyrubyh note in expansion of macro RBZALLOC define ZALLOCtype RBZALLOCtype osslcipherc note in expansion of macro ZALLOC DATAPTRobj ctx ZALLOCEVPCIPHERCTX osslcipherc note in expansion of macro AllocCipher AllocCipherself ctx osslcipherc In function osslciphercopy osslcipherc error invalid application of sizeof to incomplete type EVPCIPHERCTX aka struct evpcipherctxst DATAPTRobj ctx ZALLOCEVPCIPHERCTX includerubyrubyh note in definition of macro RBZALLOCN define RBZALLOCNtypen typerubyxcallocnsizeoftype includerubyrubyh note in expansion of macro RBZALLOC define ZALLOCtype RBZALLOCtype osslcipherc note in expansion of macro ZALLOC DATAPTRobj ctx ZALLOCEVPCIPHERCTX osslcipherc note in expansion of macro AllocCipher AllocCipherself ctx make Entering directory tmprubybuild ruby make warning jN forced in submake disabling jobserver mode In file included from nkfc nkfutf nkfc In function moduleconnection nkfutf nkfc warning this if clause does not guard Wmisleadingindentation if nkfencunicodepoutputencoding nkfutf nkfc note this statement but the latter is misleadingly indented as if it were guarded by the if if x f NKFUNSPECIFIED In file included from osslh from osslpkcs c opensslmissingh error macro EVPMDCTXcreate passed arguments but takes just EVPMDCTX EVPMDCTXcreatevoid In file included from usrincludeopensslx h from usrincludeopensslx v h from osslh from osslpkcs c opensslmissingh error expected declaration specifiers or before token void EVPMDCTXinitEVPMDCTX ctx opensslmissingh error expected declaration specifiers or before token void EVPMDCTXdestroyEVPMDCTX ctx osslcipherc In function osslciphermemsize osslcipherc warning control reaches end of nonvoid function Wreturntype make Makefile osslpkcs o Error compiling pathnamec make Makefile osslciphero Error installing default pathname libraries In file included from osslh from osslpkcs c opensslmissingh error macro EVPMDCTXcreate passed arguments but takes just EVPMDCTX EVPMDCTXcreatevoid In file included from usrincludeopensslx h from usrincludeopensslx v h from osslh from osslpkcs c opensslmissingh error expected declaration specifiers or before token void EVPMDCTXinitEVPMDCTX ctx opensslmissingh error expected declaration specifiers or before token void EVPMDCTXdestroyEVPMDCTX ctx make Makefile osslpkcs o Error nkfutf nkfc In function options nkfutf nkfc warning this statement may fall through Wimplicitfallthrough foldpreservef TRUE nkfutf nkfc note here case f folding f or f In file included from osslh from osslx attrc opensslmissingh error macro EVPMDCTXcreate passed arguments but takes just EVPMDCTX EVPMDCTXcreatevoid In file included from usrincludeopensslx h from usrincludeopensslx v h from osslh from osslx attrc opensslmissingh error expected declaration specifiers or before token void EVPMDCTXinitEVPMDCTX ctx opensslmissingh error expected declaration specifiers or before token void EVPMDCTXdestroyEVPMDCTX ctx osslx attrc In function osslx attrsetvalue osslx attrc error dereferencing pointer to incomplete type X ATTRIBUTE aka struct x attributesst ifattrvalueset In file included from osslh from osslpkeyrsac opensslmissingh error macro EVPMDCTXcreate passed arguments but takes just EVPMDCTX EVPMDCTXcreatevoid In file included from usrincludeopensslx h from usrincludeopensslx v h from osslh from osslpkeyrsac opensslmissingh error expected declaration specifiers or before token void EVPMDCTXinitEVPMDCTX ctx opensslmissingh error expected declaration specifiers or before token void EVPMDCTXdestroyEVPMDCTX ctx osslpkeyrsac In function osslrsanew osslpkeyrsac error dereferencing pointer to incomplete type EVPPKEY aka struct evppkeyst if EVPPKEYtypepkeytype EVPPKEYRSA osslpkeyrsac In function rsagenerate osslpkeyrsac error storage size of cb isn t known BNGENCB cb osslpkeyrsac warning unused variable cb Wunusedvariable osslpkeyrsac In function osslrsaisprivate osslpkeyrsac warning control reaches end of nonvoid function Wreturntype make Makefile osslpkeyrsao Error In file included from osslh from osslsslc opensslmissingh error macro EVPMDCTXcreate passed arguments but takes just EVPMDCTX EVPMDCTXcreatevoid In file included from usrincludeopensslx h from usrincludeopensslx v h from osslh from osslsslc opensslmissingh error expected declaration specifiers or before token void EVPMDCTXinitEVPMDCTX ctx opensslmissingh error expected declaration specifiers or before token void EVPMDCTXdestroyEVPMDCTX ctx osslsslc warning TLSv method is deprecated Wdeprecateddeclarations OSSLSSLMETHODENTRYTLSv In file included from usrincludeopenssleos h from usrincludeopensslerrh from osslh from osslsslc usrincludeopensslsslh note declared here DEPRECATEDIN owur const SSLMETHOD TLSv methodvoid TLSv osslsslc warning TLSv servermethod is deprecated Wdeprecateddeclarations OSSLSSLMETHODENTRYTLSv server In file included from usrincludeopenssleos h from usrincludeopensslerrh from osslh from osslsslc usrincludeopensslsslh note declared here DEPRECATEDIN owur const SSLMETHOD TLSv servermethodvoid TLSv osslsslc warning TLSv clientmethod is deprecated Wdeprecateddeclarations OSSLSSLMETHODENTRYTLSv client In file included from usrincludeopenssleos h from usrincludeopensslerrh from osslh from osslsslc usrincludeopensslsslh note declared here DEPRECATEDIN owur const SSLMETHOD TLSv clientmethodvoid TLSv osslsslc warning TLSv method is deprecated Wdeprecateddeclarations OSSLSSLMETHODENTRYTLSv In file included from usrincludeopenssleos h from usrincludeopensslerrh from osslh from osslsslc usrincludeopensslsslh note declared here DEPRECATEDIN owur const SSLMETHOD TLSv methodvoid TLSv osslsslc warning TLSv servermethod is deprecated Wdeprecateddeclarations OSSLSSLMETHODENTRYTLSv server In file included from usrincludeopenssleos h from usrincludeopensslerrh from osslh from osslsslc usrincludeopensslsslh note declared here DEPRECATEDIN owur const SSLMETHOD TLSv servermethodvoid TLSv osslsslc warning TLSv clientmethod is deprecated Wdeprecateddeclarations OSSLSSLMETHODENTRYTLSv client In file included from usrincludeopenssleos h from usrincludeopensslerrh from osslh from osslsslc usrincludeopensslsslh note declared here DEPRECATEDIN owur const SSLMETHOD TLSv clientmethodvoid TLSv osslsslc warning TLSv method is deprecated Wdeprecateddeclarations OSSLSSLMETHODENTRYTLSv In file included from usrincludeopenssleos h from usrincludeopensslerrh from osslh from osslsslc usrincludeopensslsslh note declared here DEPRECATEDIN owur const SSLMETHOD TLSv methodvoid TLSv osslsslc warning TLSv servermethod is deprecated Wdeprecateddeclarations OSSLSSLMETHODENTRYTLSv server In file included from usrincludeopenssleos h from usrincludeopensslerrh from osslh from osslsslc usrincludeopensslsslh note declared here DEPRECATEDIN owur const SSLMETHOD TLSv servermethodvoid TLSv osslsslc warning TLSv clientmethod is deprecated Wdeprecateddeclarations OSSLSSLMETHODENTRYTLSv client In file included from usrincludeopenssleos h from usrincludeopensslerrh from osslh from osslsslc usrincludeopensslsslh note declared here DEPRECATEDIN owur const SSLMETHOD TLSv clientmethodvoid TLSv osslsslc In function osslsslctxfree osslsslc error dereferencing pointer to incomplete type SSLCTX aka struct sslctxst ctxcertstore NULL In file included from nkfc nkfutf nkfc In function setinputencoding nkfutf nkfc warning this statement may fall through Wimplicitfallthrough if x f NKFUNSPECIFIED x f FALSE x specified implicitly nkfutf nkfc note here case CP osslx attrc In function osslx attrgetvalue osslx attrc warning implicit declaration of function i dASN SETOFASN TYPE did you mean i dASN SETANY Wimplicitfunctiondeclaration length i dASN SETOFASN TYPEattrvalueset i dASN SETANY osslsslc In function osslcalltmpdhcallback osslsslc error dereferencing pointer to incomplete type EVPPKEY aka struct evppkeyst if EVPPKEYtypepkeytype EVPPKEYDH return Qfalse osslsslc In function osslsslctxsessionnewcb osslsslc warning implicit declaration of function CRYPTOadd did you mean CRYPTOfree Wimplicitfunctiondeclaration CRYPTOadd sessreferences CRYPTOLOCKSSLSESSION CRYPTOfree osslsslc error dereferencing pointer to incomplete type SSLSESSION aka struct sslsessionst CRYPTOadd sessreferences CRYPTOLOCKSSLSESSION make Makefile osslx attro Error osslsslc error CRYPTOLOCKSSLSESSION undeclared first use in this function did you mean CRYPTOEXINDEXSSLSESSION CRYPTOadd sessreferences CRYPTOLOCKSSLSESSION CRYPTOEXINDEXSSLSESSION osslsslc note each undeclared identifier is reported only once for each function it appears in osslsslc In function osslsslctxsessionremovecb osslsslc error CRYPTOLOCKSSLSESSION undeclared first use in this function did you mean CRYPTOEXINDEXSSLSESSION CRYPTOadd sessreferences CRYPTOLOCKSSLSESSION CRYPTOEXINDEXSSLSESSION osslsslc In function sslinfocb osslsslc warning implicit declaration of function SSLstate did you mean SSLwrite Wimplicitfunctiondeclaration int state SSLstatessl SSLwrite osslsslc In function osslsslctxsetup osslsslc warning implicit declaration of function SSLCTXsettmpecdhcallback did you mean SSLCTXsettmpdhcallback Wimplicitfunctiondeclaration SSLCTXsettmpecdhcallbackctx ossltmpecdhcallback SSLCTXsettmpdhcallback osslsslc warning passing argument of SSLCTXsesssetgetcb from incompatible pointer type Wincompatiblepointertypes SSLCTXsesssetgetcbctx osslsslctxsessiongetcb In file included from osslh from osslsslc usrincludeopensslsslh note expected SSLSESSION struct sslst const unsigned char int int aka struct sslsessionst struct sslst const unsigned char int int but argument is of type SSLSESSION SSL unsigned char int int aka struct sslsessionst struct sslst unsigned char int int void SSLCTXsesssetgetcbSSLCTX ctx osslsslc In function osslsslctxgetciphers osslsslc warning assignment discards const qualifier from pointer target type Wdiscardedqualifiers cipher skSSLCIPHERvalueciphers i osslsslc In function osslsslwriteinternal osslsslc warning this statement may fall through Wimplicitfallthrough if errno rbsysfail osslsslc note here default osslsslc In function ossltmpecdhcallback osslsslc warning control reaches end of nonvoid function Wreturntype osslsslc In function ossltmpdhcallback osslsslc warning control reaches end of nonvoid function Wreturntype make Makefile osslsslo Error make Leaving directory tmprubybuild ruby extopenssl make extsmk extopensslall Error make Waiting for unfinished jobs linking sharedobject jsonextparserso make Leaving directory tmprubybuild ruby extjsonparser linking sharedobject objspaceso linking sharedobject jsonextgeneratorso make Leaving directory tmprubybuild ruby extobjspace make Leaving directory tmprubybuild ruby extjsongenerator linking sharedobject pathnameso make Leaving directory tmprubybuild ruby extpathname linking sharedobject bigdecimalso make Leaving directory tmprubybuild ruby extbigdecimal linking sharedobject datecoreso make Leaving directory tmprubybuild ruby extdate linking sharedobject nkfso make Leaving directory tmprubybuild ruby extnkf make Leaving directory tmprubybuild ruby make uncommonmk buildext Error 