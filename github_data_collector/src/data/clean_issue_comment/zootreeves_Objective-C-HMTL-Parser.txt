Adding free to newVal causing memory leak HTMLNodes content method returns nil when it has no children with the current code NSStringcontents if nodechildren nodechildrencontent return NSString stringWithCStringvoidnodechildrencontent encodingNSUTF StringEncoding return nil Shouldnt HTMLNodes contents method be this NSStringcontents if nodecontent return NSString stringWithCStringvoidnodecontent encodingNSUTF StringEncoding return nil This pull request corrects the capitalization of Xcode sweatsmile Created with xcodereadme In some case the encoding from the method CFStringGetCStringPtr come out NULL Its very strange hello i modify a file in your project for test sorry for you After I upgrade to iOS I use the function idinitWithStringNSStringstring errorNSErrorerror In iOS the issue about Tagged Pointer NSStrings have changed the function CFStringGetCStringPtr that will return NULL back It will make an error when encoding Chinese So I have change the code as below if self super init doc NULL if string length CFStringEncoding cfenc CFStringConvertNSStringEncodingToEncodingNSUTF StringEncoding CFStringRef cfencstr CFStringConvertEncodingToIANACharSetNamecfenc const char enc CFStringGetCStringPtrcfencstr char buffer if enc NULL if CFStringGetCStringcfencstr buffer kCFStringEncodingUTF enc buffer doc htmlParseDocxmlChar string UTF String enc int optionsHtml HTMLPARSERECOVER optionsHtml optionsHtml HTMLPARSENOERROR Uncomment this to see HTML errors optionsHtml optionsHtml HTMLPARSENOWARNING doc htmlReadDoc xmlChar string UTF String NULL enc optionsHtml else if error error NSError errorWithDomainHTMLParserdomain code userInfonil zootreeves If I find a node and wish to add an attribute programatically is that possible eg I get this node a href But once I get this I wish to add an attribute and change it to a href classlink Is there a way for me to get all of the the attributes that my tag has Ex a href titlegaggle link stylefloatleftGoogle linka Returns hreftitlestyle Issue in this line forxmlNode child attrchildren NULL child child childnext Warning is HTMLNodem Loop will run at most once loop increment never executed screen shot at pm 