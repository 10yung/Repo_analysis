I use Plex DVR with an HDHomeRun and the files are stored as MPEG videos These files are huge so I want to transcode to m v Default and quick both with m v seemed to produce good results on a hour p original Quick was obviously way faster File size went from GB to GB Just wondering there are settings that might get that file smaller or encode it faster I have installed dependencies with Homebrew However I get the following error when I run transcodevideo user transcodevideo scan VolumesBLURAYDISC usrlocalbintranscodevideo HandBrakeCLI not available I have installed both the Formula handbrake and the Cask handbrake Hello Have you considered using VMAF andor compressibility check in your framework The workflow that I have in mind is this one Choose a vmaf quality that is acceptable for you encode a small part of the original video of the video in seconds clips spread equally to all video in crf x calculate vmaf of that clip if the vmaf is high then increase crf in order to decrease bitrate and go to step If the vmaf is low then decrease crf in order to increase bitrate and go to step If the vmaf quality is ok then you have your crf value for that video that wastes no bitrate Encode the whole video and inspect or vmaf it There may be a super simple solution to this that Im not seeing so my apologies if so Since updating to a more recent version when using Notepad on Windows all logs are missing formatting making them difficult to read Essentially all line breaks are missing Opening the log in virtually any other text editor shows the correct formatting intact Is there anything I can do so log files retain formatting when opened in Notepad The older version of videotranscoding I was using was before so Im wondering if that change made the difference Its been quite a while since Id updated my videotranscoding gem or any of the tools it was using I did a big run through today and see this pop up at the beginning of my logs Cannot load nvEncodeAPI dll Cannot load nvEncodeAPI dll Cannot load nvEncodeAPI dll Cannot load nvEncodeAPI dll Im in a Windows environment Im not using hardware encoding but I take it this relates to that Anything to be concerned over Log attached here Stabbing Melons with Director Alexandre O Philippemkvlog Hi donmelton I have an official question When adding not burning subtitles is there a way to have the title field copied as well I dont see it in the help or readme With anime in particular you often have multiple English subtitles studio improved Disney rerelease and signs with subs only for relevant inmovie signs Using addsubtitle all works as expected but the detailed names arent copied over so it isnt clear which English sub is which Is there a way to do this today or can I submit a feature request to copy existing subtitle descriptions when the addsubtitle switch is called Thanks Here are mediainfo examples Source Text ID Format PGS Muxing mode zlib Codec ID SHDMVPGS Codec IDInfo Picture based subtitle format used on BDsHDDVDs Duration h min Bit rate kbs Count of elements Stream size MiB Title Ghibli Language English Default No Forced No Text ID Format PGS Muxing mode zlib Codec ID SHDMVPGS Codec IDInfo Picture based subtitle format used on BDsHDDVDs Duration h min Bit rate kbs Count of elements Stream size MiB Title Disney Language English Default Yes Forced Yes Text ID Format PGS Muxing mode zlib Codec ID SHDMVPGS Codec IDInfo Picture based subtitle format used on BDsHDDVDs Duration h min Bit rate kbs Count of elements Stream size MiB Title SDH Language English Default No Forced No and transcoded Text ID Format PGS Codec ID SHDMVPGS Codec IDInfo Picture based subtitle format used on BDsHDDVDs Duration h min Language English Default No Forced No Text ID Format PGS Codec ID SHDMVPGS Codec IDInfo Picture based subtitle format used on BDsHDDVDs Duration h min Language English Default No Forced No Text ID Format PGS Codec ID SHDMVPGS Codec IDInfo Picture based subtitle format used on BDsHDDVDs Duration h min Language English Default No Forced No Proposal to change default surround audio format and bitrate Let me just cut to the chase I propose that the default surround audio format and bitrate of transcodevideo be changed from Dolby Digital AC at Kbps to Dolby Digital Plus DD or EAC at Kbps What It is inevitable that our default surround audio format and bitrate will change The only question is when And I want to do that sooner rather than later Please remember that Im only proposing that we change the default Not to somehow disallow AC at Kbps Im not completely insane AC is an ancient audio compression format even older than MP Achieving transparency with it requires using close to its maximum bitrate of Kbps And that bitrate is more that of our target video bitrate for p content Thats just crazy Whats even crazier is when you consider that by default each surround track is duplicated ie transcodevideo creates two output tracks one in AC track at Kbps and one in stereo AAC track at Kbps And thats a combined bitrate of over of our p target While this strategy is portable it has never been a good way to achieve my original smaller goal for the project So our audio footprint needs to get smaller And wouldnt it be nice if we could do that and improve quality at the same time I had hoped that we could transition to multichannel AAC audio since HandBrake and FFmpeg can already create channels with it But other than desktop PCs native AAC support is only available on some Androidbased devices while support is essentially nonexistant And its clear that the PC mobile device TV and home theater industries are now supporting DD decoding or passthrough pretty much everywhere In fact that transition has already happened So DD it is Its also clear that streaming services prefer DD as their surround format In fact Netflix uses DD exclusively for surround audio They wont even serve up AC Which means those media files with surround audio that you acquired from your Uncle Torrance you know who I mean are in DD format Why is DD so popular Because you can get as good or even better quality with DD at half the bitrate of AC Did you know that all the streaming services use DD at only Kbps as their default stepping up to Kbps if you have a better connection and sometimes Kbps if you have bandwith for video at Mbps or more Here are the more or less merged surround bitrate guidelines from Apple and Roku for AC and DD Channels AC DD surround Kbps Kbps surround Kbps Nominally with Dolby Atmos Kbps Obviously the other reason for DDs popularity is Dolby Atmos support which is unavailable in AC Anyway DD at Kbps seems to be the sweet spot the best compromise between size and quality And my own testing confirms that It sounds just as good or better than AC at Kbps to me In fact if I retranscode a DD track at Kbps to AC at Kbps Im hard pressed to tell the difference between that and an original AC track at Kbps Which means Im not even worried about any possible dynamic retranscoding by my Plex Media Server Heres how I would describe this proposed change within the builtin help output of transcodevideo ac encoder ac eac set AC audio encoder default eac ac bitrate set AC surround audio bitrate default for ac default for eac So to get the current behavior only ac encoder ac would be required on the command line Thus making the transition easier Please try to create some audio yourself with DD at Kbps and see how it sounds I tested on multiple stereo and surround systems as well as highquality stereo headphones using passthrough and even dynamic retranscoding by Plex or explicit retranscoding at the command line I would love to hear from samhutchins JMoVS khaosx klogg rhapsodians damorrison vr hub dkoenig ericcardenas arikalish RodBrown chrispoole elliotclowes and anyone else from our various audio threads over the years or elsewhere about this proposal Thanks Need help evaluating one weird trick to improve AVBR ratecontrol I need help evaluating an enhancement to my average variable bitrate AVBR ratecontrol system ie the new avbr option Considering how much some of you really like AVBR and think its on par with or even better than my special or default ratecontrol system why does it even need enhancement Well there is one situation where I think AVBR can sometimes choose too low of a bitrate to render a portion of video This is after a prolonged spike in bitrate due to exceptionally noisy content To be fair to AVBR this problem is not even perceptible most of the time to most users You really have to be looking up close to see it For me my I need to be less than two feet away from my Retina K iMac And its not really an issue at all when Im watching my inch HDTV from across the room But Im a perfectionist A good way to demonstrate the problem is by transcoding an episode of Game of Thrones or any other TV show prefaced with that annoying animated HBO static logo While AVBR will render the logo sequence perfectly the scene immediately following it can seem less than perfect Mind you it wont exhibit blockiness color banding or artifacts but it might not look quite as sharp as the rest of the video And this lack of sharpness only lasts for a few seconds before everything is back to normal For a Game of Thrones episode this isnt much of an issue because usually the logo is followed my the main title sequence and any reduction in bitrate is not apparent But for those episodes with a cold open this might be more noticeable For example the first episodes of seasons and Winter Is Coming and Dragonstone You can also see this problem in the scene immediately following the digital dream sequence from chapter of Prometheus that samhutchins loves to test Again that noisy dream sequence is rendered perfectly But afterwards things are not as sharp for a few seconds There might be other instances of this issue but I havent been able to find any after transcoding over videos using AVBR So why does this happen at all AVBR is a variable bitrate system Thats what the V in the abbreviation indicates But its also an average bitrate system And while variability allows it to render those extremely noisy scenes well sticking to the average can cause the bitrate in quiet scenes following that extreme noise to dip below desired levels To be clear the magic sauce that I already added to AVBR disabling Macroblocktree ratecontrol significantly reduces wild swings in bitrates But it might not always be enough as these examples Ive described demonstrate Fortunately Ive discovered one weird trick which can fix this problem However I cant just include this new trick in AVBR by default Because theres one video Ive found where applying it looks much worse And there are probably others Heres how you can apply the one weird trick yourself transcodevideo avbr encoderoption qcomp pathtoMoviemkv So what the Sheol is that encoderoption qcomp voodoo Simple Its just manipulating the quantizer curve compression factor Let me explain Ordinarily the qcomp setting within the x encoder doesnt have much affect on output because Macroblocktree ratecontrol is used instead of qcomp for weighting frame quality based on complexity But because Ive already disabled the MBtree in AVBR qcomp has a big impact The default value of qcomp is or percent and its valid value range is between and or percent Setting qcomp to effectively means that x shouldnt evaluate complexity to assess frame quality This further reduces bitrate variability And for those Game of Thrones episodes everything looks great with qcomp Both the noisy HBO logo and any video immediately after or even later Its all good And that dark scene in Prometheus after the noisy dream sequence looks perfect with qcomp However the dream sequence itself is doesnt looks quite as good You cant have everything What about that one video that looks much worse Apply qcomp to the movie Lock Stock and Two Smoking Barrels and Jiminy It really looks awful And while qcomp a setting of percent still looks OK with Lock Stock and Two Smoking Barrels its not enough of an improvement with the other cases to be worth including as a default in AVBR So why am I telling you all this Mostly so you can know about the trick yourselves if you want to use it But also I would like advice on whether I should wrap the encoderoption qcomp voodoo in some clever and much shorter option name for others to use Or should I just document this stuff in the README file or our eventually arriving Wiki I would love to hear from samhutchins elliotclowes khaosx and anyone else who commented on the original AVBR issue as well as our usual gang of commenters like JMoVS klogg vr hub damorrison rhapsodians and anyone else who has an opinion Thanks in advance Long ago in a galaxy far far away It was a few days and it was here but that doesnt have the same je ne sais quoi you showed me a sample handbuilt log and remux command I have some questions about the remux command Im asking because I dont know the ins and outs of any of the thirdparty players VLC Plex Kodi mpv etc because Ive always used iTunes heretodate Im just trying to determine what is personal preference vs what is neededsuggestedworks better with various players File MARVELS AVENGERS INFINITY WAR BLURAYt mkv container Matroska Track ID video MPEG p AVCh Track ID audio FLAC English DTSHD MA lossless conversion Track ID audio DTS English DTS core of DTSHD MA Track ID audio AC English AD Track ID audio AC Track ID audio AC Track ID audio AC Track ID audio AC English Commentary Track ID subtitles HDMV PGS English SDH Track ID subtitles HDMV PGS Track ID subtitles HDMV PGS Track ID subtitles HDMV PGS Track ID subtitles HDMV PGS English Commentary SDH Track ID subtitles HDMV PGS French Commentary Track ID subtitles HDMV PGS Spanish Commentary Track ID subtitles HDMV PGS Portuguese Commentary Track ID subtitles HDMV PGS English Forced Track ID subtitles HDMV PGS French Forced Track ID subtitles HDMV PGS Spanish Forced Track ID subtitles HDMV PGS Portuguese Forced Chapters entries mkvmerge output Avengers Infinity War mkv trackorder and so on compression none title defaulttrack defaulttrack forcedtrack trackname AD trackname Commentary subtitletracks trackname Forced trackname SDH trackname Commentary SDH trackname Commentary trackname Commentary trackname Commentary trackname Forced trackname Forced trackname Forced nochapters MARVELS AVENGERS INFINITY WAR BLURAYt mkv chapters MARVELS AVENGERS INFINITY WAR BLURAYt mkvchaptersxml Why no title Was there a reason you didnt specify the language as part of trackname on the tracks both audio and video where it was nonEnglish You dont use the chapters in the original MKV and specify it externally here Was there a reason you didnt specify them in MakeMKV when building the gen mkv And Im curious why youre specifying them at all since you told me in the next message that messing with chapter names led to madness and not the good kind You move the forced lang track to the front of the subtitle track line in addition to specifying it as a default track and a forced track Does moving it matter when you do the other two or do some players need it to be physically first as well Thanks for the education Im dumping some of the space my high school calculus takes up in my brain to make room for all this So far the calculus was easier I think I know the answer to this but just making sure For movies that vary their perspective eg Dark Knight I assume we shouldnt crop at all when transcoding Correct I did a few searches here and couldnt find anything I did find a reference to Dark Knight and Grand Budhapest Hotel in an old issue where noconstraincrop was made the default but it didnt reference specifically what to do with them