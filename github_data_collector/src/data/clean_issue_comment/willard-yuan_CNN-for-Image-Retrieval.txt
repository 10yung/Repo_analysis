Hi I think there is mistake in computing average precision as api sumprecisionqueryClassNum According to the formula the denominator should be the nonzero items in precision vector rather than the number of retrieval categories right 