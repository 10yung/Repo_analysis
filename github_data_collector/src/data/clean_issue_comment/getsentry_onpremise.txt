With we added the parallel flag which only got introduced in dockercompose source as Docker docs themselves dont really mention these so bumping the minimum required version Fixes A number of images fail to download when running the install script using a fresh clone of this repo as of dffd on Jan snubacleanuponpremiselocallatest sentryonpremiselocallatest symbolicatorcleanuponpremiselocallatest All of these fail with Client Error Not Found pull access denied for XXXXXXXXXXXX repository does not exist or may require docker login I did see some mention of a similar problem in but the solutions listed there did not fix this iteration of the issue Also I am not doing an upgrade this is a fresh installation Also also I am using dffd which includes the fix for that issue Here is my log Checking minimum requirements Removing network onpremisedefault Network onpremisedefault not found Removing network sentryonpremisedefault Network sentryonpremisedefault not found Creating volumes for persistent storage Created sentrydata Created sentrypostgres Created sentryredis Created sentryzookeeper Created sentrykafka Created sentryclickhouse Created sentrysymbolicator Creating sentrysentryconfpy sentryconfigyml already exists skipped creation Creating sentryrequirementstxt Generating secret key Secret key written to sentryconfigyml Building and tagging Docker images Pulling redis redis alpine alpine Pulling from libraryredis Digest sha a e b bff ecec dc be d d c a a d a bafbc cf b Status Downloaded newer image for redis alpine Pulling postgres postgres Pulling from librarypostgres Digest sha b f e a ec ce c c dffa c eb a cb c b bdf a Status Downloaded newer image for postgres Pulling smtp tianonexim latest latest Pulling from tianonexim Digest sha b ddb af f fc ae ee d bb ae e d fcc Status Downloaded newer image for tianonexim latest Pulling zookeeper confluentinccpzookeeper Pulling from confluentinccpzookeeper Digest sha c c b e bf e bc d ae f c a fbdcdd c fe Status Downloaded newer image for confluentinccpzookeeper Pulling kafka confluentinccpkafka Pulling from confluentinccpkafka Digest sha c ff b e dea f d d a a d f e ba a f ba Status Downloaded newer image for confluentinccpkafka Pulling memcached memcached alpine alpine Pulling from librarymemcached Digest sha cfb eee b a f cc fa ede efa d bb f e ce Status Downloaded newer image for memcached alpine Pulling symbolicator getsentrysymbolicatorlatest latest Pulling from getsentrysymbolicator Digest sha a e cd a c d c e df ee bf c e c b f fa e Status Downloaded newer image for getsentrysymbolicatorlatest Pulling clickhouse yandexclickhouseserver Pulling from yandexclickhouseserver Digest sha a b bc ee ba b e dedcff f d cb ea fddb ec d Status Downloaded newer image for yandexclickhouseserver Pulling snubaapi getsentrysnubalatest latest Pulling from getsentrysnuba Digest sha ab e be bc e cfb d e d af f e f f f c Status Downloaded newer image for getsentrysnubalatest Pulling snubareplacer getsentrysnubalatest latest Pulling from getsentrysnuba Digest sha ab e be bc e cfb d e d af f e f f f c Status Image is up to date for getsentrysnubalatest Pulling snubacleanup snubacleanuponpremiselocallatest Client Error Not Found pull access denied for snubacleanuponpremiselocal repository does not exist or may require docker login Pulling snubaconsumer getsentrysnubalatest latest Pulling from getsentrysnuba Digest sha ab e be bc e cfb d e d af f e f f f c Status Image is up to date for getsentrysnubalatest Pulling postprocessforwarder sentryonpremiselocallatest Client Error Not Found pull access denied for sentryonpremiselocal repository does not exist or may require docker login Pulling worker sentryonpremiselocallatest Client Error Not Found pull access denied for sentryonpremiselocal repository does not exist or may require docker login Pulling cron sentryonpremiselocallatest Client Error Not Found pull access denied for sentryonpremiselocal repository does not exist or may require docker login Pulling sentrycleanup sentrycleanuponpremiselocallatest Client Error Not Found pull access denied for sentrycleanuponpremiselocal repository does not exist or may require docker login Pulling web sentryonpremiselocallatest Client Error Not Found pull access denied for sentryonpremiselocal repository does not exist or may require docker login Pulling symbolicatorcleanup symbolicatorcleanuponpremiselocallatest Client Error Not Found pull access denied for symbolicatorcleanuponpremiselocal repository does not exist or may require docker login latest Pulling from getsentrysentry d f fa Pulling fs layer fd f df Pulling fs layer c f b Pulling fs layer b cfb b a Pulling fs layer ad c d Pulling fs layer d f Pulling fs layer e c f Pulling fs layer ce ec cec Pulling fs layer a f f f eaa Pulling fs layer cad a d Pulling fs layer c cc c Pulling fs layer b cfb b a Waiting ad c d Waiting d f Waiting e c f Waiting ce ec cec Waiting a f f f eaa Waiting cad a d Waiting c cc c Waiting fd f df Verifying Checksum fd f df Download complete c f b Verifying Checksum c f b Download complete d f fa Verifying Checksum d f fa Download complete ad c d Verifying Checksum ad c d Download complete d f Verifying Checksum d f Download complete b cfb b a Verifying Checksum b cfb b a Download complete a f f f eaa Verifying Checksum a f f f eaa Download complete e c f Verifying Checksum e c f Download complete cad a d Verifying Checksum cad a d Download complete c cc c Verifying Checksum c cc c Download complete d f fa Pull complete fd f df Pull complete c f b Pull complete b cfb b a Pull complete ad c d Pull complete d f Pull complete e c f Pull complete ce ec cec Verifying Checksum ce ec cec Download complete ce ec cec Pull complete a f f f eaa Pull complete cad a d Pull complete c cc c Pull complete Digest sha f c df c f fdab b b c ca ecbc b ade eeacaf Status Downloaded newer image for getsentrysentrylatest Building web Step ARG SENTRYIMAGE Step FROM SENTRYIMAGEgetsentrysentrylatest bef bd Step WORKDIR usrsrcsentry Removing intermediate container a fa b af ba e Step ENV PYTHONPATH usrsrcsentry Running in b b Removing intermediate container b b e cdd Step COPY usrsrcsentry b c Step RUN if s requirementstxt then pip install r requirementstxt fi Running in e ef DEPRECATION Python will reach the end of its life on January st Please upgrade your Python as Python wont be maintained after that date A future version of pip will drop support for Python More details about Python support in pip can be found at Removing intermediate container e ef f dc Step RUN if s setuppy then pip install e fi Running in a ebaa ddb Removing intermediate container a ebaa ddb bf a f f f Step RUN if s sentryconfpy then cp sentryconfpy SENTRYCONF fi if s configyml then cp configyml SENTRYCONF fi Running in cb Removing intermediate container cb f e b ce Successfully built f e b ce Successfully tagged sentryonpremiselocallatest Build or rebuild services Services are built once and then tagged as projectservice eg composetestdb If you change a services Dockerfile or the contents of its build directory you can run dockercompose build to rebuild it Usage build options buildarg keyval SERVICE Options forcerm Always remove intermediate containers nocache Do not use cache when building the image pull Always attempt to pull a newer version of the image m memory MEM Sets memory limit for the build container buildarg keyval Set buildtime variables for one service Cleaning up Important Details How are you running Sentry x OnPremise docker Version Saas sentryio Other briefly describe your environment Description Plugins like sentryauthoidc dont seem to work anymore with sentry Is it still possible to install rd party plugins Steps to Reproduce Install sentry Add sentry auth oidc Notice when trying to login Good items to include here include sh Intel Mac OS X AppleWebKit KHTML like Gecko Chrome Safari web Traceback most recent call last web File usrlocallibpython sitepackagesdjangocorehandlersexceptionpy line in inner web response getresponserequest web File usrlocallibpython sitepackagesdjangocorehandlersbasepy line in legacygetresponse web response selfgetresponserequest web File usrlocallibpython sitepackagesdjangocorehandlersbasepy line in getresponse web response selfprocessexceptionbymiddlewaree request web File usrlocallibpython sitepackagesdjangocorehandlersbasepy line in getresponse web response wrappedcallbackrequest callbackargs callbackkwargs web File usrlocallibpython sitepackagesdjangoviewsgenericbasepy line in view web return selfdispatchrequest args kwargs web File usrlocallibpython sitepackagesdjangoviewsdecoratorscsrfpy line in wrappedview web return viewfuncargs kwargs web File usrlocallibpython sitepackagessentrywebfrontendbasepy line in dispatch web return selfhandlerequest args kwargs web File usrlocallibpython sitepackagesdjangoviewsdecoratorscachepy line in wrappedviewfunc web response viewfuncrequest args kwargs web File usrlocallibpython sitepackagesdjangoutilsdecoratorspy line in inner web return funcargs kwargs web File usrlocallibpython sitepackagessentrywebfrontendauthorganizationloginpy line in handle web response selfhandlessorequest organization authprovider web File usrlocallibpython sitepackagessentrywebfrontendauthorganizationloginpy line in handlesso web provider authprovidergetprovider web File usrlocallibpython sitepackagessentrymodelsauthproviderpy line in getprovider web return managergetselfprovider selfconfig web File usrlocallibpython sitepackagessentryauthmanagerpy line in get web raise ProviderNotRegisteredkey web ProviderNotRegistered oidc web ERROR djangorequest Internal Server Error authloginorg statuscode requestWSGIRequest GET uauthloginorg web Jan GET authloginorg HTTP Mozilla Macintosh Intel Mac OS X AppleWebKit KHTML like Gecko Chrome Safari What you expected to happen Login should work Possible Solution Describe how to create plugins for sentry I had problem with this migration before it was fixed yesterday but there is a new one now Log python Applying sentry auto usrlocallibpython sitepackagesdjangodbmodelsfieldsinitpy RuntimeWarning DateTimeField Eventdatetime received a naive datetime while time zone support is active RuntimeWarning usrlocallibpython sitepackagesdjangodbmodelsfieldsinitpy RuntimeWarning DateTimeField Eventdatetime received a naive datetime while time zone support is active RuntimeWarning Events to process Traceback most recent call last File usrlocalbinsentry line in module sysexitmain File usrlocallibpython sitepackagessentryrunnerinitpy line in main cliprognamegetprog obj maxcontentwidth File usrlocallibpython sitepackagesclickcorepy line in call return selfmainargs kwargs File usrlocallibpython sitepackagesclickcorepy line in main rv selfinvokectx File usrlocallibpython sitepackagesclickcorepy line in invoke return processresultsubctxcommandinvokesubctx File usrlocallibpython sitepackagesclickcorepy line in invoke return ctxinvokeselfcallback ctxparams File usrlocallibpython sitepackagesclickcorepy line in invoke return callbackargs kwargs File usrlocallibpython sitepackagesclickdecoratorspy line in newfunc return fgetcurrentcontext args kwargs File usrlocallibpython sitepackagessentryrunnerdecoratorspy line in inner return ctxinvokef args kwargs File usrlocallibpython sitepackagesclickcorepy line in invoke return callbackargs kwargs File usrlocallibpython sitepackagesclickdecoratorspy line in newfunc return fgetcurrentcontext args kwargs File usrlocallibpython sitepackagessentryrunnercommandsupgradepy line in upgrade upgradenot noinput traceback verbosity not norepair File usrlocallibpython sitepackagessentryrunnercommandsupgradepy line in upgrade ignoreghostmigrationsTrue File usrlocallibpython sitepackagesdjangocoremanagementinitpy line in callcommand return commandexecuteargs defaults File usrlocallibpython sitepackagesdjangocoremanagementbasepy line in execute output selfhandleargs options File usrlocallibpython sitepackagesdjangocoremanagementcommandsmigratepy line in handle fakeinitialfakeinitial File usrlocallibpython sitepackagesdjangodbmigrationsexecutorpy line in migrate state selfmigrateallforwardsstate plan fullplan fakefake fakeinitialfakeinitial File usrlocallibpython sitepackagesdjangodbmigrationsexecutorpy line in migrateallforwards state selfapplymigrationstate migration fakefake fakeinitialfakeinitial File usrlocallibpython sitepackagessentrynewmigrationsmonkeyexecutorpy line in applymigration state migration fakefake fakeinitialfakeinitial File usrlocallibpython sitepackagesdjangodbmigrationsexecutorpy line in applymigration state migrationapplystate schemaeditor File usrlocallibpython sitepackagesdjangodbmigrationsmigrationpy line in apply operationdatabaseforwardsselfapplabel schemaeditor oldstate projectstate File usrlocallibpython sitepackagesdjangodbmigrationsoperationsspecialpy line in databaseforwards selfcodefromstateapps schemaeditor File usrlocallibpython sitepackagessentrymigrations auto py line in backfilleventstream if eventproject is None or eventgroup is None File usrlocallibpython sitepackagessentrymodelseventpy line in group selfgroupcache Groupobjectsgetidselfgroupid File usrlocallibpython sitepackagesdjangodbmodelsmanagerpy line in managermethod return getattrselfgetqueryset nameargs kwargs File usrlocallibpython sitepackagesdjangodbmodelsquerypy line in get selfmodelmetaobjectname num sentrymodelsgroupMultipleObjectsReturned get returned more than one Group it returned and WARNING sentryeventstreamkafkabackend Could not publish message error KafkaErrorcodeMSGSIZETOOLARGEval strBroker Message size too large cimplMessage object at x fb e repeated times After fix I was able to skip this migration with SENTRYSKIPEVENTSBACKFILLFOR but I would want to keep my events Side note placing SENTRYSKIPEVENTSBACKFILLFOR into env did not work I had to put it into dockercompose file is is a bug We need the GITHUBAPPID and GITHUBAPISECRET configs in sentryconfpy for GitHub auth whereas we need the githubapp values in configyml for the GitHub integration The ones in sentryconfpy are redundant but since configyml is loaded after sentryconfpy I added this get hack so the users only need to set the values in one place Code master branch downloaded today Running dockercompose down installsh Fails with fixing permissions on existing directory varlibpostgresql data ok creating subdirectories ok selecting default maxconnections selecting default sharedbuffers MB selecting default timezone EtcUTC selecting dynamic shared memory implementation posix creating configuration files ok running bootstrap script ok performing postbootstrap initialization ok syncing data to disk ok Success You can now start the database server using pgctl D varlibpostgresql data l logfile start WARNING enabling trust authentication for local connections You can change this by editing pghbaconf or using the option A or authlocal and authhost the next time you run initdb failure Consult the last few lines of pgupgradeserverlog for the probable cause of the failure There seems to be a postmaster servicing the old cluster Please shutdown that postmaster and try again Failure exiting Cleaning up Not sure how to proceed Add support for an environment variable such as DOCKERIMAGEREPOSITORY that adds the repository as a prefix to all images if set This would allow running the install script behind a firewall that does have access to a private repository which proxies the request to the Docker Hub without having to manually edit multiple files it looks like the example deployment promotes building a docker image containing a config file with potential secret passwords in it This is considered an antipattern and should be avoided It would be better if it was possible to specify all settings using environment variables or Dockers recommended runsecrets fs dir so that secrets are kept outside the docker image I was looking a way to connect RABBITMQ and I found this PR thanks to Google Is not however included in sentry docker docs Who is able to merge changes in Should I prepare a PR to this repo PS There is exisitng getsentrydockersentry which is I guess connected