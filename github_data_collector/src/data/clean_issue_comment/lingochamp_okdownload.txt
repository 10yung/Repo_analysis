 OkDownload Version v Problem Describe taskEnd filedownload okdownload Log There is the whole log from LogCat when I occur the problemI know we can use this tool okcatwikiurl to let log more readable V querySoundEffectsEnabled D Get final download store is comliulishuookdownloadcorebreakpointRemitStoreOnSQLited f D downloadStore comliulishuookdownloadcorebreakpointBreakpointStoreOnSQLiteb ac connectionFactory comliulishuookdownloadcoreconnectionDownloadUrlConnectionFactory f e D enqueueLocked for single task comliulishuookdownloadDownloadTask c d f D taskStart I main comxiaobu xiaobuxiaobuandroidpadlibdownloadFileDownloadManager taskStartFileDownloadManagerjava taskStart D config connection for D Using Network Security Config from resource libcommonnetworksecurityconfig debugBuild true D start trial task Range bytes D task redirect location null D finish trial task code null HTTP Partial Content AcceptRanges bytes AccessControlAllowOrigin AccessControlExposeHeaders XLog XReqid AccessControlMaxAge Age AliSwiftGlobalSavetime CacheControl public maxage Connection keepalive ContentDisposition inline filenameCM androidV A apk filenameutf CM androidV A apk ContentLength ContentRange bytes ContentTransferEncoding binary ContentType applicationzip Date Sun Jan GMT EagleId bdd e Etag lrUE iga KKfhvaMa iKkrTzaId LastModified Tue Sep GMT Server Tengine TimingAllowOrigin Via cache l cn H cache l cn vcache cn H vcache cn XAndroidReceivedMillis XAndroidResponseSource NETWORK XAndroidSelectedProtocol http XAndroidSentMillis XCache HIT TCPMEMHIT dirn XLog XLog XMLog QNMzz QNM XMReqid JREAAKxk zZ JkV XQiniuZone XQnmCache Hit XReqid k AAAACoBXrcmdsV XSvr IO XSwiftCacheTime XSwiftSaveTime Sun Jan GMT D is file conflict after run D breakpoint invalid download from beginning because of local check is dirty fileExist false infoRight false outputStreamSupport true comliulishuookdownloadcoredownloadBreakpointLocalCheck f ae D downloadFromBeginning I main comxiaobu xiaobuxiaobuandroidpadlibdownloadFileDownloadManager infoReadyFileDownloadManagerjava infoReady D create connection on url D create connection on url D create connection on url D config connection for D config connection for D config connection for D AssembleHeaderRange block downloadFrom currentOffset D AssembleHeaderRange block downloadFrom currentOffset D AssembleHeaderRange block downloadFrom currentOffset D start connection task block IfMatch lrUE iga KKfhvaMa iKkrTzaId Range bytes UserAgent OkDownload D start connection task block IfMatch lrUE iga KKfhvaMa iKkrTzaId Range bytes UserAgent OkDownload D start connection task block IfMatch lrUE iga KKfhvaMa iKkrTzaId Range bytes UserAgent OkDownload I main comxiaobu xiaobuxiaobuandroidpadlibdownloadFileDownloadManager connectStartFileDownloadManagerjava connectStart I uid comxiaobu xiaobuxiaobuandroidpad identical line I main comxiaobu xiaobuxiaobuandroidpadlibdownloadFileDownloadManager connectStartFileDownloadManagerjava connectStart D finish connection task block code null HTTP Partial Content AcceptRanges bytes AccessControlAllowOrigin AccessControlExposeHeaders XLog XReqid AccessControlMaxAge Age AliSwiftGlobalSavetime CacheControl public maxage Connection keepalive ContentDisposition inline filenameCM androidV A apk filenameutf CM androidV A apk ContentLength ContentRange bytes ContentTransferEncoding binary ContentType applicationzip Date Sun Jan GMT EagleId bdd e Etag lrUE iga KKfhvaMa iKkrTzaId LastModified Tue Sep GMT Server Tengine TimingAllowOrigin Via cache l cn H cache l cn vcache cn H vcache cn XAndroidReceivedMillis XAndroidResponseSource NETWORK XAndroidSelectedProtocol http XAndroidSentMillis XCache HIT TCPMEMHIT dirn XLog XLog XMLog QNMzz QNM XMReqid JREAAKxk zZ JkV XQiniuZone XQnmCache Hit XReqid k AAAACoBXrcmdsV XSvr IO XSwiftCacheTime XSwiftSaveTime Sun Jan GMT D fetchStart W type audit avc granted write for pid comm F B F E C F C F namecache devsdcardfs ino scontexturuntrustedapps c c c c tcontextuobjectrsdcardfss tclassdir D Create new file download I main comxiaobu xiaobuxiaobuandroidpadlibdownloadFileDownloadManager connectEndFileDownloadManagerjava connectEnd W type audit avc granted addname for pid comm F B F E C F C F namedownload scontexturuntrustedapps c c c c tcontextuobjectrsdcardfss tclassdir W type audit avc granted create for pid comm F B F E C F C F namedownload scontexturuntrustedapps c c c c tcontextuobjectrsdcardfss c c c c tclassfile W type audit avc granted read write open for pid comm F B F E C F C F pathstorageemulated Androiddatacomxiaobu xiaobuxiaobuandroidpadcachedownload devsdcardfs ino scontexturuntrustedapps c c c c tcontextuobjectrsdcardfss tclassfile W type audit avc granted read write for pid comm F B F E C F C F namedownload devsdcardfs ino scontexturuntrustedapps c c c c tcontextuobjectrsdcardfss tclassfile W type audit avc granted read write open for pid comm F B F E C F C F pathstorageemulated Androiddatacomxiaobu xiaobuxiaobuandroidpadcachedownload devsdcardfs ino scontexturuntrustedapps c c c c tcontextuobjectrsdcardfss tclassfile W type audit avc granted getattr for pid comm F B F E C F C F name devsdcardfs ino scontexturuntrustedapps c c c c tcontextuobjectrsdcardfss tclassfilesystem W fallocate not supported falling back to ftruncate W type audit avc granted write for pid comm F B F E C F C F namedownload devsdcardfs ino scontexturuntrustedapps c c c c tcontextuobjectrsdcardfss tclassfile D OutputStream start flush looper task with syncBufferIntervalMills syncBufferSize D OutputStream sync success block syncLength currentOffset D finish connection task block code null HTTP Partial Content AcceptRanges bytes AccessControlAllowOrigin AccessControlExposeHeaders XLog XReqid AccessControlMaxAge Age AliSwiftGlobalSavetime CacheControl public maxage Connection keepalive ContentDisposition inline filenameCM androidV A apk filenameutf CM androidV A apk ContentLength ContentRange bytes ContentTransferEncoding binary ContentType applicationzip Date Sun Jan GMT EagleId bdd e Etag lrUE iga KKfhvaMa iKkrTzaId LastModified Tue Sep GMT Server Tengine TimingAllowOrigin Via cache l cn H cache l cn vcache cn H vcache cn XAndroidReceivedMillis XAndroidResponseSource NETWORK XAndroidSelectedProtocol http XAndroidSentMillis XCache HIT TCPMEMHIT dirn XLog XLog XMLog QNMzz QNM XMReqid JREAAKxk zZ JkV XQiniuZone XQnmCache Hit XReqid k AAAACoBXrcmdsV XSvr IO XSwiftCacheTime XSwiftSaveTime Sun Jan GMT D fetchStart D Create output stream write from block I main comxiaobu xiaobuxiaobuandroidpadlibdownloadFileDownloadManager connectEndFileDownloadManagerjava connectEnd D finish connection task block code null HTTP Partial Content AcceptRanges bytes AccessControlAllowOrigin AccessControlExposeHeaders XLog XReqid AccessControlMaxAge Age AliSwiftGlobalSavetime CacheControl public maxage Connection keepalive ContentDisposition inline filenameCM androidV A apk filenameutf CM androidV A apk ContentLength ContentRange bytes ContentTransferEncoding binary ContentType applicationzip Date Sun Jan GMT EagleId bdd e Etag lrUE iga KKfhvaMa iKkrTzaId LastModified Tue Sep GMT Server Tengine TimingAllowOrigin Via cache l cn H cache l cn vcache cn H vcache cn XAndroidReceivedMillis XAndroidResponseSource NETWORK XAndroidSelectedProtocol http XAndroidSentMillis XCache HIT TCPMEMHIT dirn XLog XLog XMLog QNMzz QNM XMReqid JREAAKxk zZ JkV XQiniuZone XQnmCache Hit XReqid k AAAACoBXrcmdsV XSvr IO XSwiftCacheTime XSwiftSaveTime Sun Jan GMT D fetchStart D Create output stream write from block I main comxiaobu xiaobuxiaobuandroidpadlibdownloadFileDownloadManager connectEndFileDownloadManagerjava connectEnd D sync info with id D task current need fetching block count is not equal to no more stream block count D OutputStream sync success block syncLength currentOffset D OutputStream sync success block syncLength currentOffset D OutputStream sync success block syncLength currentOffset D task current need fetching block count is not equal to no more stream block count D task current need fetching block count is not equal to no more stream block count D runSync state change isNoMoreStream false newNoMoreStreamBlockList D OutputStream sync success block syncLength currentOffset D OutputStream sync success block syncLength currentOffset D OutputStream sync success block syncLength currentOffset D OutputStream close task block D fetchEnd I main comxiaobu xiaobuxiaobuandroidpadlibdownloadFileDownloadManager blockEndFileDownloadManagerjava blockEnd D release connection comliulishuookdownloadcoreconnectionDownloadUrlConnection ca task block D task current need fetching block count is not equal to no more stream block count D task current need fetching block count is not equal to no more stream block count D runSync state change isNoMoreStream false newNoMoreStreamBlockList D OutputStream done but no need to ensure sync because the syncFutureisDone true task block D OutputStream close task block D catch unknown error javaioIOException The current offset on blockinfo isnt update correct on D release connection comliulishuookdownloadcoreconnectionDownloadUrlConnection b e task block D resetRtgSchedHandle failed enable issuesurl wikiurl okcatwikiurl OkDownload Version v SNAPSHOT Problem Describe I occur some problem I also search on issues issuesurl and wiki wikiurl I even checked the source code but it cant help so my real problem is Log There is the whole log from LogCat when I occur the problemI know we can use this tool okcatwikiurl to let log more readable issuesurl wikiurl okcatwikiurl OkDownload Version v Problem Describe Log issuesurl wikiurl okcatwikiurl QueueController TagUtilsaveTaskNameboundTask WeChat v Problem Describe E AndroidRuntime javalangc Attempt to invoke virtual method int javalangStringlength on a null object reference E AndroidRuntime at comliulishuookdownloadcoredownloadDownloadCallexecuteDownloadCalljava E AndroidRuntime at comliulishuookdownloadcoreNamedRunnablerunNamedRunnablejava DownloadTask url final url final position recycleview itme OkDownload Version v Problem Describe I occur some problem I also search on issues issuesurl and wiki wikiurl I even checked the source code but it cant help so my real problem is totalLength Cotentlength DownloadListener How can I manage that use OkHttp v for Android and OkHttp v for Android OkDownload Version v SNAPSHOT Problem Describe I am attempting to show the current progress of a file download in an adapter instance The adapter music items are pull from the network but somehow I need to check whether it was a previously downloaded in which case show play icon or pending download in which case display the progress I use java inner class ViewHolderitemView View RecyclerViewViewHolderitemView fun bindmusic Music itemViewbtndownloadsetOnClickListener listenerdownloadmusic val fileRemoteUrl PreferencesUtilsloadIpAddressKOKONetAppINSTANCEapplicationContext downloadmediaUrimusicuri val filePath EnvironmentgetExternalStorageDirectorytoString Fileseparator InfinetMedia musicrelativePath val info StatusUtilgetCurrentInfofileRemoteUrl filePath musicdisplayName if info null itemViewbtndownloadvisibility ViewGONE itemViewpbdownloadvisibility ViewVISIBLE itemViewpbdownloadprogress infototalOffset infototalLengthtoInt else itemViewbtndownloadvisibility ViewVISIBLE itemViewpbdownloadvisibility ViewGONE However info is always null for pending or downloaded items How can I be able to get the information I want so I can correctly report the state of a music item This way users know that they had already downloaded and item rantianhua 