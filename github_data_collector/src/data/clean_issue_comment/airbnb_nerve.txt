json gem version is not compatible with more recent versions of ruby such as the default on Ubuntu I had some problems running nerve due to a missing GEMPATH Im not a Ruby guy I resolved it after finding the instructions on how to run Synapse This change adds similar running instructions borrowed from the Synapse readme Should fix I think that we might need to somehow touch zk in zkdelete for this to really work but WIP Setup nerve service watchers on the same instance connected to the same ZK pool How to reproduce The instance has a problem connecting to ZK Nerve NerveNerve nerve watcher service not alive reaping and relaunching NerveServiceWatcher nerve stopping service watch service NerveNerve nerve could not reap service got ZookeeperExceptionsNotConnected ZookeeperExceptionsNotConnected This continues in a loop for each service watcher until nerve is restarted Actual problem The problem is that in start in zookeeperrb there are no checks to see if the ZK connection is alive before reusing in Catching only StandardError is not enough Hi It would be nice if nerve would support serf as a reporter out of the box Ive been using a fork by and this has worked well for us so far The original commit is here Your contributing guidelines say to open a PR onto the pullrequests branch though that one seems very much outofdate so Im opening the PR to master Let me know if I should reopen the PR to another branch also related to If you accept this I can also open a PR to synapse for serf support Thanks The mysql service connectivity check is similar to haproxy option mysqlcheck and is used for local mysql service check A simple mysqlcheck uses a user with minimal USAGE privilege and the user may or may not have a password In our company production we use haproxy option mysqlcheck for synapse side service health check however it does not work with a new db proxy service that we build and the nerve tcp port health check on the local server is not sufficient The simple mysql service check borrows the idea of haproxy option mysqlcheck but it uses mysql client and therefore works with the new proxy It had been verified in our production test environment igor Weve run into a few situations where hitless nerve reloads arent so hitless because we have registrations that take seconds zk timeout and then our s sleep isnt enough Perhaps we should make it async I see that you pin Bunny to exactly Not sure why thats necessary but that version is dozens of releases behind There should be no major breaking changes for some apps no breaking changes period and I highly recommend you upgrade Bunny change log is fairly detailed Im happy to answer questions if you have any 