I detected changes in the release branch which have not been merged yet to release Im a robot and am configured to help you automatically keep release up to date so Ive opened this PR This PR merges commits made on release by the following committers vijayrkn mmitche dotnetmaestro bot Instructions for merging from UI This PR will not be automerged When pull request checks pass complete this PR by creating a merge commit not a squash or rebase commit img altmerge button instructions src width If this repo does not allow creating merge commits from the GitHub UI use command line instructions Instructions for merging via command line Run these commands to merge this pull request from the command line sh git fetch git checkout release git pull ffonly git checkout release git pull ffonly git merge noff release If there are merge conflicts resolve them and then run git merge continue to complete the merge Pushing the changes to the PR branch will retrigger PR validation git push HEADmergerelease torelease details summaryor if you are using SSHsummary git push gitgithubcomdotnetmaestrobottemplating HEADmergerelease torelease details After PR checks are complete push the branch git push Instructions for resolving conflicts warning If there are merge conflicts you will need to resolve them manually before merging You can do this using GitHub resolvegithub or using the command line resolvecli resolvegithub resolvecli Instructions for updating this pull request Contributors to this repo have permission update this pull request by pushing to the branch mergerelease torelease This can be done to resolve conflicts or make other changes to this pull request before it is merged git checkout b mergerelease torelease release git pull mergerelease torelease make changes git commit m Updated PR with my changes git push HEADmergerelease torelease details summaryor if you are using SSHsummary git checkout b mergerelease torelease release git pull gitgithubcomdotnetmaestrobottemplating mergerelease torelease make changes git commit m Updated PR with my changes git push gitgithubcomdotnetmaestrobottemplating HEADmergerelease torelease details Contact NET Core Engineering if you have questions or issues Also if this PR was generated incorrectly help us fix it See The file generated after doing dotnet new has a different encoding than what was in the original file for the template Repro Install dotnet sdk Unzip C Program Files dotnet templates microsoftdotnetwebprojecttemplates nupkg and go to WebProjectTemplatescontentBlazorServerWebCsharp Verify the encoding of Apprazor It should be UTF with BOM Now create a new app with dotnet new blazor Open the generated Apprazor and check its encoding Expected UTF with BOM Actual Windows Codepage cc phenning Was just reading through the README and found this error Hi dotnet sdk version Attempting to install dotnet CLI templates from a secured Azure Artifacts NuGet repository does not seem to be working The command correctly outputs that an interactive authentication flow may be required However the dotnet new i command does not actually support the interactive flag Using the same repository csproj dependencies can be restored via the CLI See below for command output dotnet new i TestTemplates nugetsource C Program Files dotnet sdk NuGettargets warning The plugin credential provider could not acquire credentials Authentication may require manual action Consider rerunning the command with interactive for dotnet pNuGetInteractivetrue for MSBuild or removing the NonInteractive switch for NuGet C Users Greg templateengine dotnetcli v scratch restorecsproj C Program Files dotnet sdk NuGettargets error Unable to load the service index for source C Users Greg templateengine dotnetcli v scratch restorecsproj C Program Files dotnet sdk NuGettargets error Response status code does not indicate success Unauthorized C Users Greg templateengine dotnetcli v scratch restorecsproj Im after a way to get the lowercase version of the main template name The below template configuration produces the issue with the below csproj file Maybe Ive got invalid syntax or an something else isnt correct I cant just specify the lowercase name as the n command because I want to support a mixed case for that parameter eg I want the user to specify FooDomain instead of foodomain because of naming conventions To repro you can use the following template config schema author Blank classifications Web WebAPI name Test identity TestCasing shortName casingtest sourceName ApplicationName preferNameDirectory true tags language C primaryOutputs path ApplicationNamecsproj symbols sourceNameLower type generated generator casing parameters sourcesourceName toLower true replaces ApplicationNameLower postActions And a single file in the template content called ApplicationNamecsproj Project SdkMicrosoftNETSdkWeb PropertyGroup TargetFrameworknetcoreapp TargetFramework AuthorsBlankAuthors Version Version AspNetCoreHostingModelInProcessAspNetCoreHostingModel UserSecretsIddd e b b be f b bf UserSecretsId DockerDefaultTargetOSLinuxDockerDefaultTargetOS ArtifactsDirectoryappArtifactsDirectory PropertyGroup ItemGroup PackageReference IncludeMicrosoftAspNetCoreApp PackageReference IncludeMicrosoftVisualStudioAzureContainersToolsTargets Version ItemGroup DeleteArtifacts target This target runs after clean Target NameDeleteArtifacts BeforeTargetsPackage ConditionExistsArtifactsDirectory Message ImportanceHigh TextDeleting artifacts directory ArtifactsDirectory RemoveDir DirectoriesArtifactsDirectory Target Package target This target compiles the project in release mode and builds the docker container Target NamePackage Message ImportanceHigh TextPublishing release artifacts Exec Commanddotnet publish c Release o ArtifactsDirectory Message ImportanceHigh TextBuilding docker container Exec Commanddocker build t ApplicationNameLowerlatest Target Project My expectation is that when a user runs dotnet new casingtest n FooDomain that they get a csproj called FooDomaincsproj with the Exec step in the Package target matching Exec Commanddocker build t foodomainlatest Currently the part that says foodomain is just left blank This conditional fails to execute correctly and you end up with the code below in the final project output c if Foo Bar Some code endif if Foo Some code endif This successfully removes the code if the condition fails c if Foo Bar Some code endif if Foo Some code endif This only seems to be the case with complex conditionals A simple conditional succeeds with or without brackets c if Foo Some code endif if Foo Some code endif The reason Id like this fixed is that its very easy to get this wrong and I also get warnings from C analzers about unnecessary paranthesis I have an editorconfig file with the following conditional in it omitted if StyleCop StyleCop omitted endif omitted In my templatejson file I have then added the following boolean option json StyleCop type parameter datatype bool description Adds and enforces StyleCop analyzers defaultValue true When I create a project using dotnet new and turn off the StyleCop option the editorconfig file failes to remove the code above Is there a bug with files that start with a or have no file extension Dotnet cli supports tab completion it would be really handy to have support for template parameters symbols as well Steps to reproduce dotnet new console and dotnet new Expected behavior Creates a new console app lists help for dotnet new Actual Behavior Bash Getting ready Object reference not set to an instance of an object at MicrosoftTemplateEngineEdgeSettingsSettingsLoaderSaveTemplateCache cacheToSave at MicrosoftTemplateEngineEdgeSettingsSettingsLoaderSave at MicrosoftTemplateEngineCliInstallerInstallPackagesIEnumerable installationRequests IList nuGetSources Boolean debugAllowDevInstall at MicrosoftTemplateEngineCliInstallerInstallPackagesIEnumerable installationRequests at MicrosoftDotNetToolsNewNewCommandShimFirstRunIEngineEnvironmentSettings environmentSettings IInstaller installer at MicrosoftTemplateEngineCliNew CommandConfigureEnvironment at MicrosoftTemplateEngineCliNew CommandInitialize at MicrosoftTemplateEngineCliNew CommandExecuteAsync at MicrosoftTemplateEngineCliCommandParsingNewCommandInputClicDisplayClass OnExecuteb dMoveNext Environment Data bash dotnet info bash NET Core SDK reflecting any globaljson Version Commit cd f f Runtime Environment OS Name opensusetumbleweed OS Version OS Platform Linux RID linuxx Base Path usrsharedotnetsdk Host useful for support Version Commit edee NET Core SDKs installed usrsharedotnetsdk NET Core runtimes installed MicrosoftAspNetCoreApp usrsharedotnetsharedMicrosoftAspNetCoreApp MicrosoftNETCoreApp usrsharedotnetsharedMicrosoftNETCoreApp To install additional NET Core runtimes or SDKs Tried Fixes in Dotnet new fails Object reference not set to an instance of an object ie bash dotnet new debugreinit rm rf templateengine Did not have this problem with dotnet sdk In one of my templates I have a useTests flag that will include test csproj boilerplate I also have a sln file in my template but find it difficult to have to support this with conditionals and documentation does not mention sln as an MSBuild project for conditionals Although I could use ifelse for sln if it is supported I actually foresee a better approach Can there be post steps in templates that run a dotnet command For instance suppose my template does not have a solution but based on all the csproj in the template I could have a post step to create the solution with a given name and then add all csproj files to the solution with the appropriate glob pattern