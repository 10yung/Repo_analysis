Added commands msetex and msetnxex to set expiry for keys while setting their values The commands are very similar to mset and msetnx but with expiry added The expiry values can be passed in seconds or milliseconds A Lua script would have also done the job But I think having these commands builtin will be helpful My team is building a service Each client of the service is reading from its own Redis stream Each stream gets new entries appended after a random delay of sec min We want clients to get the new data as soon as possible and we want to serve about k M clients at the same time Its awesome that XREAD can read from multiple streams this can greatly improve resource utilization less empty reads connections blocked for less time Unfortunately this doesnt quite work in Redis Cluster due to the requirement that all the keys must hash to the same slot With our target numbers Im not sure we can afford not to read multiple streams with single connection We are currently considering the following hack where we would call a lua script passing multiple stream keys that we know are currently on the same node as arguments lua local out for i ARGV do local xs rediscallXRANGE ARGV i ARGV i COUNT ARGV out out ARGV i xs end return out however the script has quite a bit of overhead compared to XREAD I know Redis Cluster multikey issue has been discussed multiple times before eg this would be a bomb youd have code that works today because of an accident of how the slots are distributed between shards but that can break when an admin very legitimately migrates some of the slots to another shard but how about adding an option to disable this check for clients that understand the risk Maybe a new config option enablelocalcrossslot similar to enablecrossslot option in Redis Cluster Proxy project When I used the official docker image redisalpine I found that redissentinel redischeckaof and redischeckrdb were actually soft links to redisserver But the command still runs Im curious how does it work internally On v RC when calling the COMMAND command for example shell rediscli csv command Unknown reply type rediscli raw command Unknown reply type hi gays In the redis cluster m s environment when the slave simulation goes down whats the matter with the master relation slave node not released all the time like this At this time slave node has been down config file Cluster clusterenabled yes clusterconfigfile dataredisclusternodes clusternodetimeout clusterrequirefullcoverage no clusterslavevalidityfactor clustermigrationbarrier expect a replythanks REDIS BUG REPORT START Cut paste starting from here C Jan Redis crashed by signal C Jan Crashed running the instuction at x fea C Jan Accessing address x C Jan Failed assertion no assertion failed no file STACK TRACE EIP redisrdbtoslaves dictNext x x fea Backtrace redisrdbtoslaves logStackTrace x x d redisrdbtoslaves sigsegvHandler xc x ded lib libpthreadso xf d x f d redisrdbtoslaves dictNext x x fea redisrdbtoslaves rdbSaveObject xda x ea a redisrdbtoslaves rdbSaveKeyValuePair x x ee redisrdbtoslaves rdbSaveRio x x f redisrdbtoslaves rdbSaveRioWithEOFMark x c x f bc redisrdbtoslaves rdbSaveToSlavesSockets x f x bf redisrdbtoslaves startBgsaveForReplication xef x bfaf redisrdbtoslaves updateSlavesWaitingBgsave xcc x c c redisrdbtoslaves backgroundSaveDoneHandlerSocket xe x f redisrdbtoslaves serverCron x x f redisrdbtoslaves aeProcessEvents x x fc redisrdbtoslaves aeMain x b x fc b redisrdbtoslaves main x x f lib libcso libcstartmain xf x f df d redisrdbtoslaves x c x f c INFO OUTPUT Server redisversion redisgitsha redisgitdirty redisbuildide c b a b redismodestandalone osLinux el x x archbits multiplexingapiepoll gccversion processid runid e de fc ab e e fc a tcpport uptimeinseconds uptimeindays hz lruclock executableusrbinredisserver configfileetcredis conf Clients connectedclients clientlongestoutputlist clientbiggestinputbuf blockedclients Memory usedmemory usedmemoryhuman G usedmemoryrss usedmemoryrsshuman G usedmemorypeak usedmemorypeakhuman G totalsystemmemory totalsystemmemoryhuman G usedmemorylua usedmemoryluahuman K maxmemory maxmemoryhuman B maxmemorypolicynoeviction memfragmentationratio memallocatorjemalloc Persistence loading rdbchangessincelastsave rdbbgsaveinprogress rdblastsavetime rdblastbgsavestatuserr rdblastbgsavetimesec rdbcurrentbgsavetimesec aofenabled aofrewriteinprogress aofrewritescheduled aoflastrewritetimesec aofcurrentrewritetimesec aoflastbgrewritestatuserr aoflastwritestatusok aofcurrentsize aofbasesize aofpendingrewrite aofbufferlength aofrewritebufferlength aofpendingbiofsync aofdelayedfsync Stats totalconnectionsreceived totalcommandsprocessed instantaneousopspersec totalnetinputbytes totalnetoutputbytes instantaneousinputkbps instantaneousoutputkbps rejectedconnections syncfull syncpartialok syncpartialerr expiredkeys evictedkeys keyspacehits keyspacemisses pubsubchannels pubsubpatterns latestforkusec migratecachedsockets Replication rolemaster connectedslaves slave ip port statewaitbgsaveoffset lag masterreploffset replbacklogactive replbacklogsize replbacklogfirstbyteoffset replbackloghistlen CPU usedcpusys usedcpuuser usedcpusyschildren usedcpuuserchildren Commandstats cmdstathsetcalls usec usecpercall cmdstathgetcalls usec usecpercall cmdstathmsetcalls usec usecpercall cmdstathmgetcalls usec usecpercall cmdstatselectcalls usec usecpercall cmdstatdbsizecalls usec usecpercall cmdstatauthcalls usec usecpercall cmdstatpingcalls usec usecpercall cmdstatmulticalls usec usecpercall cmdstatexeccalls usec usecpercall cmdstatpsynccalls usec usecpercall cmdstatreplconfcalls usec usecpercall cmdstatinfocalls usec usecpercall cmdstatrolecalls usec usecpercall cmdstatconfigcalls usec usecpercall cmdstatsubscribecalls usec usecpercall cmdstatpublishcalls usec usecpercall cmdstatclientcalls usec usecpercall cmdstatevalcalls usec usecpercall cmdstatevalshacalls usec usecpercall cmdstatscriptcalls usec usecpercall Cluster clusterenabled Keyspace db keys expires avgttl hashinitvalue CLIENT LIST OUTPUT id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd namesentinele a pubsub age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdsubscribe id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdrole id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdrole id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd namesentinel b pubsub age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdsubscribe id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdconfig id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd namesentinele a cmd age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdping id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd namesentinel ed cecmd age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdping id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdrole id addr fd name age idle flagsS db sub psub multi qbuf qbuffree obl oll omem eventsr cmdpsync id addr fd namesentinel ed cepubsub age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdsubscribe id addr fd namesentinel b cmd age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdping id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdhmget id addr fd name age idle flagsN db sub psub multi qbuf qbuffree obl oll omem eventsr cmdevalsha REGISTERS C Jan RAX e RBX RCX e RDX RDI f d d RSI b c RBP f d d RSP fffb d R f c f c f c R f b R R f R ac R f bc eb c R R f bc e f RIP fea EFL CSGSFS C Jan fffb df fffb a C Jan fffb de f cc C Jan fffb dd ee C Jan fffb dc f b C Jan fffb db fffb C Jan fffb da f bc e f C Jan fffb d fffb a C Jan fffb d f b C Jan fffb d b ac e C Jan fffb d f bc e f C Jan fffb d f bc e f C Jan fffb d f b C Jan fffb d ea a C Jan fffb d ac C Jan fffb d fffb a C Jan fffb d f d d FAST MEMORY TEST Preparing to test memory region c bytes Preparing to test memory region f bytes Preparing to test memory region f ff bytes Preparing to test memory region f bytes Preparing to test memory region f bytes Preparing to test memory region f bytes Preparing to test memory region f a bytes Preparing to test memory region f bd bytes Preparing to test memory region f f bytes Preparing to test memory region f ff bytes Preparing to test memory region f bytes Preparing to test memory region f bytes O M Jan Connection with slave lost M Jan Slave asks for synchronization M Jan Full resync requested by slave M Jan Current BGSAVE has socket target Waiting for next BGSAVE for SYNC OOOOOOOOOOO Fast memory test PASSED however your memory can still be broken Please run a memory test for several hours if possible DUMPING CODE AROUND EIP Symbol dictNext base x fe b Module redisrdbtoslaves base x d xxd r p tmpdumphex tmpdumpbin objdump adjustvma x fe b D b binary m i x tmpdumpbin C Jan dump of function hexdump of bytes fd b f db d b f db f b b d c c e c d b f ff c b d c e b b c db d bf b d b d cc c b c ff ec b c e c c c c ebb f f d b d eb e afeffff b e ffffff f f e f f fb ec f ff REDIS BUG REPORT END Make sure to include from START to END Example acl list user default on nopass all acl setuser test on nopass all slow OK acl list user default on nopass all user test on nopass all read set list bitmap hyperloglog geo stream pubsub admin slow blocking dangerous scripting hget zlexcount hmget zrank lastsave echo mget bzpopmin time zcard xdel zrevrank get lpush bzpopmax spop rpush rpop touch xadd exists srem xsetid sadd lpushx lolwut strlen pttl publish lpop hlen dbsize xclaim rpushx scard xack hstrlen ttl pfadd llen zcount hexists xlen type getbit smove zscore sismember swapdb role Version os centos x redis Conf redis bind port tcpbacklog timeout tcpkeepalive daemonize yes supervised systemd pidfile varrunredis pid loglevel notice logfile dataredis logredis log databases save maxclients maxmemory MB maxmemorypolicy volatilettl dir dataredis data requirepass appendonly yes appendfilename appendonlyaof appendfsync everysec autoaofrewritepercentage autoaofrewriteminsize mb aofloadtruncated yes aofuserdbpreamble yes systemd Unit DescriptionRedis persistent keyvalue database Afternetworktarget Service Typenotify ExecStartusrlocalredisbinredisserver dataredis confredisconf supervised systemd ExecReloadbinkill USR MAINPID ExecStopusrlocalredisbinrediscli p a shutdown Userredis Groupredis RuntimeDirectoryredis RuntimeDirectoryMode Restartonfailure LimitNOFILE Install WantedBymultiusertarget Step redis systemd status bash rootnode systemctl status redis redis service Redis persistent keyvalue database Loaded loaded usrlibsystemdsystemredis service enabled vendor preset disabled Active active running since CST s ago Main PID redisserver Tasks Memory M CGroup systemsliceredis service usrlocalredisbinredisserver cluster node systemd Starting Redis persistent keyvalue database node systemd Started Redis persistent keyvalue database exec shutdown bash rootnode rediscli p a shutdown Warning Using a password with a or u option on the command line interface may not be safe rootnode echo command exit redis systemd status bash rootnode systemctl status redis redis service Redis persistent keyvalue database Loaded loaded usrlibsystemdsystemredis service enabled vendor preset disabled Active active running since CST s ago Process ExecStopusrlocalredisbinrediscli p a shutdown codeexited status FAILURE Main PID redisserver Tasks Memory M CGroup systemsliceredis service usrlocalredisbinredisserver cluster node systemd Starting Redis persistent keyvalue database node systemd Started Redis persistent keyvalue database status FAILURE restart redis varlogmessage bash rootnode tail varlogmessages Jan node systemd Started Redis persistent keyvalue database Jan node rediscli Warning Using a password with a or u option on the command line interface may not be safe Jan node rediscli Could not connect to Redis at Connection refused Jan node systemd redis service control process exited codeexited status Jan node systemd Unit redis service entered failed state Jan node systemd redis service failed Jan node systemd redis service holdoff time over scheduling restart Jan node systemd Stopped Redis persistent keyvalue database Jan node systemd Starting Redis persistent keyvalue database Jan node systemd Started Redis persistent keyvalue database I dont know why it returns this error I want to use the PubSub but I dont know how to pass the parameter of callable function to the subscribe function so that the callable function will be invoked automatically when a message is received on that channel redisversion def subscribeself args kwargs Subscribe to channels Channels supplied as keyword arguments expect a channel name as the key and a callable as the value A channels callable will be invoked automatically when a message is received on that channel rather than producing a message via listen or getmessage Just fixing a few typos in the comments 