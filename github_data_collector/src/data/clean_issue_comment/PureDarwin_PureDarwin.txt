While darwinbuild has served us well so far as I work towards building an ISO from scratch cf I find that it is not wellsuited for building a complete Darwin OS image from source The main issue is that it is stateless There is no way to tell a priori that a given project has already been built Because of this the only way I could implement darwinbuild recursive is to blindly build all detected dependencies every time This is wasteful of time if invoked repeatedly as it has no way to tell if a project is uptodate As far as darwinbuild knows it may be wildly outofdate and therefore must be rebuilt even though we know it was just built two minutes ago by a previous darwinbuild invocation Furthermore the use of darwinbuild plists to orchestrate the build does not work well with any sort of CI system it is also IMHO a very chaotic method to handle versioning of dependencies All the changes made to PD plist also required a tag be made in the source repository a completely adhoc and nonstandardized process In addition I am growing personally disillusioned with the increasingly lockeddown nature of Apple macOS As a result I was looking into ways to potentially build PureDarwin without needing to use xcodebuild as Xcode requires the use of macOS Yes there is xcbuild but while it once showed promise it is now so bitrotten that it no longer works at all due to changes in Xcode furthermore even when it was comparable in functionality with Apple xcodebuild it had a nasty habit of segfaulting The Darling project uses CMake to build a Darwinesque environment everything but kernelmode from source using CMake While one benefit of this technique is that it works on Linux as well on DarwinmacOS I feel that moving PureDarwin to a build system like Darlings using CMake and possibly a vendored copy of cctoolsld and using submodules to organize the code would have benefits even if we stick to building PureDarwin on macOS or itself only If this proposal is accepted I would start work by creating an SDK repository that contains the common CMake modules that handle things such as crosscompiling or processing MIG files as well as a copy of the headers and tbd stub library files that are used to build an arbitrary PureDarwin component This would essentially be a freelylicensed version of the Xcode MacOSXsdk directory I would then add CMakeListstxt files to the various repositories under the PureDarwin organization Once thats done I would add those repositories as submodules under the projects directory When the root PureDarwin repo is cloned the SDK would be included as a submodule and the other projects would be pointed to it via a CMake variable If a component repo is cloned on its own for example in a CI scenario then the SDK would need to be downloaded separately before the build and CMake given its location manually The build process for XNU would not change much XNU will still be built using the existing Makefilebased system integrated into the CMake build using the ExternalProject system Its dependencies dtrace libdispatch and a few others would be built using CMake and passed into the XNU makefiles using a file containing paths generated using the CMake configurefile feature Tell me what you think I have tried booting PD under Xen FreeBSD is dom with a following config file builder hvm name puredarwin disk homesaperdistpd isorawxvdaw boot c usbdevice tablet nographics serial devnmdm A vnc vnclisten vif bridgebridge mac bbaa memory vcpus vga stdvga videoram xenplatformpci oncrash preserve onreboot preserve It starts to boot but at some point there is a triple fault XEN d v Triple fault invoking HVM shutdown action XEN Dumping Dom vcpu state XEN Xen x debugn Not tainted XEN CPU XEN RIP ffffff c XEN RFLAGS CONTEXT hvm guest d v XEN rax rbx ffffff b b rcx XEN rdx rsi rdi XEN rbp ffffff f rsp ffffff e r XEN r r r XEN r r r XEN r cr cr XEN cr bb cr e XEN ds es fs gs ss cs Screenshot of the VGA console Any ideas how to troubleshoot it The SSL cert doesnt seem to cover www and slashes are required The markdown syntax appears to be invalid for the vmwaregif image link on Now this project need more people work together but I cant find a easily way and a clear document about how to build the puredarwin and create iso or vmdk image tourital Im a Mac user and I have tried to build a Darwinbased operating system but I didnt find information on building the basic operating system in Apple and PureDarwins documentsIt caused me to try many times without building success I believe that many people like me want to build their own Darwinbased systems because of their interestso I hope you can provide a document like Linux From Scratch for us Thank you The impurities can be removed later Is there a working ISO that can be released for developers to play with Originally reported on Google Code with ID bash and nano should be the defaults as these are most friendly to beginners Users who intentionally want to use zsh and vi can know how to install these and change the settings accordingly Reported by appenginepuredarwinorg on Originally reported on Google Code with ID I dont know why but the MB ISO generated by pdsetup is faulty and creates error on boot However if one uses HD Utility to restore the same ISO to a USB drive and then installs the bootloader the resulting system boots fine on real HW Dont know whats going on Reported by appenginepuredarwinorg on Originally reported on Google Code with ID This is just a placeholder chmod R root SLLaunchDaemons needed if multiuser login doesnt work Reported by appenginepuredarwinorg on 