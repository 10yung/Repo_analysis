on windows will through nodemodulescoffeescriptbincake command not found error use a shell instead log C Documents and Settings caixinbaonpm install viff g npm WARN deprecated deflatecrc stream module has been merged into crc stream weak install C Documents and Settings caixinbao Application Data npm no demodules viff nodemodules phantom nodemodules dnode nodemodules weak nodegyp rebuild C Documents and Settings caixinbao Application Data npm nodemodules viff node modules phantom nodemodules dnode nodemodules weaknode C Program Files node js nodemodules npm bin nodegypbin nodemodules nodegyp bin nodegypj s rebuild C Documents and Settings caixinbaonodegyp deps v include v h warning C v PersistentT v PersistentTNewv HandleT C Documents and Settings caixinbao Application Data npm nodemodules vi ff nodemodules phantom nodemodules dnode nodemodules weak build bindingsln C Documents and Settings caixinbao Application Data npm viffserver C Docume nts and Settings caixinbao Application Data npm nodemodules viff bin viffserver C Documents and Settings caixinbao Application Data npm viff C Documents an d Settings caixinbao Application Data npm nodemodules viff bin viff C Documents and Settings caixinbao Application Data npm viffstream C Docume nts and Settings caixinbao Application Data npm nodemodules viff bin viffstream viff install C Documents and Settings caixinbao Application Data npm n odemodules viff npm run build viff build C Documents and Settings caixinbao Application Data npm nod emodules viff nodemodulescoffeescriptbincake build nodemodules npm ERR viff build nodemodulescoffeescriptbincake build npm ERR Exit status npm ERR npm ERR Failed at the viff build script npm ERR This is most likely a problem with the viff package npm ERR not with npm itself npm ERR Tell the author that this fails on your system npm ERR nodemodulescoffeescriptbincake build npm ERR You can get their info via npm ERR npm owner ls viff npm ERR There is likely additional logging output above npm ERR System WindowsNT npm ERR command C Program Files nodejs nodeexe C Program Files nod ejs nodemodules npm bin npmclijs run build npm ERR cwd C Documents and Settings caixinbao Application Data npm nodemodul es viff npm ERR node v v npm ERR npm v npm ERR code ELIFECYCLE npm ERR npm ERR Additional logging details can be found in npm ERR C Documents and Settings caixinbao Application Data npm nodemodul es viff npmdebuglog npm ERR not ok code npm ERR viff install npm run build npm ERR Exit status npm ERR npm ERR Failed at the viff install script npm ERR This is most likely a problem with the viff package npm ERR not with npm itself npm ERR Tell the author that this fails on your system npm ERR npm run build npm ERR You can get their info via npm ERR npm owner ls viff npm ERR There is likely additional logging output above npm ERR System WindowsNT npm ERR command C Program Files nodejs nodeexe C Program Files nod ejs nodemodules npm bin npmclijs install viff g npm ERR cwd C Documents and Settings caixinbao npm ERR node v v npm ERR npm v npm ERR code ELIFECYCLE npm ERR not ok code js use strict var config moduleexports seleniumHost browsers chrome envHosts build prod paths reportFormat file test function test description caseConfig var c c description caseConfig thispathspushc configtestHome Page githubhtml function browser return browserwaitForElementByCssSelectorrepolistitem browserisDisplayed configtestSearch Result githubhtml function browser return browser waitForElementByCssSelectorrepolistitem browserisDisplayed elementByCssSelector typesearch typecommanderjs sleep configtestOpen Readme file githubhtml function browser return browser waitForElementByCssSelectorrepolistitem browserisDisplayed elementByCssSelectorrepolistitemnthchild click waitForElementByCssSelectorreporeadme browserisDisplayed D testviff buildprodconfigjs Viff is taking screenshots phantom stderr phantomjscmd assertjs throw new assertAssertionError AssertionError abnormal phantomjs exit code at Consoleassert consolejs at ChildProcessanonymous C Users kangjy AppData Roaming npm nodemodules viff nodemodules phantom phantomjs at ChildProcessEventEmitteremit eventsjs at ProcessChildProcesshandleonexit childprocessjs as titleand there is the stacktrace npm WARN optional dep failed continuing weak npm WARN optional dep failed continuing weak npm WARN deprecated deflatecrc stream module has been merged into crc stream C Users abc AppData Roaming npm viffstream C Users abc AppData Ro aming npm nodemodules viff bin viffstream C Users abc AppData Roaming npm viffserver C Users abc AppData Ro aming npm nodemodules viff bin viffserver C Users abc AppData Roaming npm viff C Users abc AppData Roaming npm nodemodules viff bin viff viff install C Users abc AppData Roaming npm nodemodules viff npm run build npm ERR viff install npm run build npm ERR spawn ENOENT npm ERR npm ERR Failed at the viff install script npm ERR This is most likely a problem with the viff package npm ERR not with npm itself npm ERR Tell the author that this fails on your system npm ERR npm run build npm ERR You can get their info via npm ERR npm owner ls viff npm ERR There is likely additional logging output above npm ERR System WindowsNT npm ERR command C Program Files nodejs nodeexe C Program Files nod ejs nodemodules npm bin npmclijs install g viff npm ERR cwd C windows system npm ERR node v v npm ERR npm v npm ERR syscall spawn npm ERR code ELIFECYCLE npm ERR errno ENOENT npm ERR not ok code So its kinda hard to use this programmatically if you need to rely on CoffeeScript to be in your global path or a preexisting peer dependency in local nodemodules Happy to issue you a pull if youd like but this is a pretty simple fix npm install save coffeescript A version bump commit and npm publish andVoila people wont get stupid install errors from npm Cheers ghost Add a global setting misMatchPercentage to define a KO test beyond this percentage default is A comparison of images may sometimes be slightly different an offset of pixel In our case we want to identify a significant difference between two images and therefore put a test KO when the percentage difference is beyond a given threshold I use the example use strict buildprodconfigjs moduleexports seleniumHost browsers firefox chrome safari opera envHosts build prod paths html page page page page strictmode function clickLinkbrowser need to return a promise return browserelementByPartialLinkTextviffclick maincontent function browser this is a testcase description maincontent functionbrowser return browsermaximize reportFormat file Execute a command viff buildprodconfigjs generate contrast images but ViffReport unable to generate report VIFF does not generate the JSON file I need a grammar for viff i need How To Write configjs File thankyou viffreport viff json index html js json reportFormat file 