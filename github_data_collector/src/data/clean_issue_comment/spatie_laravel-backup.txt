 Class League CommonMark Environment not found View homevideocypappvendorlaravelframeworksrcIlluminateMailresourcesviewshtmlfooterbladephp exception object Facade Ignition Exceptions ViewExceptioncode Class League CommonMark Environment not found View homevideocypappvendorlaravelframeworksrcIlluminateMailresourcesviewshtmlfooterbladephp at homevideocypappvendorlaravelframeworksrcIlluminateMailMarkdownphp Hello i have a Laravel v and Spatie Backup then configured on the provider with something like this BackupHasFailedclass App Listeners BackupExecutionEventHandlerfailed I started the backup with the command and it fail on the notification this because i have no email configuration this is something i expected What i didnt expected is that if i get an error the error event isnt fired any ideas Other events like BackupZipWasCreated work as expected Thanks My backups stopped working after running composer update I am using mysqldump and PHP on Centos Can you help me This is the error I am getting Backup failed because The dump process failed with exitcode Misuse of shell builtins varwwwhtmlproductionmanagervendorspatiedbdumpersrcDbDumperphp Spatie DbDumper Exceptions DumpFailedprocessDidNotEndSuccessfullyObjectSymfony Component Process Process varwwwhtmlproductionmanagervendorspatiedbdumpersrcDatabasesMySqlphp Spatie DbDumper DbDumpercheckIfDumpWasSuccessFulObjectSymfony Component Process Process varwwwhtmlp varwwwhtmlproductionmanagervendorspatielaravelbackupsrcTasksBackupBackupJobphp Spatie DbDumper Databases MySqldumpToFilevarwwwhtmlp internal function Spatie Backup Tasks Backup BackupJobSpatie Backup Tasks Backup closureObjectSpatie DbDumper Databases MySql mysql varwwwhtmlproductionmanagervendorlaravelframeworksrcIlluminateSupportCollectionphp arraymapObjectClosure Array Array varwwwhtmlproductionmanagervendorspatielaravelbackupsrcTasksBackupBackupJobphp Illuminate Support CollectionmapObjectClosure varwwwhtmlproductionmanagervendorspatielaravelbackupsrcTasksBackupBackupJobphp Spatie Backup Tasks Backup BackupJobdumpDatabases varwwwhtmlproductionmanagervendorspatielaravelbackupsrcTasksBackupBackupJobphp Spatie Backup Tasks Backup BackupJobcreateBackupManifest varwwwhtmlproductionmanagervendorspatielaravelbackupsrcCommandsBackupCommandphp Spatie Backup Tasks Backup BackupJobrun internal function Spatie Backup Commands BackupCommandhandle varwwwhtmlproductionmanagervendorlaravelframeworksrcIlluminateContainerBoundMethodphp calluserfuncarrayArray Array varwwwhtmlproductionmanagervendorlaravelframeworksrcIlluminateContainerUtilphp Illuminate Container BoundMethodIlluminate Container closure varwwwhtmlproductionmanagervendorlaravelframeworksrcIlluminateContainerBoundMethodphp Illuminate Container UtilunwrapIfClosureObjectClosure varwwwhtmlproductionmanagervendorlaravelframeworksrcIlluminateContainerBoundMethodphp Illuminate Container BoundMethodcallBoundMethodObjectIlluminate Foundation Application Array ObjectClosure varwwwhtmlproductionmanagervendorlaravelframeworksrcIlluminateContainerContainerphp Illuminate Container BoundMethodcallObjectIlluminate Foundation Application Array Array NULL varwwwhtmlproductionmanagervendorlaravelframeworksrcIlluminateConsoleCommandphp Illuminate Container ContainercallArray varwwwhtmlproductionmanagervendorsymfonyconsoleCommandCommandphp Illuminate Console CommandexecuteObjectSymfony Component Console Input ArgvInput ObjectIlluminate Console OutputStyle varwwwhtmlproductionmanagervendorlaravelframeworksrcIlluminateConsoleCommandphp Symfony Component Console Command CommandrunObjectSymfony Component Console Input ArgvInput ObjectIlluminate Console OutputStyle varwwwhtmlproductionmanagervendorspatielaravelbackupsrcCommandsBaseCommandphp Illuminate Console CommandrunObjectSymfony Component Console Input ArgvInput ObjectSymfony Component Console Output ConsoleOutput varwwwhtmlproductionmanagervendorsymfonyconsoleApplicationphp Spatie Backup Commands BaseCommandrunObjectSymfony Component Console Input ArgvInput ObjectSymfony Component Console Output ConsoleOutput varwwwhtmlproductionmanagervendorsymfonyconsoleApplicationphp Symfony Component Console ApplicationdoRunCommandObjectSpatie Backup Commands BackupCommand ObjectSymfony Component Console Input ArgvInput ObjectSymfony Component Console Output ConsoleOutput varwwwhtmlproductionmanagervendorsymfonyconsoleApplicationphp Symfony Component Console ApplicationdoRunObjectSymfony Component Console Input ArgvInput ObjectSymfony Component Console Output ConsoleOutput varwwwhtmlproductionmanagervendorlaravelframeworksrcIlluminateConsoleApplicationphp Symfony Component Console ApplicationrunObjectSymfony Component Console Input ArgvInput ObjectSymfony Component Console Output ConsoleOutput varwwwhtmlproductionmanagervendorlaravelframeworksrcIlluminateFoundationConsoleKernelphp Illuminate Console ApplicationrunObjectSymfony Component Console Input ArgvInput ObjectSymfony Component Console Output ConsoleOutput varwwwhtmlproductionmanagerartisan Illuminate Foundation Console KernelhandleObjectSymfony Component Console Input ArgvInput ObjectSymfony Component Console Output ConsoleOutput main Backup failed because The dump process failed with exitcode Misuse of shell builtins When passing the socket option in dump section of the mysql part in databasephp the host part will not be ignored Now it does so socket connection is possible I need to create autobackup of databases not LARAVEL applications And put them either in different archives or in archive Trying to backups but it is failing with the next error Starting backup Dumping database Backup failed because The dump process failed with exitcode General error sh line fg no job control Usage mysqldump OPTIONS database tables OR mysqldump OPTIONS databases OPTIONS DB DB DB OR mysqldump OPTIONS alldatabases OPTIONS For more options use mysqldump help Any ideas how to fix that Config is correct and running mysql dump manually it works When I try to run a backup for my mariadb database I get the following error message The dump process failed with exitcode Misuse of shell builtins mysqldump Got error Cant connect to MySQL server on when trying to connect In my env file I have set DBSOCKETvarrunmysqldmysqldsock which works in my application Hi i need to help please when i run backup command on local host the db is exported empty but on host its ok i need the backup to run on localhost important i use this code in laravel controller Artisancalldbbackup First of all thank you for this great package It makes me sleep better at night The backups work great so far but Im struggling to exclude nonspecific directories For example Im als using your medialibrary package In my backups Id like to include my original images but exclude all conversions These conversions take up a lot of space and can easily be regenerated In my setup conversions are saved in a subdirectory named conversions per image So far Ive not been able to exclude those without specifying each directory separately What do I have to add to the exclude array to achieve this Setup In our setup we have one shared main schema and then each tenant has their own schema tenantslug I would like to store the backups in a subfolder for each tenant So my ideal structure in the S bucket is Appstagingmain folder Main mainsql Tenant tenant sql Tenant tenant sql Appproductionmain folder Main mainsql Tenant tenant sql Tenant tenant sql In order to accomplish this I hacked a bit I set the root in my filesystems config to my APPNAME which take cares of the top level folder s backup driver s key envAWSKEY secret envAWSSECRET region envAWSREGION bucket envAWSBACKUPBUCKET root envAPPNAME Then I made a custom BackupDB commant php artisan backupruntenants that dynamically switches out the backupbackupname in order to create the subfolders public function handle config backupbackupname main thiscallbackuprun filename main CarbonnowformatYmdHis zip onlydb true dbname main customers Customerall foreach customers as customer customerconnect config backupbackupname customerslug Artisancallconfigclear thiscallbackuprun filename customerslug CarbonnowformatYmdHis zip onlydb true dbname tenant This correctly saves my backups into this folder structure Appstagingmain folder Main mainsql Tenant tenant sql Tenant tenant sql Appproductionmain folder Main mainsql Tenant tenant sql Tenant tenant sql Problem However the problem comes when I try to cleanup I cannot figure out a smart way to dynamically switch out directories in my custom Cleanup strategy That already comes with an injected BackupCollection made from a BackupDestination Do you have a suggestion on implementing subfolder storage and cleanup in a good way 