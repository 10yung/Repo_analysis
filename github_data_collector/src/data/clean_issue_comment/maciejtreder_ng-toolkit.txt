 Im submitting a Check one of the following options with x precode Bug report Please search GitHub for a similar issue or PR before submitting Feature request Documentation issue or request codepre In package precode ngtoolkitinit ngtoolkitserverless ngtoolkituniversal ngtoolkitpwa ngtoolkitfirebug codepre Current behavior Creates wrong moduleexports as moduleexports requirerequire servermain in distserverjs on line No ability to run npm run serve scrypt Expected behavior Should be moduleexports requireservermain Minimal reproduction of the problem with instructions npm run buildssr What is the motivation use case for changing the behavior I resolved this issue with changing in lines of webpackserverconfigjs from actual state externals distservermain requireservermain to externals distservermain servermain Environment precode Angular version Angular CLI OS win x Angular Node version v Platform Windows ng add ngtoolkituniversal dependencies angularanimations angularcommon angularcompiler angularcore angularforms angularplatformbrowser angularplatformbrowserdynamic angularplatformserver angularrouter ngtoolkituniversal nguniversalexpressengine nguniversalmodulemapngfactoryloader express rxjs tslib zonejs Skipping installation Package already installed INFO Project property is set to angular jwtauthenticationexample ERROR Cannot read property unshift of undefined ERROR If you think that this error shouldnt occur please fill up bug report here INFO stacktrace has been sent to tracking system Nothing to be done Hello Sir My name is Himanshu I need Your help actually i run ng add ngtoolkituniversal command then Skipping installation Package already installed ERROR Cannot read property kind of undefined ERROR If you think that this error shouldnt occur please fill up bug report here INFO stacktrace has been sent to tracking system this error is showing please help how can i solve this error i will show you my packagejson and angularjson file data name visaapp version scripts ng ng start ng serve build ng build gzipper verbose dist test ng test lint ng lint e e ng e e postbuild gulp compress gzipper gzipper private true dependencies angularanimations angularcdk angularcommon angularcompiler angularcore angularforms angularmaterial angularplatformbrowser angularplatformbrowserdynamic angularpwa angularrouter angularserviceworker ngbootstrapngbootstrap ngtoolkituniversal angularmaterialdatepicker axios bootstrap corejs flatpickr gzipper hammerjs jquery ng flatpickr ngxpagination ngxwebstorageservice node rxjs tslib zonejs devDependencies angulardevkitbuildangular angularcli angularcompilercli angularlanguageservice typesjasmine typesjasminewd typesjquery typesnode codelyzer gulp gulpgzip jasminecore jasminespecreporter karma karmachromelauncher karmacoverageistanbulreporter karmajasmine karmajasminehtmlreporter protractor tsnode tslint typescript angularjson schema nodemodulesangularclilibconfigschemajson version newProjectRoot projects projects visaApp root sourceRoot src projectType application prefix app schematics architect build builder angulardevkitbuildangularbrowser options outputPath distvisaApp index srcindexhtml main srcmaints polyfills srcpolyfillsts tsConfig srctsconfigappjson assets srcfaviconpng srcassets srcmanifestwebmanifest styles srcstylescss scripts es BrowserSupport true configurations production fileReplacements replace srcenvironmentsenvironmentts with srcenvironmentsenvironmentprodts optimization true outputHashing all sourceMap false extractCss true namedChunks false aot true extractLicenses true vendorChunk false buildOptimizer true budgets type initial maximumWarning mb maximumError mb serviceWorker false ngswConfigPath ngswconfigjson serve builder angulardevkitbuildangulardevserver options browserTarget visaAppbuild configurations production browserTarget visaAppbuildproduction extracti n builder angulardevkitbuildangularextracti n options browserTarget visaAppbuild test builder angulardevkitbuildangularkarma options main srctestts polyfills srcpolyfillsts tsConfig srctsconfigspecjson karmaConfig srckarmaconfjs styles srcstylescss nodemodulesairdatepickerdistcssdatepickermincss scripts nodemodulesairdatepickerdistjsdatepickerminjs assets srcfaviconico srcassets srcmanifestwebmanifest lint builder angulardevkitbuildangulartslint options tsConfig srctsconfigappjson srctsconfigspecjson exclude nodemodules visaAppe e root e e projectType application prefix architect e e builder angulardevkitbuildangularprotractor options protractorConfig e eprotractorconfjs devServerTarget visaAppserve configurations production devServerTarget visaAppserveproduction lint builder angulardevkitbuildangulartslint options tsConfig e etsconfige ejson exclude nodemodules defaultProject visaApp Maybe it is me not quite understanding the processI did this npm run buildprerender it compiled with warnings WARNING in nodemodulesangulardevkitcorenodeexperimentaljobsjobregistryjs Critical dependency the request of a dependency is an expression nodemodulesangulardevkitcorenodeindexjs nodemodulesangulardevkitschematicssrcsinkdryrunjs nodemodulesangulardevkitschematicssrcindexjs nodemodulesschematicsangularutilityprojecttargetsjs prerenderts WARNING in nodemoduleschokidarlibfseventshandlerjs Module not found Error Cant resolve fsevents in C Users J TisUISEO nodemodules chokidar lib nodemoduleschokidarlibfseventshandlerjs nodemoduleschokidarindexjs nodemodulesangulardevkitcorenodehostjs nodemodulesangulardevkitcorenodeindexjs nodemodulesangulardevkitschematicssrcsinkdryrunjs nodemodulesangulardevkitschematicssrcindexjs nodemodulesschematicsangularutilityprojecttargetsjs prerenderts WARNING in nodemodulesangulardevkitcorenoderesolvejs requireextensions is not supported by webpack Use a loader instead nodemodulesangulardevkitcorenodeexperimentaljobsjobregistryjs nodemodulesangulardevkitcorenodeindexjs nodemodulesangulardevkitschematicssrcsinkdryrunjs nodemodulesangulardevkitschematicssrcindexjs nodemodulesschematicsangularutilityprojecttargetsjs prerenderts but eventually it said sitemap has been created Then i did npm run serveprerender the system replied Listening on localhost so I opened a web browser I typed localhost but I got back ERROR Cannot GET any idea Thanks ng add ngtoolkitserverless provider aws Skipping installation Package already installed bugsnag Loaded ERROR Path serverts already exist ERROR If you think that this error shouldnt occur please fill up bug report here INFO stacktrace has been sent to tracking system Nothing to be done I did npm run buildprod which created the dist folder I uploaded in the shared hosting distbrowser distserver serverjs nodemodules and this webconfig xml version encodingUTF configuration systemwebServer handlers add nameiisnode pathserverjs verb modulesiisnode handlers rewrite rules rule namemysite match url action typeRewrite urlserverjs rule rules rewrite systemwebServer configuration but I get this error iisnode encountered an error when processing the request HRESULT x HTTP status HTTP subStatus HTTP reason Internal Server Error You are receiving this HTTP response because systemwebServeriisnodedevErrorsEnabled configuration setting is true In addition to the log of stdout and stderr of the nodeexe process consider using debugging and ETW traces to further diagnose the problem The nodeexe process has not written any information to stderr or iisnode was unable to capture this information Frequent reason is that the iisnode module is unable to create a log file to capture stdout and stderr output from nodeexe Please check that the identity of the IIS application pool running the nodejs application has read and write access permissions to the directory on the server where the nodejs application is located Alternatively you can disable logging by setting systemwebServeriisnodeloggingEnabled element of webconfig to false Im submitting a Check one of the following options with x precode Bug report Please search GitHub for a similar issue or PR before submitting codepre In package precode ngtoolkituniversal codepre Current behavior everything works well when creating initial new angular project with CLI But when i add components modules lazy loaded module prerender build does not work anymore Expected behavior Build prerender to be working with angular web app Minimal reproduction of the problem with instructions step npm run buildprerender step output error precode fsjs throw err Error ENOENT no such file or directory open srcappcoreroutingmodulets at ObjectopenSync fsjs at ObjectreadFileSync fsjs at identifiersforEachidentifier C Users sgtra Desktop assia appWorkspace WEBSITE akcws artkauricssr dist prerenderjs at ArrayforEach anonymous at findRoutes C Users sgtra Desktop assia appWorkspace WEBSITE akcws artkauricssr dist prerenderjs at identifiersforEachidentifier C Users sgtra Desktop assia appWorkspace WEBSITE akcws artkauricssr dist prerenderjs at ArrayforEach anonymous at findRoutes C Users sgtra Desktop assia appWorkspace WEBSITE akcws artkauricssr dist prerenderjs at identifiersforEachidentifier C Users sgtra Desktop assia appWorkspace WEBSITE akcws artkauricssr dist prerenderjs at ArrayforEach anonymous npm ERR code ELIFECYCLE npm ERR errno npm ERR artkauricssr buildprerender npm run buildprod node distprerenderjs npm ERR Exit status npm ERR npm ERR Failed at the artkauricssr buildprerender script npm ERR This is probably not a problem with npm There is likely additional logging output above npm ERR A complete log of this run can be found in npm ERR C Users AppData Roaming npmcache logs T Zdebuglog precode This is my lazy loaded module where it seems to have a problem finding the file precode export const routes Routes path pathMatch full redirectTo comingsoon path comingsoon loadChildren importcorecoremodulethenm mCoreModule precode It looks like the webpack is fetching the complete path corecoremodule instead of corecoremodule and is doing the same with app instead of app Environment My packagejson precode private true dependencies angularanimations angularcommon angularcompiler angularcore angularforms angularplatformbrowser angularplatformbrowserdynamic angularplatformserver angularrouter bugsnagjs ngtoolkituniversal nguniversalcommon nguniversalexpressengine nguniversalmodulemapngfactoryloader angularparticle corejs domino express ngxquicklink parallaxjs rxjs tslib zonejs devDependencies angulardevkitbuildangular angularcli angularcompilercli angularlanguageservice typesnode typesjasmine typesjasminewd codelyzer jasminecore jasminespecreporter karma karmachromelauncher karmacoverageistanbulreporter karmajasmine karmajasminehtmlreporter protractor tsloader tsnode tslint typescript webpackcli precode Getting Error when run npm run buildprerender command staticpathsts bytes built hidden modules fsjs throw err Error ENOENT no such file or directory open srcnguniversalmodulemapngfactoryloaderts at ObjectopenSync fsjs at ObjectreadFileSync fsjs at Moduleanonymous E angular nk dist prerenderjs at webpackrequire E angular nk dist prerenderjs at E angular nk dist prerenderjs at Objectanonymous E angular nk dist prerenderjs at Modulecompile internalmodulescjsloaderjs at ObjectModuleextensionsjs internalmodulescjsloaderjs at Moduleload internalmodulescjsloaderjs at tryModuleLoad internalmodulescjsloaderjs npm ERR code ELIFECYCLE npm ERR errno npm ERR nk buildprerender npm run buildprod node distprerenderjs npm ERR Exit status npm ERR npm ERR Failed at the nk buildprerender script npm ERR This is probably not a problem with npm There is likely additional logging output above npm ERR A complete log of this run can be found in npm ERR C Users Abhishek AppData Roaming npmcache logs T Zdebuglog Im submitting a Check one of the following options with x precode X Bug report Please search GitHub for a similar issue or PR before submitting Feature request Documentation issue or request codepre In package precode ngtoolkitinit ngtoolkitserverless x ngtoolkituniversal ngtoolkitpwa ngtoolkitfirebug codepre Current behavior Describe how the issue manifests I am able to say ng add ngtoolkituniversal and npm run buildprod but when I say npm run server it throws the following error Error Cannot find module requireservermain Require stack C Users aarti hlloworld dist serverjs C Users aarti hlloworld localjs at FunctionModuleresolveFilename internalmodulescjsloaderjs at FunctionModuleload internalmodulescjsloaderjs at Modulerequire internalmodulescjsloaderjs at require internalmodulescjshelpersjs at Objectanonymous C Users aarti hlloworld dist serverjs at webpackrequire C Users aarti hlloworld dist serverjs at Moduleanonymous C Users aarti hlloworld dist serverjs at webpackrequire C Users aarti hlloworld dist serverjs at C Users aarti hlloworld dist serverjs at Objectanonymous C Users aarti hlloworld dist serverjs code MODULENOTFOUND requireStack C Users aarti hlloworld dist serverjs C Users aarti hlloworld localjs npm ERR code ELIFECYCLE npm ERR errno npm ERR hlloworld server node localjs npm ERR Exit status npm ERR npm ERR Failed at the hlloworld server script npm ERR This is probably not a problem with npm There is likely additional logging output above npm ERR A complete log of this run can be found in npm ERR C Users aarti AppData Roaming npmcache logs T Zdebuglog Expected behavior Describe what the desired behavior would be I should get a localhost development server on port Minimal reproduction of the problem with instructions For bug reports please provide the STEPS TO REPRODUCE Example repository Please provide link to your public cloneable repository to give us a chance to reproduce your issue on our end What is the motivation use case for changing the behavior Describe the motivation or the concrete use case Environment precode Angular version XYZ Check whether this is still an issue in the most recent Angular version Node version XX run node version Platform Mac Linux Windows Others Anything else relevant Operating system version IDE package manager HTTP server codepre console fsjs throw err Error ENOENT no such file or directory open srcnguniversalmodulemapngfactoryloaderts at ObjectopenSync fsjs at ObjectreadFileSync fsjs at eval webpackprerenderts at Moduleprerenderts UserspietechDesktopProjectsWebProjectsgetflutterwebsitedistprerenderjs at webpackrequire UserspietechDesktopProjectsWebProjectsgetflutterwebsitedistprerenderjs at UserspietechDesktopProjectsWebProjectsgetflutterwebsitedistprerenderjs at Objectanonymous UserspietechDesktopProjectsWebProjectsgetflutterwebsitedistprerenderjs at Modulecompile internalmodulescjsloaderjs at ObjectModuleextensionsjs internalmodulescjsloaderjs at Moduleload internalmodulescjsloaderjs npm ERR code ELIFECYCLE npm ERR errno npm ERR kilianng buildprerender npm run buildprod node distprerenderjs npm ERR Exit status npm ERR npm ERR Failed at the kilianng buildprerender script npm ERR This is probably not a problem with npm There is likely additional logging output above npm ERR A complete log of this run can be found in npm ERR Userspietechnpmlogs T Zdebuglog 