Updates orgscalasbtsbt from to Release NotesChangelog Ill automatically update this PR to resolve conflicts as long as you dont change it yourself If youd like to skip this version you can just close this PR If you have any feedback just mention me in the comments below Have a fantastic day writing Scala details summaryIgnore future updatessummary Add this to your scalastewardconf file to ignore future updates of this dependency updatesignore groupId orgscalasbt artifactId sbt details labels libraryupdate semverpatch I cloned the repository and checked out tag I have no local changes None of the sample work bash uname a Darwin MBP local Darwin Kernel Version Thu Jun PDT rootxnu RELEASEX x basicsample fails on the first request with basicsample run Running the application autoreloading is enabled info pcsAkkaHttpServer Listening for HTTP on Server started use Enter to stop and go back to the console error pahDefaultHttpErrorHandler eeoml h Internal server error for GET playapiUnexpectedException Unexpected exception RuntimeException No application loader is configured Please configure an application loader either using the playapplicationloader configuration property or by depending on a module that configures one You can add the Guice support module by adding libraryDependencies guice to your buildsbt at playcoreserverDevServerStartanon reloadDevServerStartscala at playcoreserverDevServerStartanon getDevServerStartscala at playcoreserverAkkaHttpServerhandleRequestAkkaHttpServerscala at playcoreserverAkkaHttpServeranonfuncreateServerBinding AkkaHttpServerscala at akkastreamimplfusingMapAsyncanon onPushOpsscala at akkastreamimplfusingGraphInterpreterprocessPushGraphInterpreterscala at akkastreamimplfusingGraphInterpreterexecuteGraphInterpreterscala at akkastreamimplfusingGraphInterpreterShellrunBatchActorGraphInterpreterscala at akkastreamimplfusingGraphInterpreterShellAsyncInputexecuteActorGraphInterpreterscala at akkastreamimplfusingGraphInterpreterShellprocessEventActorGraphInterpreterscala Caused by javalangRuntimeException No application loader is configured Please configure an application loader either using the playapplicationloader configuration property or by depending on a module that configures one You can add the Guice support module by adding libraryDependencies guice to your buildsbt at scalasyspackageerrorpackagescala at playapiApplicationLoaderplayapiApplicationLoaderloaderNotFoundApplicationLoaderscala at playapiApplicationLoaderapplyApplicationLoaderscala at playcoreserverDevServerStartanon anonfunreload DevServerStartscala at playutilsThreadswithContextClassLoaderThreadsscala at playcoreserverDevServerStartanon reloadDevServerStartscala at playcoreserverDevServerStartanon getDevServerStartscala at playcoreserverAkkaHttpServerhandleRequestAkkaHttpServerscala at playcoreserverAkkaHttpServeranonfuncreateServerBinding AkkaHttpServerscala at akkastreamimplfusingMapAsyncanon onPushOpsscala computerdatabasesample fails to apply the evolution After clicking the Apply this script now button I end up at the same place computerdatabasesample run Running the application autoreloading is enabled info pcsAkkaHttpServer Listening for HTTP on Server started use Enter to stop and go back to the console error pahDefaultHttpErrorHandler eeompa i Internal server error for GET playapidbevolutionsInvalidDatabaseRevision Database default needs evolution An SQL script need to be run on your database at playapidbevolutionsEvolutionsWebCommandsanonfunhandleWebCommand ApplicationEvolutionsscala at playapidbevolutionsEvolutionsWebCommandsanonfunhandleWebCommand adaptedApplicationEvolutionsscala at playapidbevolutionsApplicationEvolutionsanonfunrunEvolutions ApplicationEvolutionsscala at playapidbevolutionsApplicationEvolutionswithLockApplicationEvolutionsscala at playapidbevolutionsApplicationEvolutionsrunEvolutionsApplicationEvolutionsscala at playapidbevolutionsEvolutionsWebCommandsanonfunhandleWebCommand ApplicationEvolutionsscala at playapidbevolutionsEvolutionsWebCommandsanonfunhandleWebCommand adaptedApplicationEvolutionsscala at scalacollectionimmutableListforeachListscala at playapidbevolutionsEvolutionsWebCommandshandleWebCommandApplicationEvolutionsscala at playcoreDefaultWebCommandsanonfunhandleWebCommand WebCommandsscala RELOAD error pahDefaultHttpErrorHandler eeompnmp Internal server error for GET playapidbevolutionsInvalidDatabaseRevision Database default needs evolution An SQL script need to be run on your database at playapidbevolutionsEvolutionsWebCommandsanonfunhandleWebCommand ApplicationEvolutionsscala at playapidbevolutionsEvolutionsWebCommandsanonfunhandleWebCommand adaptedApplicationEvolutionsscala at playapidbevolutionsApplicationEvolutionsanonfunrunEvolutions ApplicationEvolutionsscala at playapidbevolutionsApplicationEvolutionswithLockApplicationEvolutionsscala at playapidbevolutionsApplicationEvolutionsrunEvolutionsApplicationEvolutionsscala at playapidbevolutionsEvolutionsWebCommandsanonfunhandleWebCommand ApplicationEvolutionsscala at playapidbevolutionsEvolutionsWebCommandsanonfunhandleWebCommand adaptedApplicationEvolutionsscala at scalacollectionimmutableListforeachListscala at playapidbevolutionsEvolutionsWebCommandshandleWebCommandApplicationEvolutionsscala at playcoreDefaultWebCommandsanonfunhandleWebCommand WebCommandsscala streamssample fails with computerdatabasesample project streamssample info Set current project to iterateesample in build fileUserskostarDownloadsplayslick iterateesample run Running the application autoreloading is enabled info pcsAkkaHttpServer Listening for HTTP on Server started use Enter to stop and go back to the console debug sjJstatement Preparing statement select count from RECORDS error pahDefaultHttpErrorHandler eeon f Internal server error for GET playapiUnexpectedException Unexpected exception CreationException Unable to create injector see the following errors Error injecting constructor orgh jdbcJdbcSQLSyntaxErrorException Table RECORDS not found SQL statement select count from RECORDS at modulesInitialDatainitInitialDatascala at modulesInitialDataModuleconfigureInitialDatascala via modules comgoogleinjectutilModulesOverrideModule modulesInitialDataModule while locating modulesInitialData error at playcoreserverDevServerStartanon reloadDevServerStartscala at playcoreserverDevServerStartanon getDevServerStartscala at playcoreserverAkkaHttpServerhandleRequestAkkaHttpServerscala at playcoreserverAkkaHttpServeranonfuncreateServerBinding AkkaHttpServerscala at akkastreamimplfusingMapAsyncanon onPushOpsscala at akkastreamimplfusingGraphInterpreterprocessPushGraphInterpreterscala at akkastreamimplfusingGraphInterpreterexecuteGraphInterpreterscala at akkastreamimplfusingGraphInterpreterShellrunBatchActorGraphInterpreterscala at akkastreamimplfusingGraphInterpreterShellAsyncInputexecuteActorGraphInterpreterscala at akkastreamimplfusingGraphInterpreterShellprocessEventActorGraphInterpreterscala Caused by comgoogleinjectCreationException Unable to create injector see the following errors Error injecting constructor orgh jdbcJdbcSQLSyntaxErrorException Table RECORDS not found SQL statement select count from RECORDS at modulesInitialDatainitInitialDatascala at modulesInitialDataModuleconfigureInitialDatascala via modules comgoogleinjectutilModulesOverrideModule modulesInitialDataModule while locating modulesInitialData error at comgoogleinjectinternalErrorsthrowCreationExceptionIfErrorsExistErrorsjava at comgoogleinjectinternalInternalInjectorCreatorinjectDynamicallyInternalInjectorCreatorjava at comgoogleinjectinternalInternalInjectorCreatorbuildInternalInjectorCreatorjava at comgoogleinjectGuicecreateInjectorGuicejava at comgoogleinjectGuicecreateInjectorGuicejava at playapiinjectguiceGuiceBuilderinjectorGuiceInjectorBuilderscala at playapiinjectguiceGuiceApplicationBuilderbuildGuiceApplicationBuilderscala at playapiinjectguiceGuiceApplicationLoaderloadGuiceApplicationLoaderscala at playcoreserverDevServerStartanon anonfunreload DevServerStartscala at playutilsThreadswithContextClassLoaderThreadsscala Caused by orgh jdbcJdbcSQLSyntaxErrorException Table RECORDS not found SQL statement select count from RECORDS at orgh messageDbExceptiongetJdbcSQLExceptionDbExceptionjava at orgh messageDbExceptiongetJdbcSQLExceptionDbExceptionjava at orgh messageDbExceptiongetDbExceptionjava at orgh messageDbExceptiongetDbExceptionjava at orgh commandParserreadTableOrViewParserjava at orgh commandParserreadTableFilterParserjava at orgh commandParserparseSelectFromPartParserjava at orgh commandParserparseSelectParserjava at orgh commandParserparseQuerySubParserjava at orgh commandParserparseSelectUnionParserjava Here is an example where Cyrillic C is used instead of Latin in REATE keyword sql REATE TABLE table col VARCHAR No error is thrown which makes it difficult to find out why migration script is not applied Slick version is When i try to refresh my application running on sbt it seems like the connection pool is not releasing connections Here is the error debug comzaxxerhikaripoolHikariPool Cannot acquire connection from data source orgpostgresqlutilPSQLException The connection attempt failed at orgpostgresqlcorev ConnectionFactoryImplopenConnectionImplConnectionFactoryImpljava at orgpostgresqlcoreConnectionFactoryopenConnectionConnectionFactoryjava at orgpostgresqljdbcPgConnectioninitPgConnectionjava at orgpostgresqlDrivermakeConnectionDriverjava at orgpostgresqlDriverconnectDriverjava at comzaxxerhikariutilDriverDataSourcegetConnectionDriverDataSourcejava at comzaxxerhikariutilDriverDataSourcegetConnectionDriverDataSourcejava at comzaxxerhikaripoolPoolBasenewConnectionPoolBasejava at comzaxxerhikaripoolPoolBasenewPoolEntryPoolBasejava at comzaxxerhikaripoolHikariPoolcreatePoolEntryHikariPooljava Caused by javanetSocketException Bad file descriptor Write failed at javanetSocketOutputStreamsocketWrite Native Method at javanetSocketOutputStreamsocketWriteSocketOutputStreamjava at javanetSocketOutputStreamwriteSocketOutputStreamjava at javaioBufferedOutputStreamflushBufferBufferedOutputStreamjava at javaioBufferedOutputStreamflushBufferedOutputStreamjava at orgpostgresqlcorePGStreamflushPGStreamjava at orgpostgresqlcorev ConnectionFactoryImplsendStartupPacketConnectionFactoryImpljava at orgpostgresqlcorev ConnectionFactoryImpltryConnectConnectionFactoryImpljava at orgpostgresqlcorev ConnectionFactoryImplopenConnectionImplConnectionFactoryImpljava at orgpostgresqlcoreConnectionFactoryopenConnectionConnectionFactoryjava The config we use is this slickdbsdefault profile utilsMyPostgresProfile db url jdbcpostgresqllocalhost dbnamecurrentSchemaapp loggerLevelTRACE loggerFilelogpgsqllog connectTimeout socketTimeout tcpKeepAlivetrue sslmodedisable sslfalse propertiesdriver orgpostgresqlDriver user myuser password mypassword poolName mypoolname registerMbeans false connectionTimeout s connectionInitSql SELECT connectionTestQuery SELECT validationTimeout idleTimeout maxLifetime minimumIdle leakDetectionThreshold maximumPoolSize initializationFailTimeout which is then taken under by Hikari and it looks like this warn comzaxxerhikariHikariConfig The initializationFailFast propery is deprecated see initializationFailTimeout warn comzaxxerhikariHikariConfig app idleTimeout is close to or more than maxLifetime disabling it debug comzaxxerhikariHikariConfig app configuration debug comzaxxerhikariHikariConfig allowPoolSuspensionfalse debug comzaxxerhikariHikariConfig autoCommittrue debug comzaxxerhikariHikariConfig catalognone debug comzaxxerhikariHikariConfig connectionInitSqlSELECT debug comzaxxerhikariHikariConfig connectionTestQuerySELECT debug comzaxxerhikariHikariConfig connectionTimeout debug comzaxxerhikariHikariConfig dataSourcenone debug comzaxxerhikariHikariConfig dataSourceClassNamenone debug comzaxxerhikariHikariConfig dataSourceJNDInone debug comzaxxerhikariHikariConfig dataSourcePropertiespasswordmasked driverorgpostgresqlDriver debug comzaxxerhikariHikariConfig driverClassNamenone debug comzaxxerhikariHikariConfig healthCheckProperties debug comzaxxerhikariHikariConfig healthCheckRegistrynone debug comzaxxerhikariHikariConfig idleTimeout debug comzaxxerhikariHikariConfig initializationFailFastfalse debug comzaxxerhikariHikariConfig initializationFailTimeout debug comzaxxerhikariHikariConfig isolateInternalQueriesfalse debug comzaxxerhikariHikariConfig jdbc ConnectionTestfalse debug comzaxxerhikariHikariConfig jdbcUrljdbcpostgresqllocalhost mydbnamecurrentSchemaapp loggerLevelTRACE loggerFilelogpgsqllog connectTimeout socketTimeout tcpKeepAlivetrue sslmodedisable sslfalse debug comzaxxerhikariHikariConfig leakDetectionThreshold debug comzaxxerhikariHikariConfig maxLifetime debug comzaxxerhikariHikariConfig maximumPoolSize debug comzaxxerhikariHikariConfig metricRegistrynone debug comzaxxerhikariHikariConfig metricsTrackerFactorynone debug comzaxxerhikariHikariConfig minimumIdle debug comzaxxerhikariHikariConfig passwordmasked debug comzaxxerhikariHikariConfig poolNamemypoolname debug comzaxxerhikariHikariConfig readOnlyfalse debug comzaxxerhikariHikariConfig registerMbeansfalse debug comzaxxerhikariHikariConfig scheduledExecutornone debug comzaxxerhikariHikariConfig scheduledExecutorServiceinternal debug comzaxxerhikariHikariConfig schemanone debug comzaxxerhikariHikariConfig threadFactoryinternal debug comzaxxerhikariHikariConfig transactionIsolationdefault debug comzaxxerhikariHikariConfig usernamemyuser debug comzaxxerhikariHikariConfig validationTimeout And its always always happening after refresh No matter what I set in maxConnections numThreads etc etc etc Any idea Currently on play with playslick I ve been running into an issue during load testing where the app is consuming tons of db connections from the pool and not returning them I have narrowed it down to the use of transactionally but have still not been able to pin point the exact cause As proof of this when I increase the db connection pool to our maxconnections is I can hit up to k rpm on one server But with a pool of only it almost instantly crashes under the same load with the connections timing out waiting for a connection from the pool I can confirm that the database transactions are happening rapidly When I enable hikari connection leak detection I can see that some connections are taking s to be returned yet the database is showing nothing over seconds From everything I ve read we should be able to configure this to run with a much smaller pool When I remove the use of transactionally the behaviour of the pool returns to normal Here are some logs with pool of and transactionally enabled comzaxxerhikaripoolHikariPool db Timeout failure stats total active idle waiting with pool of and transactionally enabled comzaxxerhikaripoolHikariPool db After cleanup stats total active idle waiting Some errors with pool of and transactionally enabled javasqlSQLTransientConnectionException db Connection is not available request timed out after ms at comzaxxerhikaripoolHikariPoolcreateTimeoutExceptionHikariPooljava at comzaxxerhikaripoolHikariPoolgetConnectionHikariPooljava at comzaxxerhikaripoolHikariPoolgetConnectionHikariPooljava at comzaxxerhikariHikariDataSourcegetConnectionHikariDataSourcejava at slickjdbchikaricpHikariCPJdbcDataSourcecreateConnectionHikariCPJdbcDataSourcescala at slickjdbcJdbcBackendBaseSessionJdbcBackendscala at slickjdbcJdbcBackendDatabaseDefcreateSessionJdbcBackendscala at slickjdbcJdbcBackendDatabaseDefcreateSessionJdbcBackendscala at slickbasicBasicBackendDatabaseDefacquireSessionBasicBackendscala at slickbasicBasicBackendDatabaseDefacquireSessionBasicBackendscala NewRelic is also showing these requests spending the majority of their time waiting on comzaxxerhikariHikariDataSourcegetConnection Here is an example of the code that is causing the issue def insertIfNotExistspartner Partner accountId String DBIO Account accounts filteraccountid accountId filterpartner partner resultheadOptionflatMap case Someaccount DBIOsuccessfulaccount noop case accountsreturningaccountsmapidintoaccount id accountcopyid Someid AccountNone partner accountId def createWithDeviceIfNotExistspartner Partner accountId String deviceId String Future Device dbrun insertIfNotExistspartner accountIdflatMap account devicesinsertIfNotExistsdeviceId accountidget this looks exactly like the insertIfNotExists above transactionally I am unable to reproduce this at low load or locally by manually causing the queries to fail But something about using transactionally here is causing connections to not be returned to the pool for a very long time There are reports that Previously reported leaked connection commysqljdbcJDBC Connection acb e was returned to the pool unleaked but often after several minutes Evolutions fail without error when using special characters like It just keeps asking to run the evolution I have included a reproduction script below Now Ive tried to change the character set of the playevolutions table to utf but as that doesnt make any difference at all Im assuming this is due to something in the code somewhere Furthermore the special character needs to be removed entirely from the script Commenting out is not enough Play version Playslick version Mysqlconnectorjava version Reproduction evolution script sql Ups CREATE TABLE whatever text VARCHAR NOT NULL ENGINEInnoDB DEFAULT CHARSETutf INSERT INTO whatever text VALUES Remove to succeed INSERT INTO whatever text VALUES o Downs DROP TABLE IF EXISTS whatever I had a tough time getting the computer database example to run Ive seen issues about this one here and one here it would be nice especially as new comers to Scala and the Play framework to see working examples in their own project to hack around with and understand Ive already got a separate computer database example running here This line seems to give error when running sample play app Heres how you can reproduce the error git clone gitgithubcomplayframeworkplayslickgit cd basic sbt run info Updated file tmpplayslicksamplesbasicprojectbuildproperties set sbtversion to tmpplayslicksamplesbasicbuildsbt error not found value PlayKeys PlayKeysplayOmnidoc false error Type error in expression Project loading failed retry quit last or ignore NB Offline evolutions are those without a running application Currently DefaultSlickApi has two dependencies that are hard to satisfy in a nonapplication context environment Environment and lifecycle ApplicationLifecycle environment is a bogus dependency it is unused and should be dropped lifecycle implements behavior that is pretty easy to ignore if theres no lifecycle just dont add the stop hooks This dependency should either be made into a Option ApplicationLifecycle dont know if thats doable with generic javaxinject for both DefaultSlickApi and DatabaseConfigFactory or DefaultSlickApiDatabaseConfigFactory should extend an OfflineSlickApi does the same thing but without the stop hook In this case the user would need some other way to initiate a shutdown Hi there I am runing Play and playslick When I run my inetgration tests I am getting the following exception Reverting back to stops it A needed class was not found This could be due to an error in your runpath Missing class slickliftedMappedProjection javalangNoClassDefFoundError slickliftedMappedProjection at daosPendingInviteDaoPendingInviteTabletimesPendingInviteDaoscala at slickliftedAbstractTabletoNodeAbstractTablescala at slickliftedRepShapetoNodeShapescala at slickliftedRepShapetoNodeShapescala at slickliftedShapedValuetoNodeShapescala at slickliftedTableQuerytoNodelzycomputeQueryscala at slickliftedTableQuerytoNodeQueryscala at slickjdbcJdbcProfileAPIclassqueryDeleteActionExtensionMethodsJdbcProfilescala at slickjdbcJdbcProfileanon queryDeleteActionExtensionMethodsJdbcProfilescala at daosPendingInviteDaodeleteAllPendingInviteDaoscala at helperIntegrationHelperWithDBanonfun applymcVspIntegrationHelperscala at helperIntegrationHelperWithDBanonfun applyIntegrationHelperscala at helperIntegrationHelperWithDBanonfun applyIntegrationHelperscala at orgscalatestBeforeAndAfterclassrunTestBeforeAndAfterscala at servicesUserServiceSpecrunTestUserServiceSpecscala at orgscalatestWordSpecLikeanonfunrunTests applyWordSpecLikescala at orgscalatestWordSpecLikeanonfunrunTests applyWordSpecLikescala at orgscalatestSuperEngineanonfuntraverseSubNodes applyEnginescala at orgscalatestSuperEngineanonfuntraverseSubNodes applyEnginescala at scalacollectionimmutableListforeachListscala at orgscalatestSuperEnginetraverseSubNodes Enginescala at orgscalatestSuperEngineorgscalatestSuperEnginerunTestsInBranchEnginescala at orgscalatestSuperEngineanonfuntraverseSubNodes applyEnginescala at orgscalatestSuperEngineanonfuntraverseSubNodes applyEnginescala at scalacollectionimmutableListforeachListscala at orgscalatestSuperEnginetraverseSubNodes Enginescala at orgscalatestSuperEngineorgscalatestSuperEnginerunTestsInBranchEnginescala at orgscalatestSuperEnginerunTestsImplEnginescala at orgscalatestWordSpecLikeclassrunTestsWordSpecLikescala at orgscalatestWordSpecrunTestsWordSpecscala at orgscalatestSuiteclassrunSuitescala at orgscalatestWordSpecorgscalatestWordSpecLikesuperrunWordSpecscala at orgscalatestWordSpecLikeanonfunrun applyWordSpecLikescala at orgscalatestWordSpecLikeanonfunrun applyWordSpecLikescala at orgscalatestSuperEnginerunImplEnginescala at orgscalatestWordSpecLikeclassrunWordSpecLikescala at servicesUserServiceSpecorgscalatestplusplayOneAppPerSuitesuperrunUserServiceSpecscala at orgscalatestplusplayOneAppPerSuiteclassrunOneAppPerSuitescala at servicesUserServiceSpecorgscalatestBeforeAndAftersuperrunUserServiceSpecscala at orgscalatestBeforeAndAfterclassrunBeforeAndAfterscala at servicesUserServiceSpecrunUserServiceSpecscala at orgscalatesttoolsSuiteRunnerrunSuiteRunnerscala at orgscalatesttoolsRunneranonfundoRunRunRunDaDoRunRun applyRunnerscala at orgscalatesttoolsRunneranonfundoRunRunRunDaDoRunRun applyRunnerscala at scalacollectionimmutableListforeachListscala at orgscalatesttoolsRunnerdoRunRunRunDaDoRunRunRunnerscala at orgscalatesttoolsRunneranonfunrunOptionallyWithPassFailReporter applyRunnerscala at orgscalatesttoolsRunneranonfunrunOptionallyWithPassFailReporter applyRunnerscala at orgscalatesttoolsRunnerwithClassLoaderAndDispatchReporterRunnerscala at orgscalatesttoolsRunnerrunOptionallyWithPassFailReporterRunnerscala at orgscalatesttoolsRunnerrunRunnerscala at orgscalatesttoolsRunnerrunRunnerscala at orgjetbrainspluginsscalatestingSupportscalaTestScalaTestRunnerrunScalaTest ScalaTestRunnerjava at orgjetbrainspluginsscalatestingSupportscalaTestScalaTestRunnermainScalaTestRunnerjava Caused by javalangClassNotFoundException slickliftedMappedProjection at javanetURLClassLoaderfindClassURLClassLoaderjava at javalangClassLoaderloadClassClassLoaderjava at sunmiscLauncherAppClassLoaderloadClassLauncherjava at javalangClassLoaderloadClassClassLoaderjava more And line that is referencing in the exception is scala def idemailinviteTokenuserId createdAt PendingInvitetupled PendingInviteunapply 