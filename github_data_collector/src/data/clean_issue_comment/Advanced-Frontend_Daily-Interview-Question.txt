 script start async start async promise promise script end async end setTimeout let test ArrayprototypemyFlat function const result thisforEachitem if typeof item object resultpushitem else resultpushArrayprototypemyFlatapplyitem return result consolelogtestmyFlat abc value abc abc bcd def value abc children value bcd children value def JS API 