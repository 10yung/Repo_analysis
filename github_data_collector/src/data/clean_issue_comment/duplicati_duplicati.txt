The list folder was not being written to dindex files when performing a compact operation After the data blocks have been moved to a new volume the blocklists are now read from the database and written to the new dindex file Fixes This adds a simple test for recovering files using the RecoveryTool We verify that the backend files can be downloaded decrypted and used to restore the source files to a different location In doing so we discovered an instance of HashLookupHelper that wasnt disposed that kept an open FileStream to the indextxt file x I have searched open and closed issues for duplicates Environment info Duplicati version beta Operating system Windows Backend local Description When restoring files if the drive containing the backup is not connected the restore finishes with a success message even tho no files were actually restored A separate warning pop up appears that says the backup doesnt exist but since errors like that happen from time to time I associate them with backup failures and it wasnt clear that it was related to the restore failure Steps to reproduce Backup something to a drive Disconnect that drive Attempt to restore from that backup Actual result Duplicati fails to restore any files and yet gives a success message Expected result No success message should appear and instead a failure message should appear Please search to see if an issue has already been created for your report Replace the empty checkbox below with a checked one x if you already searched for duplicate bugs x I have searched open and closed issues for duplicates Environment info Duplicati version canary Operating system Archlinux arch Backend local mount point of a smb share through systemd automount backup on mntspeedportBackup type cifs rwrelatimevers cachestrictusernameXXXdomainXXXuid forceuidgid forcegidaddr softunixposixpathsserverinomapposixaclrsize wsize bsize echointerval actimeo Description I ran a backup sync and duplicati failed somehow to finish uploading the file Steps to reproduce unknown Actual result The file is not saved correctly Expected result Try to redo the specific file handling Give an opportunity to the user to fix this by rerun the failed task again Give an opportunity to the user to fix this by rollback the failed task Screenshots Debug log bugreportzip While testing starting and stopping a backup the Unexpected difference in fileset exception would sometimes occur The exception could occur due to the existing delete for FilesetEntry deleting based on volume ids and the bsIdsSubQuery in LocalDatabase RemoveRemoteVolumes returning other BlocksetIds that should also be deleted FilesetEntry would then have a higher count of rows than what would be returned by the LEFT OUTER JOINS on all of the other tables in VerifyConsistency since more rows had been deleted from FileLookup Thank you for taking the time to submit an issue using this template By following the instructions and filling out the sections below you will help the developers get the necessary information to fix your issue You may remove sections that arent relevant to your particular case You can also preview your report before submitting it Love Duplicati Please consider supporting our collective at Please search to see if an issue has already been created for your report Replace the empty checkbox below with a checked one x if you already searched for duplicate bugs x I have searched open and closed issues for duplicates Environment info Please include some relevant information about your environment For Backend please indicate the backup destination eg Amazon S OneDrive FTP WebDAV local Duplicati version to were the ends of the tested range Looks like a very old bug Operating system Windows Version Backend Local folder Description Describe the issue that you are experiencing below Compact may fail to write the list folder into the newly created dindex file created by a dblock merge I think the files in this folder are performanceenhancers controlled by indexfilepolicy so the dlist file blocklists reference can read the blocklist from the dindex file without downloading its dblock Downloading dblock files for DB rebuild in Recreate or direct restore seems to go against the design intent slows things down and might get questions or complaints from people who observe carefully Repair is downloading dblock files Note that this is a far more subtle performance reduction than the alldblocksdownloaded situation Database recreate desperately needs improvement has one person who might be heading for downloading all dblocks and one who might be hitting bad dindex files See technical remarks there Steps to reproduce List the steps to reproduce the bug if possible Prepare four test files which are variations of a text character file intended to force all files to get a blocklist and all blocks to be different Line endings shouldnt matter My notepad had none moretxt moretxt moretxt moretxt Backup moretxt and moretxt using blocksize KByte and keepversions also without encryption and with noautocompact true for stepbystep view and ease of watching dindex Add moretxt and moretxt into backup via checkbox editing or move into folder then backup Remove moretxt and moretxt from the backup then backup Uncheck is slightly tidier than a deletefromfolder because it wont even need to output a dblock to contain folder info update Compact This merges the two halfempty dblock files into a new dblock and its new dindex file For Actual result describe what happens after you run the steps above ie buggy behavior For Expected result describe what should happen after you run the steps above ie corrected behavior Actual result New dindex file has no list folder Expected result New dindex file has list folder with two files containing the blocklists for moretxt and moretxt Im not sure if youll notice but if youre looking very carefully in the DB and filenames youll see that the list folder filenames are not exactly the Base encoding of the hash but a charactersafe variant One way to try to spot this problem in the wild is to look for compact in logs then look at the dindex from that time Or look for dindex files with no list folder then see if it was by compact Without known sources though its hard to know whether no list folder is from all small files thus no blocklists needed Screenshots Make it easier to get your point across with screenshots You can drag drop or paste your images below Debug log Posting a debug log helps the developers find and fix your particular issue more easily Please wrap your code in code blocks with triple backticks to increase readability This fixes a bug introduced in pull request that broke the repair operation when dindex files were missing and no encryption was used Since we are keeping around a reference to the IndexVolumeWriter and BlockVolumeWriter instances we cannot wrap their usages in using statements This also adds a test to verify the behavior This fixes issue Thank you for taking the time to submit an issue using this template By following the instructions and filling out the sections below you will help the developers get the necessary information to fix your issue You may remove sections that arent relevant to your particular case You can also preview your report before submitting it Love Duplicati Please consider supporting our collective at Please search to see if an issue has already been created for your report Replace the empty checkbox below with a checked one x if you already searched for duplicate bugs x I have searched open and closed issues for duplicates Environment info Please include some relevant information about your environment For Backend please indicate the backup destination eg Amazon S OneDrive FTP WebDAV local Duplicati version Canary Operating system Windows Version Backend Local folder Description Describe the issue that you are experiencing below Missing dindex file Repair fails Steps to reproduce List the steps to reproduce the bug if possible Make a backup of a short text file using no encryption tempdirC tmp optional for privacy Delete the dindex file Do database Repair This worked on Canary and earlier and was a rare recovery method For Actual result describe what happens after you run the steps above ie buggy behavior For Expected result describe what should happen after you run the steps above ie corrected behavior Actual result Missing dindex file is not replaced After about a minute of failed uploads to folder popup error Path cannot be null Parameter name path There is no job log made but If you look in About Show log Stored you can see a stack trace SystemArgumentNullException Path cannot be null Parameter name path at DuplicatiLibraryMainBackendManagerWaitForCompleteLocalDatabase db IDbTransaction transation at DuplicatiLibraryMainOperationRepairHandlerRunRepairRemote at DuplicatiLibraryMainOperationRepairHandlerRunIFilter filter at DuplicatiLibraryMainControllerRunAction T T result String paths IFilter filter Action method at DuplicatiLibraryMainControllerRepairIFilter filter at DuplicatiServerRunnerRunIRunnerData data Boolean fromQueue Theres a side oddity on repeated Repair after the initial failure Sometimes it believes all is fine even though its still missing a dindex Sometimes it actually replaces dindex If in doubt restart Duplicati This has also at least once maybe on different source data errored about a Temp file it cant locate Ensure that dindex references correct dblock file after renames added TemporaryIndexVolume and might be relevant is one of the few places where dindex file changes made changelog Fixed a retry error where uploaded dindexfiles would reference nonexisting dblock files thanks warwickmm This was first seen on Experimental while wondering whether the dindex file loss of list folder mentioned in Repair is downloading dblock files can be fixed by delete and rebuild can do it Expected result Missing dindex file replaced with one built from DB You can keep on deleting it and rebuilding Screenshots Make it easier to get your point across with screenshots You can drag drop or paste your images below Debug log Posting a debug log helps the developers find and fix your particular issue more easily Please wrap your code in code blocks with triple backticks to increase readability Repair profiling log with profilealldatabasequeriestrue InformationDuplicatiLibraryMainControllerStartingOperation The operation Repair has started ProfilingTimerBeginDuplicatiLibraryMainControllerRunRepair Starting Running Repair ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt Starting ExecuteScalarInt INSERT INTO Operation Description Timestamp VALUES Repair SELECT lastinsertrowid ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt ExecuteScalarInt INSERT INTO Operation Description Timestamp VALUES Repair SELECT lastinsertrowid took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteNonQuery Starting ExecuteNonQuery PRAGMA optimize ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteNonQuery ExecuteNonQuery PRAGMA optimize took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt Starting ExecuteScalarInt INSERT INTO Operation Description Timestamp VALUES Repair SELECT lastinsertrowid ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt ExecuteScalarInt INSERT INTO Operation Description Timestamp VALUES Repair SELECT lastinsertrowid took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader Starting ExecuteReader SELECT Key Value FROM Configuration ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader ExecuteReader SELECT Key Value FROM Configuration took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader Starting ExecuteReader SELECT Key Value FROM Configuration ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader ExecuteReader SELECT Key Value FROM Configuration took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader Starting ExecuteReader SELECT Key Value FROM Configuration ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader ExecuteReader SELECT Key Value FROM Configuration took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt Starting ExecuteScalarInt SELECT COUNT FROM SELECT DISTINCT c FROM SELECT COUNT AS C FROM SELECT DISTINCT BlocksetID FROM Metadataset UNION SELECT COUNT AS C FROM Metadataset ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt ExecuteScalarInt SELECT COUNT FROM SELECT DISTINCT c FROM SELECT COUNT AS C FROM SELECT DISTINCT BlocksetID FROM Metadataset UNION SELECT COUNT AS C FROM Metadataset took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt Starting ExecuteScalarInt SELECT COUNT FROM SELECT PrefixID Path BlocksetID MetadataID COUNT as Duplicates FROM FileLookup GROUP BY PrefixID Path BlocksetID MetadataID WHERE Duplicates ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt ExecuteScalarInt SELECT COUNT FROM SELECT PrefixID Path BlocksetID MetadataID COUNT as Duplicates FROM FileLookup GROUP BY PrefixID Path BlocksetID MetadataID WHERE Duplicates took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt Starting ExecuteScalarInt SELECT COUNT FROM SELECT FROM SELECT BlocksetID Index COUNT AS EC FROM BlocklistHash GROUP BY BlocksetID Index WHERE EC ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt ExecuteScalarInt SELECT COUNT FROM SELECT FROM SELECT BlocksetID Index COUNT AS EC FROM BlocklistHash GROUP BY BlocksetID Index WHERE EC took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt Starting ExecuteScalarInt SELECT COUNT FROM SELECT FROM SELECT NBlocksetID NBlockCount AS BlocklistHashCountExpected CASE WHEN GBlocklistHashCount IS NULL THEN ELSE GBlocklistHashCount END AS BlocklistHashCountActual FROM SELECT BlocksetID COUNT AS BlockCount FROM BlocksetEntry GROUP BY BlocksetID N LEFT OUTER JOIN SELECT BlocksetID COUNT AS BlocklistHashCount FROM BlocklistHash GROUP BY BlocksetID G ON NBlocksetID GBlocksetID WHERE NBlockCount WHERE BlocklistHashCountExpected BlocklistHashCountActual ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt ExecuteScalarInt SELECT COUNT FROM SELECT FROM SELECT NBlocksetID NBlockCount AS BlocklistHashCountExpected CASE WHEN GBlocklistHashCount IS NULL THEN ELSE GBlocklistHashCount END AS BlocklistHashCountActual FROM SELECT BlocksetID COUNT AS BlockCount FROM BlocksetEntry GROUP BY BlocksetID N LEFT OUTER JOIN SELECT BlocksetID COUNT AS BlocklistHashCount FROM BlocklistHash GROUP BY BlocksetID G ON NBlocksetID GBlocksetID WHERE NBlockCount WHERE BlocklistHashCountExpected BlocklistHashCountActual took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteNonQuery Starting ExecuteNonQuery PRAGMA optimize ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteNonQuery ExecuteNonQuery PRAGMA optimize took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt Starting ExecuteScalarInt INSERT INTO Operation Description Timestamp VALUES Repair SELECT lastinsertrowid ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt ExecuteScalarInt INSERT INTO Operation Description Timestamp VALUES Repair SELECT lastinsertrowid took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader Starting ExecuteReader SELECT Key Value FROM Configuration ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader ExecuteReader SELECT Key Value FROM Configuration took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader Starting ExecuteReader SELECT Key Value FROM Configuration ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader ExecuteReader SELECT Key Value FROM Configuration took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt Starting ExecuteScalarInt SELECT COUNT FROM Block WHERE Size ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt ExecuteScalarInt SELECT COUNT FROM Block WHERE Size took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader Starting ExecuteReader SELECT Key Value FROM Configuration ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader ExecuteReader SELECT Key Value FROM Configuration took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader Starting ExecuteReader SELECT Key Value FROM Configuration ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader ExecuteReader SELECT Key Value FROM Configuration took ProfilingTimerBeginDuplicatiLibraryMainBackendManagerRemoteOperationList Starting RemoteOperationList InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event List Started InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event List Completed bytes ProfilingTimerFinishedDuplicatiLibraryMainBackendManagerRemoteOperationList RemoteOperationList took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader Starting ExecuteReader SELECT ID IsFullBackup Timestamp FROM Fileset ORDER BY Timestamp DESC ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader ExecuteReader SELECT ID IsFullBackup Timestamp FROM Fileset ORDER BY Timestamp DESC took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader Starting ExecuteReader SELECT DISTINCT Name State FROM Remotevolume WHERE Name IN SELECT Name FROM Remotevolume WHERE State IN Deleted Deleting AND NOT State IN Deleted Deleting ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader ExecuteReader SELECT DISTINCT Name State FROM Remotevolume WHERE Name IN SELECT Name FROM Remotevolume WHERE State IN Deleted Deleting AND NOT State IN Deleted Deleting took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader Starting ExecuteReader SELECT Name Hash Size FROM RemoteVolume WHERE ID IN SELECT BlockVolumeID FROM IndexBlockLink WHERE IndexVolumeID IN SELECT ID FROM RemoteVolume WHERE Name duplicatiiba b f b a f bd c dindexzip ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader ExecuteReader SELECT Name Hash Size FROM RemoteVolume WHERE ID IN SELECT BlockVolumeID FROM IndexBlockLink WHERE IndexVolumeID IN SELECT ID FROM RemoteVolume WHERE Name duplicatiiba b f b a f bd c dindexzip took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt Starting ExecuteScalarInt SELECT ID FROM Remotevolume WHERE Name duplicatib a f f aa b c f c edblockzip ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt ExecuteScalarInt SELECT ID FROM Remotevolume WHERE Name duplicatib a f f aa b c f c edblockzip took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader Starting ExecuteReader SELECT DISTINCT Hash Size FROM Block WHERE VolumeID ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader ExecuteReader SELECT DISTINCT Hash Size FROM Block WHERE VolumeID took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader Starting ExecuteReader SELECT AHash CHash FROM SELECT BlocklistHashBlocksetID BlockHash FROM BlocklistHashBlock WHERE BlocklistHashHash BlockHash AND BlockVolumeID A BlocksetEntry B Block C WHERE BBlocksetID ABlocksetID AND BIndex AIndex AND BIndex AIndex AND CID BBlockID ORDER BY ABlocksetID BIndex ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteReader ExecuteReader SELECT AHash CHash FROM SELECT BlocklistHashBlocksetID BlockHash FROM BlocklistHashBlock WHERE BlocklistHashHash BlockHash AND BlockVolumeID A BlocksetEntry B Block C WHERE BBlocksetID ABlocksetID AND BIndex AIndex AND BIndex AIndex AND CID BBlockID ORDER BY ABlocksetID BIndex took ProfilingTimerBeginDuplicatiLibraryMainBackendManagerRemoteOperationPut Starting RemoteOperationPut InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event Put Started duplicatiiba b f b a f bd c dindexzip bytes ProfilingTimerFinishedDuplicatiLibraryMainBackendManagerRemoteOperationPut RemoteOperationPut took RetryDuplicatiLibraryMainBackendManagerRetryPut Operation Put with file duplicatiiba b f b a f bd c dindexzip attempt of failed with message Path cannot be null Parameter name path SystemArgumentNullException Path cannot be null Parameter name path at SystemIOFileStreamInitString path FileMode mode FileAccess access Int rights Boolean useRights FileShare share Int bufferSize FileOptions options SECURITYATTRIBUTES secAttrs String msgPath Boolean bFromProxy Boolean useLongPath Boolean checkHost at SystemIOFileStreamctorString path FileMode mode FileAccess access FileShare share at DuplicatiLibraryMainBackendManagerDoPutFileEntryItem item at DuplicatiLibraryMainBackendManagerThreadRun InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event Put Retrying duplicatiiba b f b a f bd c dindexzip bytes InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event Put Rename duplicatiiba b f b a f bd c dindexzip bytes InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event Put Rename duplicatii e c f cd ae f cf ebfedindexzip bytes InformationDuplicatiLibraryMainBackendManagerRenameRemoteTargetFile Renaming duplicatiiba b f b a f bd c dindexzip to duplicatii e c f cd ae f cf ebfedindexzip ProfilingTimerBeginDuplicatiLibraryMainBackendManagerRemoteOperationPut Starting RemoteOperationPut InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event Put Started duplicatii e c f cd ae f cf ebfedindexzip bytes ProfilingTimerFinishedDuplicatiLibraryMainBackendManagerRemoteOperationPut RemoteOperationPut took RetryDuplicatiLibraryMainBackendManagerRetryPut Operation Put with file duplicatii e c f cd ae f cf ebfedindexzip attempt of failed with message Path cannot be null Parameter name path SystemArgumentNullException Path cannot be null Parameter name path at SystemIOFileStreamInitString path FileMode mode FileAccess access Int rights Boolean useRights FileShare share Int bufferSize FileOptions options SECURITYATTRIBUTES secAttrs String msgPath Boolean bFromProxy Boolean useLongPath Boolean checkHost at SystemIOFileStreamctorString path FileMode mode FileAccess access FileShare share at DuplicatiLibraryMainBackendManagerDoPutFileEntryItem item at DuplicatiLibraryMainBackendManagerThreadRun InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event Put Retrying duplicatii e c f cd ae f cf ebfedindexzip bytes InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event Put Rename duplicatii e c f cd ae f cf ebfedindexzip bytes InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event Put Rename duplicatii fbf ed c e a fa ddindexzip bytes InformationDuplicatiLibraryMainBackendManagerRenameRemoteTargetFile Renaming duplicatii e c f cd ae f cf ebfedindexzip to duplicatii fbf ed c e a fa ddindexzip ProfilingTimerBeginDuplicatiLibraryMainBackendManagerRemoteOperationPut Starting RemoteOperationPut InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event Put Started duplicatii fbf ed c e a fa ddindexzip bytes ProfilingTimerFinishedDuplicatiLibraryMainBackendManagerRemoteOperationPut RemoteOperationPut took RetryDuplicatiLibraryMainBackendManagerRetryPut Operation Put with file duplicatii fbf ed c e a fa ddindexzip attempt of failed with message Path cannot be null Parameter name path SystemArgumentNullException Path cannot be null Parameter name path at SystemIOFileStreamInitString path FileMode mode FileAccess access Int rights Boolean useRights FileShare share Int bufferSize FileOptions options SECURITYATTRIBUTES secAttrs String msgPath Boolean bFromProxy Boolean useLongPath Boolean checkHost at SystemIOFileStreamctorString path FileMode mode FileAccess access FileShare share at DuplicatiLibraryMainBackendManagerDoPutFileEntryItem item at DuplicatiLibraryMainBackendManagerThreadRun InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event Put Retrying duplicatii fbf ed c e a fa ddindexzip bytes InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event Put Rename duplicatii fbf ed c e a fa ddindexzip bytes InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event Put Rename duplicatiiba c e b f dd f d e dindexzip bytes InformationDuplicatiLibraryMainBackendManagerRenameRemoteTargetFile Renaming duplicatii fbf ed c e a fa ddindexzip to duplicatiiba c e b f dd f d e dindexzip ProfilingTimerBeginDuplicatiLibraryMainBackendManagerRemoteOperationPut Starting RemoteOperationPut InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event Put Started duplicatiiba c e b f dd f d e dindexzip bytes ProfilingTimerFinishedDuplicatiLibraryMainBackendManagerRemoteOperationPut RemoteOperationPut took RetryDuplicatiLibraryMainBackendManagerRetryPut Operation Put with file duplicatiiba c e b f dd f d e dindexzip attempt of failed with message Path cannot be null Parameter name path SystemArgumentNullException Path cannot be null Parameter name path at SystemIOFileStreamInitString path FileMode mode FileAccess access Int rights Boolean useRights FileShare share Int bufferSize FileOptions options SECURITYATTRIBUTES secAttrs String msgPath Boolean bFromProxy Boolean useLongPath Boolean checkHost at SystemIOFileStreamctorString path FileMode mode FileAccess access FileShare share at DuplicatiLibraryMainBackendManagerDoPutFileEntryItem item at DuplicatiLibraryMainBackendManagerThreadRun InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event Put Retrying duplicatiiba c e b f dd f d e dindexzip bytes InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event Put Rename duplicatiiba c e b f dd f d e dindexzip bytes InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event Put Rename duplicatiidc ea a cc a d a d dindexzip bytes InformationDuplicatiLibraryMainBackendManagerRenameRemoteTargetFile Renaming duplicatiiba c e b f dd f d e dindexzip to duplicatiidc ea a cc a d a d dindexzip ProfilingTimerBeginDuplicatiLibraryMainBackendManagerRemoteOperationPut Starting RemoteOperationPut InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event Put Started duplicatiidc ea a cc a d a d dindexzip bytes ProfilingTimerFinishedDuplicatiLibraryMainBackendManagerRemoteOperationPut RemoteOperationPut took RetryDuplicatiLibraryMainBackendManagerRetryPut Operation Put with file duplicatiidc ea a cc a d a d dindexzip attempt of failed with message Path cannot be null Parameter name path SystemArgumentNullException Path cannot be null Parameter name path at SystemIOFileStreamInitString path FileMode mode FileAccess access Int rights Boolean useRights FileShare share Int bufferSize FileOptions options SECURITYATTRIBUTES secAttrs String msgPath Boolean bFromProxy Boolean useLongPath Boolean checkHost at SystemIOFileStreamctorString path FileMode mode FileAccess access FileShare share at DuplicatiLibraryMainBackendManagerDoPutFileEntryItem item at DuplicatiLibraryMainBackendManagerThreadRun InformationDuplicatiLibraryMainBasicResultsBackendEvent Backend event Put Failed duplicatiidc ea a cc a d a d dindexzip bytes ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteNonQuery Starting ExecuteNonQuery UPDATE Remotevolume SET Name duplicatii e c f cd ae f cf ebfedindexzip WHERE Name duplicatiiba b f b a f bd c dindexzip ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteNonQuery ExecuteNonQuery UPDATE Remotevolume SET Name duplicatii e c f cd ae f cf ebfedindexzip WHERE Name duplicatiiba b f b a f bd c dindexzip took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalar Starting ExecuteScalar SELECT Type FROM Remotevolume WHERE Name duplicatii e c f cd ae f cf ebfedindexzip ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalar ExecuteScalar SELECT Type FROM Remotevolume WHERE Name duplicatii e c f cd ae f cf ebfedindexzip took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt Starting ExecuteScalarInt INSERT INTO Remotevolume OperationID Name Type State Size VerificationCount DeleteGraceTime VALUES duplicatiiba b f b a f bd c dindexzip Index Deleting SELECT lastinsertrowid ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt ExecuteScalarInt INSERT INTO Remotevolume OperationID Name Type State Size VerificationCount DeleteGraceTime VALUES duplicatiiba b f b a f bd c dindexzip Index Deleting SELECT lastinsertrowid took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteNonQuery Starting ExecuteNonQuery UPDATE Remotevolume SET Name duplicatii fbf ed c e a fa ddindexzip WHERE Name duplicatii e c f cd ae f cf ebfedindexzip ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteNonQuery ExecuteNonQuery UPDATE Remotevolume SET Name duplicatii fbf ed c e a fa ddindexzip WHERE Name duplicatii e c f cd ae f cf ebfedindexzip took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalar Starting ExecuteScalar SELECT Type FROM Remotevolume WHERE Name duplicatii fbf ed c e a fa ddindexzip ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalar ExecuteScalar SELECT Type FROM Remotevolume WHERE Name duplicatii fbf ed c e a fa ddindexzip took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt Starting ExecuteScalarInt INSERT INTO Remotevolume OperationID Name Type State Size VerificationCount DeleteGraceTime VALUES duplicatii e c f cd ae f cf ebfedindexzip Index Deleting SELECT lastinsertrowid ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt ExecuteScalarInt INSERT INTO Remotevolume OperationID Name Type State Size VerificationCount DeleteGraceTime VALUES duplicatii e c f cd ae f cf ebfedindexzip Index Deleting SELECT lastinsertrowid took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteNonQuery Starting ExecuteNonQuery UPDATE Remotevolume SET Name duplicatiiba c e b f dd f d e dindexzip WHERE Name duplicatii fbf ed c e a fa ddindexzip ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteNonQuery ExecuteNonQuery UPDATE Remotevolume SET Name duplicatiiba c e b f dd f d e dindexzip WHERE Name duplicatii fbf ed c e a fa ddindexzip took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalar Starting ExecuteScalar SELECT Type FROM Remotevolume WHERE Name duplicatiiba c e b f dd f d e dindexzip ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalar ExecuteScalar SELECT Type FROM Remotevolume WHERE Name duplicatiiba c e b f dd f d e dindexzip took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt Starting ExecuteScalarInt INSERT INTO Remotevolume OperationID Name Type State Size VerificationCount DeleteGraceTime VALUES duplicatii fbf ed c e a fa ddindexzip Index Deleting SELECT lastinsertrowid ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt ExecuteScalarInt INSERT INTO Remotevolume OperationID Name Type State Size VerificationCount DeleteGraceTime VALUES duplicatii fbf ed c e a fa ddindexzip Index Deleting SELECT lastinsertrowid took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteNonQuery Starting ExecuteNonQuery UPDATE Remotevolume SET Name duplicatiidc ea a cc a d a d dindexzip WHERE Name duplicatiiba c e b f dd f d e dindexzip ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteNonQuery ExecuteNonQuery UPDATE Remotevolume SET Name duplicatiidc ea a cc a d a d dindexzip WHERE Name duplicatiiba c e b f dd f d e dindexzip took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalar Starting ExecuteScalar SELECT Type FROM Remotevolume WHERE Name duplicatiidc ea a cc a d a d dindexzip ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalar ExecuteScalar SELECT Type FROM Remotevolume WHERE Name duplicatiidc ea a cc a d a d dindexzip took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt Starting ExecuteScalarInt INSERT INTO Remotevolume OperationID Name Type State Size VerificationCount DeleteGraceTime VALUES duplicatiiba c e b f dd f d e dindexzip Index Deleting SELECT lastinsertrowid ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteScalarInt ExecuteScalarInt INSERT INTO Remotevolume OperationID Name Type State Size VerificationCount DeleteGraceTime VALUES duplicatiiba c e b f dd f d e dindexzip Index Deleting SELECT lastinsertrowid took ProfilingTimerBeginDuplicatiLibraryMainDatabaseExtensionMethodsExecuteNonQuery Starting ExecuteNonQuery PRAGMA optimize ProfilingTimerFinishedDuplicatiLibraryMainDatabaseExtensionMethodsExecuteNonQuery ExecuteNonQuery PRAGMA optimize took ProfilingTimerFinishedDuplicatiLibraryMainControllerRunRepair Running Repair took Please search to see if an issue has already been created for your report Replace the empty checkbox below with a checked one x if you already searched for duplicate bugs x I have searched open and closed issues for duplicates Environment info Duplicati version experimental Operating system Windows Pro Backend Local Minio version RELEASE T Z Description Describe the issue that you are experiencing below Denied access to System Volume Information is logged as a Warning Related to the old VSS access denied for System Volume Information mentioned in the merged Fix default filters in server UI Steps to reproduce List the steps to reproduce the bug if possible Create or edit a backup in WebGUI Select a entire partion to backup eg D Start backup For Actual result describe what happens after you run the steps above ie buggy behavior For Expected result describe what should happen after you run the steps above ie corrected behavior Actual result Got a Warning Expected result No warning since this system folder is expected to be excluded Debug log Posting a debug log helps the developers find and fix your particular issue more easily Please wrap your code in code blocks with triple backticks to increase readability WarningDuplicatiLibraryMainOperationBackupFileEnumerationProcessFileAccessError Error reported while accessing file D System Volume Information x I have searched open and closed issues for duplicates Environment info Please include some relevant information about your environment For Backend please indicate the backup destination eg Amazon S OneDrive FTP WebDAV local Duplicati version v canary Operating system Ubuntu Backend local Description I was running RecoveryTool restore and after it extracted about gb of data split accross files over a couple of days it stopped working with lots of error messages like this Failed to read Blocklist hash dyJVHkdVVfsRKNXzvCkVwi ZbFGMjoLDYq OjguwIY SystemIOIOException Too many open files at SystemIOFileStreamctor SystemString path SystemIOFileMode mode SystemIOFileAccess access SystemIOFileShare share SystemInt bufferSize SystemBoolean anonymous SystemIOFileOptions options x e in d ec c f d b a c bdf b at SystemIOFileStreamctor SystemString path SystemIOFileMode mode SystemIOFileAccess access SystemIOFileShare share x in d ec c f d ba c bdf b at wrapper remotinginvokewithcheck SystemIOFileStreamctorstringSystemIOFileModeSystemIOFileAccessSystemIOFileShare at DuplicatiCommandLineRecoveryToolRestoreCompressedFileMRUCacheReadBlock SystemString filename SystemString hash x in ceacbda fd c fcd at DuplicatiCommandLineRecoveryToolRestoreHashLookupHelperReadHash SystemString hash x in ceacbda fd c fcd at DuplicatiCommandLineRecoveryToolRestoreHashLookupHelperReadBlocklistHashesd MoveNext x e in ceacbda fd c fcd at DuplicatiCommandLineRecoveryToolRestoreRun SystemCollectionsGenericList T args SystemCollectionsGenericDictionary TKeyTValue options DuplicatiLibraryUtilityIFilter filter x c in ceacbda fd c fcd 