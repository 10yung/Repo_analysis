On Debian stretch with Ruby p and curb we get the following segfault coming from This seems related to which was supposedly fixed by butwas it homenickbundleruby gemscurb skroutz libcurleasyrb BUG Segmentation fault at x uby p x linuxgnu Control frame information p s e CFUNC perform p s e METHOD homenickbundleruby gemscurb skroutz libcurleasyrb FINISH p s e CFUNC http p s e BLOCK homenickbundleruby gemselasticsearchtransport skroutz libelasticsearchtransporttransporthttpcur FINISH p s e METHOD homenickbundleruby gemselasticsearchtransport skroutz libelasticsearchtransporttransportbaserb p s E bd METHOD homenickbundleruby gemselasticsearchtransport skroutz libelasticsearchtransporttransporthttpcur p s e METHOD homenickbundleruby gemselasticsearchtransport skroutz libelasticsearchtransportclientrb p s e BLOCK homenickbundleruby gemsnewrelicelasticsearch libnewrelicelasticsearchrb p s e METHOD homenickbundleruby gemsnewrelicrpm libnewrelicagentdatastoresrb p s E d METHOD homenickbundleruby gemsnewrelicelasticsearch libnewrelicelasticsearchrb p s e METHOD homenickbundleruby gemselasticsearchapi libelasticsearchapiactionsindexrb p s e METHOD usrlibruby delegaterb p s e METHOD homenickmyappconfiginitializersdriverproxyrb p s e METHOD homenickmyappappmodelsprofilerb p s e METHOD homenickmyapplibrackuserprofilerb p s e METHOD homenickmyapplibrackxmetaclientidentifierrb p s e METHOD homenickmyapplibrackoauth tokenrb p s e METHOD homenickmyapplibracksessioncookiehandlerrb p s e BLOCK homenickbundleruby gemssuitcase libsuitcasemiddlewarerb p s e METHOD homenickbundleruby gemssuitcase libsuitcaseagentrb p s e METHOD homenickbundleruby gemssuitcase libsuitcasemiddlewarerb p s e METHOD homenickmyapplibrackresquerb p s e METHOD homenickbundleruby gemsapiversions libapiversionsmiddlewarerb p s e METHOD homenickbundleruby gemsrack libracketagrb p s e METHOD homenickbundleruby gemsrack librackconditionalgetrb p s e METHOD homenickbundleruby gemsrack librackheadrb p s e METHOD homenickbundleruby gemsrack libracksessionabstractidrb p s e METHOD homenickbundleruby gemsrack libracksessionabstractidrb p s e METHOD homenickbundleruby gemsactionpack libactiondispatchmiddlewarecookiesrb p s e BLOCK homenickbundleruby gemsactionpack libactiondispatchmiddlewarecallbacksrb p s e METHOD homenickbundleruby gemsactivesupport libactivesupportcallbacksrb p s e METHOD homenickbundleruby gemsactionpack libactiondispatchmiddlewarecallbacksrb p s e METHOD homenickbundleruby gemsactionpack libactiondispatchmiddlewareexecutorrb p s e METHOD homenickbundleruby gemsactionpack libactiondispatchmiddlewaredebugexceptionsrb p s e METHOD homenickbundleruby gemsactionpack libactiondispatchmiddlewareshowexceptionsrb p s E METHOD homenickbundleruby gemsrailties librailsrackloggerrb p s e BLOCK homenickbundleruby gemsrailties librailsrackloggerrb p s e BLOCK homenickbundleruby gemsactivesupport libactivesupporttaggedloggingrb p s e METHOD homenickbundleruby gemsactivesupport libactivesupporttaggedloggingrb p s e METHOD homenickbundleruby gemsactivesupport libactivesupporttaggedloggingrb p s e METHOD homenickbundleruby gemsrailties librailsrackloggerrb p s e METHOD homenickbundleruby gemsactionpack libactiondispatchmiddlewareremoteiprb p s e METHOD homenickbundleruby gemsrequeststore librequeststoremiddlewarerb p s e METHOD homenickbundleruby gemsactionpack libactiondispatchmiddlewarerequestidrb p s e METHOD homenickbundleruby gemsrack librackmethodoverriderb p s e METHOD homenickbundleruby gemsrack librackruntimerb p s e METHOD homenickbundleruby gemsactivesupport libactivesupportcachestrategylocalcachemiddlewarerb p s e METHOD homenickbundleruby gemsactionpack libactiondispatchmiddlewareexecutorrb p s e METHOD homenickbundleruby gemsactionpack libactiondispatchmiddlewarestaticrb p s e METHOD homenickbundleruby gemsrack libracksendfilerb p s e METHOD homenickmyapplibrackflamegraphrb p s e METHOD homenickbundleruby gemssentryraven libravenintegrationsrackrb p s e METHOD homenickbundleruby gemsrailties librailsenginerb p s e BLOCK homenickbundleruby gemsrack librackurlmaprb FINISH p s e CFUNC each p s e METHOD homenickbundleruby gemsrack librackurlmaprb p s e METHOD homenickbundleruby gemsrack librackbuilderrb p s e METHOD homenickbundleruby gemscapybara libcapybaraserverrb p s E c METHOD homenickbundleruby gemsrack librackhandlerwebrickrb p s e METHOD usrlibruby webrickhttpserverrb p s e METHOD usrlibruby webrickhttpserverrb p s e BLOCK usrlibruby webrickserverrb FINISH p s e none FINISH Ruby level backtrace information usrlibruby webrickserverrb in block in startthread usrlibruby webrickhttpserverrb in run usrlibruby webrickhttpserverrb in service homenickbundleruby gemsrack librackhandlerwebrickrb in service homenickbundleruby gemscapybara libcapybaraserverrb in call homenickbundleruby gemsrack librackbuilderrb in call homenickbundleruby gemsrack librackurlmaprb in call homenickbundleruby gemsrack librackurlmaprb in each homenickbundleruby gemsrack librackurlmaprb in block in call homenickbundleruby gemsrailties librailsenginerb in call homenickbundleruby gemssentryraven libravenintegrationsrackrb in call homenickmyapplibrackflamegraphrb in call homenickbundleruby gemsrack libracksendfilerb in call homenickbundleruby gemsactionpack libactiondispatchmiddlewarestaticrb in call homenickbundleruby gemsactionpack libactiondispatchmiddlewareexecutorrb in call homenickbundleruby gemsactivesupport libactivesupportcachestrategylocalcachemiddlewarerb in call homenickbundleruby gemsrack librackruntimerb in call homenickbundleruby gemsrack librackmethodoverriderb in call homenickbundleruby gemsactionpack libactiondispatchmiddlewarerequestidrb in call homenickbundleruby gemsrequeststore librequeststoremiddlewarerb in call homenickbundleruby gemsactionpack libactiondispatchmiddlewareremoteiprb in call homenickbundleruby gemsrailties librailsrackloggerrb in call homenickbundleruby gemsactivesupport libactivesupporttaggedloggingrb in tagged homenickbundleruby gemsactivesupport libactivesupporttaggedloggingrb in tagged homenickbundleruby gemsactivesupport libactivesupporttaggedloggingrb in block in tagged homenickbundleruby gemsrailties librailsrackloggerrb in block in call homenickbundleruby gemsrailties librailsrackloggerrb in callapp homenickbundleruby gemsactionpack libactiondispatchmiddlewareshowexceptionsrb in call homenickbundleruby gemsactionpack libactiondispatchmiddlewaredebugexceptionsrb in call homenickbundleruby gemsactionpack libactiondispatchmiddlewareexecutorrb in call homenickbundleruby gemsactionpack libactiondispatchmiddlewarecallbacksrb in call homenickbundleruby gemsactivesupport libactivesupportcallbacksrb in runcallbacks homenickbundleruby gemsactionpack libactiondispatchmiddlewarecallbacksrb in block in call homenickbundleruby gemsactionpack libactiondispatchmiddlewarecookiesrb in call homenickbundleruby gemsrack libracksessionabstractidrb in call homenickbundleruby gemsrack libracksessionabstractidrb in context homenickbundleruby gemsrack librackheadrb in call homenickbundleruby gemsrack librackconditionalgetrb in call homenickbundleruby gemsrack libracketagrb in call homenickbundleruby gemsapiversions libapiversionsmiddlewarerb in call homenickmyapplibrackresquerb in call homenickbundleruby gemssuitcase libsuitcasemiddlewarerb in call homenickbundleruby gemssuitcase libsuitcaseagentrb in record homenickbundleruby gemssuitcase libsuitcasemiddlewarerb in block in call homenickmyapplibracksessioncookiehandlerrb in call homenickmyapplibrackoauth tokenrb in call homenickmyapplibrackxmetaclientidentifierrb in call homenickmyapplibrackuserprofilerb in call homenickmyappappmodelsprofilerb in save homenickmyappconfiginitializersdriverproxyrb in methodmissing usrlibruby delegaterb in methodmissing homenickbundleruby gemselasticsearchapi libelasticsearchapiactionsindexrb in index homenickbundleruby gemsnewrelicelasticsearch libnewrelicelasticsearchrb in performrequestwithnewrelic homenickbundleruby gemsnewrelicrpm libnewrelicagentdatastoresrb in wrap homenickbundleruby gemsnewrelicelasticsearch libnewrelicelasticsearchrb in block in performrequestwithnewrelic homenickbundleruby gemselasticsearchtransport skroutz libelasticsearchtransportclientrb in performrequest homenickbundleruby gemselasticsearchtransport skroutz libelasticsearchtransporttransporthttpcurbrb in performrequest homenickbundleruby gemselasticsearchtransport skroutz libelasticsearchtransporttransportbaserb in performrequest homenickbundleruby gemselasticsearchtransport skroutz libelasticsearchtransporttransporthttpcurbrb in block in performrequest homenickbundleruby gemselasticsearchtransport skroutz libelasticsearchtransporttransporthttpcurbrb in http homenickbundleruby gemscurb skroutz libcurleasyrb in perform Machine register context RIP x f bc bea a RBP x ff RSP x f baa a RAX x a b RBX x ff RCX x RDX x ff RDI x a b b RSI x R x R x R x b a c aa R x R x R x f baa a R x f b d R x a fe EFL x C level backtrace information usrlibx linuxgnulibruby so x f bc a usrlibx linuxgnulibruby so x f bc a c usrlibx linuxgnulibruby so x f bc usrlibx linuxgnulibruby so x f bc f e libx linuxgnulibpthreadso x f bc ca e libx linuxgnulibcso IOfread x a x f bc bea a usrlibx linuxgnulibcurlso x f bbc e usrlibx linuxgnulibcurlso x f bbc a usrlibx linuxgnulibcurlso x f bbc ca usrlibx linuxgnulibcurlso curlmultiperform xb x f bbc d c homenickbundleruby gemscurb skroutz libcurbcoresorbcurlmultirunisra x b x f bbc a b curbmultic homenickbundleruby gemscurb skroutz libcurbcoresorubycurlmultiperform x x f bbc a curbmultic usrlibx linuxgnulibruby so x f bc e usrlibx linuxgnulibruby so x f bc aee usrlibx linuxgnulibruby so x f bc f usrlibx linuxgnulibruby so x f bc eac usrlibx linuxgnulibruby so x f bc b f usrlibx linuxgnulibruby so rbfuncall xbb x f bc bb homenickbundleruby gemscurb skroutz libcurbcoresorubycurleasyperformverbstr x x f bbc f curbeasyc homenickbundleruby gemscurb skroutz libcurbcoresorubycurleasyperformverb xa x f bbc cf curbeasyc usrlibx linuxgnulibruby so x f bc e usrlibx linuxgnulibruby so x f bc aee usrlibx linuxgnulibruby so x f bc f usrlibx linuxgnulibruby so x f bc cf usrlibx linuxgnulibruby so x f bc dc usrlibx linuxgnulibruby so x f bc f usrlibx linuxgnulibruby so x f bc aee usrlibx linuxgnulibruby so x f bc f usrlibx linuxgnulibruby so rbyield x x f bc d usrlibx linuxgnulibruby so rbaryeach x c x f bc c usrlibx linuxgnulibruby so x f bc e usrlibx linuxgnulibruby so x f bc ae c usrlibx linuxgnulibruby so x f bc f usrlibx linuxgnulibruby so x f bc cf usrlibx linuxgnulibruby so x f bc dc usrlibx linuxgnulibruby so x f bc usrlibx linuxgnulibruby so x f bc d libx linuxgnulibpthreadso x f bc c a libx linuxgnulibcso clone x f x f bc fd f Other runtime information Loaded script homenickbundleruby binspork Loaded features enumeratorso threadrb rationalso complexso usrlibx linuxgnuruby encencdbso usrlibx linuxgnuruby enctranstransdbso usrlibruby unicodenormalizerb usrlibx linuxgnuruby rbconfigrb usrlibruby rubygemscompatibilityrb usrlibruby rubygemsdefaultsrb usrlibruby rubygemsdeprecaterb usrlibruby rubygemserrorsrb usrlibruby rubygemsversionrb usrlibruby rubygemsrequirementrb usrlibruby rubygemsplatformrb usrlibruby rubygemsbasicspecificationrb usrlibruby rubygemsstubspecificationrb usrlibruby rubygemsutillistrb usrlibx linuxgnuruby stringioso usrlibruby urirfc parserrb usrlibruby urirfc parserrb usrlibruby uricommonrb usrlibruby urigenericrb usrlibruby uriftprb usrlibruby urihttprb usrlibruby urihttpsrb usrlibruby urildaprb usrlibruby urildapsrb usrlibruby urimailtorb usrlibruby urirb usrlibruby rubygemsspecificationrb usrlibruby rubygemsexceptionsrb usrlibrubyvendorrubyrubygemsdefaultsoperatingsystemrb usrlibruby rubygemsdependencyrb usrlibruby rubygemscoreextkernelgemrb usrlibruby monitorrb usrlibruby rubygemscoreextkernelrequirerb usrlibruby rubygemsrb usrlibrubyvendorrubydidyoumeanversionrb usrlibrubyvendorrubydidyoumeancoreextnameerrorrb usrlibrubyvendorrubydidyoumeanlevenshteinrb usrlibrubyvendorrubydidyoumeanjarowinklerrb usrlibrubyvendorrubydidyoumeanspellcheckablerb usrlibruby delegaterb usrlibrubyvendorrubydidyoumeanspellcheckersnameerrorcheckersclassnamecheckerrb usrlibrubyvendorrubydidyoumeanspellcheckersnameerrorcheckersvariablenamecheckerrb usrlibrubyvendorrubydidyoumeanspellcheckersnameerrorcheckersrb usrlibrubyvendorrubydidyoumeanspellcheckersmethodnamecheckerrb usrlibrubyvendorrubydidyoumeanspellcheckersnullcheckerrb usrlibrubyvendorrubydidyoumeanformatterrb usrlibrubyvendorrubydidyoumeanrb usrlibrubyvendorrubybundlerpostittrampolinerb usrlibx linuxgnuruby pathnameso usrlibruby pathnamerb usrlibrubyvendorrubybundlerconstantsrb usrlibruby rubygemstextrb usrlibruby rubygemspathsupportrb usrlibx linuxgnuruby ioconsoleso usrlibruby rubygemsuserinteractionrb usrlibx linuxgnuruby etcso usrlibruby rubygemsconfigfilerb usrlibrubyvendorrubybundlerrubygemsintegrationrb usrlibrubyvendorrubybundlercurrentrubyrb usrlibrubyvendorrubybundlersharedhelpersrb usrlibruby fileutilsrb usrlibrubyvendorrubybundlererrorsrb usrlibrubyvendorrubybundlerenvironmentpreserverrb usrlibx linuxgnuruby socketso usrlibx linuxgnuruby iowaitso usrlibruby socketrb usrlibruby timeoutrb usrlibruby netprotocolrb usrlibx linuxgnuruby zlibso usrlibruby nethttpexceptionsrb usrlibruby nethttpheaderrb usrlibx linuxgnuruby encwindows jso usrlibruby nethttpgenericrequestrb usrlibruby nethttprequestrb usrlibruby nethttprequestsrb usrlibruby nethttpresponserb usrlibruby nethttpresponsesrb usrlibruby nethttpproxydeltarb usrlibruby nethttpbackwardrb usrlibruby nethttprb usrlibx linuxgnuruby datecoreso usrlibruby daterb usrlibruby timerb usrlibruby rubygemsrequesthttppoolrb usrlibruby rubygemsrequesthttpspoolrb usrlibruby rubygemsrequestconnectionpoolsrb usrlibruby rubygemsrequestrb usrlibruby cgicorerb usrlibx linuxgnuruby cgiescapeso usrlibruby cgiutilrb usrlibruby cgicookierb usrlibruby cgirb usrlibruby rubygemsuriformatterrb usrlibx linuxgnuruby digestso usrlibruby digestrb usrlibx linuxgnuruby opensslso usrlibruby opensslbnrb usrlibruby opensslpkeyrb usrlibruby opensslcipherrb usrlibruby opensslconfigrb usrlibruby openssldigestrb usrlibruby opensslx rb usrlibruby opensslbufferingrb usrlibx linuxgnuruby iononblockso usrlibruby opensslsslrb usrlibruby opensslrb usrlibruby securerandomrb usrlibruby resolvrb usrlibruby rubygemsremotefetcherrb usrlibrubyvendorrubybundlergemremotefetcherrb usrlibx linuxgnuruby digestsha so usrlibrubyvendorrubybundlerpluginapisourcerb usrlibrubyvendorrubybundlerpluginapirb usrlibrubyvendorrubybundlerpluginrb usrlibruby rubygemsutilrb usrlibruby rubygemssourcegitrb usrlibruby rubygemssourceinstalledrb usrlibruby rubygemssourcespecificfilerb usrlibruby rubygemssourcelocalrb usrlibruby rubygemssourcelockrb usrlibruby rubygemssourcevendorrb usrlibruby rubygemssourcerb usrlibrubyvendorrubybundlergemhelpersrb usrlibrubyvendorrubybundlermatchplatformrb usrlibrubyvendorrubybundlerrubygemsextrb usrlibrubyvendorrubybundlerversionrb usrlibrubyvendorrubybundlerrb usrlibrubyvendorrubybundlersettingsrb usrlibrubyvendorrubybundleryamlserializerrb usrlibruby rubygemsextbuilderrorrb usrlibruby rubygemsextbuilderrb usrlibruby rubygemsextconfigurebuilderrb usrlibruby tmpdirrb usrlibruby tempfilerb usrlibruby rubygemsextextconfbuilderrb usrlibruby rubygemsextrakebuilderrb usrlibruby optparserb usrlibruby rubygemscommandrb usrlibruby rubygemsextcmakebuilderrb usrlibruby rubygemsextrb usrlibx linuxgnuruby strscanso usrlibrubyvendorrubybundlersourcerb usrlibrubyvendorrubybundlersourcepathrb usrlibrubyvendorrubybundlersourcegitrb usrlibruby rubygemsnametuplerb usrlibruby rubygemsspecfetcherrb usrlibrubyvendorrubybundlersourcerubygemsrb usrlibrubyvendorrubybundlerlockfileparserrb usrlibruby setrb usrlibrubyvendorrubybundlerdefinitionrb usrlibrubyvendorrubybundlerdependencyrb usrlibrubyvendorrubybundlerrubydslrb usrlibrubyvendorrubybundlerdslrb usrlibrubyvendorrubybundlersourcelistrb usrlibrubyvendorrubybundlerlazyspecificationrb usrlibruby tsortrb usrlibruby forwardablerb usrlibrubyvendorrubybundlerspecsetrb usrlibrubyvendorrubybundlergemversionpromoterrb usrlibrubyvendorrubybundlersourcegemspecrb usrlibrubyvendorrubybundlerruntimerb usrlibrubyvendorrubybundlerdepproxyrb usrlibrubyvendorrubybundleruirb usrlibrubyvendorrubybundleruisilentrb usrlibrubyvendorrubybundleruirgproxyrb usrlibrubyvendorrubybundlerindexrb usrlibrubyvendorrubybundlerremotespecificationrb usrlibrubyvendorrubybundlerstubspecificationrb usrlibrubyvendorrubybundlerendpointspecificationrb usrlibrubyvendorrubybundlersetuprb homenickbundleruby gemsspork rc skroutz libsporkrb homenickbundleruby gemsspork rc skroutz libsporkrunnerrb homenickbundleruby gemsspork rc skroutz libsporkgemhelpersrb homenickbundleruby gemsspork rc skroutz libsporktestframeworkrspecrb homenickbundleruby gemsspork rc skroutz libsporktestframeworkcucumberrb homenickbundleruby gemsspork rc skroutz libsporktestframeworkrb homenickbundleruby gemsspork rc skroutz libsporkappframeworkunknownrb homenickbundleruby gemsspork rc skroutz libsporkappframeworkrb usrlibruby drbeqrb usrlibruby drbinvokemethodrb usrlibruby drbdrbrb usrlibruby drbrb usrlibruby rindarindarb usrlibruby ipaddrrb usrlibruby rindaringrb homenickbundleruby gemsspork rc skroutz libsporkrunstrategymagazinemagazineslaverb homenickbundleruby gemsspork rc skroutz libsporkrunstrategymagazinerindaringfingerpatchrb homenickbundleruby gemsspork rc skroutz libsporkrunstrategymagazinerb homenickbundleruby gemsspork rc skroutz libsporkrunstrategyforkingrb homenickbundleruby gemsspork rc skroutz libsporkrunstrategyrb homenickmyappconfigbootrb usrlibx linuxgnuruby digestmd so homenickbundleruby gemsrailties librailsrubyversioncheckrb homenickbundleruby gemsconcurrentruby libconcurrentconstantsrb homenickbundleruby gemsconcurrentruby libconcurrentutilityenginerb homenickbundleruby gemsconcurrentruby libconcurrentsynchronizationabstractobjectrb homenickbundleruby gemsconcurrentruby libconcurrentutilitynativeextensionloaderrb homenickbundleruby gemsconcurrentruby libconcurrentsynchronizationmriobjectrb homenickbundleruby gemsconcurrentruby libconcurrentsynchronizationjrubyobjectrb homenickbundleruby gemsconcurrentruby libconcurrentsynchronizationrbxobjectrb homenickbundleruby gemsconcurrentruby libconcurrentsynchronizationtrufflerubyobjectrb homenickbundleruby gemsconcurrentruby libconcurrentsynchronizationobjectrb homenickbundleruby gemsconcurrentruby libconcurrentsynchronizationvolatilerb homenickbundleruby gemsconcurrentruby libconcurrentsynchronizationabstractlockableobjectrb homenickbundleruby gemsconcurrentruby libconcurrentsynchronizationmutexlockableobjectrb homenickbundleruby gemsconcurrentruby libconcurrentsynchronizationjrubylockableobjectrb homenickbundleruby gemsconcurrentruby libconcurrentsynchronizationrbxlockableobjectrb homenickbundleruby gemsconcurrentruby libconcurrentsynchronizationlockableobjectrb homenickbundleruby gemsconcurrentruby libconcurrentsynchronizationconditionrb homenickbundleruby gemsconcurrentruby libconcurrentsynchronizationlockrb homenickbundleruby gemsconcurrentruby libconcurrentsynchronizationrb homenickbundleruby gemsconcurrentruby libconcurrentcollectionmapnonconcurrentmapbackendrb homenickbundleruby gemsconcurrentruby libconcurrentcollectionmapmrimapbackendrb homenickbundleruby gemsconcurrentruby libconcurrentmaprb homenickbundleruby gemsactivesupport libactivesupportcoreextarrayprependandappendrb homenickbundleruby gemsactivesupport libactivesupportcoreextregexprb homenickbundleruby gemsactivesupport libactivesupportcoreexthashdeepmergerb homenickbundleruby gemsactivesupport libactivesupportcoreexthashexceptrb homenickbundleruby gemsactivesupport libactivesupportcoreexthashslicerb homenickbundleruby gemsi n libi nversionrb homenickbundleruby gemsi n libi nexceptionsrb homenickbundleruby gemsi n libi ninterpolaterubyrb homenickbundleruby gemsi n libi nrb homenickbundleruby gemsactivesupport libactivesupportlazyloadhooksrb homenickbundleruby gemsi n libi nconfigrb homenickbundleruby gemsactivesupport libactivesupporti nrb homenickbundleruby gemsactivesupport libactivesupportinflectorinflectionsrb homenickbundleruby gemsactivesupport libactivesupportinflectionsrb homenickbundleruby gemsactivesupport libactivesupportinflectormethodsrb homenickbundleruby gemsactivesupport libactivesupportdependenciesautoloadrb homenickbundleruby gemsactivesupport libactivesupportgemversionrb homenickbundleruby gemsactivesupport libactivesupportversionrb homenickbundleruby gemsactivesupport libactivesupportconcernrb homenickbundleruby gemsactivesupport libactivesupportcoreextarrayextractoptionsrb homenickbundleruby gemsactivesupport libactivesupportcoreextmoduleattributeaccessorsrb homenickbundleruby gemsconcurrentruby libconcurrentversionrb homenickbundleruby gemsconcurrentruby libconcurrenterrorsrb homenickbundleruby gemsconcurrentruby libconcurrentatomiceventrb homenickbundleruby gemsconcurrentruby libconcurrentconcerndereferenceablerb homenickbundleruby gemsconcurrentruby libconcurrentconcernobligationrb usrlibruby loggerrb homenickbundleruby gemsconcurrentruby libconcurrentconcernloggingrb homenickbundleruby gemsconcurrentruby libconcurrentexecutorexecutorservicerb homenickbundleruby gemsconcurrentruby libconcurrentutilityatexitrb homenickbundleruby gemsconcurrentruby libconcurrentexecutorabstractexecutorservicerb homenickbundleruby gemsconcurrentruby libconcurrentexecutorserialexecutorservicerb homenickbundleruby gemsconcurrentruby libconcurrentexecutorimmediateexecutorrb homenickbundleruby gemsconcurrentruby libconcurrentdelayrb homenickbundleruby gemsconcurrentruby libconcurrentatomicreferencenumericcaswrapperrb homenickbundleruby gemsconcurrentruby libconcurrentatomicreferencemutexatomicrb homenickbundleruby gemsconcurrentruby libconcurrentatomicatomicreferencerb homenickbundleruby gemsconcurrentruby libconcurrentexecutorrubyexecutorservicerb homenickbundleruby gemsconcurrentruby libconcurrentutilitymonotonictimerb homenickbundleruby gemsconcurrentruby libconcurrentexecutorrubythreadpoolexecutorrb homenickbundleruby gemsconcurrentruby libconcurrentexecutorthreadpoolexecutorrb homenickbundleruby gemsconcurrentruby libconcurrentexecutorcachedthreadpoolrb homenickbundleruby gemsconcurrentruby libconcurrentutilityprocessorcounterrb homenickbundleruby gemsconcurrentruby libconcurrentconfigurationrb homenickbundleruby gemsconcurrentruby libconcurrentatomicmutexatomicbooleanrb homenickbundleruby gemsconcurrentruby libconcurrentatomicatomicbooleanrb homenickbundleruby gemsconcurrentruby libconcurrentutilitynativeintegerrb homenickbundleruby gemsconcurrentruby libconcurrentatomicmutexatomicfixnumrb homenickbundleruby gemsconcurrentruby libconcurrentatomicatomicfixnumrb homenickbundleruby gemsconcurrentruby libconcurrentatomiccyclicbarrierrb homenickbundleruby gemsconcurrentruby libconcurrentatomicmutexcountdownlatchrb homenickbundleruby gemsconcurrentruby libconcurrentatomicjavacountdownlatchrb homenickbundleruby gemsconcurrentruby libconcurrentatomiccountdownlatchrb homenickbundleruby gemsconcurrentruby libconcurrentatomicreadwritelockrb homenickbundleruby gemsconcurrentruby libconcurrentatomicabstractthreadlocalvarrb homenickbundleruby gemsconcurrentruby libconcurrentatomicrubythreadlocalvarrb homenickbundleruby gemsconcurrentruby libconcurrentatomicjavathreadlocalvarrb homenickbundleruby gemsconcurrentruby libconcurrentatomicthreadlocalvarrb homenickbundleruby gemsconcurrentruby libconcurrentatomicreentrantreadwritelockrb homenickbundleruby gemsconcurrentruby libconcurrentatomicmutexsemaphorerb homenickbundleruby gemsconcurrentruby libconcurrentatomicsemaphorerb homenickbundleruby gemsconcurrentruby libconcurrentatomicsrb homenickbundleruby gemsconcurrentruby libconcurrentexecutorfixedthreadpoolrb homenickbundleruby gemsconcurrentruby libconcurrentexecutorsimpleexecutorservicerb homenickbundleruby gemsconcurrentruby libconcurrentexecutorindirectimmediateexecutorrb homenickbundleruby gemsconcurrentruby libconcurrentexecutorjavaexecutorservicerb homenickbundleruby gemsconcurrentruby libconcurrentexecutorjavasinglethreadexecutorrb homenickbundleruby gemsconcurrentruby libconcurrentexecutorjavathreadpoolexecutorrb homenickbundleruby gemsconcurrentruby libconcurrentexecutorrubysinglethreadexecutorrb homenickbundleruby gemsconcurrentruby libconcurrentexecutorsafetaskexecutorrb homenickbundleruby gemsconcurrentruby libconcurrentexecutorserializedexecutionrb homenickbundleruby gemsconcurrentruby libconcurrentexecutorserializedexecutiondelegatorrb homenickbundleruby gemsconcurrentruby libconcurrentexecutorsinglethreadexecutorrb homenickbundleruby gemsconcurrentruby libconcurrentcollectioncopyonwriteobserversetrb homenickbundleruby gemsconcurrentruby libconcurrentcollectioncopyonnotifyobserversetrb homenickbundleruby gemsconcurrentruby libconcurrentconcernobservablerb homenickbundleruby gemsconcurrentruby libconcurrentivarrb homenickbundleruby gemsconcurrentruby libconcurrentoptionsrb homenickbundleruby gemsconcurrentruby libconcurrentscheduledtaskrb homenickbundleruby gemsconcurrentruby libconcurrentcollectionjavanonconcurrentpriorityqueuerb homenickbundleruby gemsconcurrentruby libconcurrentcollectionrubynonconcurrentpriorityqueuerb homenickbundleruby gemsconcurrentruby libconcurrentcollectionnonconcurrentpriorityqueuerb homenickbundleruby gemsconcurrentruby libconcurrentexecutortimersetrb homenickbundleruby gemsconcurrentruby libconcurrentexecutorsrb homenickbundleruby gemsconcurrentruby libconcurrentatomicatomicmarkablereferencerb homenickbundleruby gemsconcurrentruby libconcurrentagentrb homenickbundleruby gemsconcurrentruby libconcurrentatomrb homenickbundleruby gemsconcurrentruby libconcurrentthreadsafeutilrb homenickbundleruby gemsconcurrentruby libconcurrentarrayrb homenickbundleruby gemsconcurrentruby libconcurrenthashrb homenickbundleruby gemsconcurrentruby libconcurrentsetrb homenickbundleruby gemsconcurrentruby libconcurrenttuplerb homenickbundleruby gemsconcurrentruby libconcurrentasyncrb homenickbundleruby gemsconcurrentruby libconcurrentfuturerb homenickbundleruby gemsconcurrentruby libconcurrentdataflowrb homenickbundleruby gemsconcurrentruby libconcurrentmayberb homenickbundleruby gemsconcurrentruby libconcurrentexchangerrb homenickbundleruby gemsconcurrentruby libconcurrentsynchronizationabstractstructrb homenickbundleruby gemsconcurrentruby libconcurrentimmutablestructrb homenickbundleruby gemsconcurrentruby libconcurrentmutablestructrb homenickbundleruby gemsconcurrentruby libconcurrentmvarrb homenickbundleruby gemsconcurrentruby libconcurrentpromiserb homenickbundleruby gemsconcurrentruby libconcurrentsettablestructrb homenickbundleruby gemsconcurrentruby libconcurrenttimertaskrb homenickbundleruby gemsconcurrentruby libconcurrenttvarrb homenickbundleruby gemsconcurrentruby libconcurrentcollectionlockfreestackrb homenickbundleruby gemsconcurrentruby libconcurrentreincluderb homenickbundleruby gemsconcurrentruby libconcurrentpromisesrb homenickbundleruby gemsconcurrentruby libconcurrentthreadsafesynchronizeddelegatorrb Hi Unfortunately when trying to install curb v within a Gemfile of a Rails app I cant make the installation work If I do a gem install curb on my system it works fine OS macOS Catalina Ruby MRI v also tested with v Heres the full error LoadError dlopenUsersrobinrvmgemsruby gemscurb libcurbcorebundle Library not loaded rpathlibgssapikrb dyli Referenced from Usersrobinrvmgemsruby gemscurb libcurbcorebundle Reason image not found Usersrobinrvmgemsruby gemscurb libcurbcorebundle What Ive tried so far brew reinstall curl brew install krb Does anybody have an idea how to proceed Create an easy handle that is erroneous for patch Observe that performing the easy handle returns a or something similar Fix up the erroneous parts Rerun the easy handle It will still fail Currently in curb exceptions due to network errors during requests dont have a general description of the problem just the raw text of the response header if it could be retrieved I sometimes have a hard time debugging problems with only that Also response headers can be much longer than exception messages usually are which can cause weirdness in logs and monitoring systems In this PR the exception message is instead based on a the error code summary that we already get from rbcurleasyerror and b error details from CURLOPTERRORBUFFER The error buffer is cleared out before each request so that we dont show outdated information in versions of Curl before which dont clear out the buffer for you The user can still debug the response header when needed with verbose or ondebug This is nearly identical to the problem described in except the issue is with connecttimeout rather than timeout Probably a similar fix to could be done just remove extra spaces just remove some extra spaces remove some extra spaces Tech description OS Ubuntu Ruby Curb Reproduce require curb c CurlEasynew cmultipartformpost true chttppost CurlPostFieldcontentparam CurlPostFieldfiledocument ANYFILE Exception stack not all with irb irbmain c CurlEasynew CurlEasy irbmain cmultipartformpost true true irbmain chttppost irbmain CurlPostFieldcontentparam irbmain CurlPostFieldfiledocument homeair txt irbmain irb BUG Segmentation fault at x f ruby p revision x linux Control frame information c p s e CFUNC httppost c p s e EVAL irb FINISH c p s e CFUNC eval c p s e METHOD homeairasdfinstallsruby libruby irbworkspacerb c p s e METHOD homeairasdfinstallsruby libruby irbcontextrb c p s e BLOCK homeairasdfinstallsruby libruby irbrb c p s e METHOD homeairasdfinstallsruby libruby irbrb c p s e BLOCK homeairasdfinstallsruby libruby irbrb c p s e BLOCK homeairasdfinstallsruby libruby irbrubylexrb FINISH c p s e CFUNC loop c p s e BLOCK homeairasdfinstallsruby libruby irbrubylexrb FINISH c p s e CFUNC catch c p s e METHOD homeairasdfinstallsruby libruby irbrubylexrb c p s E f METHOD homeairasdfinstallsruby libruby irbrb c p s e BLOCK homeairasdfinstallsruby libruby irbrb FINISH c p s e CFUNC catch c p s E ca METHOD homeairasdfinstallsruby libruby irbrb c p s e METHOD homeairasdfinstallsruby libruby irbrb c p s e TOP homeairasdfinstallsruby librubygems gemsirb exeirb FINISH c p s e CFUNC load c p s E e EVAL homeairasdfinstallsruby binirb FINISH c p s E none FINISH Ruby level backtrace information homeairasdfinstallsruby binirb in main homeairasdfinstallsruby binirb in load homeairasdfinstallsruby librubygems gemsirb exeirb in top required homeairasdfinstallsruby libruby irbrb in start homeairasdfinstallsruby libruby irbrb in run homeairasdfinstallsruby libruby irbrb in catch homeairasdfinstallsruby libruby irbrb in block in run homeairasdfinstallsruby libruby irbrb in evalinput homeairasdfinstallsruby libruby irbrubylexrb in eachtoplevelstatement homeairasdfinstallsruby libruby irbrubylexrb in catch homeairasdfinstallsruby libruby irbrubylexrb in block in eachtoplevelstatement homeairasdfinstallsruby libruby irbrubylexrb in loop homeairasdfinstallsruby libruby irbrubylexrb in block levels in eachtoplevelstatement homeairasdfinstallsruby libruby irbrb in block in evalinput homeairasdfinstallsruby libruby irbrb in signalstatus homeairasdfinstallsruby libruby irbrb in block levels in evalinput homeairasdfinstallsruby libruby irbcontextrb in evaluate homeairasdfinstallsruby libruby irbworkspacerb in evaluate homeairasdfinstallsruby libruby irbworkspacerb in eval irb in irbbinding irb in httppost Reason Integer value in CurlPostFieldcontent Fix Change CurlPostFieldcontentparam to CurlPostFieldcontentparam I think Curb should cast value to string automatically or at least do not crash runtime with C stack CURLOPTPROTOCOLS allows users to restrict the allowed protocols in URLs passed to curl CURLOPTREDIRPROTOCOLS enables users to restrict the allowed protocols in redirects for cases when CURLOPTFOLLOWLOCATION is used This PR exposes those options through the setopt facility Also the constants CURLPROTO constants are now exposed An example usage of the newly exposed options would look like this c CurlEasynewuserprovidedurl csetoptCurlCURLOPTPROTOCOLS CurlCURLPROTOHTTP CurlCURLPROTOHTTPS cperform c CurlEasynewuserprovidedurl csetoptCurlCURLOPTREDIRPROTOCOLS CurlCURLPROTOHTTP CurlCURLPROTOHTTPS cfollowlocation true cperform Due to curls support of obscure protocols eg DICT Gopher this can greatly assist in hardening and thus minimizing the risk of accepting userprovided URLs that use or redirect to such protocols When security vulnerabilities such as ServerSide Request Forgery SSRF are concerned using CURLOPTPROTOCOLS in order to only allow HTTPHTTPS for instance reduces the exploitation surface down to service discovery in most cases