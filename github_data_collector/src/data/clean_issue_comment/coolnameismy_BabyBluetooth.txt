 selfbaby setBlockOnConnected CBCentralManager central CBPeripheral peripheral NSLog peripheralname weakSelflinkState BluetoothLinkStateSuccessful if weakSelfdelegate respondsToSelectorselectorMyBluetoothToolLink weakSelfdelegate MyBluetoothToolLinkBluetoothLinkStateSuccessful NSLog weakSelfcurrentPeripheral peripheral weakSelfbaby cancelScan channel channel channel channel channel app app channel BabyCallback callbackOnChnnelNSString channel BabyCallback aCallBack channels objectForKeychannel if aCallBack aCallBack self callback return aCallBack iOS iOS Update typos demo setFilterOnDiscoverPeripherals This block declaration is not a prototype BabyPeripheralManager removeAllServices Block implicitly retains self explicitly mention self to indicate this is intended behavior BabyPeripheralManager stopAdvertising return BabyPeripheralManager peripheralManager stopAdvertising return self Peripherals voidconnectToPeripheralCBPeripheral peripheral centralManager connectPeripheralperipheral options currChannel babyOptions connectPeripheralWithOptions connectTimer invalidate connectTimer NSTimer scheduledTimerWithTimeInterval f targetself selectorselectorconnectTimeout userInfoperipheral repeatsNO BabyCallback channel BabySpeaker BabyCallback channel BabyCallback 