WIP DONT MERGE This is just a suggestion relating to the discussion on dropping support for python in PCSX is a video game emulator When running firejail noprofile PCSX the sound quality is a complete noisy mess The application console is littered with many entries that say ALSA lib pcmc sndpcmrecover underrun occurred This doesnt happen outside firejail Any ideas on how to further debug or fix this Is ALSA running in some fallback or degraded mode The Python language ie Python x was officially discontinued on January first planned for after which security patches and other improvements will not be released for it With Python s endoflife only Python x and later are supported Source Python is getting a security risk Till its completely dead we should remove include allowpython inc from every profile where its not requiered We could also add disablepython inc for profiles where we cant add disableinterpretersinc List of profile with include allowpython inc ankiprofile armprofile autokeycommonprofile bleachbitprofile blenderprofile cajaprofile cameramonitorprofile catfishprofile celluloidprofile cherrytreeprofile ddgtkprofile delugeprofile dfeetprofile diaprofile displayprofile electrumprofile exfalsoprofile filezillaprofile flowbladeprofile fontforgeprofile fontmanagerprofile freecadprofile gconfprofile gnomemusicprofile gnomescheduleprofile hexchatprofile inkscapeprofile klatexformulaprofile kodiprofile kritaprofile lifereaprofile lollypopprofile macrofusionprofile x meldprofile b ef mendeleydesktopprofile mpDris profile mpsytprofile mpvprofile msofficeprofile mypaintprofile natronprofile nautilusprofile nemoprofile nitroshareprofile nyxprofile obsprofile openshotprofile picardprofile pithosprofile pitiviprofile playonlinuxprofile profanityprofile pybitmessageprofile qbittorrentprofile qutebrowserprofile rangerprofile rhythmboxprofile scribusprofile sdat imgprofile smplayerprofile soundconverterprofile subdownloaderprofile xpraprofile youtubedlprofile This is just a suggestion hope it helps Cheers provide feedback about why a filename was rejected see issue More details in firejail profileetcfirejailwhoisprofile privatebinstrace allowdebuggers strace e traceopenopenat whois openatATFDCWD etcldsopreload ORDONLYOCLOEXEC openatATFDCWD runfirejailliblibtracelogso ORDONLYOCLOEXEC openatATFDCWD etcldsocache ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibtlshaswellx libidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibtlshaswelllibidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibtlsx libidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibtlslibidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibhaswellx libidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibhaswelllibidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibx libidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrliblibidn so ORDONLYOCLOEXEC openatATFDCWD usrliblibcso ORDONLYOCLOEXEC openatATFDCWD usrliblibdlso ORDONLYOCLOEXEC openatATFDCWD usrliblibunistringso ORDONLYOCLOEXEC openatATFDCWD usrliblocalelocalearchive ORDONLYOCLOEXEC openatATFDCWD runfirejailmntfslogger ORDONLY openatATFDCWD usrlibcharsetalias ORDONLYONOFOLLOW ENOENT No such file or directory openatATFDCWD etcwhoisconf ORDONLY openatATFDCWD etcnsswitchconf ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrliblibnssfilesso ORDONLYOCLOEXEC openatATFDCWD etcservices ORDONLYOCLOEXEC openatATFDCWD usrlibgconvgconvmodulescache ORDONLY ENOENT No such file or directory openatATFDCWD usrlibgconvgconvmodules ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD etcnsswitchconf ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD etchostconf ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD etcresolvconf ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrliblibnssdnsso ORDONLYOCLOEXEC openatATFDCWD usrliblibresolvso ORDONLYOCLOEXEC openatATFDCWD etchosts ORDONLYOCLOEXEC openatATFDCWD usrsharelocalelocalealias ORDONLYOCLOEXEC openatATFDCWD usrsharelocaleenUSUTF LCMESSAGESlibcmo ORDONLY ENOENT No such file or directory openatATFDCWD usrsharelocaleenUSutf LCMESSAGESlibcmo ORDONLY ENOENT No such file or directory openatATFDCWD usrsharelocaleenUSLCMESSAGESlibcmo ORDONLY ENOENT No such file or directory openatATFDCWD usrsharelocaleenUTF LCMESSAGESlibcmo ORDONLY ENOENT No such file or directory openatATFDCWD usrsharelocaleenutf LCMESSAGESlibcmo ORDONLY ENOENT No such file or directory openatATFDCWD usrsharelocaleenLCMESSAGESlibcmo ORDONLY ENOENT No such file or directory getaddrinfowhoisripenet Name or service not known exited with resolvconf is needed to resolve whoisripenet firejail profileetcfirejailwhoisprofile privateetcresolvconf privatebinstrace privatelibgconv allowdebuggers strace e traceopenopenat whois openatATFDCWD etcldsopreload ORDONLYOCLOEXEC openatATFDCWD runfirejailliblibtracelogso ORDONLYOCLOEXEC openatATFDCWD etcldsocache ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibtlshaswellx libidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibtlshaswelllibidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibtlsx libidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibtlslibidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibhaswellx libidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibhaswelllibidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibx libidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrliblibidn so ORDONLYOCLOEXEC openatATFDCWD usrliblibcso ORDONLYOCLOEXEC openatATFDCWD usrliblibdlso ORDONLYOCLOEXEC openatATFDCWD usrliblibunistringso ORDONLYOCLOEXEC openatATFDCWD usrliblocalelocalearchive ORDONLYOCLOEXEC openatATFDCWD runfirejailmntfslogger ORDONLY openatATFDCWD usrlibcharsetalias ORDONLYONOFOLLOW ENOENT No such file or directory openatATFDCWD etcwhoisconf ORDONLY openatATFDCWD etcnsswitchconf ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrliblibnssfilesso ORDONLYOCLOEXEC openatATFDCWD etcservices ORDONLYOCLOEXEC openatATFDCWD usrlibgconvgconvmodulescache ORDONLY ENOENT No such file or directory openatATFDCWD usrlibgconvgconvmodules ORDONLYOCLOEXEC openatATFDCWD etcnsswitchconf ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD etchostconf ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD etcresolvconf ORDONLYOCLOEXEC openatATFDCWD usrliblibnssdnsso ORDONLYOCLOEXEC openatATFDCWD usrliblibresolvso ORDONLYOCLOEXEC openatATFDCWD etcgaiconf ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibgconvISO so ORDONLYOCLOEXEC This is the RIPE Database query service This query was served by the RIPE Database Query Service version BLAARKOP exited with Also gconv library is needed for whois to work properly firejail profileetcfirejailwhoisprofile privateetcresolvconf privatebinstrace privatelibgconvlibnssmymachinessolibnssmyhostnamesolibnssresolvesolibresolvso allowdebuggers strace e traceopenopenat whois openatATFDCWD etcldsopreload ORDONLYOCLOEXEC openatATFDCWD runfirejailliblibtracelogso ORDONLYOCLOEXEC openatATFDCWD etcldsocache ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibtlshaswellx libidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibtlshaswelllibidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibtlsx libidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibtlslibidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibhaswellx libidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibhaswelllibidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibx libidn so ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrliblibidn so ORDONLYOCLOEXEC openatATFDCWD usrliblibcso ORDONLYOCLOEXEC openatATFDCWD usrliblibdlso ORDONLYOCLOEXEC openatATFDCWD usrliblibunistringso ORDONLYOCLOEXEC openatATFDCWD usrliblocalelocalearchive ORDONLYOCLOEXEC openatATFDCWD runfirejailmntfslogger ORDONLY openatATFDCWD usrlibcharsetalias ORDONLYONOFOLLOW ENOENT No such file or directory openatATFDCWD etcwhoisconf ORDONLY openatATFDCWD etcnsswitchconf ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrliblibnssfilesso ORDONLYOCLOEXEC openatATFDCWD etcservices ORDONLYOCLOEXEC openatATFDCWD usrlibgconvgconvmodulescache ORDONLY ENOENT No such file or directory openatATFDCWD usrlibgconvgconvmodules ORDONLYOCLOEXEC openatATFDCWD etcnsswitchconf ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD etchostconf ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD etcresolvconf ORDONLYOCLOEXEC openatATFDCWD usrliblibnssdnsso ORDONLYOCLOEXEC openatATFDCWD usrliblibresolvso ORDONLYOCLOEXEC openatATFDCWD etcgaiconf ORDONLYOCLOEXEC ENOENT No such file or directory openatATFDCWD usrlibgconvISO so ORDONLYOCLOEXEC This is the RIPE Database query service This query was served by the RIPE Database Query Service version BLAARKOP exited with Also whois requests these additional libraries below which its been shown on strace but as far as I tested whois is working properly without those libraries libnssmymachinessolibnssmyhostnamesolibnssresolvesolibresolvso Based on the existing teamsforlinux profile heres the profile which matches with Microsofts official Teams application for Linux Currently I had to disable privatebin and privateetc because of immediate crashes after start but its worth having it in the repo nevertheless so others can contribute to that profile to enhance it if someone come up with the fix for privatebin and privateetc This PR blacklists openrc path that could be used to identify running services out of the sandbox which could be used for information gathering Wayland theoretically adds on protection between applications so that they cant snoop on each others Unfortunately the wayland standard willingly does not define ways to implement screenshots and as such window managers are left to implement it on their own sway currently implements the wlrscreencopy protocol which is enabled by default in every jail definition I can think of Here is an example Let us assume Im using this jail definition for mutt whitelist HOMEcachemutt noblacklist HOMEcachemutt whitelist HOMEconfigmutt whitelist HOMElocalsharemail noblacklist HOMEconfigmsmtp noblacklist HOMEconfignvim noblacklist HOMElocalsharenvim noblacklist HOMEvim noblacklist HOMEviminfo noblacklist HOMEvimrc noblacklist HOMEgnupg whitelist HOMEconfigmsmtp whitelist HOMEconfignvim whitelist HOMElocalsharenvim whitelist HOMEvim whitelist HOMEviminfo whitelist HOMEvimrc whitelist HOMEgnupg blacklist tmpX unix include disablecommoninc include disabledevelinc neovim uses interpreters include disableinterpretersinc include disablepasswdmgrinc include disableprogramsinc capsdrop all netfilter no d nodvd nogroups nonewprivs noroot nosound notv nou f novideo protocol unixinetinet seccomp shell none privatedev writablerunuser This jail is pretty tightened already and should not be able to look at the users screen as its a command line mail client But a sandbox escape if we can call it this way is possible by simply replying to any mail which starts up your editor in my case vim and execute the command grim configmuttscreenshotpng NB this config is actually more tightened than the standard mutt one except for interpreters as it uses a whitelist As such I believe we should add an option into firejail configuration to disable certain wayland protocols and add it to every jail default enabling it on a needbasisnot a lot of programs should need to screenshot your screen hopefully