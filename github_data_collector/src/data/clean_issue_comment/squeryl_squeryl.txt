Hi there we are intermittently experiencing this error and it seems to be an issue with cglib could be related to this can you please investigate your usage of it We are using squeryl v OpenJDK javalangLinkageError loader scalareflectinternalutilScalaClassLoaderURLClassLoader b d f attempted duplicate class definition for comcompanytransactionhistorycorerepositorymodelOdsHoldingEnhancerByCGLIB bf aa comcompanytransactionhistorycorerepositorymodelOdsHoldingEnhancerByCGLIB bf aa is in unnamed module of loader scalareflectinternalutilScalaClassLoaderURLClassLoader b d f parent loader platform javabasejavalangClassLoaderdefineClass Native Method javabasejavalangClassLoaderdefineClassClassLoaderjava javabasejdkinternalreflectNativeMethodAccessorImplinvoke Native Method javabasejdkinternalreflectNativeMethodAccessorImplinvokeNativeMethodAccessorImpljava javabasejdkinternalreflectDelegatingMethodAccessorImplinvokeDelegatingMethodAccessorImpljava javabasejavalangreflectMethodinvokeMethodjava netsfcglibcoreReflectUtilsdefineClassReflectUtilsjava netsfcglibcoreAbstractClassGeneratorgenerateAbstractClassGeneratorjava netsfcglibproxyEnhancergenerateEnhancerjava netsfcglibcoreAbstractClassGeneratorClassLoaderData applyAbstractClassGeneratorjava netsfcglibcoreAbstractClassGeneratorClassLoaderData applyAbstractClassGeneratorjava netsfcglibcoreinternalLoadingCache callLoadingCachejava javabasejavautilconcurrentFutureTaskrunFutureTaskjava netsfcglibcoreinternalLoadingCachecreateEntryLoadingCachejava netsfcglibcoreinternalLoadingCachegetLoadingCachejava netsfcglibcoreAbstractClassGeneratorClassLoaderDatagetAbstractClassGeneratorjava netsfcglibcoreAbstractClassGeneratorcreateAbstractClassGeneratorjava netsfcglibproxyEnhancercreateHelperEnhancerjava netsfcglibproxyEnhancercreateEnhancerjava orgsquerylinternalsPosoMetaDataanonfunbuilder PosoMetaDatascala orgsquerylinternalsPosoMetaDataanonfuncreateSample PosoMetaDatascala orgsquerylinternalsFieldReferenceLinkerexecuteAndRestoreLastAccessedFieldReferenceFieldReferenceLinkerscala orgsquerylinternalsPosoMetaDatacreateSamplePosoMetaDatascala orgsqueryldslAbstractQuerycreateSubQueryableAbstractQueryscala orgsqueryldslboilerplateQuery initQuery scala orgsqueryldslboilerplateFromSignaturesfromFromSignaturesscala orgsqueryldslboilerplateFromSignaturesfromFromSignaturesscala comcompanycommondatabaseSquerylCustomTypesfromSquerylCustomTypesscala orgsquerylQueryablewhereQueryablescala orgsquerylQueryablewhereQueryablescala orgsquerylViewwhereViewscala thanks Shannon when i use squeryl as data storage layer with latest version in flink i got javalangIncompatibleClassChangeError it was raised when a new class extend from schema it was trait in v but then changed to class until now so is it possible to change back to trait Scala version sbt jdk squeryl cglib clazzNamestartsWithnetsfcglib is creating problem from my class and evaluates to false so columns are not selected in the query and generated query is select from book without any column name This is the Github link for my sample code Problem description When a query is executed with QueryheadOption the iterator if the query and thus also the ResultSet and the PreparedStatement is not closed properly Although the ResultSet is closed when the transactionsession terminates this can lead to problems when executing a lot of queries in one transaction like the maximum open cursors exceeded error in Oracle databases This also happens in the lastest master version How to reproduce Connect to an oracle database and then in one transaction and in a loop execute a query to a table with headOption scala object ExampleApp extends App Init db Run tests printlnTesting open Cursors val myDao new MyDAO inTransaction for i to Enter number max cursors if i printlnsi myDaofetchByNameadminget printlnTesting open Cursors finished successfully class MyDAO val table Table User MySchemauserT def fetchByNamename String Option User inTransaction tablewherelogin nameheadOption After the configured numer of cursors in the database is reached an error javasqlSQLException ORA maximum open cursors exceeded occurs How to Fix I believe the simplest solution would be for the headOption function to explicitely close the iterator it opened Probably there is a solution the doesnt require the match to Closeable eg by adding this interface to the declaration of iterator in the class Query scala def headOption val i iterator try if ihasNext Someinext else None finally i match case c Closeable cclose Hi xuweik Here are the various other changes from our fork that are general enough for inclusion on master Im happy to do the merge myself if you just want to approve dd d is a bug fix Others are just things we use but should be generally useful Definitely no need to do another release any time soon unless you think dd d warrants it When i do that scala case class RouteSchedulerouteStopId Int round Int time Timestamp dayCode Int extends KeyedEntity CompositeKey Int Int Int import orgsquerylPrimitiveTypeMode def id compositeKeyrouteStopId round dayCode def dayType DayTypedayCode lazy val routeStops ManyToOne RouteStop ACrossSchemarouteScheduleToRouteConcreteStopRelationrightthis Its work but when i just change this class to scala case class RouteSchedulerouteStopId Int round Int time Timestamp dayCode Int extends KeyedEntity CompositeKey Int Int Int with PrimitiveTypeMode def id compositeKeyrouteStopId round dayCode def dayType DayTypedayCode lazy val routeStops ManyToOne RouteStop ACrossSchemarouteScheduleToRouteConcreteStopRelationrightthis I have NPE while Schemacreate Even though I am able to select and insert in tables that have one columns defined as a postgres enum type by using dbTypemyenumtypeexplicitCast I cant use the column in the where clause If I do I get a orgsquerylSquerylSQLException Exception while executing statement ERROR operator does not exist companytype character varying info Hint No operator matches the given name and argument types You might need to add explicit type casts info Position info errorCode sqlState Table qualifier should be instead of prefix is not supported Exception while executing statement You have an error in your SQL syntax check the manual that corresponds to your MySQL server version for the right syntax to use near name as ruleconf name ruleconf expressioncategory as ruleco at line errorCode sqlState Select ruleconf name as ruleconf name ruleconf expressioncategory as ruleconf expressioncategory ruleconf createdTime as ruleconf createdTime ruleconf interval as ruleconf interval ruleconf id as ruleconf id ruleconf expression as ruleconf expression ruleconf receivers as ruleconf receivers ruleconf origin as ruleconf origin ruleconf status as ruleconf status ruleconf template as ruleconf template ruleconf updatedTime as ruleconf updatedTime ruleconf objectid as ruleconf objectid From ruleconf ruleconf Any clues on what it would take to do this 