 Issue Summary Email always return when theres no customization object set Steps to Reproduce Use latest release Click on send button in my script Viola Error occurred Since i havent add any customization object in the array it shouldnt report errors messageThe to email parameter is requiredfieldpersonalizations to emailhelp Ive tried to remove the personalizations or hardcode the to address but still received the error The function code is pasted below public function sendtoaddress subjectraw text files from new Fromthissender thisname subject subjectraw to new Tonull toaddress content new Contenttexthtml text mail new Mailfrom to subject content mailaddToto mailsetSubjectsubject mailaddContentcontent content new Contenttexthtml text mailaddContentcontent foreach files as file attachment new Attachment attachmentsetContentbase encodefilegetcontentsfile attachmentsetTypeapplicationoctetstream attachmentsetFilenamebasenamefile attachmentsetDispositionattachment attachmentsetContentIdbackup mailaddAttachmentattachment replyto new ReplyTotestexamplecom Optional Name mailsetReplyToreplyto try response thissgclientmailsendpostmail print responsestatusCode n printrresponseheaders print responsebody n Twilio SendGrid specific errors are found here catch Exception e echo Caught exception egetMessage n Technical details sendgridphp Version master latest commit ae d PHP Version I am creating single send from code and it is created I have create contact list first and then add emails under list and then add list id to single send and run curl the single send is created but going to draft when i click on it on sendgrid dashboard it says unable to retrieve single send I cannot preview single send which i have create and also cannot edit Anybody help me I am creating a marketing campaign but it is not working and returning this error errors field null message authorization required This is my code curl curlinit Set some options we are passing in a useragent too here curlsetoptarraycurl CURLOPTRETURNTRANSFER CURLOPTURL CURLOPTUSERAGENT Codular Sample cURL Request CURLOPTPOST CURLOPTPOSTFIELDS title March Newsletter subject New Products for Spring senderid listids array segmentids array categories arrayspring line suppressiongroupid customunsubscribeurl ippool marketing htmlcontent titletitle Check out our spring line plaincontent Check out our spring line Send the request save response to resp resp curlexeccurl Close request to clear up some resources curlclosecurl Please clear about listids segmentids senderid suppressiongroupid Hi I am new to sendgrid v API I am able to send simple email using version but I am not getting the same result sending a simple email using version And for the future how can I add a CSV file as an attachment on the same email Please help me out to resolve my issue Thanking you in advance Issue Summary Sending email to an email address which has unicode characters in local part example fran oisdomaintld results in an error using the sendgridphp library Steps to Reproduce email new SendGrid Mail Mail emailsetSubjectMy Subject emailaddTofran oisdomaintld results in PHP Fatal error Uncaught SendGrid Mail TypeException emailAddress must be valid and of type string in vendorsendgridsendgridlibmailEmailAddressphp SendGrid Mail EmailAddresssetEmailAddressfran xC xA ois This is triggered by PHP allows an additional flag FILTERFLAGEMAILUNICODE to filtervar when used with FILTERVALIDATEEMAIL to allow unicode in the local part of an email address the part before the Unless there is a particularly good reason to block this here a simple change is needed on the above referenced line filtervaremailAddress FILTERVALIDATEEMAIL FILTERFLAGEMAILUNICODE I can create a pull request Technical details sendgridphp Version master latest commit fa d ae f a a e ed f ad d PHP Version Deprecation Notices caused by unneeded SendGrid psr autoload Deprecation Notices caused by test subdirectories same namespace in different directories Remaining Deprecation Notices by invalid class names Executed PHPUnit tests using Prism but ignored results due to unknown status of working SendGrid API functions or test results caused by older PHPUnit version We appreciate the effort for this pull request but before that please make sure you read the contribution guidelines given above then fill out the blanks below All third party contributors acknowledge that any contributions they provide will be made under the same open source license that the open source project is provided under Please enter each Issue number you are resolving in your PR after one of the following words Fixes Closes Resolves This will autolink these issues and close them when this PR is merged eg Fixes Closes Fixes Checklist X I acknowledge that all my contributions will be made under the projects license X I have made a material change to the repo functionality testing spelling grammar I have read the Contribution Guide and my PR follows them I updated my branch with the development branch I have added tests that prove my fix is effective or that my feature works I have added necessary documentation about the functionality in the appropriate md file I have added in line documentation to the code I modified Short description of what this PR does Composerjson Removed unneeded PSR autoload entry to load the lib directory Adjusted namespace of files in test to comply with PSR class loading Renamed some test files which contains different class name If you have questions please send an email to Twilio Sendgrid mailtodxsendgridcom or file a Github Issue in this repository Currently I try to improve PHPDoc on this library branch master due to the missing throws TypeException parts In SendGridphp some parameters dont have the proper PHPDoc types which make it hard to calculate methods using PhpStorm in tests Is there a reason the next changes arent allowed php use SendGrid Client use SendGrid Mail Mail use SendGrid Response and php var string Namespace protected namespace SendGrid var Client Client public client var string Version public version selfVERSION next question According to this issue and absence of DynamicTemplateData class I think type hints for DynamicTemplateData may be changed Can these be replaced safely by Substitution Thats it for now Issue Summary I have just upgraded my integration code to use the latest x branch of this library I am getting the error Missing JSON Body when I try to send my messages I have confirmed in the library ClientcreateCurlOptions that the encodedBody is nonempty JSON Can you help me know where to look for this issue Technical details sendgridphp Version from packagistorg PHP Version as of May Were using the library to send a single template with substitutions to many recipients They should not get each others information thus we dont want a single email with everyone in the ToCc field Weve used v of the library with success however since v of the library theres a bug in the usage of the Personalization object We had to change our implementation due to this and made a mistake in this change which has caused a data leak of our customers We now found a safe way to do this in v but this is not a very common way and most other ways to do this leak data or dont send a correct email Theres a few different methods we know of Using MailaddPersonalization see We were using this and it seems the most nice way However since v this causes exceptions maybe also v didnt test that see Using MailaddTo with TosetSubstitutions see We used this as a replacement in v We thought using the substitutions would cause the library or the API to split it into multiple recipients However this caused a single email to multiple recipients in the Toheader and only the last recipients substitution added to be used Using MailaddBcc with BccsetSubstitutions see We tested this as well as a replacement for This resulted in a single email with everyone in the bcc thats good but the substitutions were completely ignored thats bad Using MailaddPersonalization but using MailaddTo with TosetSubstitutions for the first recipient see This is the variant were using right now and it seems to fix the bug of However it feels really weird to use it like this and makes for hard to read code Using a custom generated json blob to talk to the API see We never tried this but it is adviced by thinkingserious in as a work around for the bug of It is very error prone though And as it completely ignores the library we could just as well do an own Guzzle call Sending separate emails While obvisouly theoretically a working solution it costs both us and SendGrid performance and bandwidth A fix for the bug in was made in half a year ago However no release has been issued since It would be great if we can get a release ASAP for this fix Next to that the usage patterns of and should be improved Either the library should actually use different personalizations including correct substitutions Or it should thrown an exception when trying to use substitutions for the addToaddBcc methods I think on top the library could be improved in its architecture and coding standards Ive been diving into the code a little and find it very hard to find out what actually happens when using these different methods Like how and when the Personalization objects are created Right now the only way to discover the outcome is to adjust the API host and test the output of the API call Cumbersome at least Also it seems nowhere are there any checks on data integrety causing the issues of and If this is all improved Id love to be able to call a method like MailwillUseSeparateEmailsForAllRecipients to verify that our usage is correct in automated processes and unit tests The data leak we had is our own fault But it would help a lot if the library is less buggy and has more safe guards to do things right This unclarity of how to do it properly is affecting multiple customers see I love to hear and help out where possible Issue Summary What would be the best way to get Contact ID after insertion In my case Contact is in my database and I need to update the Sendgrid Contact ID field for further use Steps to Reproduce Insert Contact using API and PUT contacts Search for Contact if contains email contactssearch What method should be used instead of the previous step and Technical details sendgridphp Version master latest commit commit number PHP Version as of May 