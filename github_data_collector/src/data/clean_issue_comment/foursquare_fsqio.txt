Hello I was trying to use the buildgen plugin and it looks like pants development has left it in the dust eg within the plugin source theres a from pantsbuildgraphsourcemapper import LazySourceMapper which no longer exists within pants since or so Is there an updated version of buildgen which hasnt been upstreamed yet or has the project been abandoned Hello Im running into an issue using the latest fsqio master where ivy is consistently unable to resolve hadooplzo and fails to run servepy NOT FOUND comhadoopgplcompressionhadooplzo hadooplzojar ms maventwttrcommaven tried Im not all too familiar with the dependency management aspects of twofishes Im running this from an ubuntu docker container and everything has worked historically until now Any recommendations on how to figure out whats going on solve for this I would greatly appreciate it Strangely when I git clone the fsqio repo and run servepy from the command line on an Amazon Linux EC instance it works perfectly No dependency issues I need to run it from a docker container though preferably The thrift value below does not compile Link to discussion in code const mapstring liststring NamesToUrls myName Error stderr SLF J Failed to load class orgslf jimplStaticLoggerBinder SLF J Defaulting to nooperation NOP logger implementation SLF J See for further details javalangException unable to parse map value myName at iofsqspindlecodegenruntimeMapRenderTyperenderValueRenderTypescala at iofsqspindlecodegenruntimeScalaConstvalueOptionScalaConstscala at srcresourcesiofsqsspcodegenscalascalateconstantssspanonfunscalaterender applyconstantssspscala at srcresourcesiofsqsspcodegenscalascalateconstantssspanonfunscalaterender applyconstantssspscala at scalacollectionimmutableListforeachListscala at srcresourcesiofsqsspcodegenscalascalateconstantssspscalaterenderconstantssspscala at srcresourcesiofsqsspcodegenscalascalateconstantsssprenderconstantssspscala at orgfusesourcescalateRenderContextanonfunrender anonfunapplymcVsp applymcVspRenderContextscala at orgfusesourcescalateRenderContextanonfunrender anonfunapplymcVsp applyRenderContextscala at orgfusesourcescalateRenderContextanonfunrender anonfunapplymcVsp applyRenderContextscala at orgfusesourcescalateRenderContextclasswithUriRenderContextscala at orgfusesourcescalateDefaultRenderContextwithUriDefaultRenderContextscala at orgfusesourcescalateRenderContextanonfunrender applymcVspRenderContextscala at orgfusesourcescalateRenderContextanonfunrender applyRenderContextscala at orgfusesourcescalateRenderContextanonfunrender applyRenderContextscala at orgfusesourcescalateRenderContextclasswithAttributesRenderContextscala at orgfusesourcescalateDefaultRenderContextwithAttributesDefaultRenderContextscala at orgfusesourcescalateRenderContextclassrenderRenderContextscala at orgfusesourcescalateDefaultRenderContextrenderDefaultRenderContextscala at srcresourcesiofsqsspcodegenscalascalaterecordsspscalaterenderrecordsspscala at srcresourcesiofsqsspcodegenscalascalaterecordssprenderrecordsspscala at orgfusesourcescalatelayoutNullLayoutStrategylayoutLayoutStrategyscala at orgfusesourcescalateTemplateEngineanonfunlayout anonfunapplymcVsp applymcVspTemplateEnginescala at orgfusesourcescalateTemplateEngineanonfunlayout anonfunapplymcVsp applyTemplateEnginescala at orgfusesourcescalateTemplateEngineanonfunlayout anonfunapplymcVsp applyTemplateEnginescala at orgfusesourcescalateRenderContextclasswithUriRenderContextscala at orgfusesourcescalateDefaultRenderContextwithUriDefaultRenderContextscala at orgfusesourcescalateTemplateEngineanonfunlayout applymcVspTemplateEnginescala at orgfusesourcescalateTemplateEngineanonfunlayout applyTemplateEnginescala at orgfusesourcescalateTemplateEngineanonfunlayout applyTemplateEnginescala at orgfusesourcescalateRenderContextusingRenderContextscala at orgfusesourcescalateTemplateEnginelayoutTemplateEnginescala at orgfusesourcescalateTemplateEnginelayoutTemplateEnginescala at orgfusesourcescalateTemplateEnginelayoutTemplateEnginescala at iofsqspindlecodegenbinaryThriftCodegenanonfuncompile applyThriftCodegenscala at iofsqspindlecodegenbinaryThriftCodegenanonfuncompile applyThriftCodegenscala at scalacollectionimmutableListforeachListscala at iofsqspindlecodegenbinaryThriftCodegencompileThriftCodegenscala at iofsqspindlecodegenbinaryThriftCodegenmainThriftCodegenscala at iofsqspindlecodegenbinaryThriftCodegenmainThriftCodegenscala at sunreflectNativeMethodAccessorImplinvoke Native Method at sunreflectNativeMethodAccessorImplinvokeNativeMethodAccessorImpljava at sunreflectDelegatingMethodAccessorImplinvokeDelegatingMethodAccessorImpljava at javalangreflectMethodinvokeMethodjava at commartiansoftwarenailgunNGSessionrunNGSessionjava Caused by scalaMatchError LjavalangString cb dc of class LjavalangString at iofsqspindlecodegenruntimeMapRenderTypeanonfun applyRenderTypescala at iofsqspindlecodegenruntimeMapRenderTypeanonfun applyRenderTypescala at scalacollectionTraversableLikeanonfunflatMap applyTraversableLikescala at scalacollectionTraversableLikeanonfunflatMap applyTraversableLikescala at scalacollectionIndexedSeqOptimizedclassforeachIndexedSeqOptimizedscala at scalacollectionmutableArrayOpsofRefforeachArrayOpsscala at scalacollectionTraversableLikeclassflatMapTraversableLikescala at scalacollectionmutableArrayOpsofRefflatMapArrayOpsscala at iofsqspindlecodegenruntimeMapRenderTyperenderValueRenderTypescala more stdout Hi Ive been trying to get twofishes working with docker but your image pulls precompiled data from twofishesnet which seems to be down Will twofishes be put back up If not would it be possible to get a link to the latest precompiled data I am having trouble compiling it myself and I have resorted to using a precompiled version that I found in the DSTK EC AMI Thanks During importing the data into the DB with srcjvmiofsqtwofishesscriptsparsepy w pwddata the indexer crashed with the following error message After the crash the indexer was stuck doing nothing and the no more records were processed Processed data was downloaded with srcjvmiofsqtwofishesscriptsdownloadworldsh INFO iftindexeroutputPrefixIndexer done with of prefixes INFO iftindexeroutputPrefixIndexer done with of prefixes Exception in thread main iofsqrogueRogueException Mongo query on geocoder dbnameindexfind name regex options excludeFromPrefixIndex ne truesort pop limit failed after ms at iofsqrogueadapterBlockingMongoClientAdapterrunCommandBlockingMongoClientAdapterscala at iofsqrogueadapterBlockingMongoClientAdapterrunCommandBlockingMongoClientAdapterscala at iofsqrogueadapterMongoClientAdapterqueryRunnerMongoClientAdapterscala at iofsqrogueadapterMongoClientAdapterqueryMongoClientAdapterscala at iofsqroguequeryQueryExecutorfetchQueryExecutorscala at iofsqtwofishesindexeroutputPrefixIndexergetRecordsByPrefixPrefixIndexerscala at iofsqtwofishesindexeroutputPrefixIndexeranonfunwriteIndexImpl applyPrefixIndexerscala at iofsqtwofishesindexeroutputPrefixIndexeranonfunwriteIndexImpl applyPrefixIndexerscala at scalacollectionTraversableLikeWithFilteranonfunforeach applyTraversableLikescala at scalacollectionimmutableListforeachListscala at scalacollectionTraversableLikeWithFilterforeachTraversableLikescala at iofsqtwofishesindexeroutputPrefixIndexerwriteIndexImplPrefixIndexerscala at iofsqtwofishesindexeroutputIndexeranonfunwriteIndex applymcVspIndexerscala at iofsqtwofishesindexeroutputIndexeranonfunwriteIndex applyIndexerscala at iofsqtwofishesindexeroutputIndexeranonfunwriteIndex applyIndexerscala at iofsqtwofishesutilDurationUtilsinNanosecondsDurationUtilsscala at iofsqtwofishesutilDurationUtilsclasslogDurationDurationUtilsscala at iofsqtwofishesindexeroutputIndexerlogDurationIndexerscala at iofsqtwofishesindexeroutputIndexerwriteIndexIndexerscala at iofsqtwofishesindexeroutputNameIndexerwriteIndexImplNameIndexerscala at iofsqtwofishesindexeroutputIndexeranonfunwriteIndex applymcVspIndexerscala at iofsqtwofishesindexeroutputIndexeranonfunwriteIndex applyIndexerscala at iofsqtwofishesindexeroutputIndexeranonfunwriteIndex applyIndexerscala at iofsqtwofishesutilDurationUtilsinNanosecondsDurationUtilsscala at iofsqtwofishesutilDurationUtilsclasslogDurationDurationUtilsscala at iofsqtwofishesindexeroutputIndexerlogDurationIndexerscala at iofsqtwofishesindexeroutputIndexerwriteIndexIndexerscala at iofsqtwofishesindexeroutputOutputIndexesbuildIndexesOutputHFilescala at iofsqtwofishesindexerimportersgeonamesGeonamesParserwriteIndexesGeonamesParserscala at iofsqtwofishesindexerimportersgeonamesGeonamesParsermainGeonamesParserscala at iofsqtwofishesindexerimportersgeonamesGeonamesParsermainGeonamesParserscala Caused by commongodbMongoQueryException Query failed with error code and error message Regular expression is invalid invalid UTF string on server at commongodboperationFindOperation callFindOperationjava at commongodboperationFindOperation callFindOperationjava at commongodboperationOperationHelperwithConnectionSourceOperationHelperjava at commongodboperationOperationHelperwithConnectionOperationHelperjava at commongodboperationFindOperationexecuteFindOperationjava at commongodboperationFindOperationexecuteFindOperationjava at commongodbMongoexecuteMongojava at commongodbMongo executeMongojava at commongodbOperationIterableiteratorOperationIterablejava at commongodbOperationIterableforEachOperationIterablejava at commongodbFindIterableImplforEachFindIterableImpljava at iofsqrogueadapterBlockingMongoClientAdapterforEachProcessorBlockingMongoClientAdapterscala at iofsqrogueadapterBlockingMongoClientAdapterforEachProcessorBlockingMongoClientAdapterscala at iofsqrogueadapterMongoClientAdapteranonfunquery applyMongoClientAdapterscala at iofsqrogueadapterBlockingMongoClientAdapterfindImplBlockingMongoClientAdapterscala at iofsqrogueadapterBlockingMongoClientAdapterfindImplBlockingMongoClientAdapterscala at iofsqrogueadapterMongoClientAdapteranonfunqueryRunner applyMongoClientAdapterscala at iofsqrogueutilDefaultQueryLoggeronExecuteQueryQueryLoggerscala at iofsqrogueadapterBlockingMongoClientAdapterrunCommandBlockingMongoClientAdapterscala more I have const i MaxTotalAttachmentBytes const i MaxCoverPhotoBytes MB in my Thrift and get the following when I compile OmersMacBookProsigmamonorepo point omer pants compile srcthrift main To run a reporting server pants server setup parse Executing tasks in goals bootstrap imports unpackjars deferredsources gen jvmplatformvalidate resolve compile bootstrap jardependencymanagement bootstrapjvmtools imports ivyimports unpackjars unpackjars deferredsources deferredsources gen spindle thrift protoc antlr ragel jaxb wire jvmplatformvalidate jvmplatformvalidate WARN No default jvm platform is defined cache No cached artifacts for targets Invalidated targets resolve ivy compile compilejvmprepcommand jvmprepcommand compileprepcommand compile zinc cache No cached artifacts for target Invalidated target isolationzincpoolbootstrap Compiling zinc sources in target pantsdgenspindlesrcjvmsrcthriftcomthesigmameritmeritscala compile zinc info Compiling Scala source and Java source to Usersomercodesigmamonorepo point pantsdcompilezinc d cf pantsdgenspindlesrcjvmsrcthriftcomthesigmameritmeritscalacurrentclasses error Usersomercodesigmamonorepo point pantsdgenspindlesrcjvmcomthesigmameritgenmeritscala integer number too large error val MaxTotalAttachmentBytes Long error error Usersomercodesigmamonorepo point pantsdgenspindlesrcjvmcomthesigmameritgenmeritscala expected but val found error val MaxCoverPhotoBytes Long error error two errors found error Compile failed at Jul PM s compilepantsdgenspindlesrcjvmsrcthriftcomthesigmameritmeritscala failed Zinc compile failed FAILURE Compilation failure Failed jobs compilepantsdgenspindlesrcjvmsrcthriftcomthesigmameritmeritscala complete FAILURE It seems like just having Spindle output L instead of would fix the problem Hi Ive followed this and put my shape files into dataprivatepolygons When I run the build with srcjvmiofsqtwofishesscriptsparsepy world outputs coveringindex outputs interiorindex outputprefixindex outputrevgeoindex yesiamsure it uses significantly more disk space than without the shapefiles in place however the resulting indexes are no bigger Is there some other step I need to run to export the polygons as well First thanks to the Foursquare team for opening such a great resource Ive uncovered content issues realizing some are TwoFishesrelevant while others Geonamesrelevant Countries East Germany should not be a country Even shows on Foursquarecom strange Democratic Republic of Congo and Republic of Congo are being treated as the same country in foursquarecom and latest index build Strangely the TwoFishes demo recognizes them as two different countries as they should be Cities in American Samoa follow wrong nomenclature For example Pago Pago is labeled as Pago Pago Eastern District instead of Pago Pago American Samoa eastern section is a division within American Samoa To be consistent all or no territories should be included Currently only some territories are included Those missing include American Samoa AS Antarctica AQ Bouvet Island BV French Southern Territories TF Isle of Man IM Tokelau TK I omit Western Sahara from this list because it is disputed however the same can be said of Antarctica Rankings Madrid Colombia ranks above Madrid Spain even with local bias this seems incorrect Consistent Treatment of Woetype It seems impossible to truly isolate townscities because while most townscities are in woetype some are also in woe type for example Westport MA But if we open applications to woetype Then we run into a lot of duplication issues such as Johannesburg below Same city multiple ID s these are just a few examples Sometimes within same woetype Other times span multiple woetypes Two instances of Johannesburg South Africa Johannesburg and City of Johannesburg Nothing online indicates there is a parental administrative area over Johannesburg with the same name Westport Township vs Town of Westport vs Westport SD Town of Howell NJ vs Howell NJ Bounding Boxes Bounding box for US and Russia seem to be entire globe on twofishes demo and latest index Though foursquare site seems to correct these two bounding boxes Hi If I do a query for New York City the returned data contains refrences to NYCs parents That data allows me to traverse up and see that NYC lies in the state New York and that the state New York lies in the US Now I would like to do the opposite That is list all the cities in the US It doesnt look like Twofishes can do this but I thought it was worth asking the question Thanks Twitter consumes some of the twofishes libraries and are interested in helping to get a branch started This is a notice of our intent to do so