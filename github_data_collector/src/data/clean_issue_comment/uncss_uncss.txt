 uncssme is a site created with UnCSS to help developers dry their stylesheets Hope you like it Bumps handlebars from to details summaryChangelogsummary Sourced from handlebarss changelog v November th Bugfixes fix add noprototypebuiltins eslintrule and fix all occurences f f d fix add more properties required to be enumerable Chores Build fix use instead of c b f add chai and dirtychai and sinon for cleaner testassertions and spies deprecate old assertionmethods e e ba dad a Security The properties proto defineGetter defineSetter and lookupGetter have been added to the list of properties that must be enumerable If a property by that name is found and not enumerable on its parent it will silently evaluate to undefined This is done in both the compiled template and the lookuphelper This will prevent new RemoteCodeExecution exploits that have been published recently Compatibility notes Due to the securityfixes The semantics of the templates using proto defineGetter defineSetter and lookupGetter in the respect that those expression now return undefined rather than their actual value from the proto The semantics have not changed in cases where the properties are enumerable as in js proto some string The change may be breaking in that respect but we still only increase the patchversion because the incompatible usecases are not intended undocumented and far less important than fixing RemoteCodeExecution exploits on existing systems Commits v November th Bugfixes fix use Stringfield in lookup when checking for constructor d test add fluent API for testing Handlebars c ac c Compatibility notes no incompatibility are to be expected trtable truncated details details summaryCommitssummary c c b v c d Update release notes f f d fix add noprototypebuiltins eslintrule and fix all occurences fix add more properties required to be enumerable ba testchore add chaiexpect and sinon to runtimeenvironment dad test add sinon as global variable to eslint in the specs a test add sinonjs for spies deprecate current assertions e e chore add chai and dirtychai for better test assertions c b f fix use instead of de d v Additional commits viewable in compare view details br Dependabot compatibility score Dependabot will resolve any conflicts with this PR as long as you dont alter it yourself You can also trigger a rebase manually by commenting dependabot rebase dependabotautomergestart dependabotautomergeend details summaryDependabot commands and optionssummary br You can trigger Dependabot actions by commenting on this PR dependabot rebase will rebase this PR dependabot recreate will recreate this PR overwriting any edits that have been made to it dependabot merge will merge this PR after your CI passes on it dependabot squash and merge will squash and merge this PR after your CI passes on it dependabot cancel merge will cancel a previously requested merge and block automerging dependabot reopen will reopen this PR if it is closed dependabot ignore this patchminormajor version will close this PR and stop Dependabot creating any more for this minormajor version unless you reopen the PR or upgrade to it yourself dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency unless you reopen the PR or upgrade to it yourself dependabot use these labels will set the current labels as the default for future PRs for this repo and language dependabot use these reviewers will set the current reviewers as the default for future PRs for this repo and language dependabot use these assignees will set the current assignees as the default for future PRs for this repo and language dependabot use this milestone will set the current milestone as the default for future PRs for this repo and language You can disable automated security fix PRs for this repo from the Security Alerts page details Hi Im new to node trying a Windows node script to strip css from local files Node script path is C Users admin AppData Roaming npm main uncsssitejs Node modules are at C Users admin AppData Roaming npm main nodemodules Target html and css files are at C Users admin AppData Roaming npm main dev If I pass filepath from fs C Users admin AppData Roaming npm main dev indexhtml directly into jsdom using jsdomfromFile everything works fine If I pass the same filepath into uncss I get a jsdom error Error Tried to fetch URL with invalid scheme c from jsdomlibjsdombrowserresourcesresourceloaderjs The problem occurs after globsync in uncsssrcuncssjs when an isUrl test on the filepath returns TRUE see below Because of this files that are passed to the uncsssrcjsdomjs fromSource function do not use JSDOMfromFile and produce the invalid scheme error If I dont pass the full fs filepath into uncss I get an uncss error Error UnCSS no HTML files found from uncsssrcuncssjs Im sure Im missing something obvious but given the directory structure Im using what path can I pass to uncss that can be passed onto jsdom correctly Thanks get files using fs etc const fs requirefs files C Users admin AppData Roaming npm main dev indexhtml C Users admin AppData Roaming npm main dev SiteMaphtml then uncss passes a file to the function getHTML in uncsssrcuncssjs test for URL is FALSE isURLC Users admin AppData Roaming npm main dev indexhtml false ie correct for jsdomfromFile files flattenfilesmapfile if isURLfile isHTMLfile return globsyncfile return file but after globsync the test for URL is TRUE isURLCUsersadminAppDataRoamingnpmmaindevindexhtml true ie incorrect for jsdomfromFile Passing same filepath directly to jsdomfromFile works fine because the test for URL is correctly FALSE isURLC Users admin AppData Roaming npm main dev indexhtml false const jsdom requirejsdomJSDOM jsdomfromFileCUsersadminAppDataRoamingnpmmaindevindexhtmlurlCUsersadminAppDataRoamingnpmmaindevrunScriptsdangerouslyresourcesusablethenfunctiondom var window domwindowdocument windowdocument consolelogtitle is documentquerySelectorAllh innerHTML catch functioneconsoleloge nodev npm uncss isabsoluteurl jsdom Im using Bulma and Im trying to ignore navbarburgerisactive because its a class you set on runtime in bulma isactive its used a lot in different components Im using this configuration javascript options banner false csspath htmlroot src ignore isactive navbarburgerisactive navbarmenuisactive Added at runtime jsdom userAgent Mozilla iPhone CPU iPhone OS like Mac OS X report true stylesheets stylecss timeout userAgent Mozilla iPhone CPU iPhone OS like Mac OS X calling to javascript uncssfiles options functionerror output Here are the elements I want to keep on the CSS output css navbarburgerhover backgroundcolor rgba navbarburgerisactive spannthchild webkittransform translateY px rotate deg transform translateY px rotate deg navbarburgerisactive spannthchild opacity navbarburgerisactive spannthchild webkittransform translateY px rotate deg transform translateY px rotate deg Also I have tried the ignore selector on the CSS but is not working ISSUE It seems its partially working because for navbarmenuisactive its working fine but none for navbarburger dont know why The deleted lines on the last version shouldnt be deleted When the timeout removed the scripts can not be loaded Issue might be related to this issue css uncsshtml htmlforuncss html where replaced in paths its equal for settings to one CSS file js uncsshtml htmlforuncsshtml When the css file starts with the Byte Order Mark and the first line is namespace the parser fails css input Unknown word uncss filename testsinputwithbomcss namespace testbom The solution taken to deal with it is to strip the BOM at the beginning of the file It doesnt seem to be problematic with media or with import Any reference that includes a query string does not work as uncss or support modules can not find the file Using link hrefstylesmainmincsscb relstylesheet mediaall uncss will look for the file called mainmincsscb Error Error Could not load script fileEwebsitestprodscriptsmainminjscb at onErrorWrapped E websites t nodemodules uncss nodemodules jsdom lib jsdom browser resources perdocumentresourceloaderjs at Objectcheck E websites t nodemodules uncss nodemodules jsdom lib jsdom browser resources resourcequeuejs at requestthencatcherr E websites t nodemodules uncss nodemodules jsdom lib jsdom browser resources resourcequeuejs Error ENOENT no such file or directory open E websites t prod scripts mainminjscb errno code ENOENT syscall open path E websites t prod scripts mainminjscb Error Could not load script fileEwebsitestprodscriptsmainminjscb at onErrorWrapped E websites t nodemodules uncss nodemodules jsdom lib jsdom browser resources perdocumentresourceloaderjs at Objectcheck E websites t nodemodules uncss nodemodules jsdom lib jsdom browser resources resourcequeuejs at requestthencatcherr E websites t nodemodules uncss nodemodules jsdom lib jsdom browser resources resourcequeuejs Error request canceled by user at Promisepromiseabort E websites t nodemodules uncss nodemodules jsdom lib jsdom browser resources resourceloaderjs at RequestManagerclose E websites t nodemodules uncss nodemodules jsdom lib jsdom browser resources requestmanagerjs at Windowclose E websites t nodemodules uncss nodemodules jsdom lib jsdom browser Windowjs at pagesforEach E websites t nodemodules uncss src uncssjs at ArrayforEach anonymous at cleanup E websites t nodemodules uncss src uncssjs isAbortError true Screenshot of code uncss query string issue Hello I am trying to clean css files from some epubs and sometimes they have XPGT stylesheets referenced They are usually referenced this way html link rel stylesheet type applicationadobepagetemplatexml href templatexpgt Because it is not css uncss crashes when parsing the file Would it be possible for uncss to ignore this kind of proprietary stylesheets that are not css 