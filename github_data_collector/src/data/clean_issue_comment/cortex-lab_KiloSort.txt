Hi We noticed that sometimes a single spike is counted twice within a single template Please see the attached images The clusters and were originally sorted as a single template but we separated them out for visualization As you can see in the Trace View exactly the same event is counted in both and There is a slight offset in two detected time windows as you see in the comparison between This doublecounting often causes a peak at the center of the crosscorrelogram and it unreasonably increase the violation of refractory period Im not sure if this issue is related to the issues or but this does not look like a counting of the residual after subtraction since the Trace View looks like doublecounting of exactly the same thing I would appreciate it if you could help us identify the cause of this Thanks Hiroyuki cluster cluster clusters Hello all Im trying to run kilosort on channel data For some of our rats the data is pretty quiet For those few rats I get this error for others there is no issue running kilosort Error using randperm K must be less than or equal to N Error in extractTemplatesfromSnippets line wTEMP dd randpermsizedd nPCs Error in learnTemplates line wTEMP wPCA extractTemplatesfromSnippetsrez NrankPC Error in learnAndSolve b line rez learnTemplatesrez iorder Thanks in advance mexGPUall seemed to run and complete without a hitch Here is the error CUDADevice with properties Name Quadro P Index ComputeCapability SupportsDouble DriverVersion ToolkitVersion MaxThreadsPerBlock MaxShmemPerBlock MaxThreadBlockSize MaxGridSize e SIMDWidth TotalMemory e MultiprocessorCount ClockRateKHz ComputeMode Default GPUOverlapsTransfers KernelExecutionTimeout CanMapHostMemory DeviceSupported DeviceSelected ver MATLAB Version R a MATLAB License Number Operating System Microsoft Windows Pro Version Build Java Version Java b with Oracle Corporation Java HotSpotTM Bit Server VM mixed mode Hello I am trying to set up kilosort but I am keep running into the same problem Kilosort gives me an error Error running kilosort An unexpected error occurred trying to launch a kernel The CUDA error was invalid argument Saving data to filename Error saving data for phy Reference to nonexistend field Wphy I use Matlab b and CUDA I am working with Ubuntu I tried first to compile the file mexGPUall file and I got response that MEX completed successfully The CUDA error appears later in preprocessing process after the main optimization I tried to change CUDA version and update my NVIDIA drivers but so far that didnt help Also I am using NVIDA GPX and GB memory Could you please help me with this issue Hi Im using Kilosort I import the data for a ch electrode with a set maximum of clusters everything is fine up to this point Now when I use the Phy GUI and manually sort the clusters after merging clusters the GUI creates a new clusterID and assigned it to a channel You save and it creates the clustergrouptsv file which I can read Now my cluster list has like clusters with clusterID up to because of the mergings The question is how would I figure out the location of the new clusters on channels because the Rez file or featuresindnpy file has the features listed with assuming there are clusters before sorting but after sorting the clustertsv file has different cluster IDs Would you help me with this issue Hi I am trying to run Kilsort on a channel linear probe data recorded from the hippocampus However I am struggling with the coordinates Since it is a linear probe will the variables xcoords and ycoords be the following x ones y Kindly help me out Thank you Sincerely Ahnaf I dont know whether its a version problem or not I am using phy and kilosort Id like to expand some of the windows to have a better view of details But I need to redo arrangement of windows for each sorting folder Not a big issue but will appreciate if I can save the layout for my data analysis Thanks a lot Could you please explain how to obtain the spike detection threshold form the rezmat file It seems this is specified in opSpTh as a multiple of standard deviations I am guessing the SD deviation is calculated as std from the preprocessed analog data vector How can I access the preprocessed data to calculate the exact threshold value and extract individual spike waveforms Thank you Greetings Our lab is setting up for Neuropixel recording and I was wondering if you had any suggestions for the recommended GPU for using KiloSort to process that large volume of data Weve not built the machine yet so any suggestions you might have as far as the best version of Matlab that would work with the recommended GPU would be very helpful Thanks Adam Hi Im having some trouble figuring out how to assign an identified unit to a channel that is recorded from Does Kilosort have an output file that has this information ie unit channel unit channel etc Thank you