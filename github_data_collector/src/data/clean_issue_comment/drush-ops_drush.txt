Loading the template ensures the compiled template is cached It is not necessary to also render it drushopsdrush Describe the bug Im trying to use Drush with Drupal s new config transform features While investigating some strange behavior with drush configimport being able to find my custom sync directory I noticed that as of Drush you are still using the now defunct configgetconfigdirectoryCONFIGSYNCDIRECTORY See Expected behavior I would expect an execution of drush configimport to find my custom config dir configured with settings configsyncdirectory somepath to be used as the source of the import I think some refactoring might need to be done to remove labels and change to the recommended Settingsgetconfigsyncdirectory as config importing no longer supports multiple locations System Configuration Q A Drush version Drupal version PHP version OS Mac Additional information Add any other context about the problem here Describe the bug When running the below command migration stops on fatal error onafter Upgrading searchpage bash drush migrateupgrade legacydbkeylegacy legacyrootusrsharenginxhtml legacydbprefixsjoskogen legacyrootusrsharenginxhtml To Reproduce A Drupal source site version LTS d ltsdrupalreleasestag to migrate to Drupal target Relevant part of composerjson I hope Drupal installed yesterday following this guide json require composerinstallers drupalcaptcha beta drupalcorecomposerscaffold drupalcoreprojectmessage drupalcorerecommended drupaldevel drupalgoogleanalytics drupalmigrateplus drupalmigratetools drupalmigrateupgrade drupalpathauto drupalsemanticviews drupalsimplereservation drupalsmtp beta drushdrush On the D site the following noncore modules are installed and active and also the core search module is installed and active sql SELECT filename FROM sjoskogensystem WHERE status AND type module AND filename LIKE sitesall OR filename LIKE search table modulessearchsearchmodule sitesallmodulescaptchacaptchamodule sitesallmodulescaptchaimagecaptchaimagecaptchamodule sitesallmodulescckcontentmodule sitesallmodulescckmodulesoptionwidgetsoptionwidgetsmodule sitesallmodulescckmodulestexttextmodule sitesallmodulescckmodulesuserreferenceuserreferencemodule sitesallmodulescolorboxcolorboxmodule sitesallmodulesdatedatedatemodule sitesallmodulesdatedateapimodule sitesallmodulesdatedatepopupdatepopupmodule sitesallmodulesdatedatetimezonedatetimezonemodule sitesallmodulesfilefieldfilefieldmodule sitesallmodulesgoogleanalyticsgoogleanalyticsmodule sitesallmodulesimageapiimageapimodule sitesallmodulesimageapiimageapigdmodule sitesallmodulesimageapiimageapiimagemagickmodule sitesallmodulesimagecacheimagecachemodule sitesallmodulesimagecacheimagecacheuimodule sitesallmodulesimagefieldimagefieldmodule sitesallmodulesjqueryuijqueryuimodule sitesallmodulesmydropwizardmydropwizardmodule sitesallmodulessemanticviewssemanticviewsmodule sitesallmodulessimplereservationsimplereservationmodule sitesallmodulessmtpsmtpmodule sitesallmodulestransliterationtransliterationmodule sitesallmodulesviewsviewsuimodule sitesallmoduleswysiwygwysiwygmodule sitesallmodulespathautopathautomodule sitesallmodulestaxonomydefaultstaxonomydefaultsmodule sitesallmodulescckmodulesfieldgroupfieldgroupmodule sitesallmodulestaxonomyaccesstaxonomyaccessmodule sitesallmodulestokentokenmodule sitesallmodulesviewsviewsmodule sitesallmodulesjqueryupdatejqueryupdatemodule sitesallmodulesverticaltabsverticaltabsmodule On the D site I enable the following modules after doing a standard installation profile bash drush pmenable migratedrupalui smtp simplereservation migrateplus migratetools googleanalytics update syslog migratedrupal migrate media forum entityreference captcha migrateupgrade telephone pathauto semanticviews Expected behavior Even if not all data can be migrated due to lack of support in target modules I think the fatal error is unwanted Actual behavior log Upgrading contactcategory Upgrading d dateformats Upgrading d dblogsettings Upgrading d filterformat error Missing filter plugin filternull Upgrading d imagecachepresets Upgrading d languagecontentmenusettings Upgrading d languagetypes Upgrading d searchsettings Upgrading d syslogsettings Upgrading d systemcron Upgrading d systemdate Upgrading d systemfile Upgrading d systemperformance Upgrading d urlalias Upgrading d usermail Upgrading d usersettings Upgrading filesettings Upgrading localesettings Upgrading menusettings Upgrading searchpage error TypeError Argument passed to Drupal search Plugin ConfigurableSearchPluginBasesetConfiguration must be of the type array null given called in usrsharenginxsjoskogen webcoremodulessearchsrcPluginmigratedestinationEntitySearchPagephp on line in Drupal search Plugin ConfigurableSearchPluginBasesetConfiguration line of usrsharenginxsjoskogen webcoremodulessearchsrcPluginConfigurableSearchPluginBasephp usrsharenginxsjoskogen webcoremodulessearchsrcPluginmigratedestinationEntitySearchPagephp Drupal search Plugin ConfigurableSearchPluginBasesetConfigurationNULL usrsharenginxsjoskogen webcoremodulesmigratesrcPluginmigratedestinationEntityphp Drupal search Plugin migrate destination EntitySearchPageupdateEntityObjectDrupal search Entity SearchPage ObjectDrupal migrate Row usrsharenginxsjoskogen webcoremodulesmigratesrcPluginmigratedestinationEntityConfigBasephp Drupal migrate Plugin migrate destination EntitygetEntityObjectDrupal migrate Row Array usrsharenginxsjoskogen webcoremodulessearchsrcPluginmigratedestinationEntitySearchPagephp Drupal migrate Plugin migrate destination EntityConfigBaseimportObjectDrupal migrate Row Array usrsharenginxsjoskogen webcoremodulesmigratesrcMigrateExecutablephp Drupal search Plugin migrate destination EntitySearchPageimportObjectDrupal migrate Row Array usrsharenginxsjoskogen vendordrushdrushincludesdrushinc Drupal migrate MigrateExecutableimport usrsharenginxsjoskogen vendordrushdrushincludesdrushinc drushcalluserfuncarrayArray Array usrsharenginxsjoskogen webmodulescontribmigrateupgradesrcMigrateUpgradeDrushRunnerphp drushopArray usrsharenginxsjoskogen webmodulescontribmigrateupgradesrcCommandsMigrateUpgradeCommandsphp Drupal migrateupgrade MigrateUpgradeDrushRunnerimport internal function Drupal migrateupgrade Commands MigrateUpgradeCommandsupgradeArray usrsharenginxsjoskogen vendorconsolidationannotatedcommandsrcCommandProcessorphp calluserfuncarrayArray Array usrsharenginxsjoskogen vendorconsolidationannotatedcommandsrcCommandProcessorphp Consolidation AnnotatedCommand CommandProcessorrunCommandCallbackArray ObjectConsolidation AnnotatedCommand CommandData usrsharenginxsjoskogen vendorconsolidationannotatedcommandsrcCommandProcessorphp Consolidation AnnotatedCommand CommandProcessorvalidateRunAndAlterArray Array ObjectConsolidation AnnotatedCommand CommandData usrsharenginxsjoskogen vendorconsolidationannotatedcommandsrcAnnotatedCommandphp Consolidation AnnotatedCommand CommandProcessorprocessObjectSymfony Component Console Output ConsoleOutput Array Array ObjectConsolidation AnnotatedCommand CommandData usrsharenginxsjoskogen vendorsymfonyconsoleCommandCommandphp Consolidation AnnotatedCommand AnnotatedCommandexecuteObjectDrush Symfony DrushArgvInput ObjectSymfony Component Console Output ConsoleOutput usrsharenginxsjoskogen vendorsymfonyconsoleApplicationphp Symfony Component Console Command CommandrunObjectDrush Symfony DrushArgvInput ObjectSymfony Component Console Output ConsoleOutput usrsharenginxsjoskogen vendorsymfonyconsoleApplicationphp Symfony Component Console ApplicationdoRunCommandObjectConsolidation AnnotatedCommand AnnotatedCommand ObjectDrush Symfony DrushArgvInput ObjectSymfony Component Console Output ConsoleOutput usrsharenginxsjoskogen vendorsymfonyconsoleApplicationphp Symfony Component Console ApplicationdoRunObjectDrush Symfony DrushArgvInput ObjectSymfony Component Console Output ConsoleOutput usrsharenginxsjoskogen vendordrushdrushsrcRuntimeRuntimephp Symfony Component Console ApplicationrunObjectDrush Symfony DrushArgvInput ObjectSymfony Component Console Output ConsoleOutput usrsharenginxsjoskogen vendordrushdrushsrcRuntimeRuntimephp Drush Runtime RuntimedoRunArray ObjectSymfony Component Console Output ConsoleOutput usrsharenginxsjoskogen vendordrushdrushdrushphp Drush Runtime RuntimerunArray usrsharenginxsjoskogen vendordrushdrushincludespreflightinc requireusrsharengin pharusrbindrushbindrushphp drushmain usrbindrush requirepharusrbin main TypeError Argument passed to Drupal search Plugin ConfigurableSearchPluginBasesetConfiguration must be of the type array null given called in usrsharenginxsjoskogen webcoremodulessearchsrcPluginmigratedestinationEntitySearchPagephp on line in usrsharenginxsjoskogen webcoremodulessearchsrcPluginConfigurableSearchPluginBasephp on line usrsharenginxsjoskogen webcoremodulessearchsrcPluginmigratedestinationEntitySearchPagephp Drupal search Plugin ConfigurableSearchPluginBasesetConfigurationNULL usrsharenginxsjoskogen webcoremodulesmigratesrcPluginmigratedestinationEntityphp Drupal search Plugin migrate destination EntitySearchPageupdateEntityObjectDrupal search Entity SearchPage ObjectDrupal migrate Row usrsharenginxsjoskogen webcoremodulesmigratesrcPluginmigratedestinationEntityConfigBasephp Drupal migrate Plugin migrate destination EntitygetEntityObjectDrupal migrate Row Array usrsharenginxsjoskogen webcoremodulessearchsrcPluginmigratedestinationEntitySearchPagephp Drupal migrate Plugin migrate destination EntityConfigBaseimportObjectDrupal migrate Row Array usrsharenginxsjoskogen webcoremodulesmigratesrcMigrateExecutablephp Drupal search Plugin migrate destination EntitySearchPageimportObjectDrupal migrate Row Array usrsharenginxsjoskogen vendordrushdrushincludesdrushinc Drupal migrate MigrateExecutableimport usrsharenginxsjoskogen vendordrushdrushincludesdrushinc drushcalluserfuncarrayArray Array usrsharenginxsjoskogen webmodulescontribmigrateupgradesrcMigrateUpgradeDrushRunnerphp drushopArray usrsharenginxsjoskogen webmodulescontribmigrateupgradesrcCommandsMigrateUpgradeCommandsphp Drupal migrateupgrade MigrateUpgradeDrushRunnerimport internal function Drupal migrateupgrade Commands MigrateUpgradeCommandsupgradeArray usrsharenginxsjoskogen vendorconsolidationannotatedcommandsrcCommandProcessorphp calluserfuncarrayArray Array usrsharenginxsjoskogen vendorconsolidationannotatedcommandsrcCommandProcessorphp Consolidation AnnotatedCommand CommandProcessorrunCommandCallbackArray ObjectConsolidation AnnotatedCommand CommandData usrsharenginxsjoskogen vendorconsolidationannotatedcommandsrcCommandProcessorphp Consolidation AnnotatedCommand CommandProcessorvalidateRunAndAlterArray Array ObjectConsolidation AnnotatedCommand CommandData usrsharenginxsjoskogen vendorconsolidationannotatedcommandsrcAnnotatedCommandphp Consolidation AnnotatedCommand CommandProcessorprocessObjectSymfony Component Console Output ConsoleOutput Array Array ObjectConsolidation AnnotatedCommand CommandData usrsharenginxsjoskogen vendorsymfonyconsoleCommandCommandphp Consolidation AnnotatedCommand AnnotatedCommandexecuteObjectDrush Symfony DrushArgvInput ObjectSymfony Component Console Output ConsoleOutput usrsharenginxsjoskogen vendorsymfonyconsoleApplicationphp Symfony Component Console Command CommandrunObjectDrush Symfony DrushArgvInput ObjectSymfony Component Console Output ConsoleOutput usrsharenginxsjoskogen vendorsymfonyconsoleApplicationphp Symfony Component Console ApplicationdoRunCommandObjectConsolidation AnnotatedCommand AnnotatedCommand ObjectDrush Symfony DrushArgvInput ObjectSymfony Component Console Output ConsoleOutput usrsharenginxsjoskogen vendorsymfonyconsoleApplicationphp Symfony Component Console ApplicationdoRunObjectDrush Symfony DrushArgvInput ObjectSymfony Component Console Output ConsoleOutput usrsharenginxsjoskogen vendordrushdrushsrcRuntimeRuntimephp Symfony Component Console ApplicationrunObjectDrush Symfony DrushArgvInput ObjectSymfony Component Console Output ConsoleOutput usrsharenginxsjoskogen vendordrushdrushsrcRuntimeRuntimephp Drush Runtime RuntimedoRunArray ObjectSymfony Component Console Output ConsoleOutput usrsharenginxsjoskogen vendordrushdrushdrushphp Drush Runtime RuntimerunArray usrsharenginxsjoskogen vendordrushdrushincludespreflightinc requireusrsharengin pharusrbindrushbindrushphp drushmain usrbindrush requirepharusrbin main TypeError Argument passed to Drupal search Plugin ConfigurableSearchPluginBasesetConfiguration must be of the type array null given called in usrsharenginxsjoskogen webcoremodulessearchsrcPluginmigratedestinationEntitySearchPagephp on line in Drupal search Plugin ConfigurableSearchPluginBasesetConfiguration line of usrsharenginxsjoskogen webcoremodulessearchsrcPluginConfigurableSearchPluginBasephp warning Drush command terminated abnormally Check for an exit in your Drupal site Workaround Is there another way to do the desired action System Configuration Q A Drush version Drush Launcher Version Drupal version PHP version OS Ubuntu Additional information I downgraded to Drush because Drush was not fully compatible with Migrate Upgrade Describe the bug I am upgrading my Drupal site to Drupal On Windows using minttycygwin env as part of git for windows Performing drush updb y all updates were performed By finishing the update process drush aborted abnormally To Reproduce Install drupal upgrade code base to drupal using composer try drush updb y On Windows Expected behavior drush updb should finish the database updates an exit normally without an error Actual behavior It seems like the database updates were performed normally Only the output cant decode correctly into JSON due to a syntax error There are unescaped quotes at the update messages results query The pathalias entity type has been installed success true type update FULL OUTPUT drush updb y Module Update ID Type Description system hookupdaten Remove pathtemporary config if redundant system hookupdaten Fix systemthemeadmin when the default theme is used as the admin theme system hookupdaten Install the pathalias entity type system hookupdaten Convert path aliases to entities system hookupdaten Change the provider of the pathalias entity type and its base fields layoutbuilderrestrictions hookupdaten Relocate all blockcontent configuration settings under Custom blocks lightninglayout hookupdaten Installs the layoutbuilderstyles module locale hookupdaten Clear Locale project storage to use new all instead of x in URLs medialibrary hookupdaten This update has been removed and will not run medialibrary hookupdaten Creates the medialibrarysettings config object contentmoderation viewsfi postupdate Update the moderation state views field plugin ID eldplug inid fieldgroup postupdate Assign a region to Field Groups medialibrary addbutt postupdate Add edit and delete button to media library view page onstop display ageview medialibrary addlang postupdate Add langcode filters to media library view displays codefil ters medialibrary addstat postupdate Add a status extra filter to the media library view default usextra display filter medialibrary default postupdate Sets admincontentmedia to the table display of the media administ view rativel isttot abledis play medialibrary update postupdate Add non js prefixed classes to checkboxes if not present chec Note the inclusion of update in the function name kboxcla This ensures the function is executed after sses medialibrarypostupdatetabledisplay as hookpostupdateNAME implementations within the same file are executed in alphanumeric order media addstat postupdate Add a status extra filter to the media view default usextra display filter path createl postupdate Create the language content settings configuration object anguage for path aliases content settings system entityr postupdate Populate the new matchlimit setting for the ER eference autocomplete widget autocom pletema tchlimi t system layoutp postupdate Clear the schema cache luginsc hemacha nge taxonomy configur postupdate Add status with settings to all form displays for taxonomy estatus entities fieldw idget text addrequ postupdate Update textwithsummary fields and widgets to add summary iredsum required flags maryfla g views limitop postupdate Define default values for limit operators settings in all eratord filters efaults views removec postupdate Remove core key from views configuration orekey Do you wish to run the specified pending updates yes notice Update started systemupdate notice Update completed systemupdate notice Update started systemupdate notice Update completed systemupdate notice Update started systemupdate notice The pathalias entity type has been installed notice Update completed systemupdate notice Update started systemupdate notice Path aliases have been converted to entities notice Update completed systemupdate notice Update started medialibraryupdate notice Update completed medialibraryupdate notice Update started systemupdate notice Update completed systemupdate notice Update started layoutbuilderrestrictionsupdate notice Update completed layoutbuilderrestrictionsupdate notice Update started lightninglayoutupdate notice Update completed lightninglayoutupdate notice Update started localeupdate notice Update completed localeupdate notice Update started medialibraryupdate notice Update completed medialibraryupdate notice Update started contentmoderationpostupdateviewsfieldpluginid notice Update completed contentmoderationpostupdateviewsfieldpluginid notice Update started fieldgrouppostupdate notice Update completed fieldgrouppostupdate notice Update started medialibrarypostupdateaddbuttonstopageview notice Update completed medialibrarypostupdateaddbuttonstopageview notice Update started medialibrarypostupdateaddlangcodefilters notice The Language filter was added to the default display of the Media library view and the Default translation filter was added to the following displays Widget Widget table notice Update completed medialibrarypostupdateaddlangcodefilters notice Update started medialibrarypostupdateaddstatusextrafilter notice The Published status or admin user filter was added to the Media library view notice Update completed medialibrarypostupdateaddstatusextrafilter notice Update started medialibrarypostupdatedefaultadministrativelisttotabledisplay notice Update completed medialibrarypostupdatedefaultadministrativelisttotabledisplay notice Update started medialibrarypostupdateupdate checkboxclasses notice Update completed medialibrarypostupdateupdate checkboxclasses notice Update started mediapostupdateaddstatusextrafilter notice The Published status or admin user filter was added to the Media view notice Update completed mediapostupdateaddstatusextrafilter notice Update started pathpostupdatecreatelanguagecontentsettings notice Update completed pathpostupdatecreatelanguagecontentsettings notice Update started systempostupdateentityreferenceautocompletematchlimit notice Update completed systempostupdateentityreferenceautocompletematchlimit notice Update started systempostupdatelayoutpluginschemachange notice Update completed systempostupdatelayoutpluginschemachange notice Update started taxonomypostupdateconfigurestatusfieldwidget notice Update completed taxonomypostupdateconfigurestatusfieldwidget notice Update started textpostupdateaddrequiredsummaryflag notice Update completed textpostupdateaddrequiredsummaryflag notice Update started viewspostupdatelimitoperatordefaults notice Update completed viewspostupdatelimitoperatordefaults notice Update started viewspostupdateremovecorekey notice Update completed viewspostupdateremovecorekey In ProcessBasephp line Unable to decode output into JSON Syntax error system results query null success true type update results query null success true type update results query The pathalias entity type has been installed success true type update results query Path aliases have been converted to entities success true type update results query null success true type update entityreferenceautocompletematchlimit results query null success true type postupdate layoutpluginschemachange results query null success true type postupdate medialibrary results query null success true type update results query null success true type update addbuttonstopageview results query null success true type postupdate addlangcodefilters results query The Language filter was added to the default display of the em classplacehold erMedia libraryem view and the Default translation filter was added to the following displays em class placeholderWidget Widget tableem success true type postupdate addstatusextrafilter results query The Published status or admin user filter was added to the em classplaceholde rMedia libraryem view success true type postupdate defaultadministrativelisttotabledisplay results query null success true type postupdate update checkboxclasses results query null success true type postupdate layoutbuilderrestrictions results query null success true type update lightninglayout results query null success true type update locale results query null success true type update contentmoderation viewsfieldpluginid results query null success true type postupdate fieldgroup results query null success true type postupdate media addstatusextrafilter results query The Published status or admin user filter was added to the em classplaceholde rMediaem view success true type postupdate path createlanguagecontentsettings results query null success true type postupdate taxonomy configurestatusfieldwidget results query null success true type postupdate text addrequiredsummaryflag results query null success true type postupdate views limitoperatordefaults results query null success true type postupdate removecorekey results query null success true type postupdate drushbatchprocessfinished true Workaround Is there another way to do the desired action System Configuration Q A Drush version Drupal version PHP version OS Windows Additional Information On Linux the error dont came up Our jenkins build env and staging envs are Linux mashines and there finishing the database updates normally Describe the bug Composer commands will warn with Package containerinteropcontainerinterop is abandoned you should avoid using it Use psrcontainer instead when Drush is required To Reproduce Require drush in your composerjson Expected behavior No warnings Yellow background messages Actual behavior Getting a warning System Configuration Q A Drush version x Drupal version x PHP version x OS MacLinux Describe the bug When using Drush or Drush to update to Drupal from Drupal completes the updates however it reports the following error This issue has been discussed by Drupal core team and they have decided to support it until x To Reproduce Install Drupal then upgrade to Drupal drush up y Expected behavior Upgrade should be error free Actual behavior The following error was displayed after the upgrade Error Class error Drupal Core Controller ArgumentResolver RawParameterValueResolver not found in Drupal Component DependencyInjection ContainercreateService line of varwwwhtmlcorelibDrupalComponentDependencyInjectionContainerphp varwwwhtmlcorelibDrupalComponentDependencyInjectionContainerphp Drupal Component DependencyInjection ContainercreateServiceArray privatePhticr Workaround Is there another way to do the desired action None basically avoid drush Use browser based update or drush which is not feasible for sites not build using composer System Configuration Q A Drush version and Drupal version upgrade to PHP version OS Debian Describe the bug I use configignore with a patch to filter config exports Using drush configexport the ignored config isnt exported Using drush configpull the ignored config is exported I dont believe the patch singles out drush configexport and instead changes Drupals core behavior It then seems like configpull isnt using the same operations as configexport To Reproduce What did you do Install and configure configignore Apply patch to support export filtering via Drush Run drush configexport and see that ignored config is not exported Run drush configpull and see that ignored config is exported Expected behavior What did you expect would happen I would expect configexport and configpull to return the same results Actual behavior What happened instead configexport and configpull return different results Workaround Is there another way to do the desired action System Configuration Q A Drush version x x x please be specific and try latest release Drupal version x x x PHP version x x OS MacLinuxWindows Additional information Add any other context about the problem here Existing document The installation instructions for Drush currently state It is recommended that Drupal sites be built using Composer with Drush listed as a dependency The linked template is However on the Drupal installation documentation it state As of the release of Drupal the recommend composer template changed to from drupalcomposerdrupalproject to the officially supported drupalrecommendedproject What are you attempting to do It is not clear whether Drush recommends using drupalcomposerdrupalproject which contains Drush as a dependency or drupalrecommendedproject which does not In what way is the existing documentation unclear or incomplete The existing document does not clearly indicate that there is a difference between versions of Drupal prior to and Drupal and above What should the documentation say instead Something like For Drupal and above install Drush using the composer file at drupalrecommendedproject and by modifying it so that not sure how According to SqlSyncCommands database should be passable as an option usage drush sqlsync source self databasefoo strict Copy a secondary database whose databases key is named foo Additional options to sqldump may also be passed Instead this fails drush sqlsync self stage databasemigration The database option does not exist Passing strict effectively ignores the database option so it just uses the default database System Configuration Q A Drush version Drupal version PHP version OS Mac In Drupal when cron runs it logs a separate message for each hookcron implementation In Drupal it only logs one message after each log item finishes On occasions when cron goes belly up this makes it notably harder to debug the problem Add an option on the cron command that if the v option is passed in it logs every instance of hookcron that is triggered