I am trying to streaming add streaming feature in android phone so used nanohttpd library I used this library for streaming the video and audio files which are placed in my SMB server the video and audio are streaming but the buffering whole file in one shot so its take so much time if videoaudio are large in size I google it accordingly I got new thing that is setting the headers ContentRange which are by default provided by the method server But the thing is I am not getting the range in headers Please help to buffer the videoaudio as the buffer I provide in serve Help ASAP I put the snippet below Override SuppressWarningsdeprecation public Response serveString uri Method method MapString String headers MapString String params MapString String files SmbFile smbFile null try smbFile new SmbFilefilePath auth smbFileconnect smbFilesetConnectTimeout smbFilesetReadTimeout catch IOException e eprintStackTrace rangebytes long range if headerscontainsKeyrange String contentRange headersgetrange LogeRANGEcontentRange range IntegerparseIntcontentRangesubstringcontentRangeindexOf contentRangeindexOf else range byte buffer long constantLength try constantLength smbFilelength catch SmbException e eprintStackTrace long bufLength boolean isLastPart false try SmbRandomAccessFile ff new SmbRandomAccessFile smbFile rw long remainingChunk fflength range remaining if remainingChunk constantLength bufLength remainingChunk means last part isLastPart true else bufLength constantLength if range ffseekrange buffer new byte intbufLength ffreadbuffer catch IOException e eprintStackTrace buffer new byte Response response response new ResponseResponseStatusPARTIALCONTENTmimeType new ByteArrayInputStreambuffer responseaddHeaderContentLength StringvalueOfconstantLength responseaddHeaderContentRange Stringformatbytes sss range range bufLength StringvalueOfconstantLength LogeSERVERInside server sent Stringformatbytes sss range range bufLength StringvalueOfconstantLength return response Hi I noticed that there is a behavior change in the NanoWSD server while upgrading the Android target SDK from to I received a javanetSocketException Socket closed even when I sent a message to the server every s requesthbnonce and I sent a broadcast message to all my clients every s test I ran my application in device with Android Thanks in advanced for your help PS I would like to post my Java code but there is some error in rendering Log messages comtesttest IServer WS opened comtesttest EServer WebsocketServerbroadcastMessage test comtesttest EServer WebsocketServerbroadcastMessage test comtesttest EServer WebsocketServerbroadcastMessage test comtesttest EServer WebsocketServerbroadcastMessage test comtesttest EServer WebsocketServerbroadcastMessage test comtesttest EServer WebsocketServerbroadcastMessage test comtesttest DServer onMessage WS Text fin masked b requesthbnonce comtesttest EServer WebsocketServerbroadcastMessage test comtesttest EServer WebsocketServerbroadcastMessage test comtesttest EServer WebsocketServerbroadcastMessage test comtesttest EServer WebsocketServerbroadcastMessage test comtesttest EServer WebsocketServerbroadcastMessage test comtesttest EServer WebsocketServerbroadcastMessage test comtesttest EServer onException javanetSocketException Socket closed at javanetSocketInputStreamreadSocketInputStreamjava at javanetSocketInputStreamreadSocketInputStreamjava at javaioBufferedInputStreamfillBufferedInputStreamjava at javaioBufferedInputStreamreadBufferedInputStreamjava at fiikielonenNanoWSDWebSocketFramereadNanoWSDjava at fiikielonenNanoWSDWebSocketreadWebsocketNanoWSDjava at fiikielonenNanoWSDWebSocketaccess NanoWSDjava at fiikielonenNanoWSDWebSocket sendNanoWSDjava at fiikielonenNanoHTTPDHTTPSessionexecuteNanoHTTPDjava at fiikielonenNanoHTTPDClientHandlerrunNanoHTTPDjava at javalangThreadrunThreadjava comtesttest IServer WS closedInternalServerErrorHandler terminated without closing the connection I run nanohttpd on android but show some exception Exception Exception in thread NanoHttpd Main Listener javalangInternalError Thread starting during runtime shutdown at javalangThreadnativeCreateNative Method at javalangThreadstartThreadjava at fiikielonenNanoHTTPDDefaultAsyncRunnerexecNanoHTTPDjava at fiikielonenNanoHTTPDServerRunnablerunNanoHTTPDjava at javalangThreadrunThreadjava Code import fiikielonenNanoHTTPD import javaioIOException public class TestServer extends NanoHTTPD private TestServerString host int port superhost port try start catch IOException e SystemoutprintlnServer Stop egetMessage SystemoutprintlnServer Running Point your browsers to n private TestServerint port superport try startNanoHTTPDSOCKETREADTIMEOUT false catch IOException e SystemoutprintlnServer Stop egetMessage SystemoutprintlnServer Running Point your browsers to n Override public Response serveIHTTPSession session SystemoutprintlnsessiongetUri String msg html body h Nanohttpdh body html return newFixedLengthResponsemsg public static void mainString args try new TestServer catch Throwable e SystemoutprintlnError egetMessage Bumps commonsfileupload from to Dependabot compatibility score Dependabot will resolve any conflicts with this PR as long as you dont alter it yourself You can also trigger a rebase manually by commenting dependabot rebase dependabotautomergestart dependabotautomergeend details summaryDependabot commands and optionssummary br You can trigger Dependabot actions by commenting on this PR dependabot rebase will rebase this PR dependabot recreate will recreate this PR overwriting any edits that have been made to it dependabot merge will merge this PR after your CI passes on it dependabot squash and merge will squash and merge this PR after your CI passes on it dependabot cancel merge will cancel a previously requested merge and block automerging dependabot reopen will reopen this PR if it is closed dependabot ignore this patchminormajor version will close this PR and stop Dependabot creating any more for this minormajor version unless you reopen the PR or upgrade to it yourself dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency unless you reopen the PR or upgrade to it yourself dependabot use these labels will set the current labels as the default for future PRs for this repo and language dependabot use these reviewers will set the current reviewers as the default for future PRs for this repo and language dependabot use these assignees will set the current assignees as the default for future PRs for this repo and language dependabot use this milestone will set the current milestone as the default for future PRs for this repo and language You can disable automated security fix PRs for this repo from the Security Alerts page details javanetSocketException Broken pipe at javanetSocketOutputStreamsocketWrite Native Method at javanetSocketOutputStreamsocketWriteSocketOutputStreamjava at javanetSocketOutputStreamwriteSocketOutputStreamjava at fiikielonenNanoHTTPDResponsesendBodyNanoHTTPDjava at fiikielonenNanoHTTPDResponsesendBodyWithCorrectEncodingNanoHTTPDjava at fiikielonenNanoHTTPDResponsesendBodyWithCorrectTransferAndEncodingNanoHTTPDjava at fiikielonenNanoHTTPDResponsesendNanoHTTPDjava at fiikielonenNanoHTTPDHTTPSessionexecuteNanoHTTPDjava at fiikielonenNanoHTTPDClientHandlerrunNanoHTTPDjava at javalangThreadrunThreadjava I try to handle request POST try request fillRequestMapsession requestId catch IOException ioe return newFixedLengthResponseResponseStatusINTERNALERROR MIMEPLAINTEXT SERVER INTERNAL ERROR IOException ioegetMessage catch ResponseException re return newFixedLengthResponseregetStatus MIMEPLAINTEXT regetMessage catch Exception ex return newFixedLengthResponseResponseStatusINTERNALERROR MIMEHTML htmlbodyh Errorh extoString bodyhtml Method get request data private WritableMap fillRequestMapIHTTPSession session String requestId throws Exception Method method sessiongetMethod WritableMap request ArgumentscreateMap LogdQVIProtocol Method method MapString String headers sessiongetHeaders MapString String params sessiongetParms MapString String files new HashMapString String requestputStringheaders new JSONObjectheaderstoString requestputStringparams new JSONObjectparamstoString requestputStringurl sessiongetUri requestputStringmethod methodname requestputStringuid requestId try sessionparseBodyfiles requestputStringbody new JSONObjectfilestoString sessionparseBodynew HashMapString String get the POST body String postBody sessiongetQueryParameterString or you can access the POST requests parameters LogdQVIProtocol postBody LogdQVIProtocol filesgetpostData requestputStringbody postBody requestputStringdata filesgetpostData catch Exception e LogdQVIProtocol etoString requestputStringbody return request But when i try to fetch to API using below code const aPromise await fetch method POST headers token hellotoken body JSONstringify data hello The response is body body null data null headers accept secfetchsite crosssite host acceptlanguage enUSenq accesscontrolrequestmethod POST origin https zrgteamgithubio secfetchmode cors useragent Mozilla Linux Android small AppleWebKit KHTML like Gecko Chrome Mobile Safari connection keepalive acceptencoding gzip deflate br httpclientip accesscontrolrequestheaders token remoteaddr method OPTIONS params uid url ping A small tweak to keep the readme using the most uptodate function for parameters There was unneeded error handling in the decodePercent method This change uses an overloaded method that does not throw an UnsupportedEncodingException and utilizes jdk s StandardCharsetsUTF I am using nanolets to add a few API endpoints to an existing app I cant find a way to pass an object to my various handlers I created handlers that extends DefaultStreamHandler but there is no way to have an object of mine in there I tried to use the session object to set something in it for use in the handlers but there is no extensibility Override public Response serveIHTTPSession session sessionsetDataDataSource thisdataSource I would like this to exist sessionsetDataUserContext thisuserContext I would like this to exist return superservesession Mapping dont allow giving a live instance of handler so I cannot set something in there thishttpServeraddRouteapiDoSomething new SomethingHandlerdataSource userContext cant do that How do you do anything within the handlers if you cant have references to important objects How to deploy an Angular application on nanohttpd There is a rewrite rule config file like htaccess for apache How to implement this to redirect all route to indexhtml Thanks Angelo radici