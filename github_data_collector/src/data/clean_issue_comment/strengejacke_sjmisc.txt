This issue could be a regression from r df dataframeval c NA wgt c sjmiscfrqdf val val numeric total N valid N mean sd val frq rawprc validprc cumprc NA NA NA sjmiscfrqdf val weights wgt val numeric total N valid N mean sd val frq rawprc validprc cumprc NA NA NA supCreated on by the reprex package v sup I expect that both frequencies tables are equal sjmisc Hi Daniel Fr hliche Weihnachten I pull what I thing is an interseting feature for rec When one wants to recode some values of a variable not by means of recrev no labels are specified and there is a to correspondence between one can expect that labels will be preserved It is the goal of this PR As I have seen before I believe through your package sjlabelled I assume that if data has labels values are numeric In the rechelper function first some conditions are checked essentially all recoding values are numeric and there is a to correspondence between old and new values lines and also Then after removing labels which should go with the NA value lines and deciding final labels depending on if there is an elsecopy recoding pair new values are asigned to the labels Further an example is updated in testrec When checking the package the help for strstart strstartRd was changed by roxygen To keep it as it was I had do modify strstartendr Tell me what you think Thanks These two lines worked well in Mac machines but not in Windows machines bbqV r recbbqV rec asnumF frqbbqV r If I change the labels in from Chinese to English same thing occurred If I removed the labels including it worked fine Please help check this issue and let me know if I missed anything Thanks screen shot at I really like the functionality of flattable I was wondering if you would consider extending the functionality to be able to add totals as extra rowscolumns to the table Something similar to what xtab does or addmargins not necessarily with the same flexibility I can sort of do it already efc selecte sex e dep c code n pstu c sex flattable addmargins although this loses the value labels Then if I add a groupby it doesnt work at all efc groupbye sex e dep selecte sex e dep c code n pstu c sex flattable addmargins Error in addmargins A must be an array or table presumably because its now multiple tables If it wouldnt be very difficult I think it would be a really nice addition to flattable the functionality to convert a dataframe into an ragged representaion a la ftable migth be somethimg for your sjmisc package 