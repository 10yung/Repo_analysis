Version I use Karate all the time and love it One thing I think would make it better is the error output Here is some output I get commonly when there is a key mismatch ERROR UserTesttestUserInvites userinvitefeature path actual hits page pageSize lastDoc data id c d ecd ab b e a ebd emailnewuser examplecomphone phone nameBob Sagatanaddress One Way Baltimore MD sexMrole state orgId c d ecd ab b e a ebd profileId ba c ef fe fb a d disabledfalseorgAdminfalsesuperUsertruenameAddrBob Sagatan newuser examplecomorgMemberfalse requestquerySagatan page pageSize afterDocnull offset pages expected hitsnumber page pages pageSize dataarray requestquerySagatan page pageSize offset reason actual value has more keys than expected lastDoc The info it has is great actual value has more keys than expected lastDoc but its really hard to read especially when the changes are not trivial like the example above Some proposals Could we pretty print it Like the logPrettyResponse and logPrettyRequest have a new logPrettyError I see how that could get complicated Even more advanced would be somehow show the expected JSON format and inside it show that I need to add a key currently configure headers is processed separately and does not update the HttpRequestBuilder this means routines eg hooks gatling nameresolver that look for specific header values will miss these headers When running UI testing in parallel with T I sometimes experience the following error main INFO comintuitkarateMain Karate version RC main INFO comintuitkarateMain deleted directory target ForkJoinPool worker INFO comintuitkarate karateenvacc ForkJoinPool worker INFO comintuitkarate karateenvacc main INFO comintuitkarateRunner waiting for parallel features to complete ForkJoinPool worker DEBUG comintuitkarateshellCommand found verified free local port ForkJoinPool worker DEBUG comintuitkarateshellCommand found verified free local port geckodriver DEBUG comintuitkaratedrivergeckodriver command geckodriver port ForkJoinPool worker DEBUG comintuitkaratedrivergeckodriver poll attempt for port to be ready localhost ForkJoinPool worker DEBUG comintuitkaratedrivergeckodriver poll attempt for port to be ready localhost geckodriver DEBUG comintuitkaratedrivergeckodriver command geckodriver port geckodriver DEBUG comintuitkaratedrivergeckodriver geckodriver error Only one usage of each socket address protocolnetwork addressport is normally permitted os error geckodriver DEBUG comintuitkaratedrivergeckodriver geckodriver e a As you can see both threads detect that port is free This will fail one of the two scenarios with a somewhat hard to diagnose error commonfeature driver config start failed javanetURISyntaxException Illegal character in path at index options typegeckodriver targetnull My guess is that needs to synchronized According to the documentation there is no support yet for firefox headless mode Currently our UI regression test set runs headless so it can also run inside a headless Linux VM I would very much like to switch from our own framework to just Karate for these tests but the headless feature is currently missing You can enable this mode via the command line parameter headless to firefoxexe However you cannot set these arguments directly in the configure driver step only arguments to geckodriverexe The argument has to be specified via the capabilities object as follows including the alwaysMatch segment capabilitiesalwaysMatchbrowserNamefirefoxmozfirefoxOptionsargs headless See also and Are you willing to accept a PR for this feature Currently when there is a failure in a containers only assert the expected value displays using a nonJSON format that doesnt parse with applications like Notepad and omits double quotes around string values As Karate is very strict on type matching missing the strings can especially look confusing if the reason for the failure is not immediately evident Example getpaymentsfeature path data actual paymentDate paymentMethod Check amountPaid bankAccount amountApplied amountUnapplied transactionType Invoice invoiceDate applicationDate totalAmount toleranceAmount anticipatedAmount discountAmount writeOffAmount chargebackAmount debitOrCreditMemoApplied openAmount expected amountApplied discountAmount toleranceAmount invoiceDate openAmount chargebackAmount transactionTypeInvoice totalAmount anticipatedAmount writeOffAmount amountPaid paymentMethodCheck paymentDate amountUnapplied applicationDate reason actual value does not contain expected This issue was taken from The following Scenario Scenario Test to readwrite within karate def fileContent xyz eval karatewritekarategetfileContent aFiletext def fromFile readfiletargetaFiletext This works match fileContent fromFile def fromFileEmbeddedInJs fromFile This fails with error message path actual xyz expected javaioFileInputStream dcf reason not equal match fileContent fromFileEmbeddedInJs Results in this error message fKarate version RC elapsed threads thread time features ignored efficiency scenarios passed failed failed features srctestgroovycomgithubpeterquielkarateexperimentkaratesyntaxcollection karatesyntaxcollectionfeature path actual xyz expected javaioFileInputStream dcf reason not equal Same result with RC Tested with latest adopt jdk and version log is is from jdk Executed with vscode karate runner karate standalone and intellij idea just mentioned because there are some groovy type casting issues When Feature file run with iterations from th iteration onwards the doc string in cucumber report will not apprear But when the same feature file is run with all the iterations in feature file the report will have all the doc string required The feature file is as below also alttached all the required files Feature File Feature Missing Doc String in report with iterations over test Scenario Outline Data print Text Examples readTextDatacsv This Zip file has Test Runner POM TextDatacsv Sample Report in which doc string is missing iteration rest all iterations has doc string bugzip Kindly look into this issue and let me know if you need any further informations Whats occurred ContentLength is different among HTTP requests in retry please refer logs below From SUT side seems multipartfile is not sent correctly when retrying st request main DEBUG comintuitkarate request POST AcceptEncoding gzipdeflate Connection KeepAlive ContentLength ContentType multipartformdata boundaryqLIkMvpp P si hYrhGr bYyzz k Host UserAgent ApacheHttpClient Java nd request main DEBUG comintuitkarate retry condition not satisfied responseStatus main DEBUG comintuitkarate sleeping before retry main DEBUG comintuitkarate request POST AcceptEncoding gzipdeflate Connection KeepAlive ContentLength ContentType multipartformdata boundary l ScrvdtQMXwwCL iQXevXGG th x Host UserAgent ApacheHttpClient Java rd request main DEBUG comintuitkarate retry condition not satisfied responseStatus main DEBUG comintuitkarate sleeping before retry main DEBUG comintuitkarate request POST AcceptEncoding gzipdeflate Connection KeepAlive ContentLength ContentType multipartformdata boundaryH pZDfJxEINPqdQyByhNbSkd WHhiQumRbj Host UserAgent ApacheHttpClient Java How to reproduce We can test with modifying uploadfeature in karatedemo rf my example Expectation retry sends same HTTP request with multipartfile Investigation and Hypothesis Sorry I couldnt confirm actually because dont know how to set up Karate development environment multipartfile data is received and set to HttpEntity as InputStream for building HTTP Request Once data in the stream was read cannot be read again when retrying Thus nd and further retried requests cannot send file data and ContentLength is shorter than st For some reason it is in the docs but was taken out of the current code Refer And current doc screenshot img width altimage src I dare say this is useful and should be available When using a wildcard locator for UI Test Automation that contains an index like button Item to select the second button node with Item in its text Karate generates an incorrect xpath and fails to select any node Ive verified this with both Firefox esr and Chrome via the karatechrome Docker image Please see the attached example karatebugwildcardzip 