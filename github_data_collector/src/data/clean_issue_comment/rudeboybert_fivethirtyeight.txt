Add following datasets to Master Google Sheet By Natalia Iannucci mediamentionscable mediamentionsonline By Marium Tapal stateindex statewords By Lizette Carpenter cabinetturnover By Irene Ryan castlesolutions castlesolutions castlesolutions By Alina Barylsky demcandidates By Rana Gahwagyquasiwinshares By Danica Miguel raptorbyplayerraptorbyteam By Sunni Raleigh wwc forecasts wwc matches By Anna Ballou foulballs By Jane Bang nbadraymond By Jordan Moody fightsongs By Kara Van Allen nbaelo nbaelolatest By Jessica Keast nbaallelo By Fatima Keita impeachmentpolls Some of the helpman files have roxygen examples that convert data as originally given in s GitHub to tidy format using tidyrgather However tidyr now includes much more intuitivelynamed and easier to use functions pivotlonger and pivotwider See this tidyverseorg blog post for more information In the case of fivethirtyeight package we should replace all gather code with pivotlonger For example if you run drinks youll currently see in the examples r librarydplyr librarytidyr librarystringr drinkstidy drinks gathertype servings ccountry totallitresofpurealcohol mutate type strsubtype start end arrangecountry type This needs to be updated with r libraryfivethirtyeight librarydplyr librarytidyr librarystringr drinkstidy drinks pivotlongercols endswithservings namesto type valuesto servings mutatetype strsubtype start end arrangecountry type A search of gather in all RdataXR files will locate the roxygen code for all such cases For example the roxygen code for drinks is in dataalbertR beanumber Let me know if you have someone who can do this and Ill explicitly make them an assignee Preparing CRAN release Make sure that all datasets listed when running datapackage fivethirtyeight are listed in master Google Sheet of datasets and in list of all datasets on package webpage Check if any of the datasets in master Google Sheet of datasets with DYNAMIC DATA THAT GETS UPDATED marked Y need to be updated by rerunning appropriate datarawprocessdatasetsXR files Edit version number in DESCRIPTION and NEWSmd The following steps ensure that all usercontributed vignettes are not included in the package on CRAN but rather only in the development version on GitHub and on the package webpage Temporarily remove all Rmd vignettes from vignettes except for fivethirtyeightRmd includes a detailed list of all data tameRmd TISE article and usercontributedvignettesRmd how to access usercontributed vignettes Then clear all nonsource files from vignettes in other words all html and R files so that they dont interfere with CRAN submission Temporarily edit packages in DESCRIPTION to reflect above vignette changes This will keep package dependency bloat down Keep the following packages needed for all Examples in help files and the fivethirtyeight tame and usercontributedvignettes vignettes As of v these include ggplot dplyr tidyr curl readr tibble lubridate stringr janitor knitr gridExtra ggthemes scales broom magrittr rmarkdown Temporarily remove the following packages used in all other vignettes As of v these include slam highcharter tidytext textdata hunspell fmsb wordcloud corrplot ggraph igraph Standard package steps Do one final check Run the following devtools functions spellcheck checkrhub checkwindevel and checkwinrelease Youll eventually be asked if you ran them when publishing release via devtoolsrelease Update crancommentsmd After CRAN release Tag version in GitHub releases Return temporarily removed vignettes Return packages removed from DESCRIPTION Edit version number in DESCRIPTION and NEWSmd I think that the description category column in the rating dataset might be ambiguous levelsratingscategory Aged Aged Aged Aged under Females Females Aged Females Aged Females Aged Females under IMDb staff IMDb users Males Males Aged Males Aged Males Aged Males under NonUS users Top voters US users Because there could be questions like Is the Males under a subset of all Males and if not how do the categories differ Is there any intersection between the categories If the number of respondents in Females Aged Females Aged Females Aged Females under are less that the number of respondents in the Female category Is the gap due to respondents with unknown age I checked an example on IMDB but I am not sure how things sum up in the dataset demo Might need to unconvert all ordered TRUE factors to unordered r suppressPackageStartupMessageslibrarytidyverse libraryfivethirtyeight librarymoderndive cleantest is ordered factor bechdelcleantest notalk ok notalk notalk men Levels nowomen notalk men dubious ok weird output for dummy variables in regression table lmdomgrosscleantest data bechdel getregressiontable Warning package bindrcpp was built under R version A tibble x term estimate stderror statistic pvalue conflow confhigh chr dbl dbl dbl dbl dbl dbl intercept cleantestL cleantestQ cleantestC cleantest lmdomgrosscleantest data bechdel summary Call lmformula domgross cleantest data bechdel Residuals Min Q Median Q Max Coefficients Estimate Std Error t value Prt Intercept e cleantestL cleantestQ cleantestC cleantest Signif codes Residual standard error on degrees of freedom observations deleted due to missingness Multiple Rsquared Adjusted Rsquared Fstatistic on and DF pvalue should look like bechdel mutatecleantest factorcleantest ordered FALSE lmdomgrosscleantest data getregressiontable A tibble x term estimate stderror statistic pvalue conflow confhigh chr dbl dbl dbl dbl dbl dbl intercept e e cleantestnot e e cleantestmen e e cleantestdub e e cleantestok e e bechdel mutatecleantest factorcleantest ordered FALSE lmdomgrosscleantest data summary Call lmformula domgross cleantest data Residuals Min Q Median Q Max Coefficients Estimate Std Error t value Prt Intercept e cleantestnotalk cleantestmen cleantestdubious cleantestok Signif codes Residual standard error on degrees of freedom observations deleted due to missingness Multiple Rsquared Adjusted Rsquared Fstatistic on and DF pvalue Created on by the reprex package v Maybe a good task for a student Create a table of all of the datasets and the types of problems each dataset would be good for Descriptive plots summary stats Inference specify types of variables included and how many Modeling regression multiple regression etc