error validating STDIN error validating data ValidationErrorDeploymentspec missing required field selector in iok sapiappsv DeploymentSpec if you choose to ignore these errors turn validation off with validatefalse I tried to update from v beta to appsv for Kubernetes But the deployment file fails Ive installed node kubernetes cluster and deployed Gluster cluster on it But At heketideployment It got failed The kubernetes logs say unable to access heketidb located at varlibheketiheketidb Here are the logs from kubernetes pod Setting up heketi database File varlibheketiheketidb Size Blocks IO Block regular file Device fe h d Inode Links Access rwrr Uid root Gid root Access Modify Change Birth failed to dump db Could not construct dump from DB Could not construct dump from DB Unable to access list error Unable to export db DB contents may not be valid Heketi v g dc ERROR Unable to parse configuration EOF I am using Openstack for my kubernetes Node I have Mster and worker in it I have volumes of GB each attached to the each worker devvdb While installing the glusterkubernetes I am getting the below Error Error Failed to allocate new volume No space command terminated with exit code Failed on setup openshift heketi storage This may indicate that the storage must be wiped and the GlusterFS nodes must be reset Configuration kubernetes coreos coretesteuk sk smasternf glusterkubernetes kubectl get nodes NAME STATUS ROLES AGE VERSION testeuk sk smasternf Ready master d v testeuk sk snodenf Ready none d v testeuk sk snodenf Ready none d v My topologyjsonsample clusters nodes node hostnames manage testeuk sk snodenf storage zone devices devvdb node hostnames manage testeuk sk snodenf storage zone devices devvdb The error Y es N o Default Y y Using Kubernetes CLI Using namespace default Checking for preexisting resources GlusterFS pods not found deployheketi pod not found heketi pod not found glusters pod not found Creating initial resources serviceaccountheketiserviceaccount created clusterrolebindingrbacauthorizationk sioheketisaview created clusterrolebindingrbacauthorizationk sioheketisaview labeled OK nodetesteuk sk snodenf labeled nodetesteuk sk snodenf labeled daemonsetappsglusterfs created Waiting for GlusterFS pods to start OK secretheketiconfigsecret created secretheketiconfigsecret labeled servicedeployheketi created deploymentappsdeployheketi created Waiting for deployheketi pod to start OK Creating cluster ID ad d aab e bddb e Allowing file volumes on cluster Allowing block volumes on cluster Creating node testeuk sk snodenf ID a afcb acd ca ebd d f DAdding device devvdb OK Creating node testeuk sk snodenf ID d e a a e e c e acdb Adding device devvdb OK heketi topology loaded Error Failed to allocate new volume No space command terminated with exit code Failed on setup openshift heketi storage This may indicate that the storage must be wiped and the GlusterFS nodes must be reset k s no longer supports extensionsv beta for DaemonSet and Deployment objects The api versions for these have been updated to appsv to match the documentation in kubernetes DaemonSet Deployment selectors were added to the daemonset because the selector property is no longer optional Reviewablestart This change is img src height alignabsmiddle altReviewable Reviewableend gkdeploy outputs the message Deploying GlusterFS pods sed e sstoragenode glusterfsstoragenode glusterfsg rootkubeglusterkubernetesdeploykubetemplatesglusterfsdaemonsetyaml usrbinkubectl n gk create f error unable to recognize STDIN no matches for kind DaemonSet in version extensionsv beta Waiting for GlusterFS pods to start Checking status of pods matching selectorglusterfspod It seems that for v we should use extensionsv and no more v beta Reviewablestart This change is img src height alignabsmiddle altReviewable Reviewableend updated deprecated and removed kubernetes API beta endpoints deprecated since replaced with proper official endpoints fixed deployment template selectors necessary since removed deprecated kubectl showall argument this is production tested Reviewablestart This change is img src height alignabsmiddle altReviewable Reviewableend Versions k s v heketi v glusterfs We are facing the same problem as in when undeploying an application with tens of pvcspvs It looks like pvc and pv are gone kubectl get pvc or kubectl get pv no resources found But both volumes in heketi as well as the corresponding glusterfsdynamic services are not still showing up not removed heketicli volume list or heketicli topology info show the volumes there Also gluster volume list and for dynamic services kubectl get svc allnamespaces NAMESPACE NAME TYPE CLUSTE RIP EXTERNALIP PORTS AGE default glusterfsdynamic b ffc f a ee b fb ClusterIP TCP d h default glusterfsdynamic ae a edb b ef ClusterIP TCP d h default glusterfsdynamic a fd a ce b f c cec ClusterIP TCP d h For me this makes no sense since it says If the volume is found then throw an error and abort Fix for issue Reviewablestart This change is img src height alignabsmiddle altReviewable Reviewableend 