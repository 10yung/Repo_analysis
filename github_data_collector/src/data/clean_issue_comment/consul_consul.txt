 Objectives Make it possible to register and login using a Wordpress Oauth server The feature will be disabled by default To enable it Go to the admin panel Settings Features Tab Image Configure your Wordpress Oauth credentials in your configsecretsyml and reload your Rails server production wordpressoauth key wordpressoauth secret wordpressoauth site Use the Wordpress button from the Registration or Login page Image Visual Changes Image Image Image Image Bumps groupdate from to details summaryChangelogsummary pemSourced from a href changelogaemp blockquote h h ul liFixed error with empty results in Ruby li liFixed deprecation warnings in Ruby li liDeprecated positional arguments for time zone and rangeli ul h h ul liAdded codedayofyearcodeli liDropped support for Rails li ul h h ul liFixed error with empty data and codecurrent falsecodeli liFixed error in time zone check for Rails lt li liPrevent infinite loop with endless rangesli ul h h ul liMade column resolution consistent with codegroupcodeli liAdded support for codealiasattributecodeli ul h h ul liMany performance improvementsli liAdded check for consistent time zone infoli liFixed error message for invalid queries with MySQL and SQLiteli liFixed issue with enumerable methods ignoring nilsli ul h h ul liMake codecurrentcode option work without codelastcodeli liFixed default value for codemaximumcode codeminimumcode and codeaveragecode periods with no results now return codenilcode instead of code code pass codedefaultvalue code for previous behaviorli ul h h ul liFixed incorrect range with codelastcode option near time changeli ul h h ul liCustom calculation methods are supported by default codegroupdatecalculationmethodscode is no longer neededli ul pBreaking changesp ul liDropped support for Rails lt li liInvalid options now throw an codeArgumentErrorcodeli licodegroupbycode methods return an codeActiveRecordRelationcode instead of a codeGroupdateSeriescodeli licodeweekstartcode now affects codedayofweekcodeli liRemoved support for codereverseordercode was never supported in Rails li ul trtable truncated blockquote details details summaryCommitssummary ul lia href Version bump to skip ci li lia href Better deprecation message skip ci li lia href Deprecated positional arguments for time zone and rangeli lia href Fixed deprecation warnings in Ruby li lia href Cleaner argument patternli lia href Fixed error with empty results in Ruby li lia href Use count skip ci li lia href Updated readme skip ci li lia href Updated to bionic on Travisli lia href Fixed test skip ci li liAdditional commits viewable in a href viewali ul details br Dependabot compatibility score Dependabot will resolve any conflicts with this PR as long as you dont alter it yourself You can also trigger a rebase manually by commenting dependabot rebase dependabotautomergestart dependabotautomergeend Note This repo was added to Dependabot recently so youll receive a maximum of PRs for your first few update runs Once an update run creates fewer than PRs well remove that limit You can always request more updates by clicking Bump now in your Dependabot dashboard details summaryDependabot commands and optionssummary br You can trigger Dependabot actions by commenting on this PR dependabot rebase will rebase this PR dependabot recreate will recreate this PR overwriting any edits that have been made to it dependabot merge will merge this PR after your CI passes on it dependabot squash and merge will squash and merge this PR after your CI passes on it dependabot cancel merge will cancel a previously requested merge and block automerging dependabot reopen will reopen this PR if it is closed dependabot close will close this PR and stop Dependabot recreating it You can achieve the same result by closing it manually dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version unless you reopen the PR or upgrade to it yourself dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version unless you reopen the PR or upgrade to it yourself dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency unless you reopen the PR or upgrade to it yourself dependabot use these labels will set the current labels as the default for future PRs for this repo and language dependabot use these reviewers will set the current reviewers as the default for future PRs for this repo and language dependabot use these assignees will set the current assignees as the default for future PRs for this repo and language dependabot use this milestone will set the current milestone as the default for future PRs for this repo and language dependabot badge me will comment on this PR with code to add a Dependabot enabled badge to your readme Additionally you can set the following in your Dependabot dashboard Update frequency including time of day and day of week Pull request limits per update run andor open at any time Automerge options neverpatchminor and devruntime dependencies Outofrange updates receive only lockfile updates if desired Security updates receive only security updates if desired details Bumps graphql from to details summaryRelease notessummary pemSourced from a href releasesaemp blockquote h v h h Aug h h New featuresh ul liAdd codeextrascode setter to codeGraphQLSchemaFieldcode a href liAdd extensions in codeCoercionErrorcode a href ul h Bug fixesh ul liMake codeextensionscode kwarg on field on more flexible for extensions with options a href liFix list validation error handling a href liInclude introspective fields in query depth calculations a href liCorrect the example for using a class method to generate fields a href liEnable multiple execution errors for Fields defined to return a list a href ul h v h pNo release notes providedp h v h pNo release notes providedp blockquote details details summaryChangelogsummary pemSourced from a href changelogaemp blockquote h Dec h h New featuresh ul liScoped context for propagating values to child fields a href liAdd codetypemembershipclasscode with possibletype visibility a href ul h Bug fixesh ul liDont return unreachable types in introspection response a href liWrap more of execution with error handling a href liFix InputObject codepreparecode for the interpreter a href liFix Ruby keyword list to support Ruby a href liFix performance of urlsafeencode backport a href ul h Dec h h Breaking changesh ul licodeGraphQLSchemaResolverinitializecode accepts a new keyword argument codefieldcode If you have overriden this method youll have to add that keyword to your argument list and pass it along to codesupercode a href ul h Deprecationsh ul licodeSkylightTracingcode is disabled the Skylight agent contains its own GraphQL support See Skylights docs for migration a href ul h New featuresh h Bug fixesh ul liFix multiplex maxdepth calculation a href liUse monotonic time in TimeoutMiddleware a href liUse underscored names in Mutation generator a href liFix lookahead when added to mutations in their codefieldcode definitions a href liHandle returned lists of errors from Mutations a href liFix lexer error on block strings containing only newlines a href liFix mutation generator to reference the new base class a href liUse the right camelization configuration when generating subscription topics a href ul h Oct h h New featuresh ul liImprove parser performance a href liAdd codedef preparecode API for input objects a href liSupport codeextensionscode config in Resolver classes a href liSupport custom codeconnectionextensioncode in field classes a href liWarn when a field name is a Ruby keyword a href liImprove performance for ActiveRecord connection a href ul h Bug fixesh trtable truncated blockquote details details summaryCommitssummary ul lia href li lia href Merge pull request a href from lancelafontainemasterli lia href Adds Contextscopedsetli lia href Merge pull request a href from DmitryTsepelevciheadrubyrailsli lia href Merge pull request a href from pockeBase urlsafeencode backportli lia href Add Rails master and rubyhead to travis matrixli lia href Backport original Base urlsafeencode performance improvementli lia href Reworks API for getting scoped context valuesli lia href Introduces scoped context to the interpreter runtime which only for propagatili lia href Merge pull request a href from DmitryTsepelevrubykeywordsstrikebackli liAdditional commits viewable in a href viewali ul details br Dependabot compatibility score Dependabot will resolve any conflicts with this PR as long as you dont alter it yourself You can also trigger a rebase manually by commenting dependabot rebase dependabotautomergestart dependabotautomergeend Note This repo was added to Dependabot recently so youll receive a maximum of PRs for your first few update runs Once an update run creates fewer than PRs well remove that limit You can always request more updates by clicking Bump now in your Dependabot dashboard details summaryDependabot commands and optionssummary br You can trigger Dependabot actions by commenting on this PR dependabot rebase will rebase this PR dependabot recreate will recreate this PR overwriting any edits that have been made to it dependabot merge will merge this PR after your CI passes on it dependabot squash and merge will squash and merge this PR after your CI passes on it dependabot cancel merge will cancel a previously requested merge and block automerging dependabot reopen will reopen this PR if it is closed dependabot close will close this PR and stop Dependabot recreating it You can achieve the same result by closing it manually dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version unless you reopen the PR or upgrade to it yourself dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version unless you reopen the PR or upgrade to it yourself dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency unless you reopen the PR or upgrade to it yourself dependabot use these labels will set the current labels as the default for future PRs for this repo and language dependabot use these reviewers will set the current reviewers as the default for future PRs for this repo and language dependabot use these assignees will set the current assignees as the default for future PRs for this repo and language dependabot use this milestone will set the current milestone as the default for future PRs for this repo and language dependabot badge me will comment on this PR with code to add a Dependabot enabled badge to your readme Additionally you can set the following in your Dependabot dashboard Update frequency including time of day and day of week Pull request limits per update run andor open at any time Automerge options neverpatchminor and devruntime dependencies Outofrange updates receive only lockfile updates if desired Security updates receive only security updates if desired details Bumps rollbar from to details summaryRelease notessummary pemSourced from a href releasesaemp blockquote h v h pCheck if ActiveSupport is defined before calling a href h v h h Highlightsh ul liPrevent recursive failsafes prevents avalanche of internal rollbar errorsli liConfigurable thread priority for Thread async handler keeps job thread from starving main threadli liEnable RailsActiveSupport backtrace cleaner for better control of Rails stack tracesli liAllow ActiveJob to lazy load so Rollbar doesnt interfere with app load optimizationli liApply trace chain in the correct order for item grouping algorithmli liAdd rollbarcontext to exceptions allows context specific to the error to be added to the payloadli liAllow sending payloads as serialized json to delayed job handlers improves performance and robustnessli liImproved locals data on the stack and payload truncation improvementsli ul h Pull requestsh pPrevent recursive failsafes a href Add rubocop performance extension a href Configurable thread priority for Thread async handler a href Enable RailsActiveSupport backtrace cleaner in config a href Allow ActiveJob to lazy load a href Apply trace chain in the correct order a href Rack scrub test a href Add rollbarcontext to exceptions a href Allow sending payloads as serialized json to delayed job handlers a href Gemfile use json lt x on Ruby a href Better locals data and truncation improvements a href Remove NOOP rescue clauses a href ActionDispatch requires Ruby gt a href h v h h Highlightsh ul liFixed payload serialization in async handlersli liRollbarjs rel notes here a href ul h Pull requestsh pSkip configuredoptions when using async payload handlers a href Rollbarjs v a href h v h h Highlightsh ul liBetter diagnostics in each occurrences payloadli liImproved errors stack traces on Chromeli liRollbarjs rel notes here a href ul h Pull requestsh pRollbarjs v a href Send notifierconfiguredoptions in payload a href h v h h Highlightsh trtable truncated blockquote details details summaryCommitssummary ul lia href Release v li lia href Merge pull request a href from stevehactivesupportli lia href Dont try and call ActiveSupport without checking if its definedli lia href Merge pull request a href from rollbarwjtravisrails xli lia href travis ActionDispatch requires Ruby gt li lia href Release v li lia href Merge pull request a href from rollbarwjremovenooprescuesli lia href refactor remove NOOP rescue clausesli lia href Merge pull request a href from rollbarwjbetterlocalsdatali lia href fix truncation improvementsli liAdditional commits viewable in a href viewali ul details br Dependabot compatibility score Dependabot will resolve any conflicts with this PR as long as you dont alter it yourself You can also trigger a rebase manually by commenting dependabot rebase dependabotautomergestart dependabotautomergeend Note This repo was added to Dependabot recently so youll receive a maximum of PRs for your first few update runs Once an update run creates fewer than PRs well remove that limit You can always request more updates by clicking Bump now in your Dependabot dashboard details summaryDependabot commands and optionssummary br You can trigger Dependabot actions by commenting on this PR dependabot rebase will rebase this PR dependabot recreate will recreate this PR overwriting any edits that have been made to it dependabot merge will merge this PR after your CI passes on it dependabot squash and merge will squash and merge this PR after your CI passes on it dependabot cancel merge will cancel a previously requested merge and block automerging dependabot reopen will reopen this PR if it is closed dependabot close will close this PR and stop Dependabot recreating it You can achieve the same result by closing it manually dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version unless you reopen the PR or upgrade to it yourself dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version unless you reopen the PR or upgrade to it yourself dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency unless you reopen the PR or upgrade to it yourself dependabot use these labels will set the current labels as the default for future PRs for this repo and language dependabot use these reviewers will set the current reviewers as the default for future PRs for this repo and language dependabot use these assignees will set the current assignees as the default for future PRs for this repo and language dependabot use this milestone will set the current milestone as the default for future PRs for this repo and language dependabot badge me will comment on this PR with code to add a Dependabot enabled badge to your readme Additionally you can set the following in your Dependabot dashboard Update frequency including time of day and day of week Pull request limits per update run andor open at any time Automerge options neverpatchminor and devruntime dependencies Outofrange updates receive only lockfile updates if desired Security updates receive only security updates if desired details References This PR references Issue Objectives When a user supports a proposal it should automatically activate also the Follow citizen proposal option The proposal notifications will be sent not to all users supporting the proposal but to the users who have activated the Follow citizen proposal option In the notification digest under each notification it will appear also the link to unfollow that particular proposal Visual Changes For the most part there are no visual changes There are only behavioural changes Supporting a proposal causes the follow button to also be toggled active However there is now a link in the proposal notification digest email which leads to a page where user can unfollow the proposal It looks like this proposal notifications Summary of code changes Change to proposals controller and associated views Calls to the vote action now also cause a Follow to be created When this triggers the vote partial to be rendered if there is a follow object that has been passed it triggers a rerender of the follow button partial also This means that both buttons are rerendered simultaneously when the vote button is pressed Change to Proposal model userstonotify only returns users who have followed the proposal not users who have supported it Change to mailer Proposals notification mailer view includes a small link which invites the user to unfollow the proposal as shown in the screenshot above This necessitated adding a line in maileryml Possibly you will want translations in other languages If you provide me with a Spanish translation I would be happy to add this to the PR I have also corrected some minor errors I noticed in the English Spec changes My changes caused some specs to break This was the case when there were tests that assumed that users who supported a proposal would be sent notifications about them This is no longer the case because they have to be followed to that proposal and not merely support it Secondly I updated the specs for userstonotify for this same reason I removed the test for deduplication because duplication should only occur if there are users who exist in both supporters and followers list and now there is only the followers list which is looked at in the method Finally I added to the test to check for the unfollow link in the notifications digest and to make sure that clicking support also creates a follow Please let me know how I can improve this PR or any of my changes Also I tend to commit often so can rebase this history if required Thanks Enjoy References As cited in This PR is nested with Objectives This PR try improve how the gender is called compacting everything with enumerize gem Visual Changes Before ruby scope male wheregender male scope female wheregender female scope other wheregender other Now ruby enumerize gender in male female other scope shallow Notes So now to add another genders just to change in modelsuserrb and to call then is the same way This PR must be merged after References Objectives Update Jquery Notes Im searching for brokes after that At this moment localy I have only capybara tests failing Bumps foundationrails from to Dependabot compatibility score Dependabot will resolve any conflicts with this PR as long as you dont alter it yourself You can also trigger a rebase manually by commenting dependabot rebase dependabotautomergestart dependabotautomergeend Note This repo was added to Dependabot recently so youll receive a maximum of PRs for your first few update runs Once an update run creates fewer than PRs well remove that limit You can always request more updates by clicking Bump now in your Dependabot dashboard details summaryDependabot commands and optionssummary br You can trigger Dependabot actions by commenting on this PR dependabot rebase will rebase this PR dependabot recreate will recreate this PR overwriting any edits that have been made to it dependabot merge will merge this PR after your CI passes on it dependabot squash and merge will squash and merge this PR after your CI passes on it dependabot cancel merge will cancel a previously requested merge and block automerging dependabot reopen will reopen this PR if it is closed dependabot close will close this PR and stop Dependabot recreating it You can achieve the same result by closing it manually dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version unless you reopen the PR or upgrade to it yourself dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version unless you reopen the PR or upgrade to it yourself dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency unless you reopen the PR or upgrade to it yourself dependabot use these labels will set the current labels as the default for future PRs for this repo and language dependabot use these reviewers will set the current reviewers as the default for future PRs for this repo and language dependabot use these assignees will set the current assignees as the default for future PRs for this repo and language dependabot use this milestone will set the current milestone as the default for future PRs for this repo and language dependabot badge me will comment on this PR with code to add a Dependabot enabled badge to your readme Additionally you can set the following in your Dependabot dashboard Update frequency including time of day and day of week Pull request limits per update run andor open at any time Automerge options neverpatchminor and devruntime dependencies Outofrange updates receive only lockfile updates if desired Security updates receive only security updates if desired details References Closes Objectives Allow admin to hide proposals created by himher