Description Breaking up into smaller pieces just upgrading the MOCK methods for testcommon and testextensions Risk Level low Testing existing Docs Changes na Release Notes na Signedoffby Derek Argueta derekapinterestcom Description as title saysg Risk Level low Testing existing Docs Changes na Release Notes na Related to issue cc dichen Signedoffby Derek Argueta derekapinterestcom Description stdmakeunique is shorter with type deduction is more consistent with other code in the codebase and generally should be preferred Risk Level low Testing existing Docs Changes na Release Notes na Signedoffby Derek Argueta derekapinterestcom Hey Today my envoy proxy stopped working after I rebuild my Docker image I am getting that error using your example critical main sourceserverservercc error initializing configuration etcenvoyyaml Proto constraint validation failed Using deprecated option envoyapiv routeCorsPolicyalloworigin from file routecomponentsproto This configuration will be removed from Envoy soon Please see for details If continued use of this field is absolutely necessary see for how to apply a temporary and highly discouraged override alloworigin allowmethods GET PUT DELETE POST OPTIONS allowheaders keepaliveuseragentcachecontrolcontenttypecontenttransferencodingcustomheader xacceptcontenttransferencodingxacceptresponsestreamingxuseragentxgrpcwebgrpctimeout exposeheaders customheader grpcstatusgrpcmessage maxage Dockerfile This configuration will build a Docker container containing an Envoy proxy that routes to Google FROM envoyproxyenvoydevlatest RUN aptget update COPY envoyyaml etcenvoyyaml CMD usrlocalbinenvoy c etcenvoyyaml envoyyaml admin accesslogpath tmpadminaccesslog address socketaddress address portvalue staticresources listeners name listener address socketaddress address portvalue filterchains filters name envoyhttpconnectionmanager config codectype auto statprefix ingresshttp routeconfig name localroute virtualhosts name localservice domains routes match prefix route cluster apiinterface maxgrpctimeout s cors alloworigin allowmethods GET PUT DELETE POST OPTIONS allowheaders keepaliveuseragentcachecontrolcontenttypecontenttransferencodingcustomheader xacceptcontenttransferencodingxacceptresponsestreamingxuseragentxgrpcwebgrpctimeout maxage exposeheaders customheader grpcstatusgrpcmessage httpfilters name envoygrpcweb name envoycors name envoyrouter clusters name apiinterface connecttimeout s type logicaldns http protocoloptions lbpolicy roundrobin hosts socketaddress address hostdockerinternal portvalue It appears that weve added a custom Envoy only pseudoheader which is clearly forbidden by the HTTP spec Its only used by the Hystrix Dashboard Event Stream so presumably its not widely used but its been breaking some intermediaries Signedoffby Piotr Sikora piotrsikoragooglecom Description use of stdmakeshared isnt necessary here just use RAII Risk Level low Testing existing Docs Changes na Release Notes na Signedoffby Derek Argueta derekapinterestcom Initial docs for v arrived in There is still a large body of existing example configs either standalone or in configuration fragments that need to be updated to v has a workaround for the inability of protoxform to intelligently follow field renames in RST links some minor hardcoding is there for now We should fix this either put renames in the type database or make protoxform aware of the entire descriptor pool similar to how the API booster does it Wasm modules used in tests are currently generated manually using tools outside of Bazel build system making them nonhermetic This should be fixed so that all test data is generated using Bazel rules jplevyak and myself are already working this Either upstream the wee compile tool to V or move it to a separate repo