This addresses uploading buffers larger than about bytes results in corrupt data Theres no changes to cpr just simply a curl version bump Ive not rigorously tested this change yet Hey Im trying to use cpr to upload an image from memory generated with CImg It works for most of the file however all data after x EDF becomes corrupt note sending the same image using a file on disk first works though is not a usable solution I cant figure out whats going on Ive been toying in a debugger for ages Ive yet to locate where the bug occurs Ive tried doing stuff like removing all frees to see if some kind of use after free is happening I expect this is probably on my side but I cant for the life of me find it Some code c char buffer NULL sizet size FILE fp openmemstream buffer size imagesavepngfp imagesavepngtest png this works fflushfp data also seems correct in a debugger getclientuploadFile channel reinterpretcastuint tbuffer size message name fclosefp freebuffer Skipping some missdirection that end up here where its added to the session c void CPRSessionsetMultipartconst stdinitializerlistPart parts stdvectorcprPart cprParts for Part m parts if misFile cprPartspushbackcprPartmname cprFilemvalue else if mbufferlen auto buffer cprBuffermbuffer mbuffer mbufferlen mname cprPartspushbackcprPartmname buffer else cprPartspushbackcprPartmname mvalue muiltpartparts cprParts sessionSetMultipartmuiltpart add to cpr session that will after a while call sessionPost At all stages in the code a above the data seems fine Note the cpr calls are going through a library first hence the abridged code Ive attached two sample images correctpng courruptpng Corrupt Correct Hello could you provide more informations on building cpr CMake gives errors and wich gcc you dont tell what files to compile With CMake C Requests CMake Options USESYSTEMCURL OFF BUILDCPRTESTS ON GENERATECOVERAGE OFF CPRCURLNOSIGNAL OFF USESYSTEMGTEST OFF CMAKEUSEOPENSSL ON Not using system Curl using builtin curl project instead CMake Error at optCMakeListstxt addsubdirectory The source directory DDeveloppementCcprmasteroptcurl does not contain a CMakeListstxt file CMake Error at optCMakeListstxt setproperty setproperty could not find TARGET libcurl Perhaps it has not yet been created Set CURLFOUND to TRUE Set CURLLIBRARIES to libcurl Set CURLINCLUDEDIRS to includeincludecurl Not using system gtest using builtin googletest project instead CMake Error at optCMakeListstxt addsubdirectory The source directory DDeveloppementCcprmasteroptgoogletest does not contain a CMakeListstxt file CMake Error at optCMakeListstxt setproperty setproperty could not find TARGET gtest Perhaps it has not yet been created CMake Error at optCMakeListstxt setproperty setproperty could not find TARGET gtestmain Perhaps it has not yet been created Set GTESTFOUND to TRUE Set GTESTLIBRARIES to gtest Set GTESTMAINLIBRARIES to gtestmain Set GTESTBOTHLIBRARIES to gtestgtestmain Set GTESTINCLUDEDIRS to include Building mongoose project for test support CMake Error at optCMakeListstxt addsubdirectory The source directory DDeveloppementCcprmasteroptmongoose does not contain a CMakeListstxt file Set MONGOOSEFOUND to TRUE Set MONGOOSELIBRARIES to mongoose Set MONGOOSEINCLUDEDIRS to CMake Error at optCMakeListstxt setproperty setproperty could not find TARGET mongoose Perhaps it has not yet been created Using CURLINCLUDEDIRS includeincludecurl Using CURLLIBRARIES libcurl Configuring incomplete errors occurred See also DDeveloppementCcprmasterbuildCMakeFilesCMakeOutputlog See also DDeveloppementCcprmasterbuildCMakeFilesCMakeErrorlog Read version information from the file VERSION and add the variables cprVERSION and cprVERSIONMAJOR cprVERSIONMAJOR is used as SOVERSION My SOVERSION choice implies that the ABI does only break when the major version number changes If that is not the case it should be changed fileSTRINGS is available in project VERSION is available in stringREPLACE is available in listGET is available in settargetproperties VERSION SOVERSION is available in The backgroundcolor on the website is missing Without it the browser falls back on the default color which is userconfigurable Before screenshot T After screenshot T I want to make WebDavrequests with libcurl Is it in the scope of cpr to also support the webdavverbs COPY LOCK MKCOL MOVE PROPFIND PROPPATCH UNLOCK somewhere in the future Id prefer to contribute to this project to match my needs instead of writing another bad libcurlwrapper just for my usecase But Id like to make sure that a PR with these changes would have a chance to make it into master mimetype undeclared first use in this function did you mean mimetypd optcurllibmimec renamed CURLcode curlmimetypecurlmimepart part const char mimetyped to CURLcode curlmimetypecurlmimepart part const char mimetype and build no problem Respects Required modification of added I am trying to use CPR in android This is my srcmaincpp directorys structure cpr nativelibcpp CMakeListstxt note cpr directory is generated by running this command git clone recursesubmodules This is the content of CMakeListstxt in srcmaincpp directory cmakeminimumrequiredVERSION addlibrary nativelib SHARED nativelibcpp findlibrary loglib log addsubdirectorycpr targetlinklibraries nativelib cpr loglib But I get this error when I build and run the code Could NOT find OpenSSL try to set the path to OpenSSL root folder in the system variable OPENSSLROOTDIR missing OPENSSLCRYPTOLIBRARY OPENSSLINCLUDEDIR EDIT I have found the answer soon I will be posting the answer HiI have Linux Makefile project how to use this wrapper lib in my project What keys i must add to Makefile rules etc in cURL is lcurl but what about wrappers keys BTW is any Install guides how to install this wrapper on LinuxVSCode do not using CMake