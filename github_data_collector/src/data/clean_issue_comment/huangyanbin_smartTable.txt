 y getDeclaredField NoSuchFieldException tableDatasetOnRowClickListener IDrawFormat class MaxColumnWidthDrawFormatTprivate val limitWidth Boolean private val maxWidth Int IDrawFormatT private val valueMap MutableMapString SoftReferenceArrayString init valueMap HashMap override fun measureWidthcolumn ColumnT position Int config TableConfig Int val paint configpaint configcontentStylefillPaintpaint val value columnformatposition var width paintmeasureTextvaluetoInt val maxWidth maxWidth configgetHorizontalPadding if limitWidth width maxWidth valuelength val stringBuilder StringBuildervalue var start var end while end stringBuilderlength valuelength width paintmeasureTextstringBuilder start endtoInt if width maxWidth stringBuilderinsertend n start end end if valueMap value null valueMap value SoftReferencestringBuildertoStringsplit ntoTypedArray return maxWidth else if valueMap value null valueMap value SoftReferencevaluesplit ntoTypedArray return width override fun measureHeightcolumn ColumnT position Int config TableConfig Int val paint configpaint configcontentStylefillPaintpaint return DrawUtilsgetMultiTextHeightpaint getSplitStringcolumnformatposition override fun drawc Canvas rect Rect cellInfo CellInfoT config TableConfig val paint configpaint setTextPaintconfig cellInfo paint if cellInfocolumntextAlign null painttextAlign cellInfocolumntextAlign drawTextc cellInfovalue rect paint private fun drawTextc Canvas value String rect Rect paint Paint DrawUtilsdrawMultiTextc paint rect getSplitStringvalue private fun setTextPaintconfig TableConfig cellInfo CellInfoT paint Paint configcontentStylefillPaintpaint val backgroundFormat configcontentCellBackgroundFormat if backgroundFormat null backgroundFormatgetTextColorcellInfo TableConfigINVALIDCOLOR paintcolor backgroundFormatgetTextColorcellInfo painttextSize painttextSize configzoom private fun getSplitStringval String ArrayString var values ArrayString null if valueMap val null values valueMap val get if values null values valsplit ntoTypedArray valueMap val SoftReferencevalues return values TableData FormTableData createTableData FormTableData MaxColumnWidthDrawFormat public class MyFormTableDataT extends IForm extends ArrayTableDataT param tableName param t param columns protected MyFormTableDataString tableName ListT t ListColumnT columns supertableName t columns public static T extends IForm MyFormTableDataT createSmartTable table String tableName int spanSize T data IDrawFormatT drawFormat T newArray T ArraynewInstancedatagetClassgetComponentType datalength int exitArray new int datalength spanSize ListCellRange cellRanges new ArrayList for int i i datalength i T rowData data i int spanWidthSize for int j j rowDatalength j T t rowData j createArrayRowspanSize newArray i rowData while exitArray i spanWidthSize spanWidthSize newArray i spanWidthSize t if tgetSpanHeightSize for int row i row i tgetSpanHeightSize row for int col spanWidthSize col spanWidthSize tgetSpanWidthSize col exitArray row col if tgetSpanWidthSize tgetSpanHeightSize cellRangesaddnew CellRangei i tgetSpanHeightSize spanWidthSize spanWidthSize tgetSpanWidthSize spanWidthSize tgetSpanWidthSize newArray ArrayTableDatatransformColumnArraynewArray MyFormTableData tableData createTableDatatable tableName newArray drawFormat tableDatasetUserCellRangecellRanges return tableData private static T extends IForm void createArrayRowint spanSize T newArray int i T rowData if newArray i null newArray i T ArraynewInstancerowDatagetClassgetComponentType spanSize private static T extends IForm MyFormTableDataT createTableDataSmartTable table String tableName T data IDrawFormatT drawFormat tablegetConfigsetShowColumnTitlefalse ListColumnT columns new ArrayList for T dataArray data ColumnT column new Column null drawFormat columnsetDatasArraysasListdataArray columnsaddcolumn ArrayListT arrayList new ArrayListArraysasListdata MyFormTableDataT tableData new MyFormTableDatatableName arrayList columns tableDatasetDatadata return tableData val tableData MyFormTableDatacreatetable forms size formsMaxColumnWidthDrawFormatFormlimitWidth viewWith if tableData null setTableDatatableData return tableData Listview private void findViews mainsearchview SearchView findViewByIdRidmainsearchview mainlistview ListView findViewByIdRidmainlistview mainlistviewsetAdapternew ArrayAdapterStringthis androidRlayoutsimplelistitem searcoh mainlistviewsetTextFilterEnabledtrue mainsearchviewsetOnQueryTextListenernew SearchViewOnQueryTextListener Override public boolean onQueryTextSubmitString query return false Override public boolean onQueryTextChangeString newText if TextUtilsisEmptynewText else mainlistviewclearChoices return false 