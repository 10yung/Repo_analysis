 rootboron vmadm create f bsdjson Missing required properties disks size Disk is a nocreate disk that will be the install media file so it has no size json model virtio media disk path install fs nocreate true If I add a size it works but the property is not use json model virtio media disk path install fs size nocreate true rootboron vmadm get ca c f db c fc b fc json disk json path devzvolrdskzonesca c f db c fc b fc disk boot false model virtio media disk pcislot uuid be d dba c eaf aa ed fe f zfsfilesystem zonesca c f db c fc b fc disk zpool zones size compression off refreservation blocksize path install fs boot false model virtio media disk pcislot uuid f b ceb d e fac missing true So for non zvol nocreate the size restriction should probably relaxed Talking with rmustacc he stated that SmartOS disables deep c states which have unfortunate consequences with turbo boost Is it possible to enable Turbo boost bash rootstorm kstat m cpuinfo i s implementation module cpuinfo instance name cpuinfo class misc implementation x GenuineIntel E family model step clock MHz rootstorm kstat m cpuinfo i s supportedfrequenciesHz module cpuinfo instance name cpuinfo class misc supportedfrequenciesHz rootstorm kstat m cpuinfo module cpuinfo instance name cpuinfo class misc brand Intelr Xeonr CPU E v GHz cacheid chipid clockMHz clogid coreid cputype i crtime currentclockHz currentcstate family fputype i compatible implementation x GenuineIntel E family model step clock MHz model ncoreperchip ncpuperchip pgid pkgcoreid snaptime sockettype Unknown state online statebegin stepping supportedfrequenciesHz supportedmaxcstates vendorid GenuineIntel module cpuinfo instance name cpuinfo class misc brand Intelr Xeonr CPU E v GHz cacheid chipid clockMHz clogid coreid cputype i crtime currentclockHz currentcstate family fputype i compatible implementation x GenuineIntel E family model step clock MHz model ncoreperchip ncpuperchip pgid pkgcoreid snaptime sockettype Unknown state online statebegin stepping supportedfrequenciesHz supportedmaxcstates vendorid GenuineIntel Sometimes it is useful to get a shell in a docker zone zlogin i nativeusrsbindockerexec bash usually does the trick It looks like vmadm console is not hooked up for docker so it might be nice to have that do zlogin dockerexec Maybe with an optional shell path that can be set in the vmadm payload sjorge andyf what are the UEFI bhyve changes in the latest release andyf sjorge yes and the OmniOS ones D andyf The firmware should work fine on SmartOS too but I havent tested andyf jorge now that I am not trying to type on my phone andyf sjorge the new firmware is based on I will ask for the binary and give it a test spin this week This PR replaces Original work done by jclulow man page update tests done by sjorge root c da usrvmtest runtest teststestupdatejs Running teststestupdatejs Already have imgapi image source no change Already have docker image source no change TAP version create VM ok created VM b f adf f f bca a d add net ok failed to set ips was expected ok failed to set netmask was expected ok failed to set nictag was external expected external ok failed to set vlanid was expected ok failed to set gateways was expected ok failed to set mac was expected ok failed to set interface was net expected net add IPv to net ok failed to set ips was fd addrconf expected fd addrconf ok failed to set mac was expected add net bad IP ok failed to add nic with invalid IP Invalid IP for NIC nictagexternalvlanid mac b fc physicalnet ips gateways add KVMonly property to zone ok VM has vs nics ok allowunfilteredpromisc is not set remove net ok Successfully removed net from VM add net and net ok failed to set ips was expected ok failed to set gateways was expected ok failed to set ips was expected ok failed to set gateways was expected remove net and net ok Successfully removed net and net from VM add nics nonprivate ok nd NIC is primary true ok updated VM b f adf f f bca a d remove net st time ok Successfully removed net from VM ok nd NIC is primary true ok interfacenet mac vlanid nictagexternalgateway gateways netmask ip ips interfacenet mac vlanid nictagexternalgateway gateways netmask ip ips primarytrue remove net and net st time ok Successfully removed net and net from VM add nics nonprivate ok nd NIC is primary true ok updated VM b f adf f f bca a d remove net nd time ok Successfully removed net and net from VM ok st NIC is primary true remove net and net nd time ok Successfully removed net and net from VM add empty NICs ok unnamed assert ok unnamed assert ok unnamed assert ok Successfully added empty NICs to VM ok Successfully added empty NICs to VM ok Successfully added empty NICs to VM ok Successfully added empty NICs to VM remove empty primary NIC ok unnamed assert ok unnamed assert ok unnamed assert add IPs to empty NIC ok unnamed assert ok unnamed assert ok unnamed assert ok Successfully removed empty NIC from VM remove IPs to make empty NIC ok unnamed assert ok unnamed assert ok unnamed assert ok Successfully removed ip from NIC ok Successfully removed ips from NIC clean up from empty tests ok unnamed assert ok unnamed assert ok Remove last empty NIC from VM add NIC with minimal properties ok failed reloading VM ok VM has nics expected ok prop is expected interface ok prop interface is not undefined ok prop is expected mac ok prop mac is not undefined ok prop is expected nictag ok prop nictag is not undefined ok prop is expected ip ok prop ip is not undefined ok prop is expected ips ok prop ips is not undefined set then unset simple properties ok alias is useless VM expected useless VM ok alias is undefined expected undefined ok billingid is expected ok billingid is undefined expected undefined ok hostname is hamburgerhelper expected hamburgerhelper ok hostname is undefined expected undefined ok owneruuid is bf a ef e b a c deb a d expected bf a ef e b a c deb a d ok owneruuid is undefined expected undefined ok packagename is really expensive package expected really expensive package ok packagename is undefined expected undefined ok packageversion is XP expected XP ok packageversion is undefined expected undefined update quota ok updated quota now G vs G remove quota ok updated quota now none vs none update ram ok vmmaxphysicalmemory expected ok vmmaxlockedmemory expected ok vmmaxswap expected update ram ok vmmaxphysicalmemory expected ok vmmaxlockedmemory expected ok vmmaxswap expected update ram ok vmmaxphysicalmemory expected ok vmmaxlockedmemory expected ok vmmaxswap expected update ram ok vmmaxphysicalmemory expected ok vmmaxlockedmemory expected ok vmmaxswap expected update ram ok vmmaxphysicalmemory expected ok vmmaxlockedmemory expected ok vmmaxswap expected update maxswap up ok vmmaxswap expected ok vmtmpfs expected ok vmmaxphysicalmemory expected ok vmmaxlockedmemory expected update maxswap down ok vmmaxswap expected ok vmtmpfs expected ok vmmaxphysicalmemory expected ok vmmaxlockedmemory expected update maxphysicalmemory up ok vmmaxswap expected ok vmtmpfs expected ok vmmaxphysicalmemory expected ok vmmaxlockedmemory expected update maxphysicalmemory down ok vmmaxswap expected ok vmtmpfs expected ok vmmaxphysicalmemory expected ok vmmaxlockedmemory expected update maxlockedmemory ok vmmaxswap expected ok vmtmpfs expected ok vmmaxphysicalmemory expected ok vmmaxlockedmemory expected update resolvers when empty ok resolvers after update update resolvers to empty when filled ok resolvers after update update resolvers to empty when empty ok resolvers after update update shm rctls ok maxmsgids value before test ok maxsemids value before test ok maxshmids value before test ok maxshmmemory value before test ok maxmsgids value after test ok maxsemids value after test ok maxshmids value after test ok maxshmmemory value after test remove cpucap ok cpucap is to start ok cpucap is gone set low quota ok update quota success fill up zoneroot ok expected short write get vmobj for full VM ok load VM success bump maxphysicalmemory ok update maxphysicalmemory success raise quota to ok update quota success get vmobj for full VM after modifications ok load VM success ok check maxphysicalmemory ok check quota attempt to modify unmodifiable properties ok load VM success ok update unmodifiable VM property brand to bogusbrand success ok load VM success ok value has not been modified original joyent found joyent ok update unmodifiable VM property hvm to bogushvm success ok load VM success ok value has not been modified original false found false ok update unmodifiable VM property lastmodified to boguslastmodified success ok update unmodifiable VM property serveruuid to success ok load VM success ok value has not been modified original d a f ac acd da found d a f ac acd da ok update unmodifiable VM property uuid to success ok load VM success ok value has not been modified original b f adf f f bca a d found b f adf f f bca a d ok update unmodifiable VM property zonename to boguszonename success ok load VM success ok value has not been modified original b f adf f f bca a d found b f adf f f bca a d ok unmodifiable properties success attempt to remove and set zonecfg properties ok update VM property cpushares to undefined success ok update VM property cpushares to success ok update VM property cpushares to undefined success ok update VM property cpushares to undefined success ok update VM property limitpriv to success ok update VM property limitpriv to default success ok update VM property limitpriv to defaultdtraceuser success ok update VM property limitpriv to success ok update VM property limitpriv to success ok update VM property maxlwps to undefined success ok update VM property maxlwps to success ok update VM property maxlwps to undefined success ok update VM property maxlwps to undefined success ok update VM property maxmsgids to undefined success ok update VM property maxmsgids to success ok update VM property maxmsgids to undefined success ok update VM property maxmsgids to undefined success ok update VM property maxshmids to undefined success ok update VM property maxshmids to success ok update VM property maxshmids to undefined success ok update VM property maxshmids to undefined success ok update VM property maxshmmemory to undefined success ok update VM property maxshmmemory to success ok update VM property maxshmmemory to undefined success ok update VM property maxshmmemory to undefined success ok update VM property zfsiopriority to undefined success ok update VM property zfsiopriority to success ok update VM property zfsiopriority to undefined success ok update VM property zfsiopriority to undefined success ok zonecfg properties success add fs vartmpglobal ok field type was set to lofs ok field source was set to tmp ok field target was set to vartmpglobal ok field options was set to nodevice remove fs vartmpglobal ok Successfully removed filesystem from VM delete zone ok deleted VM b f adf f f bca a d tests pass ok teststestupdatejs TEST COMPLETE IN SECONDS SUMMARY PASS I couldnt get a full runtests to complete because under vmware fusion both kvm and bhyve fail I verified they also fail in an unmodified PI There is a iso with the changes available here Aditional testing been using the original change for a few months now as I was carrying it around as a patch with a few other bits Bumps restify from to details summaryRelease notessummary Sourced from restifys releases Restify This release is a quick fix for people that are getting a different error code when on Node when the Content Length is too long for the Body Parser You only need to upgrade if you are running iojs or Node Changelog Fix HTTP status name Micah Ransdell Restify After a little bit of a hiccup with we are back in the saddle with This release adds proper Node support by upgrading dtraceprovider to Bump dtraceprovider to for Node support Corbin Uselton Thanks to our newest contributor Corbin Uselton corbinu for the help Restify There are lots of changes in Restify See below for a list of pull requests that were merged in There were quite a few bugs fixed and a few new features added Thanks to all our contributors for their hard work contenttype can be caseinsensitive Yunong Xiao update various dependencies Alex Liu fix formatters such that they always return cb Yunong Xiao fix body parser race condition Yunong Xiao add reqmatchedVersion Nathan Peck Micah Ransdell Fix issue with server toString Method OiNutter Micah Ransdell Add JSDoc comments Alex Liu Update staticjs to allow for serving static files that do not use the route as a path Wavewash Micah Ransdell Support hash option to Formidable for multipart file uploads blakevanian ManRueda Updated dtraceprovider yads add query parameters to auditlogger Alex Liu Allow false and null as json body Alex Dobeck qvalue choice on wildcards ignores default qvalue of Kevin Peno Allow optional headers to be added as properties to bunyan logs Michael Paulson Dont include large coverage files in published packages Trent Mick Add a feature to allow the expiration of old unprocessed requests Michael Paulson Add redirect support to Response Alex Liu ressend cant send false and null Alex Dobeck Bumping major because of details details summaryChangelogsummary Sourced from restifys changelog Bug Fixes benchmark force latest restify version b ec e gitgithubcomrestifynoderestifygitcommitb ec e server address domain performance regression with Node v x e d gitgithubcomrestifynoderestifygitcommite d a name a Features chain use nextTick instead of setImmediate ad gitgithubcomrestifynoderestifygitcommit ad a name a a name a Features chain schedule handlers to the next tick ed gitgithubcomrestifynoderestifygitcommit ed a name a a name a a name a Bug Fixes test make upgrade test pass d b gitgithubcomrestifynoderestifygitcommitd b a name a trtable truncated details details summaryCommitssummary d f chorerelease release de docsCHANGELOG Update changelog e d fixserver address domain performance regression with Node v x b ec e fixbenchmark force latest restify version eee chorerelease release bf b docsCHANGELOG Update changelog a featchain use nextTick instead of setImmediate ea chorerelease release d f a docsCHANGELOG Update changelog e cc b Gracefully handle formatters throwing restify errors Additional commits viewable in compare view details details summaryMaintainer changessummary This version was pushed to npm by hekike a new releaser for restify since your current version details br Dependabot compatibility score Dependabot will resolve any conflicts with this PR as long as you dont alter it yourself You can also trigger a rebase manually by commenting dependabot rebase dependabotautomergestart dependabotautomergeend details summaryDependabot commands and optionssummary br You can trigger Dependabot actions by commenting on this PR dependabot rebase will rebase this PR dependabot recreate will recreate this PR overwriting any edits that have been made to it dependabot merge will merge this PR after your CI passes on it dependabot squash and merge will squash and merge this PR after your CI passes on it dependabot cancel merge will cancel a previously requested merge and block automerging dependabot reopen will reopen this PR if it is closed dependabot ignore this patchminormajor version will close this PR and stop Dependabot creating any more for this minormajor version unless you reopen the PR or upgrade to it yourself dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency unless you reopen the PR or upgrade to it yourself dependabot use these labels will set the current labels as the default for future PRs for this repo and language dependabot use these reviewers will set the current reviewers as the default for future PRs for this repo and language dependabot use these assignees will set the current assignees as the default for future PRs for this repo and language dependabot use this milestone will set the current milestone as the default for future PRs for this repo and language You can disable automated security fix PRs for this repo from the Security Alerts page details rootsupernova dlstat showphys LINK TYPE INDEX PKTS BYTES igb tx K M Segmentation Fault core dumped rootsupernova uname a SunOS supernova joyent T Z i pc i i pc 