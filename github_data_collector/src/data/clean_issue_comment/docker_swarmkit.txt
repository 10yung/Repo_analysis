 Please make sure youve read and understood our contributing guidelines Make sure all your commits include a signature generated with git commit s For additional information on our contributing process read our contributing guide If this is a bug fix make sure your description includes fixes xxxx or closes xxxx Please provide the following information What I did How I did it How to test it Description for the changelog Write a short one line summary that describes the changes in this pull request for inclusion in the changelog Currently both names are max characters long We have a namingscheme with versioning in the name and hit often this limit Is there a reason for only allowing chars Can this easily be increased Would a patch be accepted What I did Added cleanup routine for old tasksdb tasks to avoid it growing on environments where daemon is restarted rarely Without this change those are removed only during worker init closes How I did it Cleanup routine run on its own thread and every minutes it removes tasks on completedfailedshutdown state which are more than minutes old How to test it Add some constantly completingfailing services Let then run couple of minutes Remove those services Use eg to read tasksdb and see that all tasks exists still on database Wait minutes When removal happens it write lines like these to debug log time T leveldebug msgRemoving task ID p g tjdfo myfc r fs State COMPLETE LastUpdate T Z modulenodeagentworker nodeidx cjt iizyahokwt n maey time T leveldebug msgRemoving task ID pra b nandod lqlfy qjr State FAILED LastUpdate T Z modulenodeagentworker nodeidx cjt iizyahokwt n maey Use BoltGUI again to verify that there is no tasks left on DB anymore Current network allocation is run asynchronously with network object creation when a user specifies an overlapped subnet the network creation succeeds but this network is useless with empty IPAM config For example docker network create d overlay subnet testol docker network create d overlay subnet testol The second command does not fail testol is created with a different ID but useless IPAM Config is null Signedoffby Xinfeng Liu xinfengliugmailcom Please make sure youve read and understood our contributing guidelines Make sure all your commits include a signature generated with git commit s For additional information on our contributing process read our contributing guide If this is a bug fix make sure your description includes fixes xxxx or closes xxxx Please provide the following information What I did This PR makes network creation use a channel to wait for the result of network allocation from Allocator before return Because of this change some testgo files are modified Update Found a duplicated line in make coverage of directmk that caused CI flaky I removed that duplicated line How I did it Use a pernetwork channel to wait for the result of network allocation from Allocator If the network allocation fails delete the network object that was just created and return an error to the user So the user cannot create a network with overlapped subnet How to test it Added TestCreateNetworkOverlapIP to networktestgo Description for the changelog Write a short one line summary that describes the changes in this pull request for inclusion in the changelog When I deploy this v dockercomposeyml stack onto a two node docker swarm cluster using the overlay network it works as expected service names can be used on the network and ports are accessible Unfortunately it doesnt work when using the weave network plugin NETWORKDRIVERweaveworksnetpluginlatestrelease docker stack deploy c dockercomposeyml voteapp docker run ti network voteappvoteapp centos curl head I filed but they think it is probably a change or bug with docker or swarm network plugins In the similar issue some people claimed downgrading to fixed the problem so maybe something broke with network plugins My example yml is based on the common voting app sample and should be easy to deploy then test with the curls in my gist Is there any other network plugin I can use besides overlay or weave to try to narrow down the problem Is there anything else I could provide to help Golang full diff go released includes fixes to the go command runtime syscall and net packages See the Go milestone on our issue tracker for details Golang CVE full diff go released includes security fixes to the cryptodsa package See the Go milestone on our issue tracker for details security Go and Go are released Hi gophers We have just released Go and Go to address a recently reported security issue We recommend that all affected users update to one of these releases if youre not sure which choose Go Invalid DSA public keys can cause a panic in dsaVerify In particular using cryptox Verify on a crafted X certificate chain can lead to a panic even if the certificates dont chain to a trusted root The chain can be delivered via a cryptotls connection to a client or to a server that accepts and verifies client certificates nethttp clients can be made to crash by an HTTPS server while nethttp servers that accept client certificates will recover the panic and are unaffected Moreover an application might crash invoking cryptox CertificateRequestCheckSignature on an X certificate request parsing a golangorgxcryptoopenpgp Entity or during a golangorgxcryptootr conversation Finally a golangorgxcryptossh client can panic due to a malformed host key while a server could panic if either PublicKeyCallback accepts a malformed public key or if IsUserAuthority accepts a certificate with a malformed public key The issue is CVE and Go issue golangorgissue Thanks to Daniel Mandragona for discovering and reporting this issue Wed also like to thank regilero for a previous disclosure of CVE Signedoffby Sebastiaan van Stijn githubgonenl Please make sure youve read and understood our contributing guidelines Make sure all your commits include a signature generated with git commit s For additional information on our contributing process read our contributing guide If this is a bug fix make sure your description includes fixes xxxx or closes xxxx Please provide the following information What I did How I did it How to test it Description for the changelog Write a short one line summary that describes the changes in this pull request for inclusion in the changelog Please make sure youve read and understood our contributing guidelines Make sure all your commits include a signature generated with git commit s For additional information on our contributing process read our contributing guide If this is a bug fix make sure your description includes fixes xxxx or closes xxxx Please provide the following information opening as draft well probably have to update gRPC as well What I did How I did it How to test it Description for the changelog Write a short one line summary that describes the changes in this pull request for inclusion in the changelog full diff CTFE no longer prints certificate chains as long byte strings in messages when handler errors occur This was obscuring the reason for the failure and wasnt particularly useful CTFE now has a global log URL path prefix flag and a configuration proto for a log specific path The latter should help for various migration strategies if existing C server logs are going to be converted to run on the new code More progress has been made on log mirroring We believe that its now at the point where testing can begin The certcheck and cthammer utilities have received more enhancements x and x util now support Subject Information Access and additional exten sions for RPKI RFC scanner fixchain and some other command line utilities now have better handling of nonfatal errors this was a commit that was left over in and thought it could still be useful when debugging problems Before panic unexpected field type in StoreSnapshot After panic unexpected field type in StoreSnapshot XXXNoUnkeyedLiteral struct Since PR the test suite always panics panic Log in goroutine after TestWorkerUpdate has completed goroutine running testingcommonlogDepth xc a xc a x d x usrlocalgosrctestingtestinggo x a testingcommonlog usrlocalgosrctestingtestinggo testingcommonLog xc a xc fb x x usrlocalgosrctestingtestinggo x githubcomdockerswarmkitagentmockTaskControllerRemove xc a x b f xc b x b f xc b homecirclecigoworkspacesrcgithubcomdockerswarmkitagentworkertestgo x e githubcomdockerswarmkitagentreconcileTaskStatefunc xc dac homecirclecigoworkspacesrcgithubcomdockerswarmkitagentworkergo x created by githubcomdockerswarmkitagentreconcileTaskState homecirclecigoworkspacesrcgithubcomdockerswarmkitagentworkergo x a f FAIL githubcomdockerswarmkitagent s This is an attempt to fix this