the office code can build tf python whl I try to bulid tf c api with GPU supportbut I have not succeeded yet guikarist I wrote a very simple op zeroout and compile it to zerooutdll using bazel It worked well when using python tfloadoplibraryzerooutdll Now I want to use this opdll in c how to load the dll I try to use TFLoadLibrary in ccapih but TFNOTFOUND is returned zerooutdll is not found May some dependency are needed I placed built tensorflowccdll with zerooutdll in the same directory Could you give some advice TFStatus statusload TFNewStatus TFLibrary libhandle TFLoadLibraryC testcc testcc zerooutdll statusload TFCode code TFGetCodestatusload code is Hi thanks for your contribution I want to use tensorrt with tftrt to accelerate my code on windows does the tensorflowccdll contain tensorrt Thanks in advance I want to load a model written in Python and run it in C So I built tensorflow to this script like below test tensorflowwindowsbuildscript tensorflowwindowsbuildscript parameterString configopt configcuda definenotensorflowpydepstrue coptnvccoptionsdisablewarnings tensorflowlibtensorflowccso verbosefailures buildps BazelBuildParameters parameterString BuildCppAPI Select a Tensorflow version v v v S Select another version Found chocolatey installed Unable to find pacman Which version would you like to install Default version Chocolatey v Installing the following packages msys By installing you accept licenses for the packages msys v already installed Use force to reinstall specify a version to install or try upgrade Chocolatey installed packages See the log for details C ProgramData chocolatey logs chocolateylog Warnings msys msys v already installed Use force to reinstall specify a version to install or try upgrade Found patch installed Found unzip installed Found bazel installed Make sure you have installed same version of bazel Are you sure you want to PROCEED yn y Found git installed Found python installed Make sure you have installed same version of python Are you sure you want to PROCEED yn y Cloning into tensorflow You have bazel installed Do you wish to build TensorFlow with XLA JIT support yN N No XLA JIT support will be enabled for TensorFlow Do you wish to build TensorFlow with ROCm support yN N No ROCm support will be enabled for TensorFlow Do you wish to build TensorFlow with CUDA support yN Y CUDA support will be enabled for TensorFlow Please specify the CUDA SDK version you want to use Leave empty to default to CUDA Please specify the location where CUDA toolkit is installed Refer to READMEmd for more details Default is CProgram FilesNVIDIA GPU Computing ToolkitCUDAv Please specify the cuDNN version you want to use Leave empty to default to cuDNN Please specify the location where cuDNN library is installed Refer to READMEmd for more details Default is CProgram FilesNVIDIA GPU Computing ToolkitCUDAv Please specify a list of commaseparated Cuda compute capabilities you want to build with You can find the compute capability of your device at Please note that each additional compute capability significantly increases your build time and binary size Default is Please specify optimization flags to use during compilation when bazel option configopt is specified Default is archAVX Would you like to override eigen strong inline for some C compilation to reduce the compilation time Yn Y and I built Successful like this Target tensorflowlibtensorflowccso uptodate Cusersdmssubbazeldmssubny nikwexecrootorgtensorflowbazeloutx windowsoptbintensorflowlibtensorflowccso INFO Elapsed time s Critical Path s INFO processes local INFO Build completed successfully total actions WARNING The following rc files are no longer being read please transfer their contents or import their path into one of the standard rc files c users dmssub downloads test tensorflowwindowsbuildscript tensorflowwindowsbuildscriptmaster sourcebazelrc INFO Invocation ID e d f b c a b cc and I extract Clibrary use wiki See this gist which extracts the Tensorflow library Then set Visual Studio to link and compile with these files And the thirdparty sources are in sourceDir bazelsource external Now there is no way to link the built thirdparty libraries I do not understand this sentence And the thirdparty sources are in sourceDir bazelsource external Now there is no way to link the built thirdparty libraries Please explain this again I then linked the libraries to VS and ran the sample code below include tensorflowcorepublicsessionh int main return But I got a lot of build errors some headers no pd files PS C WINDOWS system d PS D cd D CPlus tensorflow tensorflowwindowsbuildscriptmaster PS D CPlus tensorflow tensorflowwindowsbuildscriptmaster parameterString c opt configcuda definenotens orflowpydepstrue coptnvccoptionsdisablewarnings tensorflowlibtensorflowccso verbosefailures buildps BazelBuildParameters parameterString BuildCppAPI ReserveSource ReserveVenv Select a Tensorflow version v v v S Select another version Found chocolatey installed Unable to find pacman Which version would you like to install Default version Chocolatey v Installing the following packages msys By installing you accept licenses for the packages msys v already installed Use force to reinstall specify a version to install or try upgrade Chocolatey installed packages See the log for details C ProgramData chocolatey logs chocolateylog Warnings msys msys v already installed Use force to reinstall specify a version to install or try upgrade Found patch installed Found unzip installed Found bazel installed Make sure you have installed same version of bazel Are you sure you want to PROCEED yn y Found git installed Found python installed Make sure you have installed same version of python Are you sure you want to PROCEED yn y Checking out files done HEAD is now at a c e TFXLA Support broadcasting in the lowering of SoftmaxCrossEntropyWithLogits Switched to branch master Your branch is up to date with originmaster Already up to date Checking out files done Note checking out tagsv You are in detached HEAD state You can look around make experimental changes and commit them and you can discard any commits you make in this state without impacting any branches by performing another checkout If you want to create a new branch to retain commits you create you may do so now or later by using b with the checkout command again Example git checkout b newbranchname HEAD is now at a d ffae Fix a bug in tpupy and xlapy that while creating an identity node for control input edges under rewrite context the parent control flow context is lost Removing tfconfigurebazelrc Removing tensorflowtfexportedsymbolsmsvclds Removing thirdpartyeigenhalfpatch Removing toolspythonbinpathsh warning tensorflowworkspacebzl has type expected Starting local Bazel server and connecting to it INFO Starting clean WARNING batch mode is deprecated Please instead explicitly shut down your Bazel server using the command bazel shutdown You have bazel installed Do you wish to build TensorFlow with Apache Ignite support Yn y Apache Ignite support will be enabled for TensorFlow Do you wish to build TensorFlow with XLA JIT support yN n No XLA JIT support will be enabled for TensorFlow Do you wish to build TensorFlow with ROCm support yN n No ROCm support will be enabled for TensorFlow Do you wish to build TensorFlow with CUDA support yN y CUDA support will be enabled for TensorFlow Please specify the CUDA SDK version you want to use Leave empty to default to CUDA Please specify the location where CUDA toolkit is installed Refer to READMEmd for more details Default is CProgram FilesNVIDIA GPU Computing ToolkitCUDAv Please specify the cuDNN version you want to use Leave empty to default to cuDNN Please specify the location where cuDNN library is installed Refer to READMEmd for more details Default is CProgram FilesNVIDIA GPU Computing ToolkitCUDAv Please specify a list of commaseparated Cuda compute capabilities you want to build with You can find the compute capability of your device at Please note that each additional compute capability significantly increases your build time and binary size Default is Please specify optimization flags to use during compilation when bazel option configopt is specified Default is archAVX archAVX Would you like to override eigen strong inline for some C compilation to reduce the compilation time Yn Y Eigen strong inline overridden Starting local Bazel server and connecting to it WARNING The following configs were expanded more than once cuda For repeatable flags repeats are counted twice and may lead to unexpected behavior ERROR Skipping tensorflowlibtensorflowccso error loading package tensorflow Encountered error while reading extension file cudabuilddefsbzl no such package localconfigcudacuda Cusersz jbazelz jo lyhoeexternallocalconfigcudacuda Directory not empty WARNING Target pattern parsing failed ERROR error loading package tensorflow Encountered error while reading extension file cudabuilddefsbzl no such package localconfigcudacuda Cusersz jbazelz jo lyhoeexternallocalconfigcudacuda Directory not empty INFO Elapsed time s INFO processes FAILED Build did NOT complete successfully packages loaded currently loading tensorflow venv PS D CPlus tensorflow tensorflowwindowsbuildscriptmaster Always encounter this problem which setting error Or this is a bug vs cuda cudnn win gtx bazel tf Hi all When attempting to load my custom op I get a crash somewhere in libtensorflowccdll I dont have the PDB debugger symbols to debug it however and all my attempts to generate PDBs using this build script have failed Bazel seems to fail after a few minutes if I add compilationmodedbg See for my notes on this Note based on the stack frames the crash appears to be related with a C exception caught by the VCRUNTIME dll Note I verified that the CUDA runtime is in the path ChildSP RetAddr Call Site bde d ff d c f KERNELBASERaiseException x bde b ff e bc VCRUNTIME CxxCallCatchBlock x f f dd vctools crt vcruntime src eh framecpp bde ff c ntdllRcConsolidateFrames x bdeba ff d c libtensorflowccTFDeletePRunHandle xbf bdebac ff d c VCRUNTIME CallSettingFrame x f dd vctools crt vcruntime src eh amd handlersasm bdebaf ff e bc VCRUNTIME CxxCallCatchBlock x f dd vctools crt vcruntime src eh framecpp bdebba ff b ntdllRcConsolidateFrames x bdedfc ff e libtensorflowccTFETensorHandleTensorDebugInfo x f b bdee ff fb c libtensorflowccTFETensorHandleTensorDebugInfo x b bdee ff ffcff libtensorflowccTFETensorHandleTensorDebugInfo x a bdee ff c a b libtensorflowccTFETensorHandleTensorDebugInfo x bcf b bdee d ff b a d libtensorflowcctensorflowOpDefBuilderOpDefBuilder xf c bdee ff b bff tfZeroOutgpu tensorflowregisteropOpDefBuilderWrapper OpDefBuilderWrapper x d f git tfcustomopwindows external tflibsitepackagestensorflowinclude tensorflow core framework oph d bdee ff d tfZeroOutgpu dynamic initializer for registerop xef f git tfcustomopwindows tfzerooutgpu examplecc e bdee ff b cd ucrtbasedinitterm x minkernel crts ucrt src appcrt startup inittermcpp f bdee b ff b a tfZeroOutgpu dllmaincrtprocessattach xbd f dd vctools crt vcstartup src startup dlldllmaincpp bdee ff b bc tfZeroOutgpu dllmaincrtdispatch x f dd vctools crt vcstartup src startup dlldllmaincpp bdee ff b dc tfZeroOutgpu dllmaindispatch x f dd vctools crt vcstartup src startup dlldllmaincpp bdee ff e b f tfZeroOutgpu DllMainCRTStartup x f dd vctools crt vcstartup src startup dlldllmaincpp bdee c ff e de ntdllLdrpCallInitRoutine x b bdee ff e f b ntdllLdrpInitializeNode x a bdeea ff e c b ntdllLdrpInitializeGraphRecurse x bdeea ff e b e d ntdllLdrpPrepareModuleForExecution xc bdeeac ff e b d ntdllLdrpLoadDllInternal x d bdeeb ff e acf c ntdllLdrpLoadDll xf bdeece ff e c f ntdllLdrLoadDll x c a bdeede ff e bd KERNELBASELoadLibraryExW x f b bdeee ff db bef pywraptensorflowinternaltensorflowEnvDefault x d c bdeef ff dc f pywraptensorflowinternaltensorflowLoadLibrary x f d bdef d ff da d pywraptensorflowinternalTFLoadLibrary x f e bdef ae pywraptensorflowinternal x d f bdef b d python PyCFunctionFastCallDict x c ci python work objects methodobjectc Inline Function python PyCFunctionFastCallKeywords x d c ci python work objects methodobjectc bdef f bf e python callfunction x c ci python work python cevalc bdef d b a python PyEvalEvalFrameDefault x ae c ci python work python cevalc Inline Function python PyEvalEvalFrameEx x c ci python work python cevalc Inline Function python PyFunctionFastCall x e c ci python work python cevalc Inline Function python fastfunction xa c ci python work python cevalc bdef e bf e python callfunction x c ci python work python cevalc bdef c f python PyEvalEvalFrameDefault x ae c ci python work python cevalc Inline Function python PyEvalEvalFrameEx x c ci python work python cevalc bdef d f python PyEvalEvalCodeWithName x c ci python work python cevalc a bdef f d python PyEvalEvalCodeEx x b c ci python work python cevalc b bdef f b python PyEvalEvalCode x d c ci python work python cevalc c bdef cf python runmod x c ci python work python pythonrunc d bdef c d c python PyRunFileExFlags xc c ci python work python pythonrunc e bdef cdcf python PyRunSimpleFileExFlags x c c ci python work python pythonrunc f bdef a dbdaf python PyRunAnyFileExFlags x c ci python work python pythonrunc bdef d f python runfile xbf c ci python work modules mainc bdef c f python PyMain x dec c ci python work modules mainc Inline Function pythoninvokemain x f dd vctools crt vcstartup src startup execommoninl bdefa ff e cf d pythonscrtcommonmainseh x c f dd vctools crt vcstartup src startup execommoninl bdefa ff e fe KERNEL BaseThreadInitThunk x bdefa ntdllRtlUserThreadStart x I have successfully compiled v version on win but I get an error no such package pngarchive when I compile v version enviroment vs win python bazel cmake cmd parameterString configopt tensorflowlibtensorflowccso verbosefailures buildps BazelBuildParameters parameterString BuildCppAPI ReserveSource ReserveVenv PS C tensorflowinstallation tensorflowwindowsbuildscript buildps BazelBuildParameters parameterString BuildCppAPI ReserveSource ReserveVenv Select a Tensorflow version v v v S Select another version Found chocolatey installed Found pacman installed Found patch installed Found unzip installed Found bazel installed Make sure you have installed same version of bazel Are you sure you want to PROCEED yn y Found cmake installed Make sure you have installed same version of cmake Are you sure you want to PROCEED yn y Found git installed Found python installed Make sure you have installed same version of python Are you sure you want to PROCEED yn y remote Enumerating objects done remote Counting objects done remote Compressing objects done remote Total delta reused delta packreused Unpacking objects done Note checking out tagsv the parent control flow context is lost Removing tfconfigurebazelrc Removing tensorflowtfexportedsymbolsmsvclds Removing thirdpartyeigenhalfpatch Removing toolspythonbinpathsh warning tensorflowworkspacebzl has type expected Starting local Bazel server and connecting to it INFO Starting clean WARNING batch mode is deprecated Please instead explicitly shut down your Bazel server using the command bazel shutdown You have bazel installed Invalid python path CtensorflowinstallationtensorflowwindowsbuildscriptvenvScriptspythonexe cannot be found Please specify the location of python Default is C Users dh AppData Local Programs Python Python pythonexe Do you wish to build TensorFlow with Apache Ignite support Yn n No Apache Ignite support will be enabled for TensorFlow Do you wish to build TensorFlow with XLA JIT support yN n No XLA JIT support will be enabled for TensorFlow Do you wish to build TensorFlow with ROCm support yN n No ROCm support will be enabled for TensorFlow Do you wish to build TensorFlow with CUDA support yN n No CUDA support will be enabled for TensorFlow Please specify optimization flags to use during compilation when bazel option configopt is specified Default is archAVX Would you like to override eigen strong inline for some C compilation to reduce the compilation time Yn y Eigen strong inline overridden ERROR DEBUG Cusersdhbazeldhqoon usnexternalbazeltoolstoolscpplibccconfigurebzl AutoConfiguration Warning BAZELVC is not set start looking for the latest Visual C installed DEBUG Cusersdhbazeldhqoon usnexternalbazeltoolstoolscpplibccconfigurebzl AutoConfiguration Warning Looking for VSVERSIONCOMNTOOLS environment variables eg VS COMNTOOLS DEBUG Cusersdhbazeldhqoon usnexternalbazeltoolstoolscpplibccconfigurebzl AutoConfiguration Warning Visual C build tools found at C Program Files x Microsoft Visual Studio VC ERROR CtensorflowinstallationtensorflowwindowsbuildscriptsourcetensorflowcoreplatformdefaultbuildconfigBUILD no such package pngarchive Traceback most recent call last File Ctensorflowinstallationtensorflowwindowsbuildscriptsourcethirdpartyrepobzl line applypatchctx ctxattrpatchfile File Ctensorflowinstallationtensorflowwindowsbuildscriptsourcethirdpartyrepobzl line in applypatch executeandcheckretcodectx cmd File Ctensorflowinstallationtensorflowwindowsbuildscriptsourcethirdpartyrepobzl line in executeandcheckretcode failNonzero return code when Nonzero return code when executing C msys usr bin bashexe l c patch p d Cusersdhbazeldhqoon usnexternalpngarchive i Ctensorflowinstallationtensorflowwindowsbuildscriptsourcethirdpartypngfixrpipatch Stdout Stderr Timed out and referenced by tensorflowcoreplatformdefaultbuildconfigpng ERROR Analysis of target tensorflowlibtensorflowccso failed build aborted no such package pngarchive Traceback most recent call last File Ctensorflowinstallationtensorflowwindowsbuildscriptsourcethirdpartyrepobzl line applypatchctx ctxattrpatchfile File Ctensorflowinstallationtensorflowwindowsbuildscriptsourcethirdpartyrepobzl line in applypatch executeandcheckretcodectx cmd File Ctensorflowinstallationtensorflowwindowsbuildscriptsourcethirdpartyrepobzl line in executeandcheckretcode failNonzero return code when Nonzero return code when executing C msys usr bin bashexe l c patch p d Cusersdhbazeldhqoon usnexternalpngarchive i Ctensorflowinstallationtensorflowwindowsbuildscriptsourcethirdpartypngfixrpipatch Stdout Stderr Timed out INFO Elapsed time s INFO processes FAILED Build did NOT complete successfully packages loaded 