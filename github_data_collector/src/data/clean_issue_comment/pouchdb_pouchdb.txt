 Hello Thank you for opening an issue on PouchDB There is also a Minute read on how to format your issue This template is optional but it may help us fix your issue faster Issue changes works fine as long as updates to the db are being made But it will randomly time out exactly after seconds if no change happens By randomly I mean on some changes requests it happens in others it doesnt The error provided is FetchError invalid json response body at reason Unexpected end of JSON input When it works output is sent uncompressed and heartbeat packets are sent every seconds checked on wireshark When it fails request includes a AcceptEncoding gzip deflate header In that case heartbeat packets are not sent are they being buffered for compression maybe and the error happens after seconds I dont know pouchdb or its dependencies well enough to figure out a proper fix So far Ive hacked my installation by harcoding requestcompress to false in nodefetch module Seems to be working rock solid for me O Funny thing is I tested pouchdb and which was reported to work in and both versions work sometimes and fail sometimes for me Whenever the AcceptEncoding header is sent they fail When its missing it works No idea why its sent only sometimes I hope this might help finding out the root cause Info Environment Nodejs Platform Debian Linux on both PC and Rapberry Pi Adapter IndexedDB Server PouchDB Reproduce Make a changessincenowlivetrue call on a remote database that will have no activity for more than seconds Cross your fingers so that network middleware libraries decide to send the AcceptEncoding header or force it by passing the requestcompress true option to nodefetch Wait seconds Issue http and https versions of www subdomains point to random servers Info I just clicked on an old link that was pointing to wwwpuchdbcom and I saw a welcome to ngix white screen exactly the same as reported on Seems that the subdomain is again directed to a wrong instance The https version is even weirder it first shows the usual screen that the certificate is not trusted and if you decide to open the page anyway well this is what you get I will call this phishing if the content was even remotely related to pouchdb but seems like just some random internet page Hi There I have an issue with having multiple nested indexes I have a schema like this js id string nestedField property string property string Here is my db config and setup js const db await new PouchDBtest adapter leveldb await dbcreateIndex index fields nestedFieldproperty nestedFieldproperty Here is my issue js const doc await dbfind selector nestedFieldproperty consolelogdoc Output has a warning Note It works without warning when i set the selector to nestedFieldproperty Thanks The devDependency querystring was updated from to This version is not covered by your current version range If you don t accept this pull request your project will work just like it did before However you might be missing out on a bunch of new features fixes andor performance improvements from the dependency update Publisher sindresorhus License MIT details summaryRelease Notes for v summary ul liFix issue with using Rollup a classcommitlink datahovercardtypecommit datahovercardurl href ul pa classcommitlink href details details summaryCommitssummary pThe new version differs by commitsp ul lia href code codeli lia href codeFix issue with using Rollupcodeli lia href code codeli lia href codeMeta tweakscodeli lia href codeAdd codefundingcode field to packagejsoncodeli lia href codeAdd codestringifyUrlcode method codeli lia href codeRemove broken link codeli lia href codeAdd sponsor notecodeli ul pSee the a href diffap details details summaryFAQ and helpsummary There is a collection of frequently asked questions If those don t help you can always ask the humans behind Greenkeeper details Your Greenkeeper bot palmtree Issue Initially PouchDB would throw the following error screenshot InvalidStateError Failed to execute index on IDBObjectStore The transaction has finished When I started digging I found this exception happens in afterPutDoc error handler so I started to wonder what is the original error and added custom reporting code which revealed that the original error is the following message ConstraintError name Unable to add key to index docidrev at least one key does not satisfy the uniqueness requirements Do you have an idea why it might happen Info Environment browser Platform Chrome Adapter IndexedDB Server Cloudant Hello Thank you for opening an issue on PouchDB There is also a Minute read on how to format your issue This template is optional but it may help us fix your issue faster Issue Failed to open indexedDB are you in private browsing mode after enabling Dont remember history not working in firefox Private browsing Info Environment browser Platform FF Adapter IndexedDB Server PouchDB Server Reproduce Issues that others can reproduce are far easier to fix we have a website that may help you provide a live example of the bug pouchissue Is there any plan to support CouchDB when it s released AFAIK the release is around the corner The devDependency uglifyjs was updated from to This version is not covered by your current version range If you don t accept this pull request your project will work just like it did before However you might be missing out on a bunch of new features fixes andor performance improvements from the dependency update Publisher alexlamsl License BSD Clause details summaryRelease Notes for v summary p p details details summaryCommitssummary pThe new version differs by commitsp ul lia href codev codeli lia href codeenhance codecollapsevarscode codeli lia href codeintroduce codeoutputoptscode CLI option codeli lia href codefix corner case in codeunsafemathcode codeli lia href codefix corner case in codeunusedcode codeli lia href codefix corner case in codecollapsevarscode codeli lia href codev codeli lia href codeimprove codeufuzzcode false positive detection codeli lia href codefix corner case in codeconditionalscode codeli lia href codefix corner case in codereducevarscode codeli lia href codefix corner case in codeunusedcode codeli lia href codeenhance codeunusedcode codeli lia href codeenhance codebooleanscode codeli lia href codeenhance codeevaluatecode codeli lia href codefix corner case in codebooleanscode codeli ul pThere are commits in totalp pSee the a href diffap details details summaryFAQ and helpsummary There is a collection of frequently asked questions If those don t help you can always ask the humans behind Greenkeeper details Your Greenkeeper bot palmtree Issue Code let localDB new PouchDBlocalDbName adapter idb let remoteDB new PouchDB adapter http localDBsetMaxListeners remoteDBsetMaxListeners const mySync PouchDBsynclocalDB remoteDB live true retry trueonchange function change Result MaxListenersExceededWarning Possible EventEmitter memory leak detected pouchlocalDbName listeners added Use emittersetMaxListeners to increase limit Info Environment React PouchDB Platform Chrome Build officiel bitsFF bit on Windows Adapter IndexedDB Server CouchDB Workaround The official doc tells to use dbsetMaxListeners or or or however many you need that doesnt work As a workaround one can use the following code import EventEmitter from events EventEmitterdefaultMaxListeners Failed to start the rxDb on reactJstypescript project getting the error global is not defined Environment ReactJs Typescript RXDB Electron Uncaught ReferenceError global is not defined at Objectnodemodulesimmediatelibbrowserjs browserjs at webpackrequire bootstrap at fn bootstrap at Modulenodemodulespouchdbutilslibindexbrowseresjs indexbrowseresjs at webpackrequire bootstrap at fn bootstrap at Modulenodemodulespouchdbselectorcorelibindexesjs indexesjs at webpackrequire bootstrap at fn bootstrap at Modulenodemodulesrxdbdistesquerychangedetectorjs querychangedetectorjs import as RxDB from rxdb import RxDatabase RxJsonSchema from rxdb const contactsSchema RxJsonSchemaany title human schema description describes a human being version keyCompression true type object properties passportId type string primary true firstName type string lastName type string age type integer required firstName lastName export class DatabaseManager private db RxDatabase undefined constructor consolelogDatabaseManager loaded private async createDB thisdb await RxDBcreate name messages multiInstance false adapter websql private async createCollection if thisdb await thisdbcollection name contacts schema contactsSchema private async tryDump if thisdb let d await thisdbdump consolelogdump JSONstringifyd private async tryInsert if thisdb thisdb contacts insert firstname Jo lastNama blue mobile async testRxDB consolelog testRxDB await thiscreateDB await thiscreateCollection await thistryInsert await thistryDump 