The default configuration of NCP with modsecurity seems to have an issue when handling vcard files Setup current docker instance of NCP with modsecurity enabled latest updates Steps to reproduce create new contact save contact successful change contact data request error on saving the contact data is lost after site refresh Steps are successfull with disabled modsecurity Solution create exception for addressbooksync The corresponding logfileline Sat Jan error pid tid client xxxxxx client xxxxxxx ModSecurity XML parser error XML Failed parsing document hostname xxxxxxxx uri remotephpdavaddressbooksusersxxxxxxxxxxxxxxxxxx DA FC xxxxxxxxxxvcf uniqueid XiNCyZLwCYQ v CWduyWOQAAShg Hey Guys thanks for building this awesome projekt Will Nextcloud be available soon Regards knex Hi I have noticed that you already use postfix for sending notification emails What about adding fullfledged mail server I am a longtime user of Nextcloud and Owncloud before that Couple of months ago I have successfully launched an email server postfixdovecotrspamd FULLY INTEGRATED with Nextcloud Your email yournameyourdomaincom serves as Nextcloud account New Nextcloud users automatically get their mailbox Same login and password for Nextcloud and for email IMAP and SMTP You can use webmail in Nextcloud for accessing your mailbox without additional login I have followed this excellent tutorial The tutorial is not mine I am just drawing your attention to it in case you would like to include email server in NextCloudPi I am on Debian Buster I have closely followed the tutorial and it works I would only suggest to use Rainloop app instead of default Email app Rainloop has much better UI and does not require additional app Auto Mail Accounts As a theme for Rainloop use Description If the limit for ncpbackup is set to higher values eg in my case the generation of meta information for all packages to be shown in the web interface can take very long one tar I pigz tf process takes about s on my RasPi for dataless backups which results in s min delay before the web interface is usable This is especially annoying since no ncpapps can be run from the web interface during that time Instead it would be nice to cache that information eg in a separate file per archive so it must only be generated for new backups Whenever a backup is deleted the corresponding meta information should also be deleted Thanks for reporting issues back to NextCloudPi Here you can file bugs and feature requests Do NOT ask questions this is not a support forum If there is an important security issue that has gone unnoticed please send a private email to nacho at ownyourbitscom DO NOT ASK QUESTIONS USE THE FORUMS NCP and its extras are explained in the wiki also make sure to read the articles in ownyourbits explaining NextCloudPi extras before asking For asking questions please use the forums PROBLEMS Please look at the FAQ before posting a new issue Also make sure it has not been asked before Keep in mind that many problems come from faulty power sources and corrupted SD cards so make sure this is not the case for you before reporting If you are running into problems make sure to include the output of sudo ncpreport When I try to scan a path using the admin interface that contains a space eg usernamefilesdirname with space I get the following error invalid parameters None of my below attempts worked usernamefilesdirname with space usernamefilesdirname with space usernamefilesdirname with space usernamefilesdirname with space Similar to issue System information NextCloudPi NextCloud Paste the output of sudo ncpreport Implements At this point this is a quickly thrown together untested implementation min effort P Ill iron it out in the coming days if Nacho likes the approach Description Actually it is possible to activate the sambe sharing function for all users which are created within the nextcloud instance I would like to have only sambe release for selected userusers Example Nextcloud User Nextcloud User Nextcloud User After selecting the navigation link I would like to have an selection field for which userusers I would like to aktive the samba sharing function Thanks for reporting issues back to NextCloudPi Here you can file bugs and feature requests Do NOT ask questions this is not a support forum If there is an important security issue that has gone unnoticed please send a private email to nacho at ownyourbitscom DO NOT ASK QUESTIONS USE THE FORUMS NCP and its extras are explained in the wiki also make sure to read the articles in ownyourbits explaining NextCloudPi extras before asking For asking questions please use the forums PROBLEMS Please look at the FAQ before posting a new issue Also make sure it has not been asked before Keep in mind that many problems come from faulty power sources and corrupted SD cards so make sure this is not the case for you before reporting If you are running into problems make sure to include the output of sudo ncpreport Hi when executed on rock out of processes stop generating previews details summaryTerminal outputsummary T Scanning folder usernamefilesMediaPhotos T Scanning folder usernamefilesMediaPhotos France T T In Folderphp line T T OCP Files NotPermittedException T Could not create folder T T T Exception trace T at varwwwnextcloudlibprivateFilesNodeFolde rphp T OC Files Node FoldernewFolder at varwwwnextclo udlibprivateFilesAppDataAppDataphp T OC Files AppData AppDatanewFolder at varwwwnex tcloudlibprivatePreviewGeneratorphp T OC Preview GeneratorgetPreviewFolder at varwww nextcloudlibprivatePreviewGeneratorphp T OC Preview GeneratorgetPreview at varwwwnextcl oudlibprivatePreviewManagerphp T OC PreviewManagergetPreview at varwwwnextcloud appspreviewgeneratorlibCommandGeneratephp T OCA PreviewGenerator Command GenerateparseFile at varwwwnextcloudappspreviewgeneratorlibCommandGeneratephp T OCA PreviewGenerator Command GenerateparseFolder at varwwwnextcloudappspreviewgeneratorlibCommandGeneratephp T OCA PreviewGenerator Command GenerateparseFolder at varwwwnextcloudappspreviewgeneratorlibCommandGeneratephp T OCA PreviewGenerator Command GenerategeneratePathPr eviews at varwwwnextcloudappspreviewgeneratorlibCommandGeneratephp T OCA PreviewGenerator Command Generateexecute at varwwwnextcloud rdpartysymfonyconsoleCommandCommandphp T Symfony Component Console Command Commandrun at varwwwnextcloud rdpartysymfonyconsoleApplicationphp T Symfony Component Console ApplicationdoRunCommand at varwwwnextcloud rdpartysymfonyconsoleApplicationphp T Symfony Component Console ApplicationdoRun at va rwwwnextcloud rdpartysymfonyconsoleApplicationphp T Symfony Component Console Applicationrun at var wwwnextcloudlibprivateConsoleApplicationphp T OC Console Applicationrun at varwwwnextcloudc onsolephp T requireonce at varwwwnextcloudocc T T previewgenerateall ppath PATH userid T T T In Folderphp line T T OCP Files NotPermittedException T Could not create folder T T T Exception trace T at varwwwnextcloudlibprivateFilesNodeFolde rphp T OC Files Node FoldernewFolder at varwwwnextclo udlibprivateFilesAppDataAppDataphp T OC Files AppData AppDatanewFolder at varwwwnex tcloudlibprivatePreviewGeneratorphp T OC Preview GeneratorgetPreviewFolder at varwww nextcloudlibprivatePreviewGeneratorphp T OC Preview GeneratorgetPreview at varwwwnextcl oudlibprivatePreviewManagerphp T OC PreviewManagergetPreview at varwwwnextcloud appspreviewgeneratorlibCommandGeneratephp T OCA PreviewGenerator Command GenerateparseFile at varwwwnextcloudappspreviewgeneratorlibCommandGeneratephp T OCA PreviewGenerator Command GenerateparseFolder at varwwwnextcloudappspreviewgeneratorlibCommandGeneratephp T OCA PreviewGenerator Command GenerateparseFolder at varwwwnextcloudappspreviewgeneratorlibCommandGeneratephp T OCA PreviewGenerator Command GenerategeneratePathPr eviews at varwwwnextcloudappspreviewgeneratorlibCommandGeneratephp T OCA PreviewGenerator Command Generateexecute at varwwwnextcloud rdpartysymfonyconsoleCommandCommandphp T Symfony Component Console Command Commandrun at varwwwnextcloud rdpartysymfonyconsoleApplicationphp T Symfony Component Console ApplicationdoRunCommand at varwwwnextcloud rdpartysymfonyconsoleApplicationphp T Symfony Component Console ApplicationdoRun at va rwwwnextcloud rdpartysymfonyconsoleApplicationphp T Symfony Component Console Applicationrun at var wwwnextcloudlibprivateConsoleApplicationphp T OC Console Applicationrun at varwwwnextcloudc onsolephp T requireonce at varwwwnextcloudocc T T previewgenerateall ppath PATH userid details the last th process continues to load cpu and apparently yield new previews visible in htop as binbash usrlocalbinncc previewgenerateall n v p usernamefilesMediaPhotos btw in ncpreport one should probably consider marking trusteddomains also as sensitive value System information details summaryNextCloudPi diagnosticssummary NextCloudPi version v distribution Debian Buster with Armbian Linux l automount yes USB devices sda sdb datadir mediamyCloudDrivencdata data in SD no data filesystem btrfs data disk usage G G rootfs usage G G swapfile varswap dbdir mediamyCloudDrivencdatabase Nextcloud check ok Nextcloud version HTTPD service up PHP service up MariaDB service up Redis service up Postfix service up internet check ok port check open port check open IP REMOVED SENSITIVE VALUE gateway REMOVED SENSITIVE VALUE interface eth certificates REMOVED SENSITIVE VALUE NAT loopback no uptime days details details summaryNextcloud configurationsummary system passwordsalt REMOVED SENSITIVE VALUE secret REMOVED SENSITIVE VALUE datadirectory REMOVED SENSITIVE VALUE dbtype mysql version overwritecliurl https cloudserkezxyz dbname REMOVED SENSITIVE VALUE dbhost REMOVED SENSITIVE VALUE dbport dbtableprefix oc mysqlutf mb true dbuser REMOVED SENSITIVE VALUE dbpassword REMOVED SENSITIVE VALUE installed true instanceid REMOVED SENSITIVE VALUE memcachelocal OC Memcache Redis memcachelocking OC Memcache Redis redis host REMOVED SENSITIVE VALUE port timeout password REMOVED SENSITIVE VALUE tempdirectory media myCloudDrive ncdata tmp mailsmtpmode smtp mailsmtpauthtype LOGIN mailfromaddress REMOVED SENSITIVE VALUE maildomain REMOVED SENSITIVE VALUE overwriteprotocol https maintenance false loglevel logtype file logfile media myCloudDrive ncdata nextcloudlog jpegquality theme datafingerprint c b dc ed a b f cdae ece bc htaccessRewriteBase previewmaxy previewmaxx mailsendmailmode smtp mailsmtpsecure ssl mailsmtpauth mailsmtphost REMOVED SENSITIVE VALUE mailsmtpport mailsmtpname REMOVED SENSITIVE VALUE mailsmtppassword REMOVED SENSITIVE VALUE details details summaryHTTPd logssummary details details summaryDatabase logssummary details details summaryNextcloud logssummary reqIdXgfcSzejx qgDcyTbEwAAAA level time T remoteAddr userappcoremethodGETurl ocs v php apps spreed api v signaling settingsmessageLogin failed svitozar Remote IP userAgentMozilla Android NextcloudTalk v version reqIdXgfcUDejx qgDcyTbFAAAAA level time T remoteAddr userappcoremethodGETurl ocs v php cloud capabilitiesmessageLogin failed svitozar Remote IP userAgentMozilla Android NextcloudTalk v version reqIdXgiQFCqN hPs kDeAyN wAAAAUlevel time T remoteAddr userappcoremethodGETurl ocs v php apps spreed api v signaling settingsmessageLogin failed svitozar Remote IP userAgentMozilla Android NextcloudTalk v version reqIdXgiQFCqN hPs kDeAyN gAAAAMlevel time T remoteAddr userappcoremethodGETurl ocs v php cloud capabilitiesmessageLogin failed svitozar Remote IP userAgentMozilla Android NextcloudTalk v version reqIdXgiQGCqN hPs kDeAyN AAAAAclevel time T remoteAddr userappcoremethodGETurl ocs v php cloud capabilitiesmessageLogin failed svitozar Remote IP userAgentMozilla Android NextcloudTalk v version reqIdhn aE LVIbsx y j ZMqlevel time T remoteAddruserappPHPmethodurlmessageunlink media myCloudDrive ncdata appdataocmkxn qrngc preview jpg No such file or directory at var www nextcloud lib private Files Storage Localphp userAgentversion reqId AJoMTQq pOKz Y o level time T remoteAddruserappmusicmethodurlmessageFileHooksupdated triggered for a nonexisting fileuserAgentversion reqIdjTLouJSOleSGWCiwFz Qlevel time T remoteAddruserappmusicmethodurlmessageFileHooksupdated triggered for a nonexisting fileuserAgentversion reqIdhn aE LVIbsx y j ZMqlevel time T remoteAddruserappPHPmethodurlmessageunlink media myCloudDrive ncdata appdataocmkxn qrngc preview jpg No such file or directory at var www nextcloud lib private Files Storage Localphp userAgentversion reqId AJoMTQq pOKz Y o level time T remoteAddruserappmusicmethodurlmessageFileHooksupdated triggered for a nonexisting fileuserAgentversion reqId AJoMTQq pOKz Y o level time T remoteAddruserappmusicmethodurlmessageFileHooksupdated triggered for a nonexisting fileuserAgentversion reqId AJoMTQq pOKz Y o level time T remoteAddruserappmusicmethodurlmessageFileHooksupdated triggered for a nonexisting fileuserAgentversion reqId AJoMTQq pOKz Y o level time T remoteAddruserappmusicmethodurlmessageFileHooksupdated triggered for a nonexisting fileuserAgentversion reqId uHalDzuMptTpOBxU ySlevel time T remoteAddruserappPHPmethodurlmessagefilesize stat failed for media myCloudDrive ncdata appdataocmkxn qrngc preview jpg at var www nextcloud lib private Files Storage Localphp userAgentversion reqId AJoMTQq pOKz Y o level time T remoteAddruserappmusicmethodurlmessageFileHooksupdated triggered for a nonexisting fileuserAgentversion reqIdjTLouJSOleSGWCiwFz Qlevel time T remoteAddruserappmusicmethodurlmessageFileHooksupdated triggered for a nonexisting fileuserAgentversion reqIdjTLouJSOleSGWCiwFz Qlevel time T remoteAddruserappPHPmethodurlmessagestat stat failed for media myCloudDrive ncdata appdataocmkxn qrngc preview cropjpg at var www nextcloud lib private Files Storage Localphp userAgentversion reqIdjTLouJSOleSGWCiwFz Qlevel time T remoteAddruserappmusicmethodurlmessageFileHooksupdated triggered for a nonexisting fileuserAgentversion reqIdhn aE LVIbsx y j ZMqlevel time T remoteAddruserappmusicmethodurlmessageFileHooksupdated triggered for a nonexisting fileuserAgentversion reqIdjTLouJSOleSGWCiwFz Qlevel time T remoteAddruserappmusicmethodurlmessageFileHooksupdated triggered for a nonexisting fileuserAgentversion details At the moment the backup possibility of BTRFS snapshots is limited to either USB drive OR remote machine To minimize the risk of data loss Id like to backup it to a USB drive AND a remote machine Enhancement for this would be greatly appreciated Felix Thanks for the recent support to setup a second domain through ncpconfig By default if one runs the letsencrypt ncpscript a is preselected for both domains I just changed the first to my desired domain and left the second domain as I ran into the following error Error message details summaryCannot issue for Domain name contains an invalid charactersummary Running letsencrypt Saving debug log to varlogletsencryptletsencryptlog Plugins selected Authenticator webroot Installer None Obtaining a new certificate An unexpected error occurred Error creating new order Cannot issue for Domain name contains an invalid character Please see the logfiles in varlogletsencrypt for more details Done Press any key details System information details summaryNextCloudPi diagnosticssummary NextCloudPi version v NextCloudPi image NextCloudPidocker distribution Debian GNULinux n l automount no USB devices none datadir datanextclouddata data in SD yes data filesystem btrfs data disk usage G T rootfs usage G G swapfile none dbdir datadatabase Nextcloud check ok Nextcloud version HTTPD service up PHP service up MariaDB service up Redis service up Postfix service up internet check ok port check open port check open IP REMOVED SENSITIVE VALUE gateway REMOVED SENSITIVE VALUE interface eth certificates REMOVED SENSITIVE VALUE NAT loopback no uptime days details 