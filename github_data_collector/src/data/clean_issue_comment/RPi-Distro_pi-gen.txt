This commit add the ability to specify an SSH public key as well as the option to disable password authentication and only allow public key authentication for SSH Signedoffby Daniel F Dickinson cshoredthecshorecom For headless servers with serial console only we want to change the order of consoles on the kernel commandline In addition we add the ability to configure the kernel commandline for the arbitrary console configurations in case the default nor headless order is appropriate Signedoffby Daniel F Dickinson cshoredthecshorecom Defaults is enGBUTF UTF which is the backwardscompatible behaviour Signedoffby Daniel F Dickinson cshoredthecshorecom A number of minor tweaks to enable linting and fix linting complaints Many hosts including the docker host set HOSTNAME in the environment which means that unless the HOSTNAME is explicitly set in a config that the resulting image hostname will be the build hosts hostname We fix that by unsetting HOSTNAME prior to reading the configs and applying defaults Signedoffby Daniel F Dickinson cshoredthecshorecom There are use cases where pigen can be useful that need different image generation that the current defaults Rather than force such users to require carrying modified versions of the default exports allow users to specify alternate exports eg instead of exportimage and exportnoobs or in addition to these We do this using a mechanism similar to STAGELIST except that the lists of images are perstage and default to paying attention to the presence of EXPORTIMAGE and EXPORTNOOBS as is currently the case Demo the new custom export capability with an new export type exportswappartimage that uses a swap partition Note that it really only makes sense if one tweaks stage to not include dphysswapfile Signedoffby Daniel F Dickinson cshoredthecshorecom This fixes two small grammar errors and the confusing description of stage The loop kernelmodule is needed otherwise the script exportimageprerunsh fails in this line with the message losetup pigenwork Raspbianexportimage Raspbianliteimg failed to set up loop device No such file or directory See also So this is a fix for I suggest you pull my previous pullrequest first in order to reduce the commits in this pull request from to This pr is based on the previous one As is written in the README binfmtsupport needs to be installed for Docker Ref This pullrequest makes that explicit and checks that it holds true For each stage check if the path is absolute or starts with a If so add a it to the docker instance as a volume Also modify the STAGELIST variable with the paths that will be seen from within the docker container Fixes 