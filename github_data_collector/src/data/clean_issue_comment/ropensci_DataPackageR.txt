 Description Update testignoreR to handle changes in usethis Bump patch version to Update codemetajson Related Issue Fixes I just merged a PR from jimhester in usethis where weve finally managed to switch user messaging to message instead of cat because we now have an attractive way to prevent such messages from being displayed in red Jim kindly ran revdeps and it shows you may need to tweak your tests Jim even suggests a patch here A usethis release is probably a weeks away Hi We have started build documentation for all ropensci packages see Your site currently fails to build due to a minor issue with the formatting of the NEWSmd file see Could you try to look into this Let me know if you need any help Update packagebuild documentation and source R code before compiling Rmds Commit ea It may happen that an Rmd document runs successfully when run manually using rmarkdownrender but that same document may throw an error when run internally using packagebuild A note under the Details section of the packagebuild manual has been added to advise users to run optionserror function sink recover when seeking to debug such an error This code enables examination of active function calls at the time of the error with output printed to the console rather than knitrs default sink See section RMarkdown at for more details Commit e ebd Previously the functions in R folder were not sourced before compiling dataraw Rmd files using packagebuild This meant that if any dataraw Rmd files depended on these functions they would either throw an error or the package would have to be installed before running packagebuild which is inconvenient The functions in the R folder are now sourced before compiling dataraw Rmd files using packagebuild Tests were written to ensure that this functionality is both required and that when it is used it runs successfully These tests and all remaining tests ran without error on my local computer IF THIS INVOLVES AUTHENTICATION DO NOT SHARE YOUR USERNAMEPASSWORD OR API KEYSTOKENS IN THIS ISSUE MOST LIKELY THE MAINTAINER WILL HAVE THEIR OWN EQUIVALENT KEY If this issue relates to usage of the package whether a question bug or similar along with your query please paste your devtoolssessioninfo or sessionInfo into the code block below AND include a reproducible example consider using a reprex If not delete all this and proceed details summarystrongSession Infostrongsummary r R version Platform x pclinuxgnu bit Running under Ubuntu LTS Matrix products default BLAS homedloeweminiconda envspromisedbenvlibRliblibRblasso LAPACK homedloeweminiconda envspromisedbenvlibRliblibRlapackso locale LCCTYPEenUSUTF LCNUMERICC LCTIMEenUSUTF LCCOLLATEenUSUTF LCMONETARYenUSUTF LCMESSAGESenUSUTF LCPAPERenUSUTF LCNAMEC LCADDRESSC LCTELEPHONEC LCMEASUREMENTenUSUTF LCIDENTIFICATIONC attached base packages stats graphics grDevices utils datasets methods base other attached packages promise pkgdown bindrcpp furrr future dplyr stringr datatable purrr RevoUtils RevoUtilsMath loaded via a namespace and not attached clisymbols tidyselect rematch listenv testthat htmltools usethis yaml utf pkgbuild rlang pillar glue withr lambdar bindr commonmark futilelogger devtools codetools memoise evaluate knitr DataPackageR callr curl parallel fansi markdown Rcpp backports formatR desc pkgload fs digest stringi processx rprojroot cli tools magrittr tibble futileoptions crayon pkgconfig MASS xml httr assertthat rmarkdown roxygen rstudioapi R globals compiler details As the title says currently when building package even though vignettes FALSE the vignettes folder is still being populated with erroneous yaml header on top of that Causing eg pkgdownbuildsite to give error IF THIS INVOLVES AUTHENTICATION DO NOT SHARE YOUR USERNAMEPASSWORD OR API KEYSTOKENS IN THIS ISSUE MOST LIKELY THE MAINTAINER WILL HAVE THEIR OWN EQUIVALENT KEY If this issue relates to usage of the package whether a question bug or similar along with your query please paste your devtoolssessioninfo or sessionInfo into the code block below AND include a reproducible example consider using a reprex If not delete all this and proceed Expected behavior When rebuilding a package and a data set changes the NEWS file is updated to reflect only the changing data set Observed behavior Sometimes the news file indicates that multiple data sets have changed even when only one has changed despite no changes in the DATADIGEST string details summarystrongSession Infostrongsummary r details When a data object is renamed rebuilding the package gives an error when checking the datadigest To reproduce change the name of a data object in an Rmd and in the yml build the package To fix Correct the logic comparing data digests for an object that exists in the data digest file but not elsewhere Object needs to be removed correctly from the data digest file Here is my situation Built a data package using datapackageskeleton and packagebuild Manually filled out roxygen docs in datarawdocumentationR and ran document Now Ive made some changes to my base Rmd script and want to update the object in data using packagebuild If I do that all of my manually filled roxygen docs have been reset to the template Is there a way to store these fields in the Rmd or maybe packagebuild can be given an option not to roxygenize Consider what can be done to include a Dockerfile that would encapsulate the data the package a base docker image with R and necessary packages and build the data package within that image The containerit package might do what we want