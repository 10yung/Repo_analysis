I tried to update our composerjson to use doctrinemongodbodm instead of currently but tests are failing There were errors Vich UploaderBundle Tests Command MappingDebugClassCommandTesttestNotUploadableClass ParseError syntax error unexpected expecting function TFUNCTION or const TCONST Vich UploaderBundle Tests Command MappingDebugClassCommandTesttestUploadableClass ParseError syntax error unexpected expecting function TFUNCTION or const TCONST Vich UploaderBundle Tests Command MappingDebugCommandTesttestExistantMapping ParseError syntax error unexpected expecting function TFUNCTION or const TCONST Vich UploaderBundle Tests Command MappingListClassesCommandTesttestListClasses ParseError syntax error unexpected expecting function TFUNCTION or const TCONST Vich UploaderBundle Tests Functional UploadTesttestFileIsUploadedWithFileType ParseError syntax error unexpected expecting function TFUNCTION or const TCONST Vich UploaderBundle Tests Functional UploadTesttestFileIsUploadedWithImageType ParseError syntax error unexpected expecting function TFUNCTION or const TCONST Vich UploaderBundle Tests VichUploaderBundleTesttestSimpleKernel ParseError syntax error unexpected expecting function TFUNCTION or const TCONST Vich UploaderBundle Tests VichUploaderBundleTesttestFilesystemKernel ParseError syntax error unexpected expecting function TFUNCTION or const TCONST Vich UploaderBundle Tests VichUploaderBundleTesttestFlysystemOfficialKernel ParseError syntax error unexpected expecting function TFUNCTION or const TCONST Vich UploaderBundle Tests VichUploaderBundleTesttestFlysystemOneUpKernel ParseError syntax error unexpected expecting function TFUNCTION or const TCONST There was failure Vich UploaderBundle Tests Command MappingDebugCommandTesttestNotExistantMapping Failed asserting that exception of type ParseError matches expected exception Vich UploaderBundle Exception MappingNotFoundException Message was syntax error unexpected expecting function TFUNCTION or const TCONST at VichUploaderBundlevendorocramiusproxymanagersrcProxyManagerConfigurationphp Fix This allows back manual wiring of a Flysystem service in case no bundle is used In one of my projects that uses this fantastic package I have configured the vichuploaderstorageflysystem service manually and am passing into it a handwired Flysystem service so I dont have either of the recommended Flysystem bundles installed vich After successfully updating to I am now encountering the new MissingPackageException at run time Are the bundles absolutely necessary moving forward due to structural changes to Vich Uploader Fill in the relevant information below to help triage your issue Symfony PHP Support Question Hi How to import multiple files to the same entity I have Candidate entity which can import one or more it can be files and i need to display all of them at the same time They are questions about how to import files but on my case i do know how many files the candidate will import Your documentation explain how to import one file but i do know how to implement it with multiple file for the same entity Describe the issue you are facing here Fill in the relevant information below to help triage your issue Q A Version Lastest Before asking question here please try asking on StackOverflow first Keep in mind that GitHub is primarily an issue tracker Support Question I am trying to generate a link to my file uploaded on S with this bundle on a private bucket Looking at the doc I am using vichuploaderassetuserdeck documentFile this generates a link like this this link doesnt work It should be Or alternatively how do I change this Am i doing something wrong I am using the basic configuration from this repodoc Thank you I am using Symfony I have successfully uploaded the image files and stored the file names into the database using the bundle but now I have trouble getting the url to display them I want to get only the uri to the file not full path like this wwwabccomimg instead of wwwabccomimg jpg my setting in yaml file vichuploader dbdriver orm mappings image uriprefix img uploaddestination kernelprojectdirpublicimages controller public function indexUploaderHelper helper image new Image Image entity path helperassetimage imageFile vardumppath I followed the instruction from the doc passing in the image entity and imageFile to the helper function but vardump gives me a NULL value no path Q A Version Support Question Im trying to set up VichUploaderBundle to attach a fixed number of images to a Doctrinemanaged entity in Symfony Each image is an entity and I use in my controller a form with a collection class PosteType extends AbstractType public function buildFormFormBuilderInterface builder array options builder addimages CollectionTypeclass entrytype PosteImageTypeclass entryoptions label false attr class item itemfile allowadd false allowdelete false byreference false prototype true errorbubbling false required true label Photos tracteur attr class collection collectionfile collectionimmutable mapped true public function configureOptionsOptionsResolver resolver resolversetDefaults dataclass Posteclass class PosteImageType extends AbstractType public function buildFormFormBuilderInterface builder array options builder addfile FileTypeclass label false required true multiple false public function configureOptionsOptionsResolver resolver resolversetDefaults dataclass PosteImageclass Controller public function newRequest request Response poste new Poste fori i i image new PosteImage posteaddImageimage form thiscreateFormPosteTypeclass poste formhandleRequestrequest if formisSubmitted formisValid entityManager thisgetDoctrinegetManager entityManagerpersistposte entityManagerflush return thisredirectToRoutenew But when I validate the form I only have images that are downloaded if I dump data of images field in my controller I have one of images that remains an UploadFile ArrayCollection elements array PosteImage id null file File nom db bc f b jpg dateCreation DateTime poste Poste PosteImage id null file File nom db bc df jpg dateCreation DateTime poste Poste PosteImage id null file UploadedFile nom null dateCreation DateTime poste Poste If I download images everything works if I download or more images only n are downloaded thank you for the help i create yaml property bannerImagedesktopImageFile type image label Desktop template adminfieldvichuploaderimagehtmltwig when bannerImage is null i have exception BC Break Report Fill in the relevant information below to help triage your issue Q A BC Break yes Version Summary Provide a summary describing the problem you are experiencing Considering this entity mapping Assert NotBlank Vich UploadableFieldmappingassets fileNamePropertyfilename private file Previous behavior What was the previous working behavior in version profilePhotogetFilegetPathname will return a relative path like photos jpg Current behavior What is the current broken behavior in version profilePhotogetFilegetPathname will return an absolute path like varwwwhtmlexamplecompublichtmlphotos jpg How to reproduce dump the contents of a file note the path variables update vich uploader bundle dump the contents of a file note the path variables Provide steps to reproduce the BC break If possible also add a code snippet with relevant configuration mappings etc Adding a failing Unit or Functional Test would help us a lot you can submit it in a Pull Request separately referencing this bug report Hi Im trying since several month to upload a file on a S AWS with a Symfony API that Ive dvelopp Ive tried to fix it by myself with many tutorialsresourcesdocs and Im now facing a wall If someone can tell what Im missing out Ill be grateful Heres my conf composerjson JSON require php awsawssdkphp doctrinedoctrinebundle doctrineorm friendsofsymfonyrestbundle incenteevcomposerparameterhandler knplabsknpgaufrettebundle leagueflysystemawss v nelmioapidocbundle nelmiocorsbundle oneupflysystembundle sensiodistributionbundle sensioframeworkextrabundle symfonyform symfonymonologbundle symfonypolyfillapcu symfonyserializer symfonyswiftmailerbundle symfonysymfony twigtwig vichuploaderbundle whiteoctoberpagerfantabundle vich gaufrette yaml knpgaufrette streamwrapper adapters documentadapter awss serviceid ctfilestores bucketname AWSBUCKETNAME detectcontenttype true options create true directory uploadslandingpage filesystems documentfs adapter documentadapter vichuploader dbdriver orm storage gaufrette mappings document injectonload true uriprefix AWSBASEURLAWSBUCKETNAMEdocument uploaddestination documentfs namer vichuploadernameruniqid deleteonupdate true should the file be deleted when a new file is uploaded deleteonremove true should the file be deleted when the entity is removed Serviceyml yaml ctfilestores class Aws S S Client factory Aws S S Client factory arguments version region AWSS REGION credentials key AWSKEY secret AWSSECRETKEY My Entity php use Symfony Component HttpFoundation File UploadedFile use Vich UploaderBundle Mapping Annotation as Vich LandingPage ORM Tablenamelandingpage ORM EntityrepositoryClassAppBundle Repository LandingPageRepository Vich Uploadable class LandingPage ORM Columnnameimage typestring length nullabletrue var string private image Vich UploadableFieldmappingdocument fileNamePropertyimage var File private imageFile ORM Columnnameupdatedat typedatetime nullabletrue private updatedAt param string image return LandingPage public function setImageimage thisimage image return this return stringnull public function getImage return thisimage If manually uploading a file ie not using Symfony Form ensure an instance of UploadedFile is injected into this setter to trigger the update If this bundles configuration parameter injectonload is set to true this setter must be able to accept an instance of File as the bundle will inject one here during Doctrine hydration param File Symfony Component HttpFoundation File UploadedFile image return LandingPage public function setImageFileUploadedFile image null thisimageFile image if image thisupdatedAt new DateTime return this Returns the image to be uploaded return Filenull public function getImageFile return thisimageFile My Form php php namespace AppBundle Form use Symfony Component Form AbstractType use Symfony Component Form FormBuilderInterface use Symfony Component OptionsResolver OptionsResolver use Vich UploaderBundle Form Type VichImageType class LandingPageType extends AbstractType inheritdoc public function buildFormFormBuilderInterface builder array options builderaddimageFile VichImageTypeclass required true allowdelete true byreference false allowfileupload true The response from the my API JSON code message Validation Failed errors children imageFile errors This value is not valid children file 