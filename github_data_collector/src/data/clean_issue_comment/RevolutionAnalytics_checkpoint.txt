The below error is reported from checkpointlog method and the mranURL is filecdevsnapshot Error in dataframetimestamp Systime snapshotDate snapshotDate arguments imply differing number of rows The log returned from installpackages is as below WARNING Rtools is required to build R packages but is not currently installed Please download and install the appropriate version of Rtools before proceeding Installing package into cdevcheckpoint libx w mingw as lib is unspecified package ggplot successfully unpacked and MD sums checked The content type and size of the content is not getting emitted as it happen through a https url Can you please assist me on this When running checkpoint librarySnapshot project project Rversion Rversion checkpointLocation checkpointLocationverbose TRUE we get this error Error in dataframetimestamp Systime snapshotDate snapshotDate arguments imply differing number of rows It is happening in this bit of code And I believe it happens because the installpackages message is in a format that the interpreter isnt expecting Here is what the message ends up looking like Browse log also installing the dependencies backports ellipsis digest zeallot utf vctrs fansi pillar purrr glue pkgconfig Rcpp rlang tibble tidyselect BH plogr installing the source packages pillar pkgconfig This leads to the byte count being a zero length character string Browse extractbyteslog character which then fails when combined with the other columns Browse dataframetimestamp Systime snapshotDate snapshotDate pkg cextractpkgslog pkg bytes extractbyteslog stringsAsFactors FALSE checknames FALSE Error in dataframetimestamp Systime snapshotDate snapshotDate arguments imply differing number of rows The other columns are as follows Browse snapshotDate Browse cextractpkgslog pkg backports ellipsis digest zeallot utf vctrs fansi pillar purrr glue pkgconfig Rcpp rlang tibble tidyselect BH plogr dplyr It looks like the code tries to detect something similar but maybe just needs an extra check for the case where there are both binary and source packages AFAICS checkpoint doesnt scan Rprofile for requirements details sessionInfo R Under development unstable r Platform x pclinuxgnu bit Running under Ubuntu LTS Matrix products default BLAS homevspinubinRlatestliblibRblasso LAPACK homevspinubinRlatestliblibRlapackso locale LCCTYPEenUSUTF LCNUMERICC LCTIMEenGButf LCCOLLATEenUSUTF LCMONETARYdeDEUTF LCMESSAGESenUSUTF LCPAPERdeDEUTF LCNAMEC LCADDRESSC LCTELEPHONEC LCMEASUREMENTdeDEUTF LCIDENTIFICATIONC attached base packages stats graphics grDevices utils datasets methods base loaded via a namespace and not attached compiler tools checkpoint details Currently checkpoint fails when scanForPackagesFALSE and no local directory exists R checkpointcheckpoint scanForPackages FALSE verbose FALSE Error in checkpointcheckpoint scanForPackages FALSE Local snapshot location does not exist Would it make more sense to initialize the local repo instead of throwing an error Or at least have an option to not throw an error Among other things should be much better than screenscraping to detect install results EDIT pak is the frontend pkgdepends is the backend yet to be submitted to CRAN I am hoping to use scanForPackages to identify all packages used to generate an RMarkdown document within the document When run in the console scanForPackagesuseknitr TRUE is able to detect all the packages loaded in the Rmd file But when knitted it returns without any packages Minimal example saved as testRmd title Test Doc author Connor P Jackson date output pdfdocument keepmd yes r setup librarypander librarycheckpoint r citations scanForPackagesuseknitr TRUE Expected output as generated when run in the console pkgs checkpoint pander error character But when the document is knitted the results are No file at path varfolders qwp m kx z txrfxwywf wr gnTRtmpbZ NGzfile a e f d Rmd pkgs character error testRmd Any ideas why this file does not work within a document being knitted First of all thanks for the checkpoint package I am using this a lot to ensure reproducibility of my analyses Recently I found some for me surprising behaviour of checkpoint which seems to be a bug to me What I thought calling checkpointcheckpoint would do Change the libPaths so new packages are loaded and installed to the checkpoint folder Set optionsrepos to the MRAN snapshot so calling installpackages will install from the MRAN website instead of CRAN But the second point only seems to be TRUE if I run checkpoint with scanForPackages TRUE and there is a new package found which is not already installed Else optionrepos is not changed so installpackages will install the latest package from CRAN into the checkpoint folder I think this is very confusing and probably has negative effects on reproducibility I see this code inside the checkpoint function iflengthpackagestoinstall set repos setMranMirrorsnapshotUrl snapshoturl So repos is only changed when there are new packages to install Wouldnt it be better to change this independently even if there are no new packages to install Because users will still install new packages with installpackages and if these packages are installed from cranrstudiocom the whole point of reproducibility with checkpoint is contradicted Here is example code to reproduce the problem libPaths CProgrammePAMR library optionsrepos repos checkpointcheckpoint checkpointLocation CR scanForPackages FALSE Skipping package scanning checkpoint process complete libPaths CRcheckpoint libx w mingw CRcheckpointR CPROGRA R library repos is not changed to MRAN optionsrepos repos checkpointcheckpoint checkpointLocation CR scanForPackages TRUE Scanning for packages used in this project No file at path C Users QXV AppData Local Temp Rtmpek pGt file e Rmd Discovered packages Installing packages used in this project Installing A A also installing the dependency pbapply checkpoint process complete libraryA Loading required package xtable Loading required package pbapply libPaths CRcheckpoint libx w mingw CRcheckpointR CPROGRA R library Now repos is changed to mran optionsrepos repos Others have filed this class of bug but not been able to reproduce Error in dataframetimestamp Systime snapshotDate snapshotDate arguments imply differing number of rows Calls icdcheckpoint checkpoint checkpointlog dataframe Execution halted The problem is in checkpointlogR where a regex assumes that certain words appear in the messages emitted from installpackages To demonstrate this problem you can use docker docker run rm ti rockertidyverse R I had checkpoint output the actual installpackages messages and see the following for a single line R file in an otherwise empty folder containing librarybench checkpoint Error in checkpoint could not find function checkpoint checkpointcheckpoint Can I create directory checkpoint for internal checkpoint use Continue yn y Scanning for packages used in this project Discovered packages Installing packages used in this project Installing bench bench also installing the dependencies assertthat cli crayon fansi utf glue pillar profmem rlang tibble trying URL downloaded KB trying URL downloaded MB trying URL downloaded KB etc Note that for whatever reason there is no line which matches the regex ptn Content type length d which appears in checkpointlogR When the log data frame is contructed the bytes vector is of length zero so the data frame construction fails It would be a simple fix just to make this a recycled NA if bytes is length I am assuming that the online parameter is intended to work similarly to the way ScanForPackages does in the checkpoint function this may be similar to systemtimesetSnapshotsnapshotDate online F Using CRAN mirror at user system elapsed Not your problem but for reference spinning up a cluster is now taking minutes with this in the code path systemtimemakeClusterdetectCoreslogical FALSE user system elapsed Faster than with online T but still very slow systemtimesetSnapshotsnapshotDate online T Error in setSnapshotsnapshotDate online T Invalid snapshot date Timing stopped at sessionInfo R version Platform x w mingw x bit Running under Windows x build Matrix products default locale LCCOLLATEEnglishUnited States LCCTYPEEnglishUnited States LCMONETARYEnglishUnited States LCNUMERICC LCTIMEEnglishUnited States attached base packages stats graphics grDevices utils datasets methods base other attached packages RevoUtilsMath RevoUtils RevoMods MicrosoftML mrsdeploy RevoScaleR lattice rpart checkpoint loaded via a namespace and not attached codetools CompatibilityAPI foreach grid R jsonlite curl iterators tools compiler rtvs mrupdate Hi users Im checking my bases here before using checkpoint in a professional application Will there ever be an issue with the version of R being incompatible with older checkpointed packages For example if I am using R and use a package version the hasnt been updated since it is possible that I can get an error message saying the version of the package is incompatible with the version of R If I checkpoint back to a version of a package will I still get that error message or has this been accounted for 