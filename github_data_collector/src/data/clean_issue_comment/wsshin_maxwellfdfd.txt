Hello I was wondering if anyone has successfully created matlab stantalone executables using the maxwellfdfd toobox The central problem is including the right filefolders in the compilation instead of using addpath Any idea on how to proceed Thanks How do I get the E field and M field intensity at a particular point Using addpathgenpathmaxwellfdfdroot adds all sub directories of maxwellfdfd to the path even if new ones are added but not updated in the INSTALLmd instructions In multiple examples which should presumably work the function poyntingm gives an error Undefined function or variable array Error in poynting line Sscalar d Scalar darray grid d gtarray osc physQ physQsymbol charpolarization intercept Error in mdm line Sx poyntingAxisx EAxisy EAxisz HAxisy HAxisz Axisy Hi I have been trying to simulate the a photonic crystal waveguide based on your example pc dbasic but with a triangular lattice However the nonuniform grid generator sends me the following error dl e is too small or dl e is too large for gap size e and Error using completelprim d line grid generation failed between subgrids and with target dl dl e is too small or dl e is too large for gap size e I tried to change the resolution parameters with little success Do you have any idea where this could come from I solved this issue by switching to a uniform grid However when I increased the resolution to check the convergence the intensity of the H field keeps decreasing and does not look like it converges I did the same with your exemple with the square lattice but the convergence is good Is there something I am missingI tested the convergence by probing the field going through the waveguide I obtained the following values for the set of divider for a ad I used the code below adar for i lengthadar inspectonly false Create shapes a lattice constant t slab thickness unit unit of length in meter permittivity ra and omegaa pic are taken from p of John D Joannopoulos et al Photonic Crystals Molding the Flow of Light nd edition so that the frequency lies in a band gap r a hole radius wvlen omegaa pic ka pi alambda slabthicknessnm epsdiel ad adari divider for a dd divider for d r pmll mx pmll half integer puts domain boundary between cylinders and makes PML works better my nohxpmll nohy slabyn Box mxnohxa mxnohxa mynohya a t aad aad t slabyp Box mxnohxa mxnohxa a mynohya t aad aad t slabynsh Box mxnohxa a a a t aad aad t slabypsh Box mxnohxa a a a t aad aad t slabynfast Box a mxnohxa a a t aad aad t slabypfast Box a mxnohxa a a t aad aad t rod CircularCylinderAxisz t t r rdd rdd t sh rod CircularCylinderAxisz t a t r rdd rdd t rod CircularCylinderAxisz t sha t r rdd rdd t rod CircularCylinderAxisz t sha t r rdd rdd t bcBCp Boundary condition periodic box mxa mxa mya mya t dimension of the simulation dl aad aad t Rpml e target reflectance of the Pml Solve the system gray r g b srcloc a source location Lpml nohx a nohya degpml E H objarray srcarray J maxwellrun OSCunit wvlen DOM vacuum white epsdielbox dlbc Lpml degpml Rpmltrue OBJ dielectric gray periodizeshaperod a a sqrt a t slabyn dielectric gray periodizeshaperod a a sqrt a t slabyp dielectric gray periodizeshaperod a a sqrt a t slabynsh dielectric gray periodizeshaperod a a sqrt a t slabypsh dielectric gray periodizeshaperod a a sqrt a t slabynfast dielectric gray periodizeshaperod a a sqrt a t slabypfast SRCJ PointSrcAxisysrcloc inspectonly poweri powerfluxpatchE H Axisx a a a save wvlentranspicdiv num strad wvlen num strwvlen pmllen num strpmll EHobjarraysrcarrayJv save power power adar end Hi I am wondering how can I use the mawellFDFD in order to obtain guided modes for different waveguide structures Can the modesolver functions be used seperatly and if possible how can I do that Thanks Hi I want to evaluate power coupled to a mode I can evaluate the power at a patch using the provided function for this but I am not getting too far with the overlap integral between the power and the waveguide mode some info here Any help is much appreciated PS Also it is not clear where the wavelength dependence of the mode calculation comes in Thanks Hi I installed maxwellfdfd the main branch by zip file from the github page Im on a mac running El Capitan and matlab b I ran two tests and saw two different problems First I ran the oneliner on your web page E H maxwellrun OSC e DOM vacuum none BCp OBJ CRCAg k Box Box SRCJ PlaneSrcAxisy Axisx true The command ran to completion I got a figure with a graphic showing the box and the silver slab but no fields plotted On inspection the E and H variables are x cells but the objects in the cells are empty arrays Second I ran pointsrc d The following output resulted maxwellrun begins Efield grid type primary time elapsed sec in total sec for initial setup Length Unit e m wvlen freq eV materials used vacuum eps mu time elapsed sec in total sec for nonuniform grid generation Nx Ny Nz time elapsed sec in total sec for eps and mu assignment time elapsed sec in total sec for J assignment Error using Inner matrix dimensions must agree Error in MatrixEquationmatrixop line A PM thisCm INVMU thisCe PM thisomega EPS Error in solveeqdirect line A b eqmatrixop Error in maxwellrun line E H solveeqdirectsolveroptseqtype solveroptspml oscinomega eps mu sfactor J M grid d Error in pointsrc d line E H objarray srcarray J maxwellrun I set a breakpoint at MatrixEquationmatrixop line and reran I noticed that PM was empty and that thispm was also empty Do you have any guidance Thanks very much Brian 