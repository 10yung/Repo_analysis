The current packagejson uses a stripe package that is more than years old I want to start updating the cloud functions and the first step to doing that is adding the newest functionality How to reproduce these conditions Use the exact code from the example which imports the ui at Failing Function code used including requireimport commands at the top the code fails at line link relstylesheet href and line script src Works fine with firebaseui firebaseuijs Screenshots Expected behavior It should look like the firestripe payforallthings example but instead doesnt correctly allow for google auth Actual behavior img width altScreen Shot at PM src Facing an issue with the firebase uppercase sample On writing it back to firebase getting an error undefined Getting metadata from plugin failed with error Could not refresh the access token Tried to google and follow the steps including installing googlegax but no success How to reproduce these conditions Im using the sample code as is It builds and uploads and runs The thumb image cant be downloaded and just hangs in the control panel Ive tried jpg and png small and large All produce the same failure Logs say it ran ok About seconds for a meg image Running latest software engines node dependencies childprocesspromise firebaseadmin firebasefunctions firebasetools are current Here is what the console looks like after an upload The original image uploads fine The generated thumb never presents an image or a link though its name and size are correct Screen Shot at PM Function that triggers user firestore and after the user has changed avatar id the function checks that such an id is in the users photo collection or a nonempty id is set otherwise it changes to the previous identifier Added new cloud function Function that triggers user firestore and after the user has changed avatar id the function checks that such an id is in the users photo collection or a nonempty id is set otherwise it changes to the previous identifier For months Ive seen this repository with amazing functions and I would like to request your Team to include a function that checks the position of the image EXIF profile before it is uploaded to the storage bucket this is a very specific issue with iPhones and other iOS devices when taking a picture in portrait mode the thumbnails generated with the thumbnails function would obviously export the thumbnail in the wrong direction landscape This however does not happen with an Android mobile phone Best regards When i hit npm run start i get this error C Users Mohit Documents GitHub customauthsamples instagram appjs ressendfirebaseToken Please consider updating to use In particular I have found the existing caveat Any npm modules dependencies used in the Nextjs app app folder must also be installed as dependencies for the Cloud Functions project functions folder to be troublesome and am wondering if use of Nextjss serverless deployment may alleviate this Hello I am trying to work on a cloud function to automatically update google sheet when on adding data to the firestore database Here is the code I am following const functions requirefirebasefunctions const admin requirefirebaseadmin admininitializeApp const OAuth Client requiregoogleauthlibrary const google requiregoogleapis const Storage requiregooglecloudstorage const os requireos const path requirepath const spawn requirechildprocesspromisespawn const db admindatabase const CONFIGCLIENTID functionsconfiggoogleapiclientid const CONFIGCLIENTSECRET functionsconfiggoogleapiclientsecret const CONFIGSHEETID functionsconfiggoogleapisheetid const CONFIGDATAPATH functionsconfigwatchedpathsdatapath The OAuth Callback Redirect const FUNCTIONSREDIRECT setup for authGoogleAPI const SCOPES const functionsOauthClient new OAuth ClientCONFIGCLIENTID CONFIGCLIENTSECRET FUNCTIONSREDIRECT let oauthTokens null visit the URL for this Function to request tokens exportsauthgoogleapi functionshttpsonRequestreq res ressetCacheControl private maxage smaxage resredirectfunctionsOauthClientgenerateAuthUrl accesstype offline scope SCOPES prompt consent const DBTOKENPATH apitokens exportsoauthcallback functionshttpsonRequestasync req res ressetCacheControl private maxage smaxage const code reqquerycode try const tokens await functionsOauthClientgetTokencode Now tokens contains an accesstoken and an optional refreshtoken Save them await admindatabaserefDBTOKENPATHsettokens await admindatabaserefDBTOKENPATHsettokens return resstatus sendApp successfully configured with new Credentials You can now close this page catch error return resstatus senderror const SHEETID My sheet ID exportsappendRecordToSpreadsheet functionsfirestoredocumentincidentreportidonCreate snap context consolelogI am triggered const newRecord snapdata consolelognewRecord return appendPromise spreadsheetId SHEETID range AC valueInputOption USERENTERED insertDataOption INSERTROWS resource values newRecordfirstColumn newRecordsecondColumn newRecordthirdColumn function appendPromiserequestWithoutAuth return new Promiseresolve reject return getAuthorizedClientthenclient const sheets googlesheetsv const request requestWithoutAuth requestauth client return sheetsspreadsheetsvaluesappendrequest err response if err consolelogThe API returned an error err return rejecterr return resolveresponsedata checks if oauthTokens have been loaded into memory and if not retrieves them async function getAuthorizedClient if oauthTokens return functionsOauthClient const snapshot await admindatabaserefDBTOKENPATHoncevalue oauthTokens snapshotval functionsOauthClientcredentials oauthTokens return functionsOauthClient I get this error TypeError Cannot read property accesstoken of null at OAuth ClientgetRequestMetadataAsync srvnodemodulesgoogleauthlibrarybuildsrcauthoauth clientjs at OAuth ClientrequestAsync srvnodemodulesgoogleauthlibrarybuildsrcauthoauth clientjs at OAuth Clientrequest srvnodemodulesgoogleauthlibrarybuildsrcauthoauth clientjs at createAPIRequestAsync srvnodemodulesgoogleapiscommonbuildsrcapirequestjs at ObjectcreateAPIRequest srvnodemodulesgoogleapiscommonbuildsrcapirequestjs at ResourceSpreadsheetsValuesappend srvnodemodulesgoogleapisbuildsrcapissheetsv js at getAuthorizedClientthen srvindexjs at anonymous at processtickDomainCallback internalprocessnexttickjs How can I solve this problem I am a beginner