Two changes Remove water and replace with sys call for tun setup Support named interfaces This needs testing I submitted the PR to get some more help reviewing and testing Ive tested on Catalina If anyone has pointers on sending route messages to an AFROUTE socket so we can replace the execs Id love to see an example I successfully set up a LH node Nebula mesh where the nodes are running Windows with OpenVPN preinstalled and thats how they had a TAP adapter In the process I noticed that Nebula sets up static IPs on the TAP adapters at least on the Windows machines which caused me a couple of headaches trying to figure out why my connections to OpenVPN servers were not working anymore after I stopped Nebula Removing the static IP and setting DNS servers to be obtained automatically solved the issue Is it possible or are there plans for it to only apply the static IP to the TAP adapter while Nebula is running and revert any changes when we stop it Or whats the recommended usage if our TAP adapter is also used for other purposes I initially thought that Nebula would create a new network adapter for its purposes that would also work if its doable I am trying to create a selinux policy for Nebula to ignore events to make sure I can keep selinux active on my servers while running Nebula It mostly works but the Nebula service fails on a reboot When I first run Nebula manually or I set selinux to permissive I can start the service If I then enable selinux I can restart as expected in journalctl xe I see the following message levelfatal msgno such device Looks like selinux is still preventing the creation of the network interface for Nebula and a manual start of Nebula or a start of the service with selinux permissive resolves it Environment Centos Steps taken Created a service for Nebula like in the example git repo cat usrlibsystemdsystemnebulaservice Unit Descriptionnebula Wantsbasictarget Afterbasictarget networktarget Service SyslogIdentifiernebula StandardOutputsyslog StandardErrorsyslog ExecReloadbinkill HUP MAINPID ExecStartusrlocalbinnebula config etcnebulaconfigyml Restartalways Install WantedBymultiusertarget Created a policy with audit allow and loaded it grep nebula varlogauditauditlog audit allow M nebulalocal semodule i nebulalocalpp semodule l Now all invalid selinux AVCs are allowed in current policy no errors left Invalid AVC allowed in current policy typeAVC msgaudit avc denied execute for pid commnebula namenebula devdm ino scontextsystemusystemrinitts tcontextunconfineduobjectruserhomets tclassfile permissive Invalid AVC allowed in current policy done found alerts in varlogauditauditlog But when I try to start the service it fails systemctl status nebula nebulaservice nebula Loaded loaded usrlibsystemdsystemnebulaservice enabled vendor preset disabled Active failed Result exitcode since Sat CET s ago Process ExecStartusrlocalbinnebula config etcnebulaconfigyml codeexited status FAILURE Main PID codeexited status FAILURE If I then set selinux to permissive I can start the service and even when I turn it back to enforcing Nebula will keep working and can be restarted setenforce systemctl start nebula setenforce systemctl restat nebula no problem I can also manually start Nebula on start up and after that I can start the service using enforcing selinux Issue Nebula crashes with OOM error during handshake with the Lighthouse Nebula version Master branch commit c cd b f be ff cf b fc be Operating system Ubuntu Nebula node configuration pki ca cacrt cert hostcrt key hostkey statichostmap lighthouse amlighthouse false interval hosts listen host port tun dev nebula mtu logging panic fatal error warning info or debug Default is info level info json or text formats currently available Default is text format text Nebula security group configuration firewall conntrack tcptimeout h udptimeout m defaulttimeout m maxconnections outbound Allow all outbound traffic from this node port any proto any host any inbound Allow icmp between any nebula hosts port any proto icmp host any Error log INFO Nebula interface is active builddev interfacenebula network fatal error runtime out of memory runtime stack runtimethrow xb d a x runtimepanicgo x runtimesysMap xc c x x c runtimememlinuxgo xc runtimemheapsysAlloc x ab xe x f db d ec x f db d f runtimemallocgo x cd runtimemheapgrow x ab x xffffffff runtimemheapgo xa runtimemheapallocSpanLocked x ab x x c x f db runtimemheapgo x runtimemheapallocm x ab x x x f db runtimemheapgo xc runtimemheapallocfunc runtimemheapgo x c runtimesystemstack x runtimeasmamd s x runtimemstart runtimeprocgo goroutine running runtimesystemstackswitch runtimeasmamd s fp xc a b sp xc a a pc x cb runtimemheapalloc x ab x x x runtimemheapgo x a fp xc a sp xc a b pc x fa runtimemcentralgrow x ad b x runtimemcentralgo x b fp xc a sp xc a pc x b runtimemcentralcacheSpan x ad b x runtimemcentralgo x fe fp xc a a sp xc a pc x e runtimemcacherefill x f dc c d x runtimemcachego x fp xc a c sp xc a a pc x f runtimemcachenextFree x f dc c d x x x x runtimemallocgo x fp xc a f sp xc a c pc x d runtimemallocgc x xa a xc b f xc b a runtimemallocgo x fp xc a sp xc a f pc x e a runtimemakeslice xa a x x xc b a runtimeslicego x c fp xc a c sp xc a pc x ec githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x b fp xc a sp xc a c pc x d b githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a sp xc a pc x d f githubcomslackhqnebulaixHandshakeStage xc xc xc f githubcomslackhqnebulahandshakeixgo x fp xc a sp xc a pc x c githubcomslackhqnebulaInterfacegetOrHandshake xc x a xffffffffffffffff githubcomslackhqnebulainsidego x fp xc a sp xc a pc x d c githubcomslackhqnebulaInterfaceSendMessageToVpnIp xc xa xc b a x x xc b a xc xc xc c ff x githubcomslackhqnebulainsidego x d fp xc a sp xc a pc x d d githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x fp xc a e sp xc a pc x d githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a sp xc a e pc x d f githubcomslackhqnebulaixHandshakeStage xc xc xc f githubcomslackhqnebulahandshakeixgo x fp xc a d sp xc a pc x c githubcomslackhqnebulaInterfacegetOrHandshake xc x a xffffffffffffffff githubcomslackhqnebulainsidego x fp xc a de sp xc a d pc x d c githubcomslackhqnebulaInterfaceSendMessageToVpnIp xc xa xc b a x x xc b a xc xc xc c ff x githubcomslackhqnebulainsidego x d fp xc a e sp xc a de pc x d d githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x fp xc a b sp xc a e pc x d githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a sp xc a b pc x d f githubcomslackhqnebulaixHandshakeStage xc xc xc f githubcomslackhqnebulahandshakeixgo x fp xc a a sp xc a pc x c githubcomslackhqnebulaInterfacegetOrHandshake xc x a xffffffffffffffff githubcomslackhqnebulainsidego x fp xc a ab sp xc a a pc x d c githubcomslackhqnebulaInterfaceSendMessageToVpnIp xc xa xc b a x x xc b a xc xc xc c ff f x githubcomslackhqnebulainsidego x d fp xc a b sp xc a ab pc x d d githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x fp xc a d sp xc a b pc x d githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a df sp xc a d pc x d f githubcomslackhqnebulaixHandshakeStage xc xc xc f githubcomslackhqnebulahandshakeixgo x fp xc a d sp xc a df pc x c githubcomslackhqnebulaInterfacegetOrHandshake xc x a xffffffffffffffff githubcomslackhqnebulainsidego x fp xc a sp xc a d pc x d c githubcomslackhqnebulaInterfaceSendMessageToVpnIp xc xa xc b f x x xc b f xc xc xc c feea x githubcomslackhqnebulainsidego x d fp xc a sp xc a pc x d d githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x fp xc a a sp xc a pc x d githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a ac sp xc a a pc x d f githubcomslackhqnebulaixHandshakeStage xc xc xc f githubcomslackhqnebulahandshakeixgo x fp xc a a a sp xc a ac pc x c githubcomslackhqnebulaInterfacegetOrHandshake xc x a xffffffffffffffff githubcomslackhqnebulainsidego x fp xc a a sp xc a a a pc x d c githubcomslackhqnebulaInterfaceSendMessageToVpnIp xc xa xc b e x x xc b e xc xc xc c fec x githubcomslackhqnebulainsidego x d fp xc a a d sp xc a a pc x d d githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x fp xc a a sp xc a a d pc x d githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a a sp xc a a pc x d f githubcomslackhqnebulaixHandshakeStage xc xc xc f githubcomslackhqnebulahandshakeixgo x fp xc a b sp xc a a pc x c githubcomslackhqnebulaInterfacegetOrHandshake xc x a xffffffffffffffff githubcomslackhqnebulainsidego x fp xc a b sp xc a b pc x d c githubcomslackhqnebulaInterfaceSendMessageToVpnIp xc xa xc b d x x xc b d xc xc xc c fea x githubcomslackhqnebulainsidego x d fp xc a b a sp xc a b pc x d d githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x fp xc a b f sp xc a b a pc x d githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a b sp xc a b f pc x d f githubcomslackhqnebulaixHandshakeStage xc xc xc f githubcomslackhqnebulahandshakeixgo x fp xc a bd sp xc a b pc x c githubcomslackhqnebulaInterfacegetOrHandshake xc xa xffffffffffffffff githubcomslackhqnebulainsidego x fp xc a bdf sp xc a bd pc x d c githubcomslackhqnebulaInterfaceSendMessageToVpnIp xc xa xc b c x x xc b c xc xc xc c fe x githubcomslackhqnebulainsidego x d fp xc a be sp xc a bdf pc x d d githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x fp xc a c c sp xc a be pc x d githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a c sp xc a c c pc x d f githubcomslackhqnebulaixHandshakeStage xc xc xc f githubcomslackhqnebulahandshakeixgo x fp xc a ca sp xc a c pc x c githubcomslackhqnebulaInterfacegetOrHandshake xc x a xffffffffffffffff githubcomslackhqnebulainsidego x fp xc a cac sp xc a ca pc x d c githubcomslackhqnebulaInterfaceSendMessageToVpnIp xc xa xc b b x x xc b b xc xc xc c fe x githubcomslackhqnebulainsidego x d fp xc a cb sp xc a cac pc x d d githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x fp xc a cd sp xc a cb pc x d githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a ce sp xc a cd pc x d f githubcomslackhqnebulaixHandshakeStage xc xc xc f githubcomslackhqnebulahandshakeixgo x fp xc a d e sp xc a ce pc x c githubcomslackhqnebulaInterfacegetOrHandshake xc x a xffffffffffffffff githubcomslackhqnebulainsidego x fp xc a d sp xc a d e pc x d c githubcomslackhqnebulaInterfaceSendMessageToVpnIp xc xa xc b a x x xc b a xc xc xc c fe f x githubcomslackhqnebulainsidego x d fp xc a d sp xc a d pc x d d githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x fp xc a da sp xc a d pc x d githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a dad sp xc a da pc x d f githubcomslackhqnebulaixHandshakeStage xc xc xc f githubcomslackhqnebulahandshakeixgo x fp xc a e b sp xc a dad pc x c githubcomslackhqnebulaInterfacegetOrHandshake xc x a xffffffffffffffff githubcomslackhqnebulainsidego x fp xc a e sp xc a e b pc x d c githubcomslackhqnebulaInterfaceSendMessageToVpnIp xc xa xc b x x xc b xc xc xc c fe a x githubcomslackhqnebulainsidego x d fp xc a e e sp xc a e pc x d d githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x fp xc a e sp xc a e e pc x d githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a e a sp xc a e pc x d f githubcomslackhqnebulaixHandshakeStage xc xc xc f githubcomslackhqnebulahandshakeixgo x fp xc a f sp xc a e a pc x c githubcomslackhqnebulaInterfacegetOrHandshake xc x a xffffffffffffffff githubcomslackhqnebulainsidego x fp xc a f sp xc a f pc x d c githubcomslackhqnebulaInterfaceSendMessageToVpnIp xc xa xc b x x xc b xc xc xc c fde x githubcomslackhqnebulainsidego x d fp xc a f b sp xc a f pc x d d githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x fp xc a f sp xc a f b pc x d githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a f sp xc a f pc x d f githubcomslackhqnebulaixHandshakeStage xc xc xc f githubcomslackhqnebulahandshakeixgo x fp xc a fd sp xc a f pc x c githubcomslackhqnebulaInterfacegetOrHandshake xc x a xffffffffffffffff githubcomslackhqnebulainsidego x fp xc a fe sp xc a fd pc x d c githubcomslackhqnebulaInterfaceSendMessageToVpnIp xc xa xc b x x xc b xc xc xc c fdc x githubcomslackhqnebulainsidego x d fp xc a fe sp xc a fe pc x d d githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x fp xc a d sp xc a fe pc x d githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a sp xc a d pc x d f githubcomslackhqnebulaixHandshakeStage xc xc xc f githubcomslackhqnebulahandshakeixgo x fp xc a a sp xc a pc x c githubcomslackhqnebulaInterfacegetOrHandshake xc x a xffffffffffffffff githubcomslackhqnebulainsidego x fp xc a ad sp xc a a pc x d c githubcomslackhqnebulaInterfaceSendMessageToVpnIp xc xa xc b x x xc b xc xc xc c fd x githubcomslackhqnebulainsidego x d fp xc a b sp xc a ad pc x d d githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x fp xc a da sp xc a b pc x d githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a e sp xc a da pc x d f githubcomslackhqnebulaixHandshakeStage xc xc xc f githubcomslackhqnebulahandshakeixgo x fp xc a f sp xc a e pc x c githubcomslackhqnebulaInterfacegetOrHandshake xc x a xffffffffffffffff githubcomslackhqnebulainsidego x fp xc a a sp xc a f pc x d c githubcomslackhqnebulaInterfaceSendMessageToVpnIp xc xa xc b x x xc b xc xc xc c fd x githubcomslackhqnebulainsidego x d fp xc a sp xc a a pc x d d githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x fp xc a a sp xc a pc x d githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a ae sp xc a a pc x d f githubcomslackhqnebulaixHandshakeStage xc xc xc f githubcomslackhqnebulahandshakeixgo x fp xc a c sp xc a ae pc x c githubcomslackhqnebulaInterfacegetOrHandshake xc x a xffffffffffffffff githubcomslackhqnebulainsidego x fp xc a sp xc a c pc x d c githubcomslackhqnebulaInterfaceSendMessageToVpnIp xc xa xc b x x xc b xc xc xc c fd f x githubcomslackhqnebulainsidego x d fp xc a f sp xc a pc x d d githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x fp xc a sp xc a f pc x d githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a b sp xc a pc x d f githubcomslackhqnebulaixHandshakeStage xc xc xc f githubcomslackhqnebulahandshakeixgo x fp xc a sp xc a b pc x c githubcomslackhqnebulaInterfacegetOrHandshake xc x a xffffffffffffffff githubcomslackhqnebulainsidego x fp xc a sp xc a pc x d c githubcomslackhqnebulaInterfaceSendMessageToVpnIp xc xa xc b x x xc b xc xc xc c fd a x githubcomslackhqnebulainsidego x d fp xc a c sp xc a pc x d d githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x fp xc a sp xc a c pc x d githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a sp xc a pc x d f githubcomslackhqnebulaixHandshakeStage xc xc xc f githubcomslackhqnebulahandshakeixgo x fp xc a d sp xc a pc x c githubcomslackhqnebulaInterfacegetOrHandshake xc x a xffffffffffffffff githubcomslackhqnebulainsidego x fp xc a e sp xc a d pc x d c githubcomslackhqnebulaInterfaceSendMessageToVpnIp xc xa xc b x x xc b xc xc xc c fd x githubcomslackhqnebulainsidego x d fp xc a e sp xc a e pc x d d githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x fp xc a e sp xc a e pc x d githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a sp xc a e pc x d f githubcomslackhqnebulaixHandshakeStage xc xc xc f githubcomslackhqnebulahandshakeixgo x fp xc a a sp xc a pc x c githubcomslackhqnebulaInterfacegetOrHandshake xc x a xffffffffffffffff githubcomslackhqnebulainsidego x fp xc a ae sp xc a a pc x d c githubcomslackhqnebulaInterfaceSendMessageToVpnIp xc xa xc b x x xc b xc xc xc c fce x githubcomslackhqnebulainsidego x d fp xc a b sp xc a ae pc x d d githubcomslackhqnebulaLightHouseQueryServer xc b xc xc c xc githubcomslackhqnebulalighthousego x fp xc a db sp xc a b pc x d githubcomslackhqnebulaLightHouseQuery xc b x xc c xc x x x x x githubcomslackhqnebulalighthousego x f fp xc a e sp xc a db pc x d f additional frames elided created by githubcomslackhqnebulaMain githubcomslackhqnebulamaingo x d OS version Windows Pro I tried to install the service and this is what Im keeping getting nebula service install config D Apps Nebula configyml Valid actions start stop restart install uninstall Failed to install Nebula Network Service service Nebula already exists While there is no Nebula service installed before I also tried to uninstall this is what I got First try nebula service uninstall Valid actions start stop restart install uninstall Failed to uninstall Nebula Network Service RemoveEventLogSource failed The system cannot find the file specified Second try nebula service uninstall Valid actions start stop restart install uninstall Failed to uninstall Nebula Network Service The specified service has been marked for deletion wip allow for a list of IPs within a nebula certificate and update nebulacerts signing to allow for it Dear all we built nebula and use it in our test environment for a while it works very well recently we try build a new k s cluster and cause some problem most of case can work right eg I can join some node use nebula network I can execute kubectl logexec for some pod work on remote machine but podtopod community not work something like ingress to remote pod cant work I tried to login some pod use traceroute it doesnt reply I dont have any idea to finger it out Does anyone have successful experience the log doesnt show anything about this I guess maybe the problem caused by Flannel layer I am not sure environment info os Debian k s version v e a c flannel mode vxlan This change moves the logic for creating the LightHouse structure out of maingo and into NewLightHouseFromConfig It then makes the following config values reload on SIGHUP by registering a reload callback statichostmap lighthousehosts lighthouseinterval punchback This makes it possible to update the static hosts or lighthouses and do a reload without having to restart the Nebula process I cant find evidence this is in wide use but worth supporting these as it may help folks behind NAT fatal error concurrent map writes fatal error concurrent map writes goroutine running runtimethrow x x Fgosrcruntimepanicgo x c fp x ec sp x ec pc x e runtimemapassign x x a fcc x f b xf Fgosrcruntimemapgo x fp x ec sp x ec pc x d e githubcomslackhqnebulaixHandshakeStage x c b xc a x d Gsourcecodenebulahandshakeixgo xaf fp x ec c sp x ec pc x f c githubcomslackhqnebulaInterfacegetOrHandshake x c b xc a x d Gsourcecodenebulainsidego x fp x ec ac sp x ec c pc x e githubcomslackhqnebulaInterfaceSendMessageToVpnIp x c b x c xc a x c ec xa xa x c ed xc xc x e Gsourcecodenebulainsidego x fp x ec ec sp x ec ac pc x githubcomslackhqnebulaLightHouseQueryServer x d c xc a x cb x c b Gsourcecodenebulalighthousego x c fp x ec c sp x ec ec pc x githubcomslackhqnebulaLightHouseQuery x d c xc a x cb x c b x x fc x x x Gsourcecodenebulalighthousego x fp x ec sp x ec c pc x githubcomslackhqnebulaixHandshakeStage x c b xc a x e Gsourcecodenebulahandshakeixgo x c fp x ec e sp x ec pc x f githubcomslackhqnebulaInterfacegetOrHandshake x c b xc a x Gsourcecodenebulainsidego x fp x ec e sp x ec e pc x e githubcomslackhqnebulaInterfaceconsumeInsidePacket x c b x e a x c x x c f b x c f c xc xc x e ca x Gsourcecodenebulainsidego xa fp x ec f sp x ec e pc x c githubcomslackhqnebulaInterfacelistenIn x c b x Gsourcecodenebulainterfacego xd fp x ec fe sp x ec f pc x e c runtimegoexit Fgosrcruntimeasmarms x fp x ec fe sp x ec fe pc x d c created by githubcomslackhqnebulaInterfaceRun Gsourcecodenebulainterfacego x goroutine chan receive minutes githubcomslackhqnebulashutdownBlock x c b Gsourcecodenebulamaingo xd githubcomslackhqnebulaMain xbed c f x b x x fe a x Gsourcecodenebulamaingo x e mainmain Gsourcecodenebulacmdnebulamaingo x e goroutine syscall minutes ossignalsignalrecv x Fgosrcruntimesigqueuego x ossignalloop Fgosrcossignalsignalunixgo x created by ossignalinit Fgosrcossignalsignalunixgo x goroutine chan receive minutes githubcomslackhqnebulaConfigCatchHUPfunc x d x c a c Gsourcecodenebulaconfiggo x created by githubcomslackhqnebulaConfigCatchHUP Gsourcecodenebulaconfiggo x c goroutine sleep runtimegoparkunlock Fgosrcruntimeprocgo timeSleep xfc ac x Fgosrcruntimetimego x githubcomslackhqnebulaHostMapPunchy x c e x c ebd Gsourcecodenebulahostmapgo x created by githubcomslackhqnebulaMain Gsourcecodenebulamaingo x cd goroutine chan receive githubcomslackhqnebulaconnectionManagerRun x d c Gsourcecodenebulaconnectionmanagergo xa created by githubcomslackhqnebulaconnectionManagerStart Gsourcecodenebulaconnectionmanagergo x c goroutine running goroutine running on other thread stack unavailable created by githubcomslackhqnebulaMain Gsourcecodenebulamaingo x goroutine sleep minutes runtimegoparkunlock Fgosrcruntimeprocgo timeSleep xf xd Fgosrcruntimetimego x githubcomslackhqnebulaLightHouseLhUpdateWorker x d c x cb x c b Gsourcecodenebulalighthousego x created by githubcomslackhqnebulaMain Gsourcecodenebulamaingo x c goroutine chan receive githubcomslackhqnebulaInterfaceemitStats x c b x be x Gsourcecodenebulainterfacego x created by githubcomslackhqnebulaMain Gsourcecodenebulamaingo x goroutine syscall syscallSyscall x d x x c x x x x x x c x Fgosrcsyscallasmlinuxarms x githubcomslackhqnebulaudpConnReadMulti x c ebd x c x x x x dfa x Gsourcecodenebulaudplinuxgo x c githubcomslackhqnebulaudpConnListenOut x c ebd x c b Gsourcecodenebulaudplinuxgo x githubcomslackhqnebulaInterfacelistenOut x c b x Gsourcecodenebulainterfacego x created by githubcomslackhqnebulaInterfaceRun Gsourcecodenebulainterfacego x d goroutine running runtimethrow x x Fgosrcruntimepanicgo x c fp x ec sp x ec ec pc x e runtimemapassign x x a fcc x f b xf Fgosrcruntimemapgo x fp x ec sp x ec pc x d e githubcomslackhqnebulaixHandshakeStage x c b xc a x d Gsourcecodenebulahandshakeixgo xaf fp x ec sp x ec pc x f c githubcomslackhqnebulaInterfacegetOrHandshake x c b xc a xffffffff Gsourcecodenebulainsidego x fp x ec sp x ec pc x e githubcomslackhqnebulaInterfaceSendMessageToVpnIp x c b x c xc a x cea xa xa x cea xc xc x faa Gsourcecodenebulainsidego x fp x ec a sp x ec pc x githubcomslackhqnebulaLightHouseQueryServer x d c xc a x cb x c b Gsourcecodenebulalighthousego x c fp x ec d sp x ec a pc x githubcomslackhqnebulaLightHouseQuery x d c xc a x cb x c b x x x x x Gsourcecodenebulalighthousego x fp x ec c sp x ec d pc x githubcomslackhqnebulaHandshakeManagerNextOutboundHandshakeTimerTick x c f x b fffe xbf b d f x d f d x cf xaa x cb x c b Gsourcecodenebulahandshakemanagergo xb c fp x ec f c sp x ec c pc x fe d githubcomslackhqnebulaHandshakeManagerRun x c f x cb x c b Gsourcecodenebulahandshakemanagergo x fp x ec fdc sp x ec f c pc x fde runtimegoexit Fgosrcruntimeasmarms x fp x ec fdc sp x ec fdc pc x d c created by githubcomslackhqnebulaMain Gsourcecodenebulamaingo x 