I cant say for sure this is a bug but surely it seems odd In the below example I would expect capture to engage only when the full list of parameters to verify matches however the opposite seems to be true kotlin interface ExternalService fun doItdoCapture Boolean captureCandidate String class VerifyCaptureDemo val externalService ExternalService mockkrelaxed true Test fun demo externalServicedoItfalse noCaptureExpected externalServicedoIttrue captureThis val capturedValues mutableListOfString verifyexactly externalServicedoItfalse any verifyexactly externalServicedoIttrue capturecapturedValues assertEquals capturedValuessize javalangAssertionError Expected Actual MockK version Kotlin version JDK version openjdk Im unable to InjectMocks to singleton object object RealObject const val TIMESTAMP timestamp private val rect androidgraphicsRect const val KEYBOARDROTATIONTHRESHOLD L fun getWidth rectwidth class RealObjectTest RelaxedMockKMockedRect lateinit var rect Rect OverrideMockKs var realObject RealObject Before fun setUp MockKAnnotationsinitthis relaxUnitFun true Test fun testMockedWidth spykrealObject every rectwidth returns val width getWidth AssertassertEquals width Im getting javalangIllegalAccessException Can not set static final androidgraphicsRect field comexamplesampleprojectRealObjectrect to androidgraphicsRect at sunreflectUnsafeFieldAccessorImplthrowFinalFieldIllegalAccessExceptionUnsafeFieldAccessorImpljava at sunreflectUnsafeFieldAccessorImplthrowFinalFieldIllegalAccessExceptionUnsafeFieldAccessorImpljava at sunreflectUnsafeQualifiedStaticObjectFieldAccessorImplsetUnsafeQualifiedStaticObjectFieldAccessorImpljava at javalangreflectFieldsetFieldjava at iomockkimplannotationsInjectionHelperssetImmutableAnyInjectionHelperskt at iomockkimplannotationsMockInjectorpropertiesInjectionMockInjectorkt at iomockkimplannotationsJvmMockInitializerdoInjectionJvmMockInitializerkt at iomockkimplannotationsJvmMockInitializerinitMockJvmMockInitializerkt at iomockkimplannotationsJvmMockInitializerinitAnnotatedMocksJvmMockInitializerkt at comexamplesampleprojectRealObjectTestsetUpGithubTestkt What am I doing wrong When trying to mock a function named fun getstring String String the get function referred to inside the every block is actually the extension function operator fun Anygetname String DynamicCallthis name any defined in MockKMatcherScope Test case kotlin import iomockkevery import iomockkmockk import orgjunitTest class UnderTest fun getstring String xyz class Test Test fun test mockkUnderTest every getdef returns abc Produces compiler error on the abc string Type mismatch inferred type is String but MockKMatcherScopeDynamicCall was expected Expected Behavior Mockk should match calls to my method when an enum argument is passed Current Behavior When the Enum is a Enum Class with methods a javalangInstantiationError is thrown Failure Information for bugs Context MockK version OS Windows Kotlin version JDK version JUnit version Type of test unit test Stack trace YOUR STACK STARTS HERE commypackageStorageFileType javalangInstantiationError commypackageStorageFileType at jdkinternalreflectGeneratedSerializationConstructorAccessor newInstanceUnknown Source at javabasejavalangreflectConstructornewInstanceConstructorjava at orgobjenesisinstantiatorsunSunReflectionFactoryInstantiatornewInstanceSunReflectionFactoryInstantiatorjava at iomockkproxyjvmObjenesisInstantiatorinstanceViaObjenesisObjenesisInstantiatorkt at iomockkproxyjvmObjenesisInstantiatorinstanceObjenesisInstantiatorkt at iomockkimplinstantiationJvmInstantiatorinstantiate invokeJvmInstantiatorkt at iomockkimplinstantiationAbstractInstantiatorinstantiateViaInstanceFactoryRegistryAbstractInstantiatorkt at iomockkimplinstantiationJvmInstantiatorinstantiateJvmInstantiatorkt at iomockkimplrecordingstatesRecordingStatematchersignatureValue invokeRecordingStatekt at iomockkimplinstantiationJvmAnyValueGeneratoranyValue invokeJvmAnyValueGeneratorkt at iomockkimplinstantiationAnyValueGeneratoranyValueAnyValueGeneratorkt at iomockkimplinstantiationJvmAnyValueGeneratoranyValueJvmAnyValueGeneratorkt at iomockkimplrecordingstatesRecordingStatematchersignatureValue invokeRecordingStatekt at iomockkimplrecordingJvmSignatureValueGeneratorsignatureValueJvmSignatureValueGeneratorkt at iomockkimplrecordingstatesRecordingStatematcherRecordingStatekt at iomockkimplrecordingCommonCallRecordermatcherCommonCallRecorderkt at commypackagesvcRenderNodeTestsetup invokeRenderNodeTestkt at commypackagesvcRenderNodeTestsetup invokeRenderNodeTestkt at iomockkimplevalRecordedBlockEvaluatorrecordblock invokeRecordedBlockEvaluatorkt at iomockkimplevalRecordedBlockEvaluatorenhanceWithNPERethrow invokeRecordedBlockEvaluatorkt at iomockkimplrecordingJvmAutoHinterautoHintJvmAutoHinterkt at iomockkimplevalRecordedBlockEvaluatorrecordRecordedBlockEvaluatorkt at iomockkimplevalEveryBlockEvaluatoreveryEveryBlockEvaluatorkt at iomockkMockKDslinternalEveryAPIkt at iomockkMockKKteveryMockKkt at commypackagesvcRenderNodeTestsetupRenderNodeTestkt at javabasejdkinternalreflectNativeMethodAccessorImplinvoke Native Method at javabasejdkinternalreflectNativeMethodAccessorImplinvokeNativeMethodAccessorImpljava at javabasejdkinternalreflectDelegatingMethodAccessorImplinvokeDelegatingMethodAccessorImpljava at javabasejavalangreflectMethodinvokeMethodjava at orgjunitplatformcommonsutilReflectionUtilsinvokeMethodReflectionUtilsjava at orgjunitjupiterengineexecutionExecutableInvokerinvokeExecutableInvokerjava at orgjunitjupiterenginedescriptorClassTestDescriptorinvokeMethodInExtensionContextClassTestDescriptorjava at orgjunitjupiterenginedescriptorClassTestDescriptorlambdasynthesizeBeforeEachMethodAdapter ClassTestDescriptorjava at orgjunitjupiterenginedescriptorTestMethodTestDescriptorlambdainvokeBeforeEachMethods TestMethodTestDescriptorjava at orgjunitjupiterengineexecutionThrowableCollectorexecuteThrowableCollectorjava at orgjunitjupiterenginedescriptorTestMethodTestDescriptorinvokeBeforeMethodsOrCallbacksUntilExceptionOccursTestMethodTestDescriptorjava at orgjunitjupiterenginedescriptorTestMethodTestDescriptorinvokeBeforeEachMethodsTestMethodTestDescriptorjava at orgjunitjupiterenginedescriptorTestMethodTestDescriptorexecuteTestMethodTestDescriptorjava at orgjunitjupiterenginedescriptorTestMethodTestDescriptorexecuteTestMethodTestDescriptorjava at orgjunitplatformenginesupporthierarchicalHierarchicalTestExecutorNodeExecutorlambdaexecuteRecursively HierarchicalTestExecutorjava at orgjunitplatformenginesupporthierarchicalSingleTestExecutorexecuteSafelySingleTestExecutorjava at orgjunitplatformenginesupporthierarchicalHierarchicalTestExecutorNodeExecutorexecuteRecursivelyHierarchicalTestExecutorjava at orgjunitplatformenginesupporthierarchicalHierarchicalTestExecutorNodeExecutorexecuteHierarchicalTestExecutorjava at orgjunitplatformenginesupporthierarchicalHierarchicalTestExecutorNodeExecutorlambdaexecuteRecursively HierarchicalTestExecutorjava at javabasejavautilstreamForEachOpsForEachOpOfRefacceptForEachOpsjava at javabasejavautilstreamReferencePipeline acceptReferencePipelinejava at javabasejavautilIteratorforEachRemainingIteratorjava at javabasejavautilSpliteratorsIteratorSpliteratorforEachRemainingSpliteratorsjava at javabasejavautilstreamAbstractPipelinecopyIntoAbstractPipelinejava at javabasejavautilstreamAbstractPipelinewrapAndCopyIntoAbstractPipelinejava at javabasejavautilstreamForEachOpsForEachOpevaluateSequentialForEachOpsjava at javabasejavautilstreamForEachOpsForEachOpOfRefevaluateSequentialForEachOpsjava at javabasejavautilstreamAbstractPipelineevaluateAbstractPipelinejava at javabasejavautilstreamReferencePipelineforEachReferencePipelinejava at orgjunitplatformenginesupporthierarchicalHierarchicalTestExecutorNodeExecutorlambdaexecuteRecursively HierarchicalTestExecutorjava at orgjunitplatformenginesupporthierarchicalSingleTestExecutorexecuteSafelySingleTestExecutorjava at orgjunitplatformenginesupporthierarchicalHierarchicalTestExecutorNodeExecutorexecuteRecursivelyHierarchicalTestExecutorjava at orgjunitplatformenginesupporthierarchicalHierarchicalTestExecutorNodeExecutorexecuteHierarchicalTestExecutorjava at orgjunitplatformenginesupporthierarchicalHierarchicalTestExecutorNodeExecutorlambdaexecuteRecursively HierarchicalTestExecutorjava at javabasejavautilstreamForEachOpsForEachOpOfRefacceptForEachOpsjava at javabasejavautilstreamReferencePipeline acceptReferencePipelinejava at javabasejavautilIteratorforEachRemainingIteratorjava at javabasejavautilSpliteratorsIteratorSpliteratorforEachRemainingSpliteratorsjava at javabasejavautilstreamAbstractPipelinecopyIntoAbstractPipelinejava at javabasejavautilstreamAbstractPipelinewrapAndCopyIntoAbstractPipelinejava at javabasejavautilstreamForEachOpsForEachOpevaluateSequentialForEachOpsjava at javabasejavautilstreamForEachOpsForEachOpOfRefevaluateSequentialForEachOpsjava at javabasejavautilstreamAbstractPipelineevaluateAbstractPipelinejava at javabasejavautilstreamReferencePipelineforEachReferencePipelinejava at orgjunitplatformenginesupporthierarchicalHierarchicalTestExecutorNodeExecutorlambdaexecuteRecursively HierarchicalTestExecutorjava at orgjunitplatformenginesupporthierarchicalSingleTestExecutorexecuteSafelySingleTestExecutorjava at orgjunitplatformenginesupporthierarchicalHierarchicalTestExecutorNodeExecutorexecuteRecursivelyHierarchicalTestExecutorjava at orgjunitplatformenginesupporthierarchicalHierarchicalTestExecutorNodeExecutorexecuteHierarchicalTestExecutorjava at orgjunitplatformenginesupporthierarchicalHierarchicalTestExecutorexecuteHierarchicalTestExecutorjava at orgjunitplatformenginesupporthierarchicalHierarchicalTestEngineexecuteHierarchicalTestEnginejava at orgjunitplatformlaunchercoreDefaultLauncherexecuteDefaultLauncherjava at orgjunitplatformlaunchercoreDefaultLauncherlambdaexecute DefaultLauncherjava at orgjunitplatformlaunchercoreDefaultLauncherwithInterceptedStreamsDefaultLauncherjava at orgjunitplatformlaunchercoreDefaultLauncherexecuteDefaultLauncherjava at orgjunitplatformlaunchercoreDefaultLauncherexecuteDefaultLauncherjava at orggradleapiinternaltaskstestingjunitplatformJUnitPlatformTestClassProcessorCollectAllTestClassesExecutorprocessAllTestClassesJUnitPlatformTestClassProcessorjava at orggradleapiinternaltaskstestingjunitplatformJUnitPlatformTestClassProcessorCollectAllTestClassesExecutoraccess JUnitPlatformTestClassProcessorjava at orggradleapiinternaltaskstestingjunitplatformJUnitPlatformTestClassProcessorstopJUnitPlatformTestClassProcessorjava at orggradleapiinternaltaskstestingSuiteTestClassProcessorstopSuiteTestClassProcessorjava at javabasejdkinternalreflectNativeMethodAccessorImplinvoke Native Method at javabasejdkinternalreflectNativeMethodAccessorImplinvokeNativeMethodAccessorImpljava at javabasejdkinternalreflectDelegatingMethodAccessorImplinvokeDelegatingMethodAccessorImpljava at javabasejavalangreflectMethodinvokeMethodjava at orggradleinternaldispatchReflectionDispatchdispatchReflectionDispatchjava at orggradleinternaldispatchReflectionDispatchdispatchReflectionDispatchjava at orggradleinternaldispatchContextClassLoaderDispatchdispatchContextClassLoaderDispatchjava at orggradleinternaldispatchProxyDispatchAdapterDispatchingInvocationHandlerinvokeProxyDispatchAdapterjava at comsunproxyProxy stopUnknown Source at orggradleapiinternaltaskstestingworkerTestWorkerstopTestWorkerjava at javabasejdkinternalreflectNativeMethodAccessorImplinvoke Native Method at javabasejdkinternalreflectNativeMethodAccessorImplinvokeNativeMethodAccessorImpljava at javabasejdkinternalreflectDelegatingMethodAccessorImplinvokeDelegatingMethodAccessorImpljava at javabasejavalangreflectMethodinvokeMethodjava at orggradleinternaldispatchReflectionDispatchdispatchReflectionDispatchjava at orggradleinternaldispatchReflectionDispatchdispatchReflectionDispatchjava at orggradleinternalremoteinternalhubMessageHubBackedObjectConnectionDispatchWrapperdispatchMessageHubBackedObjectConnectionjava at orggradleinternalremoteinternalhubMessageHubBackedObjectConnectionDispatchWrapperdispatchMessageHubBackedObjectConnectionjava at orggradleinternalremoteinternalhubMessageHubHandlerrunMessageHubjava at orggradleinternalconcurrentExecutorPolicyCatchAndRecordFailuresonExecuteExecutorPolicyjava at orggradleinternalconcurrentManagedExecutorImpl runManagedExecutorImpljava at javabasejavautilconcurrentThreadPoolExecutorrunWorkerThreadPoolExecutorjava at javabasejavautilconcurrentThreadPoolExecutorWorkerrunThreadPoolExecutorjava at orggradleinternalconcurrentThreadFactoryImplManagedThreadRunnablerunThreadFactoryImpljava at javabasejavalangThreadrunThreadjava YOUR STACK TRACE ENDS HERE Minimal reproducible code the gist of this issue kotlin GRADLE DEFINITIONS plugins id orgjetbrainskotlinjvm version group comtest version SNAPSHOT repositories mavenCentral dependencies implementation orgjetbrainskotlinkotlinstdlibjdk testImplementation orgjunitjupiterjunitjupiterapi testImplementation iomockkmockk testRuntimeOnly orgjunitjupiterjunitjupiterengine compileKotlin kotlinOptionsjvmTarget compileTestKotlin kotlinOptionsjvmTarget test useJUnitPlatform YOUR CODE STARTS HERE import iomockkevery import iomockkimplannotationsMockK import iomockkjunit MockKExtension import orgjunitjupiterapiTest import orgjunitjupiterapiextensionExtendWith class MyClassToMock fun myFunctionstring String enum MyEnum String return string enumname enum class MyEnum A override fun stringValue String return AAA B override fun stringValue String return BBB abstract fun stringValue String ExtendWithMockKExtensionclass class Test MockK lateinit var classToMock MyClassToMock Test fun testFunction every classToMockmyFunctionany any returns my string YOUR CODE ENDS HERE Prerequisites x I am running the latest version x I checked the documentation and found no answer x I checked to make sure that this issue has not already been filed Expected Behavior I expect recordPrivateCalls to work with inheritance ie when the private method is in a parent class Current Behavior It doesnt the private method call is not found when verifying Failure Information for bugs Here is a complete minimal test case showing the issue The first test passes but the second doesnt which I find surprising import iomockkspyk import iomockkverify import orgjunitjupiterapiTest class RecordPrivateCallTest Test fun recordPrivateCalls should work on Parent val spy spykParent recordPrivateCalls true spyfoo verify spy bar Test fun recordPrivateCalls should work on Child val spy spykChild recordPrivateCalls true spyfoo verify spy bar open class Parent fun foo bar private fun bar class Child Parent Context Please provide any relevant information about your setup This is important in case the issue is not reproducible except for under certain conditions MockK version OS macOS Catalina Kotlin version JDK version JUnit version Type of test unit test Stack trace cant find function bar for dynamic call iomockkMockKException cant find function bar for dynamic call at iomockkInternalPlatformDsldynamicCallInternalPlatformDslkt at iomockkMockKMatcherScopeDynamicCallinvokeAPIkt at comninjasquadspringmockkRecordPrivateCallTestrecordPrivateCalls should work on Child invokeRecordPrivateCallTestkt at comninjasquadspringmockkRecordPrivateCallTestrecordPrivateCalls should work on Child invokeRecordPrivateCallTestkt at iomockkimplevalRecordedBlockEvaluatorrecordblock invokeRecordedBlockEvaluatorkt at iomockkimplevalRecordedBlockEvaluatorenhanceWithNPERethrow invokeRecordedBlockEvaluatorkt at iomockkimplrecordingJvmAutoHinterautoHintJvmAutoHinterkt at iomockkimplevalRecordedBlockEvaluatorrecordRecordedBlockEvaluatorkt at iomockkimplevalVerifyBlockEvaluatorverifyVerifyBlockEvaluatorkt at iomockkMockKDslinternalVerifyAPIkt at iomockkMockKKtverifyMockKkt at iomockkMockKKtverifydefaultMockKkt at comninjasquadspringmockkRecordPrivateCallTestrecordPrivateCalls should work on ChildRecordPrivateCallTestkt at sunreflectNativeMethodAccessorImplinvoke Native Method at sunreflectNativeMethodAccessorImplinvokeNativeMethodAccessorImpljava at sunreflectDelegatingMethodAccessorImplinvokeDelegatingMethodAccessorImpljava at javalangreflectMethodinvokeMethodjava at orgjunitplatformcommonsutilReflectionUtilsinvokeMethodReflectionUtilsjava at orgjunitjupiterengineexecutionMethodInvocationproceedMethodInvocationjava at orgjunitjupiterengineexecutionInvocationInterceptorChainValidatingInvocationproceedInvocationInterceptorChainjava at orgjunitjupiterengineextensionTimeoutExtensioninterceptTimeoutExtensionjava at orgjunitjupiterengineextensionTimeoutExtensioninterceptTestableMethodTimeoutExtensionjava at orgjunitjupiterengineextensionTimeoutExtensioninterceptTestMethodTimeoutExtensionjava at orgjunitjupiterengineexecutionExecutableInvokerReflectiveInterceptorCalllambdaofVoidMethod ExecutableInvokerjava at orgjunitjupiterengineexecutionExecutableInvokerlambdainvoke ExecutableInvokerjava at orgjunitjupiterengineexecutionInvocationInterceptorChainInterceptedInvocationproceedInvocationInterceptorChainjava at orgjunitjupiterengineexecutionInvocationInterceptorChainproceedInvocationInterceptorChainjava at orgjunitjupiterengineexecutionInvocationInterceptorChainchainAndInvokeInvocationInterceptorChainjava at orgjunitjupiterengineexecutionInvocationInterceptorChaininvokeInvocationInterceptorChainjava at orgjunitjupiterengineexecutionExecutableInvokerinvokeExecutableInvokerjava at orgjunitjupiterengineexecutionExecutableInvokerinvokeExecutableInvokerjava at orgjunitjupiterenginedescriptorTestMethodTestDescriptorlambdainvokeTestMethod TestMethodTestDescriptorjava at orgjunitplatformenginesupporthierarchicalThrowableCollectorexecuteThrowableCollectorjava at orgjunitjupiterenginedescriptorTestMethodTestDescriptorinvokeTestMethodTestMethodTestDescriptorjava at orgjunitjupiterenginedescriptorTestMethodTestDescriptorexecuteTestMethodTestDescriptorjava at orgjunitjupiterenginedescriptorTestMethodTestDescriptorexecuteTestMethodTestDescriptorjava at orgjunitplatformenginesupporthierarchicalNodeTestTasklambdaexecuteRecursively NodeTestTaskjava at orgjunitplatformenginesupporthierarchicalThrowableCollectorexecuteThrowableCollectorjava at orgjunitplatformenginesupporthierarchicalNodeTestTasklambdaexecuteRecursively NodeTestTaskjava at orgjunitplatformenginesupporthierarchicalNodearoundNodejava at orgjunitplatformenginesupporthierarchicalNodeTestTasklambdaexecuteRecursively NodeTestTaskjava at orgjunitplatformenginesupporthierarchicalThrowableCollectorexecuteThrowableCollectorjava at orgjunitplatformenginesupporthierarchicalNodeTestTaskexecuteRecursivelyNodeTestTaskjava at orgjunitplatformenginesupporthierarchicalNodeTestTaskexecuteNodeTestTaskjava at javautilArrayListforEachArrayListjava at orgjunitplatformenginesupporthierarchicalSameThreadHierarchicalTestExecutorServiceinvokeAllSameThreadHierarchicalTestExecutorServicejava at orgjunitplatformenginesupporthierarchicalNodeTestTasklambdaexecuteRecursively NodeTestTaskjava at orgjunitplatformenginesupporthierarchicalThrowableCollectorexecuteThrowableCollectorjava at orgjunitplatformenginesupporthierarchicalNodeTestTasklambdaexecuteRecursively NodeTestTaskjava at orgjunitplatformenginesupporthierarchicalNodearoundNodejava at orgjunitplatformenginesupporthierarchicalNodeTestTasklambdaexecuteRecursively NodeTestTaskjava at orgjunitplatformenginesupporthierarchicalThrowableCollectorexecuteThrowableCollectorjava at orgjunitplatformenginesupporthierarchicalNodeTestTaskexecuteRecursivelyNodeTestTaskjava at orgjunitplatformenginesupporthierarchicalNodeTestTaskexecuteNodeTestTaskjava at javautilArrayListforEachArrayListjava at orgjunitplatformenginesupporthierarchicalSameThreadHierarchicalTestExecutorServiceinvokeAllSameThreadHierarchicalTestExecutorServicejava at orgjunitplatformenginesupporthierarchicalNodeTestTasklambdaexecuteRecursively NodeTestTaskjava at orgjunitplatformenginesupporthierarchicalThrowableCollectorexecuteThrowableCollectorjava at orgjunitplatformenginesupporthierarchicalNodeTestTasklambdaexecuteRecursively NodeTestTaskjava at orgjunitplatformenginesupporthierarchicalNodearoundNodejava at orgjunitplatformenginesupporthierarchicalNodeTestTasklambdaexecuteRecursively NodeTestTaskjava at orgjunitplatformenginesupporthierarchicalThrowableCollectorexecuteThrowableCollectorjava at orgjunitplatformenginesupporthierarchicalNodeTestTaskexecuteRecursivelyNodeTestTaskjava at orgjunitplatformenginesupporthierarchicalNodeTestTaskexecuteNodeTestTaskjava at orgjunitplatformenginesupporthierarchicalSameThreadHierarchicalTestExecutorServicesubmitSameThreadHierarchicalTestExecutorServicejava at orgjunitplatformenginesupporthierarchicalHierarchicalTestExecutorexecuteHierarchicalTestExecutorjava at orgjunitplatformenginesupporthierarchicalHierarchicalTestEngineexecuteHierarchicalTestEnginejava at orgjunitplatformlaunchercoreDefaultLauncherexecuteDefaultLauncherjava at orgjunitplatformlaunchercoreDefaultLauncherlambdaexecute DefaultLauncherjava at orgjunitplatformlaunchercoreDefaultLauncherwithInterceptedStreamsDefaultLauncherjava at orgjunitplatformlaunchercoreDefaultLauncherexecuteDefaultLauncherjava at orgjunitplatformlaunchercoreDefaultLauncherexecuteDefaultLauncherjava at orggradleapiinternaltaskstestingjunitplatformJUnitPlatformTestClassProcessorCollectAllTestClassesExecutorprocessAllTestClassesJUnitPlatformTestClassProcessorjava at orggradleapiinternaltaskstestingjunitplatformJUnitPlatformTestClassProcessorCollectAllTestClassesExecutoraccess JUnitPlatformTestClassProcessorjava at orggradleapiinternaltaskstestingjunitplatformJUnitPlatformTestClassProcessorstopJUnitPlatformTestClassProcessorjava at orggradleapiinternaltaskstestingSuiteTestClassProcessorstopSuiteTestClassProcessorjava at sunreflectNativeMethodAccessorImplinvoke Native Method at sunreflectNativeMethodAccessorImplinvokeNativeMethodAccessorImpljava at sunreflectDelegatingMethodAccessorImplinvokeDelegatingMethodAccessorImpljava at javalangreflectMethodinvokeMethodjava at orggradleinternaldispatchReflectionDispatchdispatchReflectionDispatchjava at orggradleinternaldispatchReflectionDispatchdispatchReflectionDispatchjava at orggradleinternaldispatchContextClassLoaderDispatchdispatchContextClassLoaderDispatchjava at orggradleinternaldispatchProxyDispatchAdapterDispatchingInvocationHandlerinvokeProxyDispatchAdapterjava at comsunproxyProxy stopUnknown Source at orggradleapiinternaltaskstestingworkerTestWorkerstopTestWorkerjava at sunreflectNativeMethodAccessorImplinvoke Native Method at sunreflectNativeMethodAccessorImplinvokeNativeMethodAccessorImpljava at sunreflectDelegatingMethodAccessorImplinvokeDelegatingMethodAccessorImpljava at javalangreflectMethodinvokeMethodjava at orggradleinternaldispatchReflectionDispatchdispatchReflectionDispatchjava at orggradleinternaldispatchReflectionDispatchdispatchReflectionDispatchjava at orggradleinternalremoteinternalhubMessageHubBackedObjectConnectionDispatchWrapperdispatchMessageHubBackedObjectConnectionjava at orggradleinternalremoteinternalhubMessageHubBackedObjectConnectionDispatchWrapperdispatchMessageHubBackedObjectConnectionjava at orggradleinternalremoteinternalhubMessageHubHandlerrunMessageHubjava at orggradleinternalconcurrentExecutorPolicyCatchAndRecordFailuresonExecuteExecutorPolicyjava at orggradleinternalconcurrentManagedExecutorImpl runManagedExecutorImpljava at javautilconcurrentThreadPoolExecutorrunWorkerThreadPoolExecutorjava at javautilconcurrentThreadPoolExecutorWorkerrunThreadPoolExecutorjava at orggradleinternalconcurrentThreadFactoryImplManagedThreadRunnablerunThreadFactoryImpljava at javalangThreadrunThreadjava Expected Behavior For full support of annotation frameworks like HK I would expect that mockk injects all properties that are annotated with Inject calls all methods that are annotated with PostConstruct after injecting all properties and calls all methods that are annotated with PreDestroy after a test Example class under test kotlin import javaxannotationPostConstruct import javaxannotationPreDestroy import javaxinjectInject class MyBean Inject private lateinit var resource Resource private lateinit var configuration Configuration PostConstruct private fun load configuration resourceload fun run printlnconfiguration PreDestroy private fun free configurationclose Example test class kotlin import iomockkimplannotationsInjectMockKs import iomockkimplannotationsMockK import orgjunitjupiterapiTest ExtendWithMockKExtensionclass class MyBeanTest MockK private lateinit var resource Resource InjectMockKs private var bean MyBean Test fun test beanrun Current Behavior Currently mockk injects all properties that are annotated with Inject but calls neither PostConstruct methods nor PreDestroy methods Therefor the run method will throw an UninitializedPropertyAccessException in the test above Please update bytebuddy to because this fixes a problem with JVMs that have spaces in their name eg the JVM that comes with IntelliJ on macOS For detailed information pls see the solved bytebuddy issue Most of the comments in this issue refer to mockito but I have the exact same problem with mockk and was able to track it down to the same rootcause in bytebuddy Just be aware about usual MockK support pattern Tickets are checked from time to time replied discussed labeled etc But real fixes are applied in a monthtwo month period in a bunch If you think this is unacceptable go on join the project change the world Please remove sections wisely Below information is actually needed to make all the process of fixing faster Choose main points Dont blindly follow this as a set of rules Dont waste much time Usually the main thing is to have a good reproducible minimal code Prerequisites Please answer the following questions for yourself before submitting an issue YES I am running the latest version YES I checked the documentation and found no answer YES I checked to make sure that this issue has not already been filed Expected Behavior Test should not fail with iomockkMockKException Missing calls inside every block exception Extension method should be mocked Current Behavior When trying to mock one of the extensions defined in kotlinioIOSteamskt test fails with iomockkMockKException Missing calls inside every block exception Failure Information for bugs Kotlin version mockk version junit version Steps to Reproduce kotlin RunWithMockitoJUnitRunnerclass class ExampleTest val mockInputStream mockkInputStream val mockReader mockkBufferedReader Test fun this is just example test mockkStatickotlinioByteStreamsKt every mockInputStreambufferedReader returns mockReader Context Please provide any relevant information about your setup This is important in case the issue is not reproducible except for under certain conditions MockK version OS MacOS Catalina Kotlin version JDK version JUnit version Type of test unit test Failure Logs Please include any relevant log snippets or files here Stack trace iomockkMockKException Missing calls inside every block at iomockkimplrecordingstatesStubbingStatecheckMissingCallsStubbingStatekt at iomockkimplrecordingstatesStubbingStaterecordingDoneStubbingStatekt at iomockkimplrecordingCommonCallRecorderdoneCommonCallRecorderkt at iomockkimplevalRecordedBlockEvaluatorrecordRecordedBlockEvaluatorkt at iomockkimplevalEveryBlockEvaluatoreveryEveryBlockEvaluatorkt at iomockkMockKDslinternalEveryAPIkt at iomockkMockKKteveryMockKkt at comexampleExampleTestthis is just example testExampleTestkt at sunreflectNativeMethodAccessorImplinvoke Native Method at sunreflectNativeMethodAccessorImplinvokeNativeMethodAccessorImpljava at sunreflectDelegatingMethodAccessorImplinvokeDelegatingMethodAccessorImpljava at javalangreflectMethodinvokeMethodjava at orgjunitrunnersmodelFrameworkMethod runReflectiveCallFrameworkMethodjava at orgjunitinternalrunnersmodelReflectiveCallablerunReflectiveCallablejava at orgjunitrunnersmodelFrameworkMethodinvokeExplosivelyFrameworkMethodjava at orgjunitinternalrunnersstatementsInvokeMethodevaluateInvokeMethodjava at orgjunitrunnersParentRunnerrunLeafParentRunnerjava at orgjunitrunnersBlockJUnit ClassRunnerrunChildBlockJUnit ClassRunnerjava at orgjunitrunnersBlockJUnit ClassRunnerrunChildBlockJUnit ClassRunnerjava at orgjunitrunnersParentRunner runParentRunnerjava at orgjunitrunnersParentRunner scheduleParentRunnerjava at orgjunitrunnersParentRunnerrunChildrenParentRunnerjava at orgjunitrunnersParentRunneraccess ParentRunnerjava at orgjunitrunnersParentRunner evaluateParentRunnerjava at orgjunitrunnersParentRunnerrunParentRunnerjava at orgmockitointernalrunnersDefaultInternalRunner runDefaultInternalRunnerjava at orgmockitointernalrunnersDefaultInternalRunnerrunDefaultInternalRunnerjava at orgmockitointernalrunnersStrictRunnerrunStrictRunnerjava at orgmockitojunitMockitoJUnitRunnerrunMockitoJUnitRunnerjava at orgjunitrunnerJUnitCorerunJUnitCorejava at comintellijjunit JUnit IdeaTestRunnerstartRunnerWithArgsJUnit IdeaTestRunnerjava at comintellijrtexecutionjunitIdeaTestRunnerRepeaterstartRunnerWithArgsIdeaTestRunnerjava at comintellijrtexecutionjunitJUnitStarterprepareStreamsAndStartJUnitStarterjava at comintellijrtexecutionjunitJUnitStartermainJUnitStarterjava Mockk produces a warning when running on Java It still seems to work in my small test but Im not sure if there are any other implications edit Ive discovered it fails on Static mocks Added details below Prerequisites Please answer the following questions for yourself before submitting an issue x I am running the latest version x I checked the documentation and found no answer x I checked to make sure that this issue has not already been filed Expected Behavior Mockk works with JDK without warnings Current Behavior WARNING Failed to transform class javalangObject javalangIllegalArgumentException Unsupported class file major version Failure Information for bugs I created a simple test file below which runs fine on JDK but produces the above warning on JDK Context MockK version OS OSX Kotlin version JDK version no warning warning JUnit version NA Type of test Simple test file Stack trace Not mockk OK true Java HotSpotTM Bit Server VM warning Sharing is only supported for boot loader classes because bootstrap classpath has been appended Dec PM iomockkimpllogJULLogger warn WARNING Failed to transform class javalangObject javalangIllegalArgumentException Unsupported class file major version at netbytebuddyjarasmClassReaderinitClassReaderjava at netbytebuddyjarasmClassReaderinitClassReaderjava at netbytebuddyjarasmClassReaderinitClassReaderjava at netbytebuddyutilityOpenedClassReaderofOpenedClassReaderjava at netbytebuddydynamicscaffoldTypeWriterDefaultForInliningcreateTypeWriterjava at netbytebuddydynamicscaffoldTypeWriterDefaultmakeTypeWriterjava at netbytebuddydynamicscaffoldinlineRedefinitionDynamicTypeBuildermakeRedefinitionDynamicTypeBuilderjava at netbytebuddydynamicscaffoldinlineAbstractInliningDynamicTypeBuildermakeAbstractInliningDynamicTypeBuilderjava at netbytebuddydynamicDynamicTypeBuilderAbstractBasemakeDynamicTypejava at iomockkproxyjvmtransformationInliningClassTransformertransformInliningClassTransformerkt at javainstrumentjavalanginstrumentClassFileTransformertransformClassFileTransformerjava at javainstrumentsuninstrumentTransformerManagertransformTransformerManagerjava at javainstrumentsuninstrumentInstrumentationImpltransformInstrumentationImpljava at javainstrumentsuninstrumentInstrumentationImplretransformClasses Native Method at javainstrumentsuninstrumentInstrumentationImplretransformClassesInstrumentationImpljava at iomockkproxyjvmtransformationJvmInlineInstrumentationretransformJvmInlineInstrumentationkt at iomockkproxycommontransformationRetransformInlineInstrumnetationexecute invokeRetransformInlineInstrumnetationkt at iomockkproxycommontransformationRetransformInlineInstrumnetationexecute invokeRetransformInlineInstrumnetationkt at iomockkproxycommontransformationClassTransformationSpecMapapplyTransformationClassTransformationSpecMapkt at iomockkproxycommontransformationRetransformInlineInstrumnetationexecuteRetransformInlineInstrumnetationkt at iomockkproxyjvmProxyMakerinlineProxyMakerkt at iomockkproxyjvmProxyMakerproxyProxyMakerkt at iomockkimplinstantiationJvmMockFactorynewProxyJvmMockFactorykt at iomockkimplinstantiationAbstractMockFactorynewProxydefaultAbstractMockFactorykt at iomockkimplinstantiationAbstractMockFactorymockkAbstractMockFactorykt at MockkTestKtmainMockkTestkt at MockkTestKtmainMockkTestkt Mockk OK true Done Process finished with exit code Minimal reproducible code the gist of this issue GRADLE DEFINITIONS dependencies implementation orgjetbrainskotlinkotlinstdlib implementation iomockkmockk kotlin class MockkMeval foo String fun main val notMock MockkMefoo printlnNot mockk OK notMockfoo foo val mockk MockkMe iomockkmockk iomockkevery mockkfoo returns bar printlnMockk OK mockkfoo bar printlnDone Version with static mock and output kotlin import iomockkevery import iomockkmockkStatic import javatimeInstant fun main val epoch InstantEPOCH mockkStaticInstantclass every Instantnow returns epoch printlnStatic Mockk OK Instantnow epoch Java HotSpotTM Bit Server VM warning Sharing is only supported for boot loader classes because bootstrap classpath has been appended Dec PM iomockkimpllogJULLogger warn WARNING Failed to transform class javatimeInstant javalangIllegalArgumentException Unsupported class file major version at netbytebuddyjarasmClassReaderinitClassReaderjava at netbytebuddyjarasmClassReaderinitClassReaderjava at netbytebuddyjarasmClassReaderinitClassReaderjava at netbytebuddyutilityOpenedClassReaderofOpenedClassReaderjava at netbytebuddydynamicscaffoldTypeWriterDefaultForInliningcreateTypeWriterjava at netbytebuddydynamicscaffoldTypeWriterDefaultmakeTypeWriterjava at netbytebuddydynamicscaffoldinlineRedefinitionDynamicTypeBuildermakeRedefinitionDynamicTypeBuilderjava at netbytebuddydynamicscaffoldinlineAbstractInliningDynamicTypeBuildermakeAbstractInliningDynamicTypeBuilderjava at netbytebuddydynamicDynamicTypeBuilderAbstractBasemakeDynamicTypejava at iomockkproxyjvmtransformationInliningClassTransformertransformInliningClassTransformerkt at javainstrumentjavalanginstrumentClassFileTransformertransformClassFileTransformerjava at javainstrumentsuninstrumentTransformerManagertransformTransformerManagerjava at javainstrumentsuninstrumentInstrumentationImpltransformInstrumentationImpljava at javainstrumentsuninstrumentInstrumentationImplretransformClasses Native Method at javainstrumentsuninstrumentInstrumentationImplretransformClassesInstrumentationImpljava at iomockkproxyjvmtransformationJvmInlineInstrumentationretransformJvmInlineInstrumentationkt at iomockkproxycommontransformationRetransformInlineInstrumnetationexecute invokeRetransformInlineInstrumnetationkt at iomockkproxycommontransformationRetransformInlineInstrumnetationexecute invokeRetransformInlineInstrumnetationkt at iomockkproxycommontransformationClassTransformationSpecMapapplyTransformationClassTransformationSpecMapkt at iomockkproxycommontransformationRetransformInlineInstrumnetationexecuteRetransformInlineInstrumnetationkt at iomockkproxyjvmStaticProxyMakerstaticProxyStaticProxyMakerkt at iomockkimplinstantiationJvmStaticMockFactorystaticMockkJvmStaticMockFactorykt at MockkTestKtmainMockkTestkt at MockkTestKtmainMockkTestkt Exception in thread main iomockkMockKException Missing calls inside every block at iomockkimplrecordingstatesStubbingStatecheckMissingCallsStubbingStatekt at iomockkimplrecordingstatesStubbingStaterecordingDoneStubbingStatekt at iomockkimplrecordingCommonCallRecorderdoneCommonCallRecorderkt at iomockkimplevalRecordedBlockEvaluatorrecordRecordedBlockEvaluatorkt at iomockkimplevalEveryBlockEvaluatoreveryEveryBlockEvaluatorkt at iomockkMockKDslinternalEveryAPIkt at iomockkMockKKteveryMockKkt at MockkTestKtmainMockkTestkt at MockkTestKtmainMockkTestkt Process finished with exit code Above test also works fine on Java Prerequisites Please answer the following questions for yourself before submitting an issue x I am running the latest version x I checked the documentation and found no answer x I checked to make sure that this issue has not already been filed Expected Behavior The test should pass Current Behavior Obtain mutableLiveData value throws a javalangClassCastException javalangObject cannot be cast to javalangString Context If you try to InjectMockKs with MutableLiveData dependency is impossible to obtain the mock value in your ClassTest This behaviour is used especially when you use DataSourceFactory you can check the class here Moreover the same sample with Mockito works correctly MockK version OS OS X Kotlin version JDK version JUnit version Type of test unit test Stack trace javalangClassCastException javalangObject cannot be cast to javalangString at comvmadalindynamicfeaturescharacterslistuilistpagingSampleTestClassTestdoSomethingFunTestkt at comvmadalindynamicfeaturescharacterslistuilistpagingSampleTesttestFunTestkt Minimal reproducible code the gist of this issue kotlin RelaxedMockK private lateinit var dependency MutableLiveDataString InjectMockKs var classTest ClassTest ClassTest Before fun setup MockKAnnotationsinitthis Test fun test classTestdoSomething verify dependencyvalue class ClassTest lateinit var dependency MutableLiveDataString fun doSomething String return dependencyvalue 