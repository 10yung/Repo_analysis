I have successfully integrated the ROR plugin with LDAP below is the settings but after removing the binddn and bindpassword I cannot log in anymore readonlyrest responseifreqforbidden Forbidden by ReadonlyREST ES plugin accesscontrolrules name Require HTTP Basic Auth type allow authkey userpassword name IT kibanaaccess admin ldapauth name ldap groups IT type allow ldaps name ldap host port binddn CNuserOUUsersOUMalaysiaDCMYDCexampleDClocal bindpassword password sslenabled false ssltrustallcerts true searchuserbaseDN OUUsersOUMalaysiaDCMYDCexampleDClocal searchgroupsbaseDN OUMalaysiaDCMYDCexampleDClocal useridattribute samAccountName uniquememberattribute member connectionpoolsize connectiontimeoutinsec requesttimeoutinsec cachettlinsec groupsearchfilter objectclassgroup Is there anything else to configure for LDAP anonymous authentication From the examples it says skip for anonymous bind for the bind fields New Options in configuration for custom truststore file and password Installing the readonlyrest plugin and running a default cluster using the official elasticsearch operator ECK doesnt work as requests made by the operator are rejected by ROR Asking around in the elastic forums I got to know that the operator uses two users in the file realm namely elasticinternal and elasticinternalkeystore see here This is a complete blocker for us as I couldnt find any way in ROR to allow requests from particular file realm users Also we love the awesome support for JWT based auth and would really like to continue using it Any help on this would be greatly appreciated It would be nice to have the ability to configure security access for each Kibana space none no access to one Kibana space read read access to one Kibana space all all access to one Kibana space All that associated to one role in readonlyrestyml Hi I am using readonlyrest ES and kibana plugins I have configured it to authenticate ES from my active directory When trying to delegate access to groups I am quite unsuccessful Access is provided to all users in LDAP tree for ES Also in kibana dashboard following error shows up Could not login username XXXXX authHeaders hiddenApps sid a ee b bc a ae ce expiresAt when trying to login Following is my readonlyrestyml readonlyrest responseifreqforbidden Access Forbidden by readonlyrest accesscontrolrules name full access for backend group type allow Optional defaults to allow will omit from now on ldapauthentication name ldap ldap name from below ldaps section groups BackendDev group within ouunixGroupsdcexampledccom verbosity error indices actions name kibana access for backend group type allow Optional defaults to allow will omit from now on ldapauthentication name ldap ldap name from below ldaps section groups group within ouGroupsdcexampledccom verbosity error kibanaaccess admin kibanaindex kibana indices ldaps name ldap host com port optional default sslenabled false optional default true ssltrustallcerts true optional default false binddn CNAdministratorCNUsersDCDCio optional skip for anonymous bind bindpassword optional skip for anonymous bind searchuserbaseDN OUunixUsersDCDCio useridattribute sAMAccountName optional default uid searchgroupsbaseDN OUunixGroupsDCDCio uniquememberattribute member optional default uniqueMember connectionpoolsize optional default connectiontimeoutinsec optional default requesttimeoutinsec optional default cachettlinsec optional default cache disabled groupsearchfilter objectClassgroupCN optional default cn groupnameattribute cn Any help will be greatly appreciated Thanks in advance Hi Im trying to use multitenancy in readonlyrest So I followed this document I did exactly the same But unfortunately I could only log in as kibanakibana and not as any other users Kibana Error log error readonlyrestkbn got an error Forbidden for path log info readonlyrestkbn try extract credentials from JSON log info readonlyrestkbn try extract credentials from JSON log info readonlyrestkbn try extract credentials from JSON log error ror identity error undefined Elasticsearch Error T INFO tbraACL vEtFfiK FORBIDDEN by default req ID TYPRRAdminRequest CGRNA USRsalesadminusr BRSfalse KDXnull ACTclusteradminrradminrefreshsettings OA DA IDXNA METGET PTHreadonlyrestmetadatacurrentuser CNTNA HDRauthorizationOMITTED Connectionclose contentlength Hostlocalhost HIS KIBANASRV authkeyfalse ADMINSALES authkeyfalse ror version es version configuration nodes cluster I have a three nodes cluster running in kubernetes When I run an image with ror installed a NullPointerException is throwed by nodes and the cluster is instable I tried with a minimal configuration readonlyrestyml accesscontrolrules name ALL MONITOR type allow actions clustermonitor indicesadminget stack trace javautilconcurrentCompletionException javalangNullPointerException at javabasejavautilconcurrentCompletableFutureencodeThrowableCompletableFuturejava at javabasejavautilconcurrentCompletableFutureuniApplyNowCompletableFuturejava at javabasejavautilconcurrentCompletableFutureuniApplyStageCompletableFuturejava at javabasejavautilconcurrentCompletableFuturethenApplyCompletableFuturejava at techbeshuroraclACLcheckACLjava at techbeshuroresIndexLevelActionFilterhandleRequestIndexLevelActionFilterjava at techbeshuroresIndexLevelActionFilterlambdaapply IndexLevelActionFilterjava at javabasejavasecurityAccessControllerdoPrivilegedNative Method at techbeshuroresIndexLevelActionFilterapplyIndexLevelActionFilterjava at orgelasticsearchactionsupportTransportActionRequestFilterChainproceedTransportActionjava at orgelasticsearchactionsupportTransportActionexecuteTransportActionjava at orgelasticsearchactionsupportTransportActionexecuteTransportActionjava at orgelasticsearchclientnodeNodeClientexecuteLocallyNodeClientjava at orgelasticsearchclientnodeNodeClientdoExecuteNodeClientjava at orgelasticsearchclientsupportAbstractClientexecuteAbstractClientjava at orgelasticsearchclientsupportAbstractClientClusterAdminexecuteAbstractClientjava at orgelasticsearchclientsupportAbstractClientClusterAdminhealthAbstractClientjava at orgelasticsearchrestactionadminclusterRestClusterHealthActionlambdaprepareRequest RestClusterHealthActionjava at orgelasticsearchrestBaseRestHandlerhandleRequestBaseRestHandlerjava at techbeshuroresReadonlyRestPluginlambdanull ReadonlyRestPluginjava at orgelasticsearchrestRestControllerdispatchRequestRestControllerjava at orgelasticsearchrestRestControllertryAllHandlersRestControllerjava at orgelasticsearchrestRestControllerdispatchRequestRestControllerjava at orgelasticsearchhttpnetty Netty HttpServerTransportdispatchRequestNetty HttpServerTransportjava at orgelasticsearchhttpnetty Netty HttpRequestHandlerchannelRead Netty HttpRequestHandlerjava at ionettychannelSimpleChannelInboundHandlerchannelReadSimpleChannelInboundHandlerjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextfireChannelReadAbstractChannelHandlerContextjava at orgelasticsearchhttpnetty pipeliningHttpPipeliningHandlerchannelReadHttpPipeliningHandlerjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextfireChannelReadAbstractChannelHandlerContextjava at ionettyhandlercodecMessageToMessageDecoderchannelReadMessageToMessageDecoderjava at ionettyhandlercodecMessageToMessageCodecchannelReadMessageToMessageCodecjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextfireChannelReadAbstractChannelHandlerContextjava at ionettyhandlercodecMessageToMessageDecoderchannelReadMessageToMessageDecoderjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextfireChannelReadAbstractChannelHandlerContextjava at ionettyhandlercodecMessageToMessageDecoderchannelReadMessageToMessageDecoderjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextfireChannelReadAbstractChannelHandlerContextjava at ionettyhandlercodecByteToMessageDecoderfireChannelReadByteToMessageDecoderjava at ionettyhandlercodecByteToMessageDecoderchannelReadByteToMessageDecoderjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextfireChannelReadAbstractChannelHandlerContextjava at ionettyhandlertimeoutIdleStateHandlerchannelReadIdleStateHandlerjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextfireChannelReadAbstractChannelHandlerContextjava at ionettychannelChannelInboundHandlerAdapterchannelReadChannelInboundHandlerAdapterjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextfireChannelReadAbstractChannelHandlerContextjava at ionettychannelDefaultChannelPipelineHeadContextchannelReadDefaultChannelPipelinejava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelDefaultChannelPipelinefireChannelReadDefaultChannelPipelinejava at ionettychannelnioAbstractNioByteChannelNioByteUnsafereadAbstractNioByteChanneljava at ionettychannelnioNioEventLoopprocessSelectedKeyNioEventLoopjava at ionettychannelnioNioEventLoopprocessSelectedKeysPlainNioEventLoopjava at ionettychannelnioNioEventLoopprocessSelectedKeysNioEventLoopjava at ionettychannelnioNioEventLooprunNioEventLoopjava at ionettyutilconcurrentSingleThreadEventExecutor runSingleThreadEventExecutorjava at javabasejavalangThreadrunThreadjava Caused by javalangNullPointerException at techbeshuroresRequestInfoextractRemoteAddressRequestInfojava at techbeshuroraclACL getRemoteAddressACLjava at techbeshurorrequestcontextRequestContexttoStringRequestContextjava at techbeshurorrequestcontextRequestContexttoStringRequestContextjava at javabasejavalangStringvalueOfStringjava at javabasejavalangStringBuilderappendStringBuilderjava at techbeshuroraclACLdoLogACLjava at techbeshuroraclACLlambdacheck ACLjava at javabasejavautilconcurrentCompletableFutureuniApplyNowCompletableFuturejava more javautilconcurrentCompletionException javalangNoClassDefFoundError javaxxmlbindDatatypeConverter This seems similar if not identical to Im using the docker image at natewarrelasticsearchoss with the following Dockerfile FROM dockerelasticcoelasticsearchelasticsearchoss COPY plugins installplugins RUN elasticsearchplugin install batch repositorys RUN for plugin in ls installplugins do elasticsearchplugin install batch fileinstallpluginsplugin done rm rf installplugins readonlyrest es is the only plugin installed This is the official OSS elasticsearch docker image modified with the readonlyrest plugin This is clearly due to Java I wonder if there some form of this that could be included herein Or support for jjwt Hello Im trying to use this plugin to authorize requests behind an AWS ALB Actually this loadbalancer adds an XAmznOidcData header containing an JWT token Unfortunately I cant make this work I think it should work because you mention Google Cloud IAP signed headers that works exactly the same One can not access the JWT secret or what you call signaturekey The best AWS ALB can provide as GCP IAP is public keys for the kid see here Like BEGIN PUBLIC KEY MFkwEwYHKoZIzj CAQYIKoZIzj DAQcDQgAEV rLhXWkZ iaHCXiRNzy MPN x NCrp UZX cxhjA bvViURRiyOtbBvah xy npBY ibt jg WDZoKoA END PUBLIC KEY Is this supposed to work If yes how Thanks in advance Hi below is my readonlyrestyml I have a problem that when the user login and use the Dev tool to query Every time even it matches documents the return data is I am sure there are some documents matches but Dev tool didnt return everything readonlyrest enable true responseifreqforbidden Sorry your request is forbidden accesscontrolrules name Basic Kibana Access type allow kibanaaccess ro indices kibanaXForwardedUser groups basicKibanaAccess actions name template filter type allow kibanaaccess rostrict indices kibanatemplate groups templatefilter name Alex login intercept reads and filter groups user group filter bool should match IPV DSTADDR match IPV SRCADDR minimumshouldmatch name test login intercept reads and filter groups user group name howard login intercept reads and filter groups user group filter bool should match IPV DSTADDR match IPV SRCADDR minimumshouldmatch name User login all the rest type allow indices logstashkibanaXForwardedUser name KIBANASRV type allow authkey kibanakibana users username alex proxyauth alex groups user groupbasicKibanaAccesstemplatefilter username test proxyauth test groups user groupbasicKibanaAccesstemplatefilter thank you in advance