Now git tasks are always added to avoid IO on Gradle configuration phase Closes Possibly a duplicate of but Im unable to specify a custom path for the editorconfig This doesnt seem to work ktlint additionalEditorconfigFile filequalityeditorconfig If its of any value I put up a commit so that you can see the full code We would like to have the option to choose the location for reporter which in ktlint is optional but in plugin its hardcoded and not available for setting projectlayoutbuildDirectoryfileprojectprovider reportsktlintthisBaseKtlintCheckTasknamefileExtension Problem Description When running ktlintCheck or ktlintFormat if code style errors are found the error message is not specific when the task fails just mentioning a nonzero exit value after running the JavaExec in the runLint task This can cause some confusion and its not very specific Suggested Solution Output error message when ktlintCheck finds code style errors Ktlint found X code styles errors please fix them before continuing Output error message when ktlintFormat is not able to autocorrect Ktlint found X code styles errors that couldnt be autocorrected please fix them before continuing Currently format tasks works the same as common lint tasks except that they may modify inputs This leads to the several problems with this tasks caching or Possible solutions to this problem actually run lint tasks first dont fail the tasks then run format only on files with files violations Format task is never cacheable but uses lint tasks reports as input something else JLLeitschuh maybe something else comes to your mind how to solve it as well Followup of Plugin should detect if composite builds applies plugin as well and run git hook over filestocommit in such projects Followup of Plugin should detect if buildSrc module applies plugin as well and run git commit hook over files to commit in this module Followup of Current implementation only adds a git hook when git folder is located in Gradle root project folder But quite often project has nongradle top folder Plugin should add a way to define nonstandard git folder location Steps to reproduce Use addKtlintCheckGitPreCommitHook task on windows Commit badly formatted files Ktlint will not check any commited files and will allow you to commit the badly formatted file Issue seems to stem from the fact that git diff generates file names with forward slashes while gradle uses backward slashes When comparing the paths slashes do not match and thus no files get checked As a workaround I have added sed s g to my hook to just replace backslashes in the bash script but proper fix should probably be made ignore slashes when comparing files A bit of context Due to some problems with Android SafeArgs Gradle plugin I had to add additional source sets into feature modules Gradle subprojects sourceSets getByNametestjavasrcDirprojectrootDirappbuildgeneratedsourcenavigationargsdebug Ktlint Issue Now I am experiencing an issue where filter configuration seems to be ignored and checks Args classes that are located inside the generated folder I am not sure if this is related to the above change but reproducible I have added to root buildgradlekts file filter excludegenerated However ktlint gradle still seens to check classes in generated folder UsersigorwojdaStudioProjectsandroidshowcaseappbuildgeneratedsourcenavigationargsdebugcomigorwojdashowcasefeaturealbumpresentationalbumdetailsAlbumDetailFragmentArgskt Since this class is generated by SafeArgs Gradle plugin I have no control on code format and naturally I want it not to be checked by ktlint Also note that after adding the same source set to different modules this file is checked times Reproduce Here is the branch to test it Open this project in Android Studio Build project so AlbumDetailFragmentArgs is generated Build Make project Run ktlint gradlew ktlintcheck Result Task featurefavouritektlintTestSourceSetCheck FAILED UsersigorwojdaStudioProjectsandroidshowcaseappbuildgeneratedsourcenavigationargsdebugcomigorwojdashowcasefeaturealbumpresentationalbumdetailsAlbumDetailFragmentArgskt Unexpected spacing before colonspacingeSetCheck UsersigorwojdaStudioProjectsandroidshowcaseappbuildgeneratedsourcenavigationargsdebugcomigorwojdashowcasefeaturealbumpresentationalbumdetailsAlbumDetailFragmentArgskt Unexpected spacing before colonspacing UsersigorwojdaStudioProjectsandroidshowcaseappbuildgeneratedsourcenavigationargsdebugcomigorwojdashowcasefeaturealbumpresentationalbumdetailsAlbumDetailFragmentArgskt Unexpected spacing before colonspacing checkstyle report written to UsersigorwojdaStudioProjectsandroidshowcasefeaturefavouritebuildreportsktlintktlintTestSourceSetCheckxml Task featureprofilektlintTestSourceSetCheck FAILED UsersigorwojdaStudioProjectsandroidshowcaseappbuildgeneratedsourcenavigationargsdebugcomigorwojdashowcasefeaturealbumpresentationalbumdetailsAlbumDetailFragmentArgskt Unexpected spacing before colonspacing UsersigorwojdaStudioProjectsandroidshowcaseappbuildgeneratedsourcenavigationargsdebugcomigorwojdashowcasefeaturealbumpresentationalbumdetailsAlbumDetailFragmentArgskt Unexpected spacing before colonspacing UsersigorwojdaStudioProjectsandroidshowcaseappbuildgeneratedsourcenavigationargsdebugcomigorwojdashowcasefeaturealbumpresentationalbumdetailsAlbumDetailFragmentArgskt Unexpected spacing before colonspacing checkstyle report written to UsersigorwojdaStudioProjectsandroidshowcasefeatureprofilebuildreportsktlintktlintTestSourceSetCheckxml Task featurealbumktlintTestSourceSetCheck FAILED UsersigorwojdaStudioProjectsandroidshowcaseappbuildgeneratedsourcenavigationargsdebugcomigorwojdashowcasefeaturealbumpresentationalbumdetailsAlbumDetailFragmentArgskt Unexpected spacing before colonspacingeSetCheck UsersigorwojdaStudioProjectsandroidshowcaseappbuildgeneratedsourcenavigationargsdebugcomigorwojdashowcasefeaturealbumpresentationalbumdetailsAlbumDetailFragmentArgskt Unexpected spacing before colonspacing UsersigorwojdaStudioProjectsandroidshowcaseappbuildgeneratedsourcenavigationargsdebugcomigorwojdashowcasefeaturealbumpresentationalbumdetailsAlbumDetailFragmentArgskt Unexpected spacing before colonspacing checkstyle report written to UsersigorwojdaStudioProjectsandroidshowcasefeaturealbumbuildreportsktlintktlintTestSourceSetCheckxml Expected result All checks related to AlbumDetailFragmentArgskt would be ignored due to filter rule Also is this class would not be ignored I would expect no duplicated checks