Running prometheus on some unstable environment we want to reduce flushing intervals doing it with smaller chunks to prevent possible data loss like was mentioned in comments For that case would be good to have possibility for tweaking storagetsdbminblockduration and storagetsdbmaxblockduration from prometheusoperator where not using Thanos compaction As discussed in the binary name lint is too generic if used outside of the docker image So its been renamed to polint I am getting KubeDeploymentReplicasMismatch alert for almost all deployments I think their is something wrong with kubestatemetrics FIRING Prometheus Event Notification Alert critical Description Details alertname KubeDeploymentReplicasMismatch deployment awsalbingresscontroller I am getting for other deployments as well endpoint http instance job kubestatemetrics namespace kubesystem podprometheusoperatorkubestatemetrics f bff dpjvzk prometheus monitoringprometheusoperatoprometheus serviceprometheusoperatorkubestatemetrics severity critical Is anyone facing the same issue Feel free to ask questions in prometheusoperator on Kubernetes Slack What happened Prometheus rule validator allowed Prometheus rule with an incorrect label type to pass the validating webhook validation this caused prometheus operator failing to start after the pod bounced I believe the testSeverity off is causing the type not to be set correctly as a string It came through as a boolean and should have been a string We have seen similar behavior for numbers as well Did you expect to see some different The prometheus rule with invalid type for the label should have been rejected by rule validator How to reproduce it as minimally and precisely as possible Make a prometheus rule with an alert that has labels with non string values Alert that caused this example alert testalert annotations description This is an alert description summary labelstype has an error expr sum by type increasemetrictype myserviceCarrierDevice m labels env TEST prodSeverity warning team serviceteam testSeverity off Environment Openshift Prometheus Operator version prometheusoperatorv Kubernetes version information v b c f Kubernetes cluster kind Openshift Manifests insert manifests relevant to the issue Prometheus Operator Logs E reflectorgo githubcomcoreosprometheusoperatorpkgprometheusoperatorgo Failed to list v PrometheusRule v PrometheusRuleListItems v PrometheusRule v PrometheusRuleSpec v PrometheusRuleSpecGroups v RuleGroup v RuleGroupRules v Rule v RuleLabels ReadString expects or n but found f error found in byte of everityoffa bigger context teamserviceteamtestSeverityoffalerttestalertannota Anything else we need to know Fix Fix broken links and remove specversion in examples of Exposing Prometheus and Alertmanager documentation Feel free to ask questions in prometheusoperator on Kubernetes Slack What happened Read the documentation Documentation have broken links specversion are not up to date NGINX Ingress Controller link is broken NGINX Ingress Controller quickstart is out of date Did you expect to see some different A up to date documentation How to reproduce it as minimally and precisely as possible NA Environment NA Currently when passing configreloadercpumemory values those are used only for limits This PR sets the same values for requests I wasnt sure if the options for the requests should have been passed with separate options but I thought this was a good compromise in the meantime The initial question was brought up in What is missing The path to alert manager config file is hardcoded etcalertmanagerconfigalertmanageryaml and by default there is a volume mount to etcalertmamagerconfig making it impossible to mount something else to this directory Why do we need it I wanted to use Kamus for creating a template configuration file with a place holder for encrypted data something like that yaml receivers name teamdevopslow pagerdutyconfigs servicekey secrets pdteamdevopslow route groupby namespace groupinterval m groupwait s receiver teamdevopslow repeatinterval h routes match namespace default receiver teamdevopslow Everything works the config file is generated correctly and the placeholder is replaced with the decrypted value but I cant mount the config file into alert manager Environment Kubernetes Prometheus Operator version quayiocoreosprometheusoperatorv Anything else we need to know Feel free to ask questions in prometheusoperator on Kubernetes Slack What happened Created a Prometheus object kind Prometheus The operator creates the StatefulSet and associated config objects and service The Prometheus pods associated with the StatefulSet enter a loop where they constantly terminate and restart Did you expect to see some different Expected the Prometheus pods to start successfully and not continually terminate restart How to reproduce it as minimally and precisely as possible Apply the below manifest to the Kubernetes cluster Environment Prometheus Operator version quayiocoreosprometheusoperatorv Kubernetes version information Client Version versionInfoMajor Minor GitVersionv GitCommit b f acc bed d ba dd f e cf GitTreeStateclean BuildDate T Z GoVersiongo Compilergc Platformlinuxamd Server Version versionInfoMajor Minor GitVersionv GitCommit b f acc bed d ba dd f e cf GitTreeStateclean BuildDate T Z GoVersiongo Compilergc Platformlinuxamd Kubernetes cluster kind Kubeadm on vSphere ESXi Manifests apiVersion monitoringcoreoscomv kind Prometheus metadata labels prometheus k s name k s namespace monitoring spec alerting alertmanagers name alertmanagermain namespace monitoring port web baseImage quayioprometheusprometheus externalUrl nodeSelector kubernetesioos linux podMonitorNamespaceSelector podMonitorSelector replicas resources requests memory Mi retention d ruleSelector matchLabels prometheus k s role alertrules securityContext fsGroup runAsNonRoot true runAsUser serviceAccountName prometheusk s serviceMonitorNamespaceSelector serviceMonitorSelector storage volumeClaimTemplate apiVersion v kind PersistentVolumeClaim spec accessModes ReadWriteOnce resources requests storage Gi storageClassName vspherethin version v Prometheus Operator Logs levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s levelinfo ts T Z calleroperatorgo componentprometheusoperator msgsync prometheus keymonitoringk s Anything else we need to know Note that the above logs are the only thing that appears in the logfile after logging the creation of the CRD I tried copying the manifests created by the operator for the StatefulSet Service Configmap and Secrets and applying them manually after removing the ownerReferences and everything worked This leads me to believe the issue is with the prometheusoperator somehow These are the kubelet logs when running under the prometheusoperator I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume config UniqueName kubernetesiosecrete cb d a b dcddce e config pod prometheusk s UID e cb d a b dcddce e I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume configout UniqueName kubernetesioemptydire cb d a b dcddce e configout pod prometheusk s UID e cb d a b dcddce e I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume prometheusk stoken qc j UniqueName kubernetesiosecrete cb d a b dcddce e prometheusk stoken qc j pod prometheusk s UID e cb d a b dcddce e I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume pvce af cae a a df b ad fd UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvce af cae a a df b ad fdvmdk pod prometheusk s UID e cb d a b dcddce e I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume prometheusk srulefiles UniqueName kubernetesioconfigmape cb d a b dcddce e prometheusk srulefiles pod prometheusk s UID e cb d a b dcddce e I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume tlsassets UniqueName kubernetesiosecrete cb d a b dcddce e tlsassets pod prometheusk s UID e cb d a b dcddce e E nestedpendingoperationsgo Operation for kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvce af cae a a df b ad fdvmdk failed No retries permitted until EST m durationBeforeRetry ms Error Volume has not been added to the list of VolumesInUse in the nodes volume status for volume pvce af cae a a df b ad fd UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvce af cae a a df b ad fdvmdk pod prometheusk s UID e cb d a b dcddce e W volumelinuxgo Setting volume ownership for varlibkubeletpodse cb d a b dcddce e volumeskubernetesioemptydirconfigout and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see W volumelinuxgo Setting volume ownership for varlibkubeletpodse cb d a b dcddce e volumeskubernetesioemptydirwrappedprometheusk srulefiles and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see W volumelinuxgo Setting volume ownership for varlibkubeletpodse cb d a b dcddce e volumeskubernetesioconfigmapprometheusk srulefiles and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see W volumelinuxgo Setting volume ownership for varlibkubeletpodse cb d a b dcddce e volumeskubernetesioemptydirwrappedprometheusk stoken qc j and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see W volumelinuxgo Setting volume ownership for varlibkubeletpodse cb d a b dcddce e volumeskubernetesiosecretprometheusk stoken qc j and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see W volumelinuxgo Setting volume ownership for varlibkubeletpodse cb d a b dcddce e volumeskubernetesioemptydirwrappedconfig and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see W volumelinuxgo Setting volume ownership for varlibkubeletpodse cb d a b dcddce e volumeskubernetesiosecretconfig and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see W volumelinuxgo Setting volume ownership for varlibkubeletpodse cb d a b dcddce e volumeskubernetesioemptydirwrappedtlsassets and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see W volumelinuxgo Setting volume ownership for varlibkubeletpodse cb d a b dcddce e volumeskubernetesiosecrettlsassets and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see I reconcilergo operationExecutorUnmountVolume started for volume prometheusk srulefiles UniqueName kubernetesioconfigmape cb d a b dcddce e prometheusk srulefiles pod e cb d a b dcddce e UID e cb d a b dcddce e I reconcilergo operationExecutorUnmountVolume started for volume config UniqueName kubernetesiosecrete cb d a b dcddce e config pod e cb d a b dcddce e UID e cb d a b dcddce e I reconcilergo operationExecutorUnmountVolume started for volume configout UniqueName kubernetesioemptydire cb d a b dcddce e configout pod e cb d a b dcddce e UID e cb d a b dcddce e I reconcilergo operationExecutorUnmountVolume started for volume tlsassets UniqueName kubernetesiosecrete cb d a b dcddce e tlsassets pod e cb d a b dcddce e UID e cb d a b dcddce e I reconcilergo operationExecutorUnmountVolume started for volume prometheusk stoken qc j UniqueName kubernetesiosecrete cb d a b dcddce e prometheusk stoken qc j pod e cb d a b dcddce e UID e cb d a b dcddce e W emptydirgo Warning Failed to clear quota on varlibkubeletpodse cb d a b dcddce e volumeskubernetesioconfigmapprometheusk srulefiles ClearQuota called but quotas disabled I operationgeneratorgo UnmountVolumeTearDown succeeded for volume kubernetesioconfigmape cb d a b dcddce e prometheusk srulefiles OuterVolumeSpecName prometheusk srulefiles pod e cb d a b dcddce e UID e cb d a b dcddce e InnerVolumeSpecName prometheusk srulefiles PluginName kubernetesioconfigmap VolumeGidValue W emptydirgo Warning Failed to clear quota on varlibkubeletpodse cb d a b dcddce e volumeskubernetesioemptydirconfigout ClearQuota called but quotas disabled I operationgeneratorgo UnmountVolumeTearDown succeeded for volume kubernetesioemptydire cb d a b dcddce e configout OuterVolumeSpecName configout pod e cb d a b dcddce e UID e cb d a b dcddce e InnerVolumeSpecName configout PluginName kubernetesioemptydir VolumeGidValue I operationgeneratorgo UnmountVolumeTearDown succeeded for volume kubernetesiosecrete cb d a b dcddce e prometheusk stoken qc j OuterVolumeSpecName prometheusk stoken qc j pod e cb d a b dcddce e UID e cb d a b dcddce e InnerVolumeSpecName prometheusk stoken qc j PluginName kubernetesiosecret VolumeGidValue I operationgeneratorgo UnmountVolumeTearDown succeeded for volume kubernetesiosecrete cb d a b dcddce e config OuterVolumeSpecName config pod e cb d a b dcddce e UID e cb d a b dcddce e InnerVolumeSpecName config PluginName kubernetesiosecret VolumeGidValue I operationgeneratorgo UnmountVolumeTearDown succeeded for volume kubernetesiosecrete cb d a b dcddce e tlsassets OuterVolumeSpecName tlsassets pod e cb d a b dcddce e UID e cb d a b dcddce e InnerVolumeSpecName tlsassets PluginName kubernetesiosecret VolumeGidValue I reconcilergo Volume detached for volume prometheusk srulefiles UniqueName kubernetesioconfigmape cb d a b dcddce e prometheusk srulefiles on node jdcddtkn devdtecint DevicePath I reconcilergo Volume detached for volume config UniqueName kubernetesiosecrete cb d a b dcddce e config on node jdcddtkn devdtecint DevicePath I reconcilergo Volume detached for volume configout UniqueName kubernetesioemptydire cb d a b dcddce e configout on node jdcddtkn devdtecint DevicePath I reconcilergo Volume detached for volume tlsassets UniqueName kubernetesiosecrete cb d a b dcddce e tlsassets on node jdcddtkn devdtecint DevicePath I reconcilergo Volume detached for volume prometheusk stoken qc j UniqueName kubernetesiosecrete cb d a b dcddce e prometheusk stoken qc j on node jdcddtkn devdtecint DevicePath I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume pvce af cae a a df b ad fd UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvce af cae a a df b ad fdvmdk pod prometheusk s UID e cb d a b dcddce e E nestedpendingoperationsgo Operation for kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvce af cae a a df b ad fdvmdk failed No retries permitted until EST m durationBeforeRetry s Error Volume has not been added to the list of VolumesInUse in the nodes volume status for volume pvce af cae a a df b ad fd UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvce af cae a a df b ad fdvmdk pod prometheusk s UID e cb d a b dcddce e I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume pvce af cae a a df b ad fd UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvce af cae a a df b ad fdvmdk pod prometheusk s UID e cb d a b dcddce e E nestedpendingoperationsgo Operation for kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvce af cae a a df b ad fdvmdk failed No retries permitted until EST m durationBeforeRetry s Error Volume has not been added to the list of VolumesInUse in the nodes volume status for volume pvce af cae a a df b ad fd UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvce af cae a a df b ad fdvmdk pod prometheusk s UID e cb d a b dcddce e I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume pvce af cae a a df b ad fd UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvce af cae a a df b ad fdvmdk pod prometheusk s UID e cb d a b dcddce e E nestedpendingoperationsgo Operation for kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvce af cae a a df b ad fdvmdk failed No retries permitted until EST m durationBeforeRetry s Error Volume has not been added to the list of VolumesInUse in the nodes volume status for volume pvce af cae a a df b ad fd UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvce af cae a a df b ad fdvmdk pod prometheusk s UID e cb d a b dcddce e I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume pvce af cae a a df b ad fd UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvce af cae a a df b ad fdvmdk pod prometheusk s UID e cb d a b dcddce e E nestedpendingoperationsgo Operation for kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvce af cae a a df b ad fdvmdk failed No retries permitted until EST m durationBeforeRetry s Error Volume has not been added to the list of VolumesInUse in the nodes volume status for volume pvce af cae a a df b ad fd UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvce af cae a a df b ad fdvmdk pod prometheusk s UID e cb d a b dcddce e I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume config UniqueName kubernetesiosecretb c d a d b c f config pod prometheusk s UID b c d a d b c f I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume tlsassets UniqueName kubernetesiosecretb c d a d b c f tlsassets pod prometheusk s UID b c d a d b c f I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume configout UniqueName kubernetesioemptydirb c d a d b c f configout pod prometheusk s UID b c d a d b c f I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume prometheusk srulefiles UniqueName kubernetesioconfigmapb c d a d b c f prometheusk srulefiles pod prometheusk s UID b c d a d b c f I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume prometheusk stoken qc j UniqueName kubernetesiosecretb c d a d b c f prometheusk stoken qc j pod prometheusk s UID b c d a d b c f W volumelinuxgo Setting volume ownership for varlibkubeletpodsb c d a d b c f volumeskubernetesioemptydirwrappedprometheusk srulefiles and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see And these are the logs when not running under the prometheusoperator for the exact same manifest of the StatefulSet minus the ownerReference I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume config UniqueName kubernetesiosecret ec bd cebbac b f config pod prometheusk s UID ec bd cebbac b f I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume configout UniqueName kubernetesioemptydir ec bd cebbac b f configout pod prometheusk s UID ec bd cebbac b f I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume prometheusk stoken qc j UniqueName kubernetesiosecret ec bd cebbac b f prometheusk stoken qc j pod prometheusk s UID ec bd cebbac b f I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume tlsassets UniqueName kubernetesiosecret ec bd cebbac b f tlsassets pod prometheusk s UID ec bd cebbac b f I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume prometheusk srulefiles UniqueName kubernetesioconfigmap ec bd cebbac b f prometheusk srulefiles pod prometheusk s UID ec bd cebbac b f I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume pvc e e d b db acef a bd a UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk pod prometheusk s UID ec bd cebbac b f E nestedpendingoperationsgo Operation for kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk failed No retries permitted until EST m durationBeforeRetry ms Error Volume has not been added to the list of VolumesInUse in the nodes volume status for volume pvc e e d b db acef a bd a UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk pod prometheusk s UID ec bd cebbac b f W volumelinuxgo Setting volume ownership for varlibkubeletpods ec bd cebbac b f volumeskubernetesioemptydirwrappedprometheusk srulefiles and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see W volumelinuxgo Setting volume ownership for varlibkubeletpods ec bd cebbac b f volumeskubernetesioconfigmapprometheusk srulefiles and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see W volumelinuxgo Setting volume ownership for varlibkubeletpods ec bd cebbac b f volumeskubernetesioemptydirconfigout and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see W volumelinuxgo Setting volume ownership for varlibkubeletpods ec bd cebbac b f volumeskubernetesioemptydirwrappedprometheusk stoken qc j and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see W volumelinuxgo Setting volume ownership for varlibkubeletpods ec bd cebbac b f volumeskubernetesiosecretprometheusk stoken qc j and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see W volumelinuxgo Setting volume ownership for varlibkubeletpods ec bd cebbac b f volumeskubernetesioemptydirwrappedtlsassets and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see W volumelinuxgo Setting volume ownership for varlibkubeletpods ec bd cebbac b f volumeskubernetesiosecrettlsassets and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see W volumelinuxgo Setting volume ownership for varlibkubeletpods ec bd cebbac b f volumeskubernetesioemptydirwrappedconfig and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see W volumelinuxgo Setting volume ownership for varlibkubeletpods ec bd cebbac b f volumeskubernetesiosecretconfig and fsGroup set If the volume has a lot of files then setting volume ownership could be slow see I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume pvc e e d b db acef a bd a UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk pod prometheusk s UID ec bd cebbac b f E nestedpendingoperationsgo Operation for kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk failed No retries permitted until EST m durationBeforeRetry s Error Volume has not been added to the list of VolumesInUse in the nodes volume status for volume pvc e e d b db acef a bd a UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk pod prometheusk s UID ec bd cebbac b f I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume pvc e e d b db acef a bd a UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk pod prometheusk s UID ec bd cebbac b f E nestedpendingoperationsgo Operation for kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk failed No retries permitted until EST m durationBeforeRetry s Error Volume has not been added to the list of VolumesInUse in the nodes volume status for volume pvc e e d b db acef a bd a UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk pod prometheusk s UID ec bd cebbac b f I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume pvc e e d b db acef a bd a UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk pod prometheusk s UID ec bd cebbac b f E nestedpendingoperationsgo Operation for kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk failed No retries permitted until EST m durationBeforeRetry s Error Volume has not been added to the list of VolumesInUse in the nodes volume status for volume pvc e e d b db acef a bd a UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk pod prometheusk s UID ec bd cebbac b f I reconcilergo operationExecutorVerifyControllerAttachedVolume started for volume pvc e e d b db acef a bd a UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk pod prometheusk s UID ec bd cebbac b f I operationgeneratorgo Controller attach succeeded for volume pvc e e d b db acef a bd a UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk pod prometheusk s UID ec bd cebbac b f device path devdiskbyidwwn x c eaefd bd aa e c a I operationgeneratorgo MountVolumeWaitForAttach entering for volume pvc e e d b db acef a bd a UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk pod prometheusk s UID ec bd cebbac b f DevicePath devdiskbyidwwn x c eaefd bd aa e c a I attachergo Successfully found attached VMDK VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk I operationgeneratorgo MountVolumeWaitForAttach succeeded for volume pvc e e d b db acef a bd a UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk pod prometheusk s UID ec bd cebbac b f DevicePath devdiskbyidwwn x c eaefd bd aa e c a I attachergo vsphere MountDevicedevdiskbyidwwn x c eaefd bd aa e c a varlibkubeletpluginskubernetesiovspherevolumemounts VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk I mountlinuxgo fsck error fsck from utillinux fsckext Bad magic number in superblock while trying to open devsdb devsdb The superblock could not be read or does not describe a correct ext filesystem If the device is valid and it really contains an ext filesystem and not swap or ufs or something else then the superblock is corrupt and you might try running e fsck with an alternate superblock e fsck b device E mountlinuxgo Mount failed exit status Mounting command systemdrun Mounting arguments descriptionKubernetes transient mount for varlibkubeletpluginskubernetesiovspherevolumemounts VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk scope mount t ext o defaults devdiskbyidwwn x c eaefd bd aa e c a varlibkubeletpluginskubernetesiovspherevolumemounts VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk Output Running scope as unit run scope mount wrong fs type bad option bad superblock on devsdb missing codepage or helper program or other error In some cases useful info is found in syslog try dmesg tail or so I mountlinuxgo Disk devdiskbyidwwn x c eaefd bd aa e c a appears to be unformatted attempting to format as type ext with options F m devdiskbyidwwn x c eaefd bd aa e c a I mountlinuxgo Disk successfully formatted mkfs ext devdiskbyidwwn x c eaefd bd aa e c a varlibkubeletpluginskubernetesiovspherevolumemounts VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk I operationgeneratorgo MountVolumeMountDevice succeeded for volume pvc e e d b db acef a bd a UniqueName kubernetesiovspherevolume VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk pod prometheusk s UID ec bd cebbac b f device mount path varlibkubeletpluginskubernetesiovspherevolumemounts VNXE DEV kubevolskubernetesdynamicpvc e e d b db acef a bd a vmdk As can be seen when running under the prometheusoperator as a controller it seems that when the first error is encountered Volume has not been added to the list of VolumesInUse that the operator is aborting the pods though there is no note of this in the operator logs When not running under the prometheusoperator the same error appears in the logs but the process isnt halted and vSphere eventually gets the volume attached and mounted though it takes a few seconds Is perhaps something in the prometheusoperator aborting the pod creation when any error is returned from the kubelet Feel free to ask questions in prometheusoperator on Kubernetes Slack What is missing Common tooling container image Right now we moved most of the tooling into but since new tools are being added it might be worthwhile to create one common image with all tools in it instead of managing multiple ones The easiest solution would be to add lint tool to quayiocoreosjsonnetci Ideally we should change the name of that image and change location of Dockerfile to reflect that this is no longer only about jsonnet Why do we need it To simplify tooling management and locking versions for reproducibility This should solve issues from cc brancz LiliC