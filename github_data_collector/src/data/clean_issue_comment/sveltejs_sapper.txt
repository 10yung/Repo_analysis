 Passport is successfully connected after successful login i see requser in my navigated get route foo but when i refresh page req user is lost it is just not being serialized If i navigate to another route from foo to bar lets say i can see requser in get bar route so if i refresh bar requser is lost undefined again go back to foo it is there and so on I think this have to do something with sapper configs but im not sure Sometimes when I try to load a sapper app I get a blank page with the following in console GET netERRABORTED Not Found index GET netERRABORTED Not Found Heres the responsible line sapperissue I have to clear cache and reload Ctrl F for the app to render The mainjs file is then generated with a different path which may or may not work It seems that the mainjs file sometimes isnt written to cache before the page is loaded Note Im using the sapperwebpack template similar to When on the current page if you click a link that IS the current page I would like it to either do a full reload if targetself as per issue refire onMount without targetself Thoughts This updates npm run deploy to call a new script which commits the contents of the sitesapperexport directory moved to the root of the repo as the ghpages branch off of the current HEAD and pushes it to origin This plus updating DNS to point to sveltejsgithubio should be all thats needed to move the site to GitHub pages I was a bit confused as to where I would import goto from so I added a small usage example Fixes and related I have a website exported While the initial page is hydrated hydratetarget function runs whenever I click on any link to other page of my website it also gets hydrated Two simultaneous hydratetarget functions are running and the latter one apparently uses global variable initialdata that keeps the data preloaded for the first one thus it loads the components with invalid props making it fail The bug does not appear if I wait for the first hydrate to finish before clicking the link Describe the bug During build C dev sappersvelte t is replaced to C dev sappercss t svelte css Logs C dev sappersvelte test npm run build TODO build C dev sappersvelte test sapper build legacy Building Failed to build error in C dev sappercss test src routes errorsvelte Expected h svelte g ndbpsvelte g ndbmargin autoh svelte g ndbfontsize emfontweight margin em psvelte g ndbmargin em automediaminwidth pxh svelte g ndbfontsize em sourceMappingURL ParseError Failed to build error in C dev sappercss test src routes errorsvelte Expected h svelte g ndbpsvelte g ndbmargin autoh svelte g ndbfontsize emfontweight margin em psvelte g ndbmargin em automediaminwidth pxh svelte g ndbfontsize em sourceMappingURL at error C dev sappersvelte test nodemodules svelte compilerjs at Parser error C dev sappersvelte test nodemodules svelte compilerjs at Parser eat C dev sappersvelte test nodemodules svelte compilerjs at mustache C dev sappersvelte test nodemodules svelte compilerjs at new Parser C dev sappersvelte test nodemodules svelte compilerjs at parse C dev sappersvelte test nodemodules svelte compilerjs at compile C dev sappersvelte test nodemodules svelte compilerjs at preprocessPromisethencode C dev sappersvelte test nodemodules rolluppluginsvelte indexjs at anonymous npm ERR code ELIFECYCLE npm ERR errno npm ERR TODO build sapper build legacy npm ERR Exit status npm ERR npm ERR Failed at the TODO build script npm ERR This is probably not a problem with npm There is likely additional logging output above To reproduce bash md sappersvelte cd sappersvelte npx degit sveltejssappertemplaterollup myapp cd myapp npm run build Information about your Sapper Installation Win node v v npm v js dependencies compression polka next sapperenvironment sirv devDependencies npmrunall sapper svelte babelcore babelpluginsyntaxdynamicimport babelplugintransformruntime babelpresetenv babelruntime rollupplugincommonjs rolluppluginnoderesolve rolluppluginreplace rollup rolluppluginbabel rolluppluginsvelte rolluppluginterser Right now Sapper crawls the website and for all local links creates subdirectories with indexhtml file inside Its not necessary in case the link points to a file that looks like HTML document itself ie ends with html extension Its useful not to create subdirectories like foohtmlindexhtml for at least two reasons it breaks Github Pages custom as described in Surgesh redirects foohtml to foohtml when it encounters a directory which smells strange Fixes It works exactly like the example in my comment you can return a promise inside onNavigate