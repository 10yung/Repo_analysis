Hello i want to create a wireguard server for some clients only for internet access but i want to isolate them from each other I dont want to ping each other or discovered I used iptables but no result Can anyone help me I am trying to use wireguard to assign public IPv addresses to my peers so that I can ssh into them from anywhere I currently have a setup working on a VPS which works with both IPv and IPv but it seems to NAT outbound traffic so I cannot ssh into a specific peer My current config is as follows Server interface Address xyz ListenPort PrivateKey hidden PostUp iptables t nat A POSTROUTING o ens j MASQUERADE ip tables t nat A POSTROUTING o ens j MASQUERADE PostUp iptables t nat A POSTROUTING o ens j MASQUERADE PostDown iptables t nat D POSTROUTING o ens j MASQUERADE ip tables t nat D POSTROUTING o ens j MASQUERADE PostDown iptables t nat D POSTROUTING o ens j MASQUERADE Peer PublicKey hidden AllowedIPs xyz Client Interface PrivateKey hidden Address xyz Peer PublicKey hidden Endpoint abc AllowedIPs Ive been stuck on this all weekend and not sure how to proceed Let me know if there is a better place to ask this question So far the most helpful thing I found were these docs Thanks Can you cover the usecase where wireguard is ran out of a separate network namespace wherein certain applications are launched and only the traffic of those launched from that network namespace is tunneled Ive been doing this on OpenVpn for a years but as Ubuntus adoption of systemdresolved Ive had DNS leaks Would love if there was a wireguard native way to tunnel certain applications rather than tunnel traffic based on range of destination IP addresses Ps thanks for the HN post DNS and Address for example are only valid config items when using the wgquick tool IMO it would be good to distinguish these and any others just a brief wgquick only marker perhaps linking to a section that explains While you mention the sysctl and iptables setup needed for ipv no such documentation is mentioned for IPv tunneling IPv forwarding can be enabled with netipv confallforwarding Also netipv confallproxyarp is not necessary at all Also also you can bypass sysctl entirely by just adding IPForwardyes to your public interfaces networkd config assuming youre using systemd Finally if youre using systemd you can make the whole process a hell of a lot easier by just using networkds native wireguard support like so See the official docs on this for further reading etcsystemdnetwork wg netdev NetDev Namewg Kindwireguard DescriptionWireGuard WireGuard PrivateKeykey ListenPort WireGuardPeer PublicKeykey AllowedIPs fd PersistentKeepalive etcsystemdnetwork wg network Match Namewg Network Address Addressfd 