 Bumps springsecurityversion from RELEASE to RELEASE Updates springsecuritycore from RELEASE to RELEASE details summaryRelease notessummary Sourced from springsecuritycores releases RELEASE star New Features Fix variable reference in sample code springsecuritysaml serviceprovider impossible to use different format of assertionConsumerServiceUrlTemplate Add Resource Server Multitenancy Documentation Update SAML sample to use boot auto config Add Reactive CSRF Documentation beetle Bug Fixes Restore Removed Throws Clauses CsrfWebFilter should handle multipartformdata Make saveAuthorizedClient save the authorized client DefaultReactiveOAuth AuthorizedClientManagersaveAuthorizedClient does not save authorized client throws Exception was removed from WebSecurityConfigurerAdapterconfigureWebSecurity SAML Provider SubjectConfirmation validation failure SAML Provider AuthNRequest Hardcoded Protocol Binding Clock skew to check access token expiration has wrong sign hammer Dependency Upgrades Upgrade to Spring Boot RELEASE heart Contributors Wed like to thank all the contributors who worked on this release fhanik mftruso jzheaux philsttr rweisleder ramonPires RELEASE star New Features Add Hello RSocket Sample Add RSocket Reference CookieServerCsrfRepositoryTests should not start domain with a dot Add OAuth Resource Server to Modules Section Initial saml login docs SAML Assertion Always require signature validation Add Reactive Messaging CurrentSecurityContextPrincipalArgumentResolver CurrentSecurityContextArgumentResolver polishes Add ClientRegistrationwithClientRegistrationClientRegistration Add hasAuthority method to RSocketSecurity Align Servlet ExchangeFilterFunction CoreSubscriber WebFluxSecurityConfiguration does not configure oauth Client trtable truncated details details summaryCommitssummary ce ac Release RELEASE a b Add Resource Server Multitenancy Docs b dd Update to blockound RELEASE e fd Update to hibernatevalidator Final f da Update to hibernateentitymanager Final fdebf Update to Unbounded c d d Update to powermock a b Update to Bouncy Castle f b Update to Reactor DysprosiumSR cbc Update to GAE Additional commits viewable in compare view details br Updates springsecurityweb from RELEASE to RELEASE details summaryRelease notessummary Sourced from springsecuritywebs releases RELEASE star New Features Fix variable reference in sample code springsecuritysaml serviceprovider impossible to use different format of assertionConsumerServiceUrlTemplate Add Resource Server Multitenancy Documentation Update SAML sample to use boot auto config Add Reactive CSRF Documentation beetle Bug Fixes Restore Removed Throws Clauses CsrfWebFilter should handle multipartformdata Make saveAuthorizedClient save the authorized client DefaultReactiveOAuth AuthorizedClientManagersaveAuthorizedClient does not save authorized client throws Exception was removed from WebSecurityConfigurerAdapterconfigureWebSecurity SAML Provider SubjectConfirmation validation failure SAML Provider AuthNRequest Hardcoded Protocol Binding Clock skew to check access token expiration has wrong sign hammer Dependency Upgrades Upgrade to Spring Boot RELEASE heart Contributors Wed like to thank all the contributors who worked on this release fhanik mftruso jzheaux philsttr rweisleder ramonPires RELEASE star New Features Add Hello RSocket Sample Add RSocket Reference CookieServerCsrfRepositoryTests should not start domain with a dot Add OAuth Resource Server to Modules Section Initial saml login docs SAML Assertion Always require signature validation Add Reactive Messaging CurrentSecurityContextPrincipalArgumentResolver CurrentSecurityContextArgumentResolver polishes Add ClientRegistrationwithClientRegistrationClientRegistration Add hasAuthority method to RSocketSecurity Align Servlet ExchangeFilterFunction CoreSubscriber WebFluxSecurityConfiguration does not configure oauth Client trtable truncated details details summaryCommitssummary ce ac Release RELEASE a b Add Resource Server Multitenancy Docs b dd Update to blockound RELEASE e fd Update to hibernatevalidator Final f da Update to hibernateentitymanager Final fdebf Update to Unbounded c d d Update to powermock a b Update to Bouncy Castle f b Update to Reactor DysprosiumSR cbc Update to GAE Additional commits viewable in compare view details br Updates springsecurityconfig from RELEASE to RELEASE details summaryRelease notessummary Sourced from springsecurityconfigs releases RELEASE star New Features Fix variable reference in sample code springsecuritysaml serviceprovider impossible to use different format of assertionConsumerServiceUrlTemplate Add Resource Server Multitenancy Documentation Update SAML sample to use boot auto config Add Reactive CSRF Documentation beetle Bug Fixes Restore Removed Throws Clauses CsrfWebFilter should handle multipartformdata Make saveAuthorizedClient save the authorized client DefaultReactiveOAuth AuthorizedClientManagersaveAuthorizedClient does not save authorized client throws Exception was removed from WebSecurityConfigurerAdapterconfigureWebSecurity SAML Provider SubjectConfirmation validation failure SAML Provider AuthNRequest Hardcoded Protocol Binding Clock skew to check access token expiration has wrong sign hammer Dependency Upgrades Upgrade to Spring Boot RELEASE heart Contributors Wed like to thank all the contributors who worked on this release fhanik mftruso jzheaux philsttr rweisleder ramonPires RELEASE star New Features Add Hello RSocket Sample Add RSocket Reference CookieServerCsrfRepositoryTests should not start domain with a dot Add OAuth Resource Server to Modules Section Initial saml login docs SAML Assertion Always require signature validation Add Reactive Messaging CurrentSecurityContextPrincipalArgumentResolver CurrentSecurityContextArgumentResolver polishes Add ClientRegistrationwithClientRegistrationClientRegistration Add hasAuthority method to RSocketSecurity Align Servlet ExchangeFilterFunction CoreSubscriber WebFluxSecurityConfiguration does not configure oauth Client trtable truncated details details summaryCommitssummary ce ac Release RELEASE a b Add Resource Server Multitenancy Docs b dd Update to blockound RELEASE e fd Update to hibernatevalidator Final f da Update to hibernateentitymanager Final fdebf Update to Unbounded c d d Update to powermock a b Update to Bouncy Castle f b Update to Reactor DysprosiumSR cbc Update to GAE Additional commits viewable in compare view details br Dependabot will resolve any conflicts with this PR as long as you dont alter it yourself You can also trigger a rebase manually by commenting dependabot rebase dependabotautomergestart dependabotautomergeend details summaryDependabot commands and optionssummary br You can trigger Dependabot actions by commenting on this PR dependabot rebase will rebase this PR dependabot recreate will recreate this PR overwriting any edits that have been made to it dependabot merge will merge this PR after your CI passes on it dependabot squash and merge will squash and merge this PR after your CI passes on it dependabot cancel merge will cancel a previously requested merge and block automerging dependabot reopen will reopen this PR if it is closed dependabot ignore this patchminormajor version will close this PR and stop Dependabot creating any more for this minormajor version unless you reopen the PR or upgrade to it yourself dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency unless you reopen the PR or upgrade to it yourself dependabot use these labels will set the current labels as the default for future PRs for this repo and language dependabot use these reviewers will set the current reviewers as the default for future PRs for this repo and language dependabot use these assignees will set the current assignees as the default for future PRs for this repo and language dependabot use this milestone will set the current milestone as the default for future PRs for this repo and language You can disable automated security fix PRs for this repo from the Security Alerts page details transExceptionStack client client filter Biz docker k s host Now behavior comweiboapimotantransportnetty NettyClient Every successful invoke will resetErrorCount and set volatile errorCount thats not unnecessary and if stateisUnAliveState long count errorCountlongValue if count maxClientConnection Should not reach here state ChannelStateALIVE A little concurrent problem When errorCount and maxClientConnection Thread errorCountincrementAndGet errorCount and lowed down by GC or sync Thread errorCountincrementAndGet errorCount and lowed down by GC or sync Thread errorCountincrementAndGet errorCount and lowed down by GC or sync Thread errorCountincrementAndGet errorCount and lowed down by GC or sync Thread errorCountset errorCount Then Nothing happened or wait for another maxClientConnection Optimization use get combine accumulateAndGet Set stateChannelStateALIVE after reconnect successfully and not here private LongBinaryOperator resetErrorCntOp prev zero prev maxClientConnection zero prev void resetErrorCount if errorCountget L stateisAliveState errorCountaccumulateAndGet L resetErrorCntOp use incrementAndGet maxClientConnection to trriger void incrErrorCount if errorCountincrementAndGet maxClientConnection stateisAliveState LoggerUtilerrorNettyClient unavailable Error url urlgetIdentity urlgetServerPortStr state ChannelStateUNALIVE That looks clearer and little more efficient Motan version JVM version eg java version java version The method getNonNegative of class MathUtil doesnt exist but it has been used in Class RoundRobinLoadBalance please check in Motivation Not check the length to be read from the peer that will consume a lot of memory by a poisonous message Not release byteBuf before close channel when meeting length check exception Modifications Add length check in NettyDecoder release byteBuf before throw exception in NettyDecoder Not length check for byteBuf to be read Class comweiboapimotantransportnetty NettyDecoder Problem Not check the length to be read from the peer that will consume a lot of memory by a poisonous message int metaSize inreadInt size if metaSize size metaSize line we should check metaSize before return if inreadableBytes metaSize inresetReaderIndex return int dataLength inreadInt line we should check dataLength before return if inreadableBytes dataLength inresetReaderIndex return Not release byteBuf before close channel when meeting length check exception Class comweiboapimotantransportnetty NettyDecoder Problem when meeting a failed length check the channel will be closed by NettyChannelHandlerexceptionCaught that will invoke ByteToMessageDecoderchannelInactive that cause NettyDecoderdecode will be invoked again if we not release byteBuf before throw exception private void checkMaxContext if maxContentLength dataLength maxContentLength line we should release ByteBuf by invoke ByteBufskipBytesByteBufreadableBytes before throw the Exception throw e motan backlog jdk netty backlog motan 