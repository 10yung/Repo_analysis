This PR fixes several issues Ive encountered while using mitmproxy in console mode Trying to manually change to multipart form contentview failed because ViewMultipartname has a space in it This also affected my custom contentview so I had to choose a name without spaces Said error was not visible in the event log just in the status bar where it wasnt even informative because it just said more in eventlog When I did manage to show the full exception in the event log tabs t were displayed as A reraised error when I run a command with an invalid choice would display an empty error string because it was raised like this raise exceptionsCommandError from e I solved by exposing CommandManagercallstrings and calling it directly because it seems far more reliable than formatting a full command string with s quoteunquote operations and so on I also did this for any command call which involves a s or choice I solved by replacing signalsstatusmessagesend with ctxlogerror Problem Description I was running code very similar to that in the wsgiflaskapppy example in my project hoping to serve a basic flask app under a test domain when the proxy is running Couldnt get it working in my project so after some experimenting I tried to repro the simple example using mitmproxy docker image as a base but Im still having trouble Basically mitmdump doesnt seem to be able to resolve the magic proxapplocal domain when I make requests to it on port the mitmdump logs the request but says GET Server connection to proxapplocal failed Error connecting to proxapplocal Errno Name does not resolve Steps to reproduce the behavior This is my Dockerfile Dockerfile FROM mitmproxymitmproxy RUN pip install flask COPY proxypy proxypy CMD mitmdump s proxypy The contents of proxypy is just copy pasted from Im running it with bash docker build t tpr docker run networkhost rm it v mitmproxyhomemitmproxymitmproxy tpr Making requests via the browser set up to proxy via localhost to gives a My understanding was that I should get back the test Hello World response Have I missed something Also at some point during my experimentation I uncommented the line at the bottom of the example mitmproxyctxmasterappsaddapp examplecom but got some error about how apps is not defined on ctxmaster is that information still applicable to v System Information Paste the output of mitmproxy version here Running from a shell inside the running container Mitmproxy Python OpenSSL OpenSSL u Dec Platform Linux genericx with This is a kludge to help with My knowledge of Urwid is slim but it really doesnt seem to offer any tools for this problem Using weight for the header keyvalue columns would use the available space more efficiently and get you wrapping for both key and value The downside would be that the key and value would no longer be adjacent Is your feature request related to a problem Please describe Im frustrated when I want to get the attackers real ip Im using python scripts in a addons method but I try all events style I can only get mitms ip by using flowclientconnaddress Describe the solution youd like Id like to know if there has had such a interface or if there is a plan to get the real ip Problem Description The thumbnails on YouTube dont load after navigating around the page Im not sure what exactly is happening it seems to be related to HTTP See the attached video Sorry for the video being such a hot mess During recording it didnt happen after the first navigation of course why would it and it took a moment to be reproducible When I opened the image in a new tab it still didnt load The second time I altenter ed it into a new tab In dev tools the requests appear as pending So mitmproxy never tells Chrome that the request failed Selection Steps to reproduce the behavior Start mitmdump Open Chromium Browse to wwwyoutubecom Click on a video Go back to the front page by clicking on the logo Most thumbnails will not load you might need to repeat I assume it is related to the error in the title No amount of waiting makes them load Now the question is is YouTube or Chromium doing something funny or is it mitmproxy that has the issue System Information Mitmproxy Python OpenSSL OpenSSL j Nov Platform Linux genericx withUbuntu eoan Attachments video video of me hovering the thumbnails dump Problem Description In Toggle Proxy is linked but it no longer exists Steps to reproduce the behavior GOTO GOTO SEE Oops We can t find that page System Information DOCS Is really helpful when you have scripts in your configyaml and dont want to edit the file each time one gets deleted or moved Problem Description I set username and password on proxy setting already but when I uses browser Its prompt ask again Steps to reproduce the behavior Screen Shot at PM Screen Shot at PM System Information Mitmproxy dev commit b f Python OpenSSL OpenSSL j Nov Platform Darwin x i bit None This PR adds missing tox environments from Github Actions It replaces the unpinned flake and mypy runs with the properly tracked invocation via tox The time overhead is below the general measurement noise on a combined sec run sometimes it is sec faster with tox sometimes sec slower etc However since the individualcoverage was not running in our CI we let some failures creep into the codebase mhils has promised to write additional tests for the currently uncovereduntested code before we can merge this PR FAIL mitmproxyaddonscommandhistorypy FAIL mitmproxycommandlexerpy This should bring back all CI targets we had previously without compromising on speed of untracked dependency versions