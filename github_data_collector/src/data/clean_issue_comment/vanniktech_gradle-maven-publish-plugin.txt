 integration tests for Kotlin project main addition here is the assertion that the dokka task runs check actual pom content introduce fixturescommon which will be copied for every tests but can be overridden by the test specific fixtures move build files to the fixtures because they are diverging more Coming from that issue through another one it turns out that if POMDESCRIPTION is not set I havent found that in okhttp x sources then string with content null is produced in POM instead of not adding anything at all Okhttp uses this plugin I havent tried to reproduce this nor further investigate if issue is located here or maybe in underlying Gradle implementation since my original issue at AboutLibraries has gone I filled this issue because maybe someone else will be interested in investigation As with almost every major Gradle update there is again a plugin deprecated and will be removed the next major release Is there a way gradlemavenpublishplugin can upgrade to mavenpublish Using version SNAPSHOT of this plugin Im seeing a failure to publish It seems that the javadoc artifact isnt being generated as expected This doesnt happen with Dstandardevents gradlew clean uploadArchives stacktrace Starting a Gradle Daemon stopped Daemons could not be reused use status for details Task swiftpoetcompileKotlin w UsersbenbaderDevelopmentstandardeventsswiftpoetsrcmainkotlincomcorpswiftpoetCodeWriterkt Variable nameResolved is assigned but never accessed w UsersbenbaderDevelopmentstandardeventsswiftpoetsrcmainkotlincomcorpswiftpoetCodeWriterkt The value resolved null assigned to var nameResolved Boolean defined in comcorpswiftpoetCodeWriterlookupName is never used w UsersbenbaderDevelopmentstandardeventsswiftpoetsrcmainkotlincomcorpswiftpoetTypeNamekt Parameter writer is never used w UsersbenbaderDevelopmentstandardeventsswiftpoetsrcmainkotlincomcorpswiftpoetTypeSpeckt Parameter name is never used Task compilercompileKotlin w UsersbenbaderDevelopmentstandardeventscompilersrcmainkotlincomcorpeventscompilerparseParserkt Variable minSize is never used w UsersbenbaderDevelopmentstandardeventscompilersrcmainkotlincomcorpeventscompilerparseParserkt Variable maxSize is never used Task androidruntimeuploadArchives FAILED FAILURE Build failed with an exception What went wrong Execution failed for task androidruntimeuploadArchives Could not publish configuration archives Cannot publish artifact androidruntimejavadocjar UsersbenbaderDevelopmentstandardeventsandroidruntimebuildlibsandroidruntime SNAPSHOTjavadocjar as it does not exist Try Run with info or debug option to get more log output Run with scan to get full insights Exception is orggradleapitasksTaskExecutionException Execution failed for task androidruntimeuploadArchives at orggradleapiinternaltasksexecutionExecuteActionsTaskExecuterlambdaexecuteIfValid ExecuteActionsTaskExecuterjava at orggradleinternalTryFailureifSuccessfulOrElseTryjava at orggradleapiinternaltasksexecutionExecuteActionsTaskExecuterexecuteIfValidExecuteActionsTaskExecuterjava at orggradleapiinternaltasksexecutionExecuteActionsTaskExecuterexecuteExecuteActionsTaskExecuterjava at orggradleapiinternaltasksexecutionCleanupStaleOutputsExecuterexecuteCleanupStaleOutputsExecuterjava at orggradleapiinternaltasksexecutionFinalizePropertiesTaskExecuterexecuteFinalizePropertiesTaskExecuterjava at orggradleapiinternaltasksexecutionResolveTaskExecutionModeExecuterexecuteResolveTaskExecutionModeExecuterjava at orggradleapiinternaltasksexecutionSkipTaskWithNoActionsExecuterexecuteSkipTaskWithNoActionsExecuterjava at orggradleapiinternaltasksexecutionSkipOnlyIfTaskExecuterexecuteSkipOnlyIfTaskExecuterjava at orggradleapiinternaltasksexecutionCatchExceptionTaskExecuterexecuteCatchExceptionTaskExecuterjava at orggradleapiinternaltasksexecutionEventFiringTaskExecuter executeTaskEventFiringTaskExecuterjava at orggradleapiinternaltasksexecutionEventFiringTaskExecuter callEventFiringTaskExecuterjava at orggradleapiinternaltasksexecutionEventFiringTaskExecuter callEventFiringTaskExecuterjava at orggradleinternaloperationsDefaultBuildOperationExecutorCallableBuildOperationWorkerexecuteDefaultBuildOperationExecutorjava at orggradleinternaloperationsDefaultBuildOperationExecutorCallableBuildOperationWorkerexecuteDefaultBuildOperationExecutorjava at orggradleinternaloperationsDefaultBuildOperationExecutor executeDefaultBuildOperationExecutorjava at orggradleinternaloperationsDefaultBuildOperationExecutorexecuteDefaultBuildOperationExecutorjava at orggradleinternaloperationsDefaultBuildOperationExecutorexecuteDefaultBuildOperationExecutorjava at orggradleinternaloperationsDefaultBuildOperationExecutorcallDefaultBuildOperationExecutorjava at orggradleinternaloperationsDelegatingBuildOperationExecutorcallDelegatingBuildOperationExecutorjava at orggradleapiinternaltasksexecutionEventFiringTaskExecuterexecuteEventFiringTaskExecuterjava at orggradleexecutionplanLocalTaskNodeExecutorexecuteLocalTaskNodeExecutorjava at orggradleexecutiontaskgraphDefaultTaskExecutionGraphInvokeNodeExecutorsActionexecuteDefaultTaskExecutionGraphjava at orggradleexecutiontaskgraphDefaultTaskExecutionGraphInvokeNodeExecutorsActionexecuteDefaultTaskExecutionGraphjava at orggradleexecutiontaskgraphDefaultTaskExecutionGraphBuildOperationAwareExecutionActionexecuteDefaultTaskExecutionGraphjava at orggradleexecutiontaskgraphDefaultTaskExecutionGraphBuildOperationAwareExecutionActionexecuteDefaultTaskExecutionGraphjava at orggradleexecutionplanDefaultPlanExecutorExecutorWorkerlambdarun DefaultPlanExecutorjava at orggradleexecutionplanDefaultPlanExecutorExecutorWorkerexecuteDefaultPlanExecutorjava at orggradleexecutionplanDefaultPlanExecutorExecutorWorkerexecuteNextNodeDefaultPlanExecutorjava at orggradleexecutionplanDefaultPlanExecutorExecutorWorkerrunDefaultPlanExecutorjava at orggradleinternalconcurrentExecutorPolicyCatchAndRecordFailuresonExecuteExecutorPolicyjava at orggradleinternalconcurrentManagedExecutorImpl runManagedExecutorImpljava at orggradleinternalconcurrentThreadFactoryImplManagedThreadRunnablerunThreadFactoryImpljava Caused by orggradleapiartifactsPublishException Could not publish configuration archives at orggradleapitasksUploaduploadUploadjava at orggradleinternalreflectJavaMethodinvokeJavaMethodjava at orggradleapiinternalprojecttaskfactoryStandardTaskActiondoExecuteStandardTaskActionjava at orggradleapiinternalprojecttaskfactoryStandardTaskActionexecuteStandardTaskActionjava at orggradleapiinternalprojecttaskfactoryStandardTaskActionexecuteStandardTaskActionjava at orggradleapiinternalAbstractTaskTaskActionWrapperexecuteAbstractTaskjava at orggradleapiinternalAbstractTaskTaskActionWrapperexecuteAbstractTaskjava at orggradleapiinternaltasksexecutionExecuteActionsTaskExecuter runExecuteActionsTaskExecuterjava at orggradleinternaloperationsDefaultBuildOperationExecutorRunnableBuildOperationWorkerexecuteDefaultBuildOperationExecutorjava at orggradleinternaloperationsDefaultBuildOperationExecutorRunnableBuildOperationWorkerexecuteDefaultBuildOperationExecutorjava at orggradleinternaloperationsDefaultBuildOperationExecutor executeDefaultBuildOperationExecutorjava at orggradleinternaloperationsDefaultBuildOperationExecutorexecuteDefaultBuildOperationExecutorjava at orggradleinternaloperationsDefaultBuildOperationExecutorexecuteDefaultBuildOperationExecutorjava at orggradleinternaloperationsDefaultBuildOperationExecutorrunDefaultBuildOperationExecutorjava at orggradleinternaloperationsDelegatingBuildOperationExecutorrunDelegatingBuildOperationExecutorjava at orggradleapiinternaltasksexecutionExecuteActionsTaskExecuterexecuteActionExecuteActionsTaskExecuterjava at orggradleapiinternaltasksexecutionExecuteActionsTaskExecuterexecuteActionsExecuteActionsTaskExecuterjava at orggradleapiinternaltasksexecutionExecuteActionsTaskExecuteraccess ExecuteActionsTaskExecuterjava at orggradleapiinternaltasksexecutionExecuteActionsTaskExecuterTaskExecutionexecuteWithPreviousOutputFilesExecuteActionsTaskExecuterjava at orggradleapiinternaltasksexecutionExecuteActionsTaskExecuterTaskExecutionexecuteExecuteActionsTaskExecuterjava at orggradleinternalexecutionstepsExecuteSteplambdaexecute ExecuteStepjava at orggradleinternalexecutionstepsExecuteStepexecuteExecuteStepjava at orggradleinternalexecutionstepsExecuteStepexecuteExecuteStepjava at orggradleinternalexecutionstepsCleanupOutputsStepexecuteCleanupOutputsStepjava at orggradleinternalexecutionstepsCleanupOutputsStepexecuteCleanupOutputsStepjava at orggradleinternalexecutionstepsResolveInputChangesStepexecuteResolveInputChangesStepjava at orggradleinternalexecutionstepsResolveInputChangesStepexecuteResolveInputChangesStepjava at orggradleinternalexecutionstepsCancelExecutionStepexecuteCancelExecutionStepjava at orggradleinternalexecutionstepsTimeoutStepexecuteWithoutTimeoutTimeoutStepjava at orggradleinternalexecutionstepsTimeoutStepexecuteTimeoutStepjava at orggradleinternalexecutionstepsCatchExceptionStepexecuteCatchExceptionStepjava at orggradleinternalexecutionstepsCreateOutputsStepexecuteCreateOutputsStepjava at orggradleinternalexecutionstepsSnapshotOutputsStepexecuteSnapshotOutputsStepjava at orggradleinternalexecutionstepsSnapshotOutputsStepexecuteSnapshotOutputsStepjava at orggradleinternalexecutionstepsCacheStepexecuteWithoutCacheCacheStepjava at orggradleinternalexecutionstepsCacheStepexecuteCacheStepjava at orggradleinternalexecutionstepsCacheStepexecuteCacheStepjava at orggradleinternalexecutionstepsBroadcastChangingOutputsStepexecuteBroadcastChangingOutputsStepjava at orggradleinternalexecutionstepsStoreExecutionStateStepexecuteStoreExecutionStateStepjava at orggradleinternalexecutionstepsStoreExecutionStateStepexecuteStoreExecutionStateStepjava at orggradleinternalexecutionstepsRecordOutputsStepexecuteRecordOutputsStepjava at orggradleinternalexecutionstepsRecordOutputsStepexecuteRecordOutputsStepjava at orggradleinternalexecutionstepsSkipUpToDateStepexecuteBecauseSkipUpToDateStepjava at orggradleinternalexecutionstepsSkipUpToDateSteplambdaexecute SkipUpToDateStepjava at orggradleinternalexecutionstepsSkipUpToDateStepexecuteSkipUpToDateStepjava at orggradleinternalexecutionstepsSkipUpToDateStepexecuteSkipUpToDateStepjava at orggradleinternalexecutionstepsResolveChangesStepexecuteResolveChangesStepjava at orggradleinternalexecutionstepsResolveChangesStepexecuteResolveChangesStepjava at orggradleinternalexecutionstepslegacyMarkSnapshottingInputsFinishedStepexecuteMarkSnapshottingInputsFinishedStepjava at orggradleinternalexecutionstepslegacyMarkSnapshottingInputsFinishedStepexecuteMarkSnapshottingInputsFinishedStepjava at orggradleinternalexecutionstepsResolveCachingStateStepexecuteResolveCachingStateStepjava at orggradleinternalexecutionstepsResolveCachingStateStepexecuteResolveCachingStateStepjava at orggradleinternalexecutionstepsCaptureStateBeforeExecutionStepexecuteCaptureStateBeforeExecutionStepjava at orggradleinternalexecutionstepsCaptureStateBeforeExecutionStepexecuteCaptureStateBeforeExecutionStepjava at orggradleinternalexecutionstepsValidateStepexecuteValidateStepjava at orggradleinternalexecutionstepsSkipEmptyWorkSteplambdaexecute SkipEmptyWorkStepjava at orggradleinternalexecutionstepsSkipEmptyWorkStepexecuteSkipEmptyWorkStepjava at orggradleinternalexecutionstepsSkipEmptyWorkStepexecuteSkipEmptyWorkStepjava at orggradleinternalexecutionstepslegacyMarkSnapshottingInputsStartedStepexecuteMarkSnapshottingInputsStartedStepjava at orggradleinternalexecutionstepsLoadExecutionStateStepexecuteLoadExecutionStateStepjava at orggradleinternalexecutionstepsLoadExecutionStateStepexecuteLoadExecutionStateStepjava at orggradleinternalexecutionimplDefaultWorkExecutorexecuteDefaultWorkExecutorjava at orggradleapiinternaltasksexecutionExecuteActionsTaskExecuterexecuteIfValidExecuteActionsTaskExecuterjava more Caused by orggradleapiartifactsPublishException Cannot publish artifact androidruntimejavadocjar UsersbenbaderDevelopmentstandardeventsandroidruntimebuildlibsandroidruntime SNAPSHOTjavadocjar as it does not exist at orggradleinternalcomponentexternalivypublishDefaultArtifactPublisherisValidToPublishDefaultArtifactPublisherjava at orggradleinternalcomponentexternalivypublishDefaultArtifactPublisheraddConfigurationsDefaultArtifactPublisherjava at orggradleinternalcomponentexternalivypublishDefaultArtifactPublishertoPublishMetaDataDefaultArtifactPublisherjava at orggradleinternalcomponentexternalivypublishDefaultArtifactPublisherpublishDefaultArtifactPublisherjava at orggradleapiinternalartifactsivyserviceIvyContextualArtifactPublisher executeIvyContextualArtifactPublisherjava at orggradleapiinternalartifactsivyserviceIvyContextualArtifactPublisher executeIvyContextualArtifactPublisherjava at orggradleinternalTransformers transformTransformersjava at orggradleapiinternalartifactsivyserviceDefaultIvyContextManagerwithIvyDefaultIvyContextManagerjava at orggradleapiinternalartifactsivyserviceDefaultIvyContextManagerwithIvyDefaultIvyContextManagerjava at orggradleapiinternalartifactsivyserviceIvyContextualArtifactPublisherpublishIvyContextualArtifactPublisherjava at orggradleapitasksUploaduploadUploadjava more Get more help at Deprecated Gradle features were used in this build making it incompatible with Gradle Use warningmode all to show the individual deprecation warnings See BUILD FAILED in s actionable tasks executed Feature request over at See This pull requests add a new task named closeAndReleaseRepository It is automates the process listed there closeAndReleaseRepository is completely independent from the other tasks and it assumes uploadArchives has been called first Obviously this only works with nexus repositories as Im unsure how the API looks like for other repos Usage prepare your release by assigning a version remove the SNAPSHOT suffix gradlew uploadArchives gradlew closeAndReleaseRepository Configuration mavenPublish nexus baseUrl defaults to groupId netexample defaults to the GROUP Gradle Property if not set respositoryUserName username defaults to the SONATYPENEXUSUSERNAME Gradle Property if not set respositoryPassword password defaults to the SONATYPENEXUSPASSWORD Gradle Property if not set This pull request is heavily inspired by Kudos to them It assumes theres only one staging repository active when closeAndReleaseRepository is called If you have stale staging repositories youll have to delete them by logging at Documentation and updated README is still missing as I wanted to get some feedback about what you guys think about the naming etc As mentioned in you must manually do the release steps at sonatype It would be great to have this completely automated Might use SQLDelights gradlemvnmpppushgradle as a prototype Can try to find time to implement this Integration tests were introduced in but not for every unit test appropriate integration test was added to keep original PR shorter and easier to review Add following integration tests Android library Android library Kotlin Android Java library Kotlin Just opening this to have something open to track it From Android libraries arent supported right now with useMavenPublish true Wed need a SoftwareComponent implementation for those which is tracked here Which is blocked by The latter is also preventing us of providing our own implementation of SoftwareComponent unless were ok with internal APIs Here is an example of how to do it without SoftwareComponent but for Android adding the dependencies to the pom is more complex