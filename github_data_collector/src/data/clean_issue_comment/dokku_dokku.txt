 Description of problem I had an app running and since Ive renamed it it doesnt work anymore Checking the logs I found some binaries which were installed on the buildpacks were missing and then the dokku buildpacks newname listed no buildpacks After adding the needed buildpacks I cant make the app run How reproducible Steps to Reproduce Create an app Deploy the app Run dokku appsrename oldname newname Run dokku psrestart newname Actual Results Buildpacks wont be added automatically to the new app App wont deploy after some attempts of running psresrtart it finally worked Expected Results New app will run as the old one its just a rename afterall Environment Information dokku report APPNAME output uname Linux fazzer amd SMP Debian deb u x GNULinux memory total used free shared buffcache available Mem Swap docker version Client Docker Engine Community Version API version Go version go Git commit a ea Built Wed Nov OSArch linuxamd Experimental false Server Docker Engine Community Engine Version API version minimum version Go version go Git commit a ea Built Wed Nov OSArch linuxamd Experimental false containerd Version GitCommit b a c af e c db c f fa runc Version rc dev GitCommit e f a c f e d a c b d aa dockerinit Version GitCommit fec docker daemon info Client Debug Mode true Server Containers Running Paused Stopped Images Server Version Storage Driver overlay Backing Filesystem extfs Supports dtype true Native Overlay Diff true Logging Driver jsonfile Cgroup Driver cgroupfs Plugins Volume local Network bridge host ipvlan macvlan null overlay Log awslogs fluentd gcplogs gelf journald jsonfile local logentries splunk syslog Swarm inactive Runtimes runc Default Runtime runc Init Binary dockerinit containerd version b a c af e c db c f fa runc version e f a c f e d a c b d aa init version fec Security Options apparmor seccomp Profile default Kernel Version amd Operating System Debian GNULinux bullseyesid OSType linux Architecture x CPUs Total Memory GiB Name fazzer ID DEAKLH UM MZ VEFBVXZ OZCUOF I G KQDSUGUXM ANS P Docker Root Dir varlibdocker Debug Mode false Registry Labels Experimental false Insecure Registries Live Restore Enabled false sigil version herokuish version herokuish buildpacks herokubuildpackmulti v herokubuildpackruby v herokubuildpacknodejs v herokubuildpackclojure v herokubuildpackpython v herokubuildpackjava v herokubuildpackgradle v herokubuildpackscala v herokubuildpackplay v herokubuildpackphp v herokubuildpackgo v buildpacknginx v dokku version dokku version dokku plugins plugn dokkustandard enabled dokku core standard plugin events enabled dokku core events logging plugin appjson enabled dokku core appjson plugin apps enabled dokku core apps plugin builderdockerfile enabled dokku core builderdockerfile plugin builderherokuish enabled dokku core builderherokuish plugin buildpacks enabled dokku core buildpacks plugin certs enabled dokku core certificate management plugin checks enabled dokku core checks plugin common enabled dokku core common plugin config enabled dokku core config plugin dockeroptions enabled dokku core dockeroptions plugin domains enabled dokku core domains plugin enter enabled dokku core enter plugin git enabled dokku core git plugin letsencrypt enabled Automated installation of lets encrypt TLS certificates logs enabled dokku core logs plugin mongo enabled dokku mongo service plugin network enabled dokku core network plugin nginxvhosts enabled dokku core nginxvhosts plugin plugin enabled dokku core plugin plugin postgres enabled dokku postgres service plugin proxy enabled dokku core proxy plugin ps enabled dokku core ps plugin repo enabled dokku core repo plugin resource enabled dokku core resource plugin schedulerdockerlocal enabled dokku core schedulerdockerlocal plugin shell enabled dokku core shell plugin sshkeys enabled dokku core sshkeys plugin storage enabled dokku core storage plugin tags enabled dokku core tags plugin tar enabled dokku core tar plugin trace enabled dokku core trace plugin metabasetestxxx app information App dir homedokkumetabasetestxxx Git sha Deploy source git Locked false metabasetestxxx buildpacks information Buildpacks list metabasetestxxx ssl information Ssl dir homedokkumetabasetestxxxtls Ssl enabled true Ssl hostnames metabasetestxxxmydomain Ssl expires at Apr GMT Ssl issuer C US O Lets Encrypt CN Lets Encrypt Authority X Ssl starts at Jan GMT Ssl subject subjectCN metabasetestxxxmydomain Ssl verified self signed metabasetestxxx checks information Checks disabled list all Checks skipped list none metabasetestxxx docker options information Docker options build link dokkupostgresmetabasefazzerdatadokkupostgresmetabasefazzerdata link dokkupostgresmetabasefazzermaindokkupostgresmetabasefazzermain Docker options deploy link dokkupostgresmetabasefazzerdatadokkupostgresmetabasefazzerdata link dokkupostgresmetabasefazzermaindokkupostgresmetabasefazzermain restartonfailure Docker options run link dokkupostgresmetabasefazzerdatadokkupostgresmetabasefazzerdata link dokkupostgresmetabasefazzermaindokkupostgresmetabasefazzermain metabasetestxxx domains information Domains app enabled true Domains app vhosts metabasetestxxxmydomain Domains global enabled true Domains global vhosts testxxxmydomain metabasetestxxx git information Git deploy branch master Git global deploy branch master Git keep git dir false Git rev env var GITREV metabasetestxxx network information Network bind all interfaces false Network listeners metabasetestxxx nginx information Nginx bind address ipv Nginx bind address ipv metabasetestxxx proxy information Proxy enabled true Proxy type nginx Proxy port map http https metabasetestxxx ps information Processes Deployed true Running false Restore true Restart policy onfailure Ps can scale true Status web exited CID e d f Status web exited CID af c a Status web exited CID db ffd cec Status web exited CID f b metabasetestxxx schedulerdockerlocal information Scheduler docker local disable chown metabasetestxxx storage information Storage build mounts Storage deploy mounts Storage run mounts How debmakerpm and where AWS VirtualBox physical etc was Dokku installed deb from dokku repo Description of problem Procfile release command throws error that I cant replicate locally using dockercompose but running the exact same command using dokku run works perfectly fine In my case Im using the following Dockerfile to run a nearly empty django app FROM python buster RUN pip install user pipenv ENV PATHPATHrootlocalbin ENV PIPENVVENVINPROJECT COPY app WORKDIR app RUN rm f r venv RUN mkdir venv RUN pipenv install CMD pipenv run gunicorn b workers threads projectwsgiapplication The procfile looks like this release pipenv run python managepy migrate The error looks like this Postdeploy command declared pipenv run python managepy migrate remote execution of pipenv run python managepy migrate failed Traceback most recent call last File rootlocalbinpipenv line in module from pipenv import cli ModuleNotFoundError No module named pipenv The output of running dokku run appname pipenv run python managepy migrate is Operations to perform Apply all migrations admin auth contenttypes sessions Running migrations Applying contenttypes initial OK Applying auth initial OK Applying admin initial OK Applying admin logentryremoveautoadd OK Applying admin logentryaddactionflagchoices OK Applying contenttypes removecontenttypename OK Applying auth alterpermissionnamemaxlength OK Applying auth alteruseremailmaxlength OK Applying auth alteruserusernameopts OK Applying auth alteruserlastloginnull OK Applying auth requirecontenttypes OK Applying auth altervalidatorsadderrormessages OK Applying auth alteruserusernamemaxlength OK Applying auth alteruserlastnamemaxlength OK Applying auth altergroupnamemaxlength OK Applying auth updateproxypermissions OK Applying sessions initial OK How reproducible Every time I try to deploy it happens Steps to Reproduce Clone Setup Dokku create app test for example and createlink a postgres db App needs config SECRETKEYfjdkslafjdk and ENVIRONMENTdev Error should occur on deploy Try running dokku run test pipenv run python managepy migrate and everything will run fine Actual Results Postdeploy command declared pipenv run python managepy migrate remote execution of pipenv run python managepy migrate failed Traceback most recent call last File rootlocalbinpipenv line in module from pipenv import cli ModuleNotFoundError No module named pipenv Expected Results Operations to perform Apply all migrations admin auth contenttypes sessions Running migrations Applying contenttypes initial OK Applying auth initial OK Applying admin initial OK Applying admin logentryremoveautoadd OK Applying admin logentryaddactionflagchoices OK Applying contenttypes removecontenttypename OK Applying auth alterpermissionnamemaxlength OK Applying auth alteruseremailmaxlength OK Applying auth alteruserusernameopts OK Applying auth alteruserlastloginnull OK Applying auth requirecontenttypes OK Applying auth altervalidatorsadderrormessages OK Applying auth alteruserusernamemaxlength OK Applying auth alteruserlastnamemaxlength OK Applying auth altergroupnamemaxlength OK Applying auth updateproxypermissions OK Applying sessions initial OK Environment Information dokku version deployed from DigitalOcean Marketplace on a server with GB memory and vCPU dokku report APPNAME output uname Linux bcfcdokku generic Ubuntu SMP Tue Jun UTC x x x GNULinux memory total used free shared buffcache available Mem Swap docker version Client Version API version Go version go Git commit bc Built Sat May OSArch linuxamd Experimental false Server Docker Engine Community Engine Version API version minimum version Go version go Git commit bc Built Sat May OSArch linuxamd Experimental false docker daemon info Containers Running Paused Stopped Images Server Version Storage Driver overlay Backing Filesystem extfs Supports dtype true Native Overlay Diff true Logging Driver jsonfile Cgroup Driver cgroupfs Plugins Volume local Network bridge host macvlan null overlay Log awslogs fluentd gcplogs gelf journald jsonfile local logentries splunk syslog Swarm inactive Runtimes runc Default Runtime runc Init Binary dockerinit containerd version bb b fd f ca fbb b d eea c runc version b fe d ee ef f fee b d e init version fec Security Options apparmor seccomp Profile default Kernel Version generic Operating System Ubuntu LTS OSType linux Architecture x CPUs Total Memory MiB Name bcfcdokku ID I C NNZV UZRAJBTOHFZVXWQ MLLNYNY QCSASQTRA YR R Docker Root Dir varlibdocker Debug Mode client true Debug Mode server false Registry Labels Experimental false Insecure Registries Live Restore Enabled false Product License Community Engine sigil version herokuish version herokuish buildpacks herokubuildpackmulti v herokubuildpackruby v herokubuildpacknodejs v herokubuildpackclojure v herokubuildpackpython v herokubuildpackjava v herokubuildpackgradle v herokubuildpackscala v herokubuildpackplay v herokubuildpackphp v herokubuildpackgo v buildpacknginx v dokku version dokku version dokku plugins plugn dokkustandard enabled dokku core standard plugin events enabled dokku core events logging plugin appjson enabled dokku core appjson plugin apps enabled dokku core apps plugin buildenv enabled dokku core buildenv plugin buildpacks enabled dokku core buildpacks plugin certs enabled dokku core certificate management plugin checks enabled dokku core checks plugin common enabled dokku core common plugin config enabled dokku core config plugin dockeroptions enabled dokku core dockeroptions plugin domains enabled dokku core domains plugin enter enabled dokku core enter plugin git enabled dokku core git plugin logs enabled dokku core logs plugin network enabled dokku core network plugin nginxvhosts enabled dokku core nginxvhosts plugin plugin enabled dokku core plugin plugin postgres enabled dokku postgres service plugin proxy enabled dokku core proxy plugin ps enabled dokku core ps plugin repo enabled dokku core repo plugin resource enabled dokku core resource plugin schedulerdockerlocal enabled dokku core schedulerdockerlocal plugin shell enabled dokku core shell plugin sshkeys enabled dokku core sshkeys plugin storage enabled dokku core storage plugin tags enabled dokku core tags plugin tar enabled dokku core tar plugin trace enabled dokku core trace plugin test app information App dir homedokkutest Git sha Deploy source git Locked true test buildpacks information Buildpacks list test ssl information Ssl dir homedokkutesttls Ssl enabled false Ssl hostnames Ssl expires at Ssl issuer Ssl starts at Ssl subject Ssl verified test checks information Checks disabled list none Checks skipped list none test docker options information Docker options build link dokkupostgrestestdokkupostgrestest Docker options deploy link dokkupostgrestestdokkupostgrestest restartonfailure Docker options run link dokkupostgrestestdokkupostgrestest test domains information Domains app enabled true Domains app vhosts testbcfcdokkufmairappcom Domains global enabled true Domains global vhosts bcfcdokkufmairappcom test git information Git rev env var GITREV Git deploy branch master Git global deploy branch master test network information Network bind all interfaces false Network listeners test proxy information Proxy enabled true Proxy type nginx Proxy port map http test ps information Processes Deployed true Running true Restore true Restart policy onfailure Ps can scale true Status web running CID dc b fbb test schedulerdockerlocal information Scheduler docker local disable chown test storage information Storage build mounts Storage deploy mounts Storage run mounts How debmakerpm and where AWS VirtualBox physical etc was Dokku installed Installed from DigitalOcean Marketplace on a server with GB memory and vCPU Additional information Container Inspect Output AppArmorProfile dockerdefault Args c pipenv run gunicorn b workers threads projectwsgiapplication Config ArgsEscaped true AttachStderr false AttachStdin false AttachStdout false Cmd binsh c pipenv run gunicorn b workers threads projectwsgiapplication Domainname Entrypoint null Env GITREVXXXXXX SECRETKEYXXXXXX DYNOweb PORT DATABASEURLXXXXXX DOKKUAPPTYPEdockerfile DOKKUDOCKERFILECMDCMD pipenv run gunicorn b workers threads projectwsgiapplication ENVIRONMENTXXXXXX PATHusrlocalbinusrlocalsbinusrlocalbinusrsbinusrbinsbinbinrootlocalbin LANGXXXXXX GPGKEYXXXXXX PYTHONVERSIONXXXXXX PYTHONPIPVERSIONXXXXXX PYTHONGETPIPURLXXXXXX PYTHONGETPIPSHA XXXXXX PIPENVVENVINPROJECTXXXXXX Hostname dc b fbb Image dokkutestlatest Labels dokku OnBuild null OpenStdin false StdinOnce false Tty false User Volumes null WorkingDir app Created T Z Driver overlay ExecIDs null GraphDriver Data LowerDir varlibdockeroverlay ff cfbd adcc d e daacec e f e bbabbdc aa d bd initdiffvarlibdockeroverlay cabf e cd fca b a dc d e fbeb a a a c b d bdiffvarlibdockeroverlay b a b fb e b aeec cd c a e fd be b diffvarlibdockeroverlay b b da cc fc f f e fc b f d ea f ebda diffvarlibdockeroverlay eb d ced b ed d ad e fb dae bda c diffvarlibdockeroverlay e ab d d f dfdf e b b efd a a c e bbe diffvarlibdockeroverlay ef f a c d caeded b b aade af bf ca dfeb c b e b d diffvarlibdockeroverlay ea c b a af afc ea dad de b b b a c c a diffvarlibdockeroverlay f d cc d bcf f c eaae d aca eb d e c f df a c diffvarlibdockeroverlay beb c f da bc f d b e b c dfe c c ae cdiffvarlibdockeroverlay bf eb da acb edab c eaf fa e d c c diffvarlibdockeroverlay cbf d db f e fb aa efb c a af a de f d a ae diffvarlibdockeroverlay fb c af bf ac c e c f f b edde d c diffvarlibdockeroverlay a a b ec baaa fa a e d c d abcf c e d be fbea a diff MergedDir varlibdockeroverlay ff cfbd adcc d e daacec e f e bbabbdc aa d bd merged UpperDir varlibdockeroverlay ff cfbd adcc d e daacec e f e bbabbdc aa d bd diff WorkDir varlibdockeroverlay ff cfbd adcc d e daacec e f e bbabbdc aa d bd work Name overlay HostConfig AutoRemove false Binds null BlkioDeviceReadBps null BlkioDeviceReadIOps null BlkioDeviceWriteBps null BlkioDeviceWriteIOps null BlkioWeight BlkioWeightDevice CapAdd null CapDrop null Cgroup CgroupParent ConsoleSize ContainerIDFile CpuCount CpuPercent CpuPeriod CpuQuota CpuRealtimePeriod CpuRealtimeRuntime CpuShares CpusetCpus CpusetMems DeviceCgroupRules null Devices DiskQuota Dns DnsOptions DnsSearch ExtraHosts null GroupAdd null IOMaximumBandwidth IOMaximumIOps IpcMode shareable Isolation KernelMemory Links dokkupostgrestesttestweb dokkupostgrestest LogConfig Config Type jsonfile MaskedPaths procasound procacpi prockcore prockeys proclatencystats proctimerlist proctimerstats procscheddebug procscsi sysfirmware Memory MemoryReservation MemorySwap MemorySwappiness null NanoCpus NetworkMode default OomKillDisable false OomScoreAdj PidMode PidsLimit PortBindings Privileged false PublishAllPorts false ReadonlyPaths procbus procfs procirq procsys procsysrqtrigger ReadonlyRootfs false RestartPolicy MaximumRetryCount Name onfailure Runtime runc SecurityOpt null ShmSize UTSMode Ulimits null UsernsMode VolumeDriver VolumesFrom null HostnamePath varlibdockercontainers dc b fbb f bec cadda c aab c e bf ee hostname HostsPath varlibdockercontainers dc b fbb f bec cadda c aab c e bf ee hosts Id dc b fbb f bec cadda c aab c e bf ee Image sha d c f c f e ffc e adf e b f d a bdcae d LogPath varlibdockercontainers dc b fbb f bec cadda c aab c e bf ee dc b fbb f bec cadda c aab c e bf ee jsonlog MountLabel Mounts Name testweb NetworkSettings Bridge EndpointID bb ab d ec a a c f d c c f abc f b ce c Gateway GlobalIPv Address GlobalIPv PrefixLen HairpinMode false IPAddress IPPrefixLen IPv Gateway LinkLocalIPv Address LinkLocalIPv PrefixLen MacAddress ac Networks bridge Aliases null DriverOpts null EndpointID bb ab d ec a a c f d c c f abc f b ce c Gateway GlobalIPv Address GlobalIPv PrefixLen IPAMConfig null IPAddress IPPrefixLen IPv Gateway Links null MacAddress ac NetworkID e b f cd b c b fdb f b fb f a b e c f Ports SandboxID d e b e ca b c cde dbb f SandboxKey varrundockernetns d e b SecondaryIPAddresses null SecondaryIPv Addresses null Path binsh Platform linux ProcessLabel ResolvConfPath varlibdockercontainers dc b fbb f bec cadda c aab c e bf ee resolvconf RestartCount State Dead false Error ExitCode FinishedAt T Z OOMKilled false Paused false Pid Restarting false Running true StartedAt T Z Status running Repo Other Application name test The type of application being deployed node php python ruby etc django app as docker image If using a Dockerfile the contents of that file see above If it exists the contents of your Procfile see above Output of failing Dokku commands after running dokku traceon perl warning Setting locale failed perl warning Please check that your locale settings LANGUAGE unset LCALL unset LCCTYPE enCAUTF LANG CUTF are supported and installed on your system perl warning Falling back to a fallback locale CUTF Enumerating objects done Counting objects done Delta compression using up to threads Compressing objects done Writing objects KiB MiBs done Total delta reused delta remote test currently has a deploy lock in place Exiting To IPADDRESStest remote rejected master master prereceive hook declined error failed to push some refs to dokkuIPADDRESStest raphaeltitsworthmorinRaphaelsMBP dokkuerror git push dokku master perl warning Setting locale failed perl warning Please check that your locale settings LANGUAGE unset LCALL unset LCCTYPE enCAUTF LANG CUTF are supported and installed on your system perl warning Falling back to a fallback locale CUTF Enumerating objects done Counting objects done Delta compression using up to threads Compressing objects done Writing objects KiB MiBs done Total delta reused delta Cleaning up Building test from dockerfile Setting config vars DOKKUDOCKERFILECMD CMD pipenv run gunicorn b workers threads projectwsgiapplication remote build context to Docker daemon kB Step FROM python buster f e Step RUN pip install user pipenv Using cache b c f f ab Step ENV PATHPATHrootlocalbin Using cache f a be d Step ENV PIPENVVENVINPROJECT Using cache b cbc Step COPY app bb f e Step WORKDIR app Running in b e a Removing intermediate container b e a baf b Step RUN rm f r venv Running in f cb Removing intermediate container f cb baa ab Step RUN mkdir venv Running in ef f f Removing intermediate container ef f f abc c c a Step RUN pipenv install Running in a d dfeda Creating a virtualenv for this project Pipfile appPipfile Using usrlocalbinpython to create virtualenv remote Creating virtual environmentAlready using interpreter usrlocalbinpython Using base prefix usrlocal New python executable in appvenvbinpython Installing setuptools pip wheel done Successfully created virtual environment Virtualenv location appvenv Installing dependencies from Pipfilelock bfdba An error occurred while installing djdatabaseurl hashsha aeaeb f c b a b b ffc aa ecd d e cb hashsha ebe a b eb fedd e b fcecc ed da Will try again An error occurred while installing django hashsha f c be f bf bd fd a c e b c a f bdd fb a hashsha c f e d e e c f ea bd ce fa ba ca Will try again An error occurred while installing pytz hashsha c d d e de f ccd f fb da be c e d d hashsha b c db cf c dd e b d b fcc ad abb a f be Will try again Installing initially failed dependencies To activate this projects virtualenv run pipenv shell Alternatively run a command inside the virtualenv with pipenv run Removing intermediate container a d dfeda db ae a Step CMD pipenv run gunicorn b workers threads projectwsgiapplication Running in f f d b d Removing intermediate container f f d b d fa a Successfully built fa a Successfully tagged dokkutestlatest Releasing test dokkutestlatest Deploying test dokkutestlatest Release command declared pipenv run python managepy migrate remote execution of pipenv run python managepy migrate failed Traceback most recent call last File rootlocalbinpipenv line in module from pipenv import cli ModuleNotFoundError No module named pipenv To IPADDRESStest remote rejected master master prereceive hook declined error failed to push some refs to dokkuIPADDRESStest raphaeltitsworthmorinRaphaelsMBP dokkuerror git push dokku master export DOKKUHOSTROOThomedokku DOKKUHOSTROOThomedokku export DOKKUDISTRO etcosrelease echo ubuntu DOKKUDISTROubuntu export DOCKERBINdocker DOCKERBINdocker export DOKKUIMAGEgliderlabsherokuishlatest DOKKUIMAGEgliderlabsherokuishlatest export DOKKULIBROOTvarlibdokku DOKKULIBROOTvarlibdokku export PLUGINPATHvarlibdokkuplugins PLUGINPATHvarlibdokkuplugins export PLUGINAVAILABLEPATHvarlibdokkupluginsavailable PLUGINAVAILABLEPATHvarlibdokkupluginsavailable export PLUGINENABLEDPATHvarlibdokkupluginsenabled PLUGINENABLEDPATHvarlibdokkupluginsenabled export PLUGINCOREPATHvarlibdokkucoreplugins PLUGINCOREPATHvarlibdokkucoreplugins export PLUGINCOREAVAILABLEPATHvarlibdokkucorepluginsavailable PLUGINCOREAVAILABLEPATHvarlibdokkucorepluginsavailable export PLUGINCOREENABLEDPATHvarlibdokkucorepluginsenabled PLUGINCOREENABLEDPATHvarlibdokkucorepluginsenabled export DOKKUSYSTEMGROUPdokku DOKKUSYSTEMGROUPdokku export DOKKUSYSTEMUSERdokku DOKKUSYSTEMUSERdokku export DOKKUAPIVERSION DOKKUAPIVERSION export DOKKUNOTIMPLEMENTEDEXIT DOKKUNOTIMPLEMENTEDEXIT export DOKKUVALIDEXIT DOKKUVALIDEXIT export DOKKULOGSDIRvarlogdokku DOKKULOGSDIRvarlogdokku export DOKKUEVENTSLOGFILEvarlogdokkueventslog DOKKUEVENTSLOGFILEvarlogdokkueventslog export DOKKUCONTAINERLABELdokku DOKKUCONTAINERLABELdokku export DOKKUGLOBALRUNARGSlabeldokku DOKKUGLOBALRUNARGSlabeldokku source varlibdokkucorepluginsavailablecommonfunctions set eo pipefail n set x parseargs gitreceivepack test declare desctoplevel cli arg parser local nextindex local skipfalse args local args for arg in false t r u e case arg in nextindex for arg in false t r u e case arg in nextindex return args skipargfalse gitreceivepack hastty declare descreturn if we have a tty usrbintty true not a tty n o t a t t y return DOKKUQUIETOUTPUT id un dokku d o k k u gitreceivepack plugin gitreceivepack s s h k e y s a d d n gitreceivepack test export n SSHORIGINALCOMMAND gitreceivepack config gitreceivepack dockeroptions set f usrbindokku gitreceivepack test export DOKKUHOSTROOThomedokku DOKKUHOSTROOThomedokku export DOKKUDISTRO etcosrelease echo ubuntu DOKKUDISTROubuntu export DOCKERBINdocker DOCKERBINdocker export DOKKUIMAGEgliderlabsherokuishlatest DOKKUIMAGEgliderlabsherokuishlatest export DOKKULIBROOTvarlibdokku DOKKULIBROOTvarlibdokku export PLUGINPATHvarlibdokkuplugins PLUGINPATHvarlibdokkuplugins export PLUGINAVAILABLEPATHvarlibdokkupluginsavailable PLUGINAVAILABLEPATHvarlibdokkupluginsavailable export PLUGINENABLEDPATHvarlibdokkupluginsenabled PLUGINENABLEDPATHvarlibdokkupluginsenabled export PLUGINCOREPATHvarlibdokkucoreplugins PLUGINCOREPATHvarlibdokkucoreplugins export PLUGINCOREAVAILABLEPATHvarlibdokkucorepluginsavailable PLUGINCOREAVAILABLEPATHvarlibdokkucorepluginsavailable export PLUGINCOREENABLEDPATHvarlibdokkucorepluginsenabled PLUGINCOREENABLEDPATHvarlibdokkucorepluginsenabled export DOKKUSYSTEMGROUPdokku DOKKUSYSTEMGROUPdokku export DOKKUSYSTEMUSERdokku DOKKUSYSTEMUSERdokku export DOKKUAPIVERSION DOKKUAPIVERSION export DOKKUNOTIMPLEMENTEDEXIT DOKKUNOTIMPLEMENTEDEXIT export DOKKUVALIDEXIT DOKKUVALIDEXIT export DOKKULOGSDIRvarlogdokku DOKKULOGSDIRvarlogdokku export DOKKUEVENTSLOGFILEvarlogdokkueventslog DOKKUEVENTSLOGFILEvarlogdokkueventslog export DOKKUCONTAINERLABELdokku DOKKUCONTAINERLABELdokku export DOKKUGLOBALRUNARGSlabeldokku DOKKUGLOBALRUNARGSlabeldokku source varlibdokkucorepluginsavailablecommonfunctions set eo pipefail n set x parseargs gitreceivepack test declare desctoplevel cli arg parser local nextindex local skipfalse args local args for arg in false t r u e case arg in nextindex for arg in false t r u e case arg in nextindex return args skipargfalse gitreceivepack hastty declare descreturn if we have a tty usrbintty true not a tty n o t a t t y return DOKKUQUIETOUTPUT id un dokku d o k k u gitreceivepack plugin gitreceivepack s s h k e y s a d d n dokkuauth gitreceivepack test declare desccalls userauth plugin trigger export SSHUSERdokku SSHUSERdokku export SSHNAMEadmin SSHNAMEadmin plugn trigger userauth dokku admin gitreceivepack test source varlibdokkucorepluginsavailablecommonfunctions set eo pipefail n set x n source varlibdokkucorepluginsavailablecommonfunctions set eo pipefail n set x gitreceivepack sshkeysaddsshkeysremove return case in executedokkucmd gitreceivepack test declare descexecutes dokku subcommands local PLUGINNAMEgitreceivepack local PLUGINCMDgitreceivepack local implemented local script argv local argv case PLUGINNAME in readlink f varlibdokkupluginsenabledgitreceivepack varlibdokkupluginsenabledgitreceivepack coreplugins x varlibdokkupluginsenabledgitreceivepacksubcommandsdefault x varlibdokkupluginsenabledgitreceivepacksubcommandsgitreceivepack x varlibdokkupluginsenabledgitreceivepacksubcommandsgitreceivepack eq for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenabled dokkustandardcommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenabled eventscommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenabledappscommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenabledbuildpackscommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenabledcertscommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenabledcheckscommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenabledconfigcommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenableddockeroptionscommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenableddomainscommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenabledentercommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenabledgitcommands gitreceivepack test source varlibdokkupluginsavailablegitfunctions source varlibdokkucorepluginsavailablecommonfunctions set eo pipefail n set x source varlibdokkucorepluginsavailablecommonpropertyfunctions set eo pipefail n set x source varlibdokkupluginsavailableappsfunctions set eo pipefail n set x source varlibdokkucorepluginsavailablecommonfunctions set eo pipefail n set x source varlibdokkupluginsavailableconfigfunctions set eo pipefail n set x source varlibdokkucorepluginsavailablecommonfunctions set eo pipefail n set x source varlibdokkupluginsavailableconfigfunctions set eo pipefail n set x source varlibdokkucorepluginsavailablecommonfunctions set eo pipefail n set x set eo pipefail n set x source varlibdokkupluginsavailablegitinternalfunctions source varlibdokkucorepluginsavailablecommonfunctions set eo pipefail n set x source varlibdokkucorepluginsavailablecommonpropertyfunctions set eo pipefail n set x set eo pipefail n set x case in gitglobcmd gitreceivepack test declare desccatchall for any other git commands local cmdgit sed s g sed s g perl pe s g echo test perl warning Setting locale failed perl warning Please check that your locale settings LANGUAGE unset LCALL unset LCCTYPE enCAUTF LANG CUTF are supported and installed on your system perl warning Falling back to a fallback locale CUTF local APPtest local APPPATHhomedokkutest isvalidappname test declare descverify app name format local APPtest z test test az test AZ test return gitreceivepack g i t r e c e i v e p a c k d homedokkutestrefs gitreceivepack g i t r e c e i v e p a c k local argsgitreceivepack homedokkutest gitshell c gitreceivepack homedokkutest Enumerating objects done Counting objects done Delta compression using up to threads Compressing objects done Writing objects KiB MiBs done Total delta reused delta remote export DOKKUHOSTROOThomedokku remote DOKKUHOSTROOThomedokku remote export DOKKUDISTRO remote etcosrelease remote echo ubuntu remote DOKKUDISTROubuntu remote export DOCKERBINdocker remote DOCKERBINdocker remote export DOKKUIMAGEgliderlabsherokuishlatest remote DOKKUIMAGEgliderlabsherokuishlatest remote export DOKKULIBROOTvarlibdokku remote DOKKULIBROOTvarlibdokku remote export PLUGINPATHvarlibdokkuplugins remote PLUGINPATHvarlibdokkuplugins remote export PLUGINAVAILABLEPATHvarlibdokkupluginsavailable remote PLUGINAVAILABLEPATHvarlibdokkupluginsavailable remote export PLUGINENABLEDPATHvarlibdokkupluginsenabled remote PLUGINENABLEDPATHvarlibdokkupluginsenabled remote export PLUGINCOREPATHvarlibdokkucoreplugins remote PLUGINCOREPATHvarlibdokkucoreplugins remote export PLUGINCOREAVAILABLEPATHvarlibdokkucorepluginsavailable remote PLUGINCOREAVAILABLEPATHvarlibdokkucorepluginsavailable remote export PLUGINCOREENABLEDPATHvarlibdokkucorepluginsenabled remote PLUGINCOREENABLEDPATHvarlibdokkucorepluginsenabled remote export DOKKUSYSTEMGROUPdokku remote DOKKUSYSTEMGROUPdokku remote export DOKKUSYSTEMUSERdokku remote DOKKUSYSTEMUSERdokku remote export DOKKUAPIVERSION remote DOKKUAPIVERSION remote export DOKKUNOTIMPLEMENTEDEXIT remote DOKKUNOTIMPLEMENTEDEXIT remote export DOKKUVALIDEXIT remote DOKKUVALIDEXIT remote export DOKKULOGSDIRvarlogdokku remote DOKKULOGSDIRvarlogdokku remote export DOKKUEVENTSLOGFILEvarlogdokkueventslog remote DOKKUEVENTSLOGFILEvarlogdokkueventslog remote export DOKKUCONTAINERLABELdokku remote DOKKUCONTAINERLABELdokku remote export DOKKUGLOBALRUNARGSlabeldokku remote DOKKUGLOBALRUNARGSlabeldokku remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote parseargs githook test remote declare desctoplevel cli arg parser remote local nextindex remote local skipfalse remote args remote local args remote for arg in remote false t r u e remote case arg in remote nextindex remote for arg in remote false t r u e remote case arg in remote nextindex remote return remote args remote skipargfalse remote githook remote hastty remote declare descreturn if we have a tty remote usrbintty remote true remote not a tty n o t a t t y remote return remote DOKKUQUIETOUTPUT remote id un remote dokku d o k k u remote githook plugin remote githook s s h k e y s a d d remote n remote dokkuauth githook test remote declare desccalls userauth plugin trigger remote export SSHUSERdokku remote SSHUSERdokku remote export SSHNAMEadmin remote SSHNAMEadmin remote plugn trigger userauth dokku admin githook test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote githook sshkeysaddsshkeysremove remote return remote case in remote executedokkucmd githook test remote declare descexecutes dokku subcommands remote local PLUGINNAMEgithook remote local PLUGINCMDgithook remote local implemented remote local script remote argv remote local argv remote case PLUGINNAME in remote readlink f varlibdokkupluginsenabledgithook remote varlibdokkupluginsenabledgithook coreplugins remote x varlibdokkupluginsenabledgithooksubcommandsdefault remote x varlibdokkupluginsenabledgithooksubcommandsgithook remote x varlibdokkupluginsenabledgithooksubcommandsgithook remote eq remote for script in PLUGINENABLEDPATHcommands remote set e remote varlibdokkupluginsenabled dokkustandardcommands githook test remote exitcode remote set e remote eq remote continue remote for script in PLUGINENABLEDPATHcommands remote set e remote varlibdokkupluginsenabled eventscommands githook test remote exitcode remote set e remote eq remote continue remote for script in PLUGINENABLEDPATHcommands remote set e remote varlibdokkupluginsenabledappscommands githook test remote exitcode remote set e remote eq remote continue remote for script in PLUGINENABLEDPATHcommands remote set e remote varlibdokkupluginsenabledbuildpackscommands githook test remote exitcode remote set e remote eq remote continue remote for script in PLUGINENABLEDPATHcommands remote set e remote varlibdokkupluginsenabledcertscommands githook test remote exitcode remote set e remote eq remote continue remote for script in PLUGINENABLEDPATHcommands remote set e remote varlibdokkupluginsenabledcheckscommands githook test remote exitcode remote set e remote eq remote continue remote for script in PLUGINENABLEDPATHcommands remote set e remote varlibdokkupluginsenabledconfigcommands githook test remote exitcode remote set e remote eq remote continue remote for script in PLUGINENABLEDPATHcommands remote set e remote varlibdokkupluginsenableddockeroptionscommands githook test remote exitcode remote set e remote eq remote continue remote for script in PLUGINENABLEDPATHcommands remote set e remote varlibdokkupluginsenableddomainscommands githook test remote exitcode remote set e remote eq remote continue remote for script in PLUGINENABLEDPATHcommands remote set e remote varlibdokkupluginsenabledentercommands githook test remote exitcode remote set e remote eq remote continue remote for script in PLUGINENABLEDPATHcommands remote set e remote varlibdokkupluginsenabledgitcommands githook test remote source varlibdokkupluginsavailablegitfunctions remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonpropertyfunctions remote set eo pipefail remote n remote set x remote source varlibdokkupluginsavailableappsfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote set eo pipefail remote n remote set x remote source varlibdokkupluginsavailablegitinternalfunctions remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonpropertyfunctions remote set eo pipefail remote n remote set x remote set eo pipefail remote n remote set x remote case in remote githookcmd githook test remote declare desckick off receiveapp trigger from git prereceive hook remote local cmdgithook remote local APPtest remote local DOKKUDEPLOYBRANCH remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote gitdeploybranch test remote declare descretrieve the deploy branch for a given application remote local cmdgithook remote local APPtest remote fnpluginpropertyget git test deploybranch remote declare descreturns the property store value for an app remote declare PLUGINgit APPtest KEYdeploybranch DEFAULT remote local CONFIGVALUE remote z git remote z test remote z deploybranch remote fnpluginpropertyread git test deploybranch remote declare descread a key from the property store for an app remote declare PLUGINgit APPtest KEYdeploybranch remote z git remote z test remote z deploybranch remote f varlibdokkuconfiggittestdeploybranch remote return remote true remote CONFIGVALUE remote z remote CONFIGVALUE remote echo remote local DOKKUDEPLOYBRANCH remote fnpluginpropertyget git global deploybranch remote declare descreturns the property store value for an app remote declare PLUGINgit APPglobal KEYdeploybranch DEFAULT remote local CONFIGVALUE remote z git remote z global remote z deploybranch remote fnpluginpropertyread git global deploybranch remote declare descread a key from the property store for an app remote declare PLUGINgit APPglobal KEYdeploybranch remote z git remote z global remote z deploybranch remote f varlibdokkuconfiggitglobaldeploybranch remote return remote true remote CONFIGVALUE remote z remote CONFIGVALUE remote echo remote local DOKKUGLOBALDEPLOYBRANCH remote n remote n remote echo master remote DOKKUDEPLOYBRANCHmaster remote git checkrefformat branch master remote local oldrev newrev refname remote read r oldrev newrev refname remote refsheadsmaster r e f s h e a d s m a s t e r remote gitreceiveapp test cb b ac abcc d dbf b e c remote declare descgit receiveapp plugin trigger remote declare APPtest REV cb b ac abcc d dbf b e c remote d homedokkutestrefs remote acquireappdeploylock test exclusive remote declare descacquire advisory lock for use in gittar deploys remote local APPtest remote verifyappname test remote declare descverify app name format and app existence remote local APPtest remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote d homedokkutest remote return remote local LOCKTYPEexclusive remote local APPDEPLOYLOCKFILEhomedokkutestdeploylock remote local LOCKWAITINGMSGtest currently has a deploy lock in place Waiting remote local LOCKFAILEDMSGtest currently has a deploy lock in place Exiting remote acquireadvisorylock homedokkutestdeploylock exclusive test currently has a deploy lock in place Waiting test currently has a deploy lock in place Exiting remote declare descacquire advisory lock remote local LOCKFILEhomedokkutestdeploylock LOCKTYPEexclusive LOCKWAITINGMSGtest currently has a deploy lock in place Waiting LOCKFAILEDMSGtest currently has a deploy lock in place Exiting remote local LOCKFD remote local SHOWMSGtrue remote eval exec homedokkutestdeploylock remote exec remote exclusive w a i t i n g remote flock n remote gitbuild test cb b ac abcc d dbf b e c remote declare descsetup and call gitbuildapprepo remote local APPtest REV cb b ac abcc d dbf b e c remote local DOKKUDEPLOYBRANCH ENVVARNAME REF remote ge remote fnpluginpropertyget git test revenvvar remote declare descreturns the property store value for an app remote declare PLUGINgit APPtest KEYrevenvvar DEFAULT remote local CONFIGVALUE remote z git remote z test remote z revenvvar remote fnpluginpropertyread git test revenvvar remote declare descread a key from the property store for an app remote declare PLUGINgit APPtest KEYrevenvvar remote z git remote z test remote z revenvvar remote f varlibdokkuconfiggittestrevenvvar remote return remote true remote CONFIGVALUE remote z remote CONFIGVALUE remote echo remote ENVVARNAME remote z remote fnpluginpropertyexists git test revenvvar remote declare descreturns whether the property store has a value for an app remote declare PLUGINgit APPtest KEYrevenvvar DEFAULT remote local CONFIGVALUE remote z git remote z test remote z revenvvar remote f varlibdokkuconfiggittestrevenvvar remote return remote ENVVARNAMEGITREV remote n GITREV remote DOKKUQUIETOUTPUT remote configset norestart test GITREV cb b ac abcc d dbf b e c remote declare descset value of given config var remote configsub set norestart test GITREV cb b ac abcc d dbf b e c remote declare descexecutes a config subcommand remote local nameset remote shift remote varlibdokkupluginsavailableconfigsubcommandsset configset norestart test GITREV cb b ac abcc d dbf b e c remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote local REF cb b ac abcc d dbf b e c remote gitbuildapprepo test cb b ac abcc d dbf b e c remote declare descbuilds local git app repo for app remote declare APPtest REV cb b ac abcc d dbf b e c remote local DOKKUGLOBALDISABLEAUTOCREATE remote verifyappname test remote declare descverify app name format and app existence remote local APPtest remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote d homedokkutest remote return remote mktemp d tmpdokkugitbuildapprepoXXXX remote local GITBUILDAPPREPOTMPWORKDIRtmpdokkugitbuildapprepouPme remote trap rm rf tmpdokkugitbuildapprepouPme devnull RETURN INT TERM EXIT remote local TMPTAGdokku cb b ac abcc d dbf b e c remote chmod tmpdokkugitbuildapprepouPme remote unset GITDIR GITWORKTREE remote appsexists test remote usegitworktree remote declare descdetects whether to use git worktree remote local GITVERSION MAJORVERSION MINORVERSION remote awk split a print a remote git version remote GITVERSION remote awk split a print a remote echo remote MAJORVERSION remote awk split a print a remote echo remote MINORVERSION remote ge remote eq remote ge remote return remote pushd homedokkutest remote suppressoutput env u GITQUARANTINEPATH git worktree add tmpdokkugitbuildapprepouPme cb b ac abcc d dbf b e c remote declare descsuppress all output from a given command unless there is an error remote local TMPCOMMANDOUTPUT remote mktemp tmpdokkusuppressoutputXXXX remote TMPCOMMANDOUTPUTtmpdokkusuppressoutputhfju remote trap rm rf tmpdokkusuppressoutputhfju devnull RETURN remote env u GITQUARANTINEPATH git worktree add tmpdokkugitbuildapprepouPme cb b ac abcc d dbf b e c remote return remote rm rf tmpdokkusuppressoutputhfju remote popd remote pushd tmpdokkugitbuildapprepouPme remote suppressoutput env u GITQUARANTINEPATH git submodule update init recursive remote declare descsuppress all output from a given command unless there is an error remote local TMPCOMMANDOUTPUT remote mktemp tmpdokkusuppressoutputXXXX remote TMPCOMMANDOUTPUTtmpdokkusuppressoutput Hkx remote trap rm rf tmpdokkusuppressoutput Hkx devnull RETURN remote env u GITQUARANTINEPATH git submodule update init recursive remote return remote rm rf tmpdokkusuppressoutput Hkx remote find name git prune exec rm rf remote usegitworktree remote declare descdetects whether to use git worktree remote local GITVERSION MAJORVERSION MINORVERSION remote awk split a print a remote git version remote GITVERSION remote awk split a print a remote echo remote MAJORVERSION remote awk split a print a remote echo remote MINORVERSION remote ge remote eq remote ge remote return remote pushd homedokkutest remote git worktree prune remote popd remote local DOKKUAPPDISABLEANSIPREFIXREMOVAL DOKKUGLOBALDISABLEANSIPREFIXREMOVAL DOKKUDISABLEANSIPREFIXREMOVAL remote configget test DOKKUDISABLEANSIPREFIXREMOVAL remote declare descget value of given config var remote configsub get test DOKKUDISABLEANSIPREFIXREMOVAL remote declare descexecutes a config subcommand remote local nameget remote shift remote varlibdokkupluginsavailableconfigsubcommandsget configget test DOKKUDISABLEANSIPREFIXREMOVAL remote true remote DOKKUAPPDISABLEANSIPREFIXREMOVAL remote configget global DOKKUDISABLEANSIPREFIXREMOVAL remote declare descget value of given config var remote configsub get global DOKKUDISABLEANSIPREFIXREMOVAL remote declare descexecutes a config subcommand remote local nameget remote shift remote varlibdokkupluginsavailableconfigsubcommandsget configget global DOKKUDISABLEANSIPREFIXREMOVAL remote true remote DOKKUGLOBALDISABLEANSIPREFIXREMOVAL remote DOKKUDISABLEANSIPREFIXREMOVAL remote t r u e remote gittriggerbuild test tmpdokkugitbuildapprepouPme cb b ac abcc d dbf b e c remote declare desctriggers the actual build process for a given app within a directory at a particular revision remote declare APPtest TMPWORKDIRtmpdokkugitbuildapprepouPme REV cb b ac abcc d dbf b e c remote plugn trigger postextract test tmpdokkugitbuildapprepouPme cb b ac abcc d dbf b e c remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote f Dockerfile remote f env remote echo remote remote f buildpacks remote configget test BUILDPACKURL remote declare descget value of given config var remote configsub get test BUILDPACKURL remote declare descexecutes a config subcommand remote local nameget remote shift remote varlibdokkupluginsavailableconfigsubcommandsget configget test BUILDPACKURL remote true remote z remote plugn trigger prereceiveapp test dockerfile tmpdokkugitbuildapprepouPme cb b ac abcc d dbf b e c remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote dokkureceive test dockerfile tmpdokkugitbuildapprepouPme remote declare descreceives an app kicks off deploy process remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote local APPtest remote getappimagename test remote declare descreturn image identifier for a given app tag tuple validate if tag is presented remote local APPtest remote local IMAGETAG remote IMAGEREPO remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote z remote getappimagerepo test remote declare desccentral definition of image repo pattern remote local APPtest remote local IMAGEREPOdokkutest remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote echo dokkutest remote IMAGEREPOdokkutest remote n remote local IMAGEdokkutestlatest remote echo dokkutestlatest remote local IMAGEdokkutestlatest remote local IMAGESOURCETYPEdockerfile remote local TMPWORKDIRtmpdokkugitbuildapprepouPme remote configget test DOKKUSKIPCLEANUP remote declare descget value of given config var remote configsub get test DOKKUSKIPCLEANUP remote declare descexecutes a config subcommand remote local nameget remote shift remote varlibdokkupluginsavailableconfigsubcommandsget configget test DOKKUSKIPCLEANUP remote true remote local DOKKUSKIPCLEANUP remote dockercleanup test remote declare desccleans up all exiteddead containers and removes all dangling images remote declare APPtest FORCECLEANUP remote local DOKKUAPPSKIPCLEANUP remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote t r u e remote n test remote configget test DOKKUSKIPCLEANUP remote declare descget value of given config var remote configsub get test DOKKUSKIPCLEANUP remote declare descexecutes a config subcommand remote local nameget remote shift remote varlibdokkupluginsavailableconfigsubcommandsget configget test DOKKUSKIPCLEANUP remote true remote DOKKUAPPSKIPCLEANUP remote n remote n remote dokkuloginfo Cleaning up remote declare desclog info formatter remote echo Cleaning up Cleaning up remote getappscheduler test remote declare descfetch the scheduler for a given application remote declare APPtest remote local DOKKUAPPSCHEDULER DOKKUGLOBALSCHEDULER DOKKUSCHEDULER remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n test remote configget test DOKKUSCHEDULER remote declare descget value of given config var remote configsub get test DOKKUSCHEDULER remote declare descexecutes a config subcommand remote local nameget remote shift remote varlibdokkupluginsavailableconfigsubcommandsget configget test DOKKUSCHEDULER remote true remote DOKKUAPPSCHEDULER remote configget global DOKKUSCHEDULER remote declare descget value of given config var remote configsub get global DOKKUSCHEDULER remote declare descexecutes a config subcommand remote local nameget remote shift remote varlibdokkupluginsavailableconfigsubcommandsget configget global DOKKUSCHEDULER remote true remote DOKKUGLOBALSCHEDULER remote DOKKUSCHEDULER remote z remote DOKKUSCHEDULERdockerlocal remote echo dockerlocal remote local DOKKUSCHEDULERdockerlocal remote plugn trigger schedulerdockercleanup dockerlocal test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote schedulerdockerlocalschedulerdockercleanup dockerlocal test remote declare descschedulerdockerlocal schedulerdockercleanup plugin trigger remote declare triggerschedulerdockerlocal schedulerdockercleanup remote declare DOKKUSCHEDULERdockerlocal APPtest FORCECLEANUP remote dockerlocal d o c k e r l o c a l remote docker ps a f statusexited f labeldokku q remote docker rm e ce remote docker ps a f statusdead f labeldokku q remote docker rm remote true remote docker images f danglingtrue q remote docker rmi d c f d fa d c b remote docker ps a f statusexited f labeldokku q remote docker rm remote true remote docker ps a f statusdead f labeldokku q remote docker rm remote true remote dokkuloginfo Building test from dockerfile remote declare desclog info formatter remote echo Building test from dockerfile Building test from dockerfile remote DOKKUQUIETOUTPUT remote configset norestart test DOKKUAPPTYPEdockerfile remote declare descset value of given config var remote configsub set norestart test DOKKUAPPTYPEdockerfile remote declare descexecutes a config subcommand remote local nameset remote shift remote varlibdokkupluginsavailableconfigsubcommandsset configset norestart test DOKKUAPPTYPEdockerfile remote docker images f danglingtrue q remote docker rmi d c f d fa d c b remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote dokkubuild test dockerfile tmpdokkugitbuildapprepouPme remote declare descbuild phase remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote local APPtest remote local IMAGESOURCETYPEdockerfile remote local TMPWORKDIRtmpdokkugitbuildapprepouPme remote getappimagename test remote declare descreturn image identifier for a given app tag tuple validate if tag is presented remote local APPtest remote local IMAGETAG remote IMAGEREPO remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote z remote getappimagerepo test remote declare desccentral definition of image repo pattern remote local APPtest remote local IMAGEREPOdokkutest remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote echo dokkutest remote IMAGEREPOdokkutest remote n remote local IMAGEdokkutestlatest remote echo dokkutestlatest remote local IMAGEdokkutestlatest remote local cid remote verifyappname test remote declare descverify app name format and app existence remote local APPtest remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote d homedokkutest remote return remote local DOKKUAPPCACHEDIRhomedokkutestcache remote local DOKKUAPPHOSTCACHEDIRhomedokkutestcache remote configexport app test remote declare descreturns export command for config variable of specified type appglobal remote local CONFIGTYPEapp remote shift remote local APPtest remote app g l o b a l remote shift remote configsub export test remote declare descexecutes a config subcommand remote local nameexport remote shift remote varlibdokkupluginsavailableconfigsubcommandsexport configexport test remote return remote eval export DATABASEURL postgrespostgres d cde d f aa dd b fae adokkupostgrestest test remote export DOKKUAPPRESTORE remote export DOKKUAPPTYPE dockerfile remote export DOKKUDOCKERFILECMD CMD pipenv run gunicorn b workers threads projectwsgiapplication remote export DOKKUPROXYPORT remote export DOKKUPROXYPORTMAP http remote export ENVIRONMENT dev remote export GITREV cb b ac abcc d dbf b e c remote export SECRETKEY fjdklsfjeif wjei rjewe wjv remote export DATABASEURLpostgrespostgres d cde d f aa dd b fae adokkupostgrestest test remote DATABASEURLpostgrespostgres d cde d f aa dd b fae adokkupostgrestest test remote export DOKKUAPPRESTORE remote DOKKUAPPRESTORE remote export DOKKUAPPTYPEdockerfile remote DOKKUAPPTYPEdockerfile remote export DOKKUDOCKERFILECMDCMD pipenv run gunicorn b workers threads projectwsgiapplication remote DOKKUDOCKERFILECMDCMD pipenv run gunicorn b workers threads projectwsgiapplication remote export DOKKUPROXYPORT remote DOKKUPROXYPORT remote export DOKKUPROXYPORTMAPhttp remote DOKKUPROXYPORTMAPhttp remote export ENVIRONMENTdev remote ENVIRONMENTdev remote export GITREV cb b ac abcc d dbf b e c remote GITREV cb b ac abcc d dbf b e c remote export SECRETKEYfjdklsfjeif wjei rjewe wjv remote SECRETKEYfjdklsfjeif wjei rjewe wjv remote pushd tmpdokkugitbuildapprepouPme remote case IMAGESOURCETYPE in remote getdockerfileexposedports Dockerfile remote declare descreturn all exposed ports from passed file path remote xargs remote awk print remote egrep EXPOSE Dockerfile remote local DOCKERFILEPORTS remote echo remote local DOCKERFILEPORTS remote n remote extractdirectivefromdockerfile Dockerfile ENTRYPOINT remote declare descreturn requested directive from passed file path remote local FILEPATHDockerfile remote local SEARCHSTRINGENTRYPOINT remote tail n remote egrep ENTRYPOINT Dockerfile remote local FOUNDLINE remote echo remote local DOCKERFILEENTRYPOINT remote n remote extractdirectivefromdockerfile Dockerfile CMD remote declare descreturn requested directive from passed file path remote local FILEPATHDockerfile remote local SEARCHSTRINGCMD remote tail n remote egrep CMD Dockerfile remote local FOUNDLINECMD pipenv run gunicorn b workers threads projectwsgiapplication remote echo CMD pipenv run gunicorn b workers threads projectwsgiapplication remote local DOCKERFILECMDCMD pipenv run gunicorn b workers threads projectwsgiapplication remote n CMD pipenv run gunicorn b workers threads projectwsgiapplication remote configset norestart test DOKKUDOCKERFILECMDCMD pipenv run gunicorn b workers threads projectwsgiapplication remote declare descset value of given config var remote configsub set norestart test DOKKUDOCKERFILECMDCMD pipenv run gunicorn b workers threads projectwsgiapplication remote declare descexecutes a config subcommand remote local nameset remote shift remote varlibdokkupluginsavailableconfigsubcommandsset configset norestart test DOKKUDOCKERFILECMDCMD pipenv run gunicorn b workers threads projectwsgiapplication Setting config vars DOKKUDOCKERFILECMD CMD pipenv run gunicorn b workers threads projectwsgiapplication remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote plugn trigger prebuilddockerfile test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote f a l s e remote plugn trigger dockerargsbuild test dockerfile remote remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote appuserdockerargs test dockerfile remote local APPtest remote local STDIN remote local DOKKUAPPTYPE remote local DOKKUAPPUSER remote cat remote STDIN remote configget test DOKKUAPPTYPE remote declare descget value of given config var remote configsub get test DOKKUAPPTYPE remote declare descexecutes a config subcommand remote local nameget remote shift remote varlibdokkupluginsavailableconfigsubcommandsget configget test DOKKUAPPTYPE remote DOKKUAPPTYPEdockerfile remote configget test DOKKUAPPUSER remote declare descget value of given config var remote configsub get test DOKKUAPPUSER remote declare descexecutes a config subcommand remote local nameget remote shift remote varlibdokkupluginsavailableconfigsubcommandsget configget test DOKKUAPPUSER remote true remote DOKKUAPPUSER remote DOKKUAPPUSERherokuishuser remote dockerfile h e r o k u i s h remote local dockerargs remote echo n remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote dockerargs test dockerfile remote declare descdocker args plugin trigger remote local triggervarlibdokkupluginsenableddockeroptionsdockerargsbuild remote cat remote local STDIN remote local APPtest remote local IMAGESOURCETYPEdockerfile remote case in remote local PHASEBUILD remote local FILEPREFIXDOCKEROPTIONS remote local PHASEFILEPATHhomedokkutestDOCKEROPTIONSBUILD remote local output remote f homedokkutestDOCKEROPTIONSBUILD remote local DONEfalse remote false remote local line remote read r line remote z link dokkupostgrestestdokkupostgrestest remote case line in remote case IMAGESOURCETYPE in remote case line in remote continue remote false remote local line remote read r line remote local DONEtrue remote z remote continue remote true remote echo n remote local DOCKERARGS remote local IMAGESOURCETYPEdockerfile remote plugn trigger dockerargsprocessbuild test dockerfile remote remote DOCKERARGS remote sed e svolume graph blank g e sv blank graph blank g remote local DOCKERARGS remote declare a ARGARRAY remote eval ARGARRAY remote ARGARRAY remote docker build t dokkutestlatest remote build context to Docker daemon kB Step FROM python buster f e Step RUN pip install user pipenv Using cache b c f f ab Step ENV PATHPATHrootlocalbin Using cache f a be d Step ENV PIPENVVENVINPROJECT Using cache b cbc Step COPY app Using cache bb f e Step WORKDIR app Using cache baf b Step RUN rm f r venv Using cache baa ab Step RUN mkdir venv Using cache abc c c a Step RUN pipenv install Using cache db ae a Step CMD pipenv run gunicorn b workers threads projectwsgiapplication Using cache fa a Successfully built fa a Successfully tagged dokkutestlatest remote plugn trigger postbuilddockerfile test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote releaseanddeploy test remote declare descmain function for releasing and deploying an app remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote local APPtest remote local IMAGETAG remote getappimagename test remote declare descreturn image identifier for a given app tag tuple validate if tag is presented remote local APPtest remote local IMAGETAG remote IMAGEREPO remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote z remote getappimagerepo test remote declare desccentral definition of image repo pattern remote local APPtest remote local IMAGEREPOdokkutest remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote echo dokkutest remote IMAGEREPOdokkutest remote n remote local IMAGEdokkutestlatest remote echo dokkutestlatest remote local IMAGEdokkutestlatest remote local DOKKUDOCKERFILEPORTS remote verifyappname test remote declare descverify app name format and app existence remote local APPtest remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote d homedokkutest remote return remote verifyimage dokkutestlatest remote declare descverify image existence remote local IMAGEdokkutestlatest remote docker inspect dokkutestlatest remote return remote isimageherokuishbased dokkutestlatest remote declare descreturns true if app image is based on herokuish remote declare IMAGEdokkutestlatest remote local USERVALUE remote z dokkutestlatest remote docker inspect f range ConfigEnvif eq USERherokuishuser println endend dokkutestlatest remote USERVALUE remote remote return remote local IMAGESOURCETYPEdockerfile remote configget test DOKKUDOCKERFILEPORTS remote declare descget value of given config var remote configsub get test DOKKUDOCKERFILEPORTS remote declare descexecutes a config subcommand remote local nameget remote shift remote varlibdokkupluginsavailableconfigsubcommandsget configget test DOKKUDOCKERFILEPORTS remote true remote DOKKUDOCKERFILEPORTS remote z remote getexposedportsfromimage dokkutestlatest remote declare descreturn all exposed ports from passed image name remote local IMAGEdokkutestlatest remote verifyimage dokkutestlatest remote declare descverify image existence remote local IMAGEdokkutestlatest remote docker inspect dokkutestlatest remote return remote docker inspect f range key value ConfigExposedPortskey end dokkutestlatest remote local DOCKERIMAGEEXPOSEDPORTS remote echo remote local DOCKERIMAGEPORTS remote n remote configget test DOKKUSKIPDEPLOY remote declare descget value of given config var remote configsub get test DOKKUSKIPDEPLOY remote declare descexecutes a config subcommand remote local nameget remote shift remote varlibdokkupluginsavailableconfigsubcommandsget configget test DOKKUSKIPDEPLOY remote true remote local DOKKUAPPSKIPDEPLOY remote configget global DOKKUSKIPDEPLOY remote declare descget value of given config var remote configsub get global DOKKUSKIPDEPLOY remote declare descexecutes a config subcommand remote local nameget remote shift remote varlibdokkupluginsavailableconfigsubcommandsget configget global DOKKUSKIPDEPLOY remote true remote local DOKKUGLOBALSKIPDEPLOY remote local DOKKUSKIPDEPLOY remote dokkuloginfo Releasing test dokkutestlatest remote declare desclog info formatter remote echo Releasing test dokkutestlatest remote dokkurelease test dockerfile remote declare descrelease phase remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x Releasing test dokkutestlatest remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote local APPtest remote local IMAGESOURCETYPEdockerfile remote local IMAGETAG remote getappimagename test remote declare descreturn image identifier for a given app tag tuple validate if tag is presented remote local APPtest remote local IMAGETAG remote IMAGEREPO remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote z remote getappimagerepo test remote declare desccentral definition of image repo pattern remote local APPtest remote local IMAGEREPOdokkutest remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote echo dokkutest remote IMAGEREPOdokkutest remote n remote local IMAGEdokkutestlatest remote echo dokkutestlatest remote local IMAGEdokkutestlatest remote local cid remote verifyappname test remote declare descverify app name format and app existence remote local APPtest remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote d homedokkutest remote return remote case IMAGESOURCETYPE in remote plugn trigger prereleasedockerfile test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote plugn trigger postreleasedockerfile test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote t r u e remote dokkuloginfo Deploying test dokkutestlatest remote declare desclog info formatter remote echo Deploying test dokkutestlatest remote dokkudeploycmd test remote declare descdeploy phase remote declare APPtest IMAGETAG remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x Deploying test dokkutestlatest remote getappscheduler test remote declare descfetch the scheduler for a given application remote declare APPtest remote local DOKKUAPPSCHEDULER DOKKUGLOBALSCHEDULER DOKKUSCHEDULER remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n test remote configget test DOKKUSCHEDULER remote declare descget value of given config var remote configsub get test DOKKUSCHEDULER remote declare descexecutes a config subcommand remote local nameget remote shift remote varlibdokkupluginsavailableconfigsubcommandsget configget test DOKKUSCHEDULER remote true remote DOKKUAPPSCHEDULER remote configget global DOKKUSCHEDULER remote declare descget value of given config var remote configsub get global DOKKUSCHEDULER remote declare descexecutes a config subcommand remote local nameget remote shift remote varlibdokkupluginsavailableconfigsubcommandsget configget global DOKKUSCHEDULER remote true remote DOKKUGLOBALSCHEDULER remote DOKKUSCHEDULER remote z remote DOKKUSCHEDULERdockerlocal remote echo dockerlocal remote local DOKKUSCHEDULERdockerlocal remote plugn trigger schedulerdeploy dockerlocal test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote source varlibdokkupluginsavailablechecksfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote source varlibdokkupluginsavailablepsfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote source varlibdokkupluginsavailableschedulerdockerlocalinternalfunctions remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonpropertyfunctions remote set eo pipefail remote n remote set x remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote set eo pipefail remote n remote set x remote schedulerdockerlocalschedulerdeploy dockerlocal test remote declare descdeploys an image tag for a given application remote declare triggerschedulerdockerlocal schedulerdeploy remote declare DOKKUSCHEDULERdockerlocal APPtest IMAGETAG remote dockerlocal d o c k e r l o c a l remote rm f varlibdokkudataschedulerdockerlocaltestfailedcontainers remote local DOKKUDOCKERSTOPTIMEOUT DOKKUHEROKUISH DOKKUNETWORKBINDALL IMAGE remote DOKKUHEROKUISHfalse remote getdeployingappimagename test remote declare descreturn deploying image identifier for a given app tag tuple validate if tag is presented remote local APPtest remote local IMAGETAG remote IMAGEREPO remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote plugn trigger deployedapprepository test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote local IMAGEREMOTEREPOSITORY remote plugn trigger deployedappimagetag test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote local NEWIMAGETAG remote plugn trigger deployedappimagerepo test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote local NEWIMAGEREPO remote n remote n remote z remote getappimagerepo test remote declare desccentral definition of image repo pattern remote local APPtest remote local IMAGEREPOdokkutest remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote echo dokkutest remote IMAGEREPOdokkutest remote z remote IMAGETAGlatest remote local IMAGEdokkutestlatest remote verifyimage dokkutestlatest remote declare descverify image existence remote local IMAGEdokkutestlatest remote docker inspect dokkutestlatest remote return remote echo dokkutestlatest remote IMAGEdokkutestlatest remote verifyappname test remote declare descverify app name format and app existence remote local APPtest remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote d homedokkutest remote return remote plugn trigger predeploy test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailableappjsoninternalfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote source varlibdokkupluginsavailablepsfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote appjsonpredeploy test remote declare descappjson scripts execution remote local triggerappjsonpredeploy remote local APPtest remote local IMAGETAG remote local PHASESCRIPTKEYpredeploy remote executescript test predeploy remote declare descexecutes appropriate phase script key from appjson remote declare APPtest IMAGETAG PHASESCRIPTKEYpredeploy remote local IMAGE id SCRIPTCMD remote getdeployingappimagename test remote declare descreturn deploying image identifier for a given app tag tuple validate if tag is presented remote local APPtest remote local IMAGETAG remote IMAGEREPO remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote plugn trigger deployedapprepository test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote local IMAGEREMOTEREPOSITORY remote plugn trigger deployedappimagetag test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote local NEWIMAGETAG remote plugn trigger deployedappimagerepo test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote local NEWIMAGEREPO remote n remote n remote z remote getappimagerepo test remote declare desccentral definition of image repo pattern remote local APPtest remote local IMAGEREPOdokkutest remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote echo dokkutest remote IMAGEREPOdokkutest remote z remote IMAGETAGlatest remote local IMAGEdokkutestlatest remote verifyimage dokkutestlatest remote declare descverify image existence remote local IMAGEdokkutestlatest remote docker inspect dokkutestlatest remote return remote echo dokkutestlatest remote IMAGEdokkutestlatest remote predeploy r e l e a s e remote getphasescript dokkutestlatest predeploy remote true remote SCRIPTCMD remote z remote return remote executescript test release remote declare descexecutes appropriate phase script key from appjson remote declare APPtest IMAGETAG PHASESCRIPTKEYrelease remote local IMAGE id SCRIPTCMD remote getdeployingappimagename test remote declare descreturn deploying image identifier for a given app tag tuple validate if tag is presented remote local APPtest remote local IMAGETAG remote IMAGEREPO remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote plugn trigger deployedapprepository test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote local IMAGEREMOTEREPOSITORY remote plugn trigger deployedappimagetag test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote local NEWIMAGETAG remote plugn trigger deployedappimagerepo test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote local NEWIMAGEREPO remote n remote n remote z remote getappimagerepo test remote declare desccentral definition of image repo pattern remote local APPtest remote local IMAGEREPOdokkutest remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote echo dokkutest remote IMAGEREPOdokkutest remote z remote IMAGETAGlatest remote local IMAGEdokkutestlatest remote verifyimage dokkutestlatest remote declare descverify image existence remote local IMAGEdokkutestlatest remote docker inspect dokkutestlatest remote return remote echo dokkutestlatest remote IMAGEdokkutestlatest remote release r e l e a s e remote getreleasecmd test remote removeprocfile test remote declare descremoves DOKKUPROCFILE remote local APPtest remote local DOKKUPROCFILEhomedokkutestDOKKUPROCFILE remote f homedokkutestDOKKUPROCFILE remote SCRIPTCMDpipenv run python managepy migrate remote z pipenv run python managepy migrate remote dokkulogexclaim Release command declared pipenv run python managepy migrate remote declare desclog exclaim formatter remote echo Release command declared pipenv run python managepy migrate remote local COMMAND remote COMMANDset eo pipefail DOKKUTRACE set x remote COMMAND if d app then remote COMMAND export HOMEapp remote COMMAND cd HOME remote COMMAND fi remote COMMAND if d appprofiled then remote COMMAND for file in appprofiled do source file done remote COMMAND fi remote COMMAND if d cache then remote COMMAND rm rf tmpcache remote COMMAND ln sf cache tmpcache remote COMMAND fi remote pipenv run python managepy migrate remote COMMAND pipenv run python managepy migrate exit remote COMMAND if d cache then remote COMMAND rm f tmpcache remote COMMAND fi remote local CACHEDIRhomedokkutestcache remote local CACHEHOSTDIRhomedokkutestcache remote d homedokkutestcache Release command declared pipenv run python managepy migrate remote plugn trigger dockerargsdeploy test remote remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote appuserdockerargs test remote local APPtest remote local STDIN remote local DOKKUAPPTYPE remote local DOKKUAPPUSER remote cat remote STDIN remote configget test DOKKUAPPTYPE remote declare descget value of given config var remote configsub get test DOKKUAPPTYPE remote declare descexecutes a config subcommand remote local nameget remote shift remote varlibdokkupluginsavailableconfigsubcommandsget configget test DOKKUAPPTYPE remote DOKKUAPPTYPEdockerfile remote configget test DOKKUAPPUSER remote declare descget value of given config var remote configsub get test DOKKUAPPUSER remote declare descexecutes a config subcommand remote local nameget remote shift remote varlibdokkupluginsavailableconfigsubcommandsget configget test DOKKUAPPUSER remote true remote DOKKUAPPUSER remote DOKKUAPPUSERherokuishuser remote dockerfile h e r o k u i s h remote local dockerargs remote echo n remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote source varlibdokkupluginsavailableconfigfunctions remote set eo pipefail remote n remote set x remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote configdockerargs test remote declare descconfig dockerargs plugin trigger remote declare APPtest IMAGETAG remote local ENVARGS IMAGE STDIN trigger remote getdeployingappimagename test remote declare descreturn deploying image identifier for a given app tag tuple validate if tag is presented remote local APPtest remote local IMAGETAG remote IMAGEREPO remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote plugn trigger deployedapprepository test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote local IMAGEREMOTEREPOSITORY remote plugn trigger deployedappimagetag test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote local NEWIMAGETAG remote plugn trigger deployedappimagerepo test remote source varlibdokkucorepluginsavailablecommonfunctions remote set eo pipefail remote n remote set x remote n remote local NEWIMAGEREPO remote n remote n remote z remote getappimagerepo test remote declare desccentral definition of image repo pattern remote local APPtest remote local IMAGEREPOdokkutest remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote echo dokkutest remote IMAGEREPOdokkutest remote z remote IMAGETAGlatest remote local IMAGEdokkutestlatest remote verifyimage dokkutestlatest remote declare descverify image existence remote local IMAGEdokkutestlatest remote docker inspect dokkutestlatest remote return remote echo dokkutestlatest remote IMAGEdokkutestlatest remote cat remote STDIN remote triggervarlibdokkupluginsenabledconfigdockerargsdeploy configdockerargs remote verifyappname test remote declare descverify app name format and app existence remote local APPtest remote isvalidappname test remote declare descverify app name format remote local APPtest remote z test remote test az remote test AZ remote test remote return remote d homedokkutest remote return remote isimageherokuishbased dokkutestlatest remote declare descreturns true if app image is based on herokuish remote declare IMAGEdokkutestlatest remote local USERVALUE remote z dokkutestlatest remote docker inspect f range ConfigEnvif eq USERherokuishuser println endend dokkutestlatest remote USERVALUE remote remote return remote configexport app test format dockerargs merged remote declare descreturns export command for config variable of specified type appglobal remote local CONFIGTYPEapp remote shift remote local APPtest remote app g l o b a l remote shift remote configsub export format dockerargs merged test remote declare descexecutes a config subcommand remote local nameexport remote shift remote varlibdokkupluginsavailableconfigsubcommandsexport configexport format dockerargs merged test remote return remote ENVARGSenvDATABASEURL postgrespostgres d cde d f aa dd b fae adokkupostgrestest test envDOKKUAPPRESTORE envDOKKUAPPTYPE dockerfile envDOKKUDOCKERFILECMD CMD pipenv run gunicorn b workers threads projectwsgiapplication envDOKKUPROXYPORT envDOKKUPROXYPORTMAP http envENVIRONMENT dev envGITREV cb b ac abcc d dbf b e c envSECRETKEY fjdklsfjeif wjei rjewe wjv remote echo n envDATABASEURL postgrespostgres d cde d f aa dd b fae adokkupostgrestest test envDOKKUAPPRESTORE envDOKKUAPPTYPE dockerfile envDOKKUDOCKERFILECMD CMD pipenv run gunicorn b workers threads projectwsgiapplication envDOKKUPROXYPORT envDOKKUPROXYPORTMAP http envENVIRONMENT dev envGITREV cb b ac abcc d dbf b e c envSECRETKEY fjdklsfjeif wjei rjewe wjv remote dockerargs test remote declare descdocker args plugin trigger remote local triggervarlibdokkupluginsenableddockeroptionsdockerargsdeploy remote cat remote local STDIN remote local APPtest remote local IMAGESOURCETYPE remote case in remote local PHASEDEPLOY remote local FILEPREFIXDOCKEROPTIONS remote local PHASEFILEPATHhomedokkutestDOCKEROPTIONSDEPLOY remote local output remote f homedokkutestDOCKEROPTIONSDEPLOY remote local DONEfalse remote false remote local line remote read r line remote z link dokkupostgrestestdokkupostgrestest remote case line in remote case IMAGESOURCETYPE in remote local output link dokkupostgrestestdokkupostgrestest remote false remote local line remote read r line remote z restartonfailure remote case line in remote case IMAGESOURCETYPE in remote local output link dokkupostgrestestdokkupostgrestest restartonfailure remote false remote local line remote read r line remote local DONEtrue remote z remote continue remote true remote echo n link dokkupostgrestestdokkupostgrestest restartonfailure remote local DOCKERARGS envDATABASEURL postgrespostgres d cde d f aa dd b fae adokkupostgrestest test envDOKKUAPPRESTORE envDOKKUAPPTYPE dockerfile envDOKKUDOCKERFILECMD CMD pipenv run gunicorn b workers threads projectwsgiapplication envDOKKUPROXYPORT envDOKKUPROXYPORTMAP http envENVIRONMENT dev envGITREV cb b ac abcc d dbf b e c envSECRETKEY fjdklsfjeif wjei rjewe wjv link dokkupostgrestestdokkupostgrestest restartonfailure remote sed e srestart graph blank g remote local DOCKERARGS envDATABASEURL postgrespostgres d cde d f aa dd b fae adokkupostgrestest test envDOKKUAPPRESTORE envDOKKUAPPTYPE dockerfile envDOKKUDOCKERFILECMD CMD pipenv run gunicorn b workers threads projectwsgiapplication envDOKKUPROXYPORT envDOKKUPROXYPORTMAP http envENVIRONMENT dev envGITREV cb b ac abcc d dbf b e c envSECRETKEY fjdklsfjeif wjei rjewe wjv link dokkupostgrestestdokkupostgrestest remote local IMAGESOURCETYPEdockerfile remote isimageherokuishbased dokkutestlatest remote declare descreturns true if app image is based on herokuish remote declare IMAGEdokkutestlatest remote local USERVALUE remote z dokkutestlatest remote docker inspect f range ConfigEnvif eq USERherokuishuser println endend dokkutestlatest remote USERVALUE remote remote return remote plugn trigger dockerargsprocessdeploy test dockerfile remote remote DOCKERARGS remote declare a ARGARRAY remote eval ARGARRAY envDATABASEURL postgrespostgres d cde d f aa dd b fae adokkupostgrestest test envDOKKUAPPRESTORE envDOKKUAPPTYPE dockerfile envDOKKUDOCKERFILECMD CMD pipenv run gunicorn b workers threads projectwsgiapplication envDOKKUPROXYPORT envDOKKUPROXYPORTMAP http envENVIRONMENT dev envGITREV cb b ac abcc d dbf b e c envSECRETKEY fjdklsfjeif wjei rjewe wjv link dokkupostgrestestdokkupostgrestest remote ARGARRAYenvDATABASEURLpostgrespostgres d cde d f aa dd b fae adokkupostgrestest test envDOKKUAPPRESTORE envDOKKUAPPTYPEdockerfile envDOKKUDOCKERFILECMDCMD pipenv run gunicorn b workers threads projectwsgiapplication envDOKKUPROXYPORT envDOKKUPROXYPORTMAPhttp envENVIRONMENTdev envGITREV cb b ac abcc d dbf b e c envSECRETKEYfjdklsfjeif wjei rjewe wjv link dokkupostgrestestdokkupostgrestest remote local DOKKUAPPSHELLbinbash remote configget global DOKKUAPPSHELL remote declare descget value of given config var remote configsub get global DOKKUAPPSHELL remote declare descexecutes a config subcommand remote local nameget remote shift remote varlibdokkupluginsavailableconfigsubcommandsget configget global DOKKUAPPSHELL remote echo binbash remote DOKKUAPPSHELLbinbash remote configget test DOKKUAPPSHELL remote declare descget value of given config var remote configsub get test DOKKUAPPSHELL remote declare descexecutes a config subcommand remote local nameget remote shift remote varlibdokkupluginsavailableconfigsubcommandsget configget test DOKKUAPPSHELL remote echo binbash remote DOKKUAPPSHELLbinbash remote z binbash remote docker run labeldokku e DOKKUTRACE labeldokkuphasescriptrelease d v homedokkutestcachecache envDATABASEURLpostgrespostgres d cde d f aa dd b fae adokkupostgrestest test envDOKKUAPPRESTORE envDOKKUAPPTYPEdockerfile envDOKKUDOCKERFILECMDCMD pipenv run gunicorn b workers threads projectwsgiapplication envDOKKUPROXYPORT envDOKKUPROXYPORTMAPhttp envENVIRONMENTdev envGITREV cb b ac abcc d dbf b e c envSECRETKEYfjdklsfjeif wjei rjewe wjv link dokkupostgrestestdokkupostgrestest dokkutestlatest binbash c set eo pipefail DOKKUTRACE set x if d app then export HOMEapp cd HOME fi if d appprofiled then for file in appprofiled do source file done fi if d cache then rm rf tmpcache ln sf cache tmpcache fi pipenv run python managepy migrate exit if d cache then rm f tmpcache fi remote id f b ad fdba be d b ace cec a e b e a remote docker wait f b ad fdba be d b ace cec a e b e a remote test ne remote dokkucontainerlogverbosequiet f b ad fdba be d b ace cec a e b e a remote declare desclog verbose container output with quiet option remote local CID f b ad fdba be d b ace cec a e b e a remote shift remote OIFS remote remote IFS remote remote local line remote docker logs f b ad fdba be d b ace cec a e b e a remote for line in DOCKERBIN logs CID remote dokkulogverbosequiet d app remote declare desclog verbose formatter with quiet option remote z remote echo d app remote for line in DOCKERBIN logs CID remote dokkulogverbosequiet export HOMEapp remote declare desclog verbose formatter with quiet option remote z remote echo export HOMEapp remote for line in DOCKERBIN logs CID remote dokkulogverbosequiet HOMEapp remote declare desclog verbose formatter with quiet option remote z remote echo HOMEapp remote for line in DOCKERBIN logs CID remote dokkulogverbosequiet cd app remote declare desclog verbose formatter with quiet option remote z remote echo cd app remote for line in DOCKERBIN logs CID remote dokkulogverbosequiet d appprofiled remote declare desclog verbose formatter with quiet option remote z remote echo d appprofiled remote for line in DOCKERBIN logs CID remote dokkulogverbosequiet d cache remote declare desclog verbose formatter with quiet option remote z remote echo d cache remote for line in DOCKERBIN logs CID remote dokkulogverbosequiet rm rf tmpcache remote declare desclog verbose formatter with quiet option remote z remote echo rm rf tmpcache remote for line in DOCKERBIN logs CID remote dokkulogverbosequiet ln sf cache tmpcache remote declare desclog verbose formatter with quiet option remote z remote echo ln sf cache tmpcache remote for line in DOCKERBIN logs CID remote dokkulogverbosequiet pipenv run python managepy migrate remote declare desclog verbose formatter with quiet option remote z remote echo pipenv run python managepy migrate remote for line in DOCKERBIN logs CID remote dokkulogverbosequiet Traceback most recent call last remote declare desclog verbose formatter with quiet option remote z remote echo Traceback most recent call last remote for line in DOCKERBIN logs CID remote dokkulogverbosequiet File rootlocalbinpipenv line in module remote declare desclog verbose formatter with quiet option remote z remote echo File rootlocalbinpipenv line in module remote for line in DOCKERBIN logs CID remote dokkulogverbosequiet from pipenv import cli remote declare desclog verbose formatter with quiet option remote z remote echo from pipenv import cli remote for line in DOCKERBIN logs CID remote dokkulogverbosequiet ModuleNotFoundError No module named pipenv remote declare desclog verbose formatter with quiet option remote z remote echo ModuleNotFoundError No module named pipenv remote for line in DOCKERBIN logs CID remote dokkulogverbosequiet exit remote declare desclog verbose formatter with quiet option remote z remote echo exit remote IFS remote remote dokkulogfail execution of pipenv run python managepy migrate failed remote declare desclog fail formatter remote echo execution of pipenv run python managepy migrate failed d app export HOMEapp HOMEapp cd app d appprofiled d cache rm rf tmpcache ln sf cache tmpcache pipenv run python managepy migrate Traceback most recent call last File rootlocalbinpipenv line in module from pipenv import cli ModuleNotFoundError No module named pipenv exit remote execution of pipenv run python managepy migrate failed remote exit remote rm rf tmpdokkugitbuildapprepouPme remote exitcode remote set e remote eq remote implemented remote ne remote exit exitcode set e eq implemented ne for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenabledlogscommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenablednetworkcommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenablednginxvhostscommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenabledplugincommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenabledpostgrescommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenabledproxycommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenabledpscommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenabledrepocommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenabledresourcecommands gitreceivepack test exitcode set e eq continue for script in PLUGINENABLEDPATHcommands set e varlibdokkupluginsenabledschedulerdockerlocalcommands gitreceivepack test source varlibdokkupluginsavailableschedulerdockerlocalinternalfunctions source varlibdokkucorepluginsavailablecommonfunctions set eo pipefail n set x source varlibdokkucorepluginsavailablecommonpropertyfunctions set eo pipefail n set x source varlibdokkupluginsavailableconfigfunctions set eo pipefail n set x source varlibdokkucorepluginsavailablecommonfunctions set eo pipefail n set x set eo pipefail n set x case in exit exitcode set e eq continue This will make the CoC apply to every project not just the main project Description of problem After changing scale of worker process from Procfile from to for example instances stay running and are left dangling not being updated even after redeploy How reproducible Steps to Reproduce Deploy application with worker Scale worker to Scale worker to Actual Results All containers stay running and on next push only first are updated and other stay the same Expected Results Only new workers remain running Environment Information dokku report APPNAME output I can not publish all of the information but I will update if required uname Linux dokku generic Ubuntu SMP Tue Nov UTC x x x GNULinux memory total used free shared buffcache available Mem Swap docker version Client Docker Engine Community Version API version Go version go Git commit a ea Built Wed Nov OSArch linuxamd Experimental false Server Docker Engine Community Engine Version API version minimum version Go version go Git commit a ea Built Wed Nov OSArch linuxamd Experimental false containerd Version GitCommit b a c af e c db c f fa runc Version rc dev GitCommit e f a c f e d a c b d aa dockerinit Version GitCommit fec docker daemon info Client Debug Mode true Server Containers Running Paused Stopped Images Server Version Storage Driver overlay Backing Filesystem extfs Supports dtype true Native Overlay Diff true Logging Driver jsonfile Cgroup Driver cgroupfs Plugins Volume local Network bridge host ipvlan macvlan null overlay Log awslogs fluentd gcplogs gelf journald jsonfile local logentries splunk syslog Swarm inactive Runtimes runc Default Runtime runc Init Binary dockerinit containerd version b a c af e c db c f fa runc version e f a c f e d a c b d aa init version fec Security Options apparmor seccomp Profile default Kernel Version generic Operating System Ubuntu LTS OSType linux Architecture x CPUs Total Memory GiB Name dokku ID T HKJFDJLSFPVV AN YHXWE HSPFOBJ HNDWR SAO O Docker Root Dir varlibdocker Debug Mode false WARNING No swap limit support Registry Labels Experimental false Insecure Registries Live Restore Enabled false sigil version herokuish version herokuish buildpacks herokubuildpackmulti v herokubuildpackruby v herokubuildpacknodejs v herokubuildpackclojure v herokubuildpackpython v herokubuildpackjava v herokubuildpackgradle v herokubuildpackscala v herokubuildpackplay v herokubuildpackphp v herokubuildpackgo v buildpacknginx v dokku version dokku version dokku plugins plugn dokkustandard enabled dokku core standard plugin events enabled dokku core events logging plugin appjson enabled dokku core appjson plugin apps enabled dokku core apps plugin builderdockerfile enabled dokku core builderdockerfile plugin builderherokuish enabled dokku core builderherokuish plugin buildpacks enabled dokku core buildpacks plugin certs enabled dokku core certificate management plugin checks enabled dokku core checks plugin common enabled dokku core common plugin config enabled dokku core config plugin dockeroptions enabled dokku core dockeroptions plugin domains enabled dokku core domains plugin enter enabled dokku core enter plugin git enabled dokku core git plugin graphitegrafana enabled dokku statsd graphite service plugin with grafana dashboard letsencrypt enabled Automated installation of lets encrypt TLS certificates logs enabled dokku core logs plugin mongo enabled dokku mongo service plugin network enabled dokku core network plugin nginxvhosts enabled dokku core nginxvhosts plugin plugin enabled dokku core plugin plugin postgres enabled dokku postgres service plugin proxy enabled dokku core proxy plugin ps enabled dokku core ps plugin redis enabled dokku redis service plugin repo enabled dokku core repo plugin resource enabled dokku core resource plugin schedulerdockerlocal enabled dokku core schedulerdockerlocal plugin shell enabled dokku core shell plugin sshkeys enabled dokku core sshkeys plugin storage enabled dokku core storage plugin tags enabled dokku core tags plugin tar enabled dokku core tar plugin trace enabled dokku core trace plugin How debmakerpm and where AWS VirtualBox physical etc was Dokku installed I used original script on Ubuntu so I guess deb It is installed on KVM I just had a container not get cleaned up I had previously cleaned up a bunch of containers with nondokku names they had Dockers randomwords names but this container was properly named myappweb and had been around for a month I have PMed you the docker inspect output if dokku is installed on a host where port is already used by some other service you have to set DOKKUPROXYPORT for each app separately This change would check the global config DOKKUPROXYPORT in case its not set for the app If its not set in global scope than the original default is used From It appears that we call dockerargsprocessbuild with an unspecified IMAGETAG argument This is not available and is passed as an empty string We should investigate if it was ever available and likely fix the hook call I think this will necessitate a minor release due to the breaking api Hi The current cli allows setting dockeroptions for the build deploy and run phase I use the command to set the env var for a Dockerfile console dokku dockeroptionsadd nodejsapp build buildarg NODEENVprod I dont do that by hand I have a deployment script that looks more like that console dokku dockeroptionsadd DEPLOYMENTNAME build buildarg NODEENVINPUTNODEENV You can see that the INPUTNODEENV is more dynamic That makes it difficult to change or remove the variable for the next deployment because I dont know the value from the last deployment Something like this would be awesome console dokku dockeroptionsclear nodejs build We should always fail the nginx config build if the network config isnt available as that means we may potentially be passing incorrectmissing ip and port information to the nginx plugin Add provision line to Windows Vagrant box definition so dokkuinstaller service is runningavailable by default in dokkuwindows box This is to fix issue 