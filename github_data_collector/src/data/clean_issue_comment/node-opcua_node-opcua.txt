 IF YOU DONT FILL OUT THE FOLLOWING INFORMATION WE MIGHT CLOSE YOUR ISSUE WITHOUT INVESTIGATING Im submitting a check one with x x bug report search github for a similar issue or PR before submitting feature request support request Please do not submit support request here instead see use use gitter or stackoverflow for community support or contact Sterfive for commercial support contact sterfivecom Current behavior In the browseFilterFunction the SessionContext is always undefined Expected behavior The SessionContext is set Minimal reproduction of the problem with instructions If the current behavior is a bug or you can illustrate your feature request better with an example please provide the STEPS TO REPRODUCE and if possible a MINIMAL DEMO of the problem Start Server Connect with Client to Server Browse to Folder Test Important Please also provide a self contains source code of a nodeopcua client and server that demonstrate the isssue gist javascript import as opcua from nodeopcua const server new opcuaOPCUAServer port interface MyAddOptions extends opcuaAddBaseNodeOptions browseFilter session opcuaSessionContext boolean function browseFiltercontext opcuaSessionContext boolean if context null return false return true server start then const addrSpace serverengineaddressSpace if addrSpace null return const namespace addrSpacegetOwnNamespace const options MyAddOptions browseName Test browseFilter browseFilter namespaceaddFolderaddrSpacerootFolderobjects options catchreason consoleerrorreason What is the motivation use case for changing the behavior The motiviation is to Hide some Nodes for some User Please tell us about your environment Operating system opcua server or client type package manager equipment vendor info my request is related to nodeopcua acting as a OPCUA CLIENT x my request is related to nodeopcua acting as a OPCUA SERVER I have installed nodeopcua from source using git clone x I have installed nodeopcua as a package using npm install I am using an application that uses nodeopcua nodered other please specify Device OS version x Windows version WIN Linux version MacOs version Raspbian version Other specify nodeopcua version Node node version Im submitting a x bug report feature request x support request Current behavior Using the nodecrawler I cannot get the nodeClass of every node I only get the nodeClass of the root node Im crawling Expected behavior Id like to get every nodes nodeClass Im not sure if this is a bug or if Im just missing to pass any options to the crawler What Im doing is basically just const crawler new NodeCrawlermySession const nodeId ObjectsFolder crawlerreadnodeId function err obj consolelogobj And it works Im able to crawl different servers on a PLC the public Milo example server and another one I wrote with Milo But I dont get the nodeClasses Is there anything Im missing or is this a bug My result currently looks like this browseName Objects nodeId ns i nodeClass organizes browseName DeviceSet nodeId ns i typeDefinition BaseObjectType organizes browseName CODESYS Control Win V x nodeId ns splcCODESYS Control Win V x organizes Thanks for any help in advance My apologies I tried this again and it is still throwing the error I can successfully start this sample server Most of this is new to me NPM nodejs etc so I might just be doing something stupid Im submitting a check one with x X bug report search github for a similar issue or PR before submitting feature request support request Please do not submit support request here instead see use use gitter or stackoverflow for community support or contact Sterfive for commercial support contact sterfivecom Current behavior Following this quick guide created directory homeserver ran npm init I accepted the defaults dont know if I should do differently I ran npm install nodeopcua unsafeperms to resolve cannot find module nodeopcua created indexjs with code from tutorial ran node indexjs error TypeError Assignment to constant variable at homepihomeserverindexjs at fulfilled homepihomeservernodemodulesqqjs at selfpromiseDispatchdone homepihomeservernodemodulesqqjs at PromisepromisepromiseDispatch homepihomeservernodemodulesqqjs at homepihomeservernodemodulesqqjs at runSingle homepihomeservernodemodulesqqjs at flush homepihomeservernodemodulesqqjs at combinedTickCallback internalprocessnexttickjs at processtickCallback internalprocessnexttickjs Expected behavior Expose the temperature of the connected temperature sensor I have tested cat w slave and am able to see the data Minimal reproduction of the problem with instructions gist What is the motivation use case for changing the behavior Please tell us about your environment my request is related to nodeopcua acting as a OPCUA CLIENT X my request is related to nodeopcua acting as a OPCUA SERVER I have installed nodeopcua from source using git clone X I have installed nodeopcua as a package using npm install I am using an application that uses nodeopcua nodered other please specify Device OS version Windows version Linux version MacOs version X Raspbian version Other specify Description of the other OPCUA system I am trying to connect to Name Version ManufacturerSoftware vendor link https nodeopcua version Node node version v IF YOU DONT FILL OUT THE FOLLOWING INFORMATION WE MIGHT CLOSE YOUR ISSUE WITHOUT INVESTIGATING Im submitting a check one with x x bug report search github for a similar issue or PR before submitting feature request support request Please do not submit support request here instead see use use gitter or stackoverflow for community support or contact Sterfive for commercial support contact sterfivecom Current behavior Describe how the bug manifests I am seeing these messages in my log From reading the other issues people have this was fixed in a round of updates I have the latest version of opcua but I still see them come up It looks like as a result my SCADA server cannot read from the server Server closing SESSION new DaClient Lib because of timeout has expired without a keep alive channel ffff port Z opcuaserver channelsessionTokens Z opcuaserver ERROR channelchannelId sessionchannelId Z opcuaserver SERVER with secure connection Nonee has already been used Z opcuaserver channelsessionTokens Z opcuaserver ERROR channelchannelId sessionchannelId Server closing SESSION new DaClient Lib because of timeout has expired without a keep alive channel ffff port Z opcuaserver channelsessionTokens Z opcuaserver ERROR channelchannelId sessionchannelId Z opcuaserver SERVER with secure connection Nonee has already been used Expected behavior Describe what the behavior would be without the bug This is a reproduction of the the sample code with a couple things change and when I run the sample code it just works Minimal reproduction of the problem with instructions If the current behavior is a bug or you can illustrate your feature request better with an example please provide the STEPS TO REPRODUCE and if possible a MINIMAL DEMO of the problem I just run the server and this comes up Important Please also provide a self contains source code of a nodeopcua client and server that demonstrate the isssue gist javascript global requiresetIntervalconsole const opcua requirenodeopcua Lets create an instance of OPCUAServer const server new opcuaOPCUAServer port the port of the listening socket of the server resourcePath UATabletServer this path will be added to the endpoint resource name buildInfo productName TabletServer buildNumber buildDate new Date function postinitialize consoleloginitialized function constructmyaddressspaceserver const addressSpace serverengineaddressSpace const namespace addressSpacegetOwnNamespace declare a new object const device namespaceaddObject organizedBy addressSpacerootFolderobjects browseName MyDevice add some variables My Test string variable let defaultStat TestStatus namespaceaddVariable componentOf device nodeId ns b browseName SS Status dataType String value get function return new opcuaVariant dataType opcuaDataTypeString value defaultStat set function variant defaultStat variantvalue return opcuaStatusCodesGood constructmyaddressspaceserver serverstartfunction consolelogServer is now listening press CTRLC to stop consolelogport serverendpoints port consolelogBuild Number serverendpoints buildDate const endpointUrl serverendpoints endpointDescriptions endpointUrl consolelog the primary server endpoint url is endpointUrl serverinitializepostinitialize What is the motivation use case for changing the behavior Describe the motivation or the concrete use case Please tell us about your environment Operating system opcua server or client type package manager equipment vendor info my request is related to nodeopcua acting as a OPCUA CLIENT x my request is related to nodeopcua acting as a OPCUA SERVER I have installed nodeopcua from source using git clone x I have installed nodeopcua as a package using npm install I am using an application that uses nodeopcua nodered other please specify Device OS version x Windows version Windows for the server and Windows Server for reading Linux version MacOs version Raspbian version Other specify Description of the other OPCUA system I am trying to connect to Name Indusoft Version ManufacturerSoftware vendor link https nodeopcua version provide the semver version number of nodeopcua Check which is the hash of the last commit from nodeopcua that you have locally Node node version I am looking for a sample node opcua client implementation which uses x certs to connect to OPCUA server Can anyone help me with sample code what are the important properties need to fill for x in client options and create session case Appreciate all your help IF YOU DONT FILL OUT THE FOLLOWING INFORMATION WE MIGHT CLOSE YOUR ISSUE WITHOUT INVESTIGATING Im submitting a check one with x bug report search github for a similar issue or PR before submitting feature request x support request Please do not submit support request here instead see use use gitter or stackoverflow for community support or contact Sterfive for commercial support contact sterfivecom Current behavior Describe how the bug manifests I have a SCADA system which i am trying to update my tags from an outside application How I picture this working is that I have a user press a button on a WPF app running on a tablet and it sends a curl request to a simple API with some parameters and have that update a value in a running opc ua server which our scada system will monitor and note changes to the value What is the motivation use case for changing the behavior Describe the motivation or the concrete use case Using outside apps to change tag values within our SCADA system Please tell us about your environment Operating system opcua server or client type package manager equipment vendor info my request is related to nodeopcua acting as a OPCUA CLIENT x my request is related to nodeopcua acting as a OPCUA SERVER I have installed nodeopcua from source using git clone x I have installed nodeopcua as a package using npm install I am using an application that uses nodeopcua nodered other please specify Device OS version x Windows version Windows Server r Linux version MacOs version Raspbian version Other specify nodeopcua version provide the semver version numero of nodeopca Check which is the hash of the last commit from nodeopcua that you have locally Node node version Im submitting a check one with x x bug report search github for a similar issue or PR before submitting feature request support request Please do not submit support request here instead see use use gitter or stackoverflow for community support or contact Sterfive for commercial support contact sterfivecom Current behavior I suspect the issue occurs when the S device is downloaded to and initializes again I get a message recreatesessionandreperformtransaction Already in Progress and my requests all error with cannot recreate session It has been in this state for over half of a day This seems to occur after the error publushEngine invalid state I assume there is a typo and this should be publishEngine too This has occurred on both my development machine and on a production server Expected behavior The session is recreated Minimal reproduction of the problem with instructions If the current behavior is a bug or you can illustrate your feature request better with an example please provide the STEPS TO REPRODUCE and if possible a MINIMAL DEMO of the problem Download to S PLC An error publushEngine invalid state occurs Attempts to recreate session and it never succeeds Important Please also provide a self contains source code of a nodeopcua client and server that demonstrate the isssue gist Any client connected to the PLC should do What is the motivation use case for changing the behavior I need the session to recover to keep my application alive Please tell us about your environment Operating system opcua server or client type package manager equipment vendor info x my request is related to nodeopcua acting as a OPCUA CLIENT my request is related to nodeopcua acting as a OPCUA SERVER I have installed nodeopcua from source using git clone x I have installed nodeopcua as a package using npm install I am using an application that uses nodeopcua nodered other please specify Device IPC G OS version Windows Server Standard with HyperV Windows version x Linux version NixOS MacOs version Raspbian version Other specify Description of the other OPCUA system I am trying to connect to NameS VersionV ManufacturerSoftware vendorSiemens link nodeopcua version provide the semver version numero of nodeopca Check which is the hash of the last commit from nodeopcua that you have locally Node node version Im attempting to run this module on CentOS however the server fails to start after installing from source as documented in the README file The node packagesnodeopcuasamplesbinsimpleserver command fails with the following message internalmodulescjsloaderjs throw err Error Cannot find module nodeopcua Require stack usrsrcnodeopcuapackagesnodeopcuasamplesbinsimpleserverjs at FunctionModuleresolveFilename internalmodulescjsloaderjs at FunctionModuleload internalmodulescjsloaderjs at Modulerequire internalmodulescjsloaderjs at require internalmodulescjshelpersjs at Objectanonymous usrsrcnodeopcuapackagesnodeopcuasamplesbinsimpleserverjs at Modulecompile internalmodulescjsloaderjs at ObjectModuleextensionsjs internalmodulescjsloaderjs at Moduleload internalmodulescjsloaderjs at FunctionModuleload internalmodulescjsloaderjs at FunctionModulerunMain internalmodulescjsloaderjs code MODULENOTFOUND requireStack usrsrcnodeopcuapackagesnodeopcuasamplesbinsimpleserverjs I am not certain how to fix this the module definitely does exist Im submitting a check one with x x bug report search github for a similar issue or PR before submitting feature request support request Please do not submit support request here instead see use use gitter or stackoverflow for community support or contact Sterfive for commercial support contact sterfivecom Current behavior const obj await crawlerreadnodeId causes the unhandled node UnhandledPromiseRejectionWarning Error at Objectassert homemustafaDesktopCrawlernodemodulesnodeopcuaassertdistindexjs at fetchelements homemustafaDesktopCrawlernodemodulesnodeopcuaclientcrawlerdistnodecrawlerjs at NodeCrawlerresolvedeferredreadNode homemustafaDesktopCrawlernodemodulesnodeopcuaclientcrawlerdistnodecrawlerjs at task homemustafaDesktopCrawlernodemodulesnodeopcuaclientcrawlerdistnodecrawlerjs at homemustafaDesktopCrawlernodemodulesasyncdistasyncjs at replenish homemustafaDesktopCrawlernodemodulesasyncdistasyncjs at homemustafaDesktopCrawlernodemodulesasyncdistasyncjs at eachOfLimit homemustafaDesktopCrawlernodemodulesasyncdistasyncjs at awaitableeachOfLimit homemustafaDesktopCrawlernodemodulesasyncdistasyncjs at eachOfGeneric homemustafaDesktopCrawlernodemodulesasyncdistasyncjs node UnhandledPromiseRejectionWarning Unhandled promise rejection This error originated either by throwing inside of an async function without a catch block or by rejecting a promise which was not handled with catch rejection id node DEP DeprecationWarning Unhandled promise rejections are deprecated In the future promise rejections that are not handled will terminate the Nodejs process with a nonzero exit code Minimal reproduction of the problem with instructions const client await opcuaOPCUAClientcreate connectionStrategy maxRetry initialDelay maxDelay endpointmustexist false clientonbackoff consolelogretrying connection await clientconnectendpointUrl const session await clientcreateSession const NodeCrawler opcuaNodeCrawler consolelogNodeCrawler var crawler await new NodeCrawlersession clientonsendrequest consolelogsendrequest clientonreceiveresponse consolelogreceiveresponse let t Datenow const obj await crawlerreadnodeId consolelog Time new DategetTime t consolelog read crawlerreadCounter consolelog browse crawlerbrowseCounter consolelog browseNext crawlerbrowseNextCounter consolelog transaction crawlertransactionCounter crawlerdispose Please tell us about your environment Ubuntu gues OS running in Virtualbox on Mac host x my request is related to nodeopcua acting as a OPCUA CLIENT my request is related to nodeopcua acting as a OPCUA SERVER I have installed nodeopcua from source using git clone x I have installed nodeopcua as a package using npm install I am using an application that uses nodeopcua nodered other please specify Device OS version Windows version x Linux version Ubuntu MacOs version Raspbian version Other specify Description of the other OPCUA system I am trying to connect to Name opcuaasyncio Version ManufacturerSoftware vendor link nodeopcua version version resolved integrity sha u h mkNlokyOP zEJfXiSl qc N TIinXNVHDcJl gosMLsCjrljl s RmGjWDiZXEGBB H U xCdUxog Node node version v The code is raising an error event which in my app is ending up setting socket to null Therefore the code is unsafe This is not the most elegant way to fix this but it illustrates the problem