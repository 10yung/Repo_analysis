 NSArray childrenAtIndexesNSIndexSet indexes NSMutableArray mutableChildren NSMutableArray array xmlNodePtr cursor selfxmlNodechildren NSUInteger idx while cursor if indexes containsIndexidx cursortype XMLELEMENTNODE mutableChildren addObject selfdocument elementWithNodecursor cursor cursornext idx return NSArray arrayWithArraymutableChildren According to the above code I get child node must be element nodes but also I think text nodes child nodes Namely if indexes containsIndexidx cursortype XMLELEMENTNODE cursortype XMLTEXTNODE mutableChildren addObject selfdocument elementWithNodecursor I would like to have a method similar to stringValue which doesnt recursively prints everything under a certain XPathQuery Here is the full code HTML and the produced output by Ono plus which output Id like to have My XPath Query XPathQuery div classthread Ono code objectivec document ONOXMLDocument HTMLDocumentWithDatafile error error document enumerateElementsWithXPathxPath usingBlock ONOXMLElement element NSUInteger idx BOOL stop NSLog element stringValue Which prints FirstName LastName SecondNameFirst SecondNameLast FirstName LastName Wednesday December at pm UTC This is a dummy text SecondNameFirst SecondNameLast Wednesday December at pm UTC And a nd one just to show off Another User Another Monday April at pm UTC Text User Thursday February at pm UTC Text Another Thursday February at pm UTC Text I would prefer to have an output similar to hpple which is FirstName LastName SecondNameFirst SecondNameLast Another User hpple code objectivec tutorialsParser TFHpple hppleWithHTMLDatafile tutorialsNodes tutorialsParser searchWithXPathQueryxPath for TFHppleElement element in tutorialsNodes NSLog element firstChild content trim And I dont want to use hpple since it is too slow Here is my input HTML file xml DOCTYPE html html headtitlehead body div classthreadFirstName LastName SecondNameFirst SecondNameLast div classmessage div classmessageheader span classuserFirstName LastNamespan span classmetaWednesday December at pm UTC span div div pThis is a dummy textp div classmessage div classmessageheader span classuserSecondNameFirst SecondNameLastspan span classmetaWednesday December at pm UTC span div div pAnd a nd one just to show offp div div classthreadAnother User div classmessage div classmessageheader span classuserAnotherspan span classmetaMonday April at pm UTC span div div pText p div classmessage div classmessageheader span classuserUserspan span classmetaThursday February at pm UTC span div div pText p div classmessage div classmessageheader span classuserAnotherspan span classmetaThursday February at pm UTC span div div pText p div body html For the following XML documentSOAP service XPath cant find the elements xml xml version encodingUTF soapenvEnvelope xmlnssoapenv xmlnsxsd xmlnsxsi soapenvBody ServiceResponse xmlns ServiceReturn aUSa b b eHerrode fmolestienecmetuseduf gEt Commodo LLCg i i b b eArmande festvitaeorgf gVel Convallis In Consultingg i i b b eBernarde fnullablanditnetf gCursus Nunc Mauris PCg i i b b eDantee floremacmiorgf gSit Amet Ltdg i i b b c c k k ServiceReturn ServiceResponse soapenvBody soapenvEnvelope Here are the result of some functions swift documentrootElementfirstChildWithTagBody inNamespace soapenv some documentrootElementfirstChildWithTagsoapenvBodyServiceResponse nil documentrootElementfirstChildWithTagBodyb inNamespace soapenv nil documentfirstChildWithXPathServiceResponse nil documentfirstChildWithXPathServiceReturn nil documentfirstChildWithXPathServiceReturnbb nil documentfirstChildWithXPathServiceReturnbb nil documentfirstChildWithXPathbb nil Another example xml xml version encodingUTF SEnvelope xmlnsS SBody ns OperationHistoryData xmlnsns xmlnsns xmlnsns ns historyRecord ns DestinationAddress ns Index ns Index ns DescriptionInfo ns Description ns DestinationAddress ns historyRecord ns OperationHistoryData SBody SEnvelope Whenever there is nested namespaces ono cant parse it I dont know maybe it is limitation of libxml Only workaround I found is to strip name spaces and other attributes I am not good at Objective C and github I hope test code is right As a workaround listEvent works 