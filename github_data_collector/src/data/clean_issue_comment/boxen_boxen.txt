For the last couple of months Ive been weighing up the maintenance of Boxen versus what it is providing and after some careful consideration I feel its time to sunset the project The main driver has been that most of the things Boxen handles for you can now be achieved by other tools in a more straight forward and simplistic manner without the need of muddying the waters of responsibilities For instance installing packages Homebrew has made leaps and bounds of progress in this space since the inception of the Boxen project and while Boxen did manage a few speciality things about the installation it was largely duplicating the Homebrew install process and in some cases made it more complicated to debug Its been a great ride and major kudos go out to wfarr jbarnette dgoodlad MikeMcQuaid and everyone else that contributed to the project This wouldnt have been as much of a success without your ongoing efforts As outlined in Boxen needs to connect to services that are on TLSv or newer System ruby on Sierra and below is compiled against an old version of OpenSSL and doesnt have the required compatibility to use TLSv To address this we need to make Boxen support High Sierra only Tasks to get this over the line include Merge webflos PRs mentioned at Update ourboxen to only support boxenourboxen Cut a beta of the new release Add a deprecation message to let people know that running older versions wont work and to upgrade GitHub recently disabled older versions of TLS which was a great move however the version of OpenSSL that shipped with Mac OS doesnt support newer than TLSv Sierra System Ruby requesting TLSv expected break since TLSv is disabled RUBYVERSION wuri nethttpeach gem require gem uri URIparse URIHTTPS x f c ca e URL http NetHTTPnewurihostname uriport NetHTTP apigithubcom openfalse httpusessl true true httpsslversion TLSv TLSv response httpgeturirequesturi OpenSSLSSLSSLError SSLconnect returned errno stateSSLv read server hello A tlsv alert protocol version Sierra System Ruby requesting TLSv unexpected break RUBYVERSION wuri nethttpeach gem require gem uri URIparse URIHTTPS x f c ca e URL http NetHTTPnewurihostname uriport NetHTTP apigithubcom openfalse httpusessl true true httpsslversion TLSv TLSv response httpgeturirequesturi ArgumentError unknown SSL method TLSv The outcome above is confirmed when checking the supported versions of OpenSSL require openssl OpenSSLSSLSSLContextMETHODS TLSv TLSv server TLSv client SSLv SSLv server SSLv client SSLv SSLv server SSLv client SSLv SSLv server SSLv client Some good news here is that Ruby x does support TLSv RUBYVERSION require openssl OpenSSLSSLSSLContextMETHODS TLSv TLSv server TLSv client TLSv TLSv server TLSv client TLSv TLSv server TLSv client SSLv SSLv server SSLv client SSLv SSLv server SSLv client SSLv SSLv server SSLv client Based on my poking around the internet the only way forward is Have Boxen manage the installation of OpenSSL probably using puppetopenssl Reinstall system ruby using the newer version of OpenSSL Continue with the remainder of the provisioning process An idea I have discard but worth mentioning was enforcing a minimum Ruby version that has TLSv support and dont use system Ruby While this seems sane previous discussions have shown this made sense to avoid the chickenegg scenario when it comes to Ruby and what is available I am having problems installing boxen on my MAC It seems to try to install homebrew to usrlocal Does anybody have an idea of why its failing Thanks This is what I get curl s tmpinstallboxen bash tmpinstallboxen RIVER SYSTEMS Hello Im going to set up this machine for you It might take me a bit of time before Im done but youll end up with a happy machine by the end of it Ready to get started Hit a key with your favorite finger For added privacy invasion Ill need your local accounts password Sweet thanks Ill see you in Vegas sucker Making sure optboxen exists and belongs to you Grabbing code and extracting Be patient this may take a while Configuring Prepare for a long wait and some weird output I might have to ask you for your password again too Preparing to autoupdate Skipping autoupdate since this isnt a git checkout yet Fact file optboxenrepofactsdexampleyaml was parsed but returned an empty data set Notice Compiled catalog for fabriziosmbp rs in environment production in seconds Notice Stage main HomebrewFile usrlocalbin ensure created Notice Stage main HomebrewFile usrlocalshare ensure created Notice Stage main HomebrewFile usrlocalsharelocale ensure created Notice Stage main HomebrewFile usrlocalshareman ensure created Notice Stage main HomebrewFile usrlocalsharemanman ensure created Notice Stage main HomebrewFile usrlocalsharemanman ensure created Notice Stage main HomebrewFile usrlocalsharemanman ensure created Notice Stage main HomebrewFile usrlocalsharemanman ensure created Notice Stage main HomebrewFile usrlocalsbin ensure created Notice Stage main HomebrewFile usrlocalsharemanman ensure created Notice Stage main BoxenConfigFile optboxenbin ensure created Notice Stage main BoxenConfigFile optboxendata ensure created Notice Stage main BoxenConfigFile optboxendataprojectsockets ensure created Notice Stage main BoxenConfigFile optboxendatapuppet ensure created Notice Stage main BoxenConfigFile optboxenlog ensure created Notice Stage main HomebrewFile usrlocalsharemanman ensure created Notice Stage main BoxenConfigFile optboxenenvd ensure created Notice Stage main RubyBoxenEnvscript ruby File optboxenenvd rubysh ensure created Notice Stage main HomebrewFile usrlocallib ensure created Notice Stage main HomebrewFile usrlocallibpkgconfig ensure created Notice Stage main HomebrewFile usrlocalvar ensure created Notice Stage main HomebrewFile usrlocaletc ensure created Notice Stage main GoBoxenEnvscript go File optboxenenvd gosh ensure created Notice Stage main BoxenConfigFile optboxenREADMEmd ensure defined content as md be bef e e d bf c ff Notice Stage main BoxenConfigFile optboxenenvsh ensure defined content as md e ff eb c e c fdb af Notice Stage main HomebrewFile usrlocalinclude ensure created Notice Stage main HomebrewFile usrlocalshareinfo ensure created Notice Stage main HubBoxenEnvscript hub File optboxenenvd hubsh ensure created Notice Stage main NodejsBoxenEnvscript nodejs File optboxenenvd nodejssh ensure created Notice Stage main NodejsFile optnodes ensure created Notice Stage main HomebrewFile usrlocalsharemanman ensure created Notice Stage main HomebrewFile usrlocalLibrary ensure created Notice Stage main GoBoxenEnvscript chgoauto File optboxenenvd chgoautosh ensure created Notice Stage main HomebrewFile usrlocalshareaclocal ensure created Notice Stage main BoxenConfigFile optboxencache ensure created Notice Stage main NodejsBuildFile optboxencachenodes ensure created Notice Stage main HomebrewFile usrlocalvarlog ensure created Notice Stage main RubyFile optrubies ensure created Notice Stage main RubyBuildFile optboxencacherubies ensure created Notice Stage main HomebrewFile usrlocalsharedoc ensure created Notice Stage main HomebrewFile usrlocalsharemanman ensure created Notice Stage main HomebrewExec install homebrew to usrlocal returns executed successfully Notice Stage main HomebrewFile usrlocalLibraryTaps ensure created Notice Stage main HomebrewFile usrlocalLibraryTapsboxen ensure created Notice Stage main HomebrewFile usrlocalLibraryTapsboxenhomebrewbrews ensure created Notice Stage main HomebrewFile optboxencachehomebrew ensure created Notice Stage main HomebrewFile usrlocalLibraryTapsboxenhomebrewbrewscmd ensure created Notice Stage main HomebrewFile usrlocalLibraryTapsboxenhomebrewbrewscmdboxenbottlehooksrb ensure defined content as md d ff b df a f c Notice Stage main HomebrewFile usrlocalLibraryTapsboxenhomebrewbrewscmdbrewboxeninstallrb ensure defined content as md a beded a c cf b c a Notice Stage main GitFile optboxenbinboxengitcredential ensure created Notice Stage main NodejsBuildRepository optboxennodebuild ensure created Notice Stage main RubyBuildRepository optboxenrubybuild ensure created Notice Stage main NodejsNodenvRepository optboxennodenv ensure created Notice Stage main NodejsNodenvFile optboxennodenvversions ensure created Notice Stage main GitFile optboxenconfiggit ensure created Notice Stage main GitFile optboxenconfiggitgitignore ensure defined content as md ee d ec fea Notice Stage main RubyRbenvRepository optboxenrbenv ensure created Notice Stage main RubyRbenvFile optboxenrbenvversions ensure created Notice Stage main GoRepository optboxenchgo ensure created Notice Stage main HomebrewFile usrlocalLibraryTapsboxenhomebrewbrewscmdbrewboxenlatestrb ensure defined content as md c cf ea f b f b fe e d Notice Stage main HomebrewBoxenEnvscript homebrew File optboxenenvd homebrewsh ensure created Notice Stage main GccHomebrewFormula gcc File usrlocalLibraryTapsboxenhomebrewbrewsgcc rb ensure defined content as md d ecc c fa a c Notice Stage main BrewcaskHomebrewTap caskroomcask Homebrewtap caskroomcask ensure created Notice Stage main GccHomebrewTap homebrewversions Homebrewtap homebrewversions ensure created Notice Stage main BrewcaskBoxenEnvscript brewcask File optboxenenvd brewcasksh ensure created Notice Stage main BrewcaskFile opthomebrewcask ensure created Notice Stage main BrewcaskFile opthomebrewcaskCaskroom ensure created Error Could not set file on ensure No such file or directory usrlocalLibraryTapsboxenhomebrewbrewsgitrb w g ulock at optboxenreposharedhomebrewmanifestsformulapp Error Could not set file on ensure No such file or directory usrlocalLibraryTapsboxenhomebrewbrewsgitrb w g ulock at optboxenreposharedhomebrewmanifestsformulapp Wrapped exception No such file or directory usrlocalLibraryTapsboxenhomebrewbrewsgitrb w g ulock Error Stage main GitHomebrewFormula git File usrlocalLibraryTapsboxenhomebrewbrewsgitrb ensure change from absent to file failed Could not set file on ensure No such file or directory usrlocalLibraryTapsboxenhomebrewbrewsgitrb w g ulock at optboxenreposharedhomebrewmanifestsformulapp Error Could not set file on ensure No such file or directory usrlocalLibraryTapsboxenhomebrewbrewshubrb bnjyq lock at optboxenreposharedhomebrewmanifestsformulapp Error Could not set file on ensure No such file or directory usrlocalLibraryTapsboxenhomebrewbrewshubrb bnjyq lock at optboxenreposharedhomebrewmanifestsformulapp Wrapped exception No such file or directory usrlocalLibraryTapsboxenhomebrewbrewshubrb bnjyq lock Error Stage main HubHomebrewFormula hub File usrlocalLibraryTapsboxenhomebrewbrewshubrb ensure change from absent to file failed Could not set file on ensure No such file or directory usrlocalLibraryTapsboxenhomebrewbrewshubrb bnjyq lock at optboxenreposharedhomebrewmanifestsformulapp Error Stage main HomebrewRepoHomebrewrepo usrlocal Could not evaluate Execution of usrbingit revparse HEAD returned fatal Not a git repository or any of the parent directories git Notice Package boxenbrewshub Dependency Homebrewrepo usrlocal has failures true Notice Package boxenbrewshub Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Package boxenbrewshub Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Package boxenbrewshub Skipping because of failed dependencies Notice Package boxenbrewsgcc Dependency Homebrewrepo usrlocal has failures true Notice Package boxenbrewsgcc Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Package boxenbrewsgcc Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Package boxenbrewsgcc Skipping because of failed dependencies Notice Package go Dependency Homebrewrepo usrlocal has failures true Notice Package go Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Package go Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Package go Skipping because of failed dependencies Notice Package boxenbrewsgit Dependency Homebrewrepo usrlocal has failures true Notice Package boxenbrewsgit Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Package boxenbrewsgit Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Package boxenbrewsgit Skipping because of failed dependencies Notice Package readline Dependency Homebrewrepo usrlocal has failures true Notice Package readline Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Package readline Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Package readline Skipping because of failed dependencies Notice Stage main NodejsGlobalNodejsVersion Nodejs Dependency Homebrewrepo usrlocal has failures true Notice Stage main NodejsGlobalNodejsVersion Nodejs Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Stage main NodejsGlobalNodejsVersion Nodejs Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Stage main NodejsGlobalNodejsVersion Nodejs Skipping because of failed dependencies Notice Stage main BoxenRepoExec clone optboxenrepo Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Stage main BoxenRepoExec clone optboxenrepo Dependency Homebrewrepo usrlocal has failures true Notice Stage main BoxenRepoExec clone optboxenrepo Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Stage main BoxenRepoExec clone optboxenrepo Skipping because of failed dependencies Notice Stage main BoxenBinFile optboxenbinboxen Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Stage main BoxenBinFile optboxenbinboxen Dependency Homebrewrepo usrlocal has failures true Notice Stage main BoxenBinFile optboxenbinboxen Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Stage main BoxenBinFile optboxenbinboxen Skipping because of failed dependencies Notice Stage main NodejsGlobalFile optboxennodenvversion Dependency Homebrewrepo usrlocal has failures true Notice Stage main NodejsGlobalFile optboxennodenvversion Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Stage main NodejsGlobalFile optboxennodenvversion Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Stage main NodejsGlobalFile optboxennodenvversion Skipping because of failed dependencies Notice Stage main BoxenConfigFile optboxendatapuppetgraphs ensure created Notice Stage main BoxenEnvironmentBoxenEnvscript relativebinonpath File optboxenenvd relativebinonpathsh ensure defined content as md ce eaa bac b b d e Notice Stage main BoxenEnvironmentBoxenEnvscript boxenautocomplete File optboxenenvd boxenautocompletesh ensure created Notice Stage main BoxenEnvironmentBoxenEnvscript config File optboxenenvd configsh ensure created Notice Stage main BoxenEnvironmentBoxenEnvscript ghcreds File optboxenenvd ghcredssh ensure created Notice Stage main MainNode default File Usersfsantinisrcourboxen Dependency Homebrewrepo usrlocal has failures true Notice Stage main MainNode default File Usersfsantinisrcourboxen Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Stage main MainNode default File Usersfsantinisrcourboxen Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Stage main MainNode default File Usersfsantinisrcourboxen Skipping because of failed dependencies Notice Package bashcompletion Dependency Homebrewrepo usrlocal has failures true Notice Package bashcompletion Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Package bashcompletion Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Package bashcompletion Skipping because of failed dependencies Notice Package licecap Dependency Homebrewrepo usrlocal has failures true Notice Package licecap Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Package licecap Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Package licecap Skipping because of failed dependencies Notice Package findutils Dependency Homebrewrepo usrlocal has failures true Notice Package findutils Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Package findutils Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Package findutils Skipping because of failed dependencies Notice Package googlechrome Dependency Homebrewrepo usrlocal has failures true Notice Package googlechrome Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Package googlechrome Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Package googlechrome Skipping because of failed dependencies Notice Stage main MainNode default Npmmodule npm for all nodes Dependency Homebrewrepo usrlocal has failures true Notice Stage main MainNode default Npmmodule npm for all nodes Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Stage main MainNode default Npmmodule npm for all nodes Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Stage main MainNode default Npmmodule npm for all nodes Skipping because of failed dependencies Notice Package ack Dependency Homebrewrepo usrlocal has failures true Notice Package ack Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Package ack Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Package ack Skipping because of failed dependencies Notice Stage main MainNode default Npmmodule nodemon Dependency Homebrewrepo usrlocal has failures true Notice Stage main MainNode default Npmmodule nodemon Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Stage main MainNode default Npmmodule nodemon Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Stage main MainNode default Npmmodule nodemon Skipping because of failed dependencies Notice Package gnutar Dependency Homebrewrepo usrlocal has failures true Notice Package gnutar Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Package gnutar Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Package gnutar Skipping because of failed dependencies Notice Package slack Dependency Homebrewrepo usrlocal has failures true Notice Package slack Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Package slack Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Package slack Skipping because of failed dependencies Notice Stage main MainNode default GoVersion Exec chgo install Dependency Homebrewrepo usrlocal has failures true Notice Stage main MainNode default GoVersion Exec chgo install Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Stage main MainNode default GoVersion Exec chgo install Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Stage main MainNode default GoVersion Exec chgo install Skipping because of failed dependencies Notice Stage main MainNode default File optboxenchgoversion Dependency Homebrewrepo usrlocal has failures true Notice Stage main MainNode default File optboxenchgoversion Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Stage main MainNode default File optboxenchgoversion Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Stage main MainNode default File optboxenchgoversion Skipping because of failed dependencies Notice Stage main MainNode default RubyVersion Ruby Dependency Homebrewrepo usrlocal has failures true Notice Stage main MainNode default RubyVersion Ruby Dependency File usrlocalLibraryTapsboxenhomebrewbrewsgitrb has failures true Notice Stage main MainNode default RubyVersion Ruby Dependency File usrlocalLibraryTapsboxenhomebrewbrewshubrb has failures true Warning Stage main MainNode default RubyVersion Ruby Skipping because of failed dependencies cc jbcpollak hello folks it looks like Puppet reaches EOL at the end of the year is anyone working on Puppet support for Boxen i figure ill check in before going off into the weeds Im still investigating this and dont have a clean repro out there but Im at the point where Im comfortable opening an issue in the hopes that someone more experienced can quickly tell me Im crazy or that Im on to something Using v I am seeing that facts we have specified in boxenconfigjson are not getting parsed loaded My configjson looks like this bitbucketuseraaronlerch We reference bitbucketuser in various places in our personal project and team manifests After some updates this value has now been empty where before it contained the correct configjsonspecified value The behavior I am seeing is that the manifest is now being processed as root so in libfacterboxenrb the line dotboxen ENV HOME boxen looks for on my mac varrootboxenconfigjson I suspect that this commit might have broken userspecific configjson support Puppeteer is running everything via sudo which I believe explains this behavior So it seems that configjson support has been broken for a while Or am I way off on my analysis here Thanks Aaron Before boxen could not support default homebrewroot like usrlocal But as of current ourboxen master branch homebrewroot could be set to usrlocal in ourboxenfactsdcommonyaml but there is still a preflight misleading warning message like shell You have an existing Homebrew install in usrlocal m The Boxen provides its own Homebrew so consider deleting yours Keeping both will confuse many projects Should we remove that homebrew preflight requirement Thanks improves boxenboxen I tried adding fact files within BOXENHOMEfactsd directory and its not automatically picking them up If I manually run the BOXENHOMEbinfacter externaldir BOXENHOMEfactsd it picks up all the fact files properly I noticed the following BOXEN ruby script is supposed to override the etcfacterfactsd dir with the BOXENHOMEfactsd Are others able to successfully add fact files to BOXENHOMEfactsd Thanks Jason Dettbarn These are mostly clarity and readability improvements In one instance Service had class methods defined via selfmethodname under private but that doesnt actually make them private so I used a singleton class instance to truly make them private Remove unneeded newlines Use Ruby Hash syntax Singlequote noninterpolated strings Expand long method chains into multiple lines Remove unnecessary references to self Use English global variable names Refactor long linesmethods into smaller methods Ensure private class methods are actually private 