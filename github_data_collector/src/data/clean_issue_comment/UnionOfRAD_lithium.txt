This should probably be merged into all branches Base classes are set to be removed in they have been deprecated in Remove init usage where tests rely on skipping the initialization phase change classes to accept an alternative lessgenerically named option to skip certain parts of the initialization phase The init class methods will than need to be merged into the constructor Classes which rely on auto configuration currently present in the base class init should make use of AutoConfigurable instead Have the classes that were one level above the old base classes set config Stop classes from extending deprecated base classes Ensure all unit tests are green Ensure all integration tests are green The init removal is being worked upon in the initremoval branch with branch I get PHP message PHP Fatal error Trait lithium core MergeInheritable not found in varwwwbestellsystemlibrarieslithiumactionControllerphp on line I cannot make sense out of that Because MergeInheritablephp exists In case of Couchdb the method thisconnectionmethodpath data options in is an array instead of string This breaks the logic inside of the describe function How do I set the base component of the environment so that generated URLs are prefixed accordingly Consider the following use case A website at examplecom non lithium app Lithium app at portalexamplecom In the apache vhost settings of examplecom requests to examplecomportal maps to portalexamplecom ProxyRequests On ProxyPass portal ProxyPassReverse portal ProxyPass portal ProxyPassReverse portal Now when accessing examplecomportal portalexamplecom is served but frontend assets are attempted to be loaded as cssstylesheetscss jsscriptsjs Which result in s since they dont exist at the root folder of examplecom I want to set the base such that assets paths and URLs are properly prefixed with portal portalcssstylesheetscss portaljsscriptsjs In the case where multiple types are registered to lithium net http Media with the same content type even when distinguished by conditions an instance of lithium action Request will fail to determine the correct type to use to decode the request body For example if we register another type which uses applicationjson as a content type like this php use lithium net http Media Mediatypejsonbase applicationjson encode function data return base encodejsonencodedata decode function data return jsondecodebase decodedata true cast true conditions httpcontenttransferencoding base A call to Mediatypeapplicationjson will return an array like php jsonbase json This case is not handled by lithium net http Messagetype which causes lithium action Requesttype to be assigned as the content type of applicationjson Futhermore when Requestbody is called to decode the request body the Media class fails to find a handler for applicationjson it expects a short name like json To fix this lithium net http Messagetype must be extended by lithium action Request In the case that type is a string and equals the result of the parents call we can loop over each type returned by Mediatype and attempt to match the request to it like this php public function typetype null if type emptythisparams type type thisparams type type parenttypetype if isstringtype type type media thisclasses media content mediatypetype if isarraycontent issetcontent content foreach content as shorttype conf mediatypeshorttype conf name shorttype if mediamatchthis conf type shorttype break return thistype type This will correctly determine a single short name to use for the type of the request data and it can now correctly decode the request body Throwing an Exception inside a controller action so to trigger an error is quite common Ive just spent a few days trying to figure out why my console commands no longer work after upgrading my version of Lithium to After much debugging and hairpulling I discovered theyre only broken if used outside of the app directory Is this intentional If so it will prevent many from upgrading due to the complications this introduces Jun EuropeLondon PHP Fatal error Uncaught TypeError Argument passed to app models Groupscreate must be of the type array boolean given called in homenieldevwwwtestlibrarieslithiumdatacollectionRecordSetphp on line and defined in homenieldevwwwtestappmodelsGroupsphp Stack trace homenieldevwwwtestlibrarieslithiumdatacollectionRecordSetphp app models Groupscreatefalse Array homenieldevwwwtestlibrarieslithiumdataCollectionphp lithium data collection RecordSetsetfalse active homenieldevwwwtestlibrarieslithiumdataCollectionphp lithium data CollectionoffsetSetactive false homenieldevwwwtestlibrarieslithiumdataCollectionphp lithium data CollectionsetArray homenieldevwwwtestlibrarieslithiumdatacollectionRecordSetphp lithium data Collectioninit homenieldevwwwtestlibrarieslithiumcoreObjectphp lithium data collection RecordSet in homenieldevwwwtestappmodelsGroupsphp on line Ive no idea what is going on here as no part of the code should be creating any entries in the DB at this part Im testing