Hello I have successfully built the docker with the Dockerfile But when i tried to run the infersimplypy I faced this error Does anyone know how to fix this Thanks in advance rootlocalhostdetectron python toolsinfersimplepy cfg deployfileR FPNyaml outputdir tmpdetectronvisualizations imageext jpg wts deployfilemodelfinalpkl demo Found Detectron ops lib usrlocalcaffe buildliblibcaffe detectronopsgpuso WARNING cnnpy DEPRECATE WARNING you are creating an object from CNNModelHelper class which will be deprecated soon Please use ModelHelper object with brew module For more information please refer to caffe ai and pythonbrewpy pythonbrewtestpy for more information INFO netpy Loading weights from deployfilemodelfinalpkl I netdagutilscc Operator graph pruning prior to chain compute took e secs I netdagcc Number of parallel execution chains Number of operators I netdagutilscc Operator graph pruning prior to chain compute took e secs I netdagcc Number of parallel execution chains Number of operators I netdagutilscc Operator graph pruning prior to chain compute took e secs I netdagcc Number of parallel execution chains Number of operators INFO infersimplepy Processing demo a fa akjpg tmpdetectronvisualizations a fa akjpgpdf terminate called after throwing an instance of caffe EnforceNotMet what enforce fail at convopcudnncc status CUDNNSTATUSSUCCESS vs Error at varlibjenkinsworkspacecaffe operatorsconvopcudnncc CUDNNSTATUSEXECUTIONFAILED Error from operator input gpu data input gpu conv w output gpu conv name type Conv arg name kernel i arg name exhaustivesearch i arg name pad i arg name order s NCHW arg name stride i deviceoption devicetype cudagpuid engine CUDNN Aborted at unix time try date d if you are using GNU date PC x fce dd gsignal SIGABRT x f received by PID TID x fcdc fff from PID stack trace x fce d unknown x fce dd gsignal x fce df a abort x fce c e d gnucxxverboseterminatehandler x fce c c b unknown x fce c c stdterminate x fce c c d unknown x fce d ba startthread x fce aaf d clone x unknown Aborted core dumped is it possible to write output file in npy format Actual results I download gtFinetrainvaltestzip leftImg bittrainvaltestzip leftImg bittrainvaltestfoggyzip leftImg bittrainvalrainzip from And I use toolsconvertcityscapestococopy also succeed to convert the datasets Then I want to use the faster rcnn in mmdetection to do the control experiment but the results are too low In train I use images in leftImg bittrainvaltestzip and in val or test I use images in leftImg bittrainvaltestfoggyzip or leftImg bittrainvalrainzip So I want to ask for the json or maybe I forget to do something The results I do is dataset Person Rider Car Bus Truck Bicycle Mcycle Train mAP rainy foggy Expected results I read the paper and their results in foggy are Paper name Person Rider Car Bus Truck Bicycle Mcycle Train mAP A Robust Learning Approach to Domain Adaptive Object Detection Domain Adaptive Faster RCNN for Object Detection in the Wild I find some bugs in this file which is named by Detectrondetectrondatasetsvocevalpy From line on compute precision recall fp npcumsumfp tp npcumsumtp rec tp floatnpos avoid divide by zero in case the first detection matches a difficult ground truth prec tp npmaximumtp fp npfinfonpfloat eps ap vocaprec prec use metric we can see that the rec and prec is not a list but a float numberThis means the calculation of ap is not the area of PR curve So could you please tell me how to fix or make sense of this question A recent Detectron commit added an import statement that throws an Exception on my system when using toolsconvertpkltopbpy cd Detectron python toolsconvertpkltopbpy h Traceback most recent call last File toolsconvertpkltopbpy line in module from caffe caffe fbpredictor import predictorexporter predictorpyutils ModuleNotFoundError No module named caffe caffe Commit Specifically this is the problematic import from caffe caffe fbpredictor import predictorexporter predictorpyutils I am using this pytorch github commit c c dcf e efdb a c a d I verified that even on the latest pytorch commit f d d e ccbc a d dcaac there is no python package caffe caffe fbpredictor One simple workaround fix is to replace the problematic import with the following from caffe pythonpredictor import predictorexporter predictorpyutils Im unsure if caffe caffe fbpredictor contains special functionality required for the logfiledb stuff Expected results What did you expect to see I expected convertpkltopbpy to not throw an ImportError Actual results What did you observe instead I saw an ImportError Detailed steps to reproduce Clone install Detectron and pytorchcaffe using the above git hashes Then run the following commands cd Detectron python toolsconvertpkltopbpy h System information This issue is not related to CUDAGPU Operating system Ubuntu Compiler version CUDA version cuDNN version NVIDIA driver version GPU models for all devices if they are not all the same PYTHONPATH environment variable python version output Python Anything else that seems relevant I have already run my own mask rcnn including training and testing Now I want to add a new branch to the network to make another prediction parallel to cls bbox and mask However the caffe program confuses me a lot I dont know where should I make a change So could you please give me some advice Thanks I run convertpkltopbpy successfully but only get faster rcnn pb model without mask layers Please help Hi I use tutorial gpue efasterrcnnR FPNyaml to training Q Why the AP of result is or I had checked my json file was corrected VOC COCO import os import argparse import json import xmletreeElementTree as ET from typing import Dict List from tqdm import tqdm import re def getlabel idlabelspath str Dict str int id is start with openlabelspath r as f labelsstr freadsplit labelsids listrange lenlabelsstr return dictziplabelsstr labelsids def getannpathsanndirpath str None annidspath str None ext str annpathslistpath str None List str If use annotation paths list if annpathslistpath is not None with openannpathslistpath r as f annpaths freadsplit return annpaths If use annotaion ids list extwithdot ext if ext else with openannidspath r as f annids freadsplit annpaths ospathjoinanndirpath aidextwithdot for aid in annids return annpaths def getimageinfoannotationroot extractnumfromimgidTrue path annotationrootfindtextpath if path is None filename annotationrootfindtextfilename else filename ospathbasenamepath imgname ospathbasenamefilename imgid ospathsplitextimgname if extractnumfromimgid and isinstanceimgid str imgid intrefindallr d imgid size annotationrootfindsize width intsizefindtextwidth height intsizefindtextheight imageinfo filename filename height height width width id imgid return imageinfo def getcocoannotationfromobjobj label id label objfindtextname assert label in label id fError label is not in label id categoryid label id label bndbox objfindbndbox xmin intbndboxfindtextxmin ymin intbndboxfindtextymin xmax intbndboxfindtextxmax ymax intbndboxfindtextymax assert xmax xmin and ymax ymin fBox size error xmin ymin xmax ymax xmin ymin xmax ymax owidth xmax xmin oheight ymax ymin ann area owidth oheight iscrowd bbox xmin ymin owidth oheight categoryid categoryid ignore segmentation This script is not for segmentation return ann def convertxmlstococojsonannotationpaths List str label id Dict str int outputjsonpath str extractnumfromimgid bool True outputjsondict images type instances annotations categories bndid STARTBOUNDINGBOXID TODO input as args printStart converting for apath in tqdmannotationpaths Read annotation xml anntree ETparseapath annroot anntreegetroot imginfo getimageinfoannotationrootannroot extractnumfromimgidextractnumfromimgid imgid imginfo id outputjsondict images appendimginfo for obj in annrootfindallobject ann getcocoannotationfromobjobjobj label idlabel id annupdateimageid imgid id bndid outputjsondict annotations appendann bndid bndid for label labelid in label iditems categoryinfo supercategory none id labelid name label outputjsondict categories appendcategoryinfo with openoutputjsonpath w as f outputjson jsondumpsoutputjsondict fwriteoutputjson python def main parser argparseArgumentParsertest train descriptionThis script support converting voc format xmls to coco format json parseraddargumentanndir typestr defaultchtrainxml helppath to annotation files directory It is not need when use annpathslist parseraddargumentannids typestr defaultchtrainnametxt helppath to annotation files ids list It is not need when use annpathslist parseraddargumentannpathslist typestr defaultchtrainpathtxt helppath of annotation paths list It is not need when use anndir and annids parseraddargumentlabels typestr defaultchtrainclasstxt helppath to label list parseraddargumentoutput typestr defaultchtraintrainjson helppath to output json file parseraddargumentext typestr default helpadditional extension of annotation file args parserparseargs label id getlabel idlabelspathargslabels annpaths getannpaths anndirpathargsanndir annidspathargsannids extargsext annpathslistpathargsannpathslist convertxmlstococojson annotationpathsannpaths label idlabel id outputjsonpathargsoutput extractnumfromimgidTrue if name main main Q Why accuracycls is but the classification of test are error Q What is Filtered roidb entries mean Thanks When I run setuppy I get an error cant find fvcore Searching for fvcore git Reading Couldnt find index page for fvcore maybe misspelled Scanning index of all packages this may take a while Reading Download error on Errno Name or service not known Some packages may not be found No local packages or working download links found for fvcore git error Could not find suitable distribution for Requirementparsefvcore git I try to manually installing it pip install git and i got feedback Successfully built fvcore but after that the same question still exist what shhould i do Default mode for tempfile is wb but yamldump gives a string