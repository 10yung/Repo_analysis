Currently theres a number of issues related to websockets specifically Add documentation for hshttpwebsocket hshttpwebsocket crashes hammerspoon if send is called too soon hshttpwebsocket needs onopen and onclose callbacks How to use websocket schemes ws or wss Given that hshttpwebsocket is currently undocumented at least until lands this is probably a good time to review the websocket functionality and see if it can be improved As discussed in my attempts to use hshttpwebsocket have been fairly unsuccessful as I keep running into this error lua LuaSkin secondary thread hshttpwebSocket didFail Error DomainPSWebSocketErrorDomain Code Output stream end encountered UserInfoNSLocalizedDescriptionOutput stream end encountered which seems to be a bugissue in the PocketSocket Framework PocketSocket hasnt been updated since Aug so I wonder if its worthwhile creating a new hswebsocket extension that replaces hshttpwebsocket and potentially uses a more recently updated websocket framework SocketRocket seems like a popular alternative but it also hasnt been updated since Apr and currently has a whole heap of pull requests awaiting review Jetfire also seems popular but again hasnt been updated since Aug However interestingly sonos forked it on Oct The Pusher Channels websocket client looks like its actively developed and also works with ObjectiveC and macOS so this is something we could potentially fork and modify This probably falls into the toohard basket though Another idea I had was to do the websocket work in NodeJS and use something like NodObjC as a bridge but again that probably complicates things a bit too much Long story short my main focus for now is trying to convert this Loupedeck CT Nodejs module into something I can use in Hammerspoon and currently my attempts using hshttpwebsocket have failed whilst it all works great in NodeJSland so Id love to come up with a solution Based on some existing open issues it seems websockets are important to quite a few users in the Hammerspoon community so very much open to ideas and suggestions Thoughts asmagill jeffmikels RobertMMuench seanfarley hseventtapeventnewKeyEvent truepost hseventtapeventnewKeyEvent truepost Im trying to write a automation script with the marvelous hammerspoon for the first time I found that I cannt fire an underscore key event namely the char and the virtual code didnt work either I cannt find it in hskeycodesmap or anywhere else Other characters like hyphen and arrow key left work By the way I intend to add the underscore as prefix for the name field of the SAVE AS modal dialog of PHOTOSHOP Source code hshttpwebsocket has been removed and replaced with hswebsocket which uses SocketRocket instead of PocketSocket Closes Closes Closes Closes Similar to hsstreamdeck Id like to add native support for the Loupedeck CT in Hammerspoon It seems this team has already done some awesome reverse engineering work here It uses websockets so Im hoping to make use of the currently undocumented hshttpwebsocket Theres quite a few issues open regarding websockets so Im hoping I can close up a few of them at the same time Hello everyone Ever since I first started using HS I ve been using hsapplicationwatcher to respond to app events and specifically to enter an app s associated hshotkeymodal object when it gains focus and exit that modal when it loses focus Naturally I want an app s modal to be active only when that app is truly the focused object Many times however the focus is taken by windows belonging to other apps Those are mainly helper windows input bars or other components usually accompanying the main app think Password mini the Emoji Symbols window Spotlight s search bar Those windows are never detected by hsapplicationwatcher and this conflicts with the keybindings I set for the previously active app Instead of sending the keypresses to the app thats truly focused or simply exiting the modal HS still sends those to the keybinding s target app as in the configuration And this usually does nothing since the target app doesn t have the focus This leads me to having to check if the active app as hsapplicationwatcher sees it is indeed the active up I do that by calling what I regard as the source of truth in this case hswindowfocusedWindowapplication and comparing the results I have to do that for almost every hshotkey I bind so the code can become extremely verbose hswindow is insanely powerful it detects even negligible windows like the aforementioned Emoji Symbols one and never fails me when detecting the truly focused app So I was wondering are there any downsides to using hswindowfilter to responds to app events instead of hsapplicationwatcher performance andor stability wise Thanks I am trying to assign a shortcut to focus one of my menu done in Hammerspoon The only way I found on how to do that is with Applescript tell application System Events to tell process Hammerspoon to tell menu bar item of menu bar to click this works but when calling this from Hammerspoon hsosascriptapplescripttell application System Events to tell process Hammerspoon to tell menu bar item of menu bar to click I get an index error NSLocalizedDescription System Events got an error Can U t get menu bar of process Hammerspoon Invalid index NSLocalizedFailureReason Can U t get menu bar of process Hammerspoon Invalid index OSAScriptErrorAppAddressKey NSAppleEventDescriptor x System Events OSAScriptErrorAppNameKey System Events OSAScriptErrorBriefMessageKey Can U t get menu bar of process Hammerspoon Invalid index OSAScriptErrorMessageKey System Events got an error Can U t get menu bar of process Hammerspoon Invalid index OSAScriptErrorNumberKey OSAScriptErrorOffendingObjectKey NSAppleEventDescriptor obj formindx wantmbar seld fromobj formname wantprcs seldutxt Hammerspoon fromnull OSAScriptErrorRangeKey NSRange I also tried call from file hsosascriptapplescriptFromFilebut I got the same error btw I am an absolute newb in applescript so maybe I am missing something Ive encountered the performance problem seems like those in and text hswindowtimedallWindows took s for commicrosoftVSCode Please consider adding commicrosoftVSCode to SKIPAPPS in extensionswindowinitlua Add item text commicrosoftVSCode true I am loving hammerspoon but could not yet figure out a way to maximize a window when I drag it to the top edge of my screen I am simply looking for actions that trigger when a window touches or is being pushed against an edge of the screen I want to replicate the resizing options that windows or other programs for mac offer Dragging window to the top maximize Dragging to the right right half Dragging to the left left half Any idea how I can get these events I created windows on spaces when I use local wins hswindowfilternewfalsesetAppFilterGoogle ChromegetWindows can only get the current space windows how can I get all windows in all space My script enables it so that when I press kbdCAPSLOCKkbdkbd kbd it converts and sends kbd kbdkbd kbdkbd kbdkbd kbdkbd kbd This works well for all key characters except for the arrow keys where the key event doesnt appear to be triggering For example pressing kbdCAPSLOCKkbdkbdvkbd properly sends kbd kbdkbd kbdkbd kbdkbd kbdkbdvkbd kbdCAPSLOCKkbdkbd kbd doesnt properly send kbd kbdkbd kbdkbd kbdkbd kbdkbd kbd Is there something different I need to do in order to trigger arrow keys Heres the script please excuse the other stuff but I thought Id include everything in case theres something Im not doing correctly The part thats relevant is the Passthrough section Note this also relies on Karabiner Elements which sets it up so that pressing kbdCAPSLOCKkbd sends the virtual key kbdF kbd lua A global variable for the Hyper Mode k hshotkeymodalnew F hyper cmd ctrl shift alt Enter Hyper Mode when F HyperCapslock is pressed pressedF function ktriggered false kmodifier false kenter triggermodifier function kmodifier true end Only trigger as modifier if held longer than thisj hstimerdoAfter triggermodifier hsalertshowin end Necessary to define a new function to get faster key strokes for repeating fastKeyStroke functionmodifiers key local event requirehseventtapevent eventnewKeyEventmodifiers stringlowerkey truepost eventnewKeyEventmodifiers stringlowerkey falsepost ktriggered true end Passthrough passthroughdefinitions Password hyper Alfred hyper v Fantastical hyper c macOS Sidebar hyper Mate Translate hyper t Moom hyper up hyper right hyper down hyper left hyper hyper tab hyper hyper for i definition in pairspassthroughdefinitions do Note that Lua copies by reference so assigning variable doesnt work modifier is definition key is definition passthrough function printTriggering passthrough hyper definition fastKeyStrokedefinition definition ktriggered true end Uncomment line below when binding new kbind definition passthrough nil nil end Applications apps a Anki w Bear Discord e Evernote f Finder r Google Chrome Intercom n iTerm i Polymail u Slack b Firefox p Spotify m Sublime Text g Telegram o Todoist y WhatsApp for i app in ipairsapps do launchApplication function hsapplicationlaunchOrFocusapp ktriggered true end kbind app launchApplication nil nil end function onAppLaunchedappName eventType app if eventType hsapplicationwatcherlaunched then if appName Firefox then browser Firefox safariPid apppid printFirefox launched setting browser to Firefox with PID safariPid end elseif eventType hsapplicationwatcherterminated then if apppid safariPid then browser Google Chrome safariPid nil printApplication with PID safariPid matching Safari terminated setting browser to Google Chrome end end end Open specific browser depending on whats open appWatcher hsapplicationwatchernewonAppLaunched appWatcherstart Arrow keys hsfnutilseach modifiers keyh directionLeft modifiersshift keyh directionLeft modifierscmd keyh directionLeft modifiersshift cmd keyh directionLeft modifiers keyj directionDown modifiersshift keyj directionDown modifierscmd keyj directionDown modifiersshift cmd keyj directionDown modifiers keyk directionUp modifiersshift keyk directionUp modifierscmd keyk directionUp modifiersshift cmd keyk directionUp modifiers keyl directionRight modifiersshift keyl directionRight modifierscmd keyl directionRight modifiersshift cmd keyl directionRight functionconfig kbindconfigmodifiers configkey function fastKeyStrokeconfigmodifiers configdirection end nil function fastKeyStrokeconfigmodifiers configdirection end end kbindshift k function fastKeyStrokeshift Up end fastKeyStrokeshift Up nil Leave Hyper Mode when F HyperCapslock is pressed send ESCAPE if no other keys are pressed releasedF function kexit if not ktriggered then If hotkey held longer than this amount of time let it remain as modifier and dont send ESCAPE if not kmodifier then hseventtapkeyStroke ESCAPE else printModifier detected end end end Bind the Hyper key hshotkeybind F pressedF releasedF Bind so that modifiers can be pressed first before Hyper key for combinations hshotkeybindshift F pressedF releasedF hshotkeybindcmd F pressedF releasedF Reload config when any lua file in config directory changes function reloadConfigfiles doReload false for file in pairsfiles do if filesub lua then doReload true end end if doReload then hsreload printreloaded end end local myWatcher hspathwatchernewosgetenvHOME hammerspoon reloadConfigstart Thanks for the great tool