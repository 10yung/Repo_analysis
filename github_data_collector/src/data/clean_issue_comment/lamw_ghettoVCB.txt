 hi want to backup one of my ESXi servers c drive but exclude d drive is it posible thanks I have ESXi free runing on Dell R R hardware I backup the VMs on the R hardware to a WD iSCSI storage and try to restore them on the R The backup and restore work without any error message but the restored VMs show up as invalid on the R backup hardware I used vimcmd vmsvcgetallvms and vimcmd vmsvcunregister invalid VM to remove the registration and tried to register manually same problem I have a simiar setup with ESXi hosts and it works flawlessly Hello im not able to debug this but it looks like ghetto is deleting the backup directory at some point during backup This only happens with this specific virtual machine i can backup others into the same datastore ESXs config and working dir are in the SRC datastore Source EMCdatastore iSCSI Dest SeagateNFS the only error I see is NOT logged to file is the STATUSok file creation Relevant part in logfile debug findVMDK Searching for VMDK serverx Vritualvmdk to backup debug sbinvmkfstools i vmfsvolumesEMCdatastore serverx Vritualserverx Vritualvmdk a lsilogic d thin vmfsvolumesSeagateNFSserverx Vritualserverx Vritual serverx Vritualvmdk Option adaptertype is deprecated and hence will be ignored Destination disk format VMFS thinprovisioned Cloning disk vmfsvolumesEMCdatastore serverx Vritualserverx Vritualvmdk Clone done Clone done Clone done Clone done info Removing snapshot from serverx Vritual debug Removing vmfsvolumesSeagateNFSserverx Vritualserverx Vritual info Slept seconds to work around NFS IO error info Backup Duration Minutes info Successfully completed backup for serverx Vritual Complete log file This is similar to issue Because the user reporting this issue was not working anymore with ghetto he could not answer the question whether still is a problem Yes is still a problem We have a VM with two disks one on a ssd second one in a different datastore In the vmx the disk file names are not stored with their full path how it is without manually added fileSearchPath andor workingDir In this case the paths are defined in fileSearchPath andor workingDir variable ghettoVCB will only backup the VMDK from the ssd where the vmx is stored And throw an error WARNING A physical RDM SOURCEVMDK was found for VMNAME which will not be backed up Reason ist that the grep into the vmdk exit with file not found For debug purpose I patched the script to see whats going on info grep vmfsPassthroughRawDeviceMap vmfsvolumesssd TSNeuaufbauTSNeuaufbau vmdk returned info ERROR error in backing up of vmfsvolumesssd TSNeuaufbauTSNeuaufbau vmdk for WEBERTSERVER Unfortunately I cant fix this sorry Klaus Even if BIOS file is indicated in vmx file the BIOS file is not copied by ghettoVCB please include BIOS file to copy if indicated Thank you in advance Hi I have many vms with space and brackets Im able to use the ghettoVCBpath script to backup these vms how ever the VMBACKUPROTATIONCOUNT function fails to find these vms The function works fine with vms without space or brackets please help info CONFIG BACKUPLOGOUTPUT tmpghettoVCB log info CONFIG ENABLECOMPRESSION info CONFIG VMSNAPSHOTMEMORY info CONFIG VMSNAPSHOTQUIESCE info CONFIG ALLOWVMSWITHSNAPSHOTSTOBEBACKEDUP info CONFIG VMDKFILESTOBACKUP all info CONFIG VMSHUTDOWNORDER info CONFIG VMSTARTUPORDER info CONFIG RSYNCLINK info CONFIG BACKUPFILESCHMOD info CONFIG EMAILLOG debug Storage Information before backup debug SRCDATASTORE datastore debug SRCDATASTORECAPACITY GB debug SRCDATASTOREFREE GB debug SRCDATASTOREBLOCKSIZE debug SRCDATASTOREMAXFILESIZE GB debug debug DSTDATASTORE netappbackup debug DSTDATASTORECAPACITY GB debug DSTDATASTOREFREE GB debug DSTDATASTOREBLOCKSIZE NA debug DSTDATASTOREMAXFILESIZE NA debug debug getVMDKs cent test vmdk info Initiate backup for cent test debug findVMDK Searching for VMDK cent test vmdk to backup debug sbinvmkfstools i vmfsvolumesdatastore cent test cent test vmdk a lsilogic d thin vmfsvolumesnetappbackupcent test cent test cent test vmdk info Backup Duration Seconds info Successfully completed backup for cent test debug Storage Information after backup debug SRCDATASTORE datastore debug SRCDATASTORECAPACITY GB debug SRCDATASTOREFREE GB debug SRCDATASTOREBLOCKSIZE debug SRCDATASTOREMAXFILESIZE GB debug debug DSTDATASTORE netappbackup debug DSTDATASTORECAPACITY GB debug DSTDATASTOREFREE GB debug DSTDATASTOREBLOCKSIZE NA debug DSTDATASTOREMAXFILESIZE NA debug debug Sleeping for seconds before unmounting NFS volume ls al vmfsvolumesnetappbackupcent test total drwxrxrx root root Aug drwxrxrx root root Aug drwxrxrx root root Aug cent test drwxrxrx root root Aug cent test drwxrxrx root root Aug cent test Ive used ghettoVCB on a pair of ESXi U servers backing up all running VMs a on each host Ive been migrating VMs to a shared datastore NFS TB datastore x TB Seagate Barracuda drives in RAID array with x TB Seagate EVO SSDs as cache in a QNAP NAS Ive recently noticed that VMs which live on the shared datastore are no longer in my nightly email report of Final status All VMs backed up OK Is this intentional as ghettoVCB cannot be expected to support backing up VMs on shared storage or do I need to change a config or is this a bug I have an ESXi U host which uses ghettoVCB to back up nightly Ive noticed now with a couple VMs that when I go to restore the VM using the ghettoVCBrestoresh script the result is a nonbootable VM stuck at the Windows boot loader screen This appears to apply only to my newer VMs created using EFI instead of BIOS for boot Virtualization Based Security VBS is not enabled nor is Secure Boot for the VM Im attempting to restore Ive now seen this with a Windows Server VM and a Photon OS Linux VM Is this a known issue with a workaround or do I need to find another backup system because I have started using UEFI Hello if I start the backup with g the following error message comes rootesx vmfsvolumes d b cac a c ab c e e ghettoVCBmaster ghettoVCBsh m DLS d dryrun g ghettoVCBconf ghettoVCBsh source line ghettoVCBconf not found rootesx vmfsvolumes d b cac a c ab c e e ghettoVCBmaster ls l total rwrr root root Jul READMEmd rwxrxrx root root Jul ghettoVCBrestoresh rwrr root root Jul ghettoVCBrestorevmconfiguration rwrr root root Jul ghettoVCBrestorevmrestoreconfigurationtemplate rwrr root root Jul ghettoVCBvmbackupconfigurationtemplate rwrr root root Jul ghettoVCBconf rwxrxrx root root Jul ghettoVCBsh rwrr root root Jul vghettoghettoVCBofflinebundlezip rwrr root root Jul vghettoghettoVCBvib is this problem known 