 Environment details OS From my web site PHP version Package name and version Google Analytics API version Steps to reproduce Search total page views from Google Analytics data using the Google API Taking as example one url with K views the result from the API is K views If I try to take views before im having empty result Code example php optParams array dimensions gapageTitlegapagePath filters gahostnamewwwmydomaincom sort gapageviews startindex res analyticsdatagaget ga profileId today gapageviews optParams rowsres rows printrrows The result for this query is Array Leccionario Bienal B blico Patr stico mydomaincom leccionariobienalbiblicopatristico But this URL have K views Now changing today param for one date before php optParams array dimensions gapageTitlegapagePath filters gahostnamewwwmydomaincom sort gapageviews startindex res analyticsdatagaget ga profileId gapageviews optParams rowsres rows printrres The result for this query is rows sampleSize sampleSpace selfLink totalResults totalsForAllResults Array gapageviews When debugging i want to see postbody PLEASE READ If you have a support contract with Google please create an issue in the support console instead of filing on GitHub This will ensure a timely response client new GoogleClient clientuseApplicationDefaultCredentials clientsetConfigtimeout I use like this but it not work how can I solve it Apologies if this is not an actual bug but it seems to me it should work this way and the quickstartphp example seems to suggest it should Version googleapiclient After the library does an autorefresh of the access token it seems that the internal accesstoken and created values as returned via the getAccessToken method do not update This results in the prerefresh values being used and returned by subsequent calls something that is going to be unnecessarily hiking load values on the Google side Unless Im missing something I would intuitively expect these to be updated to the latest value so that subsequent calls do not repeat the refresh operation and so that the new values are available via the getAccessToken method The values do update correctly and are returned correctly when using clientfetchAccessTokenWithRefreshToken when tested as of I expect that few people are using the autorefresh functionality so far but as time goes on you will see access tokens being refreshed on every access as a symptom of this problem Current workaround code in a setTokenCallback function is tokenCallback function cacheKey newAccessToken use accesstoken TOKENFILE client accesstoken accesstoken newAccessToken workaround accesstoken created time workaround fileputcontentsTOKENFILE jsonencodeaccesstoken JSONPRETTYPRINT clientsetAccessTokenaccesstoken workaround echo callback New access token obtained ckcacheKey printrnewAccessToken br n clientsetTokenCallbacktokenCallback Version from composerlock name googleapiclient version v Despite fairly extensive searching its difficult or impossible to find how to use this library for updates ie using PATCH if possible but really just wanting to know what is considered best practice Im asking here given your statement at the end of the documentation page Would it be possible to find out what is recommended for updating records Some questions for which answers would make life so much easier what is best practice for updates does the existing update method do PATCH automatically For example a couple of examples shoring the following would make things much clearer changing the color of a an existing Calendar Event updating a contact just to add a phone number Ive looked through both the client documentation and the Calendar API documentation and I cant see any PHP examples for updates There seems to be very little in terms of PHP update examples available via Google search too though possibly I just had the wrong keywords Environment details OS Ubuntu LTS PHP version Package name and version googleapiclient v Steps to reproduce GET Code example php const DEFAULTSCOPES array how thisclient is created private function setGoogleClient clientSecret client new GoogleClient clientsetAuthConfigclientSecret clientsetAccessTypeoffline offline access clientsetIncludeGrantedScopestrue incremental auth clientaddScope thisscopes appHostname getenvAPPHOSTNAME getenvHOSTNAME selfDEFAULTAPPHOSTNAME clientsetRedirectUri appHostname selfGMBCODEREDIRECTPATH clientsetApprovalPromptforce return client account request accountsResponse thishttpClientrequest GET selfGMBHOST selfGMBAPIVERSION selfGMBACCOUNTSRESOURCE headers Authorization Bearer gmbAuthaccessToken fetching so initial fetching is based on the redirect that provides the code is the simple call to thisgoogleClientfetchAccessTokenWithAuthCodeauthCode accessToken thisgoogleClientgetAccessToken refreshing the token looks at the age of it and then auto refresh it before making a request If already expired this is called accessToken thisgoogleClientfetchAccessTokenWithRefreshToken gmbAuthrefreshToken the call to accounts resource is only made if the token refresh is successful else the whole Auth object access token including code refresh code when created TTL etc is disabled and the user is only able to see cached locations as ultimately the scope is to get the locations for all accounts Not sure where the problem is coming from but as I see it the access tokens are definitely valid when making the request and the scopes are fixed The above is an extract of the code that does not permanently fail The exception is Client error GET resulted in a Forbidden response error code message Request had insufficient authentication scopes status PERMISS truncated But the scopes are always a fixes set as shown above and plusbusinessmanage is always included in the calls As mentioned above this is not a permanent error and given the scopes do not change I have no idea where the problem is coming from Any suggestion on what might be going wrong API services not available to use V GoogleApi Problem in version of googleapiclientservices in composerjson after manual update required lib problem was solved Hi Maybe this is not a bug Hope its okay I do it here Im trying to get the userinfo using oauth with idtoken instead of code So instead of the following which worked php googleclientauthenticateGET code token googleclientgetAccessToken if googleclientgetAccessToken auth call to google googleservice new GoogleServiceOauth googleclient data googleserviceuserinfoget From the above token I can get the idtoken data so I tried to get userinfo data by idtoken Note hardcode idtoken for testing php verifyres googleclientverifyIdTokenidtoken googleservice new GoogleServiceOauth googleclient data googleserviceuserinfoget But it doesnt work and I got this error The reason Im using idtoken because if its for mobile app sign in then app side seems can only pass the idtoken and not the code value Fatal error Uncaught GoogleServiceException Error calling GET Request is missing required authentication credential Expected OAuth access token login cookie or other valid authentication credential See in testGoogleHttpRESTphp on line Im using ver though But is it possible to get userinfo from idtoken instead In order to reconsolidate all access token utilities after googleauth was released this PR migrates token verification to auth in a nonbreaking manner This is from this example I will post it in the other repo Environment details OS Windows Home bit PHP version PHP cli built Aug ZTS MSVC Visual C x Package name and version const LIBVER Steps to reproduce Code example fix php renewed Refresh the token if possible else fetch a new one if clientgetRefreshToken clientfetchAccessTokenWithRefreshToken clientgetRefreshToken renewed else Request authorization from the user authUrl clientcreateAuthUrl printf Open the following link in your browser ns n authUrl print Enter verification code authCode trim fgets STDIN Exchange authorization code for an access token accessToken clientfetchAccessTokenWithAuthCode authCode clientsetAccessToken accessToken Check to see if there was an error if arraykeyexists error accessToken throw new Exception join accessToken if renewed Save the token to a file if fileexists dirname tokenPath mkdirres mkdir dirname tokenPath true if empty mkdirres throw new Exception Cannot create parent directory for file tokenPath saveres fileputcontents tokenPath jsonencode clientgetAccessToken LOCKEX if empty saveres throw new Exception Cannot save file tokenPath 