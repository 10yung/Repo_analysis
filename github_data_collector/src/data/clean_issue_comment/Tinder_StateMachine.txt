Some of the state will need a timeout to go to idle or something How do you do that Can somewhere give an example Hi amazing library Im trying to implement it in my own project These are my states sealed class State object Loading State class Successval response SomeDataClass State class Failureval exception Exception State These are the events sealed class Event class OnApiSuccessval response SomeDataClass Event class OnApiFailureval exception Exception Event Finally this is the side effect sealed class SideEffect object AfterApiSuccess SideEffect object AfterApiFailure SideEffect This is the implementation of state machine val stateMachine StateMachinecreateState Event SideEffect initialStateStateLoading stateStateLoading onEventOnApiSuccess transitionToStateSuccessitresponse SideEffectAfterApiSuccess onEventOnApiFailure transitionToStateFailureitexception SideEffectAfterApiFailure stateStateSuccess stateStateFailure onTransition if it is StateMachineTransitionValid when itsideEffect SideEffectAfterApiSuccess LogeStateMachine Current State is ittoStatejavaClasssimpleName SideEffectAfterApiFailure LogeStateMachine Current State is ittoStatejavaClasssimpleName else if it is StateMachineTransitionInvalid LogeStateMachine Something went wrong I have a MutableLiveData in my viewmodel which observes State val stateObserver MutableLiveDataState MutableLiveData to which Im posting value as stateObserverpostValuestateMachinetransitionEventOnApiSuccessresponsefromState or stateObserverpostValuestateMachinetransitionEventOnApiFailureexceptionfromState And my implementation of LiveData observer is as below someViewModelstateObserverobservethis Observer state when state is StateLoading progressvisibility ViewVISIBLE listvisibility ViewGONE errorvisibility ViewGONE is StateSuccess progressvisibility ViewGONE listvisibility ViewVISIBLE errorvisibility ViewGONE LogeTAG Response is stateresponseresults is StateFailure progressvisibility ViewGONE listvisibility ViewGONE errorvisibility ViewVISIBLE LogeTAG Error is stateexceptionmessage I dont what is Im doing wrong but my app is getting stuck on loading Help is much appreciated Thanks Hi As in your readme file I would like to test the transitions kotlin assertThattransitionisEqualTo StateMachineTransitionValidSolid OnMelted Liquid LogMelted But the Valid data class has an internal constructor so I cant access it in my tests What should I do Thanks First of all thanks for this awesome library And I have a little question about underlying theory Is onEnter callback applicable for side effects in terms of finite state machine theory Or should I create a model for every side effect and perform them exclusively in onTransition callback Thanks in advance Because I want to determine the action according to the toState state If you can I can create an extension function then I can write to flow ex If toState property is publish and you define below extension fun Statenavigate whenthis Solid foo we can write the following stateMachinetransitionSomeEventtoStatenavigate Now we can only write the following stateMachinerun transitionit statenavigate Thank you any chance to set this one file library to a more open license eg MIT Apache etc its neat but that license makes it basically unusable to almost every commercial application i wonder if that is truly necessary for this particular library have a nice day I have a use case where the state machine is governing a long running process that spans over multiple device restarts android Is there a way I can start the machine in a specific state different from default initial state Related to Hi I wanna bounce of you a design question since im trying to rewrite implicit state machine to explicit one Usually the code looks like this fun foo if currentState Bar doSomething currentState Quax What I usually see is people having transition function which according to input action changes state but however it would do so before doSomething is ran to me which is a problem since currentState will be observable and subscribers expect doSomething to have ran if state is Quax Do I need some PRE POSTstate pairs or something Seems weird for synchronous code What would be your solution As proposed in invalid transition should cause an exception In my opinion current behavior returning Invalid object is a good solution however users should be able to enable throwing exceptions in such cases 