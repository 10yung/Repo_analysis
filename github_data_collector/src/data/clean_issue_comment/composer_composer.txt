Re The Archive Format set to zip in composerjson does not work but it does work as a command line flag My composerjson json name cliffordpfoobar description A thing type project license GPL orlater authors name TourKick LLC Clifford Paulick email tkotourkickcom homepage role Developer archive exclude vendor babeljs env local test zip allcontributorsrc babelrc gitattributes github gitignore phpcsxml phpunitresultcache travisyml wordpressorg READMEmd composerjson composerlock composerphar development logs nodemodules phpcsxml phpunitxml autoload psr FooBar src config archiveformat zip optimizeautoloader true Output of composer diagnose Checking composerjson OK Checking platform settings OK Checking git settings OK Checking http connectivity to packagist OK Checking https connectivity to packagist OK Checking githubcom rate limit OK Checking disk free space OK Checking pubkeys Tags Public Key Fingerprint BA E DC ECC CC D BA F BB E D D A Dev Public Key Fingerprint AC E EC F C CBBB A B C E C AD D AFE OK Checking composer version OK Composer version PHP version PHP binary path usrlocalCellarphp binphp When I run this command php composerphar archive file foobar I get the following output Created foobartar And I expected this to happen Generate a foobarzip not a foobartar However if I run this command php composerphar archive formatzip file foobar Then it works as desired zip It used work but I dont know which prior version of Composer I was using Hello We use CI process which includes a composer install command Every composer install execution modifies the dates for the vendor folder and some files It blocks docker layer caching system and increase CI JOB time This PR allows composer install and docker cache system to run along See TODOs added by Recently formatted my laptop and tried to install Composer v using PHP v TS My composerjson json name symfonywebsiteskeleton type project license MIT description A skeleton to start a new Symfony website require php extctype exticonv sensioframeworkextrabundle symfonyasset symfonyconsole symfonydotenv symfonyexpressionlanguage symfonyflex symfonyform symfonyframeworkbundle symfonymonologbundle symfonyormpack symfonyprocess symfonysecuritybundle symfonyserializerpack symfonyswiftmailerbundle symfonytranslation symfonytwigbundle symfonyvalidator symfonyweblink symfonyyaml requiredev symfonydebugpack symfonymakerbundle symfonyprofilerpack symfonytestpack symfonywebserverbundle config preferredinstall dist sortpackages true disabletls false securehttp true autoload psr App src autoloaddev psr App Tests tests replace paragonierandomcompat symfonypolyfillctype symfonypolyfilliconv symfonypolyfillphp symfonypolyfillphp symfonypolyfillphp scripts autoscripts cacheclear symfonycmd assetsinstall PUBLICDIR symfonycmd postinstallcmd autoscripts postupdatecmd autoscripts conflict symfonysymfony extra symfony allowcontrib false require Output of composer diagnose RTAC UB C composer diag Do not run Composer as rootsuper user See for details Checking platform settings OK Checking git settings OK Checking http connectivity to packagist OK Checking https connectivity to packagist OK Checking githubcom rate limit FAIL Composer Downloader TransportException The file could not be downloaded SSL operation failed with code OpenSSL Error messages error ESSL routinesssl readbytestlsv alert protocol version Failed to enable crypto failed to open stream operation failed Checking disk free space OK Checking pubkeys Tags Public Key Fingerprint BA E DC ECC CC D BA F BB E D D A Dev Public Key Fingerprint AC E EC F C CBBB A B C E C AD D AFE OK Checking composer version OK Composer version PHP version PHP binary path tmpmntsda entwarebinphpcli When I run this command composer install I get the following output Do not run Composer as rootsuper user See for details Loading composer repositories with package information Installing dependencies including requiredev from lock file Package operations installs updates removals Installing ocramiuspackageversions Downloading failed Downloading failed Downloading failed Failed to download ocramiuspackageversions from dist The file could not be downloaded SSL operation failed with code OpenSSL Error messages error ESSL routinesssl readbytestlsv alert protocol version Failed to enable crypto failed to open stream operation failed Now trying to download from source Installing ocramiuspackageversions Cloning af f a e RuntimeException Failed to clone via https ssh protocols aborting Cloning into tmpmntsda entwaresharenginxhtmlRemoteAdminvendorocramiuspackageversions fatal unable to find remote helper for https gitgithubcomOcramiusPackageVersionsgit Cloning into tmpmntsda entwaresharenginxhtmlRemoteAdminvendorocramiuspackageversions gitgithubcom Permission denied publickey fatal Could not read from remote repository Please make sure you have the correct access rights and the repository exists install prefersource preferdist dryrun dev nodev nocustominstallers noautoloader noscripts vvverbose ooptimizeautoloader aclassmapauthoritative apcuautoloader ignoreplatformreqs packages And I expected this to happen As Gitlab stopped supporting and using TLSv and TLSv I expected composer to use TLSv but I found no way to actually configure this I only started using php for a personal project I did a very basic configuration of php that could show phpinfo in browser through LAN with nginx But when I installed composer to use Symphony it wasnt working wget and curl successfully connects and gets a response from github the verbose output states them connecting with TLSv Installed cacertificates and cabundle packages are the latest version available Test on stable PHP and use latest distributions available on travis My composerjson json require typo cms xdev requiredev nimutphpunitmerger Output of composer diagnose Checking composerjson WARNING No license specified it is recommended to do so For closedsource software you may use proprietary as license requiretypo cms exact version constraints xdev should be avoided if the package follows semantic versioning Checking platform settings OK Checking git settings OK Checking http connectivity to packagist OK Checking https connectivity to packagist OK Checking githubcom oauth access OK Checking disk free space OK Checking pubkeys Tags Public Key Fingerprint BA E DC ECC CC D BA F BB E D D A Dev Public Key Fingerprint AC E EC F C CBBB A B C E C AD D AFE OK Checking composer version OK Composer version f f bf d ea fe d c b fc e PHP version PHP binary path C Unix PHP x phpexe When I run this command composer install vvv I get the following output Composer hangs at this point Somethings changed looking at all rules again pass And I expected this to happen After some investigation I found out there are some incompatible version constraints TYPO requires symfony packages with version but phpunitmerger only allows versions I would expect an error message here but Composer hangs and doesnt return anything My composerjson type project config processtimeout require php extpdopgsql extzip extintl extsoap extmbstring googleadsgoogleadsphplib zendframeworkzenddb zendframeworkzendhydrator zendframeworkzendfilter zendframeworkzendservicemanager zendframeworkzendpaginator awsawssdkphp guzzlehttpguzzle autoload psr Laborit AdsManagerWorker src requiredev phpunitphpunit autoloaddev psr Laborit TestWorker tst scripts testrun phpdbg qrr vendorphpunitphpunitphpunit coveragetext colorsnever bootstrap vendorautoloadphp tst wvarsvalidate databinvarvalidate Output of composer diagnose Checking composerjson WARNING No license specified it is recommended to do so For closedsource software you may use proprietary as license requirezendframeworkzenddb exact version constraints should be avoided if the package follows semantic versioning requirezendframeworkzendhydrator exact version constraints should be avoided if the package follows semantic versioning requirezendframeworkzendfilter exact version constraints should be avoided if the package follows semantic versioning requirezendframeworkzendservicemanager exact version constraints should be avoided if the package follows semantic versioning requirezendframeworkzendpaginator exact version constraints should be avoided if the package follows semantic versioning requireawsawssdkphp exact version constraints should be avoided if the package follows semantic versioning requireguzzlehttpguzzle exact version constraints should be avoided if the package follows semantic versioning Checking platform settings OK Checking git settings OK Checking http connectivity to packagist OK Checking https connectivity to packagist OK Checking githubcom rate limit OK Checking disk free space OK Checking pubkeys Tags Public Key Fingerprint BA E DC ECC CC D BA F BB E D D A Dev Public Key Fingerprint AC E EC F C CBBB A B C E C AD D AFE OK Checking composer version OK Composer version PHP version PHP binary path usrbinphp When I run this command docker build tag myimagetest f DockerfileTest I get the following output Step RUN curl s php Running in bcd e e All settings correct for using Composer Downloading Composer version successfully installed to composerphar Use it php composerphar The command binsh c curl s php returned a nonzero code My Dockerfile FROM php UNIX LIBRARYS ENV DEBIANFRONTEND noninteractive RUN aptget update RUN aptget y install aptutils RUN aptget upgrade y RUN aptget update RUN mkdir p usrsharemanman RUN mkdir p usrsharemanman RUN aptget install y curl git zip unzip RUN aptget install y libxml dev RUN aptget install y libpqdev RUN aptget install y zlib gdev RUN aptget install y g RUN aptget install y libicudev RUN aptget clean ENV DEBIANFRONTEND teletype RUN dockerphpextinstall jnproc pdopgsql zip intl soap RUN pecl install uopz dockerphpextenable uopz RUN curl s php RUN mv composerphar usrlocalbincomposer ENV THEDIR worker COPY THEDIR WORKDIR THEDIR COPY dataphpdevelopmentini PHPINIDIRphpini RUN composer install dev ignoreplatformreqs RUN composer update dev ignoreplatformreqs VOLUME THEDIR CMD composer testrun And I expected this to happen A zero exit code after the composer install For documentation we need sort by alphabetical command name I can to do this this weekend 