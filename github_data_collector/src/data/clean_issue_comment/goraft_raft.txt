I am getting package error while running the basic program cannot find package codegooglecompgogoprotobufproto cannot find package codegooglecompgoprotobufproto and also this package is now moved to so how to run the program as goraft needscodegooglecom package to be iincluded Ive been getting this error on a project that depends on goraft Its been happening when I try to join an existing cluster What does it mean panic assertion failed leaderelectedatsameterm goroutine running githubcomgoraftraftassert x a x d x f xc b cb x x rootopenmarkettestnetdbsrcgithubcomgoraftraftutilgo xcf githubcomgoraftraftserverprocessAppendEntriesRequest xc b xc c xc c xc c rootopenmarkettestnetdbsrcgithubcomgoraftraftservergo x githubcomgoraftraftserverleaderLoop xc b rootopenmarkettestnetdbsrcgithubcomgoraftraftservergo x githubcomgoraftraftserverloop xc b rootopenmarkettestnetdbsrcgithubcomgoraftraftservergo x githubcomgoraftraftfunc rootopenmarkettestnetdbsrcgithubcomgoraftraftservergo x created by githubcomgoraftraftserverStart rootopenmarkettestnetdbsrcgithubcomgoraftraftservergo x e goroutine chan receive mainmain rootopenmarkettestnetdbsrcgithubcomotooleprqlitemaingo x e goroutine syscall ossignalloop rootgvmgosgo srcossignalsignalunixgo x f created by ossignalinit rootgvmgosgo srcossignalsignalunixgo x goroutine chan receive databasesqlDBconnectionOpener xc rootgvmgosgo srcdatabasesqlsqlgo x c created by databasesqlOpen rootgvmgosgo srcdatabasesqlsqlgo x c goroutine IO wait netpollDescWait xc c x x x rootgvmgosgo srcnetfdpollruntimego x netpollDescWaitRead xc c x x rootgvmgosgo srcnetfdpollruntimego x netnetFDaccept xc c b x x fc a xc c rootgvmgosgo srcnetfdunixgo x b netTCPListenerAcceptTCP xc x e x x rootgvmgosgo srcnettcpsockposixgo x e nethttptcpKeepAliveListenerAccept xc x x x x rootgvmgosgo srcnethttpservergo x c nethttpServerServe xc x fc a xc x x rootgvmgosgo srcnethttpservergo x nethttpServerListenAndServe xc x x rootgvmgosgo srcnethttpservergo x githubcomotooleprqliteserverServerListenAndServe xc x fff f x x x rootopenmarkettestnetdbsrcgithubcomotooleprqliteserverservergo x b mainfunc rootopenmarkettestnetdbsrcgithubcomotooleprqlitemaingo x created by mainmain rootopenmarkettestnetdbsrcgithubcomotooleprqlitemaingo x goroutine IO wait netpollDescWait xc b c x x x rootgvmgosgo srcnetfdpollruntimego x netpollDescWaitRead xc b c x x rootgvmgosgo srcnetfdpollruntimego x netnetFDRead xc b xc ff x x x x fc a xc e rootgvmgosgo srcnetfdunixgo x f netconnRead xc xc ff x x x x x rootgvmgosgo srcnetnetgo xdc nethttpliveSwitchReaderRead xc edb xc ff x x x x x rootgvmgosgo srcnethttpservergo xab ioLimitedReaderRead xc a b xc ff x x xe x x rootgvmgosgo srcioiogo xce bufioReaderfill xc e d rootgvmgosgo srcbufiobufiogo x ce bufioReaderReadSlice xc e d xc a x x x x x rootgvmgosgo srcbufiobufiogo x bufioReaderReadLine xc e d x x x x x x rootgvmgosgo srcbufiobufiogo x nettextprotoReaderreadLineSlice xc e e x x x x x rootgvmgosgo srcnettextprotoreadergo x e nettextprotoReaderReadLine xc e e x x x x rootgvmgosgo srcnettextprotoreadergo x f nethttpReadRequest xc e d xc a c x x rootgvmgosgo srcnethttprequestgo xcb nethttpconnreadRequest xc edae x x x rootgvmgosgo srcnethttpservergo x f nethttpconnserve xc edae rootgvmgosgo srcnethttpservergo x e created by nethttpServerServe rootgvmgosgo srcnethttpservergo x e goroutine IO wait netpollDescWait xc f x x x rootgvmgosgo srcnetfdpollruntimego x netpollDescWaitRead xc f x x rootgvmgosgo srcnetfdpollruntimego x netnetFDRead xc ee xc x x x x fc a xc c de rootgvmgosgo srcnetfdunixgo x f netconnRead xc xc x x x x x rootgvmgosgo srcnetnetgo xdc cryptotlsblockreadFromUntil xc f x fc xc x x x rootgvmgosgo srccryptotlsconngo xe cryptotlsConnreadRecord xc e x x x rootgvmgosgo srccryptotlsconngo x da cryptotlsConnRead xc e xc d x x x x x rootgvmgosgo srccryptotlsconngo x nethttpnoteEOFReaderRead x fc c xc e xc c xc d x x x fc fff x x rootgvmgosgo srcnethttptransportgo x e nethttpnoteEOFReaderRead xc bd c xc d x x xc ffc fa x x autogenerated xd bufioReaderfill xc a rootgvmgosgo srcbufiobufiogo x ce bufioReaderPeek xc a x x x x x x rootgvmgosgo srcbufiobufiogo xf nethttppersistConnreadLoop xc rootgvmgosgo srcnethttptransportgo xa created by nethttpTransportdialConn rootgvmgosgo srcnethttptransportgo xc f goroutine select githubcomgoraftraftPeerheartbeat xc c xc ea rootopenmarkettestnetdbsrcgithubcomgoraftraftpeergo x githubcomgoraftraftfunc rootopenmarkettestnetdbsrcgithubcomgoraftraftpeergo x created by githubcomgoraftraftPeerstartHeartbeat rootopenmarkettestnetdbsrcgithubcomgoraftraftpeergo x ae goroutine IO wait netpollDescWait xc ed x x x rootgvmgosgo srcnetfdpollruntimego x netpollDescWaitRead xc ed x x rootgvmgosgo srcnetfdpollruntimego x netnetFDRead xc e xc ba x x x x fc a xc b rootgvmgosgo srcnetfdunixgo x f netconnRead xc xc ba x x x x x rootgvmgosgo srcnetnetgo xdc nethttpnoteEOFReaderRead x fc xc xc d xc ba x x xc c x x rootgvmgosgo srcnethttptransportgo x e nethttpnoteEOFReaderRead xc ede xc ba x x xc x x autogenerated xd bufioReaderfill xc rootgvmgosgo srcbufiobufiogo x ce bufioReaderPeek xc x x x x x x rootgvmgosgo srcbufiobufiogo xf nethttppersistConnreadLoop xc rootgvmgosgo srcnethttptransportgo xa created by nethttpTransportdialConn rootgvmgosgo srcnethttptransportgo xc f goroutine syscall locked to thread runtimegoexit rootgvmgosgo srcruntimeasmamd s x goroutine IO wait netpollDescWait xc b x x x rootgvmgosgo srcnetfdpollruntimego x netpollDescWaitRead xc b x x rootgvmgosgo srcnetfdpollruntimego x netnetFDRead xc af xc f x x x x fc a xc b a rootgvmgosgo srcnetfdunixgo x f netconnRead xc d xc f x x x x x rootgvmgosgo srcnetnetgo xdc nethttpnoteEOFReaderRead x fc xc d xc xc f x x xc x x rootgvmgosgo srcnethttptransportgo x e nethttpnoteEOFReaderRead xc eaa xc f x x xc x x autogenerated xd bufioReaderfill xc c rootgvmgosgo srcbufiobufiogo x ce bufioReaderPeek xc c x x x x x x rootgvmgosgo srcbufiobufiogo xf nethttppersistConnreadLoop xc c rootgvmgosgo srcnethttptransportgo xa created by nethttpTransportdialConn rootgvmgosgo srcnethttptransportgo xc f goroutine select nethttppersistConnwriteLoop xc c rootgvmgosgo srcnethttptransportgo x d created by nethttpTransportdialConn rootgvmgosgo srcnethttptransportgo xcbc goroutine select nethttppersistConnwriteLoop xc rootgvmgosgo srcnethttptransportgo x d created by nethttpTransportdialConn rootgvmgosgo srcnethttptransportgo xcbc goroutine select githubcomgoraftraftserversend xc b x db xcad f x x x x rootopenmarkettestnetdbsrcgithubcomgoraftraftservergo x githubcomgoraftraftserverDo xc b x fc ca xcad f x x x x rootopenmarkettestnetdbsrcgithubcomgoraftraftservergo x githubcomgoraftraftfunc rootopenmarkettestnetdbsrcgithubcomgoraftraftservergo xaf created by githubcomgoraftraftserverleaderLoop rootopenmarkettestnetdbsrcgithubcomgoraftraftservergo x de goroutine IO wait netpollDescWait xc c x x x rootgvmgosgo srcnetfdpollruntimego x netpollDescWaitRead xc c x x rootgvmgosgo srcnetfdpollruntimego x netnetFDRead xc c xc x x x x fc a xc b rootgvmgosgo srcnetfdunixgo x f netconnRead xc xc x x x x x rootgvmgosgo srcnetnetgo xdc nethttpliveSwitchReaderRead xc xc x x x x x rootgvmgosgo srcnethttpservergo xab ioLimitedReaderRead xc e c xc x x xe x x rootgvmgosgo srcioiogo xce bufioReaderfill xc e rootgvmgosgo srcbufiobufiogo x ce bufioReaderReadSlice xc e xc a x x x x x rootgvmgosgo srcbufiobufiogo x bufioReaderReadLine xc e x x x x x x rootgvmgosgo srcbufiobufiogo x nettextprotoReaderreadLineSlice xc d x x x x x rootgvmgosgo srcnettextprotoreadergo x e nettextprotoReaderReadLine xc d x x x x rootgvmgosgo srcnettextprotoreadergo x f nethttpReadRequest xc e xc a e x x rootgvmgosgo srcnethttprequestgo xcb nethttpconnreadRequest xc c x x x rootgvmgosgo srcnethttpservergo x f nethttpconnserve xc c rootgvmgosgo srcnethttpservergo x e created by nethttpServerServe rootgvmgosgo srcnethttpservergo x e goroutine IO wait netpollDescWait xc c d x x x rootgvmgosgo srcnetfdpollruntimego x netpollDescWaitRead xc c d x x rootgvmgosgo srcnetfdpollruntimego x netnetFDRead xc c xc d x x x x fc a xc a rootgvmgosgo srcnetfdunixgo x f netconnRead xc xc d x x x x x rootgvmgosgo srcnetnetgo xdc nethttpliveSwitchReaderRead xc xc d x x x x x rootgvmgosgo srcnethttpservergo xab ioLimitedReaderRead xc e xc d x x xe x x rootgvmgosgo srcioiogo xce bufioReaderfill xc c rootgvmgosgo srcbufiobufiogo x ce bufioReaderReadSlice xc c xc a x x x x x rootgvmgosgo srcbufiobufiogo x bufioReaderReadLine xc c x x x x x x rootgvmgosgo srcbufiobufiogo x nettextprotoReaderreadLineSlice xc d x x x x x rootgvmgosgo srcnettextprotoreadergo x e nettextprotoReaderReadLine xc d x x x x rootgvmgosgo srcnettextprotoreadergo x f nethttpReadRequest xc c xc a x x rootgvmgosgo srcnethttprequestgo xcb nethttpconnreadRequest xc x x x rootgvmgosgo srcnethttpservergo x f nethttpconnserve xc rootgvmgosgo srcnethttpservergo x e created by nethttpServerServe rootgvmgosgo srcnethttpservergo x e goroutine select nethttppersistConnwriteLoop xc rootgvmgosgo srcnethttptransportgo x d created by nethttpTransportdialConn rootgvmgosgo srcnethttptransportgo xcbc goroutine IO wait netpollDescWait xc c x x x rootgvmgosgo srcnetfdpollruntimego x netpollDescWaitRead xc c x x rootgvmgosgo srcnetfdpollruntimego x netnetFDRead xc c a xc a x x x x fc a xc rootgvmgosgo srcnetfdunixgo x f netconnRead xc xc a x x x x x rootgvmgosgo srcnetnetgo xdc nethttpnoteEOFReaderRead x fc xc xc aa xc a x x x e e x x rootgvmgosgo srcnethttptransportgo x e nethttpnoteEOFReaderRead xc a ea xc a x x xc x x autogenerated xd bufioReaderfill xc e a rootgvmgosgo srcbufiobufiogo x ce bufioReaderPeek xc e a x x x x x x rootgvmgosgo srcbufiobufiogo xf nethttppersistConnreadLoop xc a rootgvmgosgo srcnethttptransportgo xa created by nethttpTransportdialConn rootgvmgosgo srcnethttptransportgo xc f goroutine select githubcomgoraftraftserversend xc b x xc c x x x x rootopenmarkettestnetdbsrcgithubcomgoraftraftservergo x githubcomgoraftraftserverAppendEntries xc b xc c xc c rootopenmarkettestnetdbsrcgithubcomgoraftraftservergo x githubcomgoraftraftfunc x fc b xc ede xc ee rootopenmarkettestnetdbsrcgithubcomgoraftrafthttptransportergo x e nethttpHandlerFuncServeHTTP xc ade x fc b xc ede xc ee rootgvmgosgo srcnethttpservergo x githubcomgorillamuxRouterServeHTTP xc a x fc b xc ede xc ee rootopenmarkettestnetdbsrcgithubcomgorillamuxmuxgo x nethttpserverHandlerServeHTTP xc x fc b xc ede xc ee rootgvmgosgo srcnethttpservergo x a nethttpconnserve xc e rootgvmgosgo srcnethttpservergo xb created by nethttpServerServe rootgvmgosgo srcnethttpservergo x e goroutine select nethttppersistConnroundTrip xc xc x x x rootgvmgosgo srcnethttptransportgo x ad nethttpTransportRoundTrip xc d xc b xc e e x x rootgvmgosgo srcnethttptransportgo x nethttpsend xc b x fc e xc d x a x x rootgvmgosgo srcnethttpclientgo x fc nethttpClientsend xc xc b x a x x rootgvmgosgo srcnethttpclientgo x b nethttpClientdoFollowingRedirects xc xc b x d a x x x rootgvmgosgo srcnethttpclientgo xb nethttpClientPost xc xc e x a x d dd x x fc d xc b xc ea x x rootgvmgosgo srcnethttpclientgo x d githubcomgoraftraftHTTPTransporterSendAppendEntriesRequest xc x fc f xc b xc c f xc d x rootopenmarkettestnetdbsrcgithubcomgoraftrafthttptransportergo x ec githubcomgoraftraftPeersendAppendEntriesRequest xc c f xc d rootopenmarkettestnetdbsrcgithubcomgoraftraftpeergo x githubcomgoraftraftPeerflush xc c f rootopenmarkettestnetdbsrcgithubcomgoraftraftpeergo x e githubcomgoraftraftPeerheartbeat xc c f xc e rootopenmarkettestnetdbsrcgithubcomgoraftraftpeergo x de githubcomgoraftraftfunc rootopenmarkettestnetdbsrcgithubcomgoraftraftpeergo x created by githubcomgoraftraftPeerstartHeartbeat rootopenmarkettestnetdbsrcgithubcomgoraftraftpeergo x ae goroutine select nethttppersistConnwriteLoop xc a rootgvmgosgo srcnethttptransportgo x d created by nethttpTransportdialConn rootgvmgosgo srcnethttptransportgo xcbc goroutine IO wait netpollDescWait xc b x x x rootgvmgosgo srcnetfdpollruntimego x netpollDescWaitRead xc b x x rootgvmgosgo srcnetfdpollruntimego x netnetFDRead xc b d xc c x x x x fc a xc eb rootgvmgosgo srcnetfdunixgo x f netconnRead xc a xc c x x x x x rootgvmgosgo srcnetnetgo xdc nethttpliveSwitchReaderRead xc edbc xc c x x x x x rootgvmgosgo srcnethttpservergo xab ioLimitedReaderRead xc a ba xc c x x xe x x rootgvmgosgo srcioiogo xce bufioReaderfill xc rootgvmgosgo srcbufiobufiogo x ce bufioReaderReadSlice xc xc a x x x x x rootgvmgosgo srcbufiobufiogo x bufioReaderReadLine xc x x x xc ff c x x rootgvmgosgo srcbufiobufiogo x nettextprotoReaderreadLineSlice xc e x x x x x rootgvmgosgo srcnettextprotoreadergo x e nettextprotoReaderReadLine xc e x x x x rootgvmgosgo srcnettextprotoreadergo x f nethttpReadRequest xc xc ab x x rootgvmgosgo srcnethttprequestgo xcb nethttpconnreadRequest xc edb x x x rootgvmgosgo srcnethttpservergo x f nethttpconnserve xc edb rootgvmgosgo srcnethttpservergo x e created by nethttpServerServe rootgvmgosgo srcnethttpservergo x e goroutine select nethttppersistConnroundTrip xc a xc x x x rootgvmgosgo srcnethttptransportgo x ad nethttpTransportRoundTrip xc d xc aea xc e x x rootgvmgosgo srcnethttptransportgo x nethttpsend xc aea x fc e xc d x c x x rootgvmgosgo srcnethttpclientgo x fc nethttpClientsend xc xc aea x c x x rootgvmgosgo srcnethttpclientgo x b nethttpClientdoFollowingRedirects xc xc aea x d a x x x rootgvmgosgo srcnethttpclientgo xb nethttpClientPost xc xc e d x c x d dd x x fc d xc b xc ea x x rootgvmgosgo srcnethttpclientgo x d githubcomgoraftraftHTTPTransporterSendAppendEntriesRequest xc x fc f xc b xc c d xc x rootopenmarkettestnetdbsrcgithubcomgoraftrafthttptransportergo x ec githubcomgoraftraftPeersendAppendEntriesRequest xc c d xc rootopenmarkettestnetdbsrcgithubcomgoraftraftpeergo x githubcomgoraftraftPeerflush xc c d rootopenmarkettestnetdbsrcgithubcomgoraftraftpeergo x e githubcomgoraftraftPeerheartbeat xc c d xc e rootopenmarkettestnetdbsrcgithubcomgoraftraftpeergo x de githubcomgoraftraftfunc rootopenmarkettestnetdbsrcgithubcomgoraftraftpeergo x created by githubcomgoraftraftPeerstartHeartbeat rootopenmarkettestnetdbsrcgithubcomgoraftraftpeergo x ae goroutine select nethttppersistConnwriteLoop xc rootgvmgosgo srcnethttptransportgo x d created by nethttpTransportdialConn rootgvmgosgo srcnethttptransportgo xcbc goroutine IO wait netpollDescWait xc a x x x rootgvmgosgo srcnetfdpollruntimego x netpollDescWaitRead xc a x x rootgvmgosgo srcnetfdpollruntimego x netnetFDRead xc a f xc d x x x x fc a xc ee rootgvmgosgo srcnetfdunixgo x f netconnRead xc xc d x x x x x rootgvmgosgo srcnetnetgo xdc nethttpnoteEOFReaderRead x fc xc xc b xc d x x x e e x x rootgvmgosgo srcnethttptransportgo x e nethttpnoteEOFReaderRead xc a xc d x x xc x x autogenerated xd bufioReaderfill xc e a rootgvmgosgo srcbufiobufiogo x ce bufioReaderPeek xc e a x x x x x x rootgvmgosgo srcbufiobufiogo xf nethttppersistConnreadLoop xc rootgvmgosgo srcnethttptransportgo xa created by nethttpTransportdialConn rootgvmgosgo srcnethttptransportgo xc f Without this change after one snapshot fails to save all future calls to TakeSnapshot fail with Snapshot Last snapshot is not finished Hey all Im using raft for a project and using contextCurrentIndex in my commands Apply function for some bookkeeping I noticed in different circumstances the contextCurrentIndex is inconsistent For instance committing entries in succession against a new node cluster results in the following contexts passed to the Apply function Term CurrentIndex CommitIndex Term CurrentIndex CommitIndex Term CurrentIndex CommitIndex Killing and restarting the node will force it to recover from the log While recovering we receive the following contexts as the node replays the committed entries Term CurrentIndex CommitIndex Term CurrentIndex CommitIndex Term CurrentIndex CommitIndex This is due to how the internalCurrentIndex log method is computed Ive added a failing test and adjusted the code to always return the index of the entry for contextCurrentIndex which is the current index were applying to the state machine Let me know if anything here is unclear or if Ive misunderstood the meaning of contextCurrentIndex We have come across a bug in influxdbinfluxdb which I think is caused by the lack of locking while taking a snapshot Theres a todo that points to this limitation but I think this is a serious bug that should be addressed immediately The line in question is Allowing up to s is sufficient for a bit unsigned int I have the following snapshot files ss ss ss ss ss ss ss ss ss ss ss ss ss ss ss ss ss ss On startup the server picks the latest snapshot as a starting point The latest snapshot is determined by first sorting all the snapshot files in alphabetical order as they are above then choosing the last one The format of these file names is lastTermlastIndexss The intention here is to grab the snapshot from the highest term falling back to the highest index in case two snapshots were created within the same term Looking at the sort order above the last one is clearly not the one with the highest term or highest index I am currently experimenting with a project using goraft and I have made some things work but I notice that goraft doesnt automatically kick peers that dont respond to the heartbeat AppendEntries If an AppendEntries fails should I just execute a DefaultLeaveCommand on the master Fixes coreosetcd 