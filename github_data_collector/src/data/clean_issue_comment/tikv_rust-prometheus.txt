This PR is not a complete versionIf my implementation of AFGenericLocalCounter is acceptable I will continue to improvement a AFGenericLocalHistogram and some macroThe final target is to make local metrics have a same interface with the global ones Being able to set a counter is useful when a counter is set at scrape time for example to the sum of other counters Prometheus doesnt have any issues with Counters getting reset Wherever possible use the default linking style of looking names up in the enclosing namespace without adding an explicit link but sometimes we need to add the link target via parens in those cases correct from Name to crateName Thanks for the library Would it be possible to get a new release soon In particular it would be nice to get in a version on cratesio so that macro imports work properly in Rust This needs to wait for the final release of reqwest but wanted to get a PR out that handles the necessary API changes This adds an example that uses warp for serving the metric data Its based on the hyper example Currently still waiting for this PR Signedoffby fredchenbj cfworking com for and try to use Cowstatic str to improve the memory usage make all passed Open the PR Still have problem to be solved See the FIXME part in code Hi The data Id like to put into Histogram comes in aggregated form This includes bucket bounds counts sum and total count I do not have individual observations and cannot use observe unfortunately Is is possible to create a new or maybe reset existing Histogram metric with already aggregated data