Building the image fails with build caddy cannot load cryptoed cannot find module providing package cryptoed Needed for example to use webpushphp lib Resolution of this issue seems incorrectly to be indicated in this closed issue when running docker build t caddy buildarg pluginsgitcloudflarejwtloginfiltercorsrealipfilemanagercacheexpires githubcomabiosoftcaddydockergit the build process clearly shows Sending build context to Docker daemon kB Step FROM abiosoftcaddybuilder as builder builder Pulling from abiosoftcaddy Digest sha e cea ff d a c fa b f dee fa f b a d b Status Downloaded newer image for abiosoftcaddybuilder e c ca Step ARG version Using cache da a b Step ARG pluginsgitcorsrealipexpirescachecloudflare Using cache a b c b First issue is that build is ignoring the plugins passed to it why The plugins that are installed using the image built above are as follows meNASvolume dockerwipcaddy sudo docker exec it caddy binsh srv caddy plugins Server types http Caddyfile loaders short flag default Other plugins httpbasicauth httpbind httpbrowse httperrors httpexpvar httpext httpfastcgi httpgzip httpheader httpindex httpinternal httplimits httplog httpmarkdown httpmime httppprof httpproxy httppush httpredir httprequestid httprewrite httproot httpstatus httptemplates httptimeouts httpwebsocket on tls tlsclusterfile Second issue where is the cloudflare plugin even if not accepting the plugins list I passed through to build the cloudflare plugin is in the list that should be installed per the output of build so what gives php intl is a default package in some distros eg Ubuntu plus its required for some websites eg Tiny Tiny RSS Running this image and mounting foobarsrv to srv works fine until I try to load a php website I either have to set foobarsrv to or set foobarsrv to UID manually otherwise php files wont execute and wont be able to write files Having the ability to set the UID and GID to what I use for my Docker images currently would remove the manual steps to get PHP working I spent tons of time trying to figure out why This is on a Synology NAS tested with a test php file with phpinfo for readexecute checks and then with ttrss which failed because it required write perms write checks Trying to build tag with plugins My composer file yaml services frontend build context depscaddydocker dockerfile Dockerfilenostats args pluginslocalegzip Error log githubcommholtcertmagic githubcommholtcertmagic certmagicclientgo htForceAttemptHTTP undefined type httpTransport has no field or method ForceAttemptHTTP fetching missing dependencies caddy dnsproviders hookpluginloader chdir rootlibcaddygopathsrcgithubcomcaddyservercaddy no such file or directory fetching missing dependencies caddy dnsproviders hookpluginloader chdir rootlibcaddygopathsrcgithubcomcaddyservercaddy no such file or directory go get warning modules disabled by GO MODULEauto in GOPATHsrc ignoring gomod see go help modules githubcommholtcertmagic githubcommholtcertmagic certmagicclientgo htForceAttemptHTTP undefined type httpTransport has no field or method ForceAttemptHTTP fetching missing dependencies caddy dnsproviders hookpluginloader chdir rootlibcaddygopathsrcgithubcomcaddyservercaddy no such file or directory Cloning into gosrcgithubcomcaddyserverbuilds fatal could not read Username for No such device or address stat buildgo no such file or directory I presume something has been changed in mholtcertmagic since tag release single or few submodules included by clientgo but cant figure out where to fix it I was just trying to build caddy binary with a custom set of plugins but got stuck with the invalid import path error Looks like most of us are trying to use the qualified name of the plugin instead of just the last part of it Ie RUN VERSION PLUGINShttpprometheus ENABLETELEMETRYfalse binsh usrbinbuildersh Should actually be RUN VERSION PLUGINSprometheus ENABLETELEMETRYfalse binsh usrbinbuildersh Can we add something to the documentation to avoid this Caddy was recently released Updated Caddy to Updated Go Docker Image to This also closes Issue maybe and PR Changelog from Caddy This patch release fixes a bug in the fastcgi middleware that could result in the static file server returning PHP files as plain text on Windows systems Dependencies lego certmagic and quicgo have also been updated to their latest versions 