Hi This is not an issue but a question Harmony takes the PCA embeddings and works with this data do you know what would happen if another dimensionality reduction techniques is used instead Would this make the results unreliable as harmony is tailored towards PCA embeddings Kind regards Connor I am trying to install Harmony and it is running into following error installgithubimmunogenomicsharmony Downloading GitHub repo immunogenomicsharmonymaster checking for file C Users vg AppData Local Temp RtmpiyxWkm remotes f d a immunogenomicsharmony a d aDESCRIPTION preparing harmony checking DESCRIPTION metainformation cleaning src running cleanupwin checking for LF lineendings in source and make files and shell scripts checking for empty or unneeded directories looking to see if a datadatalist file should be added building harmony targz Warning file harmonycleanup did not have execute permissions corrected Warning file harmonyconfigure did not have execute permissions corrected Installing package into CUsersvg DocumentsRwinlibrary as lib is unspecified installing source package harmony using staged installation libs CRtoolsmingw bing stdgnu ICPROGRA RR include DNDEBUG ICUsersvg DocumentsRwinlibrary Rcppinclude ICUsersvg DocumentsRwinlibrary RcppArmadilloinclude ICUsersvg DocumentsRwinlibrary RcppProgressinclude DUSEFLOATTYPES O Wall mtunegeneric c RcppExportscpp o RcppExportso CRtoolsmingw bing stdgnu ICPROGRA RR include DNDEBUG ICUsersvg DocumentsRwinlibrary Rcppinclude ICUsersvg DocumentsRwinlibrary RcppArmadilloinclude ICUsersvg DocumentsRwinlibrary RcppProgressinclude DUSEFLOATTYPES O Wall mtunegeneric c harmonycpp o harmonyo harmonycpp In member function void harmonyinitclustercppunsigned int harmonycpp warning comparison between signed and unsigned integer expressions Wsigncompare if C C K harmonycpp In member function CUBETYPE harmonymoeridgegetbetascpp harmonycpp warning comparison between signed and unsigned integer expressions Wsigncompare for unsigned k k K k CRtoolsmingw bing shared s staticlibgcc o harmonydll tmpdef RcppExportso harmonyo LCPROGRA RR binx lRlapack LCPROGRA RR binx lRblas lgfortran lm lquadmath LCPROGRA RR binx lR installing to CUsersvg DocumentsRwinlibrary LOCKharmony newharmonylibsx R data bytecompile and prepare package for lazy loading Error converted from warning package Rcpp was built under R version Execution halted ERROR lazy loading failed for package harmony removing CUsersvg DocumentsRwinlibrary harmony Error Failed to install harmony from GitHub converted from warning installation of package CUsersvg AppDataLocalTempRtmpiyxWkmfile f a efcharmony targz had nonzero exit status sessionInfo R version Platform x w mingw x bit Running under Windows x build Matrix products default locale LCCOLLATEEnglishUnited States LCCTYPEEnglishUnited States LCMONETARYEnglishUnited States LCNUMERICC LCTIMEEnglishUnited States attached base packages stats parallel stats graphics grDevices utils datasets methods base other attached packages devtools usethis RcppArmadillo RcppAnnoy Rcpp monocle SingleCellExperiment SummarizedExperiment DelayedArray BiocParallel matrixStats GenomicRanges GenomeInfoDb IRanges S Vectors Biobase BiocGenerics loaded via a namespace and not attached viridis pkgload viridisLite gtools assertthat GenomeInfoDbData remotes sessioninfo backports pillar lattice glue digest RColorBrewer XVector colorspace Matrix plyr pkgconfig zlibbioc purrr scales processx RANN gdata tibble ggplot ellipsis withr ROCR lazyeval cli magrittr crayon ps memoise fs fansi MASS gplots pkgbuild prettyunits tools lifecycle stringr munsell callr compiler caTools rlang grid RCurl rstudioapi bitops testthat gtable codetools curl reshape R gridExtra dplyr rprojroot desc KernSmooth stringi tidyselect Please help It still refers to bioRxiv but could be updated to Nature Methods Hello I have the following error when trying to install harmony thanks for looking over and the help Installing package into CUsersJeffs PCDocumentsRwinlibrary as lib is unspecified installing source package harmony using staged installation libs arch i cRtoolsmingw bing stdgnu ICPROGRA RR include DNDEBUG ICUsersJeffs PCDocumentsRwinlibrary Rcppinclude ICUsersJeffs PCDocumentsRwinlibrary RcppArmadilloinclude ICUsersJeffs PCDocumentsRwinlibrary RcppProgressinclude DUSEFLOATTYPES O Wall mtunegeneric c RcppExportscpp o RcppExportso cRtoolsmingw bing stdgnu ICPROGRA RR include DNDEBUG ICUsersJeffs PCDocumentsRwinlibrary Rcppinclude ICUsersJeffs PCDocumentsRwinlibrary RcppArmadilloinclude ICUsersJeffs PCDocumentsRwinlibrary RcppProgressinclude DUSEFLOATTYPES O Wall mtunegeneric c harmonycpp o harmonyo harmonycpp In member function void harmonyinitclustercppunsigned int harmonycpp warning comparison between signed and unsigned integer expressions Wsigncompare if C C K harmonycpp In member function CUBETYPE harmonymoeridgegetbetascpp harmonycpp warning comparison between signed and unsigned integer expressions Wsigncompare for unsigned k k K k cRtoolsmingw bing shared s staticlibgcc o harmonydll tmpdef RcppExportso harmonyo LCPROGRA RR bini lRlapack LCPROGRA RR bini lRblas lgfortran lm lquadmath LCPROGRA RR bini lR installing to CUsersJeffs PCDocumentsRwinlibrary LOCKharmony newharmonylibsi arch x cRtoolsmingw bing stdgnu ICPROGRA RR include DNDEBUG ICUsersJeffs PCDocumentsRwinlibrary Rcppinclude ICUsersJeffs PCDocumentsRwinlibrary RcppArmadilloinclude ICUsersJeffs PCDocumentsRwinlibrary RcppProgressinclude DUSEFLOATTYPES O Wall mtunegeneric c RcppExportscpp o RcppExportso cRtoolsmingw bing stdgnu ICPROGRA RR include DNDEBUG ICUsersJeffs PCDocumentsRwinlibrary Rcppinclude ICUsersJeffs PCDocumentsRwinlibrary RcppArmadilloinclude ICUsersJeffs PCDocumentsRwinlibrary RcppProgressinclude DUSEFLOATTYPES O Wall mtunegeneric c harmonycpp o harmonyo harmonycpp In member function void harmonyinitclustercppunsigned int harmonycpp warning comparison between signed and unsigned integer expressions Wsigncompare if C C K harmonycpp In member function CUBETYPE harmonymoeridgegetbetascpp harmonycpp warning comparison between signed and unsigned integer expressions Wsigncompare for unsigned k k K k cRtoolsmingw bing shared s staticlibgcc o harmonydll tmpdef RcppExportso harmonyo LCPROGRA RR binx lRlapack LCPROGRA RR binx lRblas lgfortran lm lquadmath LCPROGRA RR binx lR installing to CUsersJeffs PCDocumentsRwinlibrary LOCKharmony newharmonylibsx R data bytecompile and prepare package for lazy loading Error unexpected symbol in setwdCUsersJEFFS Execution halted ERROR lazy loading failed for package harmony removing CUsersJeffs PCDocumentsRwinlibrary harmony Error Failed to install harmony from GitHub converted from warning installation of package CUsersJEFFS AppDataLocalTempRtmpyGV wfile c c charmony targz had nonzero exit status tau is set to by default I wonder if this snippet is working as intended For the toy example we have the following nclust tau nclust tau Nb nclust tau half jurkat t Inf Inf Inf Nb nclust tau half jurkat t Inf Inf Inf Nb nclust tau half jurkat t Inf Inf Inf expNb nclust tau half jurkat t expNb nclust tau half jurkat t theta expNb nclust tau half jurkat t We end up with c for theta I guess you intended for the default to be c instead of c right This makes sure that each cell is included in a single block instead of including it in blocks After this commit I see the following idxmin idxmax idxlist idxmin idxmax idxlist idxmin idxmax idxlist idxmin idxmax idxlist idxmin idxmax idxlist idxmin idxmax idxlist idxmin idxmax idxlist In contrast to issue each cell is included a single block If you have a cleaner way to write this code please go for it Some of the cells are included in blocks instead of block Heres what I see when I run Harmony with cells idxmin idxmax idxlist idxmin idxmax idxlist idxmin idxmax idxlist idxmin idxmax idxlist idxmin idxmax idxlist idxmin idxmax idxlist Notice that cell is included in block and block cell is included in block and block cell is included in the last two blocks etcetera This probably doesnt matter too much but I guess you intended for each cell to be included in a single block I cant open page of Is this page move to another place Grats on the paper Well deserved Im trying to use Harmony in a workflow and Im a sucker for replicability However Ive now ran the same data through Harmony three times ultimately leading to three different downstream UMAP manifolds and partitions Is there some way that I could seed whatever RNG elements Harmony uses even if its via a similarly ugly trick as calling nprandomseed before calling scrublet to make that method deterministic EDIT Adding the command I call which may or may not be relevant hem HarmonyMatrixpca batch theta verboseFALSE dopcaFALSE on the PCA coordinates and a batch vector ported from an AnnData object EDIT EDIT Found an old issue apparently setseed helps with regards to this stuff Any chance of the remaining of the way to determinism showing up soon Hi Harmony is a great tool for me However my data is from three different samples with distinct treatments What should I do when I run harmony to remove the batch effect Thanks 