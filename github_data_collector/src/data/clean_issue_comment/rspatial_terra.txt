I have a brickfile that reads and plots with raster but not with terra The problem disappears when I write again to disk and reload This works regardless of whether I writeRaster from raster or terra I cannot reproduce it with a standard brickfile rasterwriteRaster and therefore I include a link to the file that gives the problem files soyterrarastvarsbrickgrd plotsoy crashes rstudio session soysrasterbrickvarsbrickgrd plotsoys works terrawriteRastersoyfilenametestoverwriteT ttrasttest plottt works sessionInfo sessionInfo R version Platform x pclinuxgnu bit Running under Ubuntu LTS Matrix products default BLAS usrlibx linuxgnuopenblaslibblasso LAPACK usrlibx linuxgnulibopenblaspr so locale LCCTYPEenUSUTF LCNUMERICC LCTIMEenUSUTF LCCOLLATEenUSUTF LCMONETARYnlNLUTF LCMESSAGESenUSUTF LCPAPERnlNLUTF LCNAMEC LCADDRESSC LCTELEPHONEC LCMEASUREMENTnlNLUTF LCIDENTIFICATIONC attached base packages stats graphics grDevices utils datasets methods base other attached packages terra docstring rasterVis latticeExtra lattice maptools spatstat rpart nlme spatstatdata foreach datatable raster sp loaded via a namespace and not attached Rcpp compiler RColorBrewer iterators tools goftest viridisLite mgcv png rlang Matrix rgdal parallel hexbin xml stringr roxygen spatstatutils grid R jpeg foreign pacman polyclip purrr magrittr deldir tensor codetools splines abind stringi zoo Id rather like to be able to use general SDS strings and not just file names I tried out a naive approach here in rasterFromFilecpp bool SpatRasterconstructFromFilestdstring fname if fileexistsfname ifdef useGDAL return constructFromFileGDALfname endif useGDAL And that works fine and returns a reasonable error if its not a valid SDS but its not clear to me how the cascade of checks should go Can it catch the error from GDAL and then check if its not a file Example R sds vapourvapoursdsnamessystemfileextdatagdalsdsnc package vapour mustWork TRUE rastsdssubdataset class SpatRaster dimensions nrow ncol nlyr resolution x y extent xmin xmax ymin ymax coord ref data source NETCDFusrlocallibRsitelibraryvapourextdatagdalsdsncvv names sds Hi there comparing speeds between the raster and terra packages and terra is awesome I have a large raster mask land cover of value and the rest are NA and am failing to convert the raster to a vector and dissolve it Here is a reproducible example of the raster workflow that works just fine libraryraster r rasterncol nrow valuesr roundrunifncellr p rasterToPolygonsr funfunctionxx dissolve T narm T And using terra when I use aspolygons the example works but it does not work when values true RStudio crashes immediately Also it doesnt seem that there is no dissolve option in aspolygons like there was in the raster package above libraryterra r rastncol nrow valuesr roundrunifncellr p aspolygonsr values T Thanks for your insights Hi I tried the example in the documentation and got this error libraryterra terra This is an early version of the terra package for evaluation only r rastncols nrows xmn valuesr runifncellr x mean filter r focalr wmatrix nrow ncol funmean Error in xptrfocalw fillvalue narm fun filename overwrite could not find valid method Error in localx focal error 