 Issue phpenv install Info Loaded extension plugin Info Loaded apc Plugin Info Loaded composer Plugin Info Loaded github Plugin Info Loaded uprofiler Plugin Info Loaded xdebug Plugin Info Loaded xhprof Plugin Info Loaded zendopcache Plugin Info phpiniproduction gets used as phpini Info Building into homenorajphpenvversions Downloading Preparing tmpphpbuildsource BUILD ERROR Here are the last lines from the log configure WARNING You will need re c or later if you want to regenerate PHP parsers configure error mcrypth not found Please reinstall libmcrypt The full Log is available at tmpphpbuild log Warn Aborting build Solution ArchLinux sudo pacman S re c libmcrypt needed asdeps Issue phpenv install Info Loaded extension plugin Info Loaded apc Plugin Info Loaded composer Plugin Info Loaded github Plugin Info Loaded uprofiler Plugin Info Loaded xdebug Plugin Info Loaded xhprof Plugin Info Loaded zendopcache Plugin Info phpiniproduction gets used as phpini Info Building into homenorajphpenvversions Skipping Already downloaded and extracted Preparing tmpphpbuildsource BUILD ERROR Here are the last lines from the log configure error Cannot find libtidy The full Log is available at tmpphpbuild log Warn Aborting build Solution sudo pacman S tidy needed asdeps Issue phpenv install Info Loaded extension plugin Info Loaded apc Plugin Info Loaded composer Plugin Info Loaded github Plugin Info Loaded uprofiler Plugin Info Loaded xdebug Plugin Info Loaded xhprof Plugin Info Loaded zendopcache Plugin Info phpiniproduction gets used as phpini Info Building into homenorajphpenvversions Skipping Already downloaded and extracted Preparing tmpphpbuildsource Compiling tmpphpbuildsource BUILD ERROR Here are the last lines from the log tmpphpbuildsource extopensslopensslc In function zifopensslencrypt tmpphpbuildsource extopensslopensslc error storage size of cipherctx isn t known EVPCIPHERCTX cipherctx tmpphpbuildsource extopensslopensslc In function zifopenssldecrypt tmpphpbuildsource extopensslopensslc error storage size of cipherctx isn t known EVPCIPHERCTX cipherctx make Makefile extopensslopenssllo Error The full Log is available at tmpphpbuild log Warn Aborting build Solution sudo pacman S openssl CONFIGUREOPTSwithopensslusrincludeopenssl phpenv install Issue CONFIGUREOPTSwithopensslusrincludeopenssl phpenv install Info Loaded extension plugin Info Loaded apc Plugin Info Loaded composer Plugin Info Loaded github Plugin Info Loaded uprofiler Plugin Info Loaded xdebug Plugin Info Loaded xhprof Plugin Info Loaded zendopcache Plugin Info phpiniproduction gets used as phpini Info Building into homenorajphpenvversions Skipping Already downloaded and extracted Preparing tmpphpbuildsource BUILD ERROR Here are the last lines from the log configure error Cannot find OpenSSLs evph The full Log is available at tmpphpbuild log Solution Cant build with openssl and When I run phpenv install it errors with the following Info Loaded extension plugin Info Loaded apc Plugin Info Loaded composer Plugin Info Loaded github Plugin Info Loaded uprofiler Plugin Info Loaded xdebug Plugin Info Loaded xhprof Plugin Info Loaded zendopcache Plugin Info phpiniproduction gets used as phpini Info Building into usrlocalbinphpenvversions Skipping Already downloaded and extracted Preparing tmpphpbuildsource Compiling tmpphpbuildsource xdebug Installing version Downloading xdebug Compiling xdebug in tmpphpbuildsourcexdebug BUILD ERROR Here are the last lines from the log tmpphpbuildsource sapiphpdbgphpdbgeolc warning argument range exceeds maximum object size Wallocsizelargerthan out char emallocoutlen In file included from tmpphpbuildsource Zendzendh from tmpphpbuildsource mainphph from tmpphpbuildsource sapiphpdbgphpdbgh from tmpphpbuildsource sapiphpdbgphpdbgeolc tmpphpbuildsource Zendzendalloch note in a call to allocation function emalloc declared here ZENDAPI void ZENDFASTCALL emallocsizet size ZENDFILELINEDC ZENDFILELINEORIGDC ZENDATTRIBUTEMALLOC ZENDATTRIBUTEALLOCSIZE PEAR package PHPArchive not installed generated phar will require PHPs phar extension be enabled The full Log is available at tmpphpbuild log Warn Aborting build I cant actually figure out what the actual error is This is the contents of the log file configure WARNING configure WARNING Use of bundled libzip is deprecated and will be removed configure WARNING Some features such as encryption and bzip are not available configure WARNING Use system library and withlibzip is recommended configure WARNING ar u modifier ignored since D is the default see U tmpphpbuildsource extopensslxpsslc In function phpopensslselectcryptomethod tmpphpbuildsource extopensslxpsslc warning TLSv clientmethod is deprecated Wdeprecateddeclarations return isclient TLSv clientmethod TLSv servermethod In file included from usrincludeopenssleos h from usrincludeopensslerrh from tmpphpbuildsource extopensslphpopensslh from tmpphpbuildsource extopensslxpsslc usrincludeopensslsslh note declared here DEPRECATEDIN owur const SSLMETHOD TLSv clientmethodvoid tmpphpbuildsource extopensslxpsslc warning TLSv servermethod is deprecated Wdeprecateddeclarations return isclient TLSv clientmethod TLSv servermethod In file included from usrincludeopenssleos h from usrincludeopensslerrh from tmpphpbuildsource extopensslphpopensslh from tmpphpbuildsource extopensslxpsslc usrincludeopensslsslh note declared here DEPRECATEDIN owur const SSLMETHOD TLSv servermethodvoid tmpphpbuildsource extopensslxpsslc warning TLSv clientmethod is deprecated Wdeprecateddeclarations return isclient TLSv clientmethod TLSv servermethod In file included from usrincludeopenssleos h from usrincludeopensslerrh from tmpphpbuildsource extopensslphpopensslh from tmpphpbuildsource extopensslxpsslc usrincludeopensslsslh note declared here DEPRECATEDIN owur const SSLMETHOD TLSv clientmethodvoid tmpphpbuildsource extopensslxpsslc warning TLSv servermethod is deprecated Wdeprecateddeclarations return isclient TLSv clientmethod TLSv servermethod In file included from usrincludeopenssleos h from usrincludeopensslerrh from tmpphpbuildsource extopensslphpopensslh from tmpphpbuildsource extopensslxpsslc usrincludeopensslsslh note declared here DEPRECATEDIN owur const SSLMETHOD TLSv servermethodvoid tmpphpbuildsource extopensslxpsslc warning TLSv clientmethod is deprecated Wdeprecateddeclarations return isclient TLSv clientmethod TLSv servermethod In file included from usrincludeopenssleos h from usrincludeopensslerrh from tmpphpbuildsource extopensslphpopensslh from tmpphpbuildsource extopensslxpsslc usrincludeopensslsslh note declared here DEPRECATEDIN owur const SSLMETHOD TLSv clientmethodvoid tmpphpbuildsource extopensslxpsslc warning TLSv servermethod is deprecated Wdeprecateddeclarations return isclient TLSv clientmethod TLSv servermethod In file included from usrincludeopenssleos h from usrincludeopensslerrh from tmpphpbuildsource extopensslphpopensslh from tmpphpbuildsource extopensslxpsslc usrincludeopensslsslh note declared here DEPRECATEDIN owur const SSLMETHOD TLSv servermethodvoid tmpphpbuildsource extintlnormalizernormalizernormalizec In function zifnormalizernormalize tmpphpbuildsource extintlnormalizernormalizernormalizec warning unormnormalize is deprecated Wdeprecateddeclarations sizeneeded unormnormalize uinput uinputlen form int t options uretbuf uretlen status In file included from usrincludeunicodeplatformh from usrincludeunicodeptypesh from usrincludeunicodeumachineh from usrincludeunicodeutypesh from usrincludeunicodeubrkh from extintlphpintlh from tmpphpbuildsource extintlnormalizernormalizernormalizec usrincludeunicodeunormh note declared here unormnormalizeconst UChar source int t sourceLength tmpphpbuildsource extintlnormalizernormalizernormalizec warning unormnormalize is deprecated Wdeprecateddeclarations sizeneeded unormnormalize uinput uinputlen form int t options uretbuf uretlen status In file included from usrincludeunicodeplatformh from usrincludeunicodeptypesh from usrincludeunicodeumachineh from usrincludeunicodeutypesh from usrincludeunicodeubrkh from extintlphpintlh from tmpphpbuildsource extintlnormalizernormalizernormalizec usrincludeunicodeunormh note declared here unormnormalizeconst UChar source int t sourceLength tmpphpbuildsource extintlnormalizernormalizernormalizec In function zifnormalizerisnormalized tmpphpbuildsource extintlnormalizernormalizernormalizec warning unormisNormalizedWithOptions is deprecated Wdeprecateddeclarations uret unormisNormalizedWithOptions uinput uinputlen form int t options status In file included from usrincludeunicodeplatformh from usrincludeunicodeptypesh from usrincludeunicodeumachineh from usrincludeunicodeutypesh from usrincludeunicodeubrkh from extintlphpintlh from tmpphpbuildsource extintlnormalizernormalizernormalizec usrincludeunicodeunormh note declared here unormisNormalizedWithOptionsconst UChar src int t srcLength tmpphpbuildsource extintlidnidnc In function phpintlidnto tmpphpbuildsource extintlidnidnc warning uidnaIDNToASCII is deprecated Wdeprecateddeclarations convertedretlen uidnaIDNToASCIIustring ustringlen converted MAXPATHLEN int toption parseerror status In file included from usrincludeunicodeplatformh from usrincludeunicodeptypesh from usrincludeunicodeumachineh from usrincludeunicodeutypesh from usrincludeunicodeuidnah from tmpphpbuildsource extintlidnidnc usrincludeunicodeuidnah note declared here uidnaIDNToASCII const UChar src int t srcLength tmpphpbuildsource extintlidnidnc warning uidnaIDNToUnicode is deprecated Wdeprecateddeclarations convertedretlen uidnaIDNToUnicodeustring ustringlen converted MAXPATHLEN int toption parseerror status In file included from usrincludeunicodeplatformh from usrincludeunicodeptypesh from usrincludeunicodeumachineh from usrincludeunicodeutypesh from usrincludeunicodeuidnah from tmpphpbuildsource extintlidnidnc usrincludeunicodeuidnah note declared here uidnaIDNToUnicode const UChar src int t srcLength tmpphpbuildsource extmbstringonigurumasrcregparsec In function onigscanunsignednumber tmpphpbuildsource extmbstringonigurumasrcregparsec warning assignment discards const qualifier from pointer target type Wdiscardedqualifiers ifUNEXPECTEDp end p end tmpphpbuildsource extmbstringonigurumasrcregparsec note in expansion of macro PFETCH PFETCHc tmpphpbuildsource extsessionmodfilesc In function psfilescleanupdir tmpphpbuildsource extsessionmodfilesc warning readdirr is deprecated Wdeprecateddeclarations while phpreaddirrdir struct dirent dentry entry entry In file included from tmpphpbuildsource Zendzendvirtualcwdh from tmpphpbuildsource mainphph from tmpphpbuildsource extsessionmodfilesc usrincludedirenth note declared here extern int readdirr DIR restrict dirp tmpphpbuildsource mainstreamsplainwrapperc In function phpplainfilesdirstreamread tmpphpbuildsource mainstreamsplainwrapperc warning readdirr is deprecated Wdeprecateddeclarations if phpreaddirrdir struct dirent entry result result In file included from tmpphpbuildsource Zendzendvirtualcwdh from tmpphpbuildsource mainphph from tmpphpbuildsource mainstreamsplainwrapperc usrincludedirenth note declared here extern int readdirr DIR restrict dirp tmpphpbuildsource ZendzendexecuteAPIc In function zendtimeouthandler tmpphpbuildsource ZendzendexecuteAPIc warning ignoring return value of write declared with attribute warnunusedresult Wunusedresult write logbuffer MINoutputlen sizeoflogbuffer tmpphpbuildsource sapiphpdbgphpdbgioc In function phpdbgoutputpager tmpphpbuildsource sapiphpdbgphpdbgioc warning ignoring return value of write declared with attribute warnunusedresult Wunusedresult writesock r tmpphpbuildsource sapiphpdbgphpdbgeolc In function phpdbgeolconvert tmpphpbuildsource sapiphpdbgphpdbgeolc warning argument range exceeds maximum object size Wallocsizelargerthan out char emallocoutlen In file included from tmpphpbuildsource Zendzendh from tmpphpbuildsource mainphph from tmpphpbuildsource sapiphpdbgphpdbgh from tmpphpbuildsource sapiphpdbgphpdbgeolc tmpphpbuildsource Zendzendalloch note in a call to allocation function emalloc declared here ZENDAPI void ZENDFASTCALL emallocsizet size ZENDFILELINEDC ZENDFILELINEORIGDC ZENDATTRIBUTEMALLOC ZENDATTRIBUTEALLOCSIZE PEAR package PHPArchive not installed generated phar will require PHPs phar extension be enabled Hello I am trying to figure out how to add the withfreetypedir flag and phpfpm to the definitions file I have not idea what options I have with the definitions file Is there documentation somewhere about what options I have Hello is there any reason that withkerberos is a default build flag It seems that some extensions now check for the flag in current master I dont see why because I guess not much people use Kerberos together with PHP For those who having problems compiling PHP master just make sure you have libkrb dev FedoraCentOS installed or youll get configure error Package requirements krb gssapi krb were not met Thanks Build failed on libicu v Distro Debian Buster x scrot uname a Linux fedoralocaldomain fc x SMP Mon Nov UTC x x x GNULinux sudo yum install y redhatrpmconfig openssldevel libxcryptdevel libmcryptdevel libmhashdevel libcurldevel libuuiddevel ncursesdevel libxml devel libxsltdevel expatdevel libyamldevel libffidevel readlinedevel gettextdevel libeventdevel pcredevel pcre devel libticonvdevel libeditdevel autotracedevel bisondevel libicudevel libtidydevel zlibdevel libzipdevel bzip devel liblz devel liblzmadevel valgrinddevel libatomicopsdevel re c sudo yum install y gcc gccc make sudo autoconf libtoolltdldevel gddevel freetypedevel libxml devel libjpegdevel libpngdevel openssldevel curldevel patch libmcryptdevel libmhashdevel ncursesdevel bzip libcapdevel ntp diffutils sendmail iptables unzip cmake wget re c bison icu libicu libicudevel nettools psmisc vimenhanced phpenv install details configure WARNING configure WARNING Use of bundled libzip is deprecated and will be removed configure WARNING Some features such as encryption and bzip are not available configure WARNING Use system library and withlibzip is recommended configure WARNING cc error extopcachelibsZendAcceleratoro No such file or directory cc error extopcachelibszendacceleratorblacklisto No such file or directory cc error extopcachelibszendacceleratordebugo No such file or directory cc error extopcachelibszendacceleratorhasho No such file or directory cc error extopcachelibszendacceleratormoduleo No such file or directory cc error extopcachelibszendpersisto No such file or directory cc error extopcachelibszendpersistcalco No such file or directory cc error extopcachelibszendfilecacheo No such file or directory cc error extopcachelibszendsharedalloco No such file or directory cc error extopcachelibszendacceleratorutilfuncso No such file or directory cc error extopcachelibssharedallocshmo No such file or directory cc error extopcachelibssharedallocmmapo No such file or directory cc error extopcachelibssharedallocposixo No such file or directory cc error extopcacheOptimizerlibszendoptimizero No such file or directory cc error extopcacheOptimizerlibspass o No such file or directory cc error extopcacheOptimizerlibspass o No such file or directory cc error extopcacheOptimizerlibspass o No such file or directory cc error extopcacheOptimizerlibsoptimizefunccallso No such file or directory cc error extopcacheOptimizerlibsblockpasso No such file or directory cc error extopcacheOptimizerlibsoptimizetempvars o No such file or directory cc error extopcacheOptimizerlibsnopremovalo No such file or directory cc error extopcacheOptimizerlibscompactliteralso No such file or directory cc error extopcacheOptimizerlibszendcfgo No such file or directory cc error extopcacheOptimizerlibszenddfgo No such file or directory cc error extopcacheOptimizerlibsdfapasso No such file or directory cc error extopcacheOptimizerlibszendssao No such file or directory cc error extopcacheOptimizerlibszendinferenceo No such file or directory cc error extopcacheOptimizerlibszendfuncinfoo No such file or directory cc error extopcacheOptimizerlibszendcallgrapho No such file or directory cc error extopcacheOptimizerlibssccpo No such file or directory cc error extopcacheOptimizerlibsscdfo No such file or directory cc error extopcacheOptimizerlibsdceo No such file or directory cc error extopcacheOptimizerlibscompactvarso No such file or directory cc error extopcacheOptimizerlibszenddumpo No such file or directory make Makefile extopcacheopcachela Error details Inspired by PHP with phpbuild configure options needs only external openssl and icu c on XCode The latest is XCode Now phpbuild has detection codes for openssl and icu c of Homebrew But openssl detection is not working I improve openssl detection and more add fallback when detection fails installing and building openssl from source Notice for maintanance costs I add fallback to only PHP In cases of php this patch only detect Homebrew packages See also Also includes Improve CI config Improve macOS detection PS I expect anyone improve phpbuild codes to use new generation codes for maintanance resolve This is working in progress Do not merge Now phpbuild is breaking on Mojave This is the upstream issue of PHP However phpbuild supports many PHP versions ended of supports So we should discussion the road map to fix Reasons TLDR Mojave changed the policy of library paths configure of PHP includes some bugs on older macOS these are not appeared Therefore PHP configure with current phpbuild options cannot detect some necessary library on Mojave Details Mojave changed the policy The command line tools will search the SDK for system headers by default However some software may fail to build correctly against the SDK and require macOS headers to be installed in the base system under usrinclude If you are the maintainer of such software we encourage you to update your project to work with the SDK or file a bug report for issues that are preventing you from doing so As a workaround an extra package is provided which will install the headers to the base system In a future release this package will no longer be provided In the short term we can use below command for fallback sudo installer pkg LibraryDeveloperCommandLineToolsPackagesmacOSSDKheadersformacOS pkg target On the other hand current configure of PHP does not support recommended macOS SDK paths PHP does not support current X paths of macOS macOS SDK use tbd extension for library but PHP does not support LDAP library bundled Mojave is not included some necessary symbols for PHP On macOS Mojave we use libxml zlibbzip libiconvlibeditlibpnglibjpegsqlitelibcurl bundled on macOS at usrinclude However on Mojave we cannot use these libraries bundled at LibraryDeveloperCommandLineToolsSDKsMacOSX sdkusrinclude because PHP cannot detect them Now Homebrew give up to use bundled libiconvlibpngetc on Mojave and use Homebrews ones We also can do same Fortunately because some libraries such as zlibbzip avoid checking of PHP configure and are linked by PHP make we can use them with just specifing LibraryDeveloperCommandLineToolsSDKsMacOSX sdkusr as prefix path We can select another way patch and remove usr on default configure options See also Filed bugs Patches Related See also Now on macOS such command gets error bash phpbuild HOMEanyenvenvsphpenvversions Info Appending build output to tmpphpbuild log Info Loaded extension plugin Info Loaded apc Plugin Info Loaded composer Plugin Info Loaded github Plugin Info Loaded uprofiler Plugin Info Loaded xdebug Plugin Info Loaded xhprof Plugin Info Loaded zendopcache Plugin Info phpiniproduction gets used as phpini Info Building into Usersmizunashianyenvenvsphpenvversions Skipping Already downloaded and extracted Preparing vartmpphpbuildsource BUILD ERROR Here are the last lines from the log configure WARNING unrecognized options withmcrypt configure WARNING This bison version is not supported for regeneration of the ZendPHP parsers found min excluded configure error Cannot find OpenSSLs evph The full Log is available at tmpphpbuild log Warn Aborting build and provides fallbacks to use homebrew bundled package or build method to use latest OpenSSL rubybuildpythonbuilds method Detect os type If is macOS check whether use breaked OpenSSL OpenSSL bundled macOS is always breaks because it is older libreSSL so rubybuildpythonbuild search Hombrews OpenSSL If use breaked OpenSSL build OpenSSL by sources I want this support for PHP This support helps also madumlao s approach is similar However I think this is too expensive In my cases phpbuild should use macOS bundled zlibbzip as possible I would like you to discuss this points and provide more supports for macOS users And I report test results of on this issue