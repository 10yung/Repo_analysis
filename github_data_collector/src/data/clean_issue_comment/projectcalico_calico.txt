hi all I have set up a kubernetes cluster with a master node and two worker node and calico for the network tunnels can not ping each others Kubernetes Version Calico Version v Master IP Node IP Node IP IPs are these numbers but are valid IPs watch n kubectl get pods allnamespaces output is on master NAMESPACE NAME READY STATUS RESTARTS AGE default nginx c db h Running m default tvtsc fd bcwfx Running m default tvtsc fd bwgbnq Running m kubesystem calicokubecontrollers b bc czwkk Running m kubesystem caliconoden s Running m kubesystem caliconodew p Running m kubesystem caliconodezdghr Running m kubesystem coredns f d bc Running h m kubesystem coredns f x pf Running h m kubesystem etcdsrvarvankube Running h m kubesystem kubeapiserversrvarvankube Running h m kubesystem kubecontrollermanagersrvarvankube Running h m kubesystem kubeproxy sbvb Running h m kubesystem kubeproxync c Running m kubesystem kubeproxyxws Running m kubesystem kubeschedulersrvarvankube Running h m kubernetesdashboard dashboardmetricsscraper d mcn Running h m kubernetesdashboard kubernetesdashboardf bd cd t j d Running h m on node Master sudo calicoctl node status PEER ADDRESS PEER TYPE STATE SINCE INFO nodetonode mesh up Established nodetonode mesh up Established on nodes sudo calicoctl node status PEER ADDRESS PEER TYPE STATE SINCE INFO nodetonode mesh up Established nodetonode mesh up Established on nodes sudo calicoctl node status PEER ADDRESS PEER TYPE STATE SINCE INFO nodetonode mesh up Established nodetonode mesh up Established the logs of the calico pods for node are Readiness probe failed caliconode is not ready BIRD is not ready BGP not established with INFO healthgo Number of nodes with BGP peering established Readiness probe failed caliconode is not ready BIRD is not ready BGP not established with INFO healthgo Number of nodes with BGP peering established and the same log for ndoe in calicoyaml I have set the IPAUTODETECTIONMETHOD to interfaceeth name IPAUTODETECTIONMETHOD value interfaceeth also I have test the value value canreach but nothing changed I dont know what is my fault tunnels cannot see each other and each node only can see its pods not the other nodes pod also my pod network is but the pods and tunnels get the IP with the netmask like Changed watch kubectl get pods allnamespaces to kubectl get pods allnamespaces watch Description This is a documentation fix The merge would create more accurate documentation but the change is minor Description A few sentences describing the overall goals of the pull requests commits Please include the type of fix eg bug fix new feature documentation some details on why this PR should be merged the details of the testing youve done on it both manual and automated which components are affected by this PR links to issues that this PR addresses Related issuesPRs If appropriate include a link to the issue this fixes fixes ISSUE LINK If appropriate add links to any number of PRs documented by this PR documents PR LINK Todos Tests Documentation Release note Release Note Writing a release note By default no release note action is required If youre unsure whether or not your PR needs a note ask your reviewer for guidance If this PR requires a release note update the block below to include a concise note describing the change and any important impacts this PR may have releasenote None required I was trying to Setup a MultiMaster Kubernetes setup with external etcd nodes cluster on bare metal REHL Etcd cluster setup got successful After running the kubeadm init with podcidr i had applied calico YAML Containers were very much up and running But when Im adding a second master or data node the calico containers which were spun on them are getting in crash back loop Kube version Note I have updated calicoyaml with below but still the same error name IPAUTODETECTIONMETHOD value interfaceeth Describe POD kubectl describe pod caliconodehr k n kubesystem Name caliconodehr k Namespace kubesystem Priority Priority Class Name systemnodecritical Node n tenldepa Start Time Wed Jan Labels controllerrevisionhash b d k sappcaliconode podtemplategeneration Annotations scheduleralphakubernetesiocriticalpod Status Running IP IPs IP Controlled By DaemonSetcaliconode Init Containers upgradeipam Container ID docker f ff ff bc e c e fbf b fb b c Image calicocniv Image ID dockerpullablecalicocnisha aafdeef a d f ec af df c d fec acf e abb d Port none Host Port none Command optcnibincalicoipam upgrade State Terminated Reason Completed Exit Code Started Wed Jan Finished Wed Jan Ready True Restart Count Environment KUBERNETESNODENAME v specnodeName CALICONETWORKINGBACKEND set to the key calicobackend of config map calicoconfig Optional false Mounts hostoptcnibin from cnibindir rw varlibcninetworks from hostlocalnetdir rw varrunsecretskubernetesioserviceaccount from caliconodetokengtp p ro installcni Container ID docker af c ab a b b dfdf dfd d c cd c a e Image calicocniv Image ID dockerpullablecalicocnisha aafdeef a d f ec af df c d fec acf e abb d Port none Host Port none Command installcnish State Terminated Reason Completed Exit Code Started Wed Jan Finished Wed Jan Ready True Restart Count Environment CNICONFNAME calicoconflist CNINETWORKCONFIG set to the key cninetworkconfig of config map calicoconfig Optional false KUBERNETESNODENAME v specnodeName CNIMTU set to the key vethmtu of config map calicoconfig Optional false SLEEP false Mounts hostetccninetd from cninetdir rw hostoptcnibin from cnibindir rw varrunsecretskubernetesioserviceaccount from caliconodetokengtp p ro flexvoldriver Container ID dockerb b fa f aee ac ddd a aaae b b f b ebc Image calicopod daemonflexvolv Image ID dockerpullablecalicopod daemonflexvolsha dd f b e d c c b ff d a c aa e f d cf d Port none Host Port none State Terminated Reason Completed Exit Code Started Wed Jan Finished Wed Jan Ready True Restart Count Environment none Mounts hostdriver from flexvoldriverhost rw varrunsecretskubernetesioserviceaccount from caliconodetokengtp p ro Containers caliconode Container ID docker db f fafae fe b ea f e b a eaeb d f b f dd f a Image caliconodev Image ID dockerpullablecaliconodesha ae a f fe e d ed ad df eb d e e c ab d ef Port none Host Port none State Running Started Thu Jan Last State Terminated Reason Error Exit Code Started Thu Jan Finished Thu Jan Ready False Restart Count Requests cpu m Liveness httpget delay s timeout s period s success failure Readiness exec bincaliconode birdready felixready delay s timeout s period s success failure Environment DATASTORETYPE kubernetes WAITFORDATASTORE true NODENAME v specnodeName CALICONETWORKINGBACKEND set to the key calicobackend of config map calicoconfig Optional false CLUSTERTYPE k sbgp IP autodetect IPAUTODETECTIONMETHOD interfaceens CALICOIPV POOLIPIP Always FELIXIPINIPMTU set to the key vethmtu of config map calicoconfig Optional false CALICOIPV POOLCIDR CALICODISABLEFILELOGGING true FELIXDEFAULTENDPOINTTOHOSTACTION ACCEPT FELIXIPV SUPPORT false FELIXLOGSEVERITYSCREEN info FELIXHEALTHENABLED true Mounts libmodules from libmodules ro runxtableslock from xtableslock rw varlibcalico from varlibcalico rw varruncalico from varruncalico rw varrunnodeagent from policysync rw varrunsecretskubernetesioserviceaccount from caliconodetokengtp p ro Conditions Type Status Initialized True Ready False ContainersReady False PodScheduled True Volumes libmodules Type HostPath bare host directory volume Path libmodules HostPathType varruncalico Type HostPath bare host directory volume Path varruncalico HostPathType varlibcalico Type HostPath bare host directory volume Path varlibcalico HostPathType xtableslock Type HostPath bare host directory volume Path runxtableslock HostPathType FileOrCreate cnibindir Type HostPath bare host directory volume Path optcnibin HostPathType cninetdir Type HostPath bare host directory volume Path etccninetd HostPathType hostlocalnetdir Type HostPath bare host directory volume Path varlibcninetworks HostPathType policysync Type HostPath bare host directory volume Path varrunnodeagent HostPathType DirectoryOrCreate flexvoldriverhost Type HostPath bare host directory volume Path usrlibexeckuberneteskubeletpluginsvolumeexecnodeagentuds HostPathType DirectoryOrCreate caliconodetokengtp p Type Secret a volume populated by a Secret SecretName caliconodetokengtp p Optional false QoS Class Burstable NodeSelectors betakubernetesiooslinux Tolerations NoSchedule NoExecute CriticalAddonsOnly nodekubernetesiodiskpressureNoSchedule nodekubernetesiomemorypressureNoSchedule nodekubernetesionetworkunavailableNoSchedule nodekubernetesionotreadyNoExecute nodekubernetesiopidpressureNoSchedule nodekubernetesiounreachableNoExecute nodekubernetesiounschedulableNoSchedule Events Type Reason Age From Message Warning Unhealthy m s x over h kubelet n tenldepa Readiness probe failed caliconode is not ready felix is not ready Get dial tcp connect connection refused Warning BackOff s x over h kubelet n tenldepa Backoff restarting failed container Conatiner LOGS kubectl logs caliconodehr k n kubesystem c caliconode INFO startupgo Early log level set to info INFO startupgo Using NODENAME environment for node name INFO startupgo Determined node name n tenldepa INFO k sgo Using Calico IPAM INFO startupgo Checking datastore connection INFO startupgo Hit error connecting to datastore retry errorGet dial tcp io timeout INFO startupgo Hit error connecting to datastore retry errorGet dial tcp io timeout I have read almost every similar issue raised in GITHUB but still not able to proceed further Description The GNP namespaceSelector and serviceAccountSelector should be grouped with selector A few sentences describing the overall goals of the pull requests commits Please include the type of fix eg bug fix new feature documentation some details on why this PR should be merged the details of the testing youve done on it both manual and automated which components are affected by this PR links to issues that this PR addresses Related issuesPRs If appropriate include a link to the issue this fixes fixes ISSUE LINK If appropriate add links to any number of PRs documented by this PR documents PR LINK Todos Tests Documentation Release note Release Note Writing a release note By default no release note action is required If youre unsure whether or not your PR needs a note ask your reviewer for guidance If this PR requires a release note update the block below to include a concise note describing the change and any important impacts this PR may have releasenote None required I have a k s cluster with version Then I added a node and the cluster seemed to be working fine but calico had an error bird Netlink Network is down Only this new node has this error the other nodes are normal then this new node cannot connect to the pods of other nodes nor can it resolve svcMy calico was upgraded from to Expected Behavior I want to solve the problem of bird Netlink Network is down Current Behavior Cluster status rootk smaster v kubectl get node NAME STATUS ROLES AGE VERSION k smaster xiqu Ready node d v k smaster xiqu Ready node m v k smaster xiqu Ready node d v k snode xiqu Ready node d v k snode xiqu Ready node d v k smaster xiqu is new node New Node Route info rootk smaster ip route default via dev enp s f proto static metric dev enp s f proto kernel scope link src metric dev enp s f scope link metric dev docker proto kernel scope link src linkdown blackhole proto bird dev cali b scope link dev cali e d f c scope link Then I started a container on the new node and then this container could not resolve the Kubernetes service and could not communicate with the Pods of other nodes rootk smaster v kubectl get po owide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES fortiodeploy ddb b dcckv Running d k smaster xiqu none none redistrib f cc c t q f Running m k smaster xiqu none none rootk smaster v kubectl exec ti redistrib f cc c t q f nslookup kubernetes nslookup cant resolve null Name does not resolve nslookup cant resolve kubernetes Try again command terminated with exit code Context My newly added node cannot communicate with the pods of other nodes hoping to solve this problem Your Environment Calico version Orchestrator version eg kubernetes mesos rkt rootk smaster v kubectl version Client Version versionInfoMajor Minor GitVersionv GitCommitabdda f fefa a e f e a ec GitTreeStateclean BuildDate T Z GoVersiongo Compilergc Platformlinuxamd Server Version versionInfoMajor Minor GitVersionv GitCommitabdda f fefa a e f e a ec GitTreeStateclean BuildDate T Z GoVersiongo Compilergc Platformlinuxamd Operating System and version rootk smaster cat etcredhatrelease CentOS Linux release Core You have new mail in varspoolmailroot rootk smaster uname Linux rootk smaster uname a Linux k smaster xiqu el elrepox SMP Thu Sep EDT x x x GNULinux calico status rootk smaster v kubectl exec ti calicoctl c fbb snxs n calicoctl get node owide kubectl exec ti calicoctl c fbb snxs n kubesystem calicoctl get node owide NAME ASN IPV IPV k smaster xiqu unknown k smaster xiqu unknown k smaster xiqu unknown k snode xiqu unknown k snode xiqu unknown Calico logs bird Netlink Network is down bird Netlink Network is down bird bird Netlink Network is down bird Netlink Network is down bird INFO healthgo Overall health summary healthHealthReportLivetrue Readytrue bird Netlink Network is down bird Netlink Network is down bird bird Netlink Network is down bird Netlink Network is down bird INFO intdataplanego Applying dataplane updates INFO ipsetsgo Asked to resync with the dataplane on next update familyinet INFO ipsetsgo Resyncing ipsets with dataplane familyinet INFO ipsetsgo Finished resync familyinet numInconsistenciesFound resyncDuration ms INFO intdataplanego Finished applying updates to dataplane msecToApply bird Netlink Network is down bird Netlink Network is down bird INFO healthgo Overall health summary healthHealthReportLivetrue Readytrue bird Netlink Network is down bird Netlink Network is down bird bird Netlink Network is down bird Netlink Network is down How can I configure a firewall using GlobalNetworkPolicy manifests on interface eth for IPv and IPv in Kubernetes I has been configured HostEndpoint yaml apiVersion crdprojectcalicoorgv kind HostEndpoint metadata name node eth ipv labels kuberneteshost ingress spec interfaceName eth node node expectedIPs db a d a e Applying it with kubectl bash kubectl apply f manifestyaml Now creating GlobalNetworkPolicy for IPv and IPv yaml apiVersion crdprojectcalicoorgv kind GlobalNetworkPolicy metadata name dropnodeingressipv web spec order selector haskuberneteshost ingress action Deny protocol TCP ipVersion destination ports action Deny protocol TCP ipVersion destination ports But there are not any ip tables rules bash ip tablessave Generated by ip tablessave v on Wed Jan nat PREROUTING ACCEPT INPUT ACCEPT OUTPUT ACCEPT POSTROUTING ACCEPT COMMIT Completed on Wed Jan Description This PR adds a development environment to calico that requires only docker It is an alternative method to vagrant development environment It builds calico in a container and then spin up a kind cluster and install the new calico images fixes Related issuesPRs New How to for Get Started rework Can merge at any time Assign to Casey for final review Reviewed by Spike Part of Alex reorg work Alex provided inputs on scope of doc Release Note Writing a release note By default no release note action is required If youre unsure whether or not your PR needs a note ask your reviewer for guidance If this PR requires a release note update the block below to include a concise note describing the change and any important impacts this PR may have releasenote Calico now advertises service cluster and external IPs for IPv as well as for IPv 