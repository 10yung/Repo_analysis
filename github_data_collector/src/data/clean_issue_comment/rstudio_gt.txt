latest from github GithubSHA df ad e e e ede ea cce fc f My use case is an empty table showing what information will be displayed The end user will enter info in a Shiny app and then the table will update My workaround will be to populate the table with s Edit this also happens with The error happened in the print method when it is applying the functions to the columns r librarygt grandsummaryrowsgtdataframea c b NAreal columns varsb fns listmax max Error Column b must be length the number of rows not Created on by the reprex package v When I was creating a gt table in a shiny app I noticed that group subtotals in summary rows didnt equal the sum of the individual group values I have since reproduced it on several other machines including a vm with a fresh install of gt When preparing a reprex I noticed that calling dplyrarrange on the grouping variable solved the issue Im curious to know if you can reproduce this r librarytidyverse librarygt df tibbletibble name ccarl abbie leonard paul roman sheila value runif group sampleletters replace TRUE gttblnoarr df groupbygroup gtrownamecol name summaryrowsgroups TRUE columns varsvalue fns listsum mean gttblnoarr htmlpreserve div idwpedgqriwq styleoverflowxautooverflowyautowidthautoheightauto table classgttable thead classgtcolheadings tr th classgtcolheading gtcolumnsbottomborder gtleft rowspan colspan th th classgtcolheading gtcolumnsbottomborder gtright rowspan colspan value th tr thead tbody classgttablebody tr classgtgroupheadingrow td colspan classgtgroupheading a td tr tr td classgtrow gtleft gtstub carl td td classgtrow gtright td tr tr td classgtrow gtstub gtright gtsummaryrow gtfirstsummaryrow sum td td classgtrow gtright gtsummaryrow gtfirstsummaryrow td tr tr td classgtrow gtstub gtright gtsummaryrow mean td td classgtrow gtright gtsummaryrow td tr tr classgtgroupheadingrow td colspan classgtgroupheading c td tr tr td classgtrow gtleft gtstub abbie td td classgtrow gtright gtstriped td tr tr td classgtrow gtleft gtstub paul td td classgtrow gtright td tr tr td classgtrow gtleft gtstub sheila td td classgtrow gtright gtstriped td tr tr td classgtrow gtstub gtright gtsummaryrow gtfirstsummaryrow sum td td classgtrow gtright gtsummaryrow gtfirstsummaryrow td tr tr td classgtrow gtstub gtright gtsummaryrow mean td td classgtrow gtright gtsummaryrow td tr tr classgtgroupheadingrow td colspan classgtgroupheading b td tr tr td classgtrow gtleft gtstub leonard td td classgtrow gtright td tr tr td classgtrow gtleft gtstub roman td td classgtrow gtright gtstriped td tr tr td classgtrow gtstub gtright gtsummaryrow gtfirstsummaryrow sum td td classgtrow gtright gtsummaryrow gtfirstsummaryrow td tr tr td classgtrow gtstub gtright gtsummaryrow mean td td classgtrow gtright gtsummaryrow td tr tbody table div htmlpreserve r gttblarr df groupbygroup arrangegroup gtrownamecol name summaryrowsgroups TRUE columns varsvalue fns listsum mean gttblarr htmlpreserve div idmkwezumtku styleoverflowxautooverflowyautowidthautoheightauto table classgttable thead classgtcolheadings tr th classgtcolheading gtcolumnsbottomborder gtleft rowspan colspan th th classgtcolheading gtcolumnsbottomborder gtright rowspan colspan value th tr thead tbody classgttablebody tr classgtgroupheadingrow td colspan classgtgroupheading a td tr tr td classgtrow gtleft gtstub carl td td classgtrow gtright td tr tr td classgtrow gtstub gtright gtsummaryrow gtfirstsummaryrow sum td td classgtrow gtright gtsummaryrow gtfirstsummaryrow td tr tr td classgtrow gtstub gtright gtsummaryrow mean td td classgtrow gtright gtsummaryrow td tr tr classgtgroupheadingrow td colspan classgtgroupheading b td tr tr td classgtrow gtleft gtstub leonard td td classgtrow gtright gtstriped td tr tr td classgtrow gtleft gtstub roman td td classgtrow gtright td tr tr td classgtrow gtstub gtright gtsummaryrow gtfirstsummaryrow sum td td classgtrow gtright gtsummaryrow gtfirstsummaryrow td tr tr td classgtrow gtstub gtright gtsummaryrow mean td td classgtrow gtright gtsummaryrow td tr tr classgtgroupheadingrow td colspan classgtgroupheading c td tr tr td classgtrow gtleft gtstub abbie td td classgtrow gtright gtstriped td tr tr td classgtrow gtleft gtstub paul td td classgtrow gtright td tr tr td classgtrow gtleft gtstub sheila td td classgtrow gtright gtstriped td tr tr td classgtrow gtstub gtright gtsummaryrow gtfirstsummaryrow sum td td classgtrow gtright gtsummaryrow gtfirstsummaryrow td tr tr td classgtrow gtstub gtright gtsummaryrow mean td td classgtrow gtright gtsummaryrow td tr tbody table div htmlpreserve r rsummary df groupbygroup summarizesum sumvalue mean meanvalue rsummary A tibble x group sum mean chr dbl dbl a b c supCreated on by the reprex package v sup Thank you for the work put into gt Its such a joy to use Ive noted that when using gt tables in presentations that with wider data the distinction between one tab spanner and another can be hard to interpret Recommend a feature such as spanner width to change the distance between tab spanners andor a logical to add a vertical line as a separator r librarytidyverse librarygt packageVersiontidyverse packageVersiongt gtcars head selectmfrmodelyearbdystylehphprpmtrqtrqrpmmpgcmpgh gt tabspanner label Car Model columns varsmfrmodelyear tabspanner label Performance columns varsbdystylehphprpmtrqtrqrpmmpgcmpgh tabheadergtcars dataset supCreated on by the reprex package v sup Note above that the distinction between where Car Model and Performance startsends is more of an interpretation of the center of both titles and less the gap width between the tab spanners This PR would fix Basically the underlying issue was the the createsummaryrows function was including the grouping and rowname columns in its creation of the latex summary row lines This resulted in two extra columns being added somewhere in each summary row one for group column and one for rowname column The changes I made add an additional argument to createsummaryrows named summaryvars which is meant to be all of the column names in the table To accomplish this in createbodycomponentl I just used the defaultvars variable before rowname was added to it I also renamed the defaultvarspost rowname addition to bodyvars since it is being used for the body portion of the table In the createsummaryrows function I added a line that will only select for the column names that are passed into the summaryvars function Using these changed functions the example shown in the above example works as expected Let me know if there is anything else I need to do to get this PR merged Thanks When a gt table with summaryrows is converted to LaTeX additional columns are added to the summary rows section causing the alignment to be incorrect Here is a minimal example using the example from the summaryrows help page with only two columns getting the summary row title gt issue author Tyler Bradley date output pdfdocument default r setup includeFALSE knitroptschunksetecho TRUE librarygt librarytidyverse r sp dplyrfilter date date dplyrarrangedate dplyrmutate week paste W strftimedate format V dplyrselectadjclose volume gt rownamecol date groupnamecol week summaryrows groups TRUE columns varsopen high low close fns list min min max max avg mean formatter fmtnumber useseps FALSE If you render to HTML or just run the code in the console than it is rendered correctly If you use the aslatex function then it returns the LaTeX with the extra spaces I have found some tables that add two extra columns rather than one as well Any help with this is greatly appreciated PR to resolve Issue When using Knitr to render LaTeX table dtheadinghassubtitle returns TRUE when subtitle is not present If TRUE is returned when no subtitle is actually present the createheadingcomponent with contextlatex constructs a heading component that looks like this in LaTeX output caption large TABHEADER small The small line gives the error LaTeX Error Theres no line here to end Because small is a command that is being preformed on nothing so it returns nothing The signifies newline when used in the longtable environment but it cant be used if no line is actually present ie theres nothing there so it is erroring In the issue I posted I proposed the solution of changing dtheadinghassubtitle functiondata heading dtheadinggetdata data lengthheading isnullheadingsubtitle To dtheadinghassubtitle functiondata heading dtheadinggetdata data lengthheadingsubtitle isnullheadingsubtitle Because with a title and no subtitle present dtheadingget returns title TABHEADER subtitle character With lengthheading isnullheadingsubtitle in the original function is returning True because it is counting the length of heading which is a list of length not the subtitle component of the list which is actually length zero When I changed it to lengthheadingsubtitle isnullheadingsubtitle two of the HTML tests failed commit ac c so I assumed the length of the list needed to be used for proper HTML rendering and the length of the subtitle component needed to be used for proper latex rendering In the most recent commit I added a conditional and context variable to the dtheadinghassubtitle With contextHTMLdefault it will preform with lengthheading isnullheadingsubtitle With contextlatex it will preform with lengthheadingsubtitle isnullheadingsubtitle I adjusted the createheadingcomponent so that when it calls to dtheadinghassubtitle under the latex context it also passes contextlatex Problem Description When using aslatex and knitr in RStudio gt LaTeX table fails giving the following error LaTeX Error Theres no line here to end Reproducible Example librarygt librarytidyverse summarysingletable tribblestudy N Observation gttab summarysingletable gtrownamecol study tabheadertitle Table S Summary of Clinical Study Data by Study gttab aslatex The LaTeX is failing because gt is registering a subtitle that is not actually present If I do g gtbuilddatagttab contextlatex gtdtheadinghassubtitledata g TRUE gtdtheadinggetdata g title Table S Summary of Clinical Study Data by Study subtitle character The dtheadinghassubtitle function is dtheadinghassubtitle functiondata heading dtheadinggetdata data lengthheading isnullheadingsubtitle If I change this to dtheadinghassubtitle functiondata heading dtheadinggetdata data lengthheadingsubtitle isnullheadingsubtitle It accurately returns FALSE instead of TRUE and knitr does not fail to render the LaTeX table Note the dtheadinghastitle should also probably be changed from dtheadinghastitle functiondata heading dtheadinggetdata data lengthheading isnullheadingtitle To dtheadinghastitle functiondata heading dtheadinggetdata data lengthheadingtitle isnullheadingtitle Right now widths in colwidth must be specified as a number of pixels I would love to be able to specify column widths relative to each other For example Id love to be able to put in something like r colswidthgt varsdoublewidecol varshalfwidecol TRUE or even having the TRUE implied so itd be r colswidthgt varsdoublewidecol varshalfwidecol This would mainly be useful because I dont know the width of my table in px as Im writing it but I do know how relatively wide I want my columns Updating min version of scales so that alpha parameters is now available in the colfactor function Fixes I was unable to successfully run R CMD check devtoolscheck due to a failure of one unit test in the testdatacolorR file line the correct color values are obtained when defining a palette The test fails because the call to datacolor throws an error which is due to call to scalescolfactor having an unused argument alpha TRUE The alpha argument was added on Aug just after the release of v Currently the DESCRIPTION file list scales as an import When I updated my local setup to have version of scales package I no longer have these errors My proposed fix would be to update the DESCRIPTION file to scales r librarydplyr Attaching package dplyr The following objects are masked from packagestats filter lag The following objects are masked from packagebase intersect setdiff setequal union testtbl tibbletibblex Obtain a palette of colors in RRGGBB format pal paletteerpaletteerdpalette rcartocolorVivid ascharacter gsubFF colorfn scalescolfactorpal domain testtblx colorfn scalescolfactorpal domain testtblx alpha TRUE Error in scalescolfactorpal domain testtblx alpha TRUE unused argument alpha TRUE supCreated on by the reprex package v sup 