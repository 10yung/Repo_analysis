I followed the official docs for the installation on ubuntu First i installed all dependencies bash sudo aptget install autoconf automake autotoolsdev g pkgconfig pythondev python dev libtool make then i executed bash autogensh configure so far everything was fine then i executed the make command bash Making all in src make Entering directory homesmartcowPythonProfilerpyflamesrc make allam make Entering directory homesmartcowPythonProfilerpyflamesrc CXX libfrob lafrob lo CXXLD libfrob la ar u modifier ignored since D is the default see U CXX libfrob lafrob lo CXXLD libfrob la ar u modifier ignored since D is the default see U CXX aslro CXX frameo CXX threado CXX namespaceo CXX posixo CXX probero CXX ptraceo ptracecc In function userregsstruct pyflamePtraceGetRegspidt ptracecc error PTRACEGETREGS was not declared in this scope if ptracePTRACEGETREGS pid regs ptracecc note suggested alternative PTRACEGETREGSET if ptracePTRACEGETREGS pid regs PTRACEGETREGSET ptracecc In function void pyflamePtraceSetRegspidt userregsstruct ptracecc error PTRACESETREGS was not declared in this scope if ptracePTRACESETREGS pid regs ptracecc note suggested alternative PTRACESETREGSET if ptracePTRACESETREGS pid regs PTRACESETREGSET Makefile recipe for target ptraceo failed make ptraceo Error make Leaving directory homesmartcowPythonProfilerpyflamesrc Makefile recipe for target all failed make all Error make Leaving directory homesmartcowPythonProfilerpyflamesrc Makefile recipe for target allrecursive failed make allrecursive Error ptrace might be causing any issues so i tried below command bash sudo aptget update sudo aptget install pythonptrace Reading package lists Done Building dependency tree Reading state information Done pythonptrace is already the newest version upgraded newly installed to remove and not upgraded still the error is same pyflame v pyflame linuxgnu x ABI list python when execute pyflame p PID prompt Failed to locate libpython within timeout period Pyflame causes segfaults in OSQP when solver is run with polish X Include the output of pyflame v pyflame linuxgnu x ABI list X Include the exact version of the Python interpreter you are profiling Python X Include the exact text of any error messages From core dump gdb Program terminated with signal Segmentation fault x f db b c in QDLDLfactor from datahomesraidbhomemsokolovpy libpython sitepackagesosqposqpso Missing separate debuginfos use debuginfoinstall bzip libs el x glibc el x keyutilslibs el x krb libs el x libcomerr el x libffi el x libgcc el x libselinux el x libstdc el x openssllibs k el x pcre el x python pythonlibs el x zlib el x gdb bt x f db b c in QDLDLfactor from datahomesraidbhomemsokolovpy libpython sitepackagesosqposqpso x f db ab in initlinsyssolverqdldl from datahomesraidbhomemsokolovpy libpython sitepackagesosqposqpso x f db e in polish from datahomesraidbhomemsokolovpy libpython sitepackagesosqposqpso x f db f in osqpsolve from datahomesraidbhomemsokolovpy libpython sitepackagesosqposqpso x f db fb in from datahomesraidbhomemsokolovpy libpython sitepackagesosqposqpso x f dbc b e f in PyEvalEvalFrameEx from optrhpython rootusrlib libpython so x f dbc b d in PyEvalEvalCodeEx from optrhpython rootusrlib libpython so x f dbc b b in PyEvalEvalFrameEx from optrhpython rootusrlib libpython so x f dbc b d in PyEvalEvalCodeEx from optrhpython rootusrlib libpython so x f dbc b a in PyEvalEvalCode from optrhpython rootusrlib libpython so x f dbc d ff in from optrhpython rootusrlib libpython so x f dbc d de in PyRunFileExFlags from optrhpython rootusrlib libpython so x f dbc d in PyRunSimpleFileExFlags from optrhpython rootusrlib libpython so x f dbc e c f in PyMain from optrhpython rootusrlib libpython so x f dbb fd in libcstartmain from lib libcso x e in start Disassembly assembler x f db b c xor ebpebp x f db b e mov x raxr rbx x f db b a mov raxr rcx x f db b a cmp rcxrbx x f db b aa jle x f db b QDLDLfactor x f db b b mov r x rsp x f db b b mov x rspr x f db b ba mov x rspr x f db b bf nop x f db b c mov r rcx rax x f db b c movsd x r rcx xmm x f db b cb cmp r rax x f db b ce je x f db b c QDLDLfactor x f db b d lea r rax rdx x f db b d movsd xmm rsirax x f db b dd cmpb x rdx x f db b e jne x f db b d QDLDLfactor x f db b e movb x rdx x f db b e mov raxr x f db b ec mov r rax rax Registers gdb info registers rax x rbx xb rcx xae rdx x b rsi x e b rdi x a rbp x x rsp x ffebc f x ffebc f r x r x f dbc cf r x f r x d r x d r x cc r x d r x c d rip x f db b c x f db b c QDLDLfactor eflags x IF RF cs x ss x b ds x es x fs x gs x Operating system CentOS Linux release Core Kernel Linux el x Repro python portfoliopy python import osqp osqp import numpy as np numpy import scipy as sp scipy from scipy import sparse import threading import time Generate problem data sprandomseed n k F sparserandomn k density formatcsc D sparsediagsnprandomrandn npsqrtk formatcsc mu nprandomrandnn gamma OSQP data P sparseblockdiag D sparseeyek formatcsc q nphstack mu gamma npzerosk A sparsevstack sparsehstack FT sparseeyek sparsehstack sparsecscmatrixnpones n sparsecscmatrix k sparsehstacksparseeyen sparsecscmatrixn k formatcsc l nphstack npzerosk npzerosn u nphstack npzerosk nponesn Create an OSQP object prob osqpOSQP Setup workspace probsetupP q A l u polish polish causes segmentation faults under pyflame Solve problem for i in range res probsolve Run portfoliopy bash ulimit c unlimited python portfoliopy devnull Run pyflame several times bash pyflame pidps aux grep python grep portfolio awk print o pyflameprof s threads Get a segmentation falut bash python portfoliopy devnull segmentation fault core dumped python portfoliopy devnull bash pyflame pidps aux grep python grep portfolio awk print o pyflameprof s threads Unexpected ptrace exception waitpid indicated a WIFSTOPPED process but got unexpected signal Make sure that these boxes are checked before submitting your issue x Include the output of pyflame v pyflame linuxgnu x ABI list x Include the exact version of the Python interpreter you are profiling Python x Include the exact text of any error messages I dont have any error message really Im using the following python app It has a parameter called workers Using this feature many python process PID are started pyflame currently doesnt support p PID p PID p PID since that I just tested and it is not collecting the full information of a particular process I need using a bash pyflame o test flame p PID pyflame o test flame p PID pyflame o test flame p PID pyflame o test flame p PID After I just transform all output to svg using flamegraphpl testflame testsvg Now It collects the full information of the particular process IMHO It could be a good feature if pyflame supports multiple PID with p The last commit is already year old I wrote a mail to supportubercom and asked if somebody from uber still maintains pyflame Lets see if there is an answer You can use docker to build pyflame bash sudo docker build tag pyflame sudo docker run it v pwdrootpyflame pyflame binbash c cd rootpyflameautogenshconfiguremake This will also produce the executable at srcpyflame which support py fix detection for python in configureac It would be very nice if you could provide pyflame via pypi Installing via pip is easy Are there reasons why there is no wheel up to now This generates VAS layouts like this pre a rp optpython binpython a d rxp optpython binpython d ce rp e optpython binpython cf rwp a optpython binpython rwp heap ffff fd ffff fd rp vvar ffff fd ffff fd rxp vdso ffff fd ffff fd rp libx linuxgnuld so ffff fd ffff ff rxp libx linuxgnuld so ffff ff ffff ffc rp f libx linuxgnuld so ffff ffc ffff ffe rwp libx linuxgnuld so ffff ffe ffff fff rwp ffffffde ffffffff rwp stack pre This is enabled by default on Linuxx since f aec dce ddbd a aa a db bb