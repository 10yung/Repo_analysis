Hi Im not quite sure when it started to happen but whenever I run fisher to update all packages I get the message rm illegal option This seems to happen for all packages in my fishfile Since there are two packages installed I get this message twice Below you can find the full output when I run the command fisher rm illegal option usage rm f i dPRrvW file unlink file rm illegal option usage rm f i dPRrvW file unlink file fetching fetching linking configfishfunctionspiscesappendfish linking configfishfunctionspiscesbackspacefish linking configfishfunctionspiscesbindpairfish linking configfishfunctionspiscescompletefish linking configfishfunctionspiscesjumpfish linking configfishfunctionspisceslookupfish linking configfishfunctionspiscesremovefish linking configfishfunctionspiscesskipfish linking configfishconfdpisceskeybindingsfish linking configfishfunctionsenhancdcdafterfish linking configfishfunctionsenhancdcdbeforefish linking configfishfunctionsenhancdcdbuiltinfish linking configfishfunctionsenhancdcommandawkfish linking configfishfunctionsenhancdcommandgrepfish linking configfishfunctionsenhancdcommandnlfish linking configfishfunctionsenhancdcommandrunfish linking configfishfunctionsenhancdcommandwhichfish linking configfishfunctionsenhancdfilepathabsfish linking configfishfunctionsenhancdfilepathcurrentdirfish linking configfishfunctionsenhancdfilepathliststepfish linking configfishfunctionsenhancdfilepathsplitfish linking configfishfunctionsenhancdfilepathsplitlistfish linking configfishfunctionsenhancdfilepathwalkfish linking configfishfunctionsenhancdfilterexcludefish linking configfishfunctionsenhancdfilterexcludecommentedfish linking configfishfunctionsenhancdfilterexcludegitignorefish linking configfishfunctionsenhancdfilterexistsfish linking configfishfunctionsenhancdfilterfuzzyfish linking configfishfunctionsenhancdfilterinteractivefish linking configfishfunctionsenhancdfilterjoinfish linking configfishfunctionsenhancdfilterlimitfish linking configfishfunctionsenhancdfilterreplacefish linking configfishfunctionsenhancdfilterreversefish linking configfishfunctionsenhancdfiltertrimfish linking configfishfunctionsenhancdfilteruniquefish linking configfishfunctionsenhancdflagisdefaultfish linking configfishfunctionsenhancdflagparsefish linking configfishfunctionsenhancdflagprinthelpfish linking configfishfunctionsenhancdhelpfish linking configfishfunctionsenhancdhistorylistfish linking configfishfunctionsenhancdhistoryopenfish linking configfishfunctionsenhancdhistoryupdatefish linking configfishfunctionsenhancdltsvgetfish linking configfishfunctionsenhancdltsvopenfish linking configfishfunctionsenhancdltsvparsefish linking configfishfunctionsenhancdsourceargumentfish linking configfishfunctionsenhancdsourcedefaultfish linking configfishfunctionsenhancdsourcegoupfish linking configfishfunctionsenhancdsourceisavailablefish linking configfishfunctionsenhancdsourcemrufish linking configfishfunctionsenhancdfish linking configfishconfdenhancdfish linking configfishconfdenhancdinitfish updated packages in s Here is some information about my system Fish version fish version fish version Fisher version fisher version fisher version configfishfunctionsfisherfish OS swvers ProductName Mac OS X ProductVersion BuildVersion C I already reinstalled fisher and tried to find the issue by myself but without any luck I fisher installed b b r enhancd and pretty quickly decided I didnt like it so I uninstalled it And now my fisher install path seems to be broken and I cant work out why TEMP ls la TEMP fisher To completely erase zs data remove Usersandylocalsharezdata fetching fetching fetching fetching fetching linking donefish linking agnosterfish linking fishmodepromptfish linking fishpromptfish linking basspy linking bassfish linking zfish linking zaddfish linking zcleanfish linking zcompletefish linking uninstallfish linking zfish linking manfish fetching linking humanizedurationfish added packages removed packages in s TEMP ls la rwrr andy staff KB Fri Nov basspy rwrr andy staff KB Fri Nov zfish rwrr andy staff KB Fri Nov zaddfish rwrr andy staff B Fri Nov zcleanfish rwrr andy staff B Fri Nov zcompletefish rwrr andy staff KB Fri Nov agnosterfish rwrr andy staff B Fri Nov bassfish rwrr andy staff KB Fri Nov donefish rwrr andy staff B Fri Nov fishmodepromptfish rwrr andy staff KB Fri Nov fishpromptfish rwrr andy staff B Fri Nov humanizedurationfish rwrr andy staff B Fri Nov manfish rwrr andy staff B Fri Nov uninstallfish rwrr andy staff B Fri Nov zfish You can see its installed everything in the current working directory but it also removed all the functions that were previously installed in my fishfunctions directory My fisherpath is empty and my fishfunctionpath is correctly set Ive tried removing fisher and reinstalling but its still happening I can work around this for now by remembering to cd fishfunctionpath before running any fisher commands but Id love to know why its doing this for long term sanity Please add a feature so that fisher can install packages from tarballs eg like so fisher add not sure if that URL would actually work Rationale It is not always natural to use a full repository for a fisher package For instance Docker contains shell completions in their main repo we can not install that one with fisher In that case something like fisher addcompletion would be enough Or in another scenario you generate fish completion scripts programmatically Ideally youd want to sourcecontrol the script have build automation run it and deliver the result such a repo wouldnt serve very well as a fisher package but its release assets might Alternative considered Instead of arbitrary remote tarballs you could specifically implement installing from eg GitHub release assets You could define which canonical path or name it would have to have require the user to specify the asset name together with a version eg ownerrepoassetrelease or pull information about the latest version assets Nota bene Even in the current fullrepo mode using the latest release instead of the latest commit by default would have other advantages like eg checking whether an update has to happen at all but thats probably for another discussion I cannot seem to be able to install new packages using any x version of fisher Here is an example using but the same error occurs with any later version including master curl sSo configfishfunctionsfisherfish source configfishfunctionsfisherfish rm r configfisher cachefisher configfishfishfile fisher add reitzigsdkmanforfishv created empty fishfile in configfishfishfile fetching mv target hometobiacachefishergithubcomreitzigsdkmanforfish is not a directory cp cannot stat hometobiacachefishergithubcomreitzigsdkmanforfish No such file or directory done in s Here is the same command with which works properly curl sSo configfishfunctionsfisherfish source configfishfunctionsfisherfish rm r configfisher cachefisher configfishfishfile fisher add reitzigsdkmanforfishv created empty fishfile in configfishfishfile fetching linking configfishfunctionssdkfish linking configfishcompletionssdkfish linking configfishconfdsdkfish added package in s Im using fish installed from the default apt repository of Ubuntu Thank you for interesting tool but first try with practically default install condition failed This may turn down many user I am afraid After careful check I see this bug was introduced initially d fa feat custom hosted packages via sshgit fix during cycle Please fix this at Anyway here is how this fails as installed osamugoofy fisher add jethrokuanfzf No mod created new fishfile in configfishfishfile C C There are still jobs active PID Command fish c echo fetching url command mkdir p fisherconfigpkg fishercachecommand dirname pkg if test z branch command git clone url fisherconfigpkg branch branch depth or echo fisher cannot clone url is this a valid url else if command curl curlopts Ss w url command tar xzf command rm Rf fishercachepkg command mv f fisherconfigpkg fishercachepkg command rm Rf fisherconfigpkg command cp Rf fishercachefisherconfigpkg else if test d fishercachepkg echo fisher cannot connect to server looking in fishercache command cp Rf fishercachepkg fisherconfigpkg else command rm Rf fisherconfigpkg echo fisher cannot add pkg is this a valid package end devnull A second attempt to exit will terminate them Use disown PID to remove jobs from the list without terminating them So I commented out fish c invocation and also added echo to pertinent parts Then I tried again to identify problem See the log osamugoofy fisher add jethrokuanfzf No subshell with echo to stderr fetching mkdir p homeosamuconfigfishergithubcomjethrokuanfzf homeosamucachefishergithubcomjethrokuan git clone homeosamuconfigfishergithubcomjethrokuanfzf branch depth fisher cannot clone is this a valid url done in s It only created repo copy directory No content was downloaded I see problems here URL used URL for targz is NOW URL for shallow clone is standard repo URL CORRECT ONE git syntax command option must be placed correctly I see no reason to have branch since it is null string here Reorder and drop Let me showhow this git should have been invoked and files to be downloaded osamugoofy git clone depth homeosamuconfigfishergithubcomjethrokuanfzf Cloning into homeosamuconfigfishergithubcomjethrokuanfzf remote Enumerating objects done remote Counting objects done remote Compressing objects done remote Total delta reused delta packreused Unpacking objects done I got files For URL problem AWK script needs to be adjusted for curl or gitshallowclone As for code if test z branch seen in current code I think branch string length should not be used for deciding download method to be curl or gitshallowclone For downloading with git shallow clone a feature to select branch should exist So what is needed is method to specify curl or gitshallowclone I hope this helps Osamu Running fish fisher add gitgithubcomedcbassgit works fine for the current shell But the package is not added to the fishfile so the package will be uninstalled on the next run of fisher Whats worse the files are not actually removed only the line in fishfile I understand that https is preferable The upside with using git means that private repos will be accessible with your normal sslkeys No config required Im running the latest version Let me know if you need anything else to reproduce console fisher version fisher version usrsharefishvendorfunctionsdfisherfish So I curl fisher curl createdirs sLo HOMEconfigfisherfunctionsfisherfish For debugging I reduce my fishconfigfish to set fishhome HOMEconfigfish set g fisherpath HOMEconfigfisher set fishfunctionpath fishfunctionpath fisherpathfunctions fishfunctionpath set fishcompletepath fishcompletepath fisherpathcompletions fishcompletepath for file in fisherpathconfdfish builtin source file devnull end Bootstrapping if not functions q fisher set q XDGCONFIGHOME or set XDGCONFIGHOME config curl createdirs sLo HOMEconfigfisherfunctionsfisherfish fish c fisher end I run fisher fisher created new fishfile in configfisherfishfile W fish An error occurred while redirecting file homerdonaldsonconfigfisherfishfile open No such file or directory fisher nothing to commit try adding some packages ls la configfisher total drwxrxrx rdonaldson rdonaldson Oct drwxrxrx rdonaldson rdonaldson Oct drwxrxrx rdonaldson rdonaldson Oct local The fishfile has not been created Ok weird This happens if I fish c fisher also So lets take the suggestion and try installing something fisher add jethrokuanfzf W fish An error occurred while redirecting file homerdonaldsonconfigfisherfishfile open No such file or directory created new fishfile in configfisherfishfile W fish An error occurred while redirecting file homerdonaldsonconfigfisherfishfile open No such file or directory fisher nothing to commit try adding some packages fetching linking configfisherfunctionsfzfcdfish cp cannot create regular file homerdonaldsonconfigfisherfunctionsfzfcdfish No such file or directory linking configfisherfunctionsfzfcompletefish cp cannot create regular file homerdonaldsonconfigfisherfunctionsfzfcompletefish No such file or directory linking configfisherfunctionsfzfcompletepreviewfish cp cannot create regular file homerdonaldsonconfigfisherfunctionsfzfcompletepreviewfish No such file or directory linking configfisherfunctionsfzffindfilefish cp cannot create regular file homerdonaldsonconfigfisherfunctionsfzffindfilefish No such file or directory linking configfisherfunctionsfzfgetdirfish cp cannot create regular file homerdonaldsonconfigfisherfunctionsfzfgetdirfish No such file or directory linking configfisherfunctionsfzfopenfish cp cannot create regular file homerdonaldsonconfigfisherfunctionsfzfopenfish No such file or directory linking configfisherfunctionsfzfparsecommandlinefish cp cannot create regular file homerdonaldsonconfigfisherfunctionsfzfparsecommandlinefish No such file or directory linking configfisherfunctionsfzfreverseisearchfish cp cannot create regular file homerdonaldsonconfigfisherfunctionsfzfreverseisearchfish No such file or directory linking configfisherfunctionsfzfcmdfish cp cannot create regular file homerdonaldsonconfigfisherfunctionsfzfcmdfish No such file or directory linking configfisherconfdfzffish cp cannot create regular file homerdonaldsonconfigfisherconfdfzffish No such file or directory linking configfisherconfdfzfkeybindingsfish cp cannot create regular file homerdonaldsonconfigfisherconfdfzfkeybindingsfish No such file or directory W fish An error occurred while redirecting file homerdonaldsonconfigfisherfishfile open No such file or directory added package in s ls la configfisher total drwxrxrx rdonaldson rdonaldson Oct drwxrxrx rdonaldson rdonaldson Oct drwxrxrx rdonaldson rdonaldson Oct completions drwxrxrx rdonaldson rdonaldson Oct confd rwrr rdonaldson rdonaldson Oct fishfile drwxrxrx rdonaldson rdonaldson Oct functions drwxrxrx rdonaldson rdonaldson Oct githubcom drwxrxrx rdonaldson rdonaldson Oct local Okay weird so something was installed but nothing is working Also fisher is defined in memory but the file is gone ls la configfisherfunctions total drwxrxrx rdonaldson rdonaldson Oct drwxrxrx rdonaldson rdonaldson Oct And the fishfile is empty cat configfisherfishfile I can manually write to the fish file cat configfisherfishfile jethrokaunfzf fishpkgfishgitutil But when I try to run fisher fisher W fish An error occurred while redirecting file homerdonaldsonconfigfisherfishfile open No such file or directory fisher nothing to commit try adding some packages cat configfisherfishfile cat homerdonaldsonconfigfisherfishfile No such file or directory Now my fishfile is gone As is almost everything else ls la configfisher total drwxrxrx rdonaldson rdonaldson Oct drwxrxrx rdonaldson rdonaldson Oct drwxrxrx rdonaldson rdonaldson Oct local So uh I used fisherman happily for years I was trying to update for fisher and wound up well here Im on Fedora using fish version Any suggestions I keep my fish configuration in my dotfiles repo but dont really need to keep all stuff installed via fisher there too just the fishfile Problem is if you change fisherpath it changes where fishfile gets placed to store it in fisherpath I would argue that your fishfile is a separate concept than what gets installed so fishfile should be configurable to live with the rest of your config So for example if I set fisherpath to XDGDATAHOMEfishfisher fishfile gets placed in fisherpath instead of configfishfishfile I could symlink fishfile so it gets committed but that seems like a bad solution I saw this issue and wondered under what conditions you would accept a PR that made both these changes Im willing to put in the work to do the following Change the name from fishfile to fishbundle Add an optional variable to set fishbundlepath and change the old default location from fisherpathfishbundle to fishconfigfishbundle Migrate existing fishfiles to the new fishbundle Youd probably have to leave this in for a few versions while people update Let me know your thoughts Following on from discussion in This adds a section to the README that aims to prevent users from possibly losing data if they are playing around with Fisher and are unaware of how it works Hopefully this is clear to the point and prominent enough even though I avoided putting WARNING The fishfile is stored at fisherpathfishfile and fishercommit executes rm rf fisherconfig so if fisherpath fishconfig running fisher will delete the fishfile before looking for packages leading to confusing errors Adds a check to fisher exiting with a message like fisherpath homearvensisconfigfisher cannot be homearvensisconfigfisher Consider instead set g fisherpath HOMEconfigfisherlocal To prevent user confusion in the future