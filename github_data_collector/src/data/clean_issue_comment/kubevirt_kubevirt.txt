Signedoffby Michael Henriksen mhenriksredhatcom Thanks for sending a pull request Here are some tips for you Follow the instructions for writing a release note from k s What this PR does why we need it Time to update libraries Currently at Which issues this PR fixes optional in fixes issue number fixes issuenumber format will close the issues when PR gets merged Fixes Special notes for your reviewer Release note Write your release note Enter your extended release note in the below block If the PR requires additional action from users switching to the new release include the string action required If no release note is required just write NONE releasenote Update k s client libraries to This form is for bug reports and feature requests ONLY Also make sure that you visit our User Guide at Is this a BUG REPORT or FEATURE REQUEST Uncomment only one leave it on its own line kind bug kind enhancement What happened We create ceritifcates for our components which end hardcoded in clusterlocal This is a value which can be configured in k s clusters If people configure it differently installking kubevirt will fail What you expected to happen We should instead somehow find out the right suffix maybe through resolfconf in the pod or from somewhere in the cluster How to reproduce it as minimally and precisely as possible Anything else we need to know The priority is probably not that high So far we have never seen a report by anyone Environment KubeVirt version use virtctl version Kubernetes version use kubectl version VM or VMI specifications Cloud provider or hardware configuration OS eg from etcosrelease Kernel eg uname a Install tools Others Thanks for sending a pull request Here are some tips for you Follow the instructions for writing a release note from k s What this PR does why we need it We expose a new apitype which holds all kubevirt configurations HCO can now vendor this new type and and use it to put values in virtConfigMap Which issues this PR fixes optional in fixes issue number fixes issuenumber format will close the issues when PR gets merged Fixes Special notes for your reviewer This pr goes hand in hand with I will update the pr in HCO accordingly Release note Write your release note Enter your extended release note in the below block If the PR requires additional action from users switching to the new release include the string action required If no release note is required just write NONE releasenote Add KubevirtConfigurations MigrationConfig DeveloperConfigurations NetworkConfigurations to APItypes Signedoffby Vatsal Parekh vparekhredhatcom Thanks for sending a pull request Here are some tips for you Follow the instructions for writing a release note from k s What this PR does why we need it Changed the logic to only allow specific interface types for migrations Which issues this PR fixes optional in fixes issue number fixes issuenumber format will close the issues when PR gets merged Fixes Special notes for your reviewer Release note Write your release note Enter your extended release note in the below block If the PR requires additional action from users switching to the new release include the string action required If no release note is required just write NONE releasenote Changed the logic to only allow specific interface types for migrations Dockerfile that will work for CI builds dhiller This PR needs to merge before This is pretty close to what youll need to run the kubevirt hackfunctestssh in CI The Dockerfile creates an image that has the tests built src code in CI it will be built w the PRs src code The CI job will use a stock CI template openshiftreleasecioperatortemplatesopenshiftinstallerclusterlaunchinstallercustomtestimageyaml where the test image is the image built by this added Dockerfile To Test This console podman pull quayiosallyomkubevirtcitest podman run rm it v pathtoalocalkubeconfigtmpkubeconfigZ quayiosallyomkubevirtcitest sh then in container export KUBECONFIGtmpkubeconfig mkdir tmpoc cd tmpoc curl L O tar xzvf openshiftclientlinux ci targz cd gosrckubevirtiokubevirt export PATHPATHtmpoc hackkubevirtbuildercitestsh NOTE the image is huge so after youre done remove it w something like podman volume prune podman systemprune a or podman rmi quayiosallyomkubevirtcitest Test supposed to be wo guest agent while actually it does have it Needed to rewrite test to be wo guest agent Signedoffby Igor Bezukh ibezukhredhatcom What this PR does why we need it We need to test a live migration case where a Linux VM has guest agent inside This PR adds the missing test To be more specific this test was already implemented but labeled incorrectly so the PR fixes the labeling and creates a test that was really missing in the code test becomes test and recreate test Which issues this PR fixes Test IDs Special notes for your reviewer ILpinto please take a look Release note Write your release note Enter your extended release note in the below block If the PR requires additional action from users switching to the new release include the string action required If no release note is required just write NONE releasenote NONE kind bug What happened Running ocp lane tests failed What you expected to happen All test should pass How to reproduce it as minimally and precisely as possible Run test pullkubevirte eocp on empty PR once is merged Anything else we need to know Use prow to run it or locally must be included export KUBEVIRTPROVIDERocp make clusterup make clustersync make functest Environment KubeVirt version use virtctl version Kubernetes version use kubectl version VM or VMI specifications Cloud provider or hardware configuration OS eg from etcosrelease Kernel eg uname a Install tools Others Is this a BUG REPORT or FEATURE REQUEST Uncomment only one leave it on its own line kind bug kind enhancement What happened shell make clustersync DEPRECATION Python will reach the end of its life on January st Please upgrade your Python as Python wont be maintained after that date A future version of pip will drop support for Python Reported by oshoval What you expected to happen How to reproduce it as minimally and precisely as possible Anything else we need to know Environment KubeVirt version use virtctl version Kubernetes version use kubectl version VM or VMI specifications Cloud provider or hardware configuration OS eg from etcosrelease Kernel eg uname a Install tools Others Is this a BUG REPORT or FEATURE REQUEST The migration handover process is very complicated In combination with the very generic tcp proxies it is extremely hard to follow and to change We should refactor the code and make it more speaking for itself eg tcp proxie naming their purpose encapsulating the handover better Uncomment only one leave it on its own line kind bug kind enhancement What happened What you expected to happen How to reproduce it as minimally and precisely as possible Anything else we need to know Environment KubeVirt version use virtctl version Kubernetes version use kubectl version VM or VMI specifications Cloud provider or hardware configuration OS eg from etcosrelease Kernel eg uname a Install tools Others What this PR does why we need it During migration compatible CPU model have to be used This is hard when cpupassthrough or hostmodel is used as a choice for CPU This issue can be ovecomed in a short term by blocking migration for hostmodel or cpupassthrough Signedoffby Petr Kotas petrkotasgmailcom Which issues this PR fixes optional in fixes issue number fixes issuenumber format will close the issues when PR gets merged Fixes Release note Write your release note Enter your extended release note in the below block If the PR requires additional action from users switching to the new release include the string action required If no release note is required just write NONE releasenote NONE 