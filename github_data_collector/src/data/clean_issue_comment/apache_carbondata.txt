 Why is this PR needed What changes were proposed in this PR Does this PR introduce any user interface change No Yes please explain the change and update document Is any new testcase added No Yes Why is this PR needed What changes were proposed in this PR Does this PR introduce any user interface change No Yes please explain the change and update document Is any new testcase added No Yes Why is this PR needed Currently if a refresh command is fired on a parquet table using carbon session then carbon will list all the tables and check whether the table exists or not then we check if the schema file exists or not by listing the Metadata folder This can be a problem in cloud scenarios as the listing on S is slow What changes were proposed in this PR get the metadata for the specified table Then go for table listing only if the provider is carbon or the table is not registered in hive Does this PR introduce any user interface change No Yes please explain the change and update document Is any new testcase added No Yes Why is this PR needed Currently in Carbon we follow LRU cache based mechanism An leastrecently used entry will be removed from the cache when it is full There is no timebased cache expiration supported in carbon In cloud all vms may not have enough memory to cache everything we could cache In that case we can clear cache after a specified duration This can be achieved by using cache libraries available One of the caching library is Guava Cache which provides flexible and powerful caching features Please refer GuavaCache for more info What changes were proposed in this PR Replaced LinkedHashMap with Guava Cache Added Carbon property to allow user to specify cache expiration duration in minutes to clear cache Newly added carbon property carbonlrucacheexpirationdurationinminutes which takes long value For example carbonlrucacheexpirationdurationinminutes After minutes cache will be cleared Does this PR introduce any user interface change Yes Added new property Document is updated Is any new testcase added Yes Why is this PR needed Alter set sort columns is changing schema but evolution entry is not made What changes were proposed in this PR Once we do set sort columns we change the schema which changes the column order so make an evolution entry for it Does this PR introduce any user interface change No Is any new testcase added NoNot required as this will help in track of operations on schema Why is this PR needed CarbonData integration with Spark is a long expected feature from community What changes were proposed in this PR Support integration with Spark Removing support of Spark and Does this PR introduce any user interface change Yes New API from Spark can be used to access CarbonData Is any new testcase added No Why is this PR needed not support mv Parser still use CarbonSqlAstBuilder still use CarbonSession to run some test cases What changes were proposed in this PR Extensions new order of parsers CarbonParserSparkParser it means CarbonParser will parser SQL at first It will match only carbons particular SQL CreateTable CarbonExtnesion only support stored as carbondata and using carbondata use CarbonCreateDataSourceTableCommand instead of CarbonCreateTableCommand so no need to combine a SQL to create a data source table DATAMap support mv TestCases remove sparkcarboncommontest module move test back to sparkcommontest module all test cases will be run in SparkSession with CarbonExtensions Example only CarbonSessionExample use CarbonSession others will use SparkSession Others support custom lock interface support database location provider interfact Does this PR introduce any user interface change Yes please explain the change and update document Is any new testcase added Yes Why is this PR needed There is no command to show the cache occupied by each of the executorsonly applicable for index server This command will not show per table only per node Example Driver X bytes Executor Y bytes Executor Z bytes Show metacache command does not show the complete cache used used by IndexServer side and Driver side It just shows the total of both of them What changes were proposed in this PR To change show metacache command to show executor metacache where the executor keyword is optional Added TOTAL cache value separately for Index Server and Driver Does this PR introduce any user interface change No Yes please explain the change and update document Is any new testcase added No Yes Why is this PR needed There are issues INSERT STAGE will skip bytes to read the last long in the carbondata file as the offset to the footer but sometimes DFS is not skipping the right byte size When error occurs segment status is not in SUCCESS state but recovery handling is not doing correctly in INSERT STAGE command What changes were proposed in this PR In CarbonFooterReaderV readFooterVersion if offset is not set by caller read it from corresponding index file In CarbonInsertFromStageCommand when recovery is required delete the segment entry if the entry is not in SUCESS state Does this PR introduce any user interface change No Is any new testcase added No Why is this PR needed GeoHash column should not be allowed to be configured in column meta cache property This PR depends on First commit is the original PR PR commit Only second commit is the fix for this PR Need to review only second commit What changes were proposed in this PR During create table and alter table validate column meta cache property for only schema columns instead of all the columns Does this PR introduce any user interface change No Is any new testcase added No 