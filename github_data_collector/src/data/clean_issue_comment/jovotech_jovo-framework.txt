 Proposed changes This is a pull request for the first version of the Jovo Bixby Platform Integration It will function as a thread for open discussion roadmap and transparent development stage Types of changes Put an x in all the boxes that apply Bug fix nonbreaking change which fixes an issue x New feature nonbreaking change which adds functionality Breaking change fix or feature that would cause existing functionality to change Checklist x My code follows the code style of this project x My change requires a change to the documentation I have updated the documentation accordingly I have added tests to cover my changes x All new and existing tests passed Roadmap x Dynamic Speech Output x Session Data x Basic Jovo Integration functionality eg persistent user storage i n x AudioPlayer functionality Error Handling Integral Host Support eg AWS Lambda Azure Heroku Complex Dialog Views Hello Thanks for creating a very useful framework for the voice assistant development I would like to use Dialogflow apis in the chatbot so is there any way that I can use Jovo for Alexa Google Assistant and the Dialogflow integration with the chatbot Thanks Im submitting a Put an x in all the boxes that apply x Bug report Feature request Documentation issue or request Other Please describe Description If you compare the sample intent requests between Alexa and Google Dialogflow youll see that the Alexa one doesnt include screen capabilities but the Dialogflow one does SCREENOUTPUT That causes problems when using the request builder to build intent requests for unit tests because theres then no way to create a Dialogflow request that doesnt have a screen interface JovoRequest has a setScreenInterface method but not a clearScreenInterface method Your Environment Jovo Framework version used Operating System Windows Bumps handlebars from to details summaryChangelogsummary Sourced from handlebarss changelog v November th Bugfixes fix add noprototypebuiltins eslintrule and fix all occurences f f d fix add more properties required to be enumerable Chores Build fix use instead of c b f add chai and dirtychai and sinon for cleaner testassertions and spies deprecate old assertionmethods e e ba dad a Security The properties proto defineGetter defineSetter and lookupGetter have been added to the list of properties that must be enumerable If a property by that name is found and not enumerable on its parent it will silently evaluate to undefined This is done in both the compiled template and the lookuphelper This will prevent new RemoteCodeExecution exploits that have been published recently Compatibility notes Due to the securityfixes The semantics of the templates using proto defineGetter defineSetter and lookupGetter in the respect that those expression now return undefined rather than their actual value from the proto The semantics have not changed in cases where the properties are enumerable as in js proto some string The change may be breaking in that respect but we still only increase the patchversion because the incompatible usecases are not intended undocumented and far less important than fixing RemoteCodeExecution exploits on existing systems Commits v November th Bugfixes fix use Stringfield in lookup when checking for constructor d test add fluent API for testing Handlebars c ac c Compatibility notes no incompatibility are to be expected trtable truncated details details summaryCommitssummary c c b v c d Update release notes f f d fix add noprototypebuiltins eslintrule and fix all occurences fix add more properties required to be enumerable ba testchore add chaiexpect and sinon to runtimeenvironment dad test add sinon as global variable to eslint in the specs a test add sinonjs for spies deprecate current assertions e e chore add chai and dirtychai for better test assertions c b f fix use instead of de d v Additional commits viewable in compare view details br Dependabot compatibility score Dependabot will resolve any conflicts with this PR as long as you dont alter it yourself You can also trigger a rebase manually by commenting dependabot rebase dependabotautomergestart dependabotautomergeend details summaryDependabot commands and optionssummary br You can trigger Dependabot actions by commenting on this PR dependabot rebase will rebase this PR dependabot recreate will recreate this PR overwriting any edits that have been made to it dependabot merge will merge this PR after your CI passes on it dependabot squash and merge will squash and merge this PR after your CI passes on it dependabot cancel merge will cancel a previously requested merge and block automerging dependabot reopen will reopen this PR if it is closed dependabot ignore this patchminormajor version will close this PR and stop Dependabot creating any more for this minormajor version unless you reopen the PR or upgrade to it yourself dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency unless you reopen the PR or upgrade to it yourself dependabot use these labels will set the current labels as the default for future PRs for this repo and language dependabot use these reviewers will set the current reviewers as the default for future PRs for this repo and language dependabot use these assignees will set the current assignees as the default for future PRs for this repo and language dependabot use this milestone will set the current milestone as the default for future PRs for this repo and language You can disable automated security fix PRs for this repo from the Security Alerts page details Im submitting a Put an x in all the boxes that apply Bug report x Feature request Documentation issue or request Other Please describe Expected Behavior Bug report Tell us what should happen Feature request Tell us how it should work Id like to be able to deploy using a new ask profile after previously using another one Current Behavior Bug report tell us what happens instead of the expected behavior Include full errors uncaught exceptions stack traces and relevant logs Im currently getting the error below This happens when I try to deploy using a new ask profile The solution is to rebuild the project directory and then add in the endpoint details inside the skilljson because deploy wont do that automatically and it wont deploy otherwise Error log Deploying Alexa Skill Updating Alexa Skill project for ASK profile yyyyyy askApiUpdateSkillYou do not have access to the resource Your Environment Include as many relevant details about the environment where the bug was discovered Jovo Framework version used Operating System UbuntuLinux Im submitting a Put an x in all the boxes that apply X Bug report Feature request Documentation issue or request Other Please describe Expected Behavior Bug report Tell us what should happen thisgetUserId and thisuserGetId should return the same value Feature request Tell us how it should work Current Behavior Ran into a ton of crazy issues once I implemented skill events Realized that thisgetUserId returns null within skill event since the session object isnt populated thisusergetId works though There is a mismatch between the two methods on AlexaSkill and AlexaRequest As you can see when the user is on the session its fine But on AlexaSkill the userId property is reading from contextuser when it should be contextSystemuser Error log NA Your Environment Include as many relevant details about the environment where the bug was discovered Jovo Framework version used latest Im submitting a Put an x in all the boxes that apply x Bug report Feature request Documentation issue or request Other Please describe Expected Behavior Bug report Tell us what should happen Feature request Tell us how it should work My voice app uses a google assistant carousel for displaying a number of options based on code from here I expect to be able to scroll through the list of options in the carousel and tap to select one Current Behavior Bug report tell us what happens instead of the expected behavior Include full errors uncaught exceptions stack traces and relevant logs It works as intended on a phone but when attempting to scroll through the options on a Google Home Hub the default fallback intent is triggered as soon as I start to scroll so instead of being able to scroll I am sent to the default fallback screen in my app This happens if I attempt to scroll before the ask dialogue has finished speaking If I wait until the microphone opens and then scroll the issue doesnt occur Is there anything else I would need to implement to enable scrolling This is the request I receive when starting to scroll the screen responseId d e a d be fdd c d ae f queryResult parameters allRequiredParamsPresent true outputContexts name projectsmyprojectksyagentsessionsABwppHH bqu KYaf z DpqiTXpSuAhPQfSYuHsQ OFOIHi DhWT Dfsmukn eyhaXDuI la z pjLQAT NGrxvk QxetNulHbVF contextsactionscapabilitymediaresponseaudio name projectsmyprojectksyagentsessionsABwppHH bqu KYaf z DpqiTXpSuAhPQfSYuHsQ OFOIHi DhWT Dfsmukn eyhaXDuI la z pjLQAT NGrxvk QxetNulHbVF contextsactionscapabilityaccountlinking name projectsmyprojectksyagentsessionsABwppHH bqu KYaf z DpqiTXpSuAhPQfSYuHsQ OFOIHi DhWT Dfsmukn eyhaXDuI la z pjLQAT NGrxvk QxetNulHbVF contextsactionscapabilityscreenoutput name projectsmyprojectksyagentsessionsABwppHH bqu KYaf z DpqiTXpSuAhPQfSYuHsQ OFOIHi DhWT Dfsmukn eyhaXDuI la z pjLQAT NGrxvk QxetNulHbVF contextsactionscapabilityaudiooutput name projectsmyprojectksyagentsessionsABwppHH bqu KYaf z DpqiTXpSuAhPQfSYuHsQ OFOIHi DhWT Dfsmukn eyhaXDuI la z pjLQAT NGrxvk QxetNulHbVF contextsgoogleassistantinputtypevoice intent name projectsmyprojectksyagentintents fcf b a b a b bf bb displayName Default Fallback Intent isFallback true intentDetectionConfidence languageCode en originalDetectIntentRequest source google version payload user locale enGB lastSeen T Z userStorage userId d d a d a ab da d f f userVerificationStatus VERIFIED conversation conversationId ABwppHH bqu KYaf z DpqiTXpSuAhPQfSYuHsQ OFOIHi DhWT Dfsmukn eyhaXDuI la z pjLQAT NGrxvk QxetNulHbVF type ACTIVE conversationToken inputs intent actionsintentTEXT rawInputs inputType VOICE arguments name text surface capabilities name actionscapabilityMEDIARESPONSEAUDIO name actionscapabilityACCOUNTLINKING name actionscapabilitySCREENOUTPUT name actionscapabilityAUDIOOUTPUT isInSandbox true availableSurfaces capabilities name actionscapabilitySCREENOUTPUT name actionscapabilityWEBBROWSER name actionscapabilityAUDIOOUTPUT session projectsmyprojectksyagentsessionsABwppHH bqu KYaf z DpqiTXpSuAhPQfSYuHsQ OFOIHi DhWT Dfsmukn eyhaXDuI la z pjLQAT NGrxvk QxetNulHbVF Error log If you have an error log please paste it here Your Environment Include as many relevant details about the environment where the bug was discovered Jovo Framework version used Operating System macOS Running locally using Jovo run but also same issue when running on Lambda Im submitting a Put an x in all the boxes that apply Bug report x Feature request Documentation issue or request Other Please describe Expected Behavior Feature request Tell us how it should work Mycroft is the only opensource voice assistant there is Its user base is relatively small but its basically the Linux of voice assistants Id like to target it as a fan of open platforms but Id like to target the commonly used platforms as well Would you consider adding support for Mycroft as a third platform Im submitting a X Bug report Expected Behavior Builds should finish in s without erroringtiming out Current Behavior Somewhat randomly though often in groups error spikes will happen accompanied by time outs Average error rate seems to be per day according to Alexa Dev Console session metrics although it has gone above it by a lot for a few days higher lambda timeouts seem to help a bit What Ive Tried I narrowed down what external services are used in my skill to external assets dynamoDB analytics Based on logs it does seem to save Saved user id analytics return it sends a response Response JSON jovoframework Response framework and ends with middleware platformoutput done however at this point it eventually times out based on how long my lambda timeout is currently s Our working guess is that despite a response being sent the lambda never closes which eventually sends and END RequestId id causing an error despite everything going alright However nothing other than the lambda seem to be an issue when tested everything seems to return DB metrics look fine mp files are only used on device side Small side note is that we have two jovo skills and interestingly the large error duration spikes happen at almost exactly the same time amount looking at cloudwatch metrics Another skill the client has also uses Jovo and while it does have timeouts they dont mirror the results like my two skills do Note My two skills use separate databases lambdas but do use the same server for assets though nothing fetched server side and same analytics platform though again it always returns way before timeout nothing else should be shared Logs Logs look something like this with DEBUG level on timestampmessage NOTE the line below is a log I have at the top of appjs right before new App T Z id processenvDEBUG false globalgAppMode production END RequestId id REPORT RequestId id Duration ms Billed Duration ms Memory Size MB Max Memory Used MB T Z id Task timed out after seconds id middleware platformoutput done ms id id Response framework id id id Response JSON jovoframework id id id version id response id shouldEndSession false id outputSpeech id reprompt id directives id card id id sessionAttributes id JOVOSTATE PlayerCountSelectState id id id middleware response done ms id thisusermetaData id middleware usersave done ms id id Output object thisoutput framework id id id Alexa id DisplayTemplate id StandardCard id Directives id id ask id id id Jovo user save framework id id Saved user account id thisusercontext id id prev id id thisuserdata id id id ONREQUEST id id ONREQUEST ms id id Handle framework id id id middleware handler done ms T Z id startState PlayerCountSelectState id toIntent Start id NEWSESSION ms T Z id startState StartGame id toIntent Start id toIntent Start T Z id startState Greeting id id type LAUNCH id path LAUNCH id id middleware router done ms id id Jovo handler framework id id id NEWSESSION id id id Jovo router framework id id Route object id thisusernew false id id prev id id thisuserdata id id thisusermetaData id middleware userload done ms id middleware beforerouter done ms id id Jovo user load framework id id thisusergetId id id middleware platformnlu done ms id id After nlu framework id id thisnlu undefined id thisinputs id middleware afterplatforminit done ms id middleware platforminit done ms id id After init framework id id thisalexaSkill initialized id thistype typeLAUNCH id thissessiondata id id Request JSON jovoframework id id id version id session id context id request id id middleware request done ms id middleware setup done ms id Adding resources to cms object id id id Start request framework id START RequestId id Version LATEST Conclusion Im not sure if I am perhaps missing something obvious from the logs or if its some internal Jovo thing I may not have accounted for but after working with amazon a bit on trying to narrow down the issue we decided it would be best to reach out to you Any help would of course be appreciated Your Environment jovodbdynamodb jovoframework jovoplatformalexa jovoplugindebugger Operating System Local mac Server AWS Lambda Im submitting a Put an x in all the boxes that apply x Bug report Feature request Documentation issue or request Other Please describe Expected Behavior Botanalytics should work for both platforms Current Behavior Botanalytics refuses to log requests for the google assistant Error log LOG Botanalytics Error Failed to log message Error The request was unacceptable This is often due to missing a required parameter ERROR object Object at ObjectcheckResponse rootprojetjovonodemodulesbotanalyticsutiljs at Requestrequest as callback rootprojetjovonodemodulesbotanalyticsplatformsgooglejs at Requestselfcallback rootprojetjovonodemodulesrequestrequestjs at emitTwo eventsjs at Requestemit eventsjs at Requestanonymous rootprojetjovonodemodulesrequestrequestjs at emitOne eventsjs at Requestemit eventsjs at IncomingMessageanonymous rootprojetjovonodemodulesrequestrequestjs at ObjectonceWrapper eventsjs Looking more closely at the response object in nodemodulesbotanalytics userId fields isare required inside user parameter in json payload request object in nodemodulesbotanalytics nodejs url messagesgoogleassistantdialogflow nodejs method POST nodejs json true nodejs body nodejs request nodejs responseId b f c ad b e ddfa fbee dc nodejs queryResult nodejs queryText GOOGLEASSISTANTWELCOME nodejs parameters nodejs allRequiredParamsPresent true nodejs outputContexts nodejs nodejs intent nodejs name projectsagentintents b d d cb b e ec nodejs displayName Default Welcome Intent nodejs intentDetectionConfidence nodejs languageCode fr nodejs originalDetectIntentRequest nodejs source google nodejs version nodejs payload nodejs GoogleActionRequest nodejs user nodejs locale frFR nodejs lastSeen T Z nodejs idToken nodejs userVerificationStatus VERIFIED nodejs conversation nodejs conversationId ABwppHGgslFcQwW PSuOqmHaUeg BpErPRFesFsiTIYSKFuSrYANCunxLUKfCWQd i QaSsAfEDwkaAg nodejs type NEW nodejs inputs nodejs intent actionsintentMAIN nodejs rawInputs nodejs inputType KEYBOARD nodejs query Parler avec mon application test nodejs surface nodejs capabilities nodejs name actionscapabilityWEBBROWSER nodejs name actionscapabilityAUDIOOUTPUT nodejs name actionscapabilityACCOUNTLINKING nodejs name actionscapabilityMEDIARESPONSEAUDIO nodejs name actionscapabilitySCREENOUTPUT nodejs isInSandbox true nodejs requestType SIMULATOR nodejs session projectsagentsessionsABwppHGgslFcQwW PSuOqmHaUeg BpErPRFesFsiTIYSKFuSrYANCunxLUKfCWQd i QaSsAfEDwkaAg nodejs response nodejs DialogflowResponse nodejs fulfillmentText nodejs outputContexts nodejs payload nodejs google nodejs GoogleActionResponse nodejs expectUserResponse true nodejs richResponse nodejs items nodejs simpleResponse nodejs ssml nodejs suggestions nodejs nodejs noInputPrompts nodejs ssml nodejs userStorage userId Your Environment Operating System Ubuntu Typescript jovoanalyticsbotanalytics jovocmsgooglesheets jovoframework jovoplatformalexa jovoplatformdialogflow jovoplatformgoogleassistant 