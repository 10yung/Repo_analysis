Is there any way to set the optimization problem stops after a certain amount of time or reaching a certain optimality gap Is there any way to set these parameters before running our code Hi I am trying to translate a yearold Julia code to R because I am more familiar with R I figured that maybe someone reading the Issues here or you yourself could help me I have this Julia code julia variablem usedteam i numteams Bin constraintm constr i numteams usedteam i sumskatersteams t i skaterslineup t t numskaters constraintm sumusedteam i i numteams and tried to write it in R like this R addvariableusedteam i i numteams type binary addconstraintusedteam i numteams sumexprskatersteams t numteams skaterslineups t t numskaters addconstraintsumexprusedteam i i numteams but i get this message Error in checkforunknownvarsimplmodel theast The expression contains a variable that is not part of the model How can I resolve this thank you in advance KInd regards Christian OptimizationROMPR newbie here Background Im trying to allocate product between two storage locations based on storage cost such that the total qty of products equals given constant demand governed by optimization equation below minimize subject to Question I noticed that when I try to run the below code with MILP one of the last two constraints in the model is never met ie maxc but the optimization would solve and give an answer where the corresponding sum However when I switch to MIP the model works fine is this a bug or am I just using the functions incorrectly Question Then when I try to change the objective function to the following by adding cost for transportation and the objective function part of the model to setobjectiverc sumexprproductspace i x i i n rw sumexprproductspace i x i i n fl sumexprx i i n min One of my variables always comes back negative even though I have explicitly set all variables to be positive Any ideas on what Im doing wrong here all variables need to be positive addconstraintx i i n addconstraintx i i n Code n represents no of distinct UPNs n m represents no of warehouses m storage rate of central and warehouse rc rw max storage space for central and warehouse maxc maxw model MIPModel qty of product i allocated to location l addvariablex i l i n l m typecontinuous minimize total cost setobjectiverc sumexprproductspace i x i i n rw sumexprproductspace i x i i n min need at least one product of i in location l addconstraintx i i n addconstraintx i x i productdemand i i n all variables need to be positive addconstraintx i i n addconstraintx i i n max central and warehouse storage area constraint addconstraintsumexprproductspace i x i i n maxc addconstraintsumexprproductspace i x i i n maxw Hi all I have been thinking about how to advance modelling in R and recently I had some energy again to spend on optimization One idea is to have a central mutable solver object instead of an immutable model object julia JuMP approach as it enables communicating directly with the solver It is then possible to implement things like quadratic programs callbacks or very solver specific stuff I started implementing and testing these ideas in a separate package this week The package shares most of the API with ompr so it feels quite familiar Another goal is also to make the package so fast that you can use it within a package as well as in interactive analyses There are three options I have once the experimental package is complete and I am satisfied with the result Release this as an independent package and leaving ompr as it is Merge this with ompr as a third model backend while deprecating the other two Using the new code in the ompr package thus breaking all previous code But it would not be too hard to fix any broken code as the API is roughly the same Any input is very welcome PS I cannot give any timeline on the new development as I am just doing that after work when I have some energy Hi I am trying to set up the following problem v result MILPModel addvariablex i i v type binary setobjectivesumexprx i i v sense min addconstrainttraveltimex solvemodelwithROIsolver glpk Here traveltime is a function which takes an entire vector as the input rather than a single value such as statssd Thus I would like the constraint to be global for the variable x rather than discrete for each of its values How can I rewrite this Hi All To speed up my optimization I am trying to exclude irrelevant variables x kj by using a grid to define the index combinations that should enter the model This works up to the point where I want to enter a constraint on the sum of the relevant x kjj setseed u matrixsamplec replaceTRUEncol nrow grid expandgridk j gridsmall grid whichu gridsmalltable datatablegridsmall gridsmalltableid seqintnrowgridsmall u modelMILPModel addvariablex gridsmallk gridsmallj setobjectivesumexpru m x gridsmallkgridsmallj mwhichu addconstraintx gridsmallkgridsmallj addconstraintx jk j k addconstraintsumexprx gridsmallkgridsmallj solvemodelwithROIglpkverboseTRUE getsolutionmodel x kj modelobjectivevalue But this will give me an error Error in FUNX i not implemented I also tried to implement it in the same way as the objective function by doing this one rep addconstraintsumexprone m x gridsmallkgridsmallj mwhichu But then SOLVER MSG GLPK Simplex Optimizer v rows columns nonzeros obj e infeas e obj e infeas e OPTIMAL SOLUTION FOUND SOLVER MSG getsolutionmodel x kj variable k j value x x x x x x x modelobjectivevalue The constraint that the sum of the x should be lower or equal than will be ignored Any ideas Hi Dirk First thanks very much for creating and maintaining this app It is very nice and useful The problem I am having is when I try to get the mapdata after libraryrgeos libraryrgdal librarymaptools librarydplyr and mapdata rgdalreadOGR OGRGeoJSON I get the following error in R Error in ogrInfodsn dsn layer layer encoding encoding useiconv useiconv Cannot open layer Do I need to get another package Thanks for your help Wes First off all thank you for creating a terrific intuitive package for modelling MILPs Im modelling a scheduling problem and I have a question concerning the use of sumexpr In my model Im trying to model the following constraint I tried to model the constraint as follows this is a simplified example that does not account for negative values in tt R timeslots c r c addconstraintsumexprx rtt r requests tt tl rDuration chairs t timeslots l is a dataframe containing the requests r and duration of the request respectively The variable X rtt is when a request starts at time tt and otherwise The idea behind the constraint is that it ensures that the number of chairs taken by the requests that start on any time t and the requests that started before t but have not ended yet do not exceed the number of available chairs For this to work tt is dependent on the current time t and the duration of each individual request r Though when running the code I get the error message of object r not found I couldnt find a way to solve my problem in previously posted issues or documentation I hope someone is able to help me out In the documentation it is shown how to express the following matrix in a constraint x x x x x x by x colwise Id like to be able similarly to express say x x x but am running into problems with duplicate indexes with i colwise j colwise Any thoughts welcome Hi again Im having some trouble formatting the following as a MILP problem I have products and groups Each product has a attraction rate AR that differs for each group Each product also has total sales I want to maximize the sum of AR Sales normalized I have the latest dev version The following MIPModel works just fine model MIPModel addvariablex p g p n g m type binary setobjectivesumexprar p g x p g totalsales p x p g p n g m max each product can be used once addconstraintsumexprx p g g m p n we want nproducts selected for each group addconstraintsumexprx p g p n nproducts g m Im bit confused how to model the ar part as MILPModel The following works but yields different wrong results arvector ar nrowar ncolar unlist milpmodel MILPModel addvariablex p g p n g m type binary setobjectivesumexprarvector x p g colwisetotalsales p x p g p n g m max each product can be used once addconstraintsumexprx p g g m p n we want nproducts selected for each group addconstraintsumexprx p g p n nproducts g m I also tried the following arfunc functionpg arsub ar p g arvec asvectorarsub returnarvec setobjectivesumexprwar colwisearfuncp g x p g wsales colwisetotalsales p x p g p n g m max Error in asdataframedefaultx i optional TRUE cannot coerce class structureLinearVariableCollection package ompr to a dataframe What is the correct way to format this problem 