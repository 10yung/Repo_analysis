I get the following error errormessageDisplay socket is taken but lock file is missing check the Headless troubleshooting guideerrorclassHeadlessExceptionfailedat retrycount errorbacktrace Usersbuzzgemruby gemsheadless libheadlessrb in ensurexvfblaunchedUsersbuzzgemruby gemsheadless libheadlessrb in launchxvfbUsersbuzzgemruby gemsheadless libheadlessrb in block in pickavailabledisplay i added extra but video doesnt have sound headless Headlessnewdimensions x x video logfilepath STDERR framerate codec libx devices drawmouse extra wacodec libmp lame ar ab k threads Suppose I invoke Headlessrundisplay pickadisplay autopick true do end so that I specify both an initial guess for a display and ask Headless to handle the rest My server for whatever the reason currently has a particular display that consistently responds with Cannot establish any listening sockets I dont know why there are no Xvfb processes running at all But thats beside the point right now So if pickadisplay happens to hit that bad number then this call to Headlessrun will always fail even though Ive asked Headless to autopick a working display It seems to me that ensurexvfblaunched is overly aggressive about terminating the call to run It would be nice for pickavailabledisplay do something like def pickavailabledisplaydisplayset canreuse pendingexception nil displayseteach do displaynumber display displaynumber return true if xvfbrunning canreuse xvfbmine autopickdisplay begin return true if xvfbrunning launchxvfb rescue HeadlessException e pendingException e end end raise pendingexception HeadlessExceptionnewCould not find an available display end so that if other display options were available the call would still succeed I am trying to use headless in a program with SuckerPunch were each job independently accesses different websites using watirseleniumchrome Kicking off a single job works fine but I begin to experience reliability issues if I try to run more than one job concurrently Is headless able to be used in this manner I followed your instructions for shared use via forking but if by that you meant creating separate processes then that might explain my issue In any event can headless be used by multiple threads withing the same process and if so what is the proper usage pattern Thanks Hi Can u give some guidance for using this project on command line Is it possible to use it without knowing Ruby I am struggling with this issue and thought that may be your application solve the problem Im getting the following error with the video logfilepath STDERR option Unknown input format x grab This page seems to suggest that avfoundation should be used instead on mac Any ideas on how to fix this Hello I have a few things about the headless gem and video recording How can I hide the mouse cursor In method stopandsave in VideoRecorder class good option is add mkdirp before mv def stopandsavepath RecorderCliUtilkillprocesspidfilepath wait true if Fileexists tmpfilepath begin FileUtilsmkdirpFiledirnamepath FileUtilsmvtmpfilepath path rescue ErrnoEINVAL nil end end end what do you think In method commandlineforcapture in VideoRecorder class is a small bug Before look on devices position in array CliUtilpathtoproviderbinarypath y r framerate s dimensions f x grab devices i display groupofpicsizeoption vcodec codec extra tmpfilepath flattencompactjoin After CliUtilpathtoproviderbinarypath y r framerate s dimensions f x grab i display devices groupofpicsizeoption vcodec codec extra tmpfilepath flattencompactjoin Could you fix it Good idea is add something like postprocessingvideo method or yield that will be triggered in method stopandsave before FileUtilsmvtmpfilepath path command For instance def stopandsavepath block RecorderCliUtilkillprocesspidfilepath wait true if Fileexists tmpfilepath begin FileUtilsmkdirpFiledirnamepath yieldtmpfilepath if blockgiven FileUtilsmvtmpfilepath path rescue ErrnoEINVAL nil end end end This solution will be very helpful for add watermark or other operation after recording What do you think Last one question how can I stop recording from bash or external script if I know screen number Best Regards Peter Hello I saw the issue and I saw the videorecorderrb In line is a small bug because probably variable devices should be line below s dimensions f x grab i display devices groupofpicsizeoption vcodec codec could you check it and fix Thank you Thanks for the wonderful gem I am trying to see how this can work with Selenium Docker images If I understand correctly Docker selenium exposes a selenium server running already on port Do we just change headless to always use that selenium server or is there a better way to do this without having to write a lot of Dockerfile to install browsersrubyselenium etc Thanks Rajat Jindal First off thanks for the awesome gem I want to use headless to run concurrent selenium builds using this gem and I see that xvfb should allow being passed an autoservernum flag at runtime This will presumably prevent the following collision error Im seeing currently when running concurrent builds ErrnoECONNREFUSED Failed to open TCP connection to Connection refused connect for port Ive tried invoking headless using a random display each time inside a sidekiq worker with concurrency of but I get similar errors ruby headless Headlessnewdisplay rand headlessstart 