Thank you for sharing this wonderful demo file It was very useful for study with nanomsg Its nothing important but I found some issues like this header file for ntohl htonl Compile issue in int serverconst char url with comparison between pointer and integer Thank you nanomsg does not build when used as a cmake subproject with FetchContent The following error is observed CMake Error File Usersprojectpathblddepsnanomsgsrcsrccmakenanomsgconfigcmakein does not exist Call Stack most recent call first blddepsnanomsgsrcsrcCMakeListstxt configurepackageconfigfile This can be rectified using the following change at line number configurepackageconfigfile CMAKESOURCEDIRcmakePROJECTNAMEconfigcmakein CMAKECURRENTSOURCEDIRcmakePROJECTNAMEconfigcmakein CMAKECURRENTBINARYDIRPROJECTNAMEconfigcmake INSTALLDESTINATION PACKAGEINSTALLDESTINATION PATHVARS CMAKEINSTALLPREFIX The use of comfortaa on the nanomsg website leads to rather poor rendering on some systems eg Windows on my Dell XPS Probably we should replace with a more mainstream font Im testing the PUSHPULL socket using TCP transport If IPv only option was disabled and try to connect with IPv address the destination address resolved AFINET but local address which the socket would bind resolved as AFINET so nnusockstart makes the socket AFINET after that nnctcpstartconnecting try to bind the local IPv address it was failed the local address lookup code is not working properly nnifaceany determines the bind address only with ipv only option after that nanomsg try to reconnect and takes a same routine again at that time usockstate is not idle it is NNUSOCKSTATESTARTING so nnusockstart is assert please consider the following three points nnifaceany should not determine the address with ipv only option nnusockstart should consider connection retry case if ipv only option is disabled make the socket as AFINET forced My application is running on Windows Platform and Linux Platform at the same time with Pair Mode the windows platform is running with bind and linux with connect After few hours the application running on Windows abort with this error Unexpected action state source action e workspace nanomsg src transports tcp atcpc Are there efforts to add this to Microsofts Visual C package manager vcpkg It is much easier to get library that way Thanks Description nnbipccreate will allocate memory for nnbipc structure and do a lot of stuff to run fsm for that connection But if the last call to nnbipclisten fails introduced in and related bug this will produce the memory leak How to reproduce Build nanomsg with memory sanitizer CCclang CXXclang cmake DCMAKECFLAGSg fsanitizeaddress fnoomitframepointer O Run ipc Report ERROR LeakSanitizer detected memory leaks Direct leak of bytes in objects allocated from x f a in malloc llvmllvmprojectscompilerrtlibasanasanmalloclinuxcc x f bc in nnbipccreate nanomsgsrctransportsipcbipcc x f ce in nnepinit nanomsgsrccoreepc x f in nnsockaddep nanomsgsrccoresockc x f be in nnbind nanomsgsrccoreglobalc x ad in main nanomsgtestsipcc x f d c in libcstartmain usrsrcdebugglibc c a csucsulibcstartc SUMMARY AddressSanitizer bytes leaked in allocations Note Freeing allocated memory right after nnbipclisten call not an option because it already used in bipc fsm Need some advice for clean shutdown of all that stuff nanocat looks like an excellent minimal tool for some common use cases I have on the command line Is there any interest in a PR to provide a mode making it lineoriented when it reads from a file or stdin What I would like is to be able to do is something like tail f logfile nanocat pub byline and receive that elsewhere It looks like that the moment all information is read from the data or file at once 