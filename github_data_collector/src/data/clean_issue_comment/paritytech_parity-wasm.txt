Basically reopen of to track separately Original comment This issue seems to still remain or has been reintroduced NikVolf can you reopen please Few examples Hello mentions that it would be nice to have the option to validate a wasm file as its being parsed to check for things like f f s in smart contracts There are some aspects of validation that could probably only happen once the module has been fully deserialized but perhaps we could do something like fn deserializebuffercontents u typeblacklist ValueType This way we could perform an early return if a type is blacklisted Constrained targets such as microcontroller will rarely have more than a few kilo byte of stack It took me a bit to figure this out and I think the documentation doesnt really cover it and I had to piece things together from the code so I want to leave a snippet here that may help others This is a pretty nifty test which illustrates compiling identical modules from wat with wat wasm in the wabt crate and the paritywasm module builder api rust cfgtest mod tests extern crate wabt extern crate paritywasm use wabt wat wasm use paritywasm deserializebuffer builder elements use paritywasmelementsInstruction GetLocal I Sub End test fn itcanbuildmodule let wast r module func export sub param x i param y i result i return x y i sub getlocal x getlocal y let modulebytes wat wasmwastunwrap let m elementsModule deserializebuffer modulebytesexpectCant deserialize module let m buildermodule export fieldsubinternalfunc build function signature parami parami returntypei build body withinstructionselementsInstructionsnew GetLocal GetLocal I Sub End tovec build build build asserteqm version asserteqm m It would be nice if there was a bit more documentation on withinstructions since that was the piece that seemed to be missing for me This works with and panics on let wasm Vecu FromHexfromhex d e e f d f d e d d f a b b e d e d e d e unwrap let mut module Module paritywasmdeserializebufferModule wasmunwrap module moduleparsenamesunwrap panic here Error snippet panicked at called Resultunwrap on an Err value Otherindex is larger than expected Module magic version sections TypeTypeSe ction FunctionFunctionType form params I returntype None FunctionFunctionType form params returntype None ImportImportSection ImportEntry modulestr env fieldstr ethereumuseGas external Function FunctionFunctionSection Func Func MemoryMemorySection MemoryTypeResizableLimits initial maximum None shared false ExportExportSecti on ExportEntry fieldstr main internal Function ExportEntry fieldstr memory internal Memory Start CodeCodeSection FuncBody locals instructions Instructions End Fu ncBody locals instructions Instructions End CustomCustomSection name name payload srclibcoreresultrs Im using Ubuntu bash Ktravistimestart f K TRAVISBRANCH master TRAVISPULLREQUEST false cargo doc echo meta httpequivrefresh content urlparitywasmindexhtml targetdocindexhtml sudo pip install ghpimport ghpimport n targetdoc git push qf ghpages Documenting paritywasm v hometravisbuildparitytechparitywasm Finished dev unoptimized debuginfo targets in s The directory hometraviscachepiphttp or its parent directory is not owned by the current user and the cache has been disabled Please check the permissions and owner of that directory If executing pip with sudo you may want sudos H flag The directory hometraviscachepip or its parent directory is not owned by the current user and caching wheels has been disabled check the permissions and owner of that directory If executing pip with sudo you may want sudos H flag Collecting ghpimport usrlocallibpython distpackagespipvendorrequestspackagesurllib utilsslpy SNIMissingWarning An HTTPS request has been made but the SNI Subject Name Indication extension to TLS is not available on this platform This may cause the server to present an incorrect TLS certificate which can cause validation failures You can upgrade to a newer version of Python to solve this For more information see SNIMissingWarning usrlocallibpython distpackagespipvendorrequestspackagesurllib utilsslpy InsecurePlatformWarning A true SSLContext object is not available This prevents urllib from configuring SSL appropriately and may cause certain SSL connections to fail You can upgrade to a newer version of Python to solve this For more information see InsecurePlatformWarning usrlocallibpython distpackagespipvendorrequestspackagesurllib utilsslpy InsecurePlatformWarning A true SSLContext object is not available This prevents urllib from configuring SSL appropriately and may cause certain SSL connections to fail You can upgrade to a newer version of Python to solve this For more information see InsecurePlatformWarning usrlocallibpython distpackagespipvendorrequestspackagesurllib utilsslpy InsecurePlatformWarning A true SSLContext object is not available This prevents urllib from configuring SSL appropriately and may cause certain SSL connections to fail You can upgrade to a newer version of Python to solve this For more information see InsecurePlatformWarning Downloading Installing collected packages ghpimport Running setuppy install for ghpimport started Running setuppy install for ghpimport finished with status done Successfully installed ghpimport usrlocallibpython distpackagespipvendorrequestspackagesurllib utilsslpy InsecurePlatformWarning A true SSLContext object is not available This prevents urllib from configuring SSL appropriately and may cause certain SSL connections to fail You can upgrade to a newer version of Python to solve this For more information see InsecurePlatformWarning usrlocallibpython distpackagespipvendorrequestspackagesurllib utilsslpy InsecurePlatformWarning A true SSLContext object is not available This prevents urllib from configuring SSL appropriately and may cause certain SSL connections to fail You can upgrade to a newer version of Python to solve this For more information see InsecurePlatformWarning You are using pip version however version is available You should consider upgrading via the pip install upgrade pip command remote Invalid username or password fatal Authentication failed for travistimeend f start finish duration Ktravisfoldendaftersuccess K When generating sections from scratch initialization from VecImportEntry for ImportSection and others would be handy and elements should be at root should be nostd and more generic