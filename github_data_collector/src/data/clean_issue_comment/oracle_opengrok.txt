The changeset dcb c b bc f ccd bf c a changes the messages rest api argument from cssClass to messageLevel We expected the sync configuration command POST cssClass info tags PROJECT text hello starts to fail but it pass without any warning opengroksync config syncyml P project l DEBUG DEBUG opengroktools web application URI DEBUG opengroktools trying JSON DEBUG opengroktools got exception class ValueError DEBUG opengroktools trying YAML DEBUG opengroktools Ignored projects DEBUG opengroktools Processing directories project DEBUG opengroktools to process project DEBUG opengroktoolsutilsrestful Adding header ContentType applicationjson DEBUG opengroktoolsutilsrestful Converting cssClass info tags PROJECT text hello to JSON DEBUG opengroktoolsutilsrestful entity data cssClass info tags project text hello DEBUG opengroktoolsutilsrestful POST API call with data cssClass info tags project text hello and headers ContentType applicationjson DEBUG opengroktools Checking results of project project DEBUG opengroktoolsutilscommandsequence Output for project project DEBUG opengroktoolsutilscommandsequence retcodes The problem is on the client side the REST API returns correct error code curl s w n nhttpcode n X POST H ContentType applicationjson d echo cssStyle info text hello fmt Unrecognized field cssStyle class orgopengrokindexerwebmessagesMessage not marked as ignorable known properties tags duration messageLevel text at Source orgglassfishjerseymessageinternalReaderInterceptorExecutorUnCloseableInputStream line column through reference chain orgopengrokindexerwebmessagesMessage cssStyle after change cssStyle to messageLevel the return code is Expected behavior opengroksync should fail andor report a warning if a REST request failed This change fixes bug in timeout properties not being used in mirrorpy at all unless configured on project level The added tests merely check parameter passing between functions More robust test would be eg to use GitPython in gitpy as suggested in mock it to timeout the pull operation and verify the timeout in tests Hi This is simple question I get Indexer command failed with return code andor Where docs source code andor web sites can I see the return code information Describe the bug As mentioned in sometimes hg incoming handing in mirrorpy does not timeout on our production instance running The hg process seems to be stuck in the read syscall This happens when opengrokmirror is run from opengroksync To Reproduce Obviously I is needed for opengrokmirror Expected behavior The command should timeout The HistoryGuruTesttestGetRevision fails in Travis Windows env due to Jan AM orgopengrokindexerutilExecutor exec WARNING Nonzero exit status from command blame Makefile in directory C Users travis AppData Local Temp source rcstest ERROR Tests run Failures Errors Skipped Time elapsed s FAILURE in orgopengrokindexerhistoryHistoryGuruTest ERROR testGetRevision Time elapsed s FAILURE javalangAssertionError Failed to get revision of C Users travis AppData Local Temp source razor RazorSimple SimpleCProgram mainc at orgjunitAssertfailAssertjava at orgjunitAssertassertTrueAssertjava at orgjunitAssertassertNotNullAssertjava at orgopengrokindexerhistoryHistoryGuruTesttestGetRevisionHistoryGuruTestjava at sunreflectNativeMethodAccessorImplinvoke Native Method at sunreflectNativeMethodAccessorImplinvokeNativeMethodAccessorImpljava at sunreflectDelegatingMethodAccessorImplinvokeDelegatingMethodAccessorImpljava at javalangreflectMethodinvokeMethodjava at orgjunitrunnersmodelFrameworkMethod runReflectiveCallFrameworkMethodjava at orgjunitinternalrunnersmodelReflectiveCallablerunReflectiveCallablejava at orgjunitrunnersmodelFrameworkMethodinvokeExplosivelyFrameworkMethodjava at orgjunitinternalrunnersstatementsInvokeMethodevaluateInvokeMethodjava at orgjunitrulesRunRulesevaluateRunRulesjava at orgjunitrunnersParentRunnerrunLeafParentRunnerjava at orgjunitrunnersBlockJUnit ClassRunnerrunChildBlockJUnit ClassRunnerjava at orgjunitrunnersBlockJUnit ClassRunnerrunChildBlockJUnit ClassRunnerjava at orgjunitrunnersParentRunner runParentRunnerjava at orgjunitrunnersParentRunner scheduleParentRunnerjava at orgjunitrunnersParentRunnerrunChildrenParentRunnerjava at orgjunitrunnersParentRunneraccess ParentRunnerjava at orgjunitrunnersParentRunner evaluateParentRunnerjava at orgjunitinternalrunnersstatementsRunBeforesevaluateRunBeforesjava at orgjunitinternalrunnersstatementsRunAftersevaluateRunAftersjava at orgjunitrunnersParentRunnerrunParentRunnerjava at orgjunitrunnerJUnitCorerunJUnitCorejava at orgjunitrunnerJUnitCorerunJUnitCorejava at orgjunitvintageengineexecutionRunnerExecutorexecuteRunnerExecutorjava at javautilstreamForEachOpsForEachOpOfRefacceptForEachOpsjava at javautilstreamReferencePipeline acceptReferencePipelinejava at javautilIteratorforEachRemainingIteratorjava at javautilSpliteratorsIteratorSpliteratorforEachRemainingSpliteratorsjava at javautilstreamAbstractPipelinecopyIntoAbstractPipelinejava at javautilstreamAbstractPipelinewrapAndCopyIntoAbstractPipelinejava at javautilstreamForEachOpsForEachOpevaluateSequentialForEachOpsjava at javautilstreamForEachOpsForEachOpOfRefevaluateSequentialForEachOpsjava at javautilstreamAbstractPipelineevaluateAbstractPipelinejava at javautilstreamReferencePipelineforEachReferencePipelinejava at orgjunitvintageengineVintageTestEngineexecuteAllChildrenVintageTestEnginejava at orgjunitvintageengineVintageTestEngineexecuteVintageTestEnginejava at orgjunitplatformlaunchercoreDefaultLauncherexecuteDefaultLauncherjava at orgjunitplatformlaunchercoreDefaultLauncherlambdaexecute DefaultLauncherjava at orgjunitplatformlaunchercoreDefaultLauncherwithInterceptedStreamsDefaultLauncherjava at orgjunitplatformlaunchercoreDefaultLauncherexecuteDefaultLauncherjava at orgjunitplatformlaunchercoreDefaultLauncherexecuteDefaultLauncherjava at orgapachemavensurefirejunitplatformJUnitPlatformProviderinvokeAllTestsJUnitPlatformProviderjava at orgapachemavensurefirejunitplatformJUnitPlatformProviderinvokeJUnitPlatformProviderjava at orgapachemavensurefirebooterForkedBooterinvokeProviderInSameClassLoaderForkedBooterjava at orgapachemavensurefirebooterForkedBooterrunSuitesInProcessForkedBooterjava at orgapachemavensurefirebooterForkedBooterexecuteForkedBooterjava at orgapachemavensurefirebooterForkedBootermainForkedBooterjava Jan AM orgopengrokindexerhistoryRazorRepository getHistoryGet SEVERE getHistoryGet C Users travis AppData Local Temp source razor RazorSimple SimpleCProgram mainc javaioIOException Invalid RCS file format linejavalangNumberFormatException at orgopengrokindexerhistoryRCSRepositorywrapInIOExceptionRCSRepositoryjava at orgopengrokindexerhistoryRCSgetinitRCSgetjava at orgopengrokindexerhistoryRazorRepositorygetHistoryGetRazorRepositoryjava at orgopengrokindexerhistoryRepositorygetHistoryGetRepositoryjava at orgopengrokindexerhistoryHistoryGurugetRevisionHistoryGurujava at orgopengrokindexerhistoryHistoryGuruTesttestGetRevisionHistoryGuruTestjava at sunreflectNativeMethodAccessorImplinvoke Native Method at sunreflectNativeMethodAccessorImplinvokeNativeMethodAccessorImpljava at sunreflectDelegatingMethodAccessorImplinvokeDelegatingMethodAccessorImpljava at javalangreflectMethodinvokeMethodjava at orgjunitrunnersmodelFrameworkMethod runReflectiveCallFrameworkMethodjava at orgjunitinternalrunnersmodelReflectiveCallablerunReflectiveCallablejava at orgjunitrunnersmodelFrameworkMethodinvokeExplosivelyFrameworkMethodjava at orgjunitinternalrunnersstatementsInvokeMethodevaluateInvokeMethodjava at orgjunitrulesRunRulesevaluateRunRulesjava at orgjunitrunnersParentRunnerrunLeafParentRunnerjava at orgjunitrunnersBlockJUnit ClassRunnerrunChildBlockJUnit ClassRunnerjava at orgjunitrunnersBlockJUnit ClassRunnerrunChildBlockJUnit ClassRunnerjava at orgjunitrunnersParentRunner runParentRunnerjava at orgjunitrunnersParentRunner scheduleParentRunnerjava at orgjunitrunnersParentRunnerrunChildrenParentRunnerjava at orgjunitrunnersParentRunneraccess ParentRunnerjava at orgjunitrunnersParentRunner evaluateParentRunnerjava at orgjunitinternalrunnersstatementsRunBeforesevaluateRunBeforesjava at orgjunitinternalrunnersstatementsRunAftersevaluateRunAftersjava at orgjunitrunnersParentRunnerrunParentRunnerjava at orgjunitrunnerJUnitCorerunJUnitCorejava at orgjunitrunnerJUnitCorerunJUnitCorejava at orgjunitvintageengineexecutionRunnerExecutorexecuteRunnerExecutorjava at javautilstreamForEachOpsForEachOpOfRefacceptForEachOpsjava at javautilstreamReferencePipeline acceptReferencePipelinejava at javautilIteratorforEachRemainingIteratorjava at javautilSpliteratorsIteratorSpliteratorforEachRemainingSpliteratorsjava at javautilstreamAbstractPipelinecopyIntoAbstractPipelinejava at javautilstreamAbstractPipelinewrapAndCopyIntoAbstractPipelinejava at javautilstreamForEachOpsForEachOpevaluateSequentialForEachOpsjava at javautilstreamForEachOpsForEachOpOfRefevaluateSequentialForEachOpsjava at javautilstreamAbstractPipelineevaluateAbstractPipelinejava at javautilstreamReferencePipelineforEachReferencePipelinejava at orgjunitvintageengineVintageTestEngineexecuteAllChildrenVintageTestEnginejava at orgjunitvintageengineVintageTestEngineexecuteVintageTestEnginejava at orgjunitplatformlaunchercoreDefaultLauncherexecuteDefaultLauncherjava at orgjunitplatformlaunchercoreDefaultLauncherlambdaexecute DefaultLauncherjava at orgjunitplatformlaunchercoreDefaultLauncherwithInterceptedStreamsDefaultLauncherjava at orgjunitplatformlaunchercoreDefaultLauncherexecuteDefaultLauncherjava at orgjunitplatformlaunchercoreDefaultLauncherexecuteDefaultLauncherjava at orgapachemavensurefirejunitplatformJUnitPlatformProviderinvokeAllTestsJUnitPlatformProviderjava at orgapachemavensurefirejunitplatformJUnitPlatformProviderinvokeJUnitPlatformProviderjava at orgapachemavensurefirebooterForkedBooterinvokeProviderInSameClassLoaderForkedBooterjava at orgapachemavensurefirebooterForkedBooterrunSuitesInProcessForkedBooterjava at orgapachemavensurefirebooterForkedBooterexecuteForkedBooterjava at orgapachemavensurefirebooterForkedBootermainForkedBooterjava Caused by orgsuigenerisjrcsrcsInvalidFileFormatException linejavalangNumberFormatException at orgsuigenerisjrcsrcsimplNodepatchNodejava at orgsuigenerisjrcsrcsimplPathpatchPathjava at orgsuigenerisjrcsrcsArchivegetRevisionArchivejava at orgsuigenerisjrcsrcsArchivegetRevisionArchivejava at orgsuigenerisjrcsrcsArchivegetRevisionArchivejava at orgopengrokindexerhistoryRCSgetinitRCSgetjava more at javalangNumberFormatExceptionforInputStringNumberFormatExceptionjava at javalangIntegerparseIntIntegerjava at javalangIntegerparseIntIntegerjava at orgsuigenerisjrcsrcsimplNodepatchNodejava more In Travis Windows environment all XrefTestjava tests fail eg AdaXrefTestsampleTest XrefTestBasewriteAndCompare XrefTestBasewriteAndCompare orgopengrokindexeranalysisadaAdaAnalyzerFactory xrefshould have no diffs with INFO Running orgopengrokindexeranalysisadaAdaXrefTest DOCTYPE html html langen head meta charsetUTF titlesampleFile OpenGrok cross reference for sampleFiletitleheadbody a classl name href aspan classcspan a classl name href aspan classc CDDL HEADER STARTspan a classl name href aspan classcspan a classl name href aspan classc The contents of this file are subject to the terms of thespan a classl name href aspan classc Common Development and Distribution License the quotLicense quotspan a classl name href aspan classc You may not use this file except in compliance with the Licensespan a classl name href aspan classcspan a classl name href aspan classc See LICENSEtxt included in this distribution for the specificspan a classl name href aspan classc language governing permissions and limitations under the Licensespan a classhl name href aspan classcspan a classl name href aspan classc When distributing Covered Code include this CDDL HEADER in eachspan a classl name href aspan classc file and include the License file at LICENSEtxtspan a classl name href aspan classc If applicable add the following below this CDDL HEADER with thespan a classl name href aspan classc fields enclosed by brackets quot quot replaced with your own identifyingspan a classl name href aspan classc information Portions Copyright yyyy name of copyright owner span a classl name href aspan classcspan a classl name href aspan classc CDDL HEADER ENDspan a classl name href aspan classcspan a classl name href a a classhl name href aspan classcspan a classl name href aspan classc Copyright c Chris Fraire ltcfrairemecom gtspan a classl name href aspan classcspan a classl name href a a classl name href abwithb bAdabbTextIOb buseb bAdabbTextIOb a classl name href abprocedureb a hrefsourcesdefsHello classintelliWindowsymbol datadefinitionplaceundefinedinfileHelloa bisb a classl name href abbeginb a classl name href a bPutLinebspan classs quotHello world quotspan a classl name href a bPutLinebspan classs quot quot quotspan a classl name href aspan classs Hello quot quot quotspan a classhl name href a bPutLinebspan classs apos aposspan a classl name href a bPutLinebspan classs aposspan a classl name href aspan classs aposspan a classl name href a bPutbspan classn span a classl name href a bPutbspan classn span a classl name href a bPutbspan classn span a classl name href a bPutbspan classn span a classl name href a bPutbspan classn span a classl name href a bPutbspan classn EE span a classl name href a bPutbspan classn FFFE span a classhl name href a bPutLineb a classl name href a bPutLinebspan classs quotArchimedes said quot quot quot quot quotspan a classl name href abendb a hrefsourcesdefsHello classintelliWindowsymbol datadefinitionplaceundefinedinfileHelloa a classl name href a a classl name href aspan classc Test a URL that is not matched fully by a rule using just URIChar andspan a classl name href aspan classc FnameCharspan DOCTYPE html html langen head meta charsetUTF titlesampleFile OpenGrok cross reference for sampleFiletitleheadbody a classl name href aspan classcspan a classl name href aspan classc CDDL HEADER STARTspan a classl name href aspan classcspan a classl name href aspan classc The contents of this file are subject to the terms of thespan a classl name href aspan classc Common Development and Distribution License the quotLicense quotspan a classl name href aspan classc You may not use this file except in compliance with the Licensespan a classl name href aspan classcspan a classl name href aspan classc See LICENSEtxt included in this distribution for the specificspan a classl name href aspan classc language governing permissions and limitations under the Licensespan a classhl name href aspan classcspan a classl name href aspan classc When distributing Covered Code include this CDDL HEADER in eachspan a classl name href aspan classc file and include the License file at LICENSEtxtspan a classl name href aspan classc If applicable add the following below this CDDL HEADER with thespan a classl name href aspan classc fields enclosed by brackets quot quot replaced with your own identifyingspan a classl name href aspan classc information Portions Copyright yyyy name of copyright owner span a classl name href aspan classcspan a classl name href aspan classc CDDL HEADER ENDspan a classl name href aspan classcspan a classl name href a a classhl name href aspan classcspan a classl name href aspan classc Copyright c Chris Fraire ltcfrairemecom gtspan a classl name href aspan classcspan a classl name href a a classl name href abwithb bAdabbTextIOb buseb bAdabbTextIOb a classl name href abprocedureb a hrefsourcesdefsHello classintelliWindowsymbol datadefinitionplaceundefinedinfileHelloa bisb a classl name href abbeginb a classl name href a bPutLinebspan classs quotHello world quotspan a classl name href a bPutLinebspan classs quot quot quotspan a classl name href aspan classs Hello quot quot quotspan a classhl name href a bPutLinebspan classs apos aposspan a classl name href a bPutLineb apos a classl name href a apos a classl name href a bPutbspan classn span a classl name href a bPutbspan classn span a classl name href a bPutbspan classn span a classl name href a bPutbspan classn span a classl name href a bPutbspan classn span a classl name href a bPutbspan classn EE span a classl name href a bPutbspan classn FFFE span a classhl name href a bPutLineb a classl name href a bPutLinebspan classs quotArchimedes said quot quot quot quot quotspan a classl name href abendb a hrefsourcesdefsHello classintelliWindowsymbol datadefinitionplaceundefinedinfileHelloa a classl name href a a classl name href aspan classc Test a URL that is not matched fully by a rule using just URIChar andspan a classl name href aspan classc FnameCharspan ERROR Tests run Failures Errors Skipped Time elapsed s FAILURE in orgopengrokindexeranalysisadaAdaXrefTest ERROR sampleTest Time elapsed s FAILURE javalangAssertionError orgopengrokindexeranalysisadaAdaAnalyzerFactory xrefshould have no diffs at orgjunitAssertfailAssertjava at orgjunitAssertassertTrueAssertjava at orgopengrokindexerutilCustomAssertionsassertLinesEqualCustomAssertionsjava at orgopengrokindexeranalysisXrefTestBasewriteAndCompareXrefTestBasejava at orgopengrokindexeranalysisXrefTestBasewriteAndCompareXrefTestBasejava at orgopengrokindexeranalysisadaAdaXrefTestsampleTestAdaXrefTestjava which is caused by extra newline the generated HTML file has extra new line for each line This does not happen in AppVeyor builds so it is likely tied to the Travis env perhaps GitBash plays a role there The testbinariestestversions tests fail when run in Windows Travis environment Initially the command return value was None instead of When I tried to follow the advice on and set env passed to Popen in Command to environcopy Maven sets the environment to parent environment with the virtual environment binary path and shellTrue the return value changed to and the error output contained eg opengrokprojadm is not recognized as an internal or external command operable program or batch file so there is still something wrong I verified that the PATH environment variable contains the Python directory this is often the cure suggested for such problems Describe the bug When trying to get Python tests pass in Travis Windows environment testxmlinsert was failing with def testxmlinsert with openospathjoinDIRPATH webxml as basexml out insertfilebasexmlread ospathjoinDIRPATH insertxml with openospathjoinDIRPATH newxml as expectedxml assert out expectedxmlread E assert xml version nwebapp xml version nwebapp E xml version encodingutf E webapp xmlns xmlnsxsi xsischemaLocation version E E webapp xmlns xmlnsxsi version xsischemaLocation E E Clearly the failure happens because some of the attributes version were reordered in the output To Reproduce run the test in Travis Windows environment Expected behavior the test should be robust Additional context The test should compare XML trees ala Is your feature request related to a problem Please describe I want to add code snippet in Wiki and Confluence page but it always add a whole file like url is the output only include lines from to No other things no head Describe the solution youd like add a function snippet Describe alternatives youve considered Additional context Used in the other tools or use in Html file for example in iFrame History content of subdirectories git repos of a repoRepo Project is empty Tested with both opengrok and OS Ubuntu tomcat java openjdkamd git version Reference fix for bug in Though the history cache is now getting created for the repoRepository the sub directories which are git repositories are getting empty History content I have a repoRepository project with below directory structure SRCROOTproject SRCROOTprojectfolder SRCROOTprojectfolder git SRCROOTprojectfolder folder folder git SRCROOTprojectfolder folder folder git SRCROOTprojectfolder folder folder git SRCROOTprojectrepo When I browse to folder I see History content correctly but when i click on History link on folder folder folder it shows empty tables Added the option depth as well but no luck Kindly suggest if there are additional options for nested repositories Indexer command used opengrokindexer JDjavautilloggingconfigfileopengrok etcloggingproperties a opengrok distlibopengrokjar c usrlocalbinctags s opengrok src d opengrok data H P S G W opengrok etcconfigurationxml U depth 