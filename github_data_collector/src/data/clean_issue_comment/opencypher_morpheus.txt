Hi Not sure if correct place to ask so feel free to move Is there any material on installing morpheus in an offline environment I can build and install at home locally but currently tasked with setting up a POC in enterprise environment with locked down machines to internet Many Thanks Hi there Im trying to run this query from teh LDBC SNB BI query workloads in Morpheus but it gives me the following error MATCH messageMessage WHERE messagecreationDate WITH countmessage AS totalMessageCountInt WITH toFloattotalMessageCountInt AS totalMessageCount MATCH messageMessage WHERE messagecreationDate AND messagecontent IS NOT NULL WITH totalMessageCount message messagecreationDate AS year WITH totalMessageCount year messageComment AS isComment CASE WHEN messagelength THEN WHEN messagelength THEN WHEN messagelength THEN ELSE END AS lengthCategory countmessage AS messageCount flooravgmessagelength AS averageMessageLength summessagelength AS sumMessageLength RETURN year isComment lengthCategory messageCount averageMessageLength sumMessageLength messageCount totalMessageCount AS percentageOfMessages ORDER BY year DESC isComment ASC lengthCategory ASC ERROR taskresultgetter schedulerTaskSetManager LoggingscalalogError Task in stage failed times aborting job Exception in thread main orgapachesparkSparkException Job aborted due to stage failure Task in stage failed times most recent failure Lost task in stage TID executor javalangClassCastException cannot assign instance of javalanginvokeSerializedLambda to field orgapachesparkrddMapPartitionsRDDf of type scalaFunction in instance of orgapachesparkrddMapPartitionsRDD How does Morpheus stores the graph on HDFS does it layout the same way as neo j would on disk I am just trying to figure out how to store and retrieve a graph from HDFS Im trying to run the one of the examples inside morpheus on a spark cluster I have edited the creation of the morpheus session using the following lines of code val conf new SparkConftrue confsetsparksqlcodegenwholeStage true confsetsparksqlshufflepartitions confsetsparkdefaultparallelism val spark SparkSession builder configconf masterspark appNamesmorpheuslocalUUIDrandomUUID enableHiveSupport getOrCreate sparksparkContextsetLogLevelerror implicit val morpheus MorpheusSession MorpheusSessioncreatespark import sparksqlContextimplicits val nodesDF sparkcreateDatasetSeq L Alice L L Bob L L Eve L toDFid name age val relsDF sparkcreateDatasetSeq L L L L L L toDFid source target since val personTable MorpheusNodeTableSetPerson nodesDF val friendsTable MorpheusRelationshipTableKNOWS relsDF val graph morpheusreadFrompersonTable friendsTable val result graphcypherMATCH nPerson RETURN nname resultshow just by editing the sparksession with the master URL spark rather than local I have a problem while running the gradlew run example gradlew morpheusexamplesrunApp PmainClassorgopencyphermorpheusexamplesDataFrameInputExample while debugging The problem stated is with the resultshow line Caused by javalangNoSuchMethodError scalaPredefrefArrayOps LjavalangObjectLscalacollectionmutableArrayOps at orgopencypherokapitreesAbstractTreeNodeinitAbstractTreeNodescala at orgopencypherokapiirapiexprExprinitExprscala more But while I change the example to be with local it runs correctly and no problems arise When I searched It seems the problem is with the Scala version although I have the following on my cluster of machines OS Centos Spark version Scala Version and I have put the required morpheus jars in the Spark class path sparkjars directory on all the cluster machines Master and Workers such as morpheussparkcypher SNAPSHOTjar okapiapi SNAPSHOTjar okapirelational SNAPSHOTjar Please help me figuring out the problem because I take a lot of time trying to solve this issue Thanks in advance for your help and support I have the following on my cluster of machines OS Centos Spark version Scala Version I have run the gradlew allJar x test in the root directory of the Morpheus project with the following error Task allJar not found in root project okapi Some candidates are docJar jar jmhJar So I had to run it with jar option and got jar file for all modules inside the buildlibs directory I want to submit spark job of one of the examples inside the generated morpheusexamplesbuildlibsmorpheusexamples SNAPSHOTjar I have put the required jars in the Spark class path sparkjars directory such as morpheussparkcypher SNAPSHOTjar okapiapi SNAPSHOTjar okapirelational SNAPSHOTjar but when I submitted the job like this sparkbinsparksubmit class orgopencyphermorpheusexamplesCaseClassExample master local morpheusexamplesbuildlibsmorpheusexamples SNAPSHOTjar I always face this error Exception in thread main javalangNoSuchMethodError scalaAppinitLscalaAppV at orgopencyphermorpheusutilAppinitAppscala This problem I think because the Scala Version and Spark Version comparability but I installed every thing like the versions inside the gradle parameters as stated in the beginning thanks in advance for your help The deleteGraph method doesnt take into account created constraints on the metaLabel Problem is that DETACH DELETE doesnt remove associated constraints and indexes That causes an error when a PropertyGraph with the same name is deleted and written back again See the following example scala val neo jSource GraphSourcescypherneo jneo jConfig val name GraphNamearbitraryGraph neo jSourcestorename graph neo jSourcedeletename neo jSourcestorename graph That causes the following exception scala Exception in thread main orgopencypherokapiimplexceptionGraphAlreadyExistsException A graph with name arbitraryGraph is already stored in this graph data source Moreover it doesnt allow write a PropertyGraph with entireGraphName which makes no sense to me What if I would like just store everything to the database and never restore that PropertyGraph so metaLabel and related properties ie morpheusID are not desired to be saved because I have other data sources and graph database is the destination of the processed data Is there any plan to support userdefined procedures and the CALL interface I am unable to read any data from Neo j using this library and a custom schema Here is how I am setting up the connection object ExtractUsernames extends MorpheusApp val neo j connectNeo jboltxxxxxxxx neo j xxxxxxxxx implicit val morpheus MorpheusSession MorpheusSessionlocal val schemaFile SourcefromFilegetClassgetResourceschemajsongetPathgetLinesmkString val schema PropertyGraphSchemafromJsonschemaFile private val datasource GraphSourcescypherneo jneo jconfig Someschema morpheusregisterSourceNamespaceNeo j datasource And this is what our schemajson looks like version labelPropertyMap labels User properties username STRING relTypePropertyMap This is the query I am trying to run val result morpheuscypher s FROM Neo jgraph MATCH iUser RETURN iusername stripMargin resultshow However when I run the query I get an empty table iusername no rows I have verified that x The schema file can be read x Neo j is accessible and the port is open to the machine running this code x There is a graph called Neo jgraph available in morpheuscataloggraphNames x The same error is present in atleast versions of Neo j and Morpheus version Spark version Neo j version and Does anyone have any idea as to what is going on 