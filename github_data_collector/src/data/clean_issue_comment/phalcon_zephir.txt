On the latest Phalcon we have a few compile warnings One is already logged But we also have the following warnings privatetmppeartempphalconphalconzepc warning format specifies type long but the argument has type zendulong aka unsigned long long Wformat zenderrorENOTICE Undefined index ld in s on line d uidx file line llu privatetmppeartempphalconphalconzepc warning incompatible pointer types passing zendulong aka unsigned long long to parameter of type unsigned long Wincompatiblepointertypes replace phalconreplacemarker paths replacements position cursor marker privatetmppeartempphalconphalconzepc note passing argument to parameter position here zval phalconreplacemarkerint named zval paths zval replacements unsigned long position char cursor char marker privatetmppeartempphalconphalconzepc warning incompatible pointer types passing zendulong aka unsigned long long to parameter of type unsigned long Wincompatiblepointertypes replace phalconreplacemarker paths replacements position cursor marker privatetmppeartempphalconphalconzepc note passing argument to parameter position here zval phalconreplacemarkerint named zval paths zval replacements unsigned long position char cursor char marker privatetmppeartempphalconphalconzepc warning incompatible pointer types passing zendulong aka unsigned long long to parameter of type unsigned long Wincompatiblepointertypes replace phalconreplacemarker paths replacements position cursor marker privatetmppeartempphalconphalconzepc note passing argument to parameter position here zval phalconreplacemarkerint named zval paths zval replacements unsigned long position char cursor char marker Hi Im in the process of porting my colour logger to a php extension Zephir snippet Loggerzep namespace Terah Logger class Logger public static function toRedstring strText string return e m strText e m PHP Snippet testphp php use Terah Logger Logger class TestLogger extends Logger public static function toRedstring strText string return e m strText e m public static function fixToRedstring strText data parenttoRedstrText return strreplace e e data echo LoggertoRedLoggertoRed with a or PHPEOL echo TestLoggertoRedTestLoggertoRed with a or PHPEOL echo TestLoggertoRedTestLoggerfixToRed with a or PHPEOL Output root b df de easrcsrcterahterahrootcomposervendorbinzephir version Zephir by Andres Gutierrez and Serghei Iakovlev source root b df de easrcsrcterahterah php v PHP cli built Jul NTS Copyright c The PHP Group Zend Engine v Copyright c Zend Technologies with Xdebug v Copyright c by Derick Rethans root b df de easrcsrcterahterah php testphp e mLoggertoRed with a or e m TestLoggertoRed with a or this is red TestLoggerfixToRed with a or this is red Id expect zephir to behave the same as PHP where it doesnt echo the extra backslashes Hi I wrote this method which works correctly public function getWordsarray strings array var pdo thispdo var words arraymapfunctiona use pdo let a pregreplace jmstlqucdn i e a return pdoquotetrimmbstrtolowera strings return words But I get this warning when compiling Warning Variable pdo assigned but not used in Nlp Dictionary DictionarygetWords in C var www html phpext nlp nlp Dictionary dictionaryzep on line unusedvariable var pdo thispdo How to avoid it as you can see the variable pdo is used in the use language construct functiona use pdo Thanks for your help It would be great if we can get support for variadic functions using the operator same as in PHP instead of relying on funcgetargs This will greatly help when calling methods that accept different number of parameters see PDOquery for instance From the PHP manual example php function freq opt null params params is an array containing the remaining arguments printfreq d opt d number of params d n req opt countparams f f f f f Greetings PhalconZephir team The multiply divide add subtract greater greater equal less and less equal tests starting here fail when the Tensor extension is compiled with internalcalltransformation true They do not fail when the extension is compiled without the optimization It looks like whats happening is that the nonstatic child methods on ColumnVector that overload the parents Vector methods are not being called Instead the parent method is being called with the same method signature This explains why the result is erroneous for multiplication addition etc with a column vector ie test fail but is correct for a row vector out In BitwiseBaseOperatorphp line ErrorException A non well formed numeric value encountered php return new CompiledExpressionint expression left value expression right value expression hexdecexpression left value xffffffff Zephir zephir public static function pack value var highmap let highmap xffffffff error return highmap ERROR Syntax error in xxxtesttestdebugzep on line zephir namespace Test class Debug public static function decodesb var lenibinary let len strlenb for i in range len error return binary In int Type error c define zephirgetnumbervalz ZTYPEPz ISLONG ZLVALPz zephirgetdoublevalz zval tmp op op ZVALLONG op ZVALLONG op ZVALLONG tmp ZLVALop zephirgetnumberval op zendprintf n valuelld n ZLVALtmp this error value ZVALLONG tmp ZLVALop zendlongzephirgetnumberval op zendprintf n valuelld n ZLVALtmp this right ZVALLONG tmp ZLVALop ZLVALP op zendprintf n valuelld n ZLVALtmp this right value Bracket priority error zephir var hmac offset let offset let code hmac offset x F hmac offset xFF hmac offset xFF hmac offset xFF code c ZVALLONG code zendlong zephirgetnumberval x F zendlong zephirgetnumberval xFF zendlong zephirgetnumberval xFF zendlong zephirgetnumberval xFF this error must change to that ZVALLONG code zephirgetnumberval x F zephirgetnumberval xFF zephirgetnumberval xFF zephirgetnumberval xFF right sergeyklay Example zephir public static function decodesb var b let b strtoupperb return strlenb generate error code c PHPMETHODMytestDebug decodes zephirmethodglobals ZEPHIRMETHODGLOBALSPTR NULL zval b b sub zval thisptr getThis ZVALUNDEF b ZVALUNDEF b sub ZVALUNDEF ZEPHIRMMGROW zephirfetchparams b ZEPHIRSEPARATEPARAMb ZEPHIRINITVAR zephirfaststrtoupper b ZEPHIRCPYWRT b RETURNMMLONGzephirfaststrlenev b Use development I tried a slightly customized version of EagerLoading from the incubator with the current Phalcon x branch Everything works very well but in some cases I got SEGFAULT errors I noticed that there are strange null lines before passing the actual values in some cases I thought that this must have been done like this to avoid bugs in the earlier versions but in the end I had to add another of this null to avoid the SEGFAULT error php if isSingle recordalias null I had to add this line recordalias emptyrecords null records The SEGFAULT happens here else if emptyrecords recordalias null This was already here recordalias else recordalias records if staticisPhalcon recordalias null This was already here also recordalias records This is the backtrace I got Before the error occurs these are the values alias language records new Languages extends Mvc Model I actually changed records to new Languages and the error remains I tried removing everything from the initialization of that model didnt help But if I change new Languages to any other model it works well zendmmallocsmall binnum size heap x fad a at Zendzendallocc emalloc at Zendzendallocc x f e in zendarraydup source x fad b e f at Zendzendhashc x fad eec a in zephirupdatepropertyzval object x fff b propertyname x fad d a related propertylength value x fff at cphalconextkernelobjectc x fad f fe b in zephirinitpropertiesPhalconMvcModel classtype x fad fa at cphalconextphalconmvcmodelzepc x f ebdb in objectandpropertiesinit argargentry x fad a classtypeclasstypeentry x fad fa propertiespropertiesentry x at ZendzendAPIc x f ecd in objectinitex argargentry x fad a classtypeclasstypeentry x fad fa at ZendzendAPIc x f c in ZENDNEWSPECCONSTUNUSEDHANDLER at Zendzendvmexecuteh x f e in executeex ex x fad a at Zendzendvmexecuteh x f ff e in zendcallfunction fci x fff b fcicacheoptimized out at ZendzendexecuteAPIc x fad eedbc in zephircalluserfunction objectpp x fff b objce x fad b d typezephirfcallmethod functionname x fff e retvalptr x fff cacheentry x cacheslot paramcount params x fff f at cphalconextkernelfcallc x fad eedc fe in zephircallclassmethodaparams returnvalue x fff ce x fad b d typezephirfcallmethod object x fff b methodname x fad a fa b afterexecuteroute methodlen cacheentry x cacheslot paramcount params x fff f at cphalconextkernelfcallc x fad f cc in zimPhalconEventsManagerfireQueue executedata x fad a returnvalue x fff ac at cphalconextphalconeventsmanagerzepc x f ff ad in zendcallfunction fci x fff c fcicacheoptimized out at ZendzendexecuteAPIc x fad eedbc in zephircalluserfunction objectpp x fad a d objce x fad a e typezephirfcallmethod functionname x fff retvalptr x fff ac cacheentry x fff cacheslot paramcount params x fff b at cphalconextkernelfcallc x fad eedc fe in zephircallclassmethodaparams returnvalue x fff ac ce x fad a e typezephirfcallmethod object x fad a d methodname x fad c firequeue methodlen cacheentry x cacheslot paramcount params x fff b at cphalconextkernelfcallc x fad f cab in zimPhalconEventsManagerfire executedata x fad a b returnvalue x fad a at cphalconextphalconeventsmanagerzepc x f bc e in ZENDDOFCALLSPECRETVALUSEDHANDLER at Zendzendvmexecuteh executeex ex x fad a at Zendzendvmexecuteh x f ff e in zendcallfunction fci x fff ed fcicacheoptimized out at ZendzendexecuteAPIc x fad eedbc in zephircalluserfunction objectpp x fff b objce x fad a e typezephirfcallmethod functionname x fff retvalptr x fff ff cacheentry x fff da cacheslot paramcount params x fff at cphalconextkernelfcallc x fad eedc fe in zephircallclassmethodaparams returnvalue x fff ff ce x fad a e typezephirfcallmethod object x fff b methodname x fad fc bd fire methodlen cacheentry x fff a cacheslot paramcount params x fff at cphalconextkernelfcallc x fad f d b in zimPhalconDispatcherAbstractDispatcherdispatch executedata x fad a returnvalue x fff a at cphalconextphalcondispatcherabstractdispatcherzepc x f ff ad in zendcallfunction fci x fff d fcicacheoptimized out at ZendzendexecuteAPIc x fad eedbc in zephircalluserfunction objectpp x fff objce x fad b d typezephirfcallmethod functionname x fff retvalptr x fff a cacheentry x cacheslot paramcount params x fff d at cphalconextkernelfcallc x fad eedc fe in zephircallclassmethodaparams returnvalue x fff a ce x fad b d typezephirfcallmethod object x fff methodname x fad ccb bf dispatch methodlen cacheentry x cacheslot paramcount params x fff d at cphalconextkernelfcallc x fad f c f in zimPhalconMvcApplicationhandle executedata x fad a returnvalue x fad a at cphalconextphalconmvcapplicationzepc x f bc e in ZENDDOFCALLSPECRETVALUSEDHANDLER at Zendzendvmexecuteh executeex ex x fad a at Zendzendvmexecuteh x f c f in zendexecute oparrayoparrayentry x fad a returnvalue x returnvalueentry x fad a e at Zendzendvmexecuteh x f d in zendexecutescripts typetypeentry retval x fad a e retvalentry x filecount filecountentry at Zendzendc x f ad c in phpexecutescript primaryfile x fff b at mainmainc x f b in main argcoptimized out argvoptimized out at sapifpmfpmfpmmainc If this doesnt help Ill try to reproduce this issue in a clean example but it seems like a pretty time consuming task to do so PHP ubuntu Phalcon current x branch Zephir 