Environment name version IDEA version EmmyLua version IDEA OS Ubuntu What are the steps to reproduce this issue Using LuaJ library to coerce java object to lua variable at top of file local LuaSupport luajavanewInstancecomgithubdoomsdayrsapishosetsuservicescoreobjectsLuaSupport Following line of code returning value return LuaSupportgetGAL All inspections are enabled What happens Unknown function getGAL error via yellow highlight of function What were you expecting to happen Plugin to read javakotlin code and get documentation and methods Providing them when typing Also allowing return types to be of java standard Any logs error output etc log error Script runs fine No issues Any other comments This mostly is an enhancement request Would help speed up coding Can be extended to other languages that can work together with lua Environment name version IDEA version Rider EmmyLua version v OS Windows Rider require Environment name EmmyLua version IDEA IDEA version idea eg IC EAP CL EmmyLua version IDEA eg v OS windows eg OSX Windows What are the steps to reproduce this issue What happens exception in plugin emmylua What were you expecting to happen Normal operation without error reporting Any logs error output etc log error comintellijopenapiutilStackOverflowPreventedException Endless recursion prevented at comintellijpsiimplsourcetreeFileElementgetStubbedSpineFileElementjava at comintellijpsiimplsourceFileTreesreconcilePsiFileTreesjava at comintellijpsiimplsourceFileTreeswithAstFileTreesjava at comintellijpsiimplsourcePsiFileImplloadTreeElementPsiFileImpljava at comintellijpsiimplsourcePsiFileImplcalcTreeElementPsiFileImpljava at comintellijpsiimplsourcePsiFileImplgetNodePsiFileImpljava at comintellijpsiimplsourcePsiFileImplacceptChildrenPsiFileImpljava at comtangintellijluapsiLuaRecursiveVisitorvisitElementLuaRecursiveVisitorkt at comtangintellijluapsiLuaDeclarationTreeBasevisitElementExtLuaDeclarationTreekt at comtangintellijluapsiLuaDeclarationTreeBasevisitElementLuaDeclarationTreekt at comintellijpsiPsiElementVisitorvisitFilePsiElementVisitorjava at comintellijextapipsiPsiFileBaseacceptPsiFileBasejava at comtangintellijluapsiLuaDeclarationTreeBasebuildTreeLuaDeclarationTreekt at comtangintellijluapsiLuaDeclarationTreeCompaniongetLuaDeclarationTreekt at comtangintellijluapsiLuaPsiResolveUtilKtresolveInFileLuaPsiResolveUtilkt at comtangintellijluapsiLuaPsiResolveUtilKtresolveLocalLuaPsiResolveUtilkt at comtangintellijluapsiLuaPsiResolveUtilKtresolveLocaldefaultLuaPsiResolveUtilkt at comtangintellijluapsiPsiExtensionKtforwardDeclaration computePsiExtensionkt at comintellijpsiutilCachedValuesManagerlambdagetCachedValue CachedValuesManagerjava at comintellijpsiimplPsiCachedValueImpldoComputePsiCachedValueImpljava at comintellijutilCachedValueBaselambdagetValueWithLock CachedValueBasejava at comintellijopenapiutilRecursionManager doPreventingRecursionRecursionManagerjava at comintellijopenapiutilRecursionManagerdoPreventingRecursionRecursionManagerjava at comintellijutilCachedValueBasegetValueWithLockCachedValueBasejava at comintellijpsiimplPsiCachedValueImplgetValuePsiCachedValueImpljava at comintellijutilCachedValuesManagerImplgetCachedValueCachedValuesManagerImpljava at comintellijpsiutilCachedValuesManagergetCachedValueCachedValuesManagerjava at comtangintellijluapsiPsiExtensionKtgetForwardDeclarationPsiExtensionkt at comtangintellijluastubsLuaFuncTypeshouldCreateStubLuaFuncStubkt at comintellijpsiimplsourcetreeFileElement visitCompositeFileElementjava at comintellijpsiimplsourcetreeCompositeElementacceptTreeCompositeElementjava at comintellijpsiimplsourcetreeRecursiveTreeElementWalkingVisitor visitRecursiveTreeElementWalkingVisitorjava at comintellijpsiimplsourcetreeRecursiveTreeElementWalkingVisitor visitRecursiveTreeElementWalkingVisitorjava at comintellijutilWalkingStatewalkChildrenWalkingStatejava at comintellijutilWalkingStateelementStartedWalkingStatejava at comintellijpsiimplsourcetreeRecursiveTreeElementWalkingVisitorvisitNodeRecursiveTreeElementWalkingVisitorjava at comintellijpsiimplsourcetreeFileElement visitCompositeFileElementjava at comintellijpsiimplsourcetreeCompositeElementacceptTreeCompositeElementjava at comintellijpsiimplsourcetreeFileElementcalcStubbedDescendantsFileElementjava at comintellijpsiimplsourcetreeFileElementlambdagetStubbedSpine FileElementjava at comintellijopenapiutilRecursionManager doPreventingRecursionRecursionManagerjava at comintellijopenapiutilRecursionManagerdoPreventingRecursionRecursionManagerjava at comintellijpsiimplsourcetreeFileElementgetStubbedSpineFileElementjava at comintellijpsiimplsourceFileTreesreconcilePsiFileTreesjava at comintellijpsiimplsourceFileTreeswithAstFileTreesjava at comintellijpsiimplsourcePsiFileImplloadTreeElementPsiFileImpljava at comintellijpsiimplsourcePsiFileImplcalcTreeElementPsiFileImpljava at comintellijpsiimplsourcePsiFileImplgetNodePsiFileImpljava at comintellijpsiimplsourcePsiFileImplgetFirstChildPsiFileImpljava at comintellijpsiSyntaxTraverserPsiApifirstSyntaxTraverserjava at comintellijpsiSyntaxTraverserPsiApifirstSyntaxTraverserjava at comintellijpsiSyntaxTraverserApiExchildrenSyntaxTraverserjava at comintellijpsiSyntaxTraverserApifunSyntaxTraverserjava at comintellijpsiSyntaxTraverserApifunSyntaxTraverserjava at comintellijutilcontainersFilteredTraverserBaseMetachildrenImplFilteredTraverserBasejava at comintellijutilcontainersFilteredTraverserBaseMetachildrenFilteredTraverserBasejava at comintellijutilcontainersFilteredTraverserBasechildrenFilteredTraverserBasejava at comintellijutilcontainersTreeTraversalPiterableTreeTraversaljava at comintellijutilcontainersTreeTraversalPiteratorTreeTraversaljava at comintellijutilcontainersTreeTraversalBiOrderItnextImplTreeTraversaljava at comintellijutilcontainersJBIteratorpeekNextJBIteratorjava at comintellijutilcontainersJBIteratorhasNextJBIteratorjava at javabasejavalangIterableforEachIterablejava at comintellijcodeInsighthintsParameterHintsPassdoCollectInformationParameterHintsPassjava at comintellijcodeHighlightingTextEditorHighlightingPasscollectInformationTextEditorHighlightingPassjava at comintellijcodeInsightdaemonimplPassExecutorServiceScheduledPasslambdanull PassExecutorServicejava at comintellijopenapiapplicationimplApplicationImpltryRunReadActionApplicationImpljava at comintellijcodeInsightdaemonimplPassExecutorServiceScheduledPasslambdadoRun PassExecutorServicejava at comintellijopenapiprogressimplCoreProgressManagerregisterIndicatorAndRunCoreProgressManagerjava at comintellijopenapiprogressimplCoreProgressManagerexecuteProcessUnderProgressCoreProgressManagerjava at comintellijopenapiprogressimplProgressManagerImplexecuteProcessUnderProgressProgressManagerImpljava at comintellijcodeInsightdaemonimplPassExecutorServiceScheduledPassdoRunPassExecutorServicejava at comintellijcodeInsightdaemonimplPassExecutorServiceScheduledPasslambdarun PassExecutorServicejava at comintellijopenapiapplicationimplReadMostlyRWLockexecuteByImpatientReaderReadMostlyRWLockjava at comintellijopenapiapplicationimplApplicationImplexecuteByImpatientReaderApplicationImpljava at comintellijcodeInsightdaemonimplPassExecutorServiceScheduledPassrunPassExecutorServicejava at comintellijconcurrencyJobLauncherImplVoidForkJoinTask execJobLauncherImpljava at javabasejavautilconcurrentForkJoinTaskdoExecForkJoinTaskjava at javabasejavautilconcurrentForkJoinPoolWorkQueuetopLevelExecForkJoinPooljava at javabasejavautilconcurrentForkJoinPoolscanForkJoinPooljava at javabasejavautilconcurrentForkJoinPoolrunWorkerForkJoinPooljava at javabasejavautilconcurrentForkJoinWorkerThreadrunForkJoinWorkerThreadjava If it s long please paste to and insert the link here Any other comments That should work if you implement comintellijpsiLiteralTextEscapergetRelevantTextRange to return everything without quotes Now attempt to inject language inside literal fails with info about mismatched text DROP SCHEMA s CASCADE PSI DROP SCHEMA s CASCA chars DROP SCHEMA s CASCADE Environment name version IDEA version latest EmmyLua version latest official release also tried on latest appveyor artifact OS Linux Ubuntu Same plugin configuration on both Clion and Intellij The additional sources root are also configured the same way on both Issue On Clion bad On Intellij OK Environment name version IDEA version IU EmmyLua version IDEA OS Ubuntu Any other comments It would be great to have the runIde target available so it is possible to run the Plugin directly into an IDE And also a debugger than can be attached to the IDE This would help me alot in understanding this plugin and making changes Environment name version IDEA version IU EmmyLua version IDEA OS Ubuntu What are the steps to reproduce this issue create two LUA files testlua funclua write a function into funclua function test printtest end Then open the testlua file and notice that the function test is being autocompleted What were you expecting to happen The autocompletion for the function test should only be shown when the file where the function is is required requirefunclua That is also how Lua works when executing files It will only now about files that are included in the file Support for type casting and blockstyle doc quotes The combination of which facilitates code like lua param returnString boolean return stringnumber function stringOrNumberreturnString return returnString and someString or end param n number function wantsNumbern end wantsNumberstringOrNumberfalse Raises type error or at least it should Fix in wantsNumber type number stringOrNumberfalse wantsNumber type number Single line doc comments work too stringOrNumberfalse String literals are now a real typechecked type String literals are assignable to strings but not vice versa Name definitions are assumed to be primitive strings unless explicitly typed as a string primitive ie the following is valid lua local mutateMe hi mutateMe hi there To type pseudoconstants you can do lua type hi local SOMECONSTANT hi SOMECONSTANT something else Raises a type assignment error Functions that have explicit string literals or unions thereof now enforce these eg lua param axis xyz local function takesLiteralsaxis end takesLiteralsx takesLiteralsy takesLiteralsz takesLiteralsq Raises error local nonLiteralString x takesLiteralsnonLiteralString Raises error type x local literalString x takesLiteralsliteralString Included in this PR is a fix for union subtype detection It was incorrectly detecting stringnumber as a subtype of number where as that is clearly unsound as string is not a subtype of number etc Environment name version IDEA IDEA version eg IC IC IC EmmyLua version eg v OS eg Windows What are the steps to reproduce this issue Attach to Process Unity D What happens logdebugger F Failed to load library F Start inject dll What were you expecting to happen debugger Any logs error output etc log error If it s long please paste to and insert the link here Any other comments debugger IntelliJEmmyLua IDEA 