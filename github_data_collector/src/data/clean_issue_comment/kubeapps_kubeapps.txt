 Before you open the request please review the following guidelines and tips to help it be more easily integrated Describe the scope of your change ie what the change does Describe any known limitations with your change Please run any tests or examples that can exercise your modified code Thank you for contributing Description of the change When adding the atomic flag I only checked wrong builds so it worked as expected but it seems that when the build should be successful the connection just hangs I have opened an issue in Helm link in the code but in the meantime I am disabling the feature Before you open the request please review the following guidelines and tips to help it be more easily integrated Describe the scope of your change ie what the change does Describe any known limitations with your change Please run any tests or examples that can exercise your modified code Thank you for contributing Description of the change After I introduced a regression When upgrading if the repository can be autoresolved the properties of AppUpgrade are not being updated and the condition I introduced was always true causing an infinity loop Description When I go to app click on upgrade I get Sorry Something went wrong Steps to reproduce the issue select namespace with dropdown click applications tab click upgrade it fails Describe the results you received See log in bottom Describe the results you expected Should be able to upgrade app Additional information you deem important eg issue happens only occasionally Error happens consistently Version of Helm Kubeapps and Kubernetes Output of helm version Client versionVersionSemVerv GitCommiteecf f df f c aacd dbd ae c f e GitTreeStateclean Server versionVersionSemVerv icp GitCommit GitTreeState Output of helm list kubeappsreleasename kubeapps Fri Dec DEPLOYED kubeapps v kubeapps Output of kubectl version Client Version versionInfoMajor Minor GitVersionv GitCommitd cd baca b e d ed d GitTreeStateclean BuildDate T Z GoVersiongo Compilergc Platformdarwinamd Server Version versionInfoMajor Minor GitVersionv icpee GitCommitfccfecc d ce d d d d bf GitTreeStateclean BuildDate T Z GoVersiongo Compilergc Platformlinuxamd Browserlog reactdomproductionminjs YAMLSemanticError Map keys must be unique name is repeated at Objecttdefault as resolve at evalue at evalue at tvalue at at Objecttdefault as resolve at evalue at evalue at tvalue at at Objecttdefault as resolve at evalue at evalue at tvalue at at ArrayforEach anonymous at tvalue at tvalue at m at Objectparse at tcomponentDidUpdate at at tunstablerunWithPriority at Vi at Tu at gu at at tunstablerunWithPriority at Vi at Yi at Gi at du at ObjectenqueueSetState at uwsetState at ulonStateChange at Objectnotify at etnotifyNestedSubs at ulonStateChange at Objectnotify at etnotifyNestedSubs at ulonStateChange at Objectnotify at etnotifyNestedSubs at ulonStateChange at Objectnotify at etnotifyNestedSubs at ulonStateChange at v at at at dispatch at Objectanonymous at at Objectnext at a ds reactdomproductionminjs Before you open the request please review the following guidelines and tips to help it be more easily integrated Describe the scope of your change ie what the change does Describe any known limitations with your change Please run any tests or examples that can exercise your modified code Thank you for contributing Description of the change Follow up of Remove the ChartVersion list from the requests chartsrepochartNameversions and chartsrepochartNameversionsversion as the chartsvc does This reduces the sice of the requests from several MBs to less than KB Description Make it optional but default on to install the CRDs when doing helm install The reason for this is to be able to do two kubeapps installs one for testing and proper Steps to reproduce the issue install kubeapps proper install into ns install kubeapps test install into ns disable crd installs Describe the results you received Be able to run two kubeapps installs Describe the results you expected Additional information you deem important eg issue happens only occasionally Any additional information configuration or data that might be necessary to reproduce the issue Version of Helm Kubeapps and Kubernetes Output of helm version paste your output here Output of helm list kubeappsreleasename paste your output here Output of kubectl version paste your output here If you are reporting a new issue make sure that we do not have any duplicates already open You can ensure this by searching the issue list for this repository If there is a duplicate please close your issue and add a comment to the existing issue instead If you suspect your issue is a bug please edit your issue description to include the BUG REPORT INFORMATION shown below If you fail to provide this information within days we cannot debug your issue and well close it We will however reopen it if you later provide the information BUG REPORT INFORMATION Use the commands below to provide key information from your environment You do NOT have to include this information if this is a FEATURE REQUEST Description If I attempt to install into a namespace to which I dont have access to install particularly I cant even read secrets kubeapps displays the error releasename already exists try a different name which is incorrect and a bad experience if you keep trying P The actual issue is shown below incorrecterror Steps to reproduce the issue Login as a normal user and choose a namespace to which you dont have access ie easiest to use a user who doesnt have access to read secrets in default Deploy a chart ER An error along the lines of You do not have access to install in the namespace foo Actual result see above image Putting this as low priority because realistically we should not be presenting people with namespaces to which they dont have access the underlying issue there is that we add default without knowing if the user has access Once that is fixed this issue wont be so obvious though still worth fixing Before you open the request please review the following guidelines and tips to help it be more easily integrated Describe the scope of your change ie what the change does Describe any known limitations with your change Please run any tests or examples that can exercise your modified code Thank you for contributing Description of the change Follow up of With Helm we are currently not doing the prevalidation to check if the user has enough permissions Because of that we are currently returning the raw error to the user Thats a regression in the UX since with Helm we give a detailed list of roles needed to perform the requested action What this PR proposes is to parse the error returned by Helm and give an userfriendly error like we do in Helm with the permissions needed Benefits When trying to do an operation over an application we are parsing the error returned by the Helm client returning all the information that we have Screenshot from The good thing about this approach is that we are not assuming anything We are just leaving Helm do its work and forward its response Possible drawbacks From the screenshot above you can notice that we are returning that the user needs permission to create PVCs and to delete a bunch of things This is because helm stops processing the chart once one element fails to be installed but then it tries to delete everything even if it has not been created This can be an issue with Helm because the error message is a bit misleading and because we are using atomic installations In any case since we are not prechecking that the user has permissions to do everything that the chart contains the user may need to iterate several times over the error page if the admin gives permissions one by one Additional information Still need to write tests and fix bugs in this PR but wanted to know your thoughts Before you open the request please review the following guidelines and tips to help it be more easily integrated Describe the scope of your change ie what the change does Describe any known limitations with your change Please run any tests or examples that can exercise your modified code Thank you for contributing Description of the change Enable two more builds to run endtoend tests using Helm both using MongoDB and PostgreSQL as database backends If you are reporting a new issue make sure that we do not have any duplicates already open You can ensure this by searching the issue list for this repository If there is a duplicate please close your issue and add a comment to the existing issue instead If you suspect your issue is a bug please edit your issue description to include the BUG REPORT INFORMATION shown below If you fail to provide this information within days we cannot debug your issue and well close it We will however reopen it if you later provide the information BUG REPORT INFORMATION Use the commands below to provide key information from your environment You do NOT have to include this information if this is a FEATURE REQUEST Description Follow up of To improve performance when requesting charts we can refactor the Chart model so we store the rawicon separately in a different column or table and as a byte blob That way we would return it only when necessary If you are reporting a new issue make sure that we do not have any duplicates already open You can ensure this by searching the issue list for this repository If there is a duplicate please close your issue and add a comment to the existing issue instead If you suspect your issue is a bug please edit your issue description to include the BUG REPORT INFORMATION shown below If you fail to provide this information within days we cannot debug your issue and well close it We will however reopen it if you later provide the information BUG REPORT INFORMATION Use the commands below to provide key information from your environment You do NOT have to include this information if this is a FEATURE REQUEST Description When installingupgradingdeleting an application the process may fail due to an error in the chart When this happens its not very clear if the error is caused by kubeappss an internal error of its a chart error Screenshot from We should be able to clearly identify chart errors and maybe point the user to the chart maintainers in that case Steps to reproduce the issue Deploy bitcoind in a k s cluster Describe the results you expected What you expect to happen Additional information you deem important eg issue happens only occasionally Related issue cc fabianschwarzfritz AlpherJang 