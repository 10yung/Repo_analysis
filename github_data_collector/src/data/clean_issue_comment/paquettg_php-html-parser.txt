Hi this issue description is long as I will describe it step by step This part explains well how node ids are generated and what they look like Its a running number starting from AbstractNodecount is increased every time a new node is created so every node should get a unique id right Well not always I dont know the reason why the counter should be reset but here we have a method that does it According to my IDE this is the only place where AbstractNoderesetCount is called I still dont see why its called And see Domload is one kind of a wrapper it inspects the value of str and calls one of these other methods loadFromFile loadFromUrl or loadStr None of those methods call AbstractNoderesetCount and all of those methods are public so its easy to bypass resetCount by just avoiding the load method completely and calling one of the specific loadFrom methods mentioned above Finally what is the problem with AbstractNoderesetCount Well it does bad things Lets take an example where we want to insert one new element into a dom php Create a dom which will be used as a parentcontainer for a paragraph dom new PHPHtmlParser Dom dom loaddivA container divdiv Resets the counter doesnt matter here as the counter was even without resetting div dom firstChild echo Div id dividbr Outputs Create a paragraph outside of the first dom dom new PHPHtmlParser Dom dom loadpOur new paragraphp Resets the counter paragraph dom firstChild echo Paragraph id paragraphid Outputs Just a note before continuing the example when dom dom is loaded with HTML content it will have actually two nodes instead of just one both doms will have an invisible root element which will have an id of This is why the divp element will have an id of instead of But lets continue with the example php divaddChildparagraph This will throw a CircularException because take a look at the InnerNodeaddChild method The last check will make it to CRASH BOOM The numbers are BAD says Hurley from the most legendary TV show Lost test code requireonce vendorphphtmlparservendorautoloadphp dom new PHPHtmlParser Dom domload some html code ordertitle domfindclass text return empty result I test on php and my code work and result not empty Is there way to query multiple tag at once I am trying following but doesnot seem to be working pTags dom findpspan I have a need to convert some html from one tag to another in my case a div to a p Ive added the functionality here as well as a test Some DocBlock and code improvements Potentiallyfix issue Thanks for a cool project Found an issue The find method does not find all matches After it has found a DOMnode that matches it seems that it does not keep searching the children of that node for more matches Example btags should have been found but only two are found PHP html p b test btestingb bThis is a testb iitalici bpassword b b ibanotherbi p dom new Dom domloadStrhtml nodes domfindb echo countnodes Of course there is no exact specification in the documentation of how find should work but it is indicated that it should work like JQuery so im thinking its not how it was intended As an aside would be nice with documentation of the API The same happens for getElementsByTag and possibly others Version The following example returns zero countnew Domload html head script typetextjavascript consolelog script head body div idpaneldiv body html removeScripts false findbody if I comment out the following lines in Domphp if trimtag no tag found invalid found return return everything works as expected I found a piece of invalid html that is causing infinite loop and maximum execution time issues similiar issue was that was closed already but this example shows that similiar cases exist how we could fix it without having access to change the html img srcwwwexamplecomimagejpg datacaptionHow did i I understand it is an invalid html but the parser should not stuck when trying to parse it and fail gracefully rather than causing infinite execution time I would like to ask if its possible to select a child element I have the following html tr td table stylecolorred cellspacing cellpadding border tbody tr td width TEXT td td stylefontsize pxTEXT TO FETCHtd td width TEXT td tr tbody table td tr tr td table stylecolorred cellspacing cellpadding border tbody tr td width TEXT td td stylefontsize pxTEXT NOT TO FETCHtd td width TEXT td tr tbody table td tr Im trying to retreive the TEXT TO FETCH Here is what I tried php require vendorautoloadphp use PHPHtmlParser Dom dom new Dom domloadcontent a domfindtr td table tbody vardumpatext Here is the result string 