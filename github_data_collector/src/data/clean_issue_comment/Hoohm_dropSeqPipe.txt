Hi This used to work for me with the older version of dropseqpipe but I updated it and am having so issues half way through Not sure if I am even setting this up correctly I am trying to run a mix sample of human and mouse from Nadia Any help would be great Thanks for this great package Wed Dec JST orgbroadinstitutedropseqrnabarnyardDigitalExpression done Elapsed time minutes RuntimetotalMemory Wed Dec Error in rule extractumiexpressionspecies jobid output homeuserNadiaprojectsNadiaanalysis mixmousehumanmiseqresultssamplesN S L homosapiensumiexpressiontxt homeuserNadiaprojectsNadiaanalysis mixmousehumanmiseqresultssamplesN S L homosapiensumiexpressionlong condaenv homeuserNadiaprojectsNadiaanalysisdropSeqPipe snakemakecondae f a b shell export JAVAOPTIONSDjavaiotmpdirhomeuserNadiaprojectsNadiaanalysisdropSeqPipetmpdir DigitalExpression m g IhomeuserNadiaprojectsNadiaanalysis mixmousehumanmiseqresultssamplesN S L homosapiensunfilteredbam OhomeuserNadiaprojectsNadiaanalysis mixmousehumanmiseqresultssamplesN S L homosapiensumiexpressiontxt EDITDISTANCE OUTPUTLONGFORMAThomeuserNadiaprojectsNadiaanalysis mixmousehumanmiseqresultssamplesN S L homosapiensumiexpressionlong STRANDSTRATEGYSENSE OUTPUTREADSINSTEADfalse LOCUSFUNCTIONLISTCODINGUTR MINBCREADTHRESHOLD CELLBCFILEhomeuserNadiaprojectsNadiaanalysis mixmousehumanmiseqresultssamplesN S L homosapiensbarcodescsv exited with nonzero exit code Shutting down this might take some time Exiting because a job execution failed Look above for error message Complete log homeuserNadiaprojectsNadiaanalysisdropSeqPipe snakemakelog T snakemakelog configyaml CONTACT email person LOCAL tempdirectory homeuserNadiaprojectsNadiaanalysisdropSeqPipetmpdir memory g rawdata hometuserNadiaprojectsNadiaanalysis mixmousehumanmiseqfastqfiles results homeuserNadiaprojectsNadiaanalysis mixmousehumanmiseqresults META species musmusculus build release homosapiens build release ratio referencedirectory homeuserNadiaprojectsNadiaanalysisreference gtfbiotypes homeuserNadiaprojectsNadiaanalysis mixmousehumanmiseqgtfbiotypesyaml FILTER barcodewhitelist primesmartadapter AAAAAAAAAAA cellbarcode start end UMIbarcode start end cutadapt adaptersfile homeuserNadiaprojectsNadiaanalysis mixmousehumanmiseqNexteraPEPEfa R qualityfilter maximumNs extraparams R qualityfilter minimumadaptersoverlap minimumlength extraparams MAPPING STAR genomeChrBinNbits outFilterMismatchNmax outFilterMismatchNoverLmax outFilterMismatchNoverReadLmax outFilterMatchNmin outFilterMatchNminOverLread outFilterScoreMinOverLread EXTRACTION LOCUS CODING UTR strandstrategy SENSE UMIeditdistance minimumcountsperUMI samplescsv contains mixed samples from human and mouse Nadia scRNAseq samplesexpectedcellsreadlengthbatch N S L batch N S L batch Just updated the documentation with major restructuring based on some user feedback who found it was a bit confusing to follow Its now more logically structured in installing setting up an exeriment running The files are renamedmerged to reflect that i hope you agree with it Most notably the new Settingupanexperimentmd combines the now deleted clustersmd Createconfigfilesmd and ReferenceFilesmd I thought to use a PR rather than push it directly to be able discuss the changes here Hi with colleague we run into some troubles when running your pipeline while being in active conda environment Deactivating it solved our problems I dont think its relevant to dig this issue but perhaps you could add a warning for this in your documentation Or highlight it more if it is already there Cheers MM Hello everyone I have encountered a violin plot failure which I am unable to resolve I was able to generate the plot with previous data but suddenly the pipeline gives an error at this process and shuts down This is the error message Error in rule violineplots jobid output mntDATADropSeqPhilippdropSeqPipev resultsplotviolinplotscomparisonUMIpdf mntDATADropSeqPhilippdropSeqPipev resultsplotsUMIvscountspdf mntDATADropSeqPhilippdropSeqPipev resultsplotsUMIvsgenepdf mntDATADropSeqPhilippdropSeqPipev resultsplotsCountvsgenepdf mntDATADropSeqPhilippdropSeqPipev resultssummaryRSeuratobjectsrdata condaenv mntDATADropSeqPhilippdropSeqPipev snakemakeconda c d RuleException CalledProcessError in line of mntDATADropSeqPhilippdropSeqPipev rulesmergesmk Command source activate mntDATADropSeqPhilippdropSeqPipev snakemakeconda c d set euo pipefail Rscript vanilla mntDATADropSeqPhilippdropSeqPipev snakemakescriptstmp uof xplotviolineR returned nonzero exit status File mntDATADropSeqPhilippdropSeqPipev rulesmergesmk line in ruleviolineplots File homekirstinToolsanaconda libpython concurrentfuturesthreadpy line in run I already tried to manually execute the Rscript source activate mntDATADropSeqPhilippdropSeqPipev snakemakeconda c d Rscript vanilla mntDATADropSeqPhilippdropSeqPipev snakemakescriptstmp uof xplotviolineR Which gives me that error mntDATADropSeqPhilippdropSeqPipev snakemakescriptstmp uof xplotviolineR No such file or directory The summary folder contains the needed files thats why I dont get the error message I am running DropSeqPipev I would appreciate your help The pipeline does not seem to create the tmp files of the scripts within the batchsnakemakescripts directory Which results in the crash of the following command source homemyeminiconda binactivate datasag MYE SingleCellTomBrasdropSeqPipebatch snakemakecondaf f set euo pipefail Rscript vanilla datasag MYE SingleCellTomBrasdropSeqPipebatch snakemakescriptstmp wipn wplotviolineR With error Fatal error cannot open file datasag MYE SingleCellTomBrasdropSeqPipebatch snakemakescriptstmp wipn wplotviolineR No such file or directory Is something going wrong with rights or directories Any clues would be greatly appreciated configyaml CONTACT email person LOCAL tempdirectory datasag MYE SingleCellTomBrasmaizesmallsetdropseqpipetmp memory g rawdata datasag MYE SingleCellTomBrasdropSeqPipebatch RAWDATA results maizeresults META species maize build release ratio referencedirectory datasag MYE SingleCellTomBrasmaize gtfbiotypes gtfbiotypesyaml FILTER barcodewhitelist primesmartadapter AATGATACGGCGACCACCGAGATCTACACGCCTGTCCGCGGAAGCAGTGGTATCAACGCAGAGTAC cellbarcode start end UMIbarcode start end cutadapt adaptersfile NexteraPEPEfa R qualityfilter maximumNs extraparams R qualityfilter minimumadaptersoverlap minimumlength extraparams MAPPING STAR genomeChrBinNbits outFilterMismatchNmax outFilterMismatchNoverLmax outFilterMismatchNoverReadLmax outFilterMatchNmin outFilterMatchNminOverLread outFilterScoreMinOverLread EXTRACTION LOCUS CODING UTR strandstrategy SENSE UMIeditdistance minimumcountsperUMI I am noticing that I am losing over of my reads because they are tagged with cellbarcodes that arent core or arent edit distance away from a core cellbarcode Some of the noncore cellbarcodes that are getting tossed out have more reads than the core ones I am wondering why these arent instead becoming core barcodes I currently have my expected number of cell barcodes set to which is perhaps too low and is part of the problem But Im also wondering if some of the issue might be related to the order of the pipeline as it currently stands Currently the order is Alignedoutbam Alignedmergedbam Alignedrepairedbam geneexontaggedbam geneexontaggedbeadsubbam finalbam The set of core barcodes is set by running umitools whitelist on trimmmedrepairedR fastqgz But wouldnt it be better to run it on the corrected barcodes Ie following DetectBeadSubstitutionErrors and DetectBeadSynthesisErrors The repairbarcodes step doesnt seem to be in the most recent version of the DropseqAlignmentCookbookpdf so I am just wondering what your logic is for doing it the way you are currently doing it Thanks Hej I just got some data generated with SureCell libraries on a ddSeq machine ie the protocol by Illumina and BioRad I would like to test your pipeline for the analysis but Im not sure if it can be used and if so how to fill the configyaml Barcodes are in Read however they are not at a fixed position and the cell barcode is split into three parts by spacer sequences singlecellrnaalgorithmtechnote Below is a small example from the first read fastq file of one of my samples Is it possible to process this data with dropSeqPipe Cheers D HKWJNBCX N CCTAAGAC CTCGGCGTTAGCCATCGCATTGCGGATTGTACCTCTGAGCTGAATCGCCTACGTCCCCGGAGACCNNT DDD CFHHHIIIIIIIIIIIIIIIHIHIGHHHIHHHGHFHHHIHHHIIIIHIIIIIEHHHIII D HKWJNBCX N CCTAAGAC AATGGAGTAGCCATCGCATTGCACCTTCTACCTCTGAGCTGAAGAAATAACGCCTACGAAGACTTNNT D D ECHF CEE DG CGEHHHHHIIHGEGCGEHFHIHGHHHHHIEHHHHEF D HKWJNBCX N CCTAAGAC ACCCAATAGCCATCGCATTGCCCGTAATACCTCTGAGCTGAATAAGCTACGAAACTGTGGACTTTNNT DDDIHHIIEEHHGHIIEHIFDGHHHIIIHIIIHGHHIIH FH FGHIGHIIHIFHIHEFH D HKWJNBCX N CCTAAGAC TTCGTAGAGGTAGCCATCGCATTGCTGAGACTACCTCTGAGCTGAACTCAATACGCTTCGAGCGANNT DBDHHHFCFHEGHIHIHIIIIHHIHGEHIHHIHIHIHI GHHIHIIIIIGIIGHHGHIH D HKWJNBCX N CCTAAGAC ACATAGATAGCCATCGCATTGCTAATAGTACCTCTGAGCTGAAGCGAATACGTCCCCCCTGACTTNNT B CEGHIIHHIGEEHCGHEHHEEHHIHFHCHEHCHIHIIHIHIIHHHHI EHHIII Hi There thanks for putting all of this together I am just putting a few comments together as I seek to run this pipeline on a Rhesus Macaque sample Im downloading the GTF from ENSEMBL ftpftpensemblorgpubrelease gtfmacacamulatta Initially this file didnt include a genename in the attribute column This was leading to a NullPointerException in orgbroadinstitutedropseqrnaannotationReduceGTF I manually added a genename attribute but now Im getting an exception Missing transcriptname Problems Missing transcriptname at orgbroadinstitutedropseqrnaannotationGTFParsernextGTFParserjava at orgbroadinstitutedropseqrnaannotationGTFParsernextGTFParserjava at htsjdksamtoolsutilPeekableIteratoradvancePeekableIteratorjava at htsjdksamtoolsutilPeekableIteratornextPeekableIteratorjava at orgbroadinstitutedropseqrnautilsFilteredIteratornextFilteredIteratorjava at orgbroadinstitutedropseqrnaannotationReduceGTFwriteRecordsReduceGTFjava at orgbroadinstitutedropseqrnaannotationReduceGTFdoWorkReduceGTFjava at picardcmdlineCommandLinePrograminstanceMainCommandLineProgramjava at picardcmdlinePicardCommandLineinstanceMainPicardCommandLinejava at orgbroadinstitutedropseqrnacmdlineDropSeqMainmainDropSeqMainjava It would be helpful if there was a similar error message for genename missing and if there was documentation in the reference files section indicating that the transcriptname and genename attributes are required and may not be included directly in the ensembl download There are over ensembl genes with the same name Would be helpful to have unique identifiers used alongside gene names