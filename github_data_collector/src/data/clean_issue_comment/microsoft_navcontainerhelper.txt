I was getting an error that NT AUTHORITY NETWORK SERVICE user does not exist in the server when I use ExportNAVApplication inside a container Im using the databases created by navcontainerhelper Looking at the database with SQL Management Studio I can see that the NT AUTHORITY NETWORK SERVICE user is created in tenantdefault database but not in CRONUS And it in fact not one the server users At the same time NT AUTHORITY SYSTEM exists in all databases If I add the NetworkService to the users before exporting the application then there is no problem Is that the intended behavior onprem w nch Please add IncludePC PC stand here prerequisite components It should allow to install perquisite components on host side Use case Report development Actually this feature has currently known workaround but this works only to BC because clickonce is part of the windows client As we know clickonce put beautiful and simple webpage inside container This webpage contain possibility to install prerequisite components as well Good enough to make dockerized process available for developers Hi what could be a reason of failure during creating the container I have locally host OS version and this script runs fine My colleague has host OS version and the same script fails at his PC NavContainerHelper is version NavContainerHelper is running as administrator Host is Microsoft Windows Enterprise Docker Client Version is Docker Server Version is Using image mcrmicrosoftcombusinesscentralonprem ltsc Removing C ProgramData NavContainerHelper Extensions knkbc Creating Container knkbc Version W Style onprem Platform Generic Tag Container OS Version ltsc Host OS Version A better Generic Container OS exists for your host Using generic image mcrmicrosoftcomdynamicsnavgeneric Generic Container OS Version Generic Tag of better generic Using locale enUS Using process isolation Disabling the standard eventlog dump to container log every seconds use dumpEventLog to enable Using license file D Docker xxx v flf Files in C ProgramData NavContainerHelper Extensions knkbc my AdditionalOutputps databasebak licenseflf MainLoopps SetupWebClientps Creating container knkbc from image mcrmicrosoftcomdynamicsnavgeneric d a cda ed eaaa d d b ca b DockerDo dockerexe Error response from daemon hcsshimCreateComputeSystem d a cda ed eaaa d d b ca b Falscher Parameter extra info SystemTypeContainerName d a cda ed eaaa d d b ca b OwnerdockerVolumePath Volume c d f b e f d dIgnoreFlushesDuringBoottrueLayerFolderPathC ProgramData Docker windowsfilter d a cda ed eaaa d d b ca b Layers ID f def afb a fc fc PathC ProgramData Docker windowsfilter edd a f c d aa b d cc de afae f cc bae b IDccb c e ac a c fb dd ffd b PathC ProgramData Docker windowsfilter e a a a cc f e befb defd e de c a f aIDb e a a a d b c e PathC ProgramData Docker windowsfilter e aa c a e c b e e bf ba ea f bdc aID f f af ddba caf c fcd PathC ProgramData Docker wind owsfilter af e d bcad b a aa d aed f c bIDdaf e b f a ecb fdeabbPathC ProgramData Docker windowsfilter fba db db fcf c a bcbe ebdd acb c c d a ID a b ab b fPathC ProgramData Docker windowsfilter fa eb ebeb de e c d dfd cfecd a bfb ID e fee be f de faPathC ProgramData Docker windowsfilter fd cfdfae e e e be e c c e d c f d c c ID c a d c ad f b e PathC ProgramData Docker windowsfilter c cb bdbebf f c d dcda a ec b aa f ID d b d ca c d ec dPathC ProgramData Docker windowsfilter b cfe edced b a d d f b c d fbc b cdb b IDd b e dbcb b b aaP athC ProgramData Docker windowsfilter a d ef cf cdc f ea d bbb b d f b baID cd a a ad a b PathC ProgramData Do cker windowsfilter ce f cd dbe f f b d f b cc a f ID e ff e bc b cb d PathC ProgramData Docker windowsfilter e bd b ff a e cb a b cf c a a fed c f e ef e b IDca be a bc ee c ab bPathC ProgramData Docker windowsfilter aa d d c f a b b ab b ab bcf a cIDa d c e b b e a cPathC ProgramData Docker windowsfilter e ea e c c e cc f b a eeb f a e dd bc dID cbe b c f b c d de PathC ProgramData Docker windowsfilter ff c dd e bce acef ac d d b b a f eb a a HostName knkbc MappedDirectories HostPathc programdata navcontainerhelper w filesContainerPathc navdvdReadOnlyfalseBandwidthMaximum IOPSMaximum CreateInUtilityVMfalseHostPathd dockerContainerPathd dockerReadOnlyfalseBandwidthMaximum IOPSMaximum CreateInUtilityVMfalseHostPathc prog ramdata navcontainerhelperContainerPathc programdata navcontainerhelperReadOnlyfalseBandwidthMaximum IOPSMaximum CreateInUtilityVMfalseHostPathc prog ramdata navcontainerhelper extensions knkbc myContainerPathc run myReadOnlyfalseBandwidthMaximum IOPSMaximum CreateInUtilityVMfalse HvPartitionfalse EndpointList BB D BF F E AE AllowUnqualifiedDNSQuerytrue ExitCode Commandline docker run label nav label version label countryW label curtm label platform env licenseFilec run my licenseflf name knkbc hostname knkbc env authWindows env usernamexxx env ExitOnErrorN env localeenUS env databaseServer env databaseInstance volume C ProgramData NavContainerHelperC ProgramData NavContainerHelper volume C ProgramData NavContainerHelper Extensions knkbc myC Run my isolation process restart unlessstopped env enableApiServicesY env useSSLN volume C ProgramData NavContainerHelper W Filesc NAVDVD env securePassword d f b a MgB AHgAYwBvAEwARABwAFkAawArAG AYQA AEEAVwBpAEMASABIAGkANQB AHcAPQA AHwAYQBlADcAOABmAGUAMAAyADYAZABiAGUANAAzAGYANwA AGIAMwAzADMAYQBmADEAMgAxAGUAYgA ADAAYgAzAGQAMwAxADgANABhADQAYgBjADIA NQA AGIAOQA AGMAZAA ADMAYwBkAGQAMwA AGQAMwA AGQAOAAzADUAMQA env passwordKeyFilec run my aeskey env removePasswordKeyFileY volume D DockerD Docker env bakfileD Docker databasebak env accepteulaY env acceptoutdatedY detach mcrmicrosoftcomdynamicsnavgeneric In C Program Files WindowsPowerShell Modules navcontainerhelper ContainerHandling NewNavContainerps Zeichen if DockerDo accepteula acceptoutdatedacceptoutdated CategoryInfo NotSpecified WriteError WriteErrorException FullyQualifiedErrorId MicrosoftPowerShellCommandsWriteErrorExceptionDockerDo When using cmdlet CompileAppInNavConatiner for building the BaseApp you end up with warnings These warning are related to std NAV objects in which we dont have any footprint Having all those warnings make the compiler output less useful We still want to see our warnings As an improvement for the cmdlet a regex or collection of regex must be added as a parameter This regex can be used to exclude specific lines of the compiler output For example Ignore all warnings in sources of folder original This way can eliminate all the warnings which we cant and wont fix And still see warnings we introduced Im trying to create a container and run tests in it It is triggered from DevOps It is essentially calling a vanilla NewNavContainer call with the includeTestToolkit specified The test apps start loading but at the Publishing C Applications BaseApp Test MicrosoftTestsSCMapp it fails presumably it times out This could be because that app is too large docker pull mcrmicrosoftcombusinesscentralsandbox ContainerName RunTestsOInSandbox NewNavContainer containerName ContainerName imageName mcrmicrosoftcombusinesscentralsandbox licenseFile C somelicenseFileflf auth Windows accepteula includeTestToolkit acceptoutdated T Z Publishing C Applications BaseApp Test MicrosoftTestsReverseapp T Z WARNING This license is not compatible with this version of Business Central T Z WARNING This license is not compatible with this version of Business Central T Z WARNING This license is not compatible with this version of Business Central T Z Publishing C Applications BaseApp Test MicrosoftTestsSCMapp T Z WARNING This license is not compatible with this version of Business Central T Z WARNING This license is not compatible with this version of Business Central T Z WARNING This license is not compatible with this version of Business Central T Z The socket connection was aborted This could be caused by an error processing your message or a receive timeout being exceeded by the remote host or an underlying network resource issue Local socket timeout was T Z at ScriptBlock No file line T Z at ScriptBlock No file line T Z The socket connection was aborted This could be caused by an error processing your message or a receive timeout being T Z exceeded by the remote host or an underlying network resource issue Local socket timeout was T Z T Z At C Program T Z Files WindowsPowerShell Modules navcontainerhelper ContainerHandling InvokeScriptInNavContainerps char T Z InvokeCommand Session session ScriptBlock scriptbloc T Z T Z CategoryInfo InvalidOperation MicrosoftDynampRuntimePackageGetNavAppRuntimePackage GetNavAp T Z pRuntimePackage CommunicationException T Z FullyQualifiedErrorId MicrosoftDynamicsNavAppsManagementCmdletsGetNavAppRuntimePackage T Z PSComputerName fd b f bed d fb b b c dd ab b a c T Z T Z error PowerShell exited with code reran it to make sure Im not wasting your time It was a different error but still failed in the same spot The job had been runningstuck on this task for about an hour T Z Publishing C ProgramData NavContainerHelper Extensions onpremApplications w MicrosoftTestsReverseruntimeapp T Z WARNING This license is not compatible with this version of Business Central T Z WARNING This license is not compatible with this version of Business Central T Z Publishing C Applications BaseApp Test MicrosoftTestsSCMapp T Z WARNING This license is not compatible with this version of Business Central T Z WARNING This license is not compatible with this version of Business Central T Z WARNING This license is not compatible with this version of Business Central T Z error The operation was canceled currently we have our product on the app source where we dont show our source code When user download our app report an issue we ask them to copy the PROD into sandbox and give us access to it so that we can replicate the issue find the root cause of the issue and fix it Now during this process we might have to connect our VS code to the sandbox and debug the code to find the root cause of this issue We have few doubts and issues dong that We get the same version of code thats on the app source and then change the appjson to point to cloud sandbox Please note showmycode in appjson is false now we click CTRLSHIFTF in VS code to publish the code without source code Now when we keep the break point we see that it doesnt hit the break point can you please help We used this script to setup the Treafik container Thanks to Tobias ImportModule C TraefikforBC TraefikForBCpsd force InitializeTraefikForBC email ownmailaddressnl externaldns owndnscom StartTraefik And we use this to create a container Thanks to Freddy NewBcContainer accepteula alwaysPull acceptoutdated containerName ContainerName imageName ImageName licenseFile containerLicenseFile assignPremiumPlan Credential Credentials auth NavUserPassword updateHosts isolation process additionalParameters AdditionalParameters shortcuts None doNotCheckHealth includeAL memoryLimit MemoryLimit useTraefik PublicDnsName owndnscom Container is succesfully created Traefik is running Using the url But the links are not working Container IP is also unreachable What are we doing wrong Please can anyone help us with this Hi it would be helpful to have the ability to create a code coverage report while running the tests with RunTestsInNavContainer The easiest way would be to add a option to the RunTestsInNavContainer commandlet codeCoverage for example that automatically generates the code coverage report alongside the XUnit test result file Having the code coverage for our tests would be really helpful for our build pipelines because it would enable us to check for the code coverage in pull requests and thus automatically refuse bad pull requests that do not meet our quality expectations and still need to be worked on Azure DevOps supports code coverage files in Cobertura and JaCoCo format out of the box Source so those file formats would be preferred error The Extension cannot be unpublished because it is required by the following apps Default App Name The reason is that the most depended upon app Default Base App Name in this example has to be published first but can only be unpublished last You have to loop twice through the apps once in reversed direction to unpublish and a second time normally to publish them sortedFolders SortAppFoldersByDependencies appFolders appFoldersSplit baseFolder artifactsFolder WarningAction SilentlyContinue array ReversesortedFolders sortedFolders ForEachObject appFolder appJsonFile GetItem JoinPath artifactsFolder appFolder appjsonFullName appJson GetContent appJsonFile ConvertFromJson ErrorActionPreference Stop apps GetBCContainerAppInfo containerName tenantSpecificProperties SortObject Property Name WriteHost Extensions apps ForEachObject WriteHost Name vversion installedisInstalled if publisher eq appJsonpublisher and name eq appjsonname and appid eq appjsonid UnPublishBCContainerApp containerName containerName appName name publisher publisher version Version unInstall force array ReversesortedFolders sortedFolders ForEachObject appFolder appFile GetItem JoinPath artifactsFolder appFolder appFullName WriteHost Appfile appFile appJsonFile GetItem JoinPath artifactsFolder appFolder appjsonFullName appJson GetContent appJsonFile ConvertFromJson ErrorActionPreference Stop PublishBCContainerApp containerName containerName appFile appFile skipVerification sync scope Tenant try StartBCContainerAppDataUpgrade containerName containerName appName appJsonname appVersion appJsonversion catch InstallBCContainerApp containerName containerName appName appJsonname appVersion appJsonversion Im not entirely sure if simply reversing the order of the apps is always sufficient to unpublish them without errors Also notice I surrounded StartBCContainerAppDataUpgrade with a trycatch That was solved in a different way previously When trying to create a new insider container on a Windows Host Im getting the above error It works when I add isolation HyperV Current images like mcrmicrosoftcombusinesscentralonprembe work fine Only insider images have this problem Full output I added the message to see what the actual docker command was NavContainerHelper is version NavContainerHelper is not running as administrator Host is Microsoft Windows Pro ltsc Docker Client Version is Docker Server Version is VERBOSE Perform operation Enumerate CimInstances with following parameters namespaceName root cimv className Win OperatingSystem VERBOSE Operation Enumerate CimInstances complete Pulling image bcinsiderazurecriobcsandboxmasterbeltsc Docker run pull bcinsiderazurecriobcsandboxmasterbeltsc beltsc Pulling from bcsandboxmaster Using image bcinsiderazurecriobcsandboxmasterbeltsc Removing container bcdaily Removing bcdaily from host hosts file Removing C ProgramData NavContainerHelper Extensions bcdaily Creating Container bcdaily Version be Style sandbox Platform Generic Tag Container OS Version ltsc Host OS Version ltsc WARNING The container operating system matches the host operating system but the revision is different If you encounter issues you might want to specify isolation hyperv Using locale nlBE Using process isolation Disabling the standard eventlog dump to container log every seconds use dumpEventLog to enable Files in C ProgramData NavContainerHelper Extensions bcdaily my AdditionalOutputps MainLoopps SetupVariablesps SetupWebClientps updatehostsps Creating container bcdaily from image bcinsiderazurecriobcsandboxmasterbeltsc Docker run run env licenseFile name bcdaily hostname bcdaily env authNavUserPassword env usernamewaldo env ExitOnErrorN env localenlBE env databaseServer env databaseInstance volume C ProgramData NavContainerHelperC ProgramData NavContainerHelper volume C ProgramData NavContainerHelper Extensions bcdaily myC Run my isolation process restart unlessstopped memory G env enableApiServicesY env useSSLN volume c windows system drivers etcC driversetc env securePassword d f b a MgB AFkAeABVAGQAdgBaADIARQA AG AbQBDAEEATABaAHUAaQBMADEATwB AGcAPQA AHwAMQAyADMANwBjAGEAMQA ADkAMQAzADYAMgA ADQANwA ADkAMgAwAGIAOQBjADkAZQAwAGQAZgA ADgANABlAGUAMgA ADkAYQBjADgAYQA AGMAOAAyADcAMgA ADUAYQAxADkANwBkADkAMAAyAGIAYgA ADEANgA ADgANAA env passwordKeyFilec run my aeskey env removePasswordKeyFileY cpucount dns env accepteulaY env acceptoutdatedY detach bcinsiderazurecriobcsandboxmasterbeltsc d d b ce c fa b ef a c be d f fdfea ca e Waiting for container bcdaily to be ready Initializing Setting hostdockerinternal to in container hosts file copy from host hosts file Setting gatewaydockerinternal to in container hosts file copy from host hosts file Setting hostcontainerhelperinternal to in container hosts file Starting Container Hostname is PublicDnsName is bcdaily Using NavUserPassword Authentication Starting Local SQL Server Starting Internet Information Server Creating Self Signed Certificate Self Signed Certificate Thumbprint E F C E D C CEBFAE Modifying Service Tier Config File with Instance Specific Settings Starting Service Tier Service Dynamics Business Central Server BC MicrosoftDynamicsNavServerBC cannot be started due to the following error Cannot start service MicrosoftDynamicsNavServerBC on computer at ScriptBlock C Run navstartps line at ScriptBlock C Run startps line at ScriptBlock No file line Error Initializing Setting hostdockerinternal to in container hosts file copy from host hosts file Setting gatewaydockerinternal to in container hosts file copy from host hosts file Setting hostcontainerhelperinternal to in container hosts file Starting Container Hostname is PublicDnsName is bcdaily Using NavUserPassword Authentication Starting Local SQL Server Starting Internet Information Server Creating Self Signed Certificate Self Signed Certificate Thumbprint E F C E D C CEBFAE Modifying Service Tier Config File with Instance Specific Settings Starting Service Tier Service Dynamics Business Central Server BC MicrosoftDynamicsNavServerBC cannot be started due to the following error Cannot start service MicrosoftDynamicsNavServerBC on computer at ScriptBlock C Run navstartps line at ScriptBlock C Run startps line at ScriptBlock No file line Initialization of container bcdaily failed At C Users ericw Documents WindowsPowerShell Modules navcontainerhelper ContainerHandling WaitNavContainerReadyps char throw Initialization of container containerName failed CategoryInfo OperationStopped Initialization bcdaily failedString RuntimeException FullyQualifiedErrorId Initialization of container bcdaily failed This is the script Im running powershell NewNavContainer containerName bcdaily imageName bcinsiderazurecriobcsandboxmasterbe accepteula additionalParameters cpucount dns alwaysPullTrue Credential MyCredential updateHosts auth NavUserPassword enableSymbolLoadingFalse assignPremiumPlanFalse useBestContainerOS includeTestToolkitFalse includeTestLibrariesOnlyFalse Verbose memoryLimit G acceptoutdated includeAL These are the logs PS docker logs bcdaily Initializing Setting hostdockerinternal to in container hosts file copy from host hosts file Setting gatewaydockerinternal to in container hosts file copy from host hosts file Setting hostcontainerhelperinternal to in container hosts file Starting Container Hostname is PublicDnsName is bcdaily Using NavUserPassword Authentication Starting Local SQL Server Starting Internet Information Server Creating Self Signed Certificate Self Signed Certificate Thumbprint E F C E D C CEBFAE Modifying Service Tier Config File with Instance Specific Settings Starting Service Tier Service Dynamics Business Central Server BC MicrosoftDynamicsNavServerBC cannot be started due to the following error Cannot start service MicrosoftDynamicsNavServerBC on computer at ScriptBlock C Run navstartps line at ScriptBlock C Run startps line at ScriptBlock No file line and the docker inspect PS docker inspect bcdaily Id d d b ce c fa b ef a c be d f fdfea ca e Created T Z Path powershell Command ErrorActionPreference Stop ProgressPreference SilentlyContinue Run startps Args State Status running Running true Paused false Restarting false OOMKilled false Dead false Pid ExitCode Error StartedAt T Z FinishedAt T Z Health Status unhealthy FailingStreak Log Start T End T ExitCode Output Start T End T ExitCode Output Start T End T ExitCode Output Start T End T ExitCode Output Start T End T ExitCode Output Image sha bfd bf e f f d e e a a b df f c e c b ResolvConfPath HostnamePath HostsPath LogPath C ProgramData Docker containers d d b ce c fa b ef a c be d f fdfea ca e d d b ce c fa b ef a c be d f fdfea ca e jsonlog Name bcdaily RestartCount Driver windowsfilter Platform windows MountLabel ProcessLabel AppArmorProfile ExecIDs null HostConfig Binds C ProgramData NavContainerHelperC ProgramData NavContainerHelper C ProgramData NavContainerHelper Extensions bcdaily myC Run my c windows system drivers etcC driversetc ContainerIDFile LogConfig Type jsonfile Config NetworkMode default PortBindings RestartPolicy Name unlessstopped MaximumRetryCount AutoRemove false VolumeDriver VolumesFrom null CapAdd null CapDrop null Dns DnsOptions DnsSearch ExtraHosts null GroupAdd null IpcMode Cgroup Links null OomScoreAdj PidMode Privileged false PublishAllPorts false ReadonlyRootfs false SecurityOpt null UTSMode UsernsMode ShmSize ConsoleSize Isolation process CpuShares Memory NanoCpus CgroupParent BlkioWeight BlkioWeightDevice BlkioDeviceReadBps null BlkioDeviceWriteBps null BlkioDeviceReadIOps null BlkioDeviceWriteIOps null CpuPeriod CpuQuota CpuRealtimePeriod CpuRealtimeRuntime CpusetCpus CpusetMems Devices DeviceCgroupRules null DiskQuota KernelMemory MemoryReservation MemorySwap MemorySwappiness null OomKillDisable false PidsLimit Ulimits null CpuCount CpuPercent IOMaximumIOps IOMaximumBandwidth MaskedPaths null ReadonlyPaths null GraphDriver Data dir C ProgramData Docker windowsfilter d d b ce c fa b ef a c be d f fdfea ca e Name windowsfilter Mounts Type bind Source c programdata navcontainerhelper Destination c programdata navcontainerhelper Mode RW true Propagation Type bind Source c programdata navcontainerhelper extensions bcdaily my Destination c run my Mode RW true Propagation Type bind Source c windows system drivers etc Destination c driversetc Mode RW true Propagation Config Hostname bcdaily Domainname User AttachStdin false AttachStdout false AttachStderr false ExposedPorts tcp tcp tcp tcp tcp tcp tcp tcp tcp Tty false OpenStdin false StdinOnce false Env removePasswordKeyFileY authNavUserPassword localenlBE enableApiServicesY licenseFile databaseInstance acceptoutdatedY usernamewaldo useSSLN securePassword d f b a MgB AFkAeABVAGQAdgBaADIARQA AG AbQBDAEEATABaAHUAaQBMADEATwB AGcAPQA AHwAMQAyADMANwBjAGEAMQA ADkAMQAzADYAMgA ADQANwA ADkAMgAwAGIAOQBjADkAZQAwAGQAZgA ADgANABlAGUAMgA ADkAYQBjADgAYQA AGMAOAAyADcAMgA ADUAYQAxADkANwBkADkAMAAyAGIAYgA ADEANgA ADgANAA accepteulaY ExitOnErrorN databaseServer passwordKeyFilec run my aeskey COMPLUSNGenProtectedProcessFeatureEnabled DatabaseNameFinancialsbe NAVDVDURL VSIXURL IsBcSandboxY CountryCodebe DEVPREVIEWURL Cmd powershell Command ErrorActionPreference Stop ProgressPreference SilentlyContinue Run startps Healthcheck Test CMD powershell Run HealthCheckps Interval Timeout ArgsEscaped true Image bcinsiderazurecriobcsandboxmasterbeltsc Volumes null WorkingDir Entrypoint null OnBuild null Labels country be created cu eula legal maintainer Dynamics SMB nav osversion platform tag version NetworkSettings Bridge SandboxID d d b ce c fa b ef a c be d f fdfea ca e HairpinMode false LinkLocalIPv Address LinkLocalIPv PrefixLen Ports tcp null tcp null tcp null tcp null tcp null tcp null tcp null tcp null tcp null SandboxKey d d b ce c fa b ef a c be d f fdfea ca e SecondaryIPAddresses null SecondaryIPv Addresses null EndpointID Gateway GlobalIPv Address GlobalIPv PrefixLen IPAddress IPPrefixLen IPv Gateway MacAddress Networks nat IPAMConfig null Links null Aliases null NetworkID d f eec ff ea b b ac fe bad c e dc cbcb d EndpointID cc d fcb f bf a f fda ed e b faa c fc d Gateway IPAddress IPPrefixLen IPv Gateway GlobalIPv Address GlobalIPv PrefixLen MacAddress deaf DriverOpts null My host version 