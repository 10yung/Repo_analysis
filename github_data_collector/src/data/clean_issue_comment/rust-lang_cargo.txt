 Thanks for filing a feature request Describe the problem you are trying to solve When I run cargo login it tells me to type in my password then shows the password in plaintext Describe the solution youd like cargo login should either show no output like sudo or only asterisks like openvpn or a user login screen Notes I dont like the idea that someone looking over my shoulder can see my passwords Im trying to build cargo from git master though I have this error also in cratesio version Im using stablex pcwindowsgnu Ive zlib installed through pacman Output from cargo build release error linking with gcc failed exit code note gcc Wlenablelongsectionnames fnouselinkerplugin Wlnxcompat nostdlib m C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib crt o C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib rsbegino L C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib C Users Shadow Documents projects cargo target release deps cargo b d ed fb adda cargoc x d bcgu rcguo C Users Shadow Documents projects cargo target release deps cargo b d ed fb adda cargoc x d bcgu rcguo C Users Shadow Documents projects cargo target release deps cargo b d ed fb adda cargoc x d bcgu rcguo C Users Shadow Documents projects cargo target release deps cargo b d ed fb adda cargoc x d bcgu rcguo C Users Shadow Documents projects cargo target release deps cargo b d ed fb adda cargoc x d bcgu rcguo C Users Shadow Documents projects cargo target release deps cargo b d ed fb adda cargoc x d bcgu rcguo C Users Shadow Documents projects cargo target release deps cargo b d ed fb adda cargoc x d bcgu rcguo C Users Shadow Documents projects cargo target release deps cargo b d ed fb adda cargoc x d bcgu rcguo C Users Shadow Documents projects cargo target release deps cargo b d ed fb adda cargoc x d bcgu rcguo C Users Shadow Documents projects cargo target release deps cargo b d ed fb adda cargoc x d bcgu rcguo C Users Shadow Documents projects cargo target release deps cargo b d ed fb adda cargoc x d bcgu rcguo C Users Shadow Documents projects cargo target release deps cargo b d ed fb adda cargoc x d bcgu rcguo C Users Shadow Documents projects cargo target release deps cargo b d ed fb adda cargoc x d bcgu rcguo C Users Shadow Documents projects cargo target release deps cargo b d ed fb adda cargoc x d bcgu rcguo C Users Shadow Documents projects cargo target release deps cargo b d ed fb adda cargoc x d bcgu rcguo C Users Shadow Documents projects cargo target release deps cargo b d ed fb adda cargoc x d bcgu rcguo o C Users Shadow Documents projects cargo target release deps cargo b d ed fb adda exe C Users Shadow Documents projects cargo target release deps cargo b d ed fb adda f jxi jrp mm ercguo Wlgcsections nodefaultlibs L C Users Shadow Documents projects cargo target release deps L C Users Shadow cargo registry src githubcom ecc db ec winapix pcwindowsgnu lib L C Users Shadow Documents projects cargo target release build curlsys a a d caf out build L C Users Shadow Documents projects cargo target release build libnghttp sysf aa d b c out i lib L usrlib L C Users Shadow Documents projects cargo target release build libgit sys a bcc ac out build L C Users Shadow Documents projects cargo target release build libssh sysad cd feb out build L C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib WlBstatic C Users Shadow Documents projects cargo target release deps libgit curl dd rlib C Users Shadow Documents projects cargo target release deps libenvlogger c b ad d rlib C Users Shadow Documents projects cargo target release deps libcargo e d ed rlib C Users Shadow Documents projects cargo target release deps libhomec d dab e rlib C Users Shadow Documents projects cargo target release deps libopener b a ee ecrlib C Users Shadow Documents projects cargo target release deps libfwdansi b c rlib C Users Shadow Documents projects cargo target release deps libstripansiescapesc ae c dabde rlib C Users Shadow Documents projects cargo target release deps libvteedf e eb b rlib C Users Shadow Documents projects cargo target release deps libutf parse a f f a brlib C Users Shadow Documents projects cargo target release deps libhumantime c a rlib C Users Shadow Documents projects cargo target release deps libquickerror f dda a rlib C Users Shadow Documents projects cargo target release deps libnumcpusce b f ea dfarlib C Users Shadow Documents projects cargo target release deps libserdeignoredb f c d f rlib C Users Shadow Documents projects cargo target release deps libcryptohash a e rlib C Users Shadow Documents projects cargo target release deps libhex c baefarlib C Users Shadow Documents projects cargo target release deps libmiowa d dafbe d rlib C Users Shadow Documents projects cargo target release deps libshellescape b d b eb rlib C Users Shadow Documents projects cargo target release deps libhexa c aad fac bcarlib C Users Shadow Documents projects cargo target release deps libfs dfe ef f arlib C Users Shadow Documents projects cargo target release deps libclap dc d a frlib C Users Shadow Documents projects cargo target release deps libvecmapc a d frlib C Users Shadow Documents projects cargo target release deps libtextwrap cfee fca eacrlib C Users Shadow Documents projects cargo target release deps libunicodewidth e c a b rlib C Users Shadow Documents projects cargo target release deps libstrsimf d e erlib C Users Shadow Documents projects cargo target release deps libignorec cfed b rlib C Users Shadow Documents projects cargo target release deps libwalkdir ecbd c bb rlib C Users Shadow Documents projects cargo target release deps libsamefile d ee f eb b rlib C Users Shadow Documents projects cargo target release deps libglobsete ef f bdrlib C Users Shadow Documents projects cargo target release deps libregexcbf fe b f a rlib C Users Shadow Documents projects cargo target release deps libthreadlocal a erlib C Users Shadow Documents projects cargo target release deps libregexsyntax c ed f ef rlib C Users Shadow Documents projects cargo target release deps libfnvcc a ee a rlib C Users Shadow Documents projects cargo target release deps libbstr d a fe rlib C Users Shadow Documents projects cargo target release deps libahocorasick cc ce afrlib C Users Shadow Documents projects cargo target release deps libmemchrfee c d e rlib C Users Shadow Documents projects cargo target release deps libcrossbeamchannel e d fee be rlib C Users Shadow Documents projects cargo target release deps libcratesio e e f rlib C Users Shadow Documents projects cargo target release deps librustfix b efb a frlib C Users Shadow Documents projects cargo target release deps libtar c c dedc da rlib C Users Shadow Documents projects cargo target release deps libserdejson f a f e b rlib C Users Shadow Documents projects cargo target release deps libryuf d f rlib C Users Shadow Documents projects cargo target release deps libitoa ec fa d afrlib C Users Shadow Documents projects cargo target release deps libflate b bf ba b rlib C Users Shadow Documents projects cargo target release deps libcrc fastadcd e dc drlib C Users Shadow Documents projects cargo target release deps libtoml b fb f b rlib C Users Shadow Documents projects cargo target release deps libgit bacbcd ae drlib C Users Shadow Documents projects cargo target release deps liblibgit sysfffd a c b d rlib C Users Shadow Documents projects cargo target release deps liblibssh sys d bd f b rlib C Users Shadow Documents projects cargo target release deps libbitflags a cda f d d drlib C Users Shadow Documents projects cargo target release deps libtempfilea d ea bdcdrlib C Users Shadow Documents projects cargo target release deps librand a a b crlib C Users Shadow Documents projects cargo target release deps librandchachac c c rlib C Users Shadow Documents projects cargo target release deps libc chacha ee b ae rlib C Users Shadow Documents projects cargo target release deps libppvlite b cbae d e rlib C Users Shadow Documents projects cargo target release deps libremovediralla e d rlib C Users Shadow Documents projects cargo target release deps libglob fa da ac a rlib C Users Shadow Documents projects cargo target release deps libtermcolord ea b e a rlib C Users Shadow Documents projects cargo target release deps libwinapiutild b dc ea a rlib C Users Shadow Documents projects cargo target release deps libattyfa e cf d f brlib C Users Shadow Documents projects cargo target release deps libimrc dd a b a fbe rlib C Users Shadow Documents projects cargo target release deps librandxoshiro db c b fc c rlib C Users Shadow Documents projects cargo target release deps librandcore f bed d rlib C Users Shadow Documents projects cargo target release deps libgetrandomb f f d be e rlib C Users Shadow Documents projects cargo target release deps libsizedchunks bcff ede e rlib C Users Shadow Documents projects cargo target release deps libbitmapsedc fdb d ab rlib C Users Shadow Documents projects cargo target release deps libtypenum a bbea a d a rlib C Users Shadow Documents projects cargo target release deps libcurl c b f rlib C Users Shadow Documents projects cargo target release deps libsocket fc d af drlib C Users Shadow Documents projects cargo target release deps libcurlsysa bab aec c fa rlib C Users Shadow Documents projects cargo target release deps liblibzsys cf f dderlib C Users Shadow Documents projects cargo target release deps liblibnghttp sysdc c a ab rlib C Users Shadow Documents projects cargo target release deps liblibc bf c bff drlib C Users Shadow Documents projects cargo target release deps libbytesize fc c d a c rlib C Users Shadow Documents projects cargo target release deps liburl a e d ea drlib C Users Shadow Documents projects cargo target release deps libpercentencoding b b acdbrlib C Users Shadow Documents projects cargo target release deps libidna fa f db ba frlib C Users Shadow Documents projects cargo target release deps libunicodenormalizationf c adc fc c rlib C Users Shadow Documents projects cargo target release deps libsmallvec aac cde rlib C Users Shadow Documents projects cargo target release deps libunicodebidi c ee c farlib C Users Shadow Documents projects cargo target release deps libmatches d b d debefcd rlib C Users Shadow Documents projects cargo target release deps libcrossbeamutilsfcff ff crlib C Users Shadow Documents projects cargo target release deps liblazystatic f rlib C Users Shadow Documents projects cargo target release deps liblazycellaaf c a bf f rlib C Users Shadow Documents projects cargo target release deps libjobserver e d f d ea dd rlib C Users Shadow Documents projects cargo target release deps libfiletimeb c a e rlib C Users Shadow Documents projects cargo target release deps libwinapi e d e c rlib C Users Shadow Documents projects cargo target release deps libsemverbd f crlib C Users Shadow Documents projects cargo target release deps libsemverparserffe d rlib C Users Shadow Documents projects cargo target release deps libcargoplatform f ab fbf rlib C Users Shadow Documents projects cargo target release deps libserdeb b b e b rlib C Users Shadow Documents projects cargo target release deps liblog b bd cf b rlib C Users Shadow Documents projects cargo target release deps libcfgifdec ab ccbrlib C Users Shadow Documents projects cargo target release deps libanyhow fb c d bcerlib Wlstartgroup C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib libstdb edf d b d f rlib C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib libpanicunwind e ee f c drlib C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib libhashbrowne afb ab e rlib C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib librustcstdworkspacealloce aaa rlib C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib libbacktraceb f a eerlib C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib libbacktracesys a dee rlib C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib librustcdemangle bb c c d rlib C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib libunwind a c c dd f b rlib C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib libcfgif cd d f rlib C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib liblibce a adcdb c frlib C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib liballocd c fc rlib C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib librustcstdworkspacecoree ce c e rlib C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib libcore aa b bb erlib Wlendgroup C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib libcompilerbuiltinsb afd drlib WlBdynamic lwinhttp lrpcrt lole lcrypt lbcrypt lcrypt luser lntdll ladvapi lws lcrypt lz lwinapiadvapi lwinapibcrypt lwinapicfgmgr lwinapicredui lwinapicrypt lwinapicryptnet lwinapifwpuclnt lwinapigdi lwinapikernel lwinapimsimg lwinapincrypt lwinapintdll lwinapiopengl lwinapipsapi lwinapisecur lwinapishell lwinapishlwapi lwinapisynchronization lwinapiuser lwinapiwinspool lwinapiws ladvapi lws luserenv WlBstatic lgcceh lpthread WlBdynamic lmingwex lmingw lgcc lmsvcrt lmsvcrt luser lkernel C Users Shadow rustup toolchains stablex pcwindowsgnu lib rustlib x pcwindowsgnu lib rsendo note ld cannot find lntdll ld cannot find lz Both are similar to rustccdyliblinkarg The rustcbinlinkarg option adds C linkarg on binary targets The rustclinkarg option adds C linkarg on all supported targets currently only binaries and cdylib libraries Fixed Thanks for filing a feature request cargo should support multipackage dependency management just like the dependencyManagement tag provided by maven This is useful in a variety of situations such as Embedding one binary into another ie BIOS kernel Testing using a thirdparty utility ie nc Fixes This fixes a regression from where the sysroottargetlibdir leaks into the host libdir This can cause problems when the dynamic linker does not ignore the target libraries but tries to load them instead This happens for example when building on x musl for aarch musl On rustlangrust it was discovered that certain CC dependencies need to be linked with pthread instead of lpthread on certain platforms such as riscv and some arm cases Currently there is no way for a buildrs script to express this however The closest thing is rustcdyliblinkargs which only applies when building a cdylib Describe the problem you are trying to solve I would like to unset environment variables when tests are run I need this because I have tests for a CLI program it uses structopt and if the environment Im running in has certain environment variables set it can interfere with the tests Describe the solution youd like I first tried to remove the environment variables in a build script using stdenvremovevarVAR but that didnt work Then tried to do this in a build script using cargorustcenvVAR however this still sets it to an empty string So a similar option like cargorustcremoveenvVAR would be nice Of course a way to run some code before tests are run could also solve this So now I have to remove the environment variables in every test When building with cargo under a GNU make jobserver cargo races with whatever else GNU make is doing In the case of Firefox cargo is mostly racing with clangc or g Because rust build times are generally worse than C build times combined with the serialized nature of some crate dependencies in Firefox its important for rust code to build as quickly as possible because thats what the build ends up waiting for when there is enough parallelism And to do that its important for rust compilation to start as quickly as possible What Ive observed happens in practice is that because cargo races with the C compiler to get tokens it can end up waiting for new tokens although it was holding one just moments before for a job that just finished And this can and does delay rust compilations by that time it takes to get that token That being said it doesnt seem to be adding that much overhead all things considered At least it seems to be less than the overhead of waiting for tokens at the very start of the cargo build but there theres really nothing that cargo can do although I wonder if one read would allow to get tokens faster than read on the jobserver pipe or is it write I forget