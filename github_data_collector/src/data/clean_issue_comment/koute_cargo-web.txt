In my Cargotoml I have reqwest version features blocking json In the Visual Studio Code compilation is fine it is not showing errors in my code But when I run with cargo web I get no method named json found for type reqwestwasmresponseResponse It seems that cargo web only compiles the default feature not the additional ones How can I add those is a report from a cargoweb user whose Emscripten installation is managed by cargoweb but is invalid I took a look at the cargoweb source and noticed a few issues The help messages with instructions for installing Emscripten should probably recommend using emsdk regardless of the platform since thats the only distribution method maintained by the Emscripten team and will make getting the latest bugfixes much easier The instructions for installing emsdk are out of date The current recommended method is to clone from GitHub The mozillagames s bucket is not being updated any more It looks like cargoweb is trying to use Emscriptens fastcomp backend but recent versions of Rust have switched to using Emscripten with Rusts LLVM rather than the separate fastcomp LLVM Recent emsdk versions install the upstreamLLVM version of Emscripten by default It would be awesome if this was supported somehow thoughts stderr Compiling aaa v homeelichai gitsbitcoinhashesaaa error linking with emcc failed exit code note emcc s DISABLEEXCEPTIONCATCHING L homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenlib homeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca wuxgcw dyeug rcguo homeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca edp pkhkg bzajrcguo homeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca alywq rkbip orcguo homeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca unkmon a l xrcguo homeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca pktckg sdl ck rcguo homeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca z hvcq xn or rcguo homeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca ayxfsvk k b rcguo homeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca onwm yoaqbflrcguo homeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca atbcd y pa l xrcguo homeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca dg rylx w x p rcguo homeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca xwly jwd by drcguo o homeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca js s EXPORTEDFUNCTIONS main rustehpersonality homeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca bac vwk l tb rcguo O memoryinitfile g s DEFAULTLIBRARYFUNCSTOINCLUDE L homeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdeps L homeelichai gitsbitcoinhashesaaatargetdebugdeps L homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenlib homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenliblibtest dc e f arlib homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenliblibterm d b d df d rlib homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenliblibgetoptsfd e a d ed rlib homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenliblibunicodewidth a d b e e ce rlib homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenliblibrustcstdworkspacestded c ef d b rlib homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenliblibstdb ae rlib homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenliblibpanicunwindefbc c b ccrlib homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenliblibhashbrownb d a ffberlib homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenliblibrustcstdworkspaceallocba d d d rlib homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenliblibbacktrace dc e ea rlib homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenliblibrustcdemanglef e dccb drlib homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenliblibunwind b de b rlib homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenliblibcfgif a a edf da rlib homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenlibliblibc fabc efa derlib homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenlibliballoc dc b e b rlib homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenliblibrustcstdworkspacecore bf bb rlib homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenliblibcoreef e edrlib homeelichai rustuptoolchainsstablex unknownlinuxgnulibrustlibasmjsunknownemscriptenliblibcompilerbuiltins ed d cb abcrlib l c s NOEXITRUNTIME s ALLOWMEMORYGROWTH s ERRORONUNDEFINEDSYMBOLS s ASSERTIONS s ABORTINGMALLOC Wlfatalwarnings s WASM note homeelichai localsharecargowebemscriptenx unknownlinuxgnuemscriptenemccpy SyntaxWarning is not with a literal Did you mean newargs arg for arg in newargs if arg is not homeelichai localsharecargowebemscriptenx unknownlinuxgnuemscriptenemccpy SyntaxWarning is not with a literal Did you mean newargs a for a in newargs if a is not WARNINGroothomeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca wuxgcw dyeug rcguo is not valid LLVM bitcode WARNINGroothomeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca edp pkhkg bzajrcguo is not valid LLVM bitcode WARNINGroothomeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca alywq rkbip orcguo is not valid LLVM bitcode WARNINGroothomeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca unkmon a l xrcguo is not valid LLVM bitcode WARNINGroothomeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca pktckg sdl ck rcguo is not valid LLVM bitcode WARNINGroothomeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca z hvcq xn or rcguo is not valid LLVM bitcode WARNINGroothomeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca ayxfsvk k b rcguo is not valid LLVM bitcode WARNINGroothomeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca onwm yoaqbflrcguo is not valid LLVM bitcode WARNINGroothomeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca atbcd y pa l xrcguo is not valid LLVM bitcode WARNINGroothomeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca dg rylx w x p rcguo is not valid LLVM bitcode WARNINGroothomeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca xwly jwd by drcguo is not valid LLVM bitcode WARNINGroothomeelichai gitsbitcoinhashesaaatargetasmjsunknownemscriptendebugdepsaaaaaf c a ca bac vwk l tb rcguo is not valid LLVM bitcode WARNINGrootobject tmpemscriptentempwtthddfarchivecontentstest dc e f atestbr p gcgu rcguo is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempwtthddfarchivecontentsrustmetadatabin is not LLVM bitcode cannot link WARNINGrootobject tmpemscriptentempwtthddfarchivecontentstest dc e f atestbr p gcgu rcgubcz is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentemp n lqjjsarchivecontentsterm d b d df d termbcaubu ccgu rcguo is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentemp n lqjjsarchivecontentsrustmetadatabin is not LLVM bitcode cannot link WARNINGrootobject tmpemscriptentemp n lqjjsarchivecontentsterm d b d df d termbcaubu ccgu rcgubcz is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempiboucjx archivecontentsgetoptsfd e a d ed getoptsd vrqcjtcgu rcguo is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempiboucjx archivecontentsrustmetadatabin is not LLVM bitcode cannot link WARNINGrootobject tmpemscriptentempiboucjx archivecontentsgetoptsfd e a d ed getoptsd vrqcjtcgu rcgubcz is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempqyi o d archivecontentsunicodewidth a d b e e ce unicodewidthdpuwlse cgu rcguo is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempqyi o d archivecontentsrustmetadatabin is not LLVM bitcode cannot link WARNINGrootobject tmpemscriptentempqyi o d archivecontentsunicodewidth a d b e e ce unicodewidthdpuwlse cgu rcgubcz is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempvklq marchivecontentsrustcstdworkspacestded c ef d b rustcstdworkspacestd n ompc cgu rcguo is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempvklq marchivecontentsrustmetadatabin is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempvklq marchivecontentsrustcstdworkspacestded c ef d b rustcstdworkspacestd n ompc cgu rcgubcz is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentemp zduqeudarchivecontentsstdb ae std w w wxdcgu rcguo is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentemp zduqeudarchivecontentsrustmetadatabin is not LLVM bitcode cannot link WARNINGrootobject tmpemscriptentemp zduqeudarchivecontentsstdb ae std w w wxdcgu rcgubcz is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempy n lslarchivecontentspanicunwindefbc c b ccpanicunwindceedba xcgu rcguo is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempy n lslarchivecontentsrustmetadatabin is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempy n lslarchivecontentspanicunwindefbc c b ccpanicunwindceedba xcgu rcgubcz is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempfl ck hiarchivecontentshashbrownb d a ffbehashbrown wdiqr cgu rcguo is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempfl ck hiarchivecontentsrustmetadatabin is not LLVM bitcode cannot link WARNINGrootobject tmpemscriptentempfl ck hiarchivecontentshashbrownb d a ffbehashbrown wdiqr cgu rcgubcz is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentemp e piguarchivecontentsrustcstdworkspaceallocba d d d rustcstdworkspaceallocf ee gcgu rcguo is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentemp e piguarchivecontentsrustmetadatabin is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentemp e piguarchivecontentsrustcstdworkspaceallocba d d d rustcstdworkspaceallocf ee gcgu rcgubcz is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempttebr archivecontentsbacktrace dc e ea backtrace dyqlcgu rcguo is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempttebr archivecontentsrustmetadatabin is not LLVM bitcode cannot link WARNINGrootobject tmpemscriptentempttebr archivecontentsbacktrace dc e ea backtrace dyqlcgu rcgubcz is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempyh ggskarchivecontentsrustcdemanglef e dccb drustcdemanglechq jcgu rcguo is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempyh ggskarchivecontentsrustmetadatabin is not LLVM bitcode cannot link WARNINGrootobject tmpemscriptentempyh ggskarchivecontentsrustcdemanglef e dccb drustcdemanglechq jcgu rcgubcz is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempwcm ratxarchivecontentsunwind b de b unwind f k upncgu rcguo is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempwcm ratxarchivecontentsrustmetadatabin is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempwcm ratxarchivecontentsunwind b de b unwind f k upncgu rcgubcz is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentemps o archivecontentscfgif a a edf da cfgif yxovj bcgu rcguo is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentemps o archivecontentsrustmetadatabin is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentemps o archivecontentscfgif a a edf da cfgif yxovj bcgu rcgubcz is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempet cg pyarchivecontentslibc fabc efa delibc pvg ha cgu rcguo is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempet cg pyarchivecontentsrustmetadatabin is not LLVM bitcode cannot link WARNINGrootobject tmpemscriptentempet cg pyarchivecontentslibc fabc efa delibc pvg ha cgu rcgubcz is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentemppeqmbfarchivecontentsalloc dc b e b alloc qho fucgu rcguo is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentemppeqmbfarchivecontentsrustmetadatabin is not LLVM bitcode cannot link WARNINGrootobject tmpemscriptentemppeqmbfarchivecontentsalloc dc b e b alloc qho fucgu rcgubcz is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentemp g x i carchivecontentsrustcstdworkspacecore bf bb rustcstdworkspacecore bl gum cgu rcguo is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentemp g x i carchivecontentsrustmetadatabin is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentemp g x i carchivecontentsrustcstdworkspacecore bf bb rustcstdworkspacecore bl gum cgu rcgubcz is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempxtz hsaoarchivecontentscoreef e edcore xrgfuicgu rcguo is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempxtz hsaoarchivecontentsrustmetadatabin is not LLVM bitcode cannot link WARNINGrootobject tmpemscriptentempxtz hsaoarchivecontentscoreef e edcore xrgfuicgu rcgubcz is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempe l e archivecontentscompilerbuiltins ed d cb abccompilerbuiltinsetpapbmwcgu rcguo is not valid according to llvmnm cannot link WARNINGrootobject tmpemscriptentempe l e archivecontentsrustmetadatabin is not LLVM bitcode cannot link WARNINGrootobject tmpemscriptentempe l e archivecontentscompilerbuiltins ed d cb abccompilerbuiltinsetpapbmwcgu rcgubcz is not valid according to llvmnm cannot link ERRORrootundefined exported function main error aborting due to previous error error could not compile aaa To learn more run the command again with verbose error build failed steps to reproduce mkdir aaa cd aaa cargo new cargo new help cargo init cargo web test targetasmjsunknownemscripten cargo bc e c be rustc e stderrorError has its description function deprecated since Rust The rest were unused imports or functions missing dyn or extra mut This other crate is being maintained and it offers better performances when using the asm feature especially on AArch Once is merged it will also allow removing this extra crate from the build When trying to compile the minimal example from stdweb to emscripten target I get the following error cargo web start targetwasm unknownemscripten error linking with emcc failed exit code note emcc s note CRITICALrootCould not verify LLVM version Errno No such file or directory CRITICALrootfastcomp in use but LLVM has not been built with the JavaScript backend as a target llc reports no targets could be identified Errno No such file or directory CRITICALrootyou can fall back to the older prefastcomp compiler core although that is not recommended see INFOrootEmscripten Running sanity checks ERRORrootfailing sanity checks due to previous fastcomp failure some output elided My best guess is that emscripten cant find llvm It should be discoverable at least through pkgconfig Additionally I noticed cargoweb downloaded its own version of emscripten I believe providing my own version of emscripten would solve the issue from my systems packages how can I do that Misc information fish cargo web version cargoweb cargo version cargo nightly e llc version This is from my system Im pretty sure its not found LLVM LLVM version Optimized build Default target x unknownlinuxgnu Host CPU sandybridge rustup target list asmjsunknownemscripten installed wasm unknownemscripten installed wasm unknownunknown installed x unknownlinuxgnu installed emcc version From my system I dont think it was found by cargoweb emcc Emscripten gccclanglike replacement unknown revision uname all Linux NixOS SMP Sat Dec UTC x GNULinux This error is the same regardless of what I try to compile I gave the minimal example for illustration and reproducibility but I can actually reproduce with any other example project and a few other projects Also of note is that the wasm unknownunknown target successfully compiled for every example I tried My build script parses large and constant text files to spit their content into a constantsrs file The reason for this is to ignore file loading headaches by already having the file loaded in memory by the time you execute the program cargo web start is incompatible with this because it watches all source files for changes When a file is changed like mainrs it launches a build The build generates a new constantsrs and the build restarts again and again until I kill the process I recommend a regex or array in the Webtoml where you can include files to be excluded by the watch to allow codegen tools and file watching to coexist peacefully smile Howdy I was trying to build and install cargoweb when I ran into a build error error failed to run custom build command for opensslsys v Caused by process didnt exit successfully tmpcargoinstall zQkcreleasebuildopensslsysee ed f fcb buildscriptmain exit code stdout cargorustccfgconstfn CCx unknownnetbsd None CCx unknownnetbsd None HOSTCC None CC None CFLAGSx unknownnetbsd None CFLAGSx unknownnetbsd None HOSTCFLAGS None CFLAGS None CRATECCNODEFAULTS None DEBUG Somefalse CARGOCFGTARGETFEATURE Somefxsrmmxssesse running perl perl Configure prefixtmpcargoinstall zQkcreleasebuildopensslsys e e b af outopensslbuildinstall nodso nossl nounittest nocomp nozlib nozlibdynamic noengine noasync noshared BSDx O ffunctionsections fdatasections fPIC m Configuring OpenSSL version d x fL for BSDx Using osspecific seed configuration Creating configdatapm Creating Makefile OpenSSL has been successfully configured If you encounter a problem while building please open an issue on GitHub and include the output from the following command perl configdatapm dump If you are new to OpenSSL you might want to consult the Troubleshooting section in the INSTALL file first running make make depend running make make buildlibs stderr make illegal argument to j must be positive integer thread main panicked at Error building OpenSSL Command make make buildlibs Exit status exit code homegigavinylcargoregistrysrcgithubcom ecc db ec opensslsrc dsrclibrs note run with RUSTBACKTRACE environment variable to display a backtrace warning build failed waiting for other jobs to finish error failed to compile cargoweb v intermediate artifacts can be found at tmpcargoinstall zQkc After updating to Rust I can no longer run cargo web build p package in a virtual workspace it says that error error features is not allowed in the root of a virtual workspace I found this line in the Chagelog of Cargo features and nodefaultfeatures in the root of a virtual workspace will now generate an error instead of being ignored rustlangcargo 