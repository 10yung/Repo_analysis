 Star isIPhoneX X X BOOLnavigationBarUINavigationBar navigationBar shouldPopItemUINavigationItem item if UIDevice currentDevice systemVersion doubleValue return YES else weak typeof self weakSelf self idUIViewControllerTransitionCoordinator coor selftopViewController transitionCoordinator if coor initiallyInteractive YES NSString sysVersion UIDevice currentDevice systemVersion if sysVersion floatValue if availableiOS coor notifyWhenInteractionChangesUsingBlock idUIViewControllerTransitionCoordinatorContext Nonnull context strong typeof self pThis weakSelf pThis dealInteractionChangescontext else Fallback on earlier versions else coor notifyWhenInteractionEndsUsingBlock idUIViewControllerTransitionCoordinatorContext Nonnull context strong typeof self pThis weakSelf pThis dealInteractionChangescontext return YES NSUInteger itemCount selfnavigationBaritemscount NSUInteger n selfviewControllerscount itemCount UIViewController popToVC selfviewControllers selfviewControllerscount n self popToViewControllerpopToVC animatedYES return YES presentViewController 