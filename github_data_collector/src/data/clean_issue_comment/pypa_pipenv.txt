 Is your feature request related to a problem Please describe As discussed on Twitter with Kenneth Pipenv could speed up the locking process by not downloading artifacts Instead it could use hashvalues exposed by a Python index as described in PEP The URL SHOULD include a hash in the form of a URL fragment with the following syntax hashnamehashvalue where hashname is the lowercase name of the hash function such as sha and hashvalue is the hex encoded digest If hashvalues are not exposed eg private repositories hashvalues can be computed by downloading artifacts as its donw now fallback scenario Describe the solution youd like Pipenv could use exposed hashvalues not to download artifacts on each locking Describe alternatives youve considered The current solution download and compute hashes of artifacts each time during locking Issue description Pipenv seems to prioritize narrower sysplatform condition between packages when lock Ex Pytest requires colorama only when os is Windows Pipenvsetup requires colorama everytime When I run pipenv install pytest pipenvsetup Expected result Pipfilelock should be json colorama hashes sha eed e e ad b c c a b b ddd d d sha f ac de f b c e b c eaa f e c b daec edaabbd c version Actual result The actual Pipfilelock was json colorama hashes sha eed e e ad b c c a b b ddd d d sha f ac de f b c e b c eaa f e c b daec edaabbd c markers sysplatform win version And when I run pipenvsetup on Linux machine for CI such as GitHub Actions runner I got fail Traceback most recent call last File homerunnerlocalsharevirtualenvsyamldataclassconfigqzvEwgabinpipenvsetup line in module from pipenvsetupmain import cmd File homerunnerlocalsharevirtualenvsyamldataclassconfigqzvEwgalibpython sitepackagespipenvsetupmainpy line in module from colorama import Fore init ModuleNotFoundError No module named colorama error Process completed with exit code Steps to replicate OS Windows Im using Windows pro x Pipenv version Way pipenv install pytest pipenvsetup Way Prepare following Pipfile source name pypi url verifyssl true packages pytest pipenvsetup requires pythonversion then pipenv lock Avoiding method Im avoiding this issue by adding target transitive dependency package into packages of Pipfile source name pypi url verifyssl true packages pytest pipenvsetup Hotfix colorama requires pythonversion And pipenv lock Then I got json colorama hashes sha eed e e ad b c c a b b ddd d d sha f ac de f b c e b c eaa f e c b daec edaabbd c index pypi version detailssummary pipenv supportsummary Pipenv version Pipenv location C Users yukhi AppData Roaming Python Python sitepackages pipenv Python location c python pythonexe Python installations found C Python pythonexe C Python pythonexe PEP Information implementationname cpython implementationversion osname nt platformmachine AMD platformpythonimplementation CPython platformrelease platformsystem Windows platformversion pythonfullversion pythonversion sysplatform win System environment variables ALLUSERSPROFILE APPDATA COLORTERM COMMONPROGRAMFILES COMPUTERNAME COMSPEC CHOCOLATEYINSTALL CHOCOLATEYLASTPATHUPDATE COMMONPROGRAMFILESX COMMONPROGRAMW DRIVERDATA EXEPATH HOME HOMEDRIVE HOMEPATH LANG LOCALAPPDATA LOGONSERVER MSYSTEM NUMBEROFPROCESSORS OS ONEDRIVE PATH PATHEXT PLINKPROTOCOL PROCESSORARCHITECTURE PROCESSORIDENTIFIER PROCESSORLEVEL PROCESSORREVISION PROGRAMFILES PS PSMODULEPATH PUBLIC PWD PROGRAMDATA PROGRAMFILESX PROGRAMW SESSIONNAME SHLVL SYSTEMDRIVE SYSTEMROOT TEMP TERM TERMPROGRAM TERMPROGRAMVERSION TMP USERDOMAIN USERDOMAINROAMINGPROFILE USERNAME USERPROFILE WINDIR PIPDISABLEPIPVERSIONCHECK PYTHONDONTWRITEBYTECODE PIPSHIMSBASEMODULE PIPPYTHONPATH PYTHONFINDERIGNOREUNSUPPORTED Pipenv specific environment variables Debug specific environment variables PATH C Program Files Git mingw binC Program Files Git usr binC Users yukhi binC Python ScriptsC Python C Python ScriptsC Python C windows system C windowsC windows System WbemC windows System WindowsPowerShell v C windows System OpenSSHC ProgramData chocolatey binC Program Files Microsoft VS Code binC Program Files Git cmdC Program Files TortoiseGit binC Users yukhi AppData Local Microsoft WindowsAppsC Users yukhi AppData Roaming Python Python Scripts LANG jaJPUTF PWD CUsersyukhiworkspacebugpipenv Contents of Pipfile C Users yukhi workspace bugpipenv Pipfile toml source name pypi url verifyssl true devpackages packages pytest pipenvsetup requires pythonversion Contents of Pipfilelock C Users yukhi workspace bugpipenv Pipfilelock json meta hash sha f dbe fafe c ca ba f aa bd d b pipfilespec requires pythonversion sources name pypi url verifyssl true default appdirs hashes sha e d f dd faf e d c c d f f a b d sha d b d d ddfaec d d cea e c eaf f df e e version atomicwrites hashes sha c eb c d ba e c ca ab fbfbbda aa dc e fc b sha a bac d d d e fe ba a a dfd ce ec a ed cfa markers sysplatform win version attrs hashes sha a c c a e eb afb a f cb f d e ba bb edfa cb d c sha f b ce fe acd d a f fb a f e b bbc b f b e version black hashes sha b e be fafc ee e e abef b fe fe ee e e b sha c edb a e e e f a e af b b b cdd bef d a b df dc markers pythonversion version b cachedproperty hashes sha a f a e da ce b c f f f e c d f sha a f a da c b deadbfc ac e ccf c e a version cerberus hashes sha c c a acaebc f b b c adfa sha e f dd cb f fd b ab d c c c d f fa b f version certifi hashes sha c db a ce d bc e f e e a f f de df fbb sha b c da cd d c c d eb aab a e a ea cc c f f version chardet hashes sha ab ed c d f e b b a c fb db cc e cbd a e a eaae sha fc ffcaeaed e a bf d b aed d ed e e c version click hashes sha e b e ca de f bfa ceead adf d bdc b sha b b f fdb cd a eca a fa dd df c d a ff d version colorama hashes sha eed e e ad b c c a b b ddd d d sha f ac de f b c e b c eaa f e c b daec edaabbd c markers sysplatform win version distlib hashes sha e e a b d dfe a c f ed ace ee b de version first hashes sha d e e ea ac c c e ff aef f c ceefcea dec sha ff b c f c ce ea af c f f bd f af d bf version idna hashes sha c b f cf ae c c ecc ca e d bcde e c sha ea b f e fa c df da fc d abf ac f c f e a c version moreitertools hashes sha a a c d fe eb a ebee c d d f f b sha c adec b a cb a db eb da d c f f b d version orderedmultidict hashes sha bbb e cc bfa df faf c c d a f b bea cd ad sha c a ee cdd c deca a a f ca d a bf c cf adbf version packaging hashes sha b df a fa c ff c e f e f d a fc sha d c d f def baf ab a ca c e fecba fc dde ed version pathspec hashes sha b d e cef cf b d fd b bac e c d a d e sha aa af e d d ad aed de f e fd d dca d b version pep hashes sha ce f be d bb d b fcaba e f c c e sha e eeeffe ccd be d df d cb f d c c a version pipshims hashes sha e d f a d a fc d cdf e a dab f a ce sha d b d a cbd f ea e ac f e b cade b c b d version pipenvsetup hashes sha dc d e ea bdff c ed a dfd e f eeb b db d d e bc sha cd b e ea cf f e cd a ce df eac index pypi version pipfile hashes sha f d f de b eb cc aa a ac bc d f d c version plette extras validation hashes sha c e d eadddad a e dd f c f dcd b a sha d c b b bddd b b a c eb ef bb b a c d dca version pluggy hashes sha b acde e d b ed de b cf bfa c b sha c cd c c c f b af af e ca a d d version py hashes sha e ad e f b aa c dbcb dae de aa sha c fdd a dbc af efd bee a e f fffcacc ba f db b version pyparsing hashes sha c a fb b bc f f c f e f e f f sha c dccb c d fd f b a ca b e cd a e dcec version pytest hashes sha b b a f b f f c a cf bb ef bc ff afb b fa sha e d ff babd fad ad e b d d e a c ff d de index pypi version regex hashes sha b bf d d fe d d f df ff fe c e d e e sha cdfb afcbc cc bcf c f d d a b c d dbf bbc d c b sha e d f ea a fa b ae be be e a ba sha ee cf dc bc b bb c af c c c d bb sha e c c ff f f b b fd e cda ce a fd dea c a sha ff c f b d b b d c f e b b c b c sha b d ba a b b bb f e c ea afdbf sha e b b a da a abfd c ad da f bbcdb cf d c d sha e f d d ca efc f c d bcc aefc ec f bb c a sha eae aec cf ab ab b e f da b a ee b sha a ae bf f d d e a ce b c ff dba c e c b sha a ba b cd cd b a e dc ae bdd b a ce be sha bcd abcc bfe b c abd b f d bbb edfdd sha b ed bb e cbb b f b fd cf b ab e e f e fb d f sha bd bb e e ccccd e b f c a c cff d d b sha d f f b b b f e b c b d c f e sha d e da a c baeb cfa e c a cec a e c bee b f d sha e cd cc ca de bbe f f c deb ceda ad ca ee f b sha e c d ed ca f f fa d db b ee b c a b sha e c f bce eaae fd ca b b c f ff ed f c sha ecc de df ef fee bb cb e e d d f d ef fce d version requests hashes sha e a a aa f a e e a d e e d e fba ba cbeb sha cf fcd f c cfc e d d a f bb e a f c dc c b version requirementslib hashes sha ac e c df a a f aa f e bc d c b eebc d sha b ab b ee cffd fc de d b dd c a fe a version six hashes sha bdbdce e e a d a c f b ca e c b e a ec ce c a sha f cd e d f e f d d df b b d f da c ea b c version toml hashes sha f c a d e fc bf bab a dfd ed df ce f e d c sha dd d d a df e a a b da b cf ebc e version tomlkit hashes sha c cc ded e c f cc a be f c cd c sha e a c ef b de e ab aa f b e d bcd version typedast hashes sha aa aed f be ff ab eeac ef def ea fa f sha c c d a b afb e e b fd d e c a sha d f f f e aad d b aa e d cc b f aa sha c eb ad a b b dde da e f d c b b a cf sha b f a f a a ab d f b de f e d b sha b aa b bd ddc eb fa b e cf f d cf a f e sha b f cc c fead d fc d f d c c ba fb c fbc a d d sha e e da ccbebfff a bf d c ccc d e c aea fdfdfd c sha daac f c a ade ed c ee cc aa cfdf c defeb a sha ff f df fc d b fd ebfc f c af a a c c sha d a fc dd a d d f d cb ab a c sha c aaad e ab c b a f ee e cf f ba eb ec b sha ce dbaf dbdb eba d fb f dd b cdbb sha aaee aee ba cfb c f e b bec b f a f be e ea ebb sha bcd b b ea b b cabd b a b ced e ccad a f b sha c e e e d b a b eedb df fa e de ff fbd b sha d b b b e f ce bd e b bf ec b a f f sha d ef f a c bf e ba ac a de aa acf ad ad d sha d d e e af b a dc f f ebf f c fd d c ad fe sha fc fea acb edbf a ba d f bdbdb db fa cf fca sha fe b ec dd c b b e f fd ae f f b e a dc b e version typing hashes sha dfe f f ee cc d edbbf e b fb fef f b eba sha c cabb ab cd f be d db cc eb e d dc e cb d d sha f d c a a a f d c a ab c d f ffaa version urllib hashes sha a a cc d fd b bec ded d fe b c a e f a sha f c fd d d dcf f c f f aab fda b aba a e b version vistir hashes sha f e d a b d c b c a e b fcf ed ad c sha e afdec baf a d f ecd f d e af c de fe a e version wcwidth hashes sha fd f be b bd df dc c ba a e e e f c sha f b e a e d e f ac a e ae b ba defd e fb a version wheel hashes sha c da ed f e c eb dd dc ab d fde dc sha f da d becf e cd a a c f f eca fdde ea c b faf version develop details The issue More documentation for env files The fix Added in more documentation and also added documentation to upstream project The checklist x Associated issue x A news fragment in the news directory to describe this fix with the extension bugfix feature behavior doc vendor or trivial this will appear in the release changelog Use semantic line breaks and name the file after the issue number or the PR Hi This might be a slightly silly question but your readme says at the very top Windows is a firstclass citizen in our world But then in the Installation section there are no installation instructions for Windows Otherwise refer to the documentation for instructions Even if I click on this docs link I am still unable to read any installation instructions for Windows on that website Kind of makes me strongly question the Windows is a firstclass citizen in our world or is there some sarcasm that I fail to see Thanks Hi I think your SayThanks link in your main readme is down It shows a parkio domain auction page Hello Heres my stack trace Am I doing something wrong or is it something that should be fixed pipenv install python python d Creating a virtualenv for this project Pipfile buildscloudbackPipfile Using usrlocalbinpython a to create virtualenv Already using interpreter usrlocalbinpython Using base prefix usrlocal New python executable in rootlocalsharevirtualenvsbackpv NqEqabinpython Installing setuptools pip wheel done Virtualenv location rootlocalsharevirtualenvsbackpv NqEqa Warning Your Pipfile requires pythonversion but you are using a rootlocalsharevbbinpython pipenv rm and rebuilding the virtual environment may resolve the issue pipenv check will surely fail Pipfilelock not found creating Traceback most recent call last File usrlocalbinpipenv line in module sysexitcli File usrlocallibpython sitepackagespipenvvendorclickcorepy line in call return selfmainargs kwargs File usrlocallibpython sitepackagespipenvvendorclickcorepy line in main rv selfinvokectx File usrlocallibpython sitepackagespipenvvendorclickcorepy line in invoke return processresultsubctxcommandinvokesubctx File usrlocallibpython sitepackagespipenvvendorclickcorepy line in invoke return ctxinvokeselfcallback ctxparams File usrlocallibpython sitepackagespipenvvendorclickcorepy line in invoke return callbackargs kwargs File usrlocallibpython sitepackagespipenvvendorclickdecoratorspy line in newfunc return ctxinvokef obj args kwargs File usrlocallibpython sitepackagespipenvvendorclickcorepy line in invoke return callbackargs kwargs File usrlocallibpython sitepackagespipenvvendorclickdecoratorspy line in newfunc return fgetcurrentcontext args kwargs File usrlocallibpython sitepackagespipenvclicommandpy line in install retcode doinstall File usrlocallibpython sitepackagespipenvcorepy line in doinstall doinit File usrlocallibpython sitepackagespipenvcorepy line in doinit dolock File usrlocallibpython sitepackagespipenvcorepy line in dolock devpackages projectdevpackagescopy File usrlocallibpython sitepackagespipenvprojectpy line in devpackages return selfbuildpackagelistdevpackages File usrlocallibpython sitepackagespipenvprojectpy line in buildpackagelist anyisinstallablefilei for i in k v File usrlocallibpython sitepackagespipenvprojectpy line in genexpr anyisinstallablefilei for i in k v File usrlocallibpython sitepackagespipenvutilspy line in isinstallablefile from patchednotpipinternalutilspackaging import specifiers File usrlocallibpython sitepackagespipenvpatchednotpipinternalutilspackagingpy line in module from pipenvpatchednotpipinternal import exceptions File usrlocallibpython sitepackagespipenvpatchednotpipinternalinitpy line in module from pipenvpatchednotpipinternalcliautocompletion import autocomplete File usrlocallibpython sitepackagespipenvpatchednotpipinternalcliautocompletionpy line in module from pipenvpatchednotpipinternalclimainparser import createmainparser File usrlocallibpython sitepackagespipenvpatchednotpipinternalclimainparserpy line in module from pipenvpatchednotpipinternalcommands import File usrlocallibpython sitepackagespipenvpatchednotpipinternalcommandsinitpy line in module from pipenvpatchednotpipinternalcommandscompletion import CompletionCommand File usrlocallibpython sitepackagespipenvpatchednotpipinternalcommandscompletionpy line in module from pipenvpatchednotpipinternalclibasecommand import Command File usrlocallibpython sitepackagespipenvpatchednotpipinternalclibasecommandpy line in module from pipenvpatchednotpipinternalindex import PackageFinder File usrlocallibpython sitepackagespipenvpatchednotpipinternalindexpy line in module from pipenvpatchednotpipvendor import html lib requests six File usrlocallibpython sitepackagespipenvpatchednotpipvendorhtml libinitpy line in module from html parser import HTMLParser parse parseFragment File usrlocallibpython sitepackagespipenvpatchednotpipvendorhtml libhtml parserpy line in module from import tokenizer File usrlocallibpython sitepackagespipenvpatchednotpipvendorhtml libtokenizerpy line in module from trie import Trie File usrlocallibpython sitepackagespipenvpatchednotpipvendorhtml libtrieinitpy line in module from py import Trie as PyTrie File usrlocallibpython sitepackagespipenvpatchednotpipvendorhtml libtriepypy line in module from base import Trie as ABCTrie File usrlocallibpython sitepackagespipenvpatchednotpipvendorhtml libtriebasepy line in module from collections import Mapping ImportError cannot import name Mapping from collections usrlocallibpython collectionsinitpy When I try to lock my dependencies pipenv gives long error traceback that boils down to pipenvexceptionsResolutionFailure ERROR ERROR Could not find a version that matches botocore pipenv lock clear gives the same result I do as instructed and try pipenv install skiplock which succeeds then pipenv graph The output from latter is also very long so I grep the interesting part out of it withpipenv graph grep botocore botocore required installed botocore required installed botocore required installed botocore required installed Correct me if Im wrong but this output shows different requirements than those on which pipenv errors out How do I find which packages actually provide the conflicting requirements so I can fix them Not pasting pipenv support output because it contains private information and is too long to reasonably redact it Issue description I want to change PyPi index when creating virtual environment but pipenv still to download package via default pypi sourcefilespythonhostedorg pipenv install pypimirror Expected result when creating virtual environment it will to download setuptools via Actual result Installing setuptools pip wheel Complete output from command homejenkinslocalz imbinpython setuptools pip wheel Looking in links usrlocallibpython sitepackagesvirtualenvsupport Collecting setuptools Retrying Retrytotal connectNone readNone redirectNone statusNone after connection broken by ReadTimeoutErrorHTTPSConnectionPoolhostfilespythonhostedorg port Read timed out read timeout packagesafe db dc c bacebbb ccf c f a e f a fded setuptools py py noneanywhl Downloading kB Collecting pip Downloading MB Exception Traceback most recent call last File usrlocallibpython sitepackagesvirtualenvsupportpip py py noneanywhlpipvendorurllib responsepy line in errorcatcher yield File usrlocallibpython sitepackagesvirtualenvsupportpip py py noneanywhlpipvendorurllib responsepy line in read data selffpreadamt File usrlocallibpython sitepackagesvirtualenvsupportpip py py noneanywhlpipvendorcachecontrolfilewrapperpy line in read data selffpreadamt File usrlocalpython libpython httpclientpy line in read n selfreadintob File usrlocalpython libpython httpclientpy line in readinto n selffpreadintob File usrlocalpython libpython socketpy line in readinto return selfsockrecvintob File usrlocalpython libpython sslpy line in recvinto return selfreadnbytes buffer File usrlocalpython libpython sslpy line in read return selfsslobjreadlen buffer File usrlocalpython libpython sslpy line in read v selfsslobjreadlen buffer sockettimeout The read operation timed out Steps to replicate Provide the steps to replicate which usually at least includes the commands and the Pipfile Please run pipenv support and paste the results here Dont put backticks around it The output already contains Markdown formatting detailssummary pipenv supportsummary Pipenv version Pipenv location usrlocallibpython sitepackagespipenv Python location usrlocalbinpython Python installations found usrlocalbinpython m usrlocalbinpython usrbinpython usrbinpython usrbinpython m usrbinpython PEP Information implementationname cpython implementationversion osname posix platformmachine x platformpythonimplementation CPython platformrelease amd platformsystem Linux platformversion SMP Debian pythonfullversion pythonversion sysplatform linux System environment variables JENKINSURL YARNVERSION UPLIBAUTOQASERVICEPORTHTTP LANG QAREPORTDOCPORT JENKINSSERVICEPORTHTTP HOSTNAME JENKINSSERVICEPORTSLAVE QAREPORTDOCSERVICEPORTQAREPORTDOC QAREPORTDOCSERVICEHOST JENKINSPORT TCP JAVAHOME JENKINSPORT TCPPORT JENKINSSERVICEHOST JENKINSTUNNEL KUBERNETESPORT TCPPROTO KUBERNETESPORT TCPADDR UPLIBAUTOQASERVICEHOST JAVAVERSION JENKINSPORT TCPADDR JENKINSPORT TCPPROTO UPLIBAUTOQAPORT TCP KUBERNETESPORT JENKINSPORT TCPPROTO JENKINSPORT TCP QAREPORTDOCSERVICEPORT PWD QAREPORTDOCPORT TCPPORT HOME JENKINSAGENTNAME JENKINSSECRET KUBERNETESSERVICEPORTHTTPS GITVERSION KUBERNETESPORT TCPPORT UPLIBAUTOQAPORT TCPPROTO CACERTIFICATESJAVAVERSION NODEVERSION AGENTWORKDIR JENKINSNAME QAREPORTDOCPORT TCP JAVADEBIANVERSION JENKINSPORT KUBERNETESPORT TCP UPLIBAUTOQAPORT TCPPORT TERM JENKINSPORT TCPPORT SHLVL QAREPORTDOCPORT TCPADDR UPLIBAUTOQASERVICEPORT UPLIBAUTOQAPORT TCPADDR KUBERNETESSERVICEPORT QAREPORTDOCPORT TCPPROTO UPLIBAUTOQAPORT PATH KUBERNETESSERVICEHOST JENKINSPORT TCPADDR JENKINSSERVICEPORT PIPDISABLEPIPVERSIONCHECK PYTHONDONTWRITEBYTECODE PIPSHIMSBASEMODULE PIPPYTHONPATH PYTHONFINDERIGNOREUNSUPPORTED Pipenv specific environment variables Debug specific environment variables PATH usrlocalsbinusrlocalbinusrsbinusrbinsbinbin LANG CUTF PWD homejenkins details pipenv couldnt work with py x PS C Users usta Desktop abc pipenv verbose python C python pythonexe Creating a virtualenv for this project Pipfile C Users usta Desktop abc Pipfile Using C python pythonexe a to create virtualenv Creating virtual environmentAlready using interpreter C python pythonexe Using base prefix C python New python executable in C Users usta virtualenvs abc lAv PqR Scripts pythonexe Installing setuptools pip wheel done Running virtualenv with interpreter C python pythonexe Successfully created virtual environment Virtualenv location C Users usta virtualenvs abc lAv PqR Creating a Pipfile for this project Traceback most recent call last File c python lib runpypy line in runmoduleasmain return runcodecode mainglobals None File c python lib runpypy line in runcode execcode runglobals File C Python Scripts pipenvexe mainpy line in module File C Python Lib sitepackages pipenv vendor click corepy line in call return selfmainargs kwargs File C Python Lib sitepackages pipenv vendor click corepy line in main rv selfinvokectx File C Python Lib sitepackages pipenv vendor click corepy line in invoke return Commandinvokeself ctx File C Python Lib sitepackages pipenv vendor click corepy line in invoke return ctxinvokeselfcallback ctxparams File C Python Lib sitepackages pipenv vendor click corepy line in invoke return callbackargs kwargs File C Python Lib sitepackages pipenv vendor click decoratorspy line in newfunc return ctxinvokef obj args kwargs File C Python Lib sitepackages pipenv vendor click corepy line in invoke return callbackargs kwargs File C Python Lib sitepackages pipenv vendor click decoratorspy line in newfunc return fgetcurrentcontext args kwargs File c python lib sitepackages pipenv cli commandpy line in cli ensureproject File c python lib sitepackages pipenv corepy line in ensureproject ensurepipfile File c python lib sitepackages pipenv corepy line in ensurepipfile projectcreatepipfilepythonpython File c python lib sitepackages pipenv projectpy line in createpipfile configparser ConfigOptionParsernameselfname TypeError NoneType object is not callable PS C Users usta Desktop abc pipenv version pipenv version 