I have a problem with libcurl which is giving me inconsistent redirect behavior on Android and Linux Im doing a GET request which fetches a login page I get an HTTP response back and then a second GET request is made an automatic redirect However there is a slight difference in that second request on the two platforms The one done on Ubuntu works and that done on Android does not due to space chars in the URL From Linux Ubuntu I get the expected response from this redirected GET request It has plus characters on either side of profile GET oauthauthorizeresponsetypecode redirecturi HTTP Host oauthxfinitycom Accept ap anonymous ap i apz Mozilla X Linux i rv Gecko Firefox UserAgent Mozilla X Linux i rv Gecko Firefox CacheControl nocache On Android libcurl is running in a native C module almost the same redirect request is made But instead of plus characters there are space characters This result in a Bad Request response GET oauthauthorizeresponsetypecode redirecturi profile HTTP Host oauthxfinitycom Accept ap anonymous ap i apz Mozilla X Linux i rv Gecko Firefox UserAgent Mozilla X Linux i rv Gecko Firefox CacheControl nocache The Android library is newer The Linux library is linux curl version a android curl version Headers are the same the original requests are byteforbyte the same The original GET request and headers is this add HTTP header ap anonymous add HTTP header ap i add HTTP header apz Mozilla X Linux i rv Gecko Firefox add HTTP header UserAgent Mozilla X Linux i rv Gecko Firefox add HTTP header CacheControl nocache On Linux as on Android when the HTTP response comes after the first request there are spaces in the Location field These are then converted to plus chars only on Linux and the Issue another request to this URL has correctly formed URL HTTP Found AccessControlAllowCredentials true AccessControlAllowHeaders ap ap apzap ap authorization AccessControlAllowMethods POSTGETOPTIONSDELETE CacheControl NoCache ContentType textplain Date Sat Jan GMT Location profile P P CPNOI DSP COR CURa ADMa DEVa OUR BUS IND UNI COM NAV STA Server apigateway SetCookie passgwgwapproduw Path HttpOnly SetCookie AWSALBXBWIXjlQgrqYNPB iCpC gV fIU V z ZsU JDmDOkMpZeex Tu XXqLhFkgkoMBmA d w Fz GWv yJfbkS siR wRhIzITTw gBYmJMe tUOeSQfY ExpiresSat Jan GMT Path SetCookie JSESSIONID E B A D BE E DD FAEF Path HttpOnly SetCookie redirecturlhttps A F Fwwwusanetworkcom Fmrrobot Fvideos F requesttimeout ExpiresThu Feb GMT Path Secure SetCookie clienttypehtml ExpiresThu Feb GMT Path Secure SetCookie clientversion ExpiresThu Feb GMT Path Secure XRequestId cuu Oqs MBzug CgVS qRGqOP WeI ContentLength Connection keepalive Connection to host spauthadobecom left intact Issue another request to this URL Im at a loss with how to get past this Thanks all and greetings from Innsbruck The README file has incorrect info on how to build CURL I did this Downloaded source from github Read the file README which told me to see the file INSTALL for howtobuild instructions I expected the following To find an INSTALL file Failing that a configure file After some research I found which had the correct build instructions curllibcurl version operating system Xubuntu Only file bugs here Ask questions on the mailing lists SECURITY RELATED Post it here There are collections of known issues to be aware of I did this I did not use curlmultiwait in my app I expected the following For curl not to allocate a socketpair for each multi handle curllibcurl version master curl V output operating system linux Ideally Curl should allow one or more of these options configure switch to decide if you want to enable socketpairs for waking up the multi make socket pairs on demand with multiopt to toggle enabledness regards Only file bugs here Ask questions on the mailing lists SECURITY RELATED Post it here There are collections of known issues to be aware of I did this I tried SMTP with IDN in sender email but I got a syntax error ESMTP q si ins gsmtp EHLO insq at your service a c SIZE BITMIME STARTTLS ENHANCEDSTATUSCODES PIPELINING CHUNKING SMTPUTF MAIL FROMenvelopefrom idnws Syntax error q si ins gsmtp MAIL failed QUIT closing connection q si ins gsmtp I expected the following I expected SMTP to support IDN in both sender and recipient addresses to have IDN similar python library does curllibcurl version curl V output operating system Linux There is a large changes how libcurl uploading chunked encoding data between and No static k buffer anymore user is allowed to set it between k and mb in current version with CURLOPTUPLOADBUFFERSIZE BUT it is limited in urlh and setoptc to be not smaller than UPLOADBUFFERMIN Sadly but chunked realtime uploading of small data k is NOT possible anymore in libcurl only large and superduperfast transfers allowed libcurl for years was like swiss army knife in networking it can do anything but not anymore im doing http posting uploading with callback function and multipartformdata chunked encoding in read callback is flushing k of data to the network without problems withing milliseconds size off size off size off size off size off size off no seconds lag between libcurl callback function invocation in with CURLOPTUPLOADBUFFERSIZE set to UPLOADBUFFERMIN size off size off size off size off size off size off see the gap between and second Its not real time anymore and no option to set buffer sizes below k get the Bearer token from the oldconn struct since it may be new for this request even when we reuse an existing connection WARNING curleasysetoptccsid should be reworked appears at runtime on OS when using curleasysetoptccsid because runtime checks in ccsidcurlc did not account for conditional directives As discussed in pull request a better way to handle this would be to remove the conditional directives so that the enumeration indices dont change with compiler options also remove the runtime check and replace with a build time check Building curl under Mac OS with gcc with the Secure Transport enabled fails with the following errors In file included from LibraryDeveloperCommandLineToolsSDKsMacOSX sdkSystemLibraryFrameworksSecurityframeworkHeadersAuthSessionh from LibraryDeveloperCommandLineToolsSDKsMacOSX sdkSystemLibraryFrameworksSecurityframeworkHeadersSecurityh from vtlssectranspc LibraryDeveloperCommandLineToolsSDKsMacOSX sdkSystemLibraryFrameworksSecurityframeworkHeadersAuthorizationh error variably modified bytes at file scope char bytes kAuthorizationExternalFormLength vtlssectranspc In function showverboseservercert vtlssectranspc error SecTrustEvaluateAsync undeclared first use in this function did you mean SecTrustEvaluate ifSecTrustEvaluateAsync NULL SecTrustEvaluate vtlssectranspc note each undeclared identifier is reported only once for each function it appears in I did this curl O tar xf curl targz cd curl CCgcc configure withdarwinssl make I expected the following I expected to successfully build curl curllibcurl version operating system Mac OS I did this Run test in a wolfssh build It fails I expected the following The test should run fine curllibcurl version git master When ABORT is returned from the callback the transfer must stop immediately and the return code must be passed back to the parent all the way up to Curlfillreadbuffer Test was supposed to verify this but it wasnt done right Now it makes sure the callback is never called again after CURLREADFUNCABORT is returned and it also makes sure the data transfer is actually stopped as instructed Also removed the flaky keyword since the test is now modified Fixes Reportedby MrdUkk on github