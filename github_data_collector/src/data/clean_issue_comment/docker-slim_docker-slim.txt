When I try to shrink the application docker image based on the node alpine After I try to start the slim docker container it through the error Post x certificate signed by unknown authority Whats wrong with this This includes golangcilint Sample of the result of CircleCI To use CircleCI we have to enable CircleCI Im getting a bunch of Module does not exist issue after doing ssh dockerslim build thecodingmachinephp v apachenode Running the slim container returns ERROR Module actions does not exist ERROR Module allowmethods does not exist ERROR Module asis does not exist ERROR Module authdigest does not exist ERROR Module substitute does not exist ERROR Module suexec does not exist ERROR Module uniqueid does not exist ERROR Module userdir does not exist ERROR Module usertrack does not exist ERROR Module vhostalias does not exist ERROR Module xml enc does not exist Am I missing something Thanks Hi Ive created simple java project with quarkus If I build image with quarkus native mode I can successfully build slim image but if I use jvm based image it fails to run after buildslim process Steps Create project mvn ioquarkusquarkusmavenplugin Finalcreate DprojectGroupIdorgacme DprojectArtifactIdgettingstarted DclassNameorgacmequickstartGreetingResource Dpathhello cd gettingstarted Build java app mvnw package DskipTeststrue Build docker imageJVM based docker build f srcmaindockerDockerfilejvm t quarkusgettingstartedjvm dockerslim dockerslim build httpprobefalse quarkusgettingstartedjvm Run and got the error docker run quarkusgettingstartedjvmslim Error occurred during initialization of VM Could not find agent library instrument on the library path with error Error loading shared library libinstrumentso No such file or directory Is may be related with this issue but not sure Note Dockerfile generated by quarkus FROM fabric javaalpineopenjdk jre ENV JAVAOPTIONSDquarkushttphost DjavautilloggingmanagerorgjbosslogmanagerLogManager ENV ABENABLEDjmxexporter Be prepared for running in OpenShift too RUN adduser G root nocreatehome disabledpassword chown R deployments chmod R grwX deployments chown R root deployments COPY targetlib deploymentslib COPY targetrunnerjar deploymentsappjar EXPOSE run with user USER ENTRYPOINT deploymentsrunjavash Thanks Given this Dockerfile after running dockerslim via AWS CodeBuild BuildSpec CICD file it seems to let go of binsh can anybody explain why before I delve into the code and general dockerslim strategy Unsure but perhaps related and good repro for issue I am using the following dockerslim command line docker run v varrundockersockvarrundockersock dslimdockerslim incontainer build httpprobefalse ECRumccriseCODEBUILDGITTAGSHORTCOMMITHASH tag ECRumccriseCODEBUILDGITTAGSHORTCOMMITHASHslim Happy to share further logs and context for this if needed cheers Container Running command docker run v varrundockersockvarrundockersock dslimdockerslim incontainer build httpprobefalse ECRumccriseCODEBUILDGITTAGSHORTCOMMITHASH tag ECRumccriseCODEBUILDGITTAGSHORTCOMMITHASHslim Unable to find image dslimdockerslimlatest locally latest Pulling from dslimdockerslim d e d Pulling fs layer d e d Download complete d e d Pull complete Digest sha d fd cc e e db e fb ef f e Status Downloaded newer image for dslimdockerslimlatest time T Z levelinfo msgshim containerdshim started addresscontainerdshimmoby dd f ab a d e a e aa dd e fc shimsock debugfalse pid dockerslim build infoprobe messagechanging continueafter from probe to enter because httpprobe is disabled dockerslim build statestarted dockerslim build infoparams target dkrecrapsoutheast amazonawscomumccrumccriseNOTAG b continuemodeenter dockerslim build stateimageinspectionstart dockerslim build infoimage idsha f f ac d e fe b a f b be f eb aa sizebytes sizehuman GB dockerslim build infoimagestack index nameubuntu idsha bab eef ef f a b d bd a dfc c ad f c d fa ab dockerslim build infoimagestack index name dkrecrapsoutheast amazonawscomumccrumccriseNOTAG b idsha f f ac d e fe b a f b be f eb aa dockerslim build stateimageinspectiondone dockerslim build statecontainerinspectionstart time T Z levelinfo msgLayer sha f bf a e b aed b a bea b cddfaf ace c ef cleaned up dockerslim build infocontainer statuscreated namedockerslimk id dc cb bae b d a d ab f b ba c time T Z levelinfo msgshim containerdshim started addresscontainerdshimmoby dc cb bae b d a d ab f b ba c shimsock debugfalse pid dockerslim build infocmdstartmonitor statussent dockerslim build infoeventstartmonitordone statusreceived dockerslim build infocontainer namedockerslimk id dc cb bae b d a d ab f b ba c targetportlist targetportinfo messageYOU CAN USE THESE PORTS TO INTERACT WITH THE CONTAINER dockerslim build infocontinueafter modeenter messageprovide the expected input to allow the container inspector to continue its execution dockerslim build infoprompt messageUSER INPUT REQUIRED PRESS ENTER WHEN YOU ARE DONE USING THE CONTAINER dockerslim build statecontainerinspectionfinishing time T Z levelinfo msgshim reaped id dc cb bae b d a d ab f b ba c time T Z levelinfo msgignoring event modulelibcontainerd namespacemoby topictasksdelete typeeventsTaskDelete time T Z levelwarning msg dc cb bae b d a d ab f b ba c cleanup failed to unmount IPC umount varlibdockercontainers dc cb bae b d a d ab f b ba c mountsshm flags x no such file or directory dockerslim build statecontainerinspectionartifactprocessing dockerslim build statecontainerinspectiondone dockerslim build statebuilding messagebuilding minified image time T Z levelinfo msgLayer sha f bf a e b aed b a bea b cddfaf ace c ef cleaned up time T Z levelinfo msgLayer sha a f bf c c cf bbce fac ac cb c a db c d cleaned up time T Z levelinfo msgLayer sha a f bf c c cf bbce fac ac cb c a db c d cleaned up time T Z levelinfo msgLayer sha a f bf c c cf bbce fac ac cb c a db c d cleaned up time T Z levelinfo msgLayer sha a f bf c c cf bbce fac ac cb c a db c d cleaned up time T Z levelinfo msgLayer sha a f bf c c cf bbce fac ac cb c a db c d cleaned up time T Z levelinfo msgLayer sha a f bf c c cf bbce fac ac cb c a db c d cleaned up time T Z levelinfo msgLayer sha a f bf c c cf bbce fac ac cb c a db c d cleaned up time T Z levelinfo msgLayer sha a f bf c c cf bbce fac ac cb c a db c d cleaned up time T Z levelinfo msgLayer sha a f bf c c cf bbce fac ac cb c a db c d cleaned up dockerslim build statecompleted dockerslim build inforesults statusMINIFIED BY X GB MB dockerslim build inforesults imagename dkrecrapsoutheast amazonawscomumccrumccriseNOTAG bslim imagesize MB datatrue dockerslim build inforesults artifactslocationbindockerslimstateimages f f ac d e fe b a f b be f eb aaartifacts dockerslim build inforesults artifactsreportcreportjson dockerslim build inforesults artifactsdockerfileoriginalDockerfilefat dockerslim build inforesults artifactsdockerfilenewDockerfile dockerslim build inforesults artifactsseccomp dkrecrapsoutheast amazonawscomumccrseccompjson dockerslim build inforesults artifactsapparmor dkrecrapsoutheast amazonawscomumccrapparmorprofile dockerslim build statedone dockerslim build inforeport fileslimreportjson time T Z levelinfo msgshim reaped id dd f ab a d e a e aa dd e fc time T Z levelinfo msgignoring event modulelibcontainerd namespacemoby topictasksdelete typeeventsTaskDelete time T Z levelwarning msg dd f ab a d e a e aa dd e fc cleanup failed to unmount IPC umount varlibdockercontainers dd f ab a d e a e aa dd e fc mountsshm flags x no such file or directory Container Running command docker run t cpus vPWDumccrisetestdataresultsbcbiotestprojectdockeroutputdir vPWDumccrisetestdatadatabcbiotestprojectbcbioproject vcodebuildoutputrefdatagenomesworkgenomes ECRumccriseCODEBUILDGITTAGSHORTCOMMITHASHslim bcbioproject o outputdir genomes workgenomes time T Z levelinfo msgshim containerdshim started addresscontainerdshimmobye f c a f cb a a c b da ad be c b e fe f shimsock debugfalse pid Error processing line of minicondaenvsumccriselibpython sitepackagesmatplotlib py nspkgpth Traceback most recent call last File minicondaenvsumccriselibpython sitepy line in addpackage execline File string line in module File frozen importlibbootstrap line in modulefromspec AttributeError NoneType object has no attribute loader Remainder of file ignored umccrisedocker NOUSER minicondaenvsumccrisebinumccrise bcbioproject o outputdir genomes workgenomes Using genomes directory workgenomes snakemake snakefile umccriseumccriseSnakefile printshellcmds directory outputdir j rerunincomplete restarttimes config bcbioprojectbcbioproject genomesdirworkgenomes uploadigvno totalcores Traceback most recent call last File minicondaenvsumccrisebinumccrise line in module execcompilefread file exec File umccrisescriptsumccrise line in module main File minicondaenvsumccriselibpython sitepackagesclickcorepy line in call return selfmainargs kwargs File minicondaenvsumccriselibpython sitepackagesclickcorepy line in main rv selfinvokectx File minicondaenvsumccriselibpython sitepackagesclickcorepy line in invoke return ctxinvokeselfcallback ctxparams File minicondaenvsumccriselibpython sitepackagesclickcorepy line in invoke return callbackargs kwargs File umccrisescriptsumccrise line in main runsimplecmd File minicondaenvsumccriselibpython sitepackagesngsutilscallprocesspy line in runsimple subprocesscheckcallcmd shellshellarg executableexecutablearg envenv File minicondaenvsumccriselibpython subprocesspy line in checkcall retcode callpopenargs kwargs File minicondaenvsumccriselibpython subprocesspy line in call with Popenpopenargs kwargs as p File minicondaenvsumccriselibpython subprocesspy line in init restoresignals startnewsession File minicondaenvsumccriselibpython subprocesspy line in executechild raise childexceptiontypeerrnonum errmsg errfilename FileNotFoundError Errno No such file or directory binsh binsh time T Z levelinfo msgshim reaped ide f c a f cb a a c b da ad be c b e fe f time T Z levelinfo msgignoring event modulelibcontainerd namespacemoby topictasksdelete typeeventsTaskDelete time T Z levelwarning msge f c a f cb a a c b da ad be c b e fe f cleanup failed to unmount IPC umount varlibdockercontainerse f c a f cb a a c b da ad be c b e fe f mountsshm flags x no such file or directory Hello maybe iam missing something buth after creating a slim image all the things that should be present on it are not For example there is not apt even is the build is base on debian no python found Do not understand why everything that I have installed in my image disapear after being slimmed Here the command i am issuing to create the img shell dockerslim build includepathbin includepathsbin includepathlib httpprobefalse continueafter XXXdebian buildertest shell docker run it XXXansibleslim bash bash python bash python command not found bash apt bash apt command not found Maybe iam doing something wrong but cannot understand my mistake I have a Ruby app based on ruby alpine with a CMD that cannot find bundler Its being built as dockerslim build httpprobe includeshell includeexe sleep includeexe grep includeexe jq includeexe usrlocalbinbundle myapp CMD CMD scriptsserversh serversh binsh Starting puma server bundle exec puma C configpumarb Im not sure if includeexe pointing to bundlers absolute path is correct I also tried includebin without success When running dockercompose pointing to myappslim it raises the following error myapp scriptsserversh line bundle not found Client Docker Engine Community Version API version Go version go Git commit bf Built Thu Oct OSArch darwinamd Experimental false Let me know if you have any idea Thanks in advance This same setup works fine on my MacBook Pro same Dockerfile and build same dockerslim invocation Im trying to get the same setup to work in CodeBuild It may be worth mentioning could be related that the image Im building is for armhf but Im running on x on the host Heres the output when I run in CodeBuild Container Running command tmpdockerslim build httpprobefalse continueafter mosquitto dockerslim build statestarted dockerslim build infoparams targetmosquitto continuemodetimeout dockerslim build stateimageinspectionstart dockerslim build infoimage idsha b e d dc fb a d f d efc d c a ecc sizebytes sizehuman MB dockerslim build infoimagestack index namebalenalibarmv hfalpine run idsha ab e f e ad a e ab b e b b dad a fb ad c dockerslim build infoimagestack index namemosquittolatest idsha b e d dc fb a d f d efc d c a ecc dockerslim build infoimageexposedports list dockerslim build stateimageinspectiondone dockerslim build statecontainerinspectionstart dockerslim build infocontainer statuscreated namedockerslimk id e da e b de b d a b dd e f b a e d d a dockerslim build infocmdstartmonitor statussent dockerslim build infoeventerror statusreceived dataSensorErrorOpsensorptraceRuntargetStartKindcallerrorWrappedTypeosPathErrorInfoforkexec usrbinentrysh exec format errorLine Filegithubcomdockerslimdockersliminternalappsensormonitorsptracemonitorgo dockerslim build stateexited versionlinuxTransformer ec e b a c aa ef eac cea c a PM Container Command did not exit successfully tmpdockerslim build httpprobefalse continueafter mosquitto exit status Container Phase complete BUILD State FAILED Container Phase context status code COMMANDEXECUTIONERROR Message Error while executing command tmpdockerslim build httpprobefalse continueafter mosquitto Reason exit status I assume this is the relevant part TypeosPathErrorInfoforkexec usrbinentrysh exec format errorLine Filegithubcomdockerslimdockersliminternalappsensormonitorsptracemonitorgo On my MacBook I get this dockerslim build httpprobefalse continueafter mosquitto dockerslim build statestarted dockerslim build infoparams targetmosquitto continuemodetimeout dockerslim build stateimageinspectionstart dockerslim build infoimage idsha c f bc ff ea e e abf b ace acf ec a b sizebytes sizehuman MB dockerslim build infoimagestack index namebalenalibarmv hfalpine run idsha ab e f e ad a e ab b e b b dad a fb ad c dockerslim build infoimagestack index namemosquittolatest idsha c f bc ff ea e e abf b ace acf ec a b dockerslim build infoimageexposedports list dockerslim build stateimageinspectiondone dockerslim build statecontainerinspectionstart dockerslim build infocontainer statuscreated namedockerslimk id d d a fb f fef feed eb a b c fc c b dockerslim build infocmdstartmonitor statussent dockerslim build infoeventstartmonitordone statusreceived dockerslim build infocontainer namedockerslimk id d d a fb f fef feed eb a b c fc c b targetportlist targetportinfo tcp tcp messageYOU CAN USE THESE PORTS TO INTERACT WITH THE CONTAINER dockerslim build infocontinueafter modetimeout messageno input required execution will resume after the timeout dockerslim build infoprompt messagewaiting for the target container seconds dockerslim build infoevent messagedone waiting for the target containerdockerslim build statecontainerinspectionfinishing dockerslim build statecontainerinspectionartifactprocessing dockerslim build statecontainerinspectiondone dockerslim build statebuilding messagebuilding minified image dockerslim build statecompleted dockerslim build inforesults statusMINIFIED BY X MB MB dockerslim build inforesults imagenamemosquittoslim imagesize MB datatrue dockerslim build inforesults artifactslocationUsersmarkDownloadsdistmacdockerslimstateimages c f bc ff ea e e abf b ace acf ec a b artifacts dockerslim build inforesults artifactsreportcreportjson dockerslim build inforesults artifactsdockerfileoriginalDockerfilefat dockerslim build inforesults artifactsdockerfilenewDockerfile dockerslim build inforesults artifactsseccompmosquittoseccompjson dockerslim build inforesults artifactsapparmormosquittoapparmorprofile dockerslim build statedone dockerslim build inforeport fileslimreportjson Im going to keep hacking away at it for now but any suggestions would be very welcome I have a simple sanic server it runs ok with normal docker but failed to launch when slimed bash docker build t server dockerslim build server docker run d serverslim and container exit with error Traceback most recent call last File mainpy line in module appblueprintswaggerblueprint File usrlocallibpython sitepackagessanicapppy line in blueprint blueprintregisterself options File usrlocallibpython sitepackagessanicblueprintspy line in register uri futurefileordirectory futureargs futurekwargs File usrlocallibpython sitepackagessanicapppy line in static contenttype File usrlocallibpython sitepackagessanicstaticpy line in register handler File usrlocallibpython sitepackagessanicapppy line in response namename File usrlocallibpython sitepackagessanicrouterpy line in add selfadduri methods handler host name File usrlocallibpython sitepackagessanicrouterpy line in add route mergerouteroute methods handler File usrlocallibpython sitepackagessanicrouterpy line in mergeroute uri joinlistduplicated sanicrouterRouteExists Route already registered swaggerfileuri HEADGET code as below include mainpy Dockerfile and requirementstxt Dockerfile FROM python COPY requirementstxt requirementstxt RUN pip install r requirementstxt COPY app WORKDIR app EXPOSE CMD python mainpy mainpy python from sanic import Sanic from sanicopenapi import swaggerblueprint app Sanic appblueprintswaggerblueprint if name main apprunhost port requirementstxt sanic sanicopenapi Note that if I commented out line appblueprintswaggerblueprint slim container can launch success Im trying to build a Dockerfile I normally run with dockercompose so theres lots of arguments that I keep forgetting to add mount env etc Its painful to troubleshoot this because I have to wait for dockerslim to make five tries and timeout before I can see what the error is Would it be possible to show the logs from showclogs immediately after the first HTTP failure Current output dockerslim build infocontainer namedockerslimk ide f f ed a b a fa d d fe df c targetportlist targetportinfo tcp messageYOU CAN USE THESE PORTS TO INTERACT WITH THE CONTAINER dockerslim build statehttpprobestarting messageWAIT FOR HTTP PROBE TO FINISH dockerslim build infocontinueafter modeprobe messageno input required execution will resume when HTTP probing is completed dockerslim build infoprompt messagewaiting for the HTTP probe to finish dockerslim build statehttpproberunning dockerslim build infohttpprobeports count targets dockerslim build infohttpprobecommands count commandsGET dockerslim build infohttpprobecall statuserror methodGET target attempt errorGet read tcp read connection reset by peer time T Z dockerslim build infohttpprobecall statuserror methodGET target attempt errorGet read tcp read connection reset by peer time T Z dockerslim build infohttpprobecall statuserror methodGET target attempt errorGet read tcp read connection reset by peer time T Z dockerslim build infohttpprobecall statuserror methodGET target attempt errorGet read tcp read connection reset by peer time T Z dockerslim build infohttpprobecall statuserror methodGET target attempt errorGet read tcp read connection reset by peer time T Z dockerslim build infohttpprobesummary total failures successful dockerslim build statehttpprobedone warningnosuccessfulcalls dockerslim build infoevent messageHTTP probe is done dockerslim build statecontainerinspectionfinishing dockerslim container stdout dockerslim container stderr time T Z levelinfo msgsensor args string optdockerslimbindockerslimsensor time T Z levelinfo msgsensor waiting for commands time T Z levelinfo msgsensor monitor starting time T Z levelinfo msgfanmon Run time T Z levelinfo msgptmon Run the output from my container Requested output dockerslim build infocontainer namedockerslimk ide f f ed a b a fa d d fe df c targetportlist targetportinfo tcp messageYOU CAN USE THESE PORTS TO INTERACT WITH THE CONTAINER dockerslim build statehttpprobestarting messageWAIT FOR HTTP PROBE TO FINISH dockerslim build infocontinueafter modeprobe messageno input required execution will resume when HTTP probing is completed dockerslim build infoprompt messagewaiting for the HTTP probe to finish dockerslim build statehttpproberunning dockerslim build infohttpprobeports count targets dockerslim build infohttpprobecommands count commandsGET dockerslim build infohttpprobecall statuserror methodGET target attempt errorGet read tcp read connection reset by peer time T Z dockerslim container stdout dockerslim container stderr time T Z levelinfo msgsensor args string optdockerslimbindockerslimsensor time T Z levelinfo msgsensor waiting for commands time T Z levelinfo msgsensor monitor starting time T Z levelinfo msgfanmon Run time T Z levelinfo msgptmon Run the output from my container all the other output I pasted above 