Continuation of The corresponding issue on OSSFuzz side is Corpus pruning already mostlyworked in Fuchsia by virtue of the merge command being a thing However the syncfilesbetweendeviceandhost step was missing a beat corpora were syncd properly but bad units crashes leaks ooms etc werent getting pulled down They do get pulled down in fuzz of course no fears there This commit pulls down those bad units and also adds a test for the same Test can be run locally via INTEGRATION FUCHSIATESTS python butlerpy pyunittest t core p corpuspruning u This is from my botlog file A few debug statements have been added by myself Thanks runbot INFO Keys file path homeadrianmybotclusterfuzzbotbuildurls ac ed d bc a d ce aacbea bb ddlist base url gschromiumbrowserasanlinuxrelease runbot ERROR Error getting list of build urls from gschromiumbrowserasanlinuxreleaseasanlinuxrelease zip None runbot ERROR Unable to find a matching revision None runbot INFO Checking for bad build runbot ERROR Exception occurred when running command Traceback most recent call last File homeadrianclusterfuzzsrcpythonsystemprocesshandlerpy line in runprocess ignorechildrenignorechildren File homeadrianmybotclusterfuzzsrcthirdpartymozprocessprocesshandlerpy line in init selfcmd selfargs selfcmd selfcmd IndexError list index out of range In Aug gRPC project disable AFL fuzzing engine CF kept running AFL build and reported this issue which remains open but autoCC logic for example does not recognize that job and does not add new users to it eg there are only two entries in ExternalUserPermission both are for libFuzzer jobs This is just a first draft of the changes to clusterfuzz needed to get in process radamsa as a strategy Still waiting on getting the radamsa so to test if it works but I would appreciate it if you took a look to see if this looks like the right place to start or if anything is missing Thanks Im trying to fuzz on the android platform on an odroid using a locally run version of clusterfuzz and its unable to load path i set for LDPRELOAD eg bot error ERROR ldso object systemliblibclangrtasanarmandroidso from LDPRELOAD cannot be preloaded cannot open shared object file ignored Can you please advise or provide suggestions on how i can resolve this The LDPRELOAD env variable is set in the UI in the Edit or upload fuzzer interface as follows LDPRELOAD systemliblibclangrtasanarmandroidso The path to libclangrtasanarmandroidso is on the device and ive confirmed that permissions are all set and the device has been set to permissive mode I deployed ClusterFuzz to google cloud after following the instructions here followed by here starting here The failed step was python butlerpy createconfig oauthclientsecretspathCLIENTSECRETSPATH firebaseapikeyFIREBASEAPIKEY projectidCLOUDPROJECTID CONFIGDIR The last message I received was Running python butlerpy run setup configdir homeqlyoungcfconfig nondryrun DEPRECATION Python will reach the end of its life on January st Please upgrade your Python as Python wont be maintained after that date A future version of pip will drop support for Python More details abou t Python support in pip can be found at Traceback most recent call last File butlerpy line in module main File butlerpy line in main commandexecuteargs File srclocalbutlerrunpy line in execute scriptexecuteargs File srclocalbutlerscriptssetuppy line in execute setupconfigargsnondryrun File srclocalbutlerscriptssetuppy line in setupconfig config datatypesConfigqueryget File homeqlyoungclusterfuzzsrcpythondatastorendbpatcherpy line in get return retrywrapresultfunc File homeqlyoungclusterfuzzsrcthirdpartygoogleapicoreretrypy line in retrywrappedfunc onerroronerror File homeqlyoungclusterfuzzsrcthirdpartygoogleapicoreretrypy line in retrytarget return target File homeqlyoungclusterfuzzsrcpythondatastorendbpatcherpy line in lambda resultfunc lambda nextselfiterlimit None File homeqlyoungclusterfuzzsrcpythondatastorendbpatcherpy line in iter self projectionprojection keysonlykeysonly File homeqlyoungclusterfuzzsrcpythondatastorendbpatcherpy line in ndbquerytocloudqueries subqueriesappendclientquery File homeqlyoungclusterfuzzsrcpythondatastorendbpatcherpy line in client init File homeqlyoungclusterfuzzsrcpythondatastorendbpatcherpy line in init creds credentialsgetdefault File homeqlyoungclusterfuzzsrcpythonbaseretrypy line in wrapper result funcargs kwargs File homeqlyoungclusterfuzzsrcpythongooglecloudutilscredentialspy line in getdefault return googleauthdefaultscopesscopes File homeqlyoungclusterfuzzsrcthirdpartygoogleauthdefaultpy line in default raise exceptionsDefaultCredentialsErrorHELPMESSAGE googleauthexceptionsDefaultCredentialsError Could not automatically determine credentials Please set GOOGLEAPPLICATIONCREDENTIALS or explicitly create credentials and rerun the application For more information please see Return code is nonzero Exit Traceback most recent call last File butlerpy line in module main File butlerpy line in main commandexecuteargs File srclocalbutlercreateconfigpy line in execute gcloud argsnewconfigdir appenginelocationargsappenginelocation File srclocalbutlercreateconfigpy line in deployappengine prod configdir configdir File usrlibpython subprocesspy line in checkcall raise CalledProcessErrorretcode cmd subprocessCalledProcessError Command python butlerpy deploy force targets appengine prod configdir homeqlyoungcfconfig returned nonzero exit status After this the program exited When I try to log in to my deployed project projectidappspotcom I receive the following message x scrot I then went back and made sure I had followed all the authentication setup steps correctly To the best of my knowledge I have Having followed the instructions I dont understand what is going on here Truth be told I also have no desire to learn how to debug Firebase Google Compute Engine Google Cloud and Google App Engine to figure out what the issue is here I am hoping someone knows what I have done wrong or can at least provide a suggestion It seems the documentation is incomplete or out of date because the provided steps do not work As an aside I would be happy very happy to deploy ClusterFuzz on my own hardware without any sort of Google Dollars integration at all but the lack of statistics panes is a significant negative If these are known documentation issues please tell me what needs to be done and I will update the docs myself Partially addresses Hi Heres the Jira integration that we discussed back in SepOct Some things came up that caused this to get put on the backburner for a bit At a high level this PR introduces the following support for intake of the Jira server URL and auth credentials through configuration specification of the Jira project for a job through its job definition client logic for interfacing with Jira This was tested with an onprem instance of Jira Atlassians docs seem to indicate that theres no difference in APIs with the cloud version Some caveatsrequests for feedback with this Ive manually done an endtoend issue filing test upload job find crash file issue for the corresponding testcase but it still needs unit tests I was running into a No api proxy found for service datastorev assertion error when trying to fetch a value from dbconfig in a test I was writing Do I need to mockspoof that in my tests Id appreciate help with lines and in srcappenginelibsissuemanagementjiraissuetrackermanagerpy With the former Im trying to prevent updating status if it hasnt moved from the new state because Jira complains if you try a status update that doesnt actually cause a transition thats defined in the projects workflow For the latter Id like to be able to grab the testcases iscrash value but I figured Id run it by you all before I make significant changes to the issuesave invocation I did change the Monorail newissue signature and invocations in order to generalize and allow the Jira tracker to read the Jira project value from the job definition Feels like the wrong way to address this let me know what I should do Finally I didnt want to add documentation around the issue trackers before I found out whether that was in the works for Monorail already Thanks for your help 