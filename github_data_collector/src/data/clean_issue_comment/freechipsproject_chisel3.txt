 Note for support questions you are strongly advised to use Stack Overflow This repositorys issues are reserved for feature requests and bug reports Please select the item best describing the issue in each category and delete the other items choose all that apply Type of issue bug report choose one Impact no functional change choose one Development Phase request Other information include detailed explanation stacktraces related issues suggestions how to fix links for us to have context eg Stack Overflow gitter etc For fixedwidth FixedPoint addition the frontend calls tail on the result of FixedPoint addition which returns a UInt It then casts to a FixedPoint but this requires knowing the binary point If the binary point is unknown eg inferred by FIRRTL this will fail If the current behavior is a bug please provide the steps to reproduce the problem See for a test demonstrating the problem What is the current behavior a b crashes when a or b has unknown binary point What is the expected behavior a b should work Please tell us about your environment examples version SNAPSHOT OS Linux knight generic Ubuntu SMP Thu Aug UTC x x x GNULinux What is the use case for changing the behavior This is a weird limitation that would be very confusing to unsophisticated users This is a failing test It shouldnt fail though The way that fixedwidth addition works relies on having a defined binary point This is an unfortunate limitation and should be fixed Please select the item best describing the pull request in each category and delete the other items Related issue if applicable choose one Type of change bug report choose one Impact no functional change choose one Development Phase test demonstrating bug Release Notes Text from here to the end of the body will be considered for inclusion in the release notes for the version containing this pull request I am a beginner in chisel AS a first step i installed chisel env and when i test it with Hello example i got this warning hounaidahounaidaX UVKDesktopflexpretchisel examples sbt runMain HelloScala warn No sbtversion set in projectbuildproperties base directory homehounaidaDesktopflexpretchisel examples info Set current project to examples in build filehomehounaidaDesktopflexpretchisel examples info Compiling Scala source to homehounaidaDesktopflexpretchisel examplestargetscala classes info running HelloScala hello chisel success Total time s completed Jan PM I try to fix it by modifying the version of sbt in buildproperties from to but i got the same warning My sbt version hounaidahounaidaX UVKDesktopflexpretchisel examples sbt version sbt version in this project sbt script version I cant see why i obtain this problem Thanks for your help Ive turned some Scala warnings on and nested whenelsewhen statements are showing warnings An example In buildsbt scalacOptions SeqYwarnvaluediscard And this test case import chisel class Test extends Module val io IOnew Bundle val a InputBool val b InputBool val c InputBool val d OutputBool when ioa when iob iod trueB elsewhen ioc iod falseB object TestObj extends App chisel DriverexecuteArray String new Test I see warn mainscalaTestscala discarded nonUnit value warn elsewhen ioc warn Note for support questions you are strongly advised to use Stack Overflow This repositorys issues are reserved for feature requests and bug reports Please select the item best describing the issue in each category and delete the other items choose all that apply Type of issue bug report other enhancement choose one Impact API modification choose one Development Phase request Other information include detailed explanation stacktraces related issues suggestions how to fix links for us to have context eg Stack Overflow gitter etc I would expect asUInt to give results that honor the width of the Bundle so that I can use it to convert a bundle literal to UInt consistently That said in the following test wont pass bundleLitUInt should have the same litValue as anotherBundleLitUInt because the two bundle literals both have a b scala class MyMultipleWidthBundle extends Bundle val a UInt W was UInt W val b UInt W was UInt W bundle literals asUInt should work in assertTesterPassesnew BasicTester val wire WireUInt W val anotherWire WireUInt W val bundleLitUInt new MyMultipleWidthBundleLit a U W b U W asUInt val anotherBundleLitUInt new MyMultipleWidthBundleLit a U b U asUInt wire bundleLitUInt anotherWire anotherBundleLitUInt chisel assertwire anotherWire stop If the current behavior is a bug please provide the steps to reproduce the problem What is the current behavior Consider MyMultipleWidthBundle in the above example Bundle literals created as anotherBundleLitUInt in which we dont specify the widths of UInt in Lit will not honor the field widths of the bundle The resultant UInt in the above example is thus in binary Bundle literals created as bundleLitUInt will honor the widths The resultant UInt in the above example is thus in binary What is the expected behavior Both anotherBundleLitUInt and bundleLitUInt should be Please tell us about your environment version SNAPSHOT SNAPSHOT OS Darwin sy Darwin Kernel Version Thu Jun PDT rootxnu RELEASEX x examples version SNAPSHOT OS Linux knight generic Ubuntu SMP Thu Aug UTC x x x GNULinux What is the use case for changing the behavior This can be helpful when I use bundle literals as the input to a Verilog module This way I dont need to use a wrapper to slice the ports choose one Type of change other enhancement choose one Impact no functional change choose one Development Phase implementation supernameIds has already added io clock and reset in names by reflection scala protected override def nameIdsrootClass Class HashMap HasId String val names supernameIdsrootClass Allow IO naming without reflection printlnsnamesio printlnsnamesclock printlnsnamesreset namesputio io namesputclock clock namesputreset reset names Output info Elaborating design io clock reset info Done elaborating Total FIRRTL Compile Time ms I have noticed some common mistakes result in huge backtraces One example is an incorrectly sized Enum import chisel import chisel util class Bar extends Module val io IOnew Bundle val a b c d Nil Enum object BarObj extends App chisel DriverexecuteArray String new Bar Gives the following error message info Elaborating design error runmain firrtloptionsOptionsException Exception thrown when elaborating ChiselGeneratorAnnotation error firrtloptionsOptionsException Exception thrown when elaborating ChiselGeneratorAnnotation error at chisel stageChiselGeneratorAnnotationelaborateChiselAnnotationsscala error at chisel stagephasesElaborateanonfuntransform Elaboratescala error at scalacollectionTraversableLikeanonfunflatMap TraversableLikescala error at scalacollectionimmutableListforeachListscala error at scalacollectionTraversableLikeflatMapTraversableLikescala error oo Comat scalacollectionTraversableLikeflatMapTraversableLikescala error at scalacollectionimmutableListflatMapListscala error at chisel stagephasesElaboratetransformElaboratescala error at chisel stagephasesElaboratetransformElaboratescala error at firrtloptionsphasesDeletedWrapperinternalTransformDeletedWrapperscala error at firrtloptionsphasesDeletedWrapperinternalTransformDeletedWrapperscala error at firrtloptionsTranslatortransformPhasescala error at firrtloptionsTranslatortransformPhasescala error at firrtloptionsphasesDeletedWrappertransformDeletedWrapperscala error at chisel stageChiselStageanonfunrun ChiselStagescala error at scalacollectionLinearSeqOptimizedfoldLeftLinearSeqOptimizedscala error at scalacollectionLinearSeqOptimizedfoldLeftLinearSeqOptimizedscala error at scalacollectionimmutableListfoldLeftListscala error at chisel stageChiselStagerunChiselStagescala error at firrtloptionsStageanon transformStagescala error at firrtloptionsStageanon transformStagescala error at firrtloptionsphasesDeletedWrapperinternalTransformDeletedWrapperscala error at firrtloptionsphasesDeletedWrapperinternalTransformDeletedWrapperscala error at firrtloptionsTranslatortransformPhasescala error at firrtloptionsTranslatortransformPhasescala error at firrtloptionsphasesDeletedWrappertransformDeletedWrapperscala error at firrtloptionsStageanonfuntransform Stagescala error at scalacollectionLinearSeqOptimizedfoldLeftLinearSeqOptimizedscala error at scalacollectionLinearSeqOptimizedfoldLeftLinearSeqOptimizedscala error at scalacollectionimmutableListfoldLeftListscala error at firrtloptionsStageanonfuntransform Stagescala error at loggerLoggeranonfunmakeScope Loggerscala error at scalautilDynamicVariablewithValueDynamicVariablescala error at loggerLoggermakeScopeLoggerscala error at firrtloptionsStagetransformStagescala error at firrtloptionsStagetransformStagescala error at chisel Driveranonfunexecute Driverscala error at scalacollectionLinearSeqOptimizedfoldLeftLinearSeqOptimizedscala error at scalacollectionLinearSeqOptimizedfoldLeftLinearSeqOptimizedscala error at scalacollectionimmutableListfoldLeftListscala error at chisel DriverexecuteDriverscala error at chisel DriverexecuteDriverscala error at BarObjdelayedEndpointBarObj Barscala error at BarObjdelayedInitbodyapplyBarscala error at scalaFunction applymcVspFunction scala error at scalaFunction applymcVspFunction scala error at scalaruntimeAbstractFunction applymcVspAbstractFunction scala error at scalaAppanonfunmain adaptedAppscala error at scalacollectionimmutableListforeachListscala error at scalaAppmainAppscala error at scalaAppmainAppscala error at BarObjmainBarscala error at BarObjmainBarscala error at sunreflectNativeMethodAccessorImplinvoke Native Method error at sunreflectNativeMethodAccessorImplinvokeNativeMethodAccessorImpljava error at sunreflectDelegatingMethodAccessorImplinvokeDelegatingMethodAccessorImpljava error at javalangreflectMethodinvokeMethodjava error Caused by scalaMatchError ListUInt UInt UInt of class scalacollectionimmutablecoloncolon error at BarinitBarscala error at BarObjanonfunnew Barscala error at chisel ModuledoapplyModulescala error at chisel stageChiselGeneratorAnnotationanonfunelaborate ChiselAnnotationsscala error at chisel internalBuilderanonfunbuild Builderscala error at scalautilDynamicVariablewithValueDynamicVariablescala error at chisel internalBuilderanonfunbuild Builderscala error at scalautilDynamicVariablewithValueDynamicVariablescala error at chisel internalBuilderbuildBuilderscala error at chisel stageChiselGeneratorAnnotationelaborateChiselAnnotationsscala error at chisel stagephasesElaborateanonfuntransform Elaboratescala error at scalacollectionTraversableLikeanonfunflatMap TraversableLikescala error at scalacollectionimmutableListforeachListscala error at scalacollectionTraversableLikeflatMapTraversableLikescala error at scalacollectionTraversableLikeflatMapTraversableLikescala error at scalacollectionimmutableListflatMapListscala error at chisel stagephasesElaboratetransformElaboratescala error at chisel stagephasesElaboratetransformElaboratescala error at firrtloptionsphasesDeletedWrapperinternalTransformDeletedWrapperscala error at firrtloptionsphasesDeletedWrapperinternalTransformDeletedWrapperscala error at firrtloptionsTranslatortransformPhasescala error at firrtloptionsTranslatortransformPhasescala error at firrtloptionsphasesDeletedWrappertransformDeletedWrapperscala error at chisel stageChiselStageanonfunrun ChiselStagescala error at scalacollectionLinearSeqOptimizedfoldLeftLinearSeqOptimizedscala error at scalacollectionLinearSeqOptimizedfoldLeftLinearSeqOptimizedscala error at scalacollectionimmutableListfoldLeftListscala error at chisel stageChiselStagerunChiselStagescala error at firrtloptionsStageanon transformStagescala error at firrtloptionsStageanon transformStagescala error at firrtloptionsphasesDeletedWrapperinternalTransformDeletedWrapperscala error at firrtloptionsphasesDeletedWrapperinternalTransformDeletedWrapperscala error at firrtloptionsTranslatortransformPhasescala error at firrtloptionsTranslatortransformPhasescala error at firrtloptionsphasesDeletedWrappertransformDeletedWrapperscala error at firrtloptionsStageanonfuntransform Stagescala error at scalacollectionLinearSeqOptimizedfoldLeftLinearSeqOptimizedscala error at scalacollectionLinearSeqOptimizedfoldLeftLinearSeqOptimizedscala error at scalacollectionimmutableListfoldLeftListscala error at firrtloptionsStageanonfuntransform Stagescala error at loggerLoggeranonfunmakeScope Loggerscala error at scalautilDynamicVariablewithValueDynamicVariablescala error at loggerLoggermakeScopeLoggerscala error at firrtloptionsStagetransformStagescala error at firrtloptionsStagetransformStagescala error at chisel Driveranonfunexecute Driverscala error at scalacollectionLinearSeqOptimizedfoldLeftLinearSeqOptimizedscala error at scalacollectionLinearSeqOptimizedfoldLeftLinearSeqOptimizedscala error at scalacollectionimmutableListfoldLeftListscala error at chisel DriverexecuteDriverscala error at chisel DriverexecuteDriverscala error at BarObjdelayedEndpointBarObj Barscala error at BarObjdelayedInitbodyapplyBarscala error at scalaFunction applymcVspFunction scala error at scalaFunction applymcVspFunction scala error at scalaruntimeAbstractFunction applymcVspAbstractFunction scala error at scalaAppanonfunmain adaptedAppscala error at scalacollectionimmutableListforeachListscala error at scalaAppmainAppscala error at scalaAppmainAppscala error at BarObjmainBarscala error at BarObjmainBarscala error at sunreflectNativeMethodAccessorImplinvoke Native Method error at sunreflectNativeMethodAccessorImplinvokeNativeMethodAccessorImpljava error at sunreflectDelegatingMethodAccessorImplinvokeDelegatingMethodAccessorImpljava error at javalangreflectMethodinvokeMethodjava The answer to the problem is there but its hiding deep in the backtrace Barscala It would be also nice to have a more specific error eg Enum is too small to fit values defined choose one Type of change bug report choose one Impact no functional change choose one Development Phase implementation loadMemoryFromFile creates a separate file and uses a SV bind statement A simple example import chisel import chisel utilexperimentalloadMemoryFromFile class Fooval bits Int val size Int filename String extends Module val io IOnew Bundle val nia InputUIntbitsW val insn OutputUInt W val memory Memsize UInt W ioinsn memoryionia loadMemoryFromFilememory filename object FooObj extends App chisel DriverexecuteArray String new Foo insnshex cat FooFoomemoryv module BindsTo Foo input clock input reset input ionia output ioinsn initial begin readmemhinsnshex Foomemory end endmodule bind Foo BindsTo Foo BindsTo FooInst Yosys doesnt like this and likely there are other tools that dont either Is there any reason we dont just place it inline Id like to build my project with verilator Wall but chisel creates RAND regs A simple example import chisel class Foo extends Module val io IOnew Bundle val a InputUInt W val b OutputUInt W val r RegInit U W r ioa iob r object FooObj extends App chisel DriverexecuteArray String new Foo Results in module Foo input clock input reset input ioa output iob reg r Fooscala reg RAND assign iob r Fooscala ifdef RANDOMIZEGARBAGEASSIGN define RANDOMIZE endif ifdef RANDOMIZEINVALIDASSIGN define RANDOMIZE endif ifdef RANDOMIZEREGINIT define RANDOMIZE endif ifdef RANDOMIZEMEMINIT define RANDOMIZE endif ifndef RANDOM define RANDOM random endif ifdef RANDOMIZEMEMINIT integer initvar endif ifndef SYNTHESIS initial begin ifdef RANDOMIZE ifdef INITRANDOM INITRANDOM endif ifndef VERILATOR ifdef RANDOMIZEDELAY RANDOMIZEDELAY begin end else begin end endif endif ifdef RANDOMIZEREGINIT RAND RANDOM r RAND endif RANDOMIZEREGINIT endif RANDOMIZE end initial endif SYNTHESIS always posedge clock begin if reset begin r h end else begin r ioa end end endmodule Using an empty verilator driver int mainint argc char argv and building with verilator O Wall assert cc Foov exe Foocpp we hit the following error WarningUNUSED Foov Signal is not driven nor used RAND Use verilator lintoff UNUSED and linton around source to disable this message Error Exiting due to warnings Error Command Failed usrbinverilatorbin O Wall assert cc Foov exe Foocpp We are already wrapping everything in ifdef RANDOMIZEMEMINIT etc so we should just wrap the reg with an ifdef too