Currently path recycles the same way base R does and therefore also the function building upon path like or r fspath This should rather throw an informative error supCreated on by the reprex package v sup Often one has an organised directory structure eg of the format countryyear and then needs to do some batch processing of files in these directories A typical workflow would be to get info about a certain file in each of these directories and parse parts of the path to the file eg r libraryfs librarydplyr dirinfoDownloads recurse TRUE regexp esdefr d population xlsx transmute country stringrstrmatchpath esdefr d population xlsx year stringrstrmatchpath esdefr d population xlsx size A tibble x country year size chr chr fsbytes de M de M de M fr M fr M supCreated on by the reprex package v sup and then process each file passing path country and year as a parameter to the corresponding function Instead of the code above it would be very nice to have something like r dirinfoDownloads parts ccountry esdefr year d population rds ie specify the parts of the path and the named parts should become a column in the output Further it would make sense to also support this in dirmap and dirwalk and pass the parsed parts of the path on to fun ie r dirwalk Downloads parts ccountry esdefr year d population rds fun functionpath country year If the path argument to dirdelete contains nested subdirectories dirdelete will delete the subdirectories but will fail prior to deleting the top level directories test ctestabout testtags testtagsblogdown dircreatetest Make sure there is no existing test directory first dirlstest recurse TRUE ascharacter homemichaeltestabout homemichaeltesttags homemichaeltesttagsblogdown dirdeletetest Error ENOENT Failed to remove homemichaeltesttagsblogdown no such file or directory dirlstest recurse TRUE ascharacter homemichaeltestabout homemichaeltesttags This happens because dirdelete itself goes off and gets subdirectories to delete and then concatenates them with the original toplevel directories before deleting old pathexpandpath dirs dirlsold type directory recurse TRUE all TRUE rmdirrevcold dirs If path had subdirectories in it cold dirs will include subdirectories twice so it fails the second time it gets to one A solution would be to wrap cold dirs in unique rmdirrevuniquecold dirs fromLast TRUE This works in my testing Happy to try to create a pull request if appropriate Versions fs R RStudio In the Comparison Vignette pathnorm is said to approximate normalizePath It seems that pathnorm is more the equivalent of pathabs though r libraryfs normalizePath privatevarfolders zrm h lj d kfpj c zm gnTRtmpdjTe hreprex ac d f pathnorm pathabs privatevarfolders zrm h lj d kfpj c zm gnTRtmpdjTe hreprex ac d f supCreated on by the reprex package v sup Is there a recommended strategy for finding and gracefully handling broken symlinks My package functions run pathreal on the project files to resolve any potential symlinks and I had a user report a bug where a broken symlink broke everything Is there a better option than always having to check with islinklinkpathfileexists Here is a reprex to demonstrate the issue r packageVersionfs libraryfs d filetemp dircreated nonexistent pathd nonexistent brokenlink pathd brokenlink linkcreatenonexistent brokenlink fileexistsnonexistent tmpRtmpeYDu file f d nonexistent FALSE linkexistsbrokenlink tmpRtmpeYDu file f d brokenlink TRUE linkpathbrokenlink tmpRtmpeYDu file f d nonexistent fileexistslinkpathbrokenlink tmpRtmpeYDu file f d nonexistent FALSE f dirlspath d pathrealf Error ENOENT Failed to realize tmpRtmpeYDu file f d brokenlink no such file or directory Find any broken links anyfileexistslinkpathf islinkf TRUE supCreated on by the reprex package v sup details summarySession infosummary r sessioninfosessioninfo Session info setting value version R version os Ubuntu LTS system x linuxgnu ui X language EN collate enUSUTF ctype enUSUTF tz AmericaNewYork date Packages package version date lib source assertthat CRAN R cli CRAN R crayon CRAN R digest CRAN R evaluate CRAN R fs Github rlibfsa highr CRAN R htmltools CRAN R knitr CRAN R magrittr CRAN R Rcpp CRAN R reprex local rlang CRAN R rmarkdown CRAN R sessioninfo CRAN R stringi CRAN R stringr CRAN R withr CRAN R xfun CRAN R yaml CRAN R homejdbworkRx pclinuxgnulibrary usrlocallibRsitelibrary usrlibRsitelibrary usrlibRlibrary details Is there some builtin way to filter on the files not the full paths r requirefs Loading required package fs filecreatetestxlsx filecreatetestxlsx dirlsregexp xlsx testxlsx dirlspath getwd regexp xlsx privatevarfolders l sk kn z n g kld m gpTRtmpPIBVNSreprex ac e b dfbtestxlsx privatevarfolders l sk kn z n g kld m gpTRtmpPIBVNSreprex ac e b dfbtestxlsx supCreated on by the reprex package v sup All below is for OS X MS Office has an awful habit of creating a temporary file for any open files in the same directory ie myfilexlsx when opened creates a temporary file myfilexlsx Thus using a xlsx grob captures these Unfortunately all F to not return hidden files does not seem to apply to these files Of course you can use regexp to filter these but since the files only appear when another file is open its very easy to not catch that its necessary if writing code without any files open that then pop up later if someone is looking at one of the files they are about to read in fairly common in my experience In addition the regexp argument wont work along side the grob argument Perhaps the all argument could be updated to include filtering things that start with Or a new arg to ignore temporary MS Office files could be added with the default set to TRUE Consider r libraryfs path filetemp path filetemp strrlangcatchcndfilecopypath path List of message chr ENOENT Failed to copy tmpRtmpkbe whfilef a f to tmpRtmpkbe whfilef ac c c no such file or directory attr class chr ENOENT fserror error condition attr location chr filecc supCreated on by the reprex package v sup I think ENOENT should be in a error code or similar field of the error object and it would be nice to include the error path in the object Discovered while working on usethis Im working in a project on a folder shared between a Windows VM guest and the macOS host fs can recursively add folders there but not if the UNC path is used It can list directory contents with such a path r setwdZwin frommacos getwd Zwin frommacos libraryusethis Warning package usethis was built under R version libraryfs projget U Setting active project to vmwarehostShared Folderswin frommacos vmwarehostShared Folderswin frommacos projsitrep workingdirectory Zwin frommacos activeusethisproj vmwarehostShared Folderswin frommacos activerstudioproj unset U CF Your working directory is not the same as the active usethis project Set working directory to the project setwdprojget Set project to working directory projsetgetwd dircreatetopfoldersubfolder projpath vmwarehostShared Folderswin frommacos dirlsprojpath vmwarehostShared Folderswin frommacosR vmwarehostShared Folderswin frommacostopfolder vmwarehostShared Folderswin frommacosNAMESPACE vmwarehostShared Folderswin frommacosfrommacosRproj vmwarehostShared Folderswin frommacosreprexR vmwarehostShared Folderswin frommacosDESCRIPTION projpathevenmoresubfolder vmwarehostShared Folderswin frommacosevenmoresubfolder dircreateprojpathevenmoresubfolder Error ENOENT Failed to make directory vmwarehostShared Folders no such file or directory dirdeletetopfolder supCreated on by the reprex package v sup On Windows I get r fspathrealRdev CUsersmikkoAppDataLocalTempRtmpa cpqireprex fd UsersmikkoRdev I would expect to get r filepathpathexpand R dev CUsersmikkoDocumentsRdev supCreated on by the reprex package v sup I ran into this as many usethis functions were failing due to path errors Maybe related to details summarySession infosummary r devtoolssessioninfo Session info setting value version R version os Windows x system x mingw ui RTerm language EN collate EnglishUnited States ctype EnglishUnited States tz EuropeHelsinki date Packages package version date lib source assertthat CRAN R backports CRAN R callr CRAN R cli CRAN R crayon CRAN R desc CRAN R devtools CRAN R digest CRAN R evaluate CRAN R fs Github rlibfs c glue CRAN R highr CRAN R htmltools CRAN R knitr CRAN R magrittr CRAN R memoise CRAN R pkgbuild CRAN R pkgload CRAN R prettyunits CRAN R processx CRAN R ps CRAN R R CRAN R Rcpp CRAN R remotes CRAN R rlang CRAN R rmarkdown CRAN R rprojroot CRAN R sessioninfo CRAN R stringi CRAN R stringr CRAN R testthat CRAN R usethis Github rlibusethisa b withr CRAN R xfun CRAN R yaml CRAN R CUsersmikkoDocumentsRwinlibrary CProgram FilesRR library details 