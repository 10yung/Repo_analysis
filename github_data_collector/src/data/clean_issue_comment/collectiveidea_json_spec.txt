In order to be able to combine JSON matchers with other RSpec matchers via andor API I included RSpecMatchersComposable module as suggested in Hello Im requesting this extra regex option get added to cucumberrb to fix an issue Im having with Scenario Outlines Here is an example Scenario Outline Example of scenario outline issue Given User makes GET request to wwwgivemeajsoncomapijson And User receives response code Then the JSON response at datasomeInteger should be integer Examples integer The above will give me an undefined step reference error while conversely Scenario Example of scenario outline issue Given User makes GET request to wwwgivemeajsoncomapijson And User receives response code Then the JSON response at datasomeInteger should be This will work fine Adding will allow for examples table entries to be read regardless of quotations Its also an improvement because if the value passed in by the examples table doesnt follow the regex then it will throw a runtime error I dont know why but when I install the gem within development test group and run bundle install and then rake I get the following error I does not happen when I put gem jsonspec in the top level root Maybe someone has an idea how to put the gem into development test group without having this rake issue Error rake tasks rake aborted NameError uninitialized constant RSpecMatchers Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextactivesupportrb in block in loadmissingconstant Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextactivesupportrb in withoutbootsnapcache Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextactivesupportrb in rescue in loadmissingconstant Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextactivesupportrb in loadmissingconstant Usersjanjezekrbenvversions librubygems gemsjsonapirspec libjsonapirspecidrb in moduleId Usersjanjezekrbenvversions librubygems gemsjsonapirspec libjsonapirspecidrb in moduleRSpec Usersjanjezekrbenvversions librubygems gemsjsonapirspec libjsonapirspecidrb in moduleJSONAPI Usersjanjezekrbenvversions librubygems gemsjsonapirspec libjsonapirspecidrb in main Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextkernelrequirerb in require Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextkernelrequirerb in block in requirewithbootsnaplfi Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcacheloadedfeaturesindexrb in register Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextkernelrequirerb in requirewithbootsnaplfi Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextkernelrequirerb in require Usersjanjezekrbenvversions librubygems gemsjsonapirspec libjsonapirspecrb in main Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextkernelrequirerb in require Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextkernelrequirerb in block in requirewithbootsnaplfi Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcacheloadedfeaturesindexrb in register Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextkernelrequirerb in requirewithbootsnaplfi Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextkernelrequirerb in require Usersjanjezekrbenvversions librubygems gemsbundler libbundlerruntimerb in rescue in block in require Usersjanjezekrbenvversions librubygems gemsbundler libbundlerruntimerb in block in require Usersjanjezekrbenvversions librubygems gemsbundler libbundlerruntimerb in each Usersjanjezekrbenvversions librubygems gemsbundler libbundlerruntimerb in require Usersjanjezekrbenvversions librubygems gemsbundler libbundlerrb in require UsersjanjezekCodingRubymineProjectsPiForCloudApiconfigapplicationrb in top required UsersjanjezekCodingRubymineProjectsPiForCloudApiRakefile in requirerelative UsersjanjezekCodingRubymineProjectsPiForCloudApiRakefile in top required Usersjanjezekrbenvversions librubygems gemsrake librakerakemodulerb in load Usersjanjezekrbenvversions librubygems gemsrake librakerakemodulerb in loadrakefile Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in rawloadrakefile Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in block in loadrakefile Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in standardexceptionhandling Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in loadrakefile Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in block in run Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in standardexceptionhandling Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in run Usersjanjezekrbenvversions librubygems gemsrake exerake in top required Usersjanjezekrbenvversions binrake in load Usersjanjezekrbenvversions binrake in top required Usersjanjezekrbenvversions librubygems gemsbundler libbundlercliexecrb in load Usersjanjezekrbenvversions librubygems gemsbundler libbundlercliexecrb in kernelload Usersjanjezekrbenvversions librubygems gemsbundler libbundlercliexecrb in run Usersjanjezekrbenvversions librubygems gemsbundler libbundlerclirb in exec Usersjanjezekrbenvversions librubygems gemsbundler libbundlervendorthorlibthorcommandrb in run Usersjanjezekrbenvversions librubygems gemsbundler libbundlervendorthorlibthorinvocationrb in invokecommand Usersjanjezekrbenvversions librubygems gemsbundler libbundlervendorthorlibthorrb in dispatch Usersjanjezekrbenvversions librubygems gemsbundler libbundlerclirb in dispatch Usersjanjezekrbenvversions librubygems gemsbundler libbundlervendorthorlibthorbaserb in start Usersjanjezekrbenvversions librubygems gemsbundler libbundlerclirb in start Usersjanjezekrbenvversions librubygems gemsbundler exebundle in block in top required Usersjanjezekrbenvversions librubygems gemsbundler libbundlerfriendlyerrorsrb in withfriendlyerrors Usersjanjezekrbenvversions librubygems gemsbundler exebundle in top required Usersjanjezekrbenvversions binbundle in load Usersjanjezekrbenvversions binbundle in main Caused by NameError uninitialized constant RSpecMatchers Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextactivesupportrb in block in loadmissingconstant Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextactivesupportrb in allowbootsnapretry Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextactivesupportrb in loadmissingconstant Usersjanjezekrbenvversions librubygems gemsjsonapirspec libjsonapirspecidrb in moduleId Usersjanjezekrbenvversions librubygems gemsjsonapirspec libjsonapirspecidrb in moduleRSpec Usersjanjezekrbenvversions librubygems gemsjsonapirspec libjsonapirspecidrb in moduleJSONAPI Usersjanjezekrbenvversions librubygems gemsjsonapirspec libjsonapirspecidrb in main Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextkernelrequirerb in require Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextkernelrequirerb in block in requirewithbootsnaplfi Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcacheloadedfeaturesindexrb in register Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextkernelrequirerb in requirewithbootsnaplfi Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextkernelrequirerb in require Usersjanjezekrbenvversions librubygems gemsjsonapirspec libjsonapirspecrb in main Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextkernelrequirerb in require Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextkernelrequirerb in block in requirewithbootsnaplfi Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcacheloadedfeaturesindexrb in register Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextkernelrequirerb in requirewithbootsnaplfi Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextkernelrequirerb in require Usersjanjezekrbenvversions librubygems gemsbundler libbundlerruntimerb in rescue in block in require Usersjanjezekrbenvversions librubygems gemsbundler libbundlerruntimerb in block in require Usersjanjezekrbenvversions librubygems gemsbundler libbundlerruntimerb in each Usersjanjezekrbenvversions librubygems gemsbundler libbundlerruntimerb in require Usersjanjezekrbenvversions librubygems gemsbundler libbundlerrb in require UsersjanjezekCodingRubymineProjectsPiForCloudApiconfigapplicationrb in top required UsersjanjezekCodingRubymineProjectsPiForCloudApiRakefile in requirerelative UsersjanjezekCodingRubymineProjectsPiForCloudApiRakefile in top required Usersjanjezekrbenvversions librubygems gemsrake librakerakemodulerb in load Usersjanjezekrbenvversions librubygems gemsrake librakerakemodulerb in loadrakefile Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in rawloadrakefile Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in block in loadrakefile Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in standardexceptionhandling Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in loadrakefile Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in block in run Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in standardexceptionhandling Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in run Usersjanjezekrbenvversions librubygems gemsrake exerake in top required Usersjanjezekrbenvversions binrake in load Usersjanjezekrbenvversions binrake in top required Usersjanjezekrbenvversions librubygems gemsbundler libbundlercliexecrb in load Usersjanjezekrbenvversions librubygems gemsbundler libbundlercliexecrb in kernelload Usersjanjezekrbenvversions librubygems gemsbundler libbundlercliexecrb in run Usersjanjezekrbenvversions librubygems gemsbundler libbundlerclirb in exec Usersjanjezekrbenvversions librubygems gemsbundler libbundlervendorthorlibthorcommandrb in run Usersjanjezekrbenvversions librubygems gemsbundler libbundlervendorthorlibthorinvocationrb in invokecommand Usersjanjezekrbenvversions librubygems gemsbundler libbundlervendorthorlibthorrb in dispatch Usersjanjezekrbenvversions librubygems gemsbundler libbundlerclirb in dispatch Usersjanjezekrbenvversions librubygems gemsbundler libbundlervendorthorlibthorbaserb in start Usersjanjezekrbenvversions librubygems gemsbundler libbundlerclirb in start Usersjanjezekrbenvversions librubygems gemsbundler exebundle in block in top required Usersjanjezekrbenvversions librubygems gemsbundler libbundlerfriendlyerrorsrb in withfriendlyerrors Usersjanjezekrbenvversions librubygems gemsbundler exebundle in top required Usersjanjezekrbenvversions binbundle in load Usersjanjezekrbenvversions binbundle in main Caused by LoadError cannot load such file jsonapirspec Usersjanjezekrbenvversions librubygems gemsbootsnap libbootsnaploadpathcachecoreextkernelrequirerb in require Usersjanjezekrbenvversions librubygems gemsbundler libbundlerruntimerb in block levels in require Usersjanjezekrbenvversions librubygems gemsbundler libbundlerruntimerb in each Usersjanjezekrbenvversions librubygems gemsbundler libbundlerruntimerb in block in require Usersjanjezekrbenvversions librubygems gemsbundler libbundlerruntimerb in each Usersjanjezekrbenvversions librubygems gemsbundler libbundlerruntimerb in require Usersjanjezekrbenvversions librubygems gemsbundler libbundlerrb in require UsersjanjezekCodingRubymineProjectsPiForCloudApiconfigapplicationrb in top required UsersjanjezekCodingRubymineProjectsPiForCloudApiRakefile in requirerelative UsersjanjezekCodingRubymineProjectsPiForCloudApiRakefile in top required Usersjanjezekrbenvversions librubygems gemsrake librakerakemodulerb in load Usersjanjezekrbenvversions librubygems gemsrake librakerakemodulerb in loadrakefile Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in rawloadrakefile Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in block in loadrakefile Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in standardexceptionhandling Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in loadrakefile Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in block in run Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in standardexceptionhandling Usersjanjezekrbenvversions librubygems gemsrake librakeapplicationrb in run Usersjanjezekrbenvversions librubygems gemsrake exerake in top required Usersjanjezekrbenvversions binrake in load Usersjanjezekrbenvversions binrake in top required Usersjanjezekrbenvversions librubygems gemsbundler libbundlercliexecrb in load Usersjanjezekrbenvversions librubygems gemsbundler libbundlercliexecrb in kernelload Usersjanjezekrbenvversions librubygems gemsbundler libbundlercliexecrb in run Usersjanjezekrbenvversions librubygems gemsbundler libbundlerclirb in exec Usersjanjezekrbenvversions librubygems gemsbundler libbundlervendorthorlibthorcommandrb in run Usersjanjezekrbenvversions librubygems gemsbundler libbundlervendorthorlibthorinvocationrb in invokecommand Usersjanjezekrbenvversions librubygems gemsbundler libbundlervendorthorlibthorrb in dispatch Usersjanjezekrbenvversions librubygems gemsbundler libbundlerclirb in dispatch Usersjanjezekrbenvversions librubygems gemsbundler libbundlervendorthorlibthorbaserb in start Usersjanjezekrbenvversions librubygems gemsbundler libbundlerclirb in start Usersjanjezekrbenvversions librubygems gemsbundler exebundle in block in top required Usersjanjezekrbenvversions librubygems gemsbundler libbundlerfriendlyerrorsrb in withfriendlyerrors Usersjanjezekrbenvversions librubygems gemsbundler exebundle in top required Usersjanjezekrbenvversions binbundle in load Usersjanjezekrbenvversions binbundle in main This is a continuation of this PR Ive been looking for nicer ways to test JSON responses and came across this gem Currently the best way to test single values is something like expectresponsebodyto bejsoneqlsomestringinspectatpathfoobarid Since the other PR is years old now and seemingly abandoned I took a minute to make the changes requested and reopen this Let me know if I missed anything With jsonspec and the following test ruby it matches json content with path do json item id jsonshould includejsonid atpathitem end Failures JsonSpecMatchersIncludeJson matches json content FailureError jsonshould includejsonid atpathitem Expected item id to include id at path item specjsonspecmatchersincludejsonspecrb in block levels in top required Finished in seconds files took seconds to load examples failure Failed examples rspec specjsonspecmatchersincludejsonspecrb JsonSpecMatchersIncludeJson matches json content Solves this issue Test from updated README If the value should be parsed before memorizing parsed modifier can be used For example Response data json uuid ad a b url entitiesad a b cucumber Given I keep the JSON at uuid as parsed UUID Now UUID will be replaced with ad a b instead of ad a b so it can be interpolated into the string cucumber Then the JSON should be uuid UUID url entitiesUUID This is a revival of I took most of that PR cleaned up some things and made it work against current HEAD credits go to blowmage The code in JsonSpecremember assumes that the incoming argument will be a string and uses the operator to interpolate from the memory hash into the string However it is perfectly possible to pass in a Numeric type eg Fixnum for which the operator means something totally different which causes the code to try to convert the hash to fixnum which it cant This is especially problematic from the cucumber matchers where your input is always run through remember I ran into the problem when trying to do a cucumber step like And the JSON at count should be but I am completely unable to reproduce it in this repos cucumber tests the always comes in as a string some way I dont understand It appears possible to fix this either by doing tos on the income argument or changing the exclusion criteria to also include isaNumeric ie in addition to checking if the memory hash is empty I think the is numeric check is more precise so Ill submit a pull request with that change but both solve my particular problem Adds a helper to match a specific value in JSON My team needed a way to reliably consistently test the JSON returned by our API despite the facts that the controller that builds the JSON might retrieve models in any order not deterministic and the client that will consume the JSON does not care about the order of models in the array For example our API might respond with objects id someattributefooid someattributebar and that would be totally valid but it is just as likely to respond with objects id someattributebarid someattributefoo instead and that should also be valid To allow the bejsoneql matcher to match outoforder arrays Ive added the chain method inanyorder It works by sorting each array in lexical order according to the JSON string representation of the element You can also pass false to inanyorder if you want to which then behaves as if you had not chained inanyorder at all in case someone needs to determine indifference dynamically at runtime Examples are available in the modified bejsoneqlspecrb file I also added some tests to ensure that this feature should work correctly when combined with the other features of this matcher 