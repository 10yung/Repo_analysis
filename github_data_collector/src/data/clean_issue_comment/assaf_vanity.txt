When I attempt to run the basic vanity generator I get the following error Could not find generator vanity Maybe you meant vanity task or mailer Run rails generate help for more options of course that error message brings up all kinds of existentialistic questions Shroedingers Cat and a nice vacation in Copenhagen Ive tried a large number of variations of the command including but not limited to rails generate vanity rails generate Vanityvanity rails generate vanityvanity rails generate Vanity Nothing seems to work In reading the compatibility information in the README I noticed that ruby isnt mentioned as having been tested and neither has Rails Im wondering if theres an issue in this or if my local setup is somehow compromised My next step was to clone vanity and run the specs I got failures each ones being exactly like this one NotificationTypecomputedisplaytime when the rollupschedule is valid natural language expression returns the next occurence on the schedule after the given date FailureError expectnotificationtypecomputedisplaytimeoccurredatto eq Timezoneparse expected got compared using Diff Fri Apr CDT specmodelsnotificationtypespecrb in block levels in top required That set of failures might be on meIm using my laptop far from home this week and the output suggests a timezone issue Anyway I guess it would be good to know if vanity is compatible with Ruby Rails x If it isnt is that compatibility in the works Please note that I posted a related question on Stackoverflow Hello there we have tried to set up progressive tests and it seems its not possible So what we need to do its to start two experiments at the same time with the same alternative For example One experiment is landingpagecvralternatives ab Second experiment is landingpagectaalternatives ab We should start both in the same time and it should be same alternativefor example a for both What we tried so far We use Vanityplaygroundexperiments experimentname choosesalternative and test start with chosen alternative But when we have to finish that test like this Vanitytrackexperimentname that didnt work We try to start the second test and after that we try to update VanityParticipantsupdatecolumnsseen alternativeindex Also we try to add a variable in an experiment for alternatives We think the best solution will be if we can somehow pass alternative as a variableex Vanityabtestexperimentname alternative on the starting experiment Do you have any solutions for this When we choose winner of ab test and then click on link make permanent we confirm with for example Finish this experiment and assign all current and future participants to option B What I need to do if I dont want to assign all future participants to option B I just want to close test without assign participants any more Im not sure if this is an issue or me misinterpreting this section of the docs A VanityMetric object responds to track and increments a record in the database an O operation It creates one record for each day accumulating that day s count When generating reports the values method fetches the values of all these keys also O In practice calling trackmetric creates a new row in the vanitymetricvalues table for each call such that were seeing thousands of rows that are of the form id vanitymetricid index value date I noticed this when we started failing to load the vanity dashboard since the query required to populate the metrics graph was timing out I am trying to write a controller test in Rspec where I am forcing Vanity to choose a value but the forced value is not respected before do Vanitycontext controller Vanityplaygroundexperimentkeychoosesvalue end What does it mean converted nil converted converted converted field from vanityparticipants table What is show me and how it works in admin panel vanity When I try to run assetsprecompile task on production server Rails Vanity last version I get this error NoMethodError undefined method setexperimentcreatedat for nilNilClass varwwwoneclasssharedbundleruby gemsvanity libvanityexperimentbaserb in save varwwwoneclasssharedbundleruby gemsvanity libvanityexperimentabtestrb in save varwwwoneclasssharedbundleruby gemsvanity libvanityexperimentdefinitionrb in define varwwwoneclasssharedbundleruby gemsvanity libvanityexperimentabtestrb in abtest experimentsexpandedcouponcoderb in newbinding varwwwoneclasssharedbundleruby gemsvanity libvanityexperimentbaserb in eval varwwwoneclasssharedbundleruby gemsvanity libvanityexperimentbaserb in block in load varwwwoneclasssharedbundleruby gemsvanity libvanityexperimentbaserb in instanceeval varwwwoneclasssharedbundleruby gemsvanity libvanityexperimentbaserb in load varwwwoneclasssharedbundleruby gemsvanity libvanityplaygroundrb in block in setexperiments varwwwoneclasssharedbundleruby gemsvanity libvanityplaygroundrb in each varwwwoneclasssharedbundleruby gemsvanity libvanityplaygroundrb in setexperiments varwwwoneclasssharedbundleruby gemsvanity libvanityplaygroundrb in initialize varwwwoneclasssharedbundleruby gemsvanity libvanityvanityrb in new varwwwoneclasssharedbundleruby gemsvanity libvanityvanityrb in load varwwwoneclasssharedbundleruby gemsvanity libvanityvanityrb in playground varwwwoneclasscurrentconfigenvironmentsfeaturerb in block levels in top required varwwwoneclasssharedbundleruby gemsactivesupport libactivesupportlazyloadhooksrb in block in executehook varwwwoneclasssharedbundleruby gemsactivesupport libactivesupportlazyloadhooksrb in withexecutioncontrol varwwwoneclasssharedbundleruby gemsactivesupport libactivesupportlazyloadhooksrb in executehook varwwwoneclasssharedbundleruby gemsactivesupport libactivesupportlazyloadhooksrb in block in runloadhooks varwwwoneclasssharedbundleruby gemsactivesupport libactivesupportlazyloadhooksrb in each varwwwoneclasssharedbundleruby gemsactivesupport libactivesupportlazyloadhooksrb in runloadhooks varwwwoneclasssharedbundleruby gemsrailties librailsapplicationfinisherrb in block in moduleFinisher varwwwoneclasssharedbundleruby gemsrailties librailsinitializablerb in instanceexec varwwwoneclasssharedbundleruby gemsrailties librailsinitializablerb in run varwwwoneclasssharedbundleruby gemsrailties librailsinitializablerb in block in runinitializers varwwwoneclasssharedbundleruby gemsrailties librailsinitializablerb in runinitializers varwwwoneclasssharedbundleruby gemsrailties librailsapplicationrb in initialize varwwwoneclasssharedbundleruby gemsrailties librailsrailtierb in publicsend varwwwoneclasssharedbundleruby gemsrailties librailsrailtierb in methodmissing varwwwoneclasscurrentconfigenvironmentrb in top required varwwwoneclasssharedbundleruby gemsactivesupport libactivesupportdependenciesrb in require varwwwoneclasssharedbundleruby gemsactivesupport libactivesupportdependenciesrb in block in require varwwwoneclasssharedbundleruby gemsactivesupport libactivesupportdependenciesrb in loaddependency varwwwoneclasssharedbundleruby gemsactivesupport libactivesupportdependenciesrb in require varwwwoneclasssharedbundleruby gemsrailties librailsapplicationrb in requireenvironment varwwwoneclasssharedbundleruby gemsrailties librailsapplicationrb in block in runtasksblocks varwwwoneclasssharedbundleruby gemsairbrake libairbrakerakerb in execute varwwwoneclasssharedbundleruby gemssprocketsrails libsprocketsrailstaskrb in block levels in define varwwwoneclasssharedbundleruby gemsairbrake libairbrakerakerb in execute varwwwoneclasssharedbundleruby gemsrake exerake in top required homeubunturvmgemsruby gemsbundler libbundlercliexecrb in load homeubunturvmgemsruby gemsbundler libbundlercliexecrb in kernelload homeubunturvmgemsruby gemsbundler libbundlercliexecrb in run homeubunturvmgemsruby gemsbundler libbundlerclirb in exec homeubunturvmgemsruby gemsbundler libbundlervendorthorlibthorcommandrb in run homeubunturvmgemsruby gemsbundler libbundlervendorthorlibthorinvocationrb in invokecommand homeubunturvmgemsruby gemsbundler libbundlervendorthorlibthorrb in dispatch homeubunturvmgemsruby gemsbundler libbundlerclirb in dispatch homeubunturvmgemsruby gemsbundler libbundlervendorthorlibthorbaserb in start homeubunturvmgemsruby gemsbundler libbundlerclirb in start homeubunturvmgemsruby gemsbundler exebundle in block in top required homeubunturvmgemsruby gemsbundler libbundlerfriendlyerrorsrb in withfriendlyerrors homeubunturvmgemsruby gemsbundler exebundle in top required homeubunturvmgemsruby binbundle in load homeubunturvmgemsruby binbundle in main homeubunturvmgemsruby binrubyexecutablehooks in eval homeubunturvmgemsruby binrubyexecutablehooks in main Prior to this fix stubbing a specific outcome with AbTestchooses would occasionally set the shown bit on a participant because the code at noticed that the persisted participants alternative differed from the alternative selected by the hashing algorithm in alternativefor This would cause problems downstream in the conversion code because abshowing returns true on this participant Another alternative to fix my specific issue would be to remove the alternativeforidentity index check from AbTestchooses entirely because Im not sure what its for But it weirds me out in general that alternativefor might disagree with the values in the database and Im not sure where else that could cause problems I didnt write a test exposing this behavior because it would probably require finessing the identity of a vanity participant so the hash code goes a specific way which seemed brittle But I can backfill one if its required to get this merged While testing Vanity behavior in situation when Redis is down we discovered that the following code Vanityplaygroundparticipantinfovanityidentity throws an error NoMethodError undefined method toi for trueTrueClass with no stack trace in Vanity code We traced how the error and found a workaround but it probably makes sense to get fixed on Vanity side Here is Vanityplaygroundparticipantinfo code ruby def participantinfoparticipantid participantarray experimentsvaluessortby nameeach do e index connectionabassignedeid participantid if index participantarray e ealternatives indextoi end end participantarray end Looks like when the connection to Redis is down abassigned returns true instead of nil or which is being converted to int This is the code of RedisAdapterabassigned ruby def abassignedexperiment identity callrediswithfailover do Vanityplaygroundexperiments experiment alternativeseach do alternative if experimentssismember experimentaltsalternativeidparticipants identity return alternativeid end end nil end end So it either return alternativeid or nil But we get true how come Lets check callrediswithfailover method This is RedisAdaptercallrediswithfailover ruby def callrediswithfailoverarguments callingmethod caller begin yield rescue e if Vanityconfigurationfailoverondatastoreerror Vanityconfigurationondatastoreerrorcalle selfclass callingmethod arguments else raise e end end end It either rethrows exception or return blocks return value or it returns result of ondatastoreerror callback This is the callback we have documentation says that return value will be ignored but looks like it is not ruby Vanityconfigure do config configfailoverondatastoreerror true configondatastoreerror Procnew do error klass method arguments RailsloggererrorVanity error error Called by klassinspect method methodinspect with arguments arguments end end If we add nil as return value of ondatastoreerror callback everything works ok Without it Railsloggererror seems to return true which is being returned from abassigned and breaks participantsinfo method logic We are not sure how it should be fixed probably documentation just should mention returning nil 