Fixes Improves the behaviour for theres no longer a BUG message on stderr but the tests dont pass the error is recorded in the log message Conflicts with The code is based on the aliases code Some edge cases are probably missing In particular I think whats happening is that in aliases aliasstyle is initialized to alias but in parameters paramstyle isnt analogously initialized so thats why the assign style never gets set The return in zshhighlightmainaddregionhighlight makes assign not be recorded anywhere Hints welcome x Add array parameter versions of the aliasprecommandoptionargumentzsh tests Make them pass cf pass array parameters through the alias machinery Fixes Question Are there any concerns about highlighting redirections by default Shall we add a color theme We could enable it automatically after checking the terminals capabilities in terminfo First case zsh foobarxls foobar highlights the ba in green from ls as foreseen in Second case Exactly the same with a shorter parameter name zsh yxls y zshsyntaxhighlighting BUG zshhighlighthighlightermainpaint start end Fix a CDPATH bug and Also handles the case of nonexecutable directories Idea from Two cases BUFFERprint r releasemd highlights the backslash but shouldnt PREBUFFERprint r releasemd BUFFERfoo highlights releasemd even though none of that should be highlighted Travis build fails on zsh and older since commit b ab d d c e c ba b which added a test for f f df e cac be bda I didnt notice that yesterday because the build just before that one failed too for unrelated reasons On the failure is as follows tap backslash not ok expected unknowntoken observed arg ok cardinality check We should fix this for LTS distros users and to make the CI bots useful Context weve received multiple support questions which were resolved by having the user switch to the featureredrawhook branch eg After merging featureredrawhook arrange for users of that branch to see a message You may switch back to master