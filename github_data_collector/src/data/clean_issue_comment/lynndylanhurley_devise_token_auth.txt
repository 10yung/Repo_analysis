Updating usersemail will update the uid Is this correct behavior The expected behavior is that userupdate email xxxxx does not update uid and email We expect these to be updated when we complete the change from the token given in the authentication email rails console user Userfind userupdateemail hogeexamplecom User Update ms UPDATE users SET usersuid hogeexamplecom usersconfirmationtoken xxxxxxxxxxxxxx usersconfirmationsentat usersunconfirmedemail hogeexamplecom usersupdatedat WHERE usersid appmodelsuserrb frozenstringliteral true class User ActiveRecordBase devise databaseauthenticatable registerable recoverable rememberable trackable confirmable include DeviseTokenAuthConcernsUser def postponeemailchange true end end devisetokenauth gem version devise gem version ruby version rails version Also does it have JWT support Id like to have silent refresh support After upgrading from to weve encountered some issues in our project that are related to the new DeviseTokenAuthTokenFactory approach One of those is the fact that it is not guaranteed that setrequeststart is called before currentuser eg if using currentuser in logstashers custom fields which leads to token being overwritten by a blank Token and updateauthheader not working properly since tokenclient is going to be nil Is there anything that speaks against the following approach ruby token DeviseTokenAuthTokenFactorynew Version Hi How can i override authenticateuser error response method Added Travis config for Rails and Ruby for all databases The change expands the documentation with an endpoint resending the confirmation of the email address The project Im on has an overridden TimeDATEFORMATS default that does not include the seconds in the serialized time string This broke batch detection in a way that was very difficult to track down This PR calls asjson before serializing just like the default json serializer In our case it happened that the client was an empty hash because the user was authenticated from a different place Although in order to get the access to swagger with was mounted into the api we needed to go through the main Api controller That resolved in undefined method for nilNilClass The solution is quite simple and its just a nil check issue WHAT I removed Trackable option of resource model ex User from generator code WHY Most of devisetokenauth users would encountered following errors because devisetokenauths install command does not generate columns of Trackable option by default but in the model that was created by install command is including trackable option So I want remove it Started POST apiauthsignin for at Processing by DeviseTokenAuthSessionsControllercreate as Parameters emailadminexamplecom password FILTERED passwordconfirmation FILTERED sessionemailadminexamplecom password FILTERED passwordconfirmation FILTERED Unpermitted parameters passwordconfirmation session Unpermitted parameters passwordconfirmation session User Load ms SELECT users FROM users WHERE BINARY email adminexamplecom AND provider email ORDER BY usersid ASC LIMIT Unpermitted parameters passwordconfirmation session Unpermitted parameters passwordconfirmation session ms BEGIN User Update ms UPDATE users SET userstokens Yyo HeIa IWPe HlWlKQ token a xezZ NcEPTNGSLtM hf OTGwcXrtxGKCXLncn OhLjemZVGQW expiry QLXe cmya gSgUpyqnhqg token a D DWXQWOXGw wcWaiAu JZkxHBZ aezDvEzFssu NWLtMnMWbC expiry Pv ppcBK SmSlTA QVfA token a fRTY j wJFTqrBh dZJZUiqGwreW ZdE CWNjJv mr XSFRNsO expiry usersupdatedat WHERE usersid ms COMMIT Completed Internal Server Error in ms ActiveRecord ms Allocations NoMethodError undefined method currentsigninat for User x b activemodel libactivemodelattributemethodsrb in methodmissing devise libdevisemodelstrackablerb in updatetrackedfields devise libdevisemodelstrackablerb in updatetrackedfields devise libdevisehookstrackablerb in block in main warden libwardenhooksrb in block in runcallbacks warden libwardenhooksrb in each warden libwardenhooksrb in runcallbacks warden libwardenmanagerrb in runcallbacks warden libwardenproxyrb in setuser devise libdevisecontrollerssigninoutrb in signin devisetokenauth appcontrollersdevisetokenauthsessionscontrollerrb in create DTA was merged a PR that removed columns for Trackable option The devise is also not including Trackable option by default to support GDPR PR a PR that the trackable option was removed I would suggest move email regexp to config The same as devise did Now the customization of validation is not very obvious