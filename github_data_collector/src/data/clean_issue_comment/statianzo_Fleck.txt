 WS WS WS IIS When an error occurs from the client as The handshake failed due to an unexpected packet format the server socket closes although this is not a listeners problem It would be good to log the client IP when accept error I just observed a case where the client of my websocket server disconnected and this resulted in the OnError event being called with text Error while reading and an IOException with SocketException inner exception followed by a Log LevelDebug Error while reading and I was never called on OnClose even though I have an OnClose handler Subsequent tries to write a message to the websocket client resulted of course in the warning Data sent while closing or after close Ignoring As far as I can see in ILSpy I would have expected Fleck to call Close and at some point CloseSocket calling my OnClose handler but it obviously didnt happen Note Im using Fleck and my OnError handler only logs the issue and does not try to close the socket ERROR WebSocket Error while reading SystemIOIOException Unable to read data from the transport connection An existing connection was forcibly closed by the remote host SystemNetSocketsSocketException An existing connection was forcibly closed by the remote host at SystemNetSocketsSocketEndReceiveIAsyncResult asyncResult at SystemNetSocketsNetworkStreamEndReadIAsyncResult asyncResult End of inner exception stack trace at SystemNetSocketsNetworkStreamEndReadIAsyncResult asyncResult at SystemThreadingTasksTaskFactory FromAsyncCoreLogicIAsyncResult iar Func endFunction Action endAction Task promise Boolean requiresSynchronization DEBUG WebSocket Error while reading SystemIOIOException Unable to read data from the transport connection An existing connection was forcibly closed by the remote host SystemNetSocketsSocketException An existing connection was forcibly closed by the remote host at SystemNetSocketsSocketEndReceiveIAsyncResult asyncResult at SystemNetSocketsNetworkStreamEndReadIAsyncResult asyncResult End of inner exception stack trace at SystemNetSocketsNetworkStreamEndReadIAsyncResult asyncResult at SystemThreadingTasksTaskFactory FromAsyncCoreLogicIAsyncResult iar Func endFunction Action endAction Task promise Boolean requiresSynchronization DEBUG WebSocket Pushing JSON WARN WebSocket Data sent while closing or after close Ignoring Server will check before binding if the port is available to use I want to run multiple process of the websocket server but on different ports when But before that I started the process of the server and they started on the same port How is it possible that two process listen on same TCP port Shouldnt it throw address already in use error Hello I am using ASPNET MVC and have successfully tested Fleck on my local machine I deployed this application to an app service on Azure and I cant make a web socket connection Here is what I have on the ApplicationStart void ApplicationStartobject sender EventArgs e Code that runs on application startup AreaRegistrationRegisterAllAreas GlobalConfigurationConfigureWebApiConfigRegister OPEN A WEBSOCKET CONNECTION FleckLogLevel LogLevelDebug var allSockets new Dictionarystring IWebSocketConnection var server new WebSocketServerws serverStartsocket socketOnOpen ConsoleWriteLineOpen var guid socketConnectionInfoPathReplace allSocketsAddguid socket socketOnClose ConsoleWriteLineClose var guid socketConnectionInfoPathReplace allSocketsRemoveguid socketOnMessage message ConsoleWriteLinemessage allSocketsValuesToListForEachs sSendEcho Sending back the same message message socketOnBinary bytes ConsoleWriteLinereceived binary On the client side here is what I have script typetextjavascript var ws null function createConnection ws new WebSocketwsmytestappazurewebsitesnet wsbinaryType blob wsonopen function alertAbout to send data wssendHello World I WANT TO SEND THIS MESSAGE TO THE SERVER alertMessage sent wsonmessage function evt alertAbout to receive data var receivedmsg evtdata alertMessage received receivedmsg wsonclose function websocket is closed alertConnection is closed function sendMessage var txtBox documentgetElementByIdmessageTxt var txtBox documentgetElementByIdmessageTxt const arr txtBoxvalue txtBox value const array new Float Array for var i i arraylength i array i i consolelogarray wssendarr script When trying to connect I get the following error WebSocket connection to wsmytestappazurewebsitesnet failed Error in connection establishment netERRCONNECTIONTIMEDOUT Any suggestions will be highly appreciated Thank you Suggestion WebSocket Close Code Close Reason Problem The IWebSocketConnection interface defines the following method for closing the WebSocket connection As specified in the following RFC Specifications it is possible to specify a close and optionally a message for debugging purposes binary or text but the interface does not provide a method to specify the close code the implementation WebSocketConnection does Hybi Section Hybi Section Hybi Section Suggestion My suggestion is to add the method overload void CloseWebSocketStatusCodes code string message null to the IWebSocketConnection interface and implement it in WebSocketConnection Example usage csharp CloseWebSocketStatusCodesMessageTooBig The message exceeded the maximum accepted payload size CloseWebSocketStatusCodes The session is no longer valid Thanks in advance The Fleck server seems to have selected SslProtocolsTls as the default value for SslProtocols I think that if EnabledSslProtocols equals SslProtocolsNone SslProtocolsNone should be set as it is If you select SslProtocolsNone the best security protocol and version for your OS will be selected Please refer to the following document Chrome Edge IE Firefox and Safari to disable TLS and TLS in I think it is better to choose SslProtocolsNone hello here is my web client log typegoodsOutComplete info slotID serialNumber typegoodsOutComplete info slotID serialNumber in c side we send the message once but Fleck send this message twice to my html js client I have my own web socket server running on localhost port SystemNetSocketsSocketException An attempt was made to access a socket in a way forbidden by its access permissions Code snippet var server new WebSocketServerws serverStartsocket socketOnOpen ConsoleWriteLineOpen socketOnClose ConsoleWriteLineClose socketOnMessage message socketSendmessage 