Hi Im currently struggling to understand how to send immediately a message without having to wait for the message block to complete My case is Suppose I have this def longproc sleep end and this manager wsonmessage lambda do event wssendTimenowtos longproc wssendTimenowtos end And on the client side wson message do event p message eventdata Timenow end If I run it I get message message And i receive them both after the completion of the onmessage block of the client Is there any way that i missed to immediately send the message ie so that the first message timenow in the client is equal to not Im using this library and I was wondering if there is a way on the server side to find a connected socket via its objectid or send message to a specific socket by its objectid I am asking this because Id like to send messages to specific socket from the server and wait for the client response via the same socket Right now I store all of the connected clients on the server in a map which is not the best Id like to store the objectids in redis and just use that information to find the correct socket when the server needs to send a message to a client Using this gem with puma and a very simple rack middleware I was noticing up to seconds of latency between when the server logged that a WS message had been sent and when a browser actually logged receiving it This cant be due to network latency because Im running this on my local computer and I still see the latency However when I switch thin in the latency is gone and messages are received within a few ms How can I go about troubleshooting this issue with puma Any recommendations Im trying to implement a pubsub mechanism but am specifically having trouble implementing a channel feature and I cant find any API to help me AFAIK a channel is an abstraction that is not present by default in the WS specification Could you help me implement such a thing over this gem Any guidance would be much appreciated Thanks Hi As the title says occurred error failed Invalid frame header I tried as follows clone your latest master branch move current directory to example install gems by bundlr bundle install access to localhost by chrome open developper tool of chrome and type const ws new WebSocketwslocalhost console tab occur error VM WebSocket connection to wslocalhost failed Invalid frame header tried environment OSX Sierra Google Chrome ruby p ruby cleaned gem removed all gem before execute them EMConnection should implements a sslverifypeer method when you use a verifypeer true option So I implement these code add trustca option implement sslverifypeer on Connection 