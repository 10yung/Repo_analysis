Without proper seckrb the user cannot define kerberized exports as then the NFSv root seemingly does not exist By adding the universal seckrb pkrb ikrb sys option to defaults we allow both kerberized and hostauthenticated exports to be created Fixes Signedoffby Ond ej Hlavat aearsiseideocz Description of issuequestion Due to implicit secsys option on the NFSv root kerberized exports do not have the root defined and mounting such exports fails Steps to reproduce issue Define NFS export with seckrb configure kerberos properly Even then mounting fails mount nasShare mntnas o seckrb vers vv mountnfs timeout set for Sat Jan mountnfs trying textbased options seckrb vers addr clientaddr mountnfs mount Operation not permitted mountnfs Operation not permitted This can be fixed simply by adding the seckrb to the root export options Description of issue When creating a shared folder that is a subdirectory under a btrfs subvolume that is already shared I get an error in the web UI The relevant problem seems to be ID restartsharedfolderoldhomemountunit Function modulerun Result False Comment An exception occurred in this state Traceback most recent call last File usrlibpython distpackagessaltstatepy line in call cdata kwargs File usrlibpython distpackagessaltloaderpy line in wrapper return fargs kwargs File usrlibpython distpackagessaltutilsdecoratorsinitpy line in decorate return selfcallfunctionkwargs File usrlibpython distpackagessaltutilsdecoratorsinitpy line in callfunction raise error File usrlibpython distpackagessaltutilsdecoratorsinitpy line in callfunction return selffunctionargs kwargs File usrlibpython distpackagessaltstatesmodulepy line in run funcargskwargsgetfunc File usrlibpython distpackagessaltstatesmodulepy line in callfunction mret salt name argtype funckw File usrlibpython distpackagessaltmodulessystemdservicepy line in restart raise CommandExecutionErrorstripscoperet stderr saltexceptionsCommandExecutionError Job for sharedfoldersoldhomemount failed See systemctl status sharedfoldersoldhomemount and journalctl xe for details Started Duration ms Changes Failed to execute command export PATHbinsbinusrbinusrsbinusrlocalbinusrlocalsbin export LANGCUTF omvsalt deploy run systemd with exit code debian ID removesharedfoldermountunitfiles Function modulerun Result True Comment filefind etcsystemdsystemsharedfoldersboxy x dappsmount etcsystemdsystemsharedfoldersoldhomemount etcsystemdsystemsharedfoldershomemount etcsystemdsystemsharedfoldersodroidhc mount etcsystemdsystemsharedfoldersphotosmount etcsystemdsystemsharedfolderstmpmount Started Duration ms Changes filefind etcsystemdsystemsharedfoldersboxy x dappsmount etcsystemdsystemsharedfoldersoldhomemount etcsystemdsystemsharedfoldershomemount etcsystemdsystemsharedfoldersodroidhc mount etcsystemdsystemsharedfoldersphotosmount etcsystemdsystemsharedfolderstmpmount ID configuresharedfolderoldhomemountunitfile Function filemanaged Name etcsystemdsystemsharedfoldersoldhomemount Result True Comment File etcsystemdsystemsharedfoldersoldhomemount updated Started Duration ms Changes diff New file mode ID configuresharedfolderodroidhc mountunitfile Function filemanaged Name etcsystemdsystemsharedfoldersodroidhc mount Result True Comment File etcsystemdsystemsharedfoldersodroidhc mount updated Started Duration ms Changes diff New file mode ID configuresharedfoldertmpmountunitfile Function filemanaged Name etcsystemdsystemsharedfolderstmpmount Result True Comment File etcsystemdsystemsharedfolderstmpmount updated Started Duration ms Changes diff New file mode ID configuresharedfolderhomemountunitfile Function filemanaged Name etcsystemdsystemsharedfoldershomemount Result True Comment File etcsystemdsystemsharedfoldershomemount updated Started Duration ms Changes diff New file mode ID configuresharedfolderboxyappsmountunitfile Function filemanaged Name etcsystemdsystemsharedfoldersboxy x dappsmount Result True Comment File etcsystemdsystemsharedfoldersboxy x dappsmount updated Started Duration ms Changes diff New file mode ID configuresharedfoldergamesmountunitfile Function filemanaged Name etcsystemdsystemsharedfoldersgamesmount Result True Comment File etcsystemdsystemsharedfoldersgamesmount updated Started Duration ms Changes diff New file mode ID sharedfoldermountunitssystemctldaemonreload Function modulerun Name servicesystemctlreload Result True Comment Started Duration ms Changes ID enablesharedfolderoldhomemountunit Function serviceenabled Name sharedfoldersoldhomemount Result True Comment Service sharedfoldersoldhomemount is already enabled and is in the desired state Started Duration ms Changes ID restartsharedfolderoldhomemountunit Function modulerun Result False Comment An exception occurred in this state Traceback most recent call last File usrlibpython distpackagessaltstatepy line in call cdata kwargs File usrlibpython distpackagessaltloaderpy line in wrapper return fargs kwargs File usrlibpython distpackagessaltutilsdecoratorsinitpy line in decorate return selfcallfunctionkwargs File usrlibpython distpackagessaltutilsdecoratorsinitpy line in callfunction raise error File usrlibpython distpackagessaltutilsdecoratorsinitpy line in callfunction return selffunctionargs kwargs File usrlibpython distpackagessaltstatesmodulepy line in run funcargskwargsgetfunc File usrlibpython distpackagessaltstatesmodulepy line in callfunction mret salt name argtype funckw File usrlibpython distpackagessaltmodulessystemdservicepy line in restart raise CommandExecutionErrorstripscoperet stderr saltexceptionsCommandExecutionError Job for sharedfoldersoldhomemount failed See systemctl status sharedfoldersoldhomemount and journalctl xe for details Started Duration ms Changes ID enablesharedfolderodroidhc mountunit Function serviceenabled Name sharedfoldersodroidhc mount Result True Comment Service sharedfoldersodroidhc mount is already enabled and is in the desired state Started Duration ms Changes ID restartsharedfolderodroidhc mountunit Function modulerun Result True Comment servicerestart True Started Duration ms Changes servicerestart True ID enablesharedfoldertmpmountunit Function serviceenabled Name sharedfolderstmpmount Result True Comment Service sharedfolderstmpmount is already enabled and is in the desired state Started Duration ms Changes ID restartsharedfoldertmpmountunit Function modulerun Result True Comment servicerestart True Started Duration ms Changes servicerestart True ID enablesharedfolderhomemountunit Function serviceenabled Name sharedfoldershomemount Result True Comment Service sharedfoldershomemount is already enabled and is in the desired state Started Duration ms Changes ID restartsharedfolderhomemountunit Function modulerun Result True Comment servicerestart True Started Duration ms Changes servicerestart True ID enablesharedfolderboxyappsmountunit Function serviceenabled Name sharedfoldersboxy x dappsmount Result True Comment Service sharedfoldersboxy x dappsmount is already enabled and is in the desired state Started Duration ms Changes ID restartsharedfolderboxyappsmountunit Function modulerun Result True Comment servicerestart True Started Duration ms Changes servicerestart True ID enablesharedfoldergamesmountunit Function serviceenabled Name sharedfoldersgamesmount Result True Comment Service sharedfoldersgamesmount has been enabled and is in the desired state Started Duration ms Changes sharedfoldersgamesmount True ID restartsharedfoldergamesmountunit Function modulerun Result True Comment servicerestart True Started Duration ms Changes servicerestart True ID configuretmpmountunitfile Function filemanaged Name etcsystemdsystemtmpmount Result True Comment File etcsystemdsystemtmpmount is in the correct state Started Duration ms Changes ID tmpmountunitsystemctldaemonreload Function modulerun Name servicesystemctlreload Result True Comment State was not run because none of the onchanges reqs changed Started Duration ms Changes Summary for debian Succeeded changed Failed Total states run Total run time msusrlibpython distpackagessaltmodulesfilepy DeprecationWarning Using or importing the ABCs from collections instead of from collectionsabc is deprecated and in it will stop working from collections import Iterable Mapping namedtuple With the details Error OMV ExecException Failed to execute command export PATHbinsbinusrbinusrsbinusrlocalbinusrlocalsbin export LANGCUTF omvsalt deploy run systemd with exit code debian ID removesharedfoldermountunitfiles Function modulerun Result True Comment filefind etcsystemdsystemsharedfoldersboxy x dappsmount etcsystemdsystemsharedfoldersoldhomemount etcsystemdsystemsharedfoldershomemount etcsystemdsystemsharedfoldersodroidhc mount etcsystemdsystemsharedfoldersphotosmount etcsystemdsystemsharedfolderstmpmount Started Duration ms Changes filefind etcsystemdsystemsharedfoldersboxy x dappsmount etcsystemdsystemsharedfoldersoldhomemount etcsystemdsystemsharedfoldershomemount etcsystemdsystemsharedfoldersodroidhc mount etcsystemdsystemsharedfoldersphotosmount etcsystemdsystemsharedfolderstmpmount ID configuresharedfolderoldhomemountunitfile Function filemanaged Name etcsystemdsystemsharedfoldersoldhomemount Result True Comment File etcsystemdsystemsharedfoldersoldhomemount updated Started Duration ms Changes diff New file mode ID configuresharedfolderodroidhc mountunitfile Function filemanaged Name etcsystemdsystemsharedfoldersodroidhc mount Result True Comment File etcsystemdsystemsharedfoldersodroidhc mount updated Started Duration ms Changes diff New file mode ID configuresharedfoldertmpmountunitfile Function filemanaged Name etcsystemdsystemsharedfolderstmpmount Result True Comment File etcsystemdsystemsharedfolderstmpmount updated Started Duration ms Changes diff New file mode ID configuresharedfolderhomemountunitfile Function filemanaged Name etcsystemdsystemsharedfoldershomemount Result True Comment File etcsystemdsystemsharedfoldershomemount updated Started Duration ms Changes diff New file mode ID configuresharedfolderboxyappsmountunitfile Function filemanaged Name etcsystemdsystemsharedfoldersboxy x dappsmount Result True Comment File etcsystemdsystemsharedfoldersboxy x dappsmount updated Started Duration ms Changes diff New file mode ID configuresharedfoldergamesmountunitfile Function filemanaged Name etcsystemdsystemsharedfoldersgamesmount Result True Comment File etcsystemdsystemsharedfoldersgamesmount updated Started Duration ms Changes diff New file mode ID sharedfoldermountunitssystemctldaemonreload Function modulerun Name servicesystemctlreload Result True Comment Started Duration ms Changes ID enablesharedfolderoldhomemountunit Function serviceenabled Name sharedfoldersoldhomemount Result True Comment Service sharedfoldersoldhomemount is already enabled and is in the desired state Started Duration ms Changes ID restartsharedfolderoldhomemountunit Function modulerun Result False Comment An exception occurred in this state Traceback most recent call last File usrlibpython distpackagessaltstatepy line in call cdata kwargs File usrlibpython distpackagessaltloaderpy line in wrapper return fargs kwargs File usrlibpython distpackagessaltutilsdecoratorsinitpy line in decorate return selfcallfunctionkwargs File usrlibpython distpackagessaltutilsdecoratorsinitpy line in callfunction raise error File usrlibpython distpackagessaltutilsdecoratorsinitpy line in callfunction return selffunctionargs kwargs File usrlibpython distpackagessaltstatesmodulepy line in run funcargskwargsgetfunc File usrlibpython distpackagessaltstatesmodulepy line in callfunction mret salt name argtype funckw File usrlibpython distpackagessaltmodulessystemdservicepy line in restart raise CommandExecutionErrorstripscoperet stderr saltexceptionsCommandExecutionError Job for sharedfoldersoldhomemount failed See systemctl status sharedfoldersoldhomemount and journalctl xe for details Started Duration ms Changes ID enablesharedfolderodroidhc mountunit Function serviceenabled Name sharedfoldersodroidhc mount Result True Comment Service sharedfoldersodroidhc mount is already enabled and is in the desired state Started Duration ms Changes ID restartsharedfolderodroidhc mountunit Function modulerun Result True Comment servicerestart True Started Duration ms Changes servicerestart True ID enablesharedfoldertmpmountunit Function serviceenabled Name sharedfolderstmpmount Result True Comment Service sharedfolderstmpmount is already enabled and is in the desired state Started Duration ms Changes ID restartsharedfoldertmpmountunit Function modulerun Result True Comment servicerestart True Started Duration ms Changes servicerestart True ID enablesharedfolderhomemountunit Function serviceenabled Name sharedfoldershomemount Result True Comment Service sharedfoldershomemount is already enabled and is in the desired state Started Duration ms Changes ID restartsharedfolderhomemountunit Function modulerun Result True Comment servicerestart True Started Duration ms Changes servicerestart True ID enablesharedfolderboxyappsmountunit Function serviceenabled Name sharedfoldersboxy x dappsmount Result True Comment Service sharedfoldersboxy x dappsmount is already enabled and is in the desired state Started Duration ms Changes ID restartsharedfolderboxyappsmountunit Function modulerun Result True Comment servicerestart True Started Duration ms Changes servicerestart True ID enablesharedfoldergamesmountunit Function serviceenabled Name sharedfoldersgamesmount Result True Comment Service sharedfoldersgamesmount has been enabled and is in the desired state Started Duration ms Changes sharedfoldersgamesmount True ID restartsharedfoldergamesmountunit Function modulerun Result True Comment servicerestart True Started Duration ms Changes servicerestart True ID configuretmpmountunitfile Function filemanaged Name etcsystemdsystemtmpmount Result True Comment File etcsystemdsystemtmpmount is in the correct state Started Duration ms Changes ID tmpmountunitsystemctldaemonreload Function modulerun Name servicesystemctlreload Result True Comment State was not run because none of the onchanges reqs changed Started Duration ms Changes Summary for debian Succeeded changed Failed Total states run Total run time msusrlibpython distpackagessaltmodulesfilepy DeprecationWarning Using or importing the ABCs from collections instead of from collectionsabc is deprecated and in it will stop working from collections import Iterable Mapping namedtuple in usrsharephpopenmediavaultsystemprocessinc Stack trace usrsharephpopenmediavaultenginemoduleserviceabstractinc OMV System Processexecute usrshareopenmediavaultenginedrpcconfiginc OMV Engine Module ServiceAbstractdeploy internal function Engined Rpc ConfigapplyChangesArray Array usrsharephpopenmediavaultrpcserviceabstractinc calluserfuncarrayArray Array usrsharephpopenmediavaultrpcserviceabstractinc OMV Rpc ServiceAbstractcallMethodapplyChanges Array Array usrsharephpopenmediavaultrpcserviceabstractinc OMV Rpc ServiceAbstractOMV Rpc closuretmpbgstatusJh tmpbgoutput S usrsharephpopenmediavaultrpcserviceabstractinc OMV Rpc ServiceAbstractexecBgProcObjectClosure usrshareopenmediavaultenginedrpcconfiginc OMV Rpc ServiceAbstractcallMethodBgapplyChanges Array Array internal function Engined Rpc ConfigapplyChangesBgArray Array usrsharephpopenmediavaultrpcserviceabstractinc calluserfuncarrayArray Array usrsharephpopenmediavaultrpcrpcinc OMV Rpc ServiceAbstractcallMethodapplyChangesBg Array Array usrsbinomvengined OMV Rpc RpccallConfig applyChangesBg Array Array main Steps to reproduce issue Include debug logs if possible and relevant Versions report Description of issuequestion The system is a Gnubee PC with MT SoC core MHz mipsel When creating a filesystem from the Web GUI filesystems tab the creation takes min to complete due to very high CPU load caused by phpfpm top up users load average Tasks total running sleeping stopped zombie Cpus us sy ni id wa hi si st MiB Mem total free used buffcache MiB Swap total free used avail Mem PID USER PR NI VIRT RES SHR S CPU MEM TIME COMMAND root R kworkeru flush root R mkfsext openmed S phpfpm openmed S phpfpm openmed R phpfpm openmed S phpfpm root R ksoftirqd root S kswapd root S tmux server root S omvengined root S ksoftirqd root R top root I kworker Hkblockd Steps to reproduce issue As above create ext filesystem on a SATA drive on a lowpowered mipsel system Versions report OS Debian GNULinux buster openmediavault Release Description of issuequestion On a debian buster system with APTInstallRecommends disabled the build process fails on missing dependencies Extra dependencies need to be installed aptget install python setuptools python dev pip install upgrade wheel Steps to reproduce issue cloned git repo installed make sudo ran make install After configuring a share on Shared Folders section as Readonly for a specified user that user cant see the folder using FTP If the same folder is changed and set as ReadWrite the user can see the folder To test this issue is quite simple Create two users Create a shared folder and give read only access to one of the users and readwrite to the other one Add the newly created shared folder to the FTP Shares section Access via FTP using the read only users account Access via FTP using the read write users account One can see the share the other cant After using cat the output is this Directory Filmes Limit ALL AllowUser OR fred DenyAll Limit Limit READ DIRS AllowUser OR fred DenyAll Limit Directory Directory Empires Limit ALL DenyAll Limit Limit READ DIRS DenyAll Limit Directory So the directory Filmes is configured as ReadWrite and the Empires one as Read only for the user fred As seen the user fred is not allowed in the Empires directory at all Thank you for opening an issue Here are some tips on creating a well formatted contribution Please select the labels on the right side that match your issuequestion Description of issuequestion Failed to get disk free space when I want to add a shared folder from OMV as a repository SMB Steps to reproduce issue Include debug logs if possible and relevant I created a public shared folder on OMV without credentials and I have access to it from other windows systems without any problem but when I want to add as a repository to veeam B R it gives me an error Failed to get disk free space My veeam version is u b I wish this would be solved Thanks all Versions report Please bare with me my first time posting an error Im getting this arrow while attempting to mount a drive within the OMV web gui Failed to execute command export PATHbinsbinusrbinusrsbinusrlocalbinusrlocalsbin export LANGCUTF omvsalt deploy run fstab with exit code usrlibpython distpackagessaltmodulesfilepy DeprecationWarning Using or importing the ABCs from collections instead of from collectionsabc is deprecated and in it will stop working from collections import Iterable Mapping usrlibpython distpackagessaltutilsdecoratorssignaturepy DeprecationWarning formatargspec is deprecated since Python Use signature and the Signature object directly saltutilsargsgetfunctionargspecoriginalfunction debian ID createfilesystemmountpointd b a e bb b f c ca f e Function fileaccumulated Result True Comment Accumulator createfilesystemmountpointd b a e bb b f c ca f e for file etcfstab was charged by text Started Duration ms Changes ID appendfstabentries Function fileblockreplace Name etcfstab Result True Comment No changes needed to be made Started Duration ms Changes ID mountnobindmountpointd b a e bb b f c ca f e Function mountmounted Name srvdevdiskbylabelMy Passport Result False Comment mount bad usage Try mount help for more information Started Duration ms Changes Summary for debian Succeeded Failed Total states run Total run time ms Description of issuequestion Installation of a new PCIe device screws up network configuration in WebGUI Steps to reproduce issue I use a motherboard with two ethernet ports originally labelled as eno and enp s respectively Ive added a new PCIe card does not matter which one This apparently changed the labeling of the second network port to enp s causing LOTS of pain and time to understand what happened But that is another story The webGUI still showed the obsolete enp s port Ive deleted it and wanted to create a new enp s port That threw an error message that the port could not be configured Logging in via ssh and using ifconfig I could see that enp s was actually up and running correctly However in the WebGUI only eno appears The state is inconsistent Could you let me know how to correct that Versions report OMV xx latest Thank you for opening an issue Here are some tips on creating a well formatted contribution Please select the labels on the right side that match your issuequestion Description of issuequestion If Software Updates notifications are turned on emails will be sent daily listing the output of cronapt with insufficient context for a newbie admin to understand what is happening The cron job should detect if cronapt has produced any output and if so prefix it with a covering note such as Periodically openmediavault runs cronapt which checks for the latest versions of software components However it only downloads them and does not install them The output is included below Any packages that are listed as will be upgraded are merely downloaded and ready to install Log in to the web interface and select System Upgrade Management to list the currently pending upgrades and decide which to install Unsubscribe from these messages by selecting select System Notifications and turning off Software Upgrade notifications Steps to reproduce issue Turn on Software update notifications Wait until a new piece of software is published Receive cryptic email like this CRONAPT RUN etccronaptconfig Mon Nov AEDT CRONAPT SLEEP Mon Nov AEDT CRONAPT ACTION download CRONAPT LINE usrbinaptget o AcquirehttpDlLimit distupgrade d y o APTGetShowUpgradedtrue Reading package lists Building dependency tree Reading state information Calculating upgrade The following packages will be upgraded openmediavault upgraded newly installed to remove and not upgraded Need to get B kB of archives After this operation B of additional disk space will be used Download complete and in download only mode Versions report Arrakis