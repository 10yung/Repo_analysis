 CATEGORY Choose one Bug Fix Enhancement new features refinement x Refactor Add tests Build Development Environment Documentation SUMMARY On the What s new in page the following is stated It is recommended to first upgrade to pandas and to ensure your code is working without warnings before upgrading to pandas As Superset is still on it makes sense to bump to now as is currently nearing release Bumping required a small change in supersetresultsetpy due to Pandas now being more explicit about timezones The new logic caused timezone aware datetimes to be incorrectly adjusted by the timezone offset I traced back the change to this PR CATEGORY Choose one Bug Fix Enhancement new features refinement x Refactor Add tests Build Development Environment Documentation SUMMARY This PR aims to simplify and consolidate the use of zindex values zindices throughout the codebase In the main stylesheetslessvariablesless there are a few semantic layers onto which you can place elements Add more if you want but try to keep it minimal Think of them like layers in Illustrator similar I found a handful of zindex values that appeared to make no difference so Ive removed them This is the riskiest part of this PR but for each of these I poked around trying to find the elements in the UI and make sure that it looked the same beforeafter removing the value BEFOREAFTER SCREENSHOTS OR ANIMATED GIF na everything should look identical unless theres an instance of an element I missed that becomes obscured by being covered up REVIEWERS williaster some of the zindex values I removed were yours according to git I hope I didnt break anything you added for good reason mistercrunch you probably have some context about these elements too and can make sure I didnt do anything stupid It is not possible to build a image from Dockerfile because it has a error when Im trying to build the image Actual results building modules active setassetssrcshowSavedQueryindexjsxBrowserslist caniuselite is outdated Please run next command yarn upgrade chunk asset optimization OptimizeCssAssetsWebpackPluginBrowserslist caniuselite is outdated Please run next command yarn upgrade chunk asset optimization TerserPluginThe command binsh c cd supersetassets npm ci npm run build rm rf nodemodules returned a nonzero code How to reproduce the bug docker build t stevensoteloaepssupersetlatest Environment superset version master python version python version Checklist Make sure these boxes are checked before submitting your issue thank you x I have checked the superset logs for python stacktraces and included it here as text if there are any I have reproduced the issue with at least the latest released version of superset x I have checked the issue tracker for the same issue and I havent found one similar CATEGORY Choose one Bug Fix x Enhancement new features refinement Refactor Add tests Build Development Environment Documentation SUMMARY Sets the default column to the Models id for GET PUT POST for all ModelRestApi when nothing is defined Will add tests after gets merged ADDITIONAL INFORMATION Has associated issue Changes UI Requires DB Migration Confirm DB Migration upgrade and downgrade tested Introduces new feature or API Removes existing feature or API REVIEWERS Hi Team I have modified the supersetconfigpy to connect to my ldap server When i run this as a docker pod i m able to connect to the LDAP server and the logging is working fine But when i deploy this on a Kubernetes cluster using helm charts it throws the below error Traceback most recent call last File usrlocallibpython sitepackagesflaskappbuildersecuritymanagerpy line in authuserldap if not selfbindldapldap con username password File usrlocallibpython sitepackagesflaskappbuildersecuritymanagerpy line in bindldap selfbindindirectuserldap con File usrlocallibpython sitepackagesflaskappbuildersecuritymanagerpy line in bindindirectuser conbindsindirectuser indirectpassword File usrlocallibpython sitepackagesldapldapobjectpy line in binds msgid selfbindwhocredmethod File usrlocallibpython sitepackagesldapldapobjectpy line in bind return selfsimplebindwhocred File usrlocallibpython sitepackagesldapldapobjectpy line in simplebind return selfldapcallselflsimplebindwhocredRequestControlTuplesserverctrlsRequestControlTuplesclientctrls File usrlocallibpython sitepackagesldapldapobjectpy line in ldapcall result funcargskwargs ldapSERVERDOWN desc Cant contact LDAP server Note The ldap server is up and running and we are able to contact it from other kube pods not sure why it is not working from superset pod CATEGORY Choose one Bug Fix x Enhancement new features refinement x Refactor Add tests Build Development Environment Documentation SUMMARY Describe the change below including rationale and design decisions BEFOREAFTER SCREENSHOTS OR ANIMATED GIF Skip this if not applicable TEST PLAN What steps should be taken to verify the changes ADDITIONAL INFORMATION Check any relevant boxes with x HINT Include Fixes nnn if you are fixing an existing issue Has associated issue Changes UI Requires DB Migration Confirm DB Migration upgrade and downgrade tested Introduces new feature or API Removes existing feature or API REVIEWERS A clear and concise description of what the bug is I need to run some query using jsonaggjsonbuildobject in Postgres database but I got an error pyarrowlibArrowNotImplementedError Not implemented type for list in DataFrameBlock structtablename string databaseid int My query SELECT id jsonaggjsonbuildobjecttablenametablenamedatabaseiddatabaseid FROM SELECT FROM tables AS tables GROUP BY id Error details ERRORsupersetsqllabQuery Not implemented type for list in DataFrameBlock structtablename string databaseid int Traceback most recent call last File appsupersetsqllabpy line in getsqlresults logparamslogparams File appsupersetsqllabpy line in executesqlstatements expanddata File appsupersetsqllabpy line in serializeandexpanddata df resultsettopandasdf File appsupersetresultsetpy line in topandasdf return selfconverttabletodfselftable File appsupersetresultsetpy line in converttabletodf return tabletopandasintegerobjectnullsTrue File pyarrowarraypxi line in pyarrowlibPandasConvertibletopandas File pyarrowtablepxi line in pyarrowlibTabletopandas File usrlocallibpython sitepackagespyarrowpandascompatpy line in tabletoblockmanager blocks tabletoblocksoptions table categories File usrlocallibpython sitepackagespyarrowpandascompatpy line in tabletoblocks result palibtabletoblocksoptions blocktable categories File pyarrowtablepxi line in pyarrowlibtabletoblocks File pyarrowerrorpxi line in pyarrowlibcheckstatus pyarrowlibArrowNotImplementedError Not implemented type for list in DataFrameBlock structtablename string databaseid int Screenshots Environment please complete the following information superset version master branch python version nodejs version npm version chord diagram shows nothing when run query Expected results something like the example picture Actual results get an error like this Screenshots If applicable add screenshots to help explain your problem superset version Superset python version Python nodejs version v npm version SIP Proposal to establish a new design direction system and process for Superset Motivation In August a project was kicked off to reimagine the design of Superset and create a North Star for the interface flows and visual aesthetic of Superset The primary goal of the project and this SIP is to create a new visual design framework for Supersets user interface Since its inception Superset has rapidly grown in scope size audience and complexity thanks to the work of this community This growth has led to an accumulation of design debt in forms including problematic user flows inconsistencies in interface elements or general complexities that may be simplifiedclarified by revisiting the design of Superset holistically The intent of this undertaking was to smooth out the user experience of Superset targeting all of the following Supporting most use cases and functionality currently in use by known Superset users in the design process while reducing deadends and friction in these flows Features and flows removed or deprecated are listed under Removals and deprecations below Focusing on the objects of superset namely Datasets Queries Charts and Dashboards and how those are structuredaccessed throughout the flows of Explore and SQL Lab Smoothing out and simplifying the general experience making Superset easier to use for new users and faster for more experienced ones Creating a more consistent design and experience throughout the product with a well defined style guide and coherent design system Participants in this project included Preset Inc a startup founded by mistercrunch to offer Superset as a hosted service acting as primary sponsor of this design effort Cartel a digital product design firm focusing on research strategy and UX design for the next generation of enterprise software companies Various members of this community including Airbnb Lyft and others We hope that this new design direction will carry Superset forward for the foreseeable future and create a unified design system upon which to build future features Community feedback is welcomed and when this SIP is voted in further efforts will be undertaken to break down the design into smaller units of work Process used in this effort Efforts began with the announcement of a call for volunteers in a design interest group via the Superset dev mailing list and on the Superset Slack workspace The search for members of this small group targeted individuals who were able to commit hours per week have a history of involvementmerit with the project have a sense of design and understand Superset users and use cases A Superset Design Group email was set up as well as a private channel on the Superset Slack workspace to maintain an open line of communication throughout the duration of the project A kickoff meeting of the resulting group was held on September th This initiated the creation and iteration of core user stories This was quickly followed by an effort to assess the Analytics BI marketplace resulting in a competitive analysis report this research is proprietary and cannot be shared publicly Weekly design sync meetings took place each Thursday allowing Cartel to get feedback on their latest design proposals from the teamcommunity and gather insightdirection on big question issues about the products direction After each session prototypes were circulated and feedback gathered via the slack and email channels Each week design sprint was comprised of ongoing work on larger concepts eg the relationship between SQL Lab and Explore or controls used to build data visualizations as well as smaller more specific tasks Summary of key findings A product audit of Superset user personas and general product recommendations are available in an Experience Brief Special thanks This process involved significant time and involvement from the following members of the Superset community for their participation Grace Guo Airbnb graceguosupercat Vyl Chang Airbnb John Bodley Airbnb johnbodley Sylvia Tomiyama Airbnb Eli Brumbaugh Airbnb elibrumbaugh Michelle Thomas Airbnb michellethomas Maxime Beauchemin Preset mistercrunch Rob DiCiuccio Preset robdiciuccio Aaron Suddjian Preset suddjian Tai Dupree Preset nytai Beto Dealmeida Lyft betodealmeida Micah Delfino Cartel Jef Bekes Cartel Proposed Changes Notable changes to design and functionality Visual Design All UI fonts are changed to Inter UI for increased legibility and fixedwidth numeral options for tabular data Code fonts have been changed to Fira Code Both of these fonts are open source license information below New default color palettes for dataviz These have been checked for accessibility issues Old palettes will be supported for backward compatibility A full style guide is available in the prototype with specs for a variety of UI element interaction states layout spacings all based on an pixel grid table tr td colspan bStyle Guideb see a href targetblankabridged InVisionatd tr tr tda href targetblankimg src atd td a href targetblankimg src atd tr table Simplified global navigation Links to Home see next item Dashboards Charts Explore SQL Lab and Data Current New menuoldthumb menunewthumb Dashboards New listcard view of all dashboards with ability to favorite dashboards filter them by ownerstatusdataset search by name sort by various metrics or perform bulk actions New card view displays cards with rendered previews of the dashboard Individual dashboards include new tools for each chart indicating data recency and filters applied Edit a charts display options directly from the dashboard New tab UI with dropdown overflow menu when there are too many tabs to display New UI modal to defineedit global filters with bulk action support Current New dashboardscurrentthumb dashboardsnewthumb New Home page Offers the ability to view Dashboards Charts and Queries sorted by popularity recency favorites and ownership Activity steam showing who did what in a Superset instance Current New homeoldthumb homenewthumb Explore Visualization type selector with viz plugins broken out into categories eg timeseries distribution composition etc Left panel for dataset selection and resulting display of fields Updated query panel with visualization controls utilizing new pills containing field metadata and controls eg aggregation sorting New SaveSave As controls highlighting potential implications from overwriting an existing chart Dataset preview area including data profiling in the column headers ie histograms null value count statistical rollups etc New Chart Options drawer in the top right focused on visual aspects of the resulting chart New UI to edit a datasets source fields metrics and more History timeline with icons denoting query run and save events New Time Picker input modal with quick selection of various time ranges and granularities Current New exploreoldthumb explorenewthumb SQL Lab Left panel has tabs for Data a picker for databasestablesfields and Saved a selector for saved Queries Data preview table with headers containing data profiling information histograms composition etc Chart area to build quicksimple data viz to preview query results andor add viz to a dashboard Viz options here are limited in scopecomplexity If your needs expand beyond these simplified viz options theres an option to move over to Explore Explore button allowing users to take their SQL queries into Explore for more advanced viz options with expanded controls History panel with icons and datarich tooltips indicating when queries were run or saved and the details thereof Full Query history with timeline query preview and option to group by session Current New sqllaboldthumb sqllabnewthumb Data section Contains sortablesearchablefilterable card or list views of Datasets ie physical statictablular datasets or virtual dynamic query results Databases Saved Queries and Query History Each of those tabs displays various metadata eg access statistics and actions edit delete etc for the resulting items Viewing a Physical or Virtual Database displays its Fields Metrics and Usage tabs displaying various statistical and historicalanalytic metadata details Current New Datasets New Fields dataoldthumb data thumb data thumb Charts New listcard view of all charts with data source display ability to favorite items sorting eg by time last updated and filtering by ownership and status Current New chartsoldthumb chartsnewthumb Global Search Improved search and discovery of dashboards queries dataset titles and possibly more Results can be filtered by type Default prior to typing list of recent or commonly accessed items Current New default no input New search results NA search thumb search thumb Design proposals in the form of InVision prototypes are encapsulated in the deliverables available here Select screens key features and concepts Unabridged screens contains some details yet to be entirely fleshed out Removals and deprecations Tabs in SQL Lab have been removed See related SIP Maintenance and improvement of design assets For maintaining the new design work and assets stemming from it the current proposal is to maintain the creation of a Superset team on Abstract The latest Sketch files will be made public and open source and managed via Abstracts version control system PMC members from the Superset community may reach out to the PMC mailing list to submit designers or design teams to be added to the Abstract team to contribute to the design The latest master version of the files will be maintained in the public InVision prototype maintained by Preset though interested parties may request comment or write access granted on a casebycase basis User testing and validation plan Design and feature proposals submitted herein were conducted using the Superset Design Group as a focus group making sure that functional and visual changes to the UI address the issues and use case criteria of those involved in the discussion It is our intent and belief that these designs push the usability of Superset forward greatly We anticipate that individual features and UI elements will require further input and discussion as this north star for design begins to play out Our hope is that this round of design will provide a foundation to test further iterationsvariations and those results will bear out in additional SIPs and PRs on a casebycase basis Updates to Superset documentation Documentation and Screenshots for Superset exists in a number of places most notably on the Apache website and on the Github repo A best effort should be made to update these resources with updated screenshots andor instructions as relevant as PRs are written to move the project toward this new UI If any changes are encountered that require large scale changes to documentation those changed should be discussed in an additional SIP New or Changed Public Interfaces TBD Impact will be minimized on existing interfaces but implementation of workflows and features may require changes to how APIs and metadata are structured andor accessed New dependencies The scope of third party dependencies is not entirely known at this time but will be defined and assessed in future PRs as the work is broken down into smaller tasks An effort will be made to make sure all licenses are compatible with Apache License v Some known licenses thus far include Inter UI font SIL OpenFont license needs to be labeled in ASF releases Fira Code font SIL OpenFont license needs to be labeled in ASF releases Migration Plan and Compatibility Due to the broad scope of design and functional changes several core sections of the codebase both frontend and backend will need to be modified in functionality andor refactored This will likely lead to a significant number of required database migrations While breaking changes in backward compatibility will be made as minimal as possible they may occur in subsequent PRs as this work is further scoped and ticketed and should be tracked with semantic versioning in future releases For frontend implementation it should be noted that an older version of ReactBootstrap is used in existing Superset UI components This older version is built upon Bootstrap which is built with LESS as is much of Superset allowing shared stylesvariables Upgrading components to a newer ReactBootstrap and thus Bootstrap would require migrating the bulk of the CSS codebase over to SASS which is not ideal The implementation of this SIP should iterate toward deprecating the ReactBootstrap dependency in favor of bespoke components with custom LESS styles built around this new design system All changes in the design and implementation of new components should be atomic in nature steering toward a more unified designcomponent system targeting reusability and consistency Rejected Alternatives No alternatives at this time Weve considered previous designrelated SIPs in this process and have reached this proposal with input from several active PMC members Were open to feedback however so please feel free to leave constructive feedback below This work is to be considered foundational and will undoubtedly continue to evolve with the ongoing support of the Superset community Expected results what you expected to happen After login with adminadmin for production docker running image there is no menudashboard showing up Actual results what actually happens Instead it shows up some blank page with a button Screenshots How to reproduce the bug changes in env file as production for FLASKENV and SUPERSETENV run sudo SUPERSETLOADEXAMPLESyes dockercompose run rm superset dockerinitsh run sudo dockercompose up go to the endpoint login page in the browser Enter adminadmin You can see a blank page with a button in it and nothing else Environment Latest from master branch superset version superset version python version python version nodejs version node v npm version npm v Checklist Make sure these boxes are checked before submitting your issue thank you x I have checked the superset logs for python stacktraces and included it here as text if there are any x I have reproduced the issue with at least the latest released version of superset I have checked the issue tracker for the same issue and I havent found one similar Additional context Log attached below Log 