Hi there while nexmon worked like a charm on a PI Zero W kernel I still cannot get it to work on kernel even when using the newest sources from the git repo I followed the step by step procedures mentioned in the README After building and installing the patched firmware bcm a nexmonbrcmfmac sdiobin I compiled the kernel module as mentioned in and I built nexmonpatchesbcm c nexmonbrcmfmac ynexmonbrcmfmacko When executing rmmod brcmfmac followed by insmod of the above compiled kernel module I am seeing several errors in the syslog brcmfmac brcmfsdiohostmail mailbox indicates firmware halted brcmfmac brcmfsdiobusrxctl resumed on timeout brcmfmac brcmfsdiocheckdied firmware trap in dongle brcmfmac brcmfsdiobusrxctl resumed on timeout brcmfmac brcmfsdiocheckdied firmware trap in dongle brcmfmac brcmfpnoclean failed code brcmfmac brcmfsdiobusrxctl resumed on timeout brcmfmac brcmfsdiocheckdied firmware trap in dongle brcmfmac brcmfrunescan error brcmfmac brcmfcfg scan scan error brcmfmac brcmfsdiobusrxctl resumed on timeout brcmfmac brcmfsdiocheckdied firmware trap in dongle brcmfmac brcmfrunescan error brcmfmac brcmfcfg scan scan error brcmfmac brcmfsdiobusrxctl resumed on timeout brcmfmac brcmfsdiocheckdied firmware trap in dongle brcmfmac brcmfcfg getchannel chanspec failed brcmfmac brcmfsdiobusrxctl resumed on timeout brcmfmac brcmfsdiocheckdied firmware trap in dongle brcmfmac brcmfcfg gettxpower error brcmfmac brcmfrunescan error brcmfmac brcmfcfg scan scan error brcmfmac brcmfvifaddvalidate Attempt to add a MONITOR interface brcmfmac brcmfmonaddvif brcmfmonaddvif called brcmfmac brcmfmonaddvif Adding vif mon brcmfmac brcmfcfg requestapif setting ssid failed brcmfmac brcmfcfg addiface add iface mon type failed err brcmfmac brcmfrunescan error brcmfmac brcmfcfg scan scan error brcmfmac brcmfrunescan error brcmfmac brcmfcfg scan scan error brcmfmac nexmonnlioctlhandler NEXMON nexmonnlioctlhandler Enter brcmfmac nexmonnlioctlhandler NEXMON nexmonnlioctlhandler e brcmfmac nexmonnlioctlhandler NEXMON nexmonnlioctlhandler calling brcmffilcmddataset cmd brcmfmac brcmfrunescan error Additionaly executing nexutil m sometimes results in a kernel oops Dec raspberrypi kernel brcmfmac F signature read x x a a Dec raspberrypi kernel brcmfmac brcmffwallocrequest using brcmbrcmfmac sdio for chip BCM Dec raspberrypi kernel usbcore registered new interface driver brcmfmac Dec raspberrypi kernel brcmfmac brcmfsdiobuspreinit before brcmfsdiodebugfscreate Dec raspberrypi kernel brcmfmac nexmonnlioctlhandler NEXMON nexmonnlioctlhandler Enter Dec raspberrypi kernel brcmfmac nexmonnlioctlhandler NEXMON nexmonnlioctlhandler e Dec raspberrypi kernel brcmfmac nexmonnlioctlhandler NEXMON nexmonnlioctlhandler calling brcmffilcmddataset cmd Dec raspberrypi kernel Unable to handle kernel NULL pointer dereference at virtual address c Dec raspberrypi kernel pgd a b a Dec raspberrypi kernel c pgd a c pte ppte Dec raspberrypi kernel Internal error Oops ARM Modules linked in brcmfmacO rpcsecgsskrb xtconntrack iptMASQUERADE nfconntracknetlink nfnetlink xtaddrtype iptablefilter iptablenat nfnatipv nfnat nfconntrack nfdefragipv nfdefragipv brnetfilter bridge stp llc rfcomm cmac bnep hciuart btbcm serdev bluetooth ecdhgeneric overlay evdev brcmutil sha generic sndbcm C raspberrypihwmon hwmon sndpcm cfg sndtimer snd rfkill bcm codecC bcm v l C v l mem mem bcm mmalvchiqC v l common videobuf dmacontig videobuf vmalloc videobuf memops videobuf v l videobuf common videodev media vcsmcmaC fixed uiopdrvgenirq uio i cdev iptables xtables ipv last unloaded brcmfmac CPU PID Comm nexutil Tainted G C O Hardware name BCM PC is at brcmffilcmddataset x c xc brcmfmac LR is at nexmonnlioctlhandler x f x f brcmfmac pc bf e f lr bf d psr sp ca d ip ca db fp ca db r c e r r r bf b r c r d aab r c r r d aab r c r c Flags nZCv IRQs on FIQs on Mode SVC ISA ARM Segment user Control c d Table dd DAC Process nexutil pid stack limit xf f f Stack xca d to xca d c f c d aab d aab d aab da c bf b ca de ca db bf d bf e e dc d f d d c ea bc ca e c ca de de c f b bf b fffffff ee b ca e c d c e e d ca eb ca e ca e c f bfc c f e d d ca e c ca e c dc c bd e d ee b d e c e cfb ca ca e ca e e c b e c f ca f c ca e c ca c b cc ca ebc c f cec ea d fffffff c e ec ca eb c e ee c c b c f c dc f c c c a c e ca f c ee b c a f cfb c e c ed ca f c ee b c ed c e f cfb be f ca fa ca f f c cd c ee b be c d c a f ca fa ca f c cb c c cc ca fa fa c c cb be c d c e fc be c d be dc fe be f ea c bf e f brcmffilcmddataset brcmfmac from bf d nexmonnlioctlhandler x f x f brcmfmac bf d nexmonnlioctlhandler brcmfmac from c f b netlinkunicast x a x c c f b netlinkunicast from c f bfc netlinksendmsg x f x c f bfc netlinksendmsg from c b e socksendmsg x x c b e socksendmsg from c ca syssendto xd x c ca syssendto from c cb syssend x x c cb syssend from c retfastsyscall x x Exception stack xca fa to xca ff fa be c d c e fc be c d be dc fe be f ea c Code e dd e de e bd e a e end trace b f ae b brcmfmac brcmfsdiobusrxctl resumed on timeout brcmfmac brcmfbusstarted failed brcmfmac brcmfattach dongle is not responding err brcmfmac brcmfsdiofirmwarecallback brcmfattach failed What steps need to be done in order to resolve these issues Thank you The RPi and other recent versions have reduced maximum wifi connections from to though we were actually able to stream simultaneous videos on an rpi B Can these patches help set the maximum back to How do you turn on the monitor for Huawei P and where is the firmware driver installed matthiasseemoo baselsayeh kimocoder i done clone nexmon project then install android studio after opened android studio after selected nexmon folder then synced the folder after clicked build apk then downloaded KeyStore Exploler and created java key after i turned studio build apk but it logged error ErrorInternal error javalangClassNotFoundException comgooglewirelessandroidsdkstatsIntellijIndexingStatsIndex javalangClassNotFoundException comgooglewirelessandroidsdkstatsIntellijIndexingStatsIndex at javanetURLClassLoaderfindClassURLClassLoaderjava at javalangClassLoaderloadClassClassLoaderjava at javalangClassLoaderloadClassClassLoaderjava at comintellijutilindexingcountersIndexCountersclinitIndexCountersjava at comintellijutilindexingimplMapReduceIndexinitMapReduceIndexjava at orgjetbrainsjpsbackwardRefsindexCompilerReferenceIndexCompilerMapReduceIndexinitCompilerReferenceIndexjava at orgjetbrainsjpsbackwardRefsindexCompilerReferenceIndexinitCompilerReferenceIndexjava at orgjetbrainsjpsbackwardRefsJavaCompilerBackwardReferenceIndexinitJavaCompilerBackwardReferenceIndexjava at orgjetbrainsjpsbackwardRefsJavaBackwardReferenceIndexWriterinitializeJavaBackwardReferenceIndexWriterjava at orgjetbrainsjpsincrementaljavaJavaBuilderbuildStartedJavaBuilderjava at orgjetbrainsjpsincrementalIncProjectBuilderrunBuildIncProjectBuilderjava at orgjetbrainsjpsincrementalIncProjectBuilderbuildIncProjectBuilderjava at orgjetbrainsjpscmdlineBuildRunnerrunBuildBuildRunnerjava at orgjetbrainsjpscmdlineBuildSessionrunBuildBuildSessionjava at orgjetbrainsjpscmdlineBuildSessionrunBuildSessionjava at orgjetbrainsjpscmdlineBuildMainMyMessageHandlerlambdachannelRead BuildMainjava at orgjetbrainsjpsserviceimplSharedThreadPoolImpllambdaexecuteOnPooledThread SharedThreadPoolImpljava at javautilconcurrentExecutorsRunnableAdaptercallExecutorsjava at javautilconcurrentFutureTaskrunFutureTaskjava at javautilconcurrentThreadPoolExecutorrunWorkerThreadPoolExecutorjava at javautilconcurrentThreadPoolExecutorWorkerrunThreadPoolExecutorjava at javalangThreadrunThreadjava edit used java compiler changed to eclipse but now it logged this error ErrorAndroid Source Generator nexmon AndroidManifestxml file not found I remember when nexmon first came about and i was unable to get it working correctly on my nexus has anyone had luck with a working patch Or can one please be developed for use with the app as it still after all this time does not support Nexus Shamu Id love to see this as a nicely added addition for nexus this phone seems to be over looked more often than not by many of great devs i get this error after a few seconds in monitor mode usbcore registered new interface driver brcmfmac brcmfmac brcmfsdiobuspreinit before brcmfsdiodebugfscreate brcmfmac brcmffwallocrequest using brcmbrcmfmac sdio for chip BCM brcmfmac brcmfcpreinitdcmds Firmware BCM wl Dec version nexmonorg gaaa edirty FWID e db e brcmfmac brcmfbusstarted before brcmfdebugfsaddentry brcmfmac brcmfvifaddvalidate Attempt to add a MONITOR interface brcmfmac brcmfmonaddvif brcmfmonaddvif called brcmfmac brcmfmonaddvif Adding vif wlan mon device wlan mon entered promiscuous mode brcmfmac brcmfprotobcdcquerydcmd brcmfprotobcdcmsg failed wstatus brcmfmac brcmfcfg getchannel chanspec failed brcmfmac brcmfcfg nexmonsetchannel Set Channel failed chspec brcmfmac brcmfprotobcdcquerydcmd brcmfprotobcdcmsg failed wstatus brcmfmac brcmfcfg getchannel chanspec failed brcmfmac brcmfcfg nexmonsetchannel Set Channel failed chspec brcmfmac brcmfprotobcdcquerydcmd brcmfprotobcdcmsg failed wstatus brcmfmac brcmfcfg getchannel chanspec failed brcmfmac brcmfcfg nexmonsetchannel Set Channel failed chspec brcmfmac brcmfprotobcdcquerydcmd brcmfprotobcdcmsg failed wstatus brcmfmac brcmfcfg getchannel chanspec failed brcmfmac brcmfprotobcdcquerydcmd brcmfprotobcdcmsg failed wstatus brcmfmac brcmfcfg getchannel chanspec failed brcmfmac brcmfcfg nexmonsetchannel Set Channel failed chspec brcmfmac brcmfprotobcdcquerydcmd brcmfprotobcdcmsg failed wstatus brcmfmac brcmfcfg getchannel chanspec failed brcmfmac brcmfcfg nexmonsetchannel Set Channel failed chspec brcmfmac brcmfprotobcdcquerydcmd brcmfprotobcdcmsg failed wstatus I finished building and flashing the firmware onto my Nexus p and am now trying to build install the utilities However when I run make in nexmonutilities I get the following error make C nexutil make Entering directory homeolivernexmonutilitiesnexutil cd libargp make make Entering directory homeolivernexmonutilitieslibargp optandroidndkr cbuildndkbuild NDKAPPLICATIONMKpwdApplicationmk NDKAPPOUT TARGETPLATFORMandroid make Entering directory homeolivernexmonutilitieslibargp Android NDK Cannot find module with tag cxxstlsystem in import path Android NDK Are you sure your NDKMODULEPATH variable is properly defined Android NDK The following directories were searched Android NDK optandroidndkr cbuildcoresetuptoolchainmk Android NDK Aborting Stop make Leaving directory homeolivernexmonutilitieslibargp Makefile recipe for target libsarmeabilibargpa failed make libsarmeabilibargpa Error make Leaving directory homeolivernexmonutilitieslibargp Makefile recipe for target libargplocalarmeabilibargpa failed make libargplocalarmeabilibargpa Error make Leaving directory homeolivernexmonutilitiesnexutil Makefile recipe for target nexutil failed make nexutil Error My NDK version is c I am using Ubuntu Any help or suggestions are greatly appreciated Thank you Note We currently support Kernel Version depricated and Raspbian contains firmware version for the bcm c We also support the newer firmware release from Cypress Please try which works best for you bash cat sysfirmwaredevicetreebasemodel Raspberry Pi Model B Rev uname kernelrelease v bash git clone cd nexmon bash if e usrlibarmlinuxgnueabihflibislso then cd buildtoolsisl configure make make install ln s usrlocalliblibislso usrlibarmlinuxgnueabihflibislso cd fi if e usrlibarmlinuxgnueabihflibmpfrso then cd buildtoolsmpfr apt install texinfo needed for makeinfo configure make make install ln s usrlocalliblibmpfrso usrlibarmlinuxgnueabihflibmpfrso cd fi source setupenvsh make cd patchesbcm a nexmon make make backupfirmware make installfirmware cd cd utilitiesnexutil make make install cd replace current driver MODPATHmodinfo brcmfmac grep filename tr s cut d f cp v backupsimple suffixorig patchesbcm a nexmonbrcmfmackernel brcmfmacko MODPATH depmod a bash modprobe brcmfmac modprobe ERROR could not insert brcmfmac Exec format error Why