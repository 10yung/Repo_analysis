Were you planning to publish this framework on cratesio so others can make use of it for writing kernel modules I tried to build the helloworld example and it failed I followed the instructions export PATHhomeloongsoncargobinPATH rustup component add toolchainnightly rustsrc rustup component add rustfmtpreview cargo install cargoedit cargo install cargoxbuild uname a Linux righteous amd SMP Debian x GNULinux sudo aptget install llvm clang Reading package lists Done Building dependency tree Reading state information Done clang is already the newest version llvm is already the newest version upgraded newly installed to remove and not upgraded sudo aptget install linuxheadersuname r Reading package lists Done Building dependency tree Reading state information Done linuxheaders amd is already the newest version upgraded newly installed to remove and not upgraded loongsonrighteousredoxstufflinuxkernelmodulerusthelloworld cargo V cargo nightly e aa git clone cd linuxkernelmodulerust cd helloworld RUSTTARGETPATHpwd cargo xbuild target x linuxkernelmodule loongsonrighteousredoxstufflinuxkernelmodulerusthelloworld RUSTTARGETPATHpwd cargo xbuild target x linuxkernelmodule Updating cratesio index Downloaded compilerbuiltins v Compiling core v homeloongsonrustuptoolchainsnightlyx unknownlinuxgnulibrustlibsrcrustsrclibcore Compiling compilerbuiltins v Compiling rustcstdworkspacecore v homeloongsonrustuptoolchainsnightlyx unknownlinuxgnulibrustlibsrcrustsrctoolsrustcstdworkspacecore Compiling alloc v tmpxargofIuOm grKJg Finished release optimized targets in s Updating cratesio index Downloaded bindgen v Downloaded envlogger v Downloaded cexpr v Downloaded peekingtakewhile v Downloaded which v Downloaded nom v Downloaded clangsys v Downloaded procmacro v Downloaded libloading v Compiling memchr v Compiling versioncheck v Compiling libc v Compiling cc v Compiling bitflags v Compiling log v Compiling glob v Compiling lazystatic v Compiling quickerror v Compiling cfgif v Compiling regexsyntax v Compiling unicodexid v Compiling unicodewidth v Compiling termcolor v Compiling strsim v Compiling ansiterm v Compiling bindgen v Compiling vecmap v Compiling peekingtakewhile v Compiling shlex v Compiling threadlocal v Compiling humantime v Compiling procmacro v Compiling textwrap v Compiling nom v Compiling clangsys v Compiling quote v Compiling ahocorasick v Compiling atty v Compiling which v Compiling clap v Compiling libloading v Compiling cexpr v Compiling regex v Compiling envlogger v Compiling linuxkernelmodule v homeloongsonredoxstufflinuxkernelmodulerust error failed to run custom build command for linuxkernelmodule v homeloongsonredoxstufflinuxkernelmodulerust Caused by process didnt exit successfully homeloongsonredoxstufflinuxkernelmodulerusthelloworldtargetdebugbuildlinuxkernelmodule c a cf f d buildscriptbuild exit code stdout Targetx linuxkernelmodule get outputnostdinc isystem usrlibllvm libclang include Iusrsrclinuxheaders commonarchx include Iusrsrclinuxheaders amd archx includegenerated Iusrsrclinuxheaders commoninclude Iusrsrclinuxheaders amd include Iusrsrclinuxheaders commonarchx includeuapi Iusrsrclinuxheaders amd archx includegenerateduapi Iusrsrclinuxheaders commonincludeuapi Iusrsrclinuxheaders amd includegenerateduapi include usrsrclinuxheaders commonincludelinuxkconfigh DMODULE cargorerunifchangedsrcbindgenhelperh stderr usrsrclinuxheaders commonarchx includeasmbitopsh warning implicit declaration of function barrier is invalid in C Wimplicitfunctiondeclaration usrsrclinuxheaders commonarchx includeasmbitopsh error asm goto constructs are not supported yet usrsrclinuxheaders commonarchx includeasmbitopsh error asm goto constructs are not supported yet usrsrclinuxheaders commonarchx includeasmbitopsh error asm goto constructs are not supported yet usrsrclinuxheaders commonincludelinuxbitopsh warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration usrsrclinuxheaders commonincludelinuxbitopsh warning implicit declaration of function hweight is invalid in C Wimplicitfunctiondeclaration usrsrclinuxheaders commonincludelinuxbitopsh warning implicit declaration of function hweight is invalid in C Wimplicitfunctiondeclaration usrsrclinuxheaders commonincludelinuxbitopsh warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration usrsrclinuxheaders commonincludelinuxbitopsh warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration usrsrclinuxheaders commonincludelinuxbitopsh warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration usrsrclinuxheaders commonincludelinuxlog h warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration usrsrclinuxheaders commonincludelinuxlog h warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration usrsrclinuxheaders commonincludelinuxlog h error unknown type name attributeconst usrsrclinuxheaders commonincludelinuxlog h error expected identifier or usrsrclinuxheaders commonincludelinuxinith error expected parameter declarator usrsrclinuxheaders commonincludelinuxinith error expected usrsrclinuxheaders commonincludelinuxinith note to match this usrsrclinuxheaders commonincludelinuxinith error expected function body after function declarator usrsrclinuxheaders commonincludelinuxinith error expected parameter declarator usrsrclinuxheaders commonincludelinuxinith error expected usrsrclinuxheaders commonincludelinuxinith note to match this usrsrclinuxheaders commonincludelinuxinith error expected function body after function declarator usrsrclinuxheaders commonincludelinuxprintkh error expected parameter declarator usrsrclinuxheaders commonincludelinuxprintkh error expected usrsrclinuxheaders commonincludelinuxprintkh note to match this usrsrclinuxheaders commonincludelinuxprintkh warning type specifier missing defaults to int Wimplicitint usrsrclinuxheaders commonincludelinuxprintkh error expected after top level declarator usrsrclinuxheaders commonincludelinuxprintkh error expected parameter declarator usrsrclinuxheaders commonincludelinuxprintkh error expected usrsrclinuxheaders commonincludelinuxprintkh note to match this usrsrclinuxheaders commonincludelinuxprintkh warning type specifier missing defaults to int Wimplicitint usrsrclinuxheaders commonincludelinuxprintkh error expected after top level declarator usrsrclinuxheaders commonincludelinuxprintkh error expected parameter declarator usrsrclinuxheaders commonincludelinuxprintkh error expected usrsrclinuxheaders commonincludelinuxprintkh note to match this usrsrclinuxheaders commonincludelinuxprintkh warning type specifier missing defaults to int Wimplicitint fatal error too many errors emitted stopping now ferrorlimit usrsrclinuxheaders commonarchx includeasmbitopsh warning implicit declaration of function barrier is invalid in C Wimplicitfunctiondeclaration err false usrsrclinuxheaders commonarchx includeasmbitopsh error asm goto constructs are not supported yet err true usrsrclinuxheaders commonarchx includeasmbitopsh error asm goto constructs are not supported yet err true usrsrclinuxheaders commonarchx includeasmbitopsh error asm goto constructs are not supported yet err true usrsrclinuxheaders commonincludelinuxbitopsh warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration err false usrsrclinuxheaders commonincludelinuxbitopsh warning implicit declaration of function hweight is invalid in C Wimplicitfunctiondeclaration err false usrsrclinuxheaders commonincludelinuxbitopsh warning implicit declaration of function hweight is invalid in C Wimplicitfunctiondeclaration err false usrsrclinuxheaders commonincludelinuxbitopsh warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration err false usrsrclinuxheaders commonincludelinuxbitopsh warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration err false usrsrclinuxheaders commonincludelinuxbitopsh warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration err false usrsrclinuxheaders commonincludelinuxlog h warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration err false usrsrclinuxheaders commonincludelinuxlog h warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration err false usrsrclinuxheaders commonincludelinuxlog h error unknown type name attributeconst err true usrsrclinuxheaders commonincludelinuxlog h error expected identifier or err true usrsrclinuxheaders commonincludelinuxinith error expected parameter declarator err true usrsrclinuxheaders commonincludelinuxinith error expected err true usrsrclinuxheaders commonincludelinuxinith error expected function body after function declarator err true usrsrclinuxheaders commonincludelinuxinith error expected parameter declarator err true usrsrclinuxheaders commonincludelinuxinith error expected err true usrsrclinuxheaders commonincludelinuxinith error expected function body after function declarator err true usrsrclinuxheaders commonincludelinuxprintkh error expected parameter declarator err true usrsrclinuxheaders commonincludelinuxprintkh error expected err true usrsrclinuxheaders commonincludelinuxprintkh warning type specifier missing defaults to int Wimplicitint err false usrsrclinuxheaders commonincludelinuxprintkh error expected after top level declarator err true usrsrclinuxheaders commonincludelinuxprintkh error expected parameter declarator err true usrsrclinuxheaders commonincludelinuxprintkh error expected err true usrsrclinuxheaders commonincludelinuxprintkh warning type specifier missing defaults to int Wimplicitint err false usrsrclinuxheaders commonincludelinuxprintkh error expected after top level declarator err true usrsrclinuxheaders commonincludelinuxprintkh error expected parameter declarator err true usrsrclinuxheaders commonincludelinuxprintkh error expected err true usrsrclinuxheaders commonincludelinuxprintkh warning type specifier missing defaults to int Wimplicitint err false fatal error too many errors emitted stopping now ferrorlimit err true thread main panicked at Unable to generate bindings srclibcoreresultrs note run with RUSTBACKTRACE environment variable to display a backtrace Hi I just saw this on reddit and want to try But bindgen seems to fail on my machine running Arch Linux with kernel version arch ARCH I have no experience in kernel development so Im not sure what the issue is here The errors seems to come from clang Full output gitlinuxkernelmodulerusthelloworld master RUSTTARGETPATHpwd cargo xbuild target x linuxkernelmodule Updating cratesio index Compiling core v homekairustuptoolchainsnightlyx unknownlinuxgnulibrustlibsrcrustsrclibcore Compiling compilerbuiltins v Compiling rustcstdworkspacecore v homekairustuptoolchainsnightlyx unknownlinuxgnulibrustlibsrcrustsrctoolsrustcstdworkspacecore Compiling alloc v tmpxargoS rXilz pftT Finished release optimized targets in s Compiling memchr v Compiling libc v Compiling versioncheck v Compiling cc v Compiling log v Compiling bitflags v Compiling lazystatic v Compiling glob v Compiling regexsyntax v Compiling quickerror v Compiling cfgif v Compiling unicodewidth v Compiling unicodexid v Compiling strsim v Compiling bindgen v Compiling ansiterm v Compiling termcolor v Compiling vecmap v Compiling peekingtakewhile v Compiling shlex v Compiling humantime v Compiling threadlocal v Compiling textwrap v Compiling procmacro v Compiling nom v Compiling clangsys v Compiling quote v Compiling ahocorasick v Compiling libloading v Compiling atty v Compiling which v Compiling clap v Compiling cexpr v Compiling regex v Compiling envlogger v Compiling linuxdevicedriver v homekaigitlinuxkernelmodulerust error failed to run custom build command for linuxdevicedriver v homekaigitlinuxkernelmodulerust Caused by process didnt exit successfully homekaigitlinuxkernelmodulerusthelloworldtargetdebugbuildlinuxdevicedriverfd a e f dbuildscriptbuild exit code stdout Targetx linuxkernelmodule get outputnostdinc isystem usrlibclang include Iusrlibmodules arch ARCHbuildarchx include Iusrlibmodules arch ARCHbuildarchx includegenerated Iusrlibmodules arch ARCHbuildinclude Iusrlibmodules arch ARCHbuildarchx includeuapi Iusrlibmodules arch ARCHbuildarchx includegenerateduapi Iusrlibmodules arch ARCHbuildincludeuapi Iusrlibmodules arch ARCHbuildincludegenerateduapi include usrlibmodules arch ARCHbuildincludelinuxkconfigh DMODULE cargorerunifchangedsrcbindgenhelperh stderr usrlibmodules arch ARCHbuildarchx includeasmbitopsh warning implicit declaration of function barrier is invalid in C Wimplicitfunctiondeclaration usrlibmodules arch ARCHbuildarchx includeasmbitopsh error asm goto constructs are not supported yet usrlibmodules arch ARCHbuildarchx includeasmbitopsh error asm goto constructs are not supported yet usrlibmodules arch ARCHbuildarchx includeasmbitopsh error asm goto constructs are not supported yet usrlibmodules arch ARCHbuildincludelinuxbitopsh warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration usrlibmodules arch ARCHbuildincludelinuxbitopsh warning implicit declaration of function hweight is invalid in C Wimplicitfunctiondeclaration usrlibmodules arch ARCHbuildincludelinuxbitopsh warning implicit declaration of function hweight is invalid in C Wimplicitfunctiondeclaration usrlibmodules arch ARCHbuildincludelinuxbitopsh warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration usrlibmodules arch ARCHbuildincludelinuxbitopsh warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration usrlibmodules arch ARCHbuildincludelinuxbitopsh warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration usrlibmodules arch ARCHbuildincludelinuxlog h warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration usrlibmodules arch ARCHbuildincludelinuxlog h warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration usrlibmodules arch ARCHbuildincludelinuxlog h error unknown type name attributeconst usrlibmodules arch ARCHbuildincludelinuxlog h error expected identifier or usrlibmodules arch ARCHbuildincludelinuxinith error expected parameter declarator usrlibmodules arch ARCHbuildincludelinuxinith error expected usrlibmodules arch ARCHbuildincludelinuxinith note to match this usrlibmodules arch ARCHbuildincludelinuxinith error expected function body after function declarator usrlibmodules arch ARCHbuildincludelinuxinith error expected parameter declarator usrlibmodules arch ARCHbuildincludelinuxinith error expected usrlibmodules arch ARCHbuildincludelinuxinith note to match this usrlibmodules arch ARCHbuildincludelinuxinith error expected function body after function declarator usrlibmodules arch ARCHbuildincludelinuxprintkh error expected parameter declarator usrlibmodules arch ARCHbuildincludelinuxprintkh error expected usrlibmodules arch ARCHbuildincludelinuxprintkh note to match this usrlibmodules arch ARCHbuildincludelinuxprintkh warning type specifier missing defaults to int Wimplicitint usrlibmodules arch ARCHbuildincludelinuxprintkh error expected after top level declarator usrlibmodules arch ARCHbuildincludelinuxprintkh error expected parameter declarator usrlibmodules arch ARCHbuildincludelinuxprintkh error expected usrlibmodules arch ARCHbuildincludelinuxprintkh note to match this usrlibmodules arch ARCHbuildincludelinuxprintkh warning type specifier missing defaults to int Wimplicitint usrlibmodules arch ARCHbuildincludelinuxprintkh error expected after top level declarator usrlibmodules arch ARCHbuildincludelinuxprintkh error expected parameter declarator usrlibmodules arch ARCHbuildincludelinuxprintkh error expected usrlibmodules arch ARCHbuildincludelinuxprintkh note to match this usrlibmodules arch ARCHbuildincludelinuxprintkh warning type specifier missing defaults to int Wimplicitint fatal error too many errors emitted stopping now ferrorlimit usrlibmodules arch ARCHbuildarchx includeasmbitopsh warning implicit declaration of function barrier is invalid in C Wimplicitfunctiondeclaration err false usrlibmodules arch ARCHbuildarchx includeasmbitopsh error asm goto constructs are not supported yet err true usrlibmodules arch ARCHbuildarchx includeasmbitopsh error asm goto constructs are not supported yet err true usrlibmodules arch ARCHbuildarchx includeasmbitopsh error asm goto constructs are not supported yet err true usrlibmodules arch ARCHbuildincludelinuxbitopsh warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration err false usrlibmodules arch ARCHbuildincludelinuxbitopsh warning implicit declaration of function hweight is invalid in C Wimplicitfunctiondeclaration err false usrlibmodules arch ARCHbuildincludelinuxbitopsh warning implicit declaration of function hweight is invalid in C Wimplicitfunctiondeclaration err false usrlibmodules arch ARCHbuildincludelinuxbitopsh warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration err false usrlibmodules arch ARCHbuildincludelinuxbitopsh warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration err false usrlibmodules arch ARCHbuildincludelinuxbitopsh warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration err false usrlibmodules arch ARCHbuildincludelinuxlog h warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration err false usrlibmodules arch ARCHbuildincludelinuxlog h warning implicit declaration of function fls is invalid in C Wimplicitfunctiondeclaration err false usrlibmodules arch ARCHbuildincludelinuxlog h error unknown type name attributeconst err true usrlibmodules arch ARCHbuildincludelinuxlog h error expected identifier or err true usrlibmodules arch ARCHbuildincludelinuxinith error expected parameter declarator err true usrlibmodules arch ARCHbuildincludelinuxinith error expected err true usrlibmodules arch ARCHbuildincludelinuxinith error expected function body after function declarator err true usrlibmodules arch ARCHbuildincludelinuxinith error expected parameter declarator err true usrlibmodules arch ARCHbuildincludelinuxinith error expected err true usrlibmodules arch ARCHbuildincludelinuxinith error expected function body after function declarator err true usrlibmodules arch ARCHbuildincludelinuxprintkh error expected parameter declarator err true usrlibmodules arch ARCHbuildincludelinuxprintkh error expected err true usrlibmodules arch ARCHbuildincludelinuxprintkh warning type specifier missing defaults to int Wimplicitint err false usrlibmodules arch ARCHbuildincludelinuxprintkh error expected after top level declarator err true usrlibmodules arch ARCHbuildincludelinuxprintkh error expected parameter declarator err true usrlibmodules arch ARCHbuildincludelinuxprintkh error expected err true usrlibmodules arch ARCHbuildincludelinuxprintkh warning type specifier missing defaults to int Wimplicitint err false usrlibmodules arch ARCHbuildincludelinuxprintkh error expected after top level declarator err true usrlibmodules arch ARCHbuildincludelinuxprintkh error expected parameter declarator err true usrlibmodules arch ARCHbuildincludelinuxprintkh error expected err true usrlibmodules arch ARCHbuildincludelinuxprintkh warning type specifier missing defaults to int Wimplicitint err false fatal error too many errors emitted stopping now ferrorlimit err true thread main panicked at Unable to generate bindings srclibcoreresultrs note run with RUSTBACKTRACE environment variable to display a backtrace clang version clang version tagsRELEASE final Target x pclinuxgnu Thread model posix InstalledDir usrbin 