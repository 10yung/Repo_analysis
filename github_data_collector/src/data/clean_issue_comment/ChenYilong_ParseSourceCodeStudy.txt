 void dispatchasynclimitdispatchqueuet queueNSUInteger limitSemaphoreCount dispatchblockt block limitSemaphoreCount cache request cache NSCachedURLResponse cacheResponse NSURLCache sharedURLCache cachedResponseForRequestrequest NSCachedURLResponse nil cache NSCachedURLResponse cacheResponse NSURLCache sharedURLCache cachedResponseForRequestrequest NSCachedURLResponse nil NSLog dispatchsuspend Log suspend async voidviewDidLoad super viewDidLoad dispatchbarrierasync dispatchqueuet dispatchgetglobalqueue dispatchqueuet queue dispatchqueuecreatecomioschengxuyuangcdForBarrier DISPATCHQUEUECONCURRENT Dispatch Semaphore Dispatch Semaphore dispatchsemaphorewait dispatchsemaphoresignal dispatchsemaphorewait dispatchsemaphoresignal NSMutableArray dispatchsemaphoret semaphore dispatchsemaphorecreate NSMutableArray array NSMutableArray alloc init forint i i i dispatchasyncqueue Dispatch Semaphore Dispatch Semaphore dispatchsemaphorewaitsemaphore DISPATCHTIMEFOREVER Dispatch Semaphore Dispatch Semaphore dispatchsemaphorewait Dispatch Semaphore NSMutaleArray NSLog NSThread currentThread array addObject NSNumber numberWithInti dispatchsemaphoresignal Dispatch Semaphore dispatchsemaphorewait Dispatch Semaphore dispatchsemaphoresignalsemaphore dispatchbarrierasyncqueue NSLog s d PRETTYFUNCTION LINE array count dispatchbarrierasync forint i i i dispatchasyncqueue dispatchsemaphorewaitsemaphore DISPATCHTIMEFOREVER forint i i i dispatchsemaphorewaitsemaphore DISPATCHTIMEFOREVER dispatchasyncqueue Demo DispatchQueue dispatchsuspend dispatchasync Log screenshot dispatchonce AFN ETag 