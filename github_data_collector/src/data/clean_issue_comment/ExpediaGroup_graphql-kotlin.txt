 pencil Description First pass at the upgrade Opening draft for comments The only thing failing right now is the tests that validate the schema printer for federation We need to exclude directive definitions with the new description format of using instead of I am not a RegEx master so does someone have a better way of doing that This PR would make it a lot simpler link Related Issues Fixes Fixes Depends on Is your feature request related to a problem Please describe We are using Spring Boot The latest version released is We should update to include all the latest bug fixes in Spring This is not required for our release and can be picked up at any time Additional context Describe the solution youd like GraphQL Java released a new major version There are some breaking changes which look like they will impact us and it will not be a simple version update However there are lots of bug fixes and other issues that we were hoping to be fixed that have been closed in this release We should try to get this out in There shouldnt be any additional breaking changes for our library users but it will be a great finisher to add into this release Additional context pencil Description Following the Message Flow section of the spec closer there should be the following callbacks onConnect this would occur on GQLCONNECTIONINIT and result should be added to the context for subscriptions onOperation this would occur on GQLSTART before running the subscription onOperationDone this would occur on GQLSTOP before stopping the subscription In the Apollo Subscription Server they have two differences from above They call onOperationDone onOperationComplete They added an onDisconnect event this would occur on GQLCONNECTIONTERMINATE before terminating the session link Related Issues How would you recommend hooking into the onConnect event for subscriptions similar to here Is your feature request related to a problem Please describe Currently the schema generator can only produce descriptions for functions types etc with comments instead of quote descriptions with or This is problematic as Apollo servers with Federation strip these descriptions away but allows quoted descriptions this is intentional as comments for descriptions are depreciated Describe the solution youd like Graphqljava has already fixed this but the fix isnt out as a major release yet Either wait for that to come out use a daily release version that has this feature unlikely or find a way to support it within this library I dont see how that is possible without making a custom schema printer Additional context The changes graphqljava made can be seen in this PR Library Version Describe the bug Declaring a Kotlin Boolean property with a prefix of is causes the default KotlinDataFetcherFactoryProvider to return a graphqljava PropertyDataFetcher with a name that does not resolve as expected Kotlin Boolean properties with an is prefix generate get methods without an additional prefix eg val isFancy Boolean yields a generated method of boolean isFancy but PropertyDataFetchers reflective method lookup only considers methods with an additional is or get prefix This causes data fetching to fail at query time This results in additional unexpected behavior if Boolean properties isFancy and fancy are exposed on the same object though this is admittedly a contrived scenario PropertyDataFetcher will resolve fancy to point at the isFancy property when queried and attempting to fetch isFancy will produce an error To Reproduce Steps to reproduce the behavior Schema Configuration Default Kotlin code used to generate the schema kotlin class Test val isFancy Boolean get true val fancy Boolean get false Pass TopLevelObjectQuery to toSchema class Query fun test Test Queries to reproduce graphql Cannot fetch the isFancy property query LookupError test isFancy Fetches the isFancy property not fancy returns true rather than false query WrongProperty test fancy Expected behavior The generated data fetchers fetch the Kotlin object properties with names matching the generated schema Workaround Solving the issue completely may involve either upstream changes for graphqljavas PropertyDataFetcher or reimplementing it with Kotlinaware behavior in graphqlkotlin to resolve the ambiguity between isprefixed and unprefixed Boolean properties The first issue illustrated can be worked around by replacing the KotlinDataFetcherFactoryProvider as follows kotlin class FixedDataFetcherFactoryProvider hooks SchemaGeneratorHooks NoopSchemaGeneratorHooks KotlinDataFetcherFactoryProviderhooks ExperimentalStdlibApi for typeOf override fun propertyDataFetcherFactory kClass KClass kProperty KProperty DataFetcherFactoryAny if kPropertynamestartsWithis kPropertyreturnType typeOfBoolean kPropertynamelength Omit is prefix that PropertyDataFetcher will add back PropertyDataFetcherkPropertynamesubstring else PropertyDataFetcherkPropertyname Library Version Describe the bug Im using graphqlkotlin to build the schema for graphqljava because I cant switch to WebFlux at the moment Id like to use Apollo uploads but they dont quite work The schema is created correctly but the datafetcher throws at runtime details summaryStack tracesummary javalangIllegalArgumentException No serializer found for class javaioFileDescriptor and no properties discovered to create BeanSerializer to avoid exception disable SerializationFeatureFAILONEMPTYBEANS through reference chain orgapachecatalinacoreApplicationPart inputStream javaioFileInputStream fd at comfasterxmljacksondatabindObjectMapperconvertObjectMapperjava at comfasterxmljacksondatabindObjectMapperconvertValueObjectMapperjava at comexpediagroupgraphqlexecutionFunctionDataFetcherconvertParameterValueFunctionDataFetcherkt at comexpediagroupgraphqlexecutionFunctionDataFetchermapParameterToValueFunctionDataFetcherkt at comexpediagroupgraphqlexecutionFunctionDataFetchergetFunctionDataFetcherkt at graphqlexecutioninstrumentationdataloaderDataLoaderDispatcherInstrumentationlambdainstrumentDataFetcher DataLoaderDispatcherInstrumentationjava at graphqlexecutionExecutionStrategyfetchFieldExecutionStrategyjava at graphqlexecutionExecutionStrategyresolveFieldWithInfoExecutionStrategyjava at graphqlexecutionAsyncExecutionStrategyexecuteAsyncExecutionStrategyjava at graphqlexecutionExecutionexecuteOperationExecutionjava at graphqlexecutionExecutionexecuteExecutionjava at graphqlGraphQLexecuteGraphQLjava at graphqlGraphQLparseValidateAndExecuteGraphQLjava at graphqlGraphQLexecuteAsyncGraphQLjava at graphqlservletcoreGraphQLQueryInvokerqueryGraphQLQueryInvokerjava at graphqlservletcoreGraphQLQueryInvokerqueryGraphQLQueryInvokerjava at graphqlservletcoreGraphQLQueryInvokerqueryAsyncGraphQLQueryInvokerjava at graphqlservletcoreGraphQLQueryInvokerqueryGraphQLQueryInvokerjava at graphqlservletAbstractGraphQLHttpServletqueryAbstractGraphQLHttpServletjava at graphqlservletAbstractGraphQLHttpServletlambdainit AbstractGraphQLHttpServletjava at graphqlservletAbstractGraphQLHttpServletdoRequestAbstractGraphQLHttpServletjava at graphqlservletAbstractGraphQLHttpServletdoRequestAsyncAbstractGraphQLHttpServletjava at graphqlservletAbstractGraphQLHttpServletdoPostAbstractGraphQLHttpServletjava at javaxservlethttpHttpServletserviceHttpServletjava at javaxservlethttpHttpServletserviceHttpServletjava at orgapachecatalinacoreApplicationFilterChaininternalDoFilterApplicationFilterChainjava at orgapachecatalinacoreApplicationFilterChaindoFilterApplicationFilterChainjava at orgapachetomcatwebsocketserverWsFilterdoFilterWsFilterjava at orgapachecatalinacoreApplicationFilterChaininternalDoFilterApplicationFilterChainjava at orgapachecatalinacoreApplicationFilterChaindoFilterApplicationFilterChainjava at orgspringframeworkwebfilterCorsFilterdoFilterInternalCorsFilterjava at orgspringframeworkwebfilterOncePerRequestFilterdoFilterOncePerRequestFilterjava at orgapachecatalinacoreApplicationFilterChaininternalDoFilterApplicationFilterChainjava at orgapachecatalinacoreApplicationFilterChaindoFilterApplicationFilterChainjava at orgspringframeworkormjpasupportOpenEntityManagerInViewFilterdoFilterInternalOpenEntityManagerInViewFilterjava at orgspringframeworkwebfilterOncePerRequestFilterdoFilterOncePerRequestFilterjava at orgapachecatalinacoreApplicationFilterChaininternalDoFilterApplicationFilterChainjava at orgapachecatalinacoreApplicationFilterChaindoFilterApplicationFilterChainjava at orgspringframeworksecuritywebFilterChainProxyVirtualFilterChaindoFilterFilterChainProxyjava at orgspringframeworksecuritywebaccessinterceptFilterSecurityInterceptorinvokeFilterSecurityInterceptorjava at orgspringframeworksecuritywebaccessinterceptFilterSecurityInterceptordoFilterFilterSecurityInterceptorjava at orgspringframeworksecuritywebFilterChainProxyVirtualFilterChaindoFilterFilterChainProxyjava at orgspringframeworksecuritywebaccessExceptionTranslationFilterdoFilterExceptionTranslationFilterjava at orgspringframeworksecuritywebFilterChainProxyVirtualFilterChaindoFilterFilterChainProxyjava at orgspringframeworksecuritywebsessionSessionManagementFilterdoFilterSessionManagementFilterjava at orgspringframeworksecuritywebFilterChainProxyVirtualFilterChaindoFilterFilterChainProxyjava at orgspringframeworksecuritywebauthenticationAnonymousAuthenticationFilterdoFilterAnonymousAuthenticationFilterjava at orgspringframeworksecuritywebFilterChainProxyVirtualFilterChaindoFilterFilterChainProxyjava at orgspringframeworksecuritywebservletapiSecurityContextHolderAwareRequestFilterdoFilterSecurityContextHolderAwareRequestFilterjava at orgspringframeworksecuritywebFilterChainProxyVirtualFilterChaindoFilterFilterChainProxyjava at orgspringframeworksecuritywebsavedrequestRequestCacheAwareFilterdoFilterRequestCacheAwareFilterjava at orgspringframeworksecuritywebFilterChainProxyVirtualFilterChaindoFilterFilterChainProxyjava at orgspringframeworksecuritywebauthenticationAbstractAuthenticationProcessingFilterdoFilterAbstractAuthenticationProcessingFilterjava at orgspringframeworksecuritywebFilterChainProxyVirtualFilterChaindoFilterFilterChainProxyjava at orgspringframeworksecuritywebauthenticationlogoutLogoutFilterdoFilterLogoutFilterjava at orgspringframeworksecuritywebFilterChainProxyVirtualFilterChaindoFilterFilterChainProxyjava at orgspringframeworksecuritywebcsrfCsrfFilterdoFilterInternalCsrfFilterjava at orgspringframeworkwebfilterOncePerRequestFilterdoFilterOncePerRequestFilterjava at orgspringframeworksecuritywebFilterChainProxyVirtualFilterChaindoFilterFilterChainProxyjava at orgspringframeworksecuritywebheaderHeaderWriterFilterdoHeadersAfterHeaderWriterFilterjava at orgspringframeworksecuritywebheaderHeaderWriterFilterdoFilterInternalHeaderWriterFilterjava at orgspringframeworkwebfilterOncePerRequestFilterdoFilterOncePerRequestFilterjava at orgspringframeworksecuritywebFilterChainProxyVirtualFilterChaindoFilterFilterChainProxyjava at orgspringframeworksecuritywebcontextSecurityContextPersistenceFilterdoFilterSecurityContextPersistenceFilterjava at orgspringframeworksecuritywebFilterChainProxyVirtualFilterChaindoFilterFilterChainProxyjava at orgspringframeworksecuritywebcontextrequestasyncWebAsyncManagerIntegrationFilterdoFilterInternalWebAsyncManagerIntegrationFilterjava at orgspringframeworkwebfilterOncePerRequestFilterdoFilterOncePerRequestFilterjava at orgspringframeworksecuritywebFilterChainProxyVirtualFilterChaindoFilterFilterChainProxyjava at orgspringframeworksecuritywebFilterChainProxydoFilterInternalFilterChainProxyjava at orgspringframeworksecuritywebFilterChainProxydoFilterFilterChainProxyjava at orgspringframeworkwebfilterDelegatingFilterProxyinvokeDelegateDelegatingFilterProxyjava at orgspringframeworkwebfilterDelegatingFilterProxydoFilterDelegatingFilterProxyjava at orgapachecatalinacoreApplicationFilterChaininternalDoFilterApplicationFilterChainjava at orgapachecatalinacoreApplicationFilterChaindoFilterApplicationFilterChainjava at orgspringframeworkwebfilterRequestContextFilterdoFilterInternalRequestContextFilterjava at orgspringframeworkwebfilterOncePerRequestFilterdoFilterOncePerRequestFilterjava at orgapachecatalinacoreApplicationFilterChaininternalDoFilterApplicationFilterChainjava at orgapachecatalinacoreApplicationFilterChaindoFilterApplicationFilterChainjava at orgspringframeworkwebfilterFormContentFilterdoFilterInternalFormContentFilterjava at orgspringframeworkwebfilterOncePerRequestFilterdoFilterOncePerRequestFilterjava at orgapachecatalinacoreApplicationFilterChaininternalDoFilterApplicationFilterChainjava at orgapachecatalinacoreApplicationFilterChaindoFilterApplicationFilterChainjava at orgspringframeworkbootactuatemetricswebservletWebMvcMetricsFilterdoFilterInternalWebMvcMetricsFilterjava at orgspringframeworkwebfilterOncePerRequestFilterdoFilterOncePerRequestFilterjava at orgapachecatalinacoreApplicationFilterChaininternalDoFilterApplicationFilterChainjava at orgapachecatalinacoreApplicationFilterChaindoFilterApplicationFilterChainjava at orgspringframeworkwebfilterCharacterEncodingFilterdoFilterInternalCharacterEncodingFilterjava at orgspringframeworkwebfilterOncePerRequestFilterdoFilterOncePerRequestFilterjava at orgapachecatalinacoreApplicationFilterChaininternalDoFilterApplicationFilterChainjava at orgapachecatalinacoreApplicationFilterChaindoFilterApplicationFilterChainjava at orgapachecatalinacoreStandardWrapperValveinvokeStandardWrapperValvejava at orgapachecatalinacoreStandardContextValveinvokeStandardContextValvejava at orgapachecatalinaauthenticatorAuthenticatorBaseinvokeAuthenticatorBasejava at orgapachecatalinacoreStandardHostValveinvokeStandardHostValvejava at orgapachecatalinavalvesErrorReportValveinvokeErrorReportValvejava at orgapachecatalinacoreStandardEngineValveinvokeStandardEngineValvejava at orgapachecatalinaconnectorCoyoteAdapterserviceCoyoteAdapterjava at orgapachecoyotehttp Http ProcessorserviceHttp Processorjava at orgapachecoyoteAbstractProcessorLightprocessAbstractProcessorLightjava at orgapachecoyoteAbstractProtocolConnectionHandlerprocessAbstractProtocoljava at orgapachetomcatutilnetNioEndpointSocketProcessordoRunNioEndpointjava at orgapachetomcatutilnetSocketProcessorBaserunSocketProcessorBasejava at javautilconcurrentThreadPoolExecutorrunWorkerThreadPoolExecutorjava at javautilconcurrentThreadPoolExecutorWorkerrunThreadPoolExecutorjava at orgapachetomcatutilthreadsTaskThreadWrappingRunnablerunTaskThreadjava at javalangThreadrunThreadjava Caused by comfasterxmljacksondatabindexcInvalidDefinitionException No serializer found for class javaioFileDescriptor and no properties discovered to create BeanSerializer to avoid exception disable SerializationFeatureFAILONEMPTYBEANS through reference chain orgapachecatalinacoreApplicationPart inputStream javaioFileInputStream fd at comfasterxmljacksondatabindexcInvalidDefinitionExceptionfromInvalidDefinitionExceptionjava at comfasterxmljacksondatabindSerializerProviderreportBadDefinitionSerializerProviderjava at comfasterxmljacksondatabindDatabindContextreportBadDefinitionDatabindContextjava at comfasterxmljacksondatabindserimplUnknownSerializerfailForEmptyUnknownSerializerjava at comfasterxmljacksondatabindserimplUnknownSerializerserializeUnknownSerializerjava at comfasterxmljacksondatabindserBeanPropertyWriterserializeAsFieldBeanPropertyWriterjava at comfasterxmljacksondatabindserstdBeanSerializerBaseserializeFieldsBeanSerializerBasejava at comfasterxmljacksondatabindserBeanSerializerserializeBeanSerializerjava at comfasterxmljacksondatabindserBeanPropertyWriterserializeAsFieldBeanPropertyWriterjava at comfasterxmljacksondatabindserstdBeanSerializerBaseserializeFieldsBeanSerializerBasejava at comfasterxmljacksondatabindserBeanSerializerserializeBeanSerializerjava at comfasterxmljacksondatabindserDefaultSerializerProviderserializeDefaultSerializerProviderjava at comfasterxmljacksondatabindserDefaultSerializerProviderserializeValueDefaultSerializerProviderjava at comfasterxmljacksondatabindObjectMapperconvertObjectMapperjava common frames omitted details The object passed to FunctionDataFetcherconvertParameterValue already is of type ApplicationPart It is passed to the jackson object mapper anyway The object mapper then fails to deserialize the object Code changed in master but has the same behavior To Reproduce Provide graphqlservletcoreApolloScalarsUpload as a ScalarType with Java type orgapachecatalinacoreApplicationPart via SchemaGeneratorHooks The correct Java type should be javaxservlethttpPart but interfaces cannot be used as parameters Side question why are interfaces forbidden for scalars Create a mutation function that takes an ApplicationPart as a parameter Call the mutation see Expected behavior The Part object should not be deserialized but passed to the function directly Maybe skip mapping if actual and desired type are the same Describe the bug Currently GH actions do not allow sharing secrets to build from forks including PRs This means that currently it is not possible to correctly integrate with codecovio which requires secret token using GH actions Expected behavior Codecov coverage diff is calculated for all PRs Related codecov issue Is there a way to make this work with a PR from a fork GH Action issue make secrets available to builds of forks Library Version Describe the bug Annotation used for field inside input object seems to be ignored To Reproduce Run following test which executes a mutation with an object Input that has GraphQLName for field set package expediabug import comexpediagroupgraphqlTopLevelObject import comexpediagroupgraphqlannotationsGraphQLName import comexpediagroupgraphqlfederationFederatedSchemaGeneratorConfig import comexpediagroupgraphqlfederationFederatedSchemaGeneratorHooks import comexpediagroupgraphqlfederationexecutionFederatedTypeRegistry import comexpediagroupgraphqlfederationtoFederatedSchema import graphqlExecutionInput import graphqlGraphQL import orgjunitjupiterapiTest import kotlintestassertTrue val schema type Mutation setActiveinput MutationInput String input MutationInput itemID String trimIndent data class Input GraphQLNameitemID val itemId String class Mutation fun setActiveinput Input inputitemId class ExpediaBugTest Test fun shouldExecuteQuery given val config FederatedSchemaGeneratorConfig supportedPackages listOfexpediabug hooks FederatedSchemaGeneratorHooksFederatedTypeRegistry val graphQL GraphQLnewGraphQLtoFederatedSchemaconfig mutations listOfTopLevelObjectMutationbuild and a query val query ExecutionInputnewExecutionInputquerymutation setActive input itemID when val executionResult graphQLexecutequery then no errors assertTrueexecutionResulterrorsisEmpty Actual behaviour error contains Exception while fetching data setActive Instantiation of simple type class expediabugInput value failed for JSON property itemId due to missing therefore NULL value for creator parameter itemId which is a nonnullable type at Source UNKNOWN line column through reference chain expediabugInput itemId Expected behavior Query is executed 