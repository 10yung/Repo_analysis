This should also help PHPStan understand the collections class a little better as it doesnt support arraykey yet This enhancement gives to map Closure the capability to access also the keys of the inner array holding the elements Until now we were able to access just the element on map Closure but not the key So I propose to add the ability to access also the key for do some statements inside the Closure with key related I have the need to add it since in my project I must get the asociative key to take a decision in function of the current key element and I thought that may be usefull for everyone in some other projects to access the key of current processing element This is a reproposal of PR by mnapoli Update get method with one more additional method parameter which will be used as default value if target element couldnt be found Example Symfony ParameterBag Fixes See question here where this was originally requested I noticed that some methods of Collection return false on failure Specifically first last current next and indexOf It would be better in my opinion to return null instead Since this is a BC break Id like to propose this for doctrinecollections Of course all Collection implementations and tests would need to be changed accordingly Possibly a good idea for branches in x not to be merged into master Just throwing it out there this would prevent most feedback along the lines of we cant do that because BC from humantohuman which is frustrating Jira issue originally created by user antonserdyuk Given I have some entity method like this public function hasNewComments newComments thiscommentsmatching Criteriacreate whereCriteriaexpreqnew true return countnewComments Where thiscomments is OneToMany collection If thiscomments is EXTRALAZY then this code will always produce SQL query to database and always will work fine But if it is not EXTRALAZY and appears to be loaded before for eample countthiscomments was called before then this code will produce error Trying to get private property Commentnew from ClosureExpressionVisitor context I thins we should have something like reflection or Closurebind stuff to get actual field value within ClosureExpressionVisitor regardless this field is private or public I know I can create getter getNew or isNew but I believe this is known to be a good OOP practice to avoid unnecessary getters and I am not sure collection api should make this decision for me 