Were seeing errors building KeyDerivationxcworkspace using the most current carthage and at least Xcode beta Fails Command Line tools M r Carthage Succeeds Command Line tools E Carthage what shoud i do I cant find this file rncryptorh We are using RNCryptor to encrypt API data in our iOS app the data gets decrypted on the server This works well for all the devices except iPhone SE The PHP server is not able to decrypt the data sent by iPhone SE for all other devices it is just perfect The code is same for all the devices so I doubt the issue is related to this particular device but we cannot remove support for this device right now Please help Any help is appreciated Deploying to a Linux server Ubuntu Im getting this error Compile Cryptor Cryptorc In file included from perfectbuildbuildcheckoutsRNCryptorgit SourcesCryptorCryptorc perfectbuildbuildcheckoutsRNCryptorgit SourcesCryptorincludeRNCryptorh fatal error CoreFoundationCFAvailabilityh file not found include CoreFoundationCFAvailabilityh error generated the iOS framework contains a proper modulemap file the file is missing for watchOS and tvOS These error codes should be in the documentation It is not possible to distinguish between these cases in the v data format case HMACMismatch Unrecognized data format Usually this means the data is corrupt case UnknownHeader final was called before sufficient data was passed to updateWithData case MessageTooShort Memory allocation failure This should never happen case MemoryFailure A passwordbased decryptor was used on a keybased ciphertext or viceversa case InvalidCredentialType I was under the mistaken impression that I could create a decryptor and then reuse it multiple times to decrypt the data That doesnt appear to be allowed but it took me a bit to track down my problem When I call decryptData a second time I dont get an error Id expect Instead it throws RNCryptorErrorHMACMismatch which makes it look like the data is the problem eg psuedo let decryptor RNCryptorDecryptorV encryptionKey encryptionKey hmacKey hmacKey let decrypted try decryptordecryptDatadataPackage let decrypted try decryptordecryptDatadataPackage throws HMACMismatch Looking at the encryptData function comment block it includes the comment invalidates the cryptor decryptData does not include that comment and probably should Suggestion add an error code for reusing a cryptor after its been invalidated Unit test func testTwoDecodesOnOneDecryptorV let encryptionKey RNCryptorrandomDataOfLengthRNCryptorFormatV keySize let hmacKey RNCryptorrandomDataOfLengthRNCryptorFormatV keySize let message Attack at dawndataUsingEncodingNSUTF StringEncoding Encrypting let ciphertext RNCryptorEncryptorV encryptionKey encryptionKey hmacKey hmacKey encryptDatamessage Decrypting let plaintext try RNCryptorDecryptorV encryptionKey encryptionKey hmacKey hmacKey decryptDataciphertext try example with storing and reusing decryptor let decryptor RNCryptorDecryptorV encryptionKey encryptionKey hmacKey hmacKey let plaintext try decryptordecryptDataciphertext var plaintext NSData do plaintext try decryptordecryptDataciphertext catch let rnError as RNCryptorError XCTFailRNCryptorError rnErrorrawValue fails RNCryptorError catch XCTFailError error Did it work Should be true if plaintext message XCTFailplaintext mismatch if plaintext message XCTFailplaintext mismatch if plaintext message XCTFailplaintext mismatch fails I have implemented RNCryptor in my app IOS im looking for who has written a utility on OS X for mutual interest thanks Set default value of decryptflag to so that encoding works uninitalized was a positive number interfering with the decode value it was basically always trying to invoke the decode function Added more detailed usage 