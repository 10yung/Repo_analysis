Want it to be consistent across my app seems that its using the iOS default but I changed mine as part of the networking stack and Id like it to apply to the MQTT requests as well Short description In macOS GCDTimer has delay when i set keepalive to s the callback method will be active after s s but it work in iOS Environment Operating system macOS Software version Package Manager Cocoapods MQTTClient version Steps to reproduce log current date when keep alive method be call connect broker and set keepalive to s wait min and review logs Others sorry my english is not good Before deleting the cert code the package info of client for exchange had two certificates which were same with each other The screenshot is below before before After deleting that everything was OK after after The SecIdentityRef contains a SecCertificateRef so we do not add another SecCertificateRef again Please fix it and release a new pod version thanks The comment says MQTTConnectHandler has a parameter sessionPresent But the definition of MQTTConnectHandler doesnt have that parameter Is the comment outofdate It can connect to Server with SSL on iOS The error message is mqttTransport didFailWithError Error DomainMQTT Code Unable to apply security policy the SSL connection is insecure And it can connect to server on device that the system is below iOS Is there anyone encounter this issue MQTTSession closeInternal in smartlife MQTTSessionm MQTTSession closeInternal in smartlife MQTTSessionm MQTTSession closeWithReturnCodesessionExpiryIntervalreasonStringuserPropertydisconnectHandler in smartlife MQTTSessionm didEnterBackground blockinvoke in smartlife Before filing an issue please search the existing issues both open and closed to see if your report might be duplicate Short description When disconnect is called on MQTTSessionManager in starting state that is before starting any connection it gets stuck in closing state indefinitely Explain in a few sentences what the issuerequest is Environment Tell us about the environment Operating system iOS Package Manager Carthage delete the ones that do not apply MQTTClient version MQTT Broker used AWS IoT its rather not brokerspecific Steps to reproduce Tell us stepbystep how the issue can be triggered Please include connection details to your test broker Initialize MQTTSessionManager Call disconnectdisconnectHandler on it without calling connect first the manager is in starting state Expected behaviour Managers state eventually changes to closed or it remains in starting state Actual behaviour Manager changes state to closing and never transitions to closed Then the next connect call will not work the manager will remain in closing state probably because of this check Other information I think calling disconnect in starting closed state should be a noop do nothing Hello when I set willMsg as nil in the latest version I cant connect to the server but it is clearly said in the parameter description of the method that it can be empty please help me explain how to set this parameter on earth Here is the code that cannot be connected objectc selfmanager connectToxxxhost port tlsFALSE keepalive cleantrue authfalse usernil passnil will offline dataUsingEncodingNSUTF StringEncoding willTopictest willMsgnil willQosMQTTQosLevelExactlyOnce willRetainFlagFALSE withClientId securityPolicynil certificatesnil protocolLevelMQTTProtocolVersion connectHandler NSError error Here is the code to connect to objectc selfmanager connectToselfmqttSettings host port selfmqttSettings port intValue tls selfmqttSettings tls boolValue keepalive cleantrue authfalse usernil passnil will offline dataUsingEncodingNSUTF StringEncoding willTopictest willMsg joins chat dataUsingEncodingNSUTF StringEncoding willQosMQTTQosLevelAtMostOnce willRetainFlagFALSE withClientIdnil securityPolicynil certificatesnil protocolLevelMQTTProtocolVersion connectHandler NSError error By the way I think its good to provide the latest version in the demo This is my first time to ask a question here and I hope to get your reply I use the asyn api connect When the network is not good I get a mistake like this nwsockethandlesocketevent C Socket SOERROR Operation timed out this is a time out error the time is too long I want know where can i set time out I put the files in the MQTTClient folder into my project but session connectWithConnectHandler NSError error method can not go into block callbacks thank you