Error downloading any of the POF data My understanding is that the problem is in the httr call The ftp sites were ok when I ran lodown Below is the call stack lodownpof pof pathto za z withCallingHandlerscatalog loadfundataname dataname catalog error functione printsessionInfo if greplcannot allocate vector of size e messagememorynote else if greplparameter must be specified e messageparameternote else if greplto install e messageinstallationnote else messageunknownerrornote printsyscalls loadfundataname dataname catalog cachacacatalog i fullurls tf mode wb httrfilesizethisurl attempts sleepsec stoppaste httrHEAD url nfailed after initialattempts attempts handleSimpleErrorfunction e printsessionInfo if greplcannot allocate vector of size e messagememorynote else if greplparameter must be specified e messageparameternote else if greplto install e messageinstallationnote else messageunknownerrornote printsyscalls httrHEAD ftpftpibgegovbrOrcamentosFamiliaresPesquisadeOrcamentosFamiliares MicrodadosDadoszip nfailed after attempts basequotehttrfilesizethisurl attempts sleepsec hsimpleErrormsg call Error in httrfilesizethisurl attempts sleepsec httrHEAD ftpftpibgegovbrOrcamentosFamiliaresPesquisadeOrcamentosFamiliares MicrodadosDadoszip failed after attempts fullurls ftpftpibgegovbrOrcamentosFamiliaresPesquisadeOrcamentosFamiliares MicrodadosDadoszip period documentation ftpftpibgegovbrOrcamentosFamiliaresPesquisadeOrcamentosFamiliares Microdadosdocumentacaozip alimentfile ftpftpibgegovbrOrcamentosFamiliaresPesquisadeOrcamentosFamiliares Microdadostradutoreszip outputfolder casecount UserswainerDADOSPOF NA The sessionInfo data sessionInfo R version Platform x appledarwin bit Running under macOS Mojave Matrix products default BLAS SystemLibraryFrameworksAccelerateframeworkVersionsAFrameworksvecLibframeworkVersionsAlibBLASdylib LAPACK LibraryFrameworksRframeworkVersions ResourcesliblibRlapackdylib locale enUSUTF enUSUTF enUSUTF CenUSUTF enUSUTF attached base packages grid stats graphics grDevices utils datasets methods base other attached packages lodown survey survival Matrix dplyr loaded via a namespace and not attached tidyselect xfun remotes purrr mitools splines lattice vctrs testthat htmltools usethis yaml utf rlang pkgbuild pillar glue withr DBI readxl sessioninfo cellranger devtools evaluate memoise knitr callr ps curl fansi Rcpp backports desc pkgload fs packrat digest processx rprojroot bitops cli tools magrittr RCurl tibble crayon pkgconfig zeallot ellipsis rsconnect prettyunits httr assertthat rmarkdown rstudioapi R compiler It looks like I got the folder but theyre all empty LCCOLLATEEnglishUnited States LCCTYPEEnglishUnited States LCMONETARYEnglishUnited States LCNUMERICC LCTIMEEnglishUnited States attached base packages stats graphics grDevices utils datasets methods base other attached packages lodown devtools usethis loaded via a namespace and not attached Rcpp pillar cellranger plyr compiler prettyunits remotes tools testthat digest pkgbuild pkgload tibble memoise lattice pkgconfig rlang Matrix cli DBI rstudioapi curl stringr xml withr httr desc fs mitools rprojroot grid glue R processx readxl survival sessioninfo reshape selectr callr magrittr backports ps splines assertthat rvest stringi survey crayon lodown is now exiting unexpectedly websites that host publiclydownloadable microdata change often and sometimes those changes cause this software to break if the error call stack below appears to be a hiccup in your internet connection then please verify your connectivity and retry the download otherwise please open a new issue at with the contents of this error call stack and also the output of your sessionInfo lodownces outputdir filepathpathexpand CES withCallingHandlerscatalog loadfundataname dataname catalog error functione printsessionInfo if greplcannot allocate vector of size e messagememorynote else if greplparameter must be specified e messageparameternote else if greplto install e messageinstallationnote else messageunknownerrornote printsyscalls loadfundataname dataname catalog censusthresholds dataframereadxlreadexcelfn readxlreadexcelfn readexcelpath path sheet sheet range range colnames colnames coltypes coltypes na na trimws trimws skip skip nmax nmax guessmax guessmax progress progress namerepair namerepair format format setreadxlnamesreadfunpath enc nativenormalizePathpath sheeti sheet limits limits shim shim colnames colnames coltypes coltypes na na trimws trimws guessmax guessmax progress progress namerepair namerepair tibbleastibblel namerepair namerepair readfunpath enc nativenormalizePathpath sheeti sheet limits limits shim shim colnames colnames coltypes coltypes na na trimws trimws guessmax guessmax progress progress stoplistmessage n filepath C Users samko AppData Local Temp RtmpGSJiSd thresh xls n libxls error Unable to open file call NULL cppstack NULL function e printsessionInfo if greplcannot allocate vector of size e messagememorynote else if greplparameter must be specified e messageparameternote else if greplto install e messageinstallationnote else messageunknownerrornote printsyscalls listmessage n filepath C Users samko AppData Local Temp RtmpGSJiSd thresh xls n libxls error Unable to open file call NULL cppstack NULL Error filepath C Users samko AppData Local Temp RtmpGSJiSd thresh xls libxls error Unable to open file type year fullurl outputfolder intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES intrvw CUserssamkoDocumentsCES diary CUserssamkoDocumentsCES casecount NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA NA Maybe change to another DB Heres my sessionInfo and error output R version Platform x appledarwin bit Running under macOS Matrix products default BLAS SystemLibraryFrameworksAccelerateframeworkVersionsAFrameworksvecLibframeworkVersionsAlibBLASdylib LAPACK LibraryFrameworksRframeworkVersions ResourcesliblibRlapackdylib locale enUSUTF enUSUTF enUSUTF CenUSUTF enUSUTF attached base packages stats graphics grDevices utils datasets methods base other attached packages usethis devtools lodown loaded via a namespace and not attached Rcpp cellranger compiler plyr remotes prettyunits tools testthat digest pkgbuild pkgload evaluate memoise rlang cli rstudioapi curl yaml xfun withr httr stringr xml knitr fs desc rprojroot glue R processx readxl rmarkdown sessioninfo reshape callr selectr magrittr backports ps htmltools assertthat rvest stringi crayon lodownces outputdir filepathpathexpandDocumentsdatacex CES withCallingHandlerscatalog loadfundataname dataname catalog error functione printsessionInfo if greplcannot allocate vector of size e messagememorynote else if greplparameter must be specified e messageparameternote else if greplto install e messageinstallationnote else messageunknownerrornote printsyscalls loadfundataname dataname catalog censusthresholds httrGETthisexcel httrwritediskfn overwrite TRUE handleurlhandle url handlefindurl handlenameurl buildurlparseurlurl cscheme hostname port stopifnotisurlurl withCallingHandlerstryCatchif missE elti else evalcli envir envir error functione ecall cli stope warning functionw wcall cli w tryCatchif missE elti else evalcli envir envir error functione ecall cli stope tryCatchListexpr classes parentenv handlers tryCatchOneexpr names parentenv handlers L value L cond stope function e printsessionInfo if greplcannot allocate vector of size e messagememorynote else if greplparameter must be specified e messageparameternote else if greplto install e messageinstallationnote else messageunknownerrornote printsyscalls listmessage lengthurl is not TRUE call isurlurl Error in isurlurl lengthurl is not TRUE type year fullurl outputfolder casecount intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA intrvw UsersernietedeschiDocumentsdatacexCES NA diary UsersernietedeschiDocumentsdatacexCES NA This filename should now be r wvsdf readRDS filepath pathexpand WVS wave F WV DataUnitedStates Spssv rds Id submit a pull request but I have an old version of the repo on my GitHub profile which I want to keep as such sorry if you have a population projection for a geography and you take the open street maps data for that locality is there a good way to synthetically create a population within each structure Map this data onto leaflet It s averaged across m square grids I think Most of this is not answering your question but it might helpthe shapefiles can be downloaded from the links provided Im not sure if my api key for google is workingbut if you are interested in open street maps then you can just do the same things but use the open street maps API and getopenstreetmapI did a similar thing for china and I used the baidu maps api fun stuff I guess I could also make a zoomed in map which includes the population estimates overlaid on top of the satellite image for US structures related fileszip I received the following error when trying to download the ACS data using this code lodown acs outputdir filepath pathexpand ACS Error in cachacacatalog i if j h hfullurl else pfullurl download failed after attempts Other notes trying URL Content type applicationzip length bytes MB downloaded MB downloaded file size on disk does not match servers content length lodown is now exiting unexpectedly websites that host publiclydownloadable microdata change often and sometimes those changes cause this software to break if the error call stack below appears to be a hiccup in your internet connection then please verify your connectivity and retry the download otherwise please open a new issue at with the contents of this error call stack and also the output of your sessionInfo Im sorry ajdamico but Ill write in portuguese because this section is contributed by DjalmaPessoa Ol Djalma a linha referida do merge est dando problema quando uma das vari veis para importar a v o thiscensodf fica com um n mero inferior de linhas do que deveria Uma possibilidade seria remover ela atrav s do by no merge mas n o sei qual das duas vari veis seria a correta a da base de pessoas ou domic lios Voc poderia dar uma olhada Error nrowthiscensodf nrowthiscensopesdf is not TRUE Hi Im having problems to download the microfile of PNS with lodown The following error is occurring when I use the command lodown pns outputdir filepath pathexpand PNS building catalog for pns locally downloading pns ftpftpibgegovbrPNS microdadospns microdados zip cached in varfolders ygh rslj bgm k zvyg r gnT be d f b dc acdd Rcache copying to varfolders ygh rslj bgm k zvyg r gnTRtmpnoLK jfile b d R version Platform x appledarwin bit Running under OS X El Capitan Matrix products default BLAS SystemLibraryFrameworksAccelerateframeworkVersionsAFrameworksvecLibframeworkVersionsAlibBLASdylib LAPACK LibraryFrameworksRframeworkVersions ResourcesliblibRlapackdylib locale ptBRUTF ptBRUTF ptBRUTF CptBRUTF ptBRUTF attached base packages grid stats graphics grDevices utils datasets methods base other attached packages survey survival Matrix lodown usethis devtools loaded via a namespace and not attached Rcpp compiler prettyunits bitops remotes tools testthat digest pkgbuild pkgload memoise lattice rlang SAScii cli rstudioapi curl yaml withr httr desc fs rprojroot glue R processx sessioninfo callr magrittr backports splines assertthat RCurl crayon lodown is now exiting unexpectedly websites that host publiclydownloadable microdata change often and sometimes those changes cause this software to break if the error call stack below appears to be a hiccup in your internet connection then please verify your connectivity and retry the download otherwise please open a new issue at with the contents of this error call stack and also the output of your sessionInfo lodownpns outputdir filepathpathexpand PNS withCallingHandlerscatalog loadfundataname dataname catalog error functione printsessionInfo if greplcannot allocate vector of size e messagememorynote else if greplparameter must be specified e messageparameternote else if greplto install e messageinstallationnote else messageunknownerrornote printsyscalls loadfundataname dataname catalog readSASciidd ds navalues suppressWarningssasc SASciiparseSASciitf beginline beginline lrecl lrecl withCallingHandlersexpr warning functionw invokeRestartmuffleWarning SASciiparseSASciitf beginline beginline lrecl lrecl SASuncommentSASinput handleSimpleErrorfunction e printsessionInfo if greplcannot allocate vector of size e messagememorynote else if greplparameter must be specified e messageparameternote else if greplto install e messageinstallationnote else messageunknownerrornote printsyscalls valor ausente onde TRUEFALSE necess rio quoteif maxasteriskslash SASinput j else SASinput j subsubstrSASinput j asteriskslash SASinput j fixed T hsimpleErrormsg call Error in if maxasteriskslash SASinput j else SASinput j subsubstrSASinput j valor ausente onde TRUEFALSE necess rio Al m disso There were or more warnings use warnings to see the first Thanks Hello Anthony I was trying to work with the AHS data catalog and librarylodown ahscat getcatalog ahs outputdir filepath pathexpand AHS ran into this error lodown ahs outputdir filepath pathexpand AHS building catalog for ahs trying URL downloaded KB trying URL downloaded KB trying URL classuscblistitem Error in downloadfilepaste puflines tf cannot open URL classuscblistitem In addition Warning messages In readLinestf incomplete final line found on varfoldersqh q v rxmbl m ttnwy twd TRtmp k R file e e cd In readLinestf incomplete final line found on varfoldersqh q v rxmbl m ttnwy twd TRtmp k R file e e cd In downloadfilepaste puflines tf cannot open URL classuscblistitem HTTP status was Bad Request This may have nothing to do with it but I do see two in but the actual URL seems to have one as in The single forward slash is also visible with the successful downloads for dataAll and data sessionInfo R version Platform x appledarwin bit Running under macOS Sierra Matrix products default BLAS SystemLibraryFrameworksAccelerateframeworkVersionsAFrameworksvecLibframeworkVersionsAlibBLASdylib LAPACK LibraryFrameworksRframeworkVersions ResourcesliblibRlapackdylib locale enUSUTF enUSUTF enUSUTF CenUSUTF enUSUTF attached base packages stats graphics grDevices utils datasets methods base other attached packages lodown loaded via a namespace and not attached compiler tools 