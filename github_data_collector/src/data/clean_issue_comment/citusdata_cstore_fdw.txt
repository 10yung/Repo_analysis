Hello Is there any way to install cstorefdw on Windows including protobufc Thanks cstorefdw crash when Im tryng using cstorefwd foreing table as a partition to normal table Steps to reproduce postgres create table ppa int b int partition by rangea CREATE TABLE postgres create foreign table c partition of pp for values from to server cstoreserver CREATE FOREIGN TABLE postgres insert into pp values server closed the connection unexpectedly This probably means the server terminated abnormally before or while processing the request The connection to the server was lost Attempting reset Failed journalctl logs kernel postmaster segfault at ip f a e sp ffd c f error in cstorefdwso f a b cat varlibpgsql datalogpostgresqlTuelog UTC LOG server process PID was terminated by signal Segmentation fault UTC DETAIL Failed process was running insert into pp values UTC LOG terminating any other active server processes UTC WARNING terminating connection because of crash of another server process UTC DETAIL The postmaster has commanded this server process to roll back the current transaction and exit because another server process exited abnormally and possibly corrupted shared memory ptribble ever see this one before roottommydd cstorefdw make gcc Wall Wmissingprototypes Wpointerarith Wdeclarationafterstatement Wendiflabels Wmissingformatattribute Wformatsecurity fnostrictaliasing fwrapv fexcessprecisionstandard g m fPIC stdc I I Ioptpostgresql includeserver Ioptpostgresql includeinternal c o cstorefdwo cstorefdwc In file included from optpostgresql includeserverpostgresh from cstorefdwc optpostgresql includeserverutilselogh error unknown type name sigjmpbuf extern PGDLLIMPORT sigjmpbuf PGexceptionstack builtin recipe for target cstorefdwo failed make cstorefdwo Error Problem When creating a foreign table and dropping one of its columns certain select statements using the table alias will yield an ERROR cache lookup failed for type Steps to reproduce sql create foreign table t id int id int server cstoreserver options compression pglz insert into t select alter table t drop column id select countt from t The statement select count from t works flawlessly The statement select countt from t works if no columns are dropped Environment PostgreSQL on x pclinuxgnu Debian pgdg compiled by gcc Debian deb u bit cstorefdw I prepared a Gist with a Dockerfile that installs these versions and can reproduce the issue docker build tag cstorebug docker run p it cstorebug psql h p user postgres postgres Hello I have ran into issue with dropping cstore table and then rollbacking the transaction Rollback leaves the table in an inconsistent state as the table definition still exists which is correct but cstore data files are deleted and not rolled back with the rest of the transaction Steps to reproduce sql create empty cstore table create foreign table cstoredroptest server cstoreserver query without errors select from cstoredroptest drop cstore table and then rollback DO language plpgsql DECLARE BEGIN drop foreign table cstoredroptest rollback END query fails on could not open file xxxfooter for reading select from cstoredroptest I am trying to load data into different foreign tables Each COPY runs as expected but whenever I try to parallelize the operation ie run different COPY instructions at the same time the server crashes with the following message FATAL terminating connection due to administrator command server closed the connection unexpectedly This probably means the server terminated abnormally before or while processing the request The connection to the server was lost Attempting reset Failed Upon restarting the connection every time I try to execute a single COPY statement Postgres throws the same error rendering the tables useless Only way to have them populated is to drop them create them again and execute COPY on each table individually Is there a way to do this process in parallel Each table has a populating process of their own there are no concurrent writes to the same table The command I run to populate the tables is COPY table FROM path WITH CSV Trying to build cstorefdw with beta make Entering directory PKGBUILDDIR Makefile PostgreSQL or or or or or is required to compile this extension Stop make Leaving directory PKGBUILDDIR IMHO it would be better to just ditch that check If it doesnt compile it doesnt compile but if it compiles and passes the tests with the new version I could just update the Debian package now without having to poke upstream If we rename public schema then hardcoded function calls wont work so cstore tables cant be dropped I think this is not the intended behaviour either See for reference dev drop foreign table publicgenreleases ERROR function publiccstorecleantableresourcesoid does not exist LINE SELECT publiccstorecleantableresourcesvobjobjid HINT No function matches the given name and argument types You might need to add explicit type casts QUERY SELECT publiccstorecleantableresourcesvobjobjid CONTEXT PLpgSQL function public cstoredroptrigger line at PERFORM I tried to create a new cstoreserver with different name but that didnt create the functions in public Looks like Id have to create these functions in public or move them back to public manually for all the functions This would make sense if a text column contains values from a set of strings We could cache those strings in a dictionary and store only references This approach requires some redesign on data storage and querying I am noting here to keep in mind for future work