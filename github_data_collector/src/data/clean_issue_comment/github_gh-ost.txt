We have a number of tables in our database that unfortunately use the latin character set We need to migrate these to utf mb and are hoping to use ghost to facilitate this In doing some testing Im running into a problem when changes from the binlog are being applied I can reliably produce the problem as follows SQL setup sql create table testcharsetid int not null primary key autoincrement answer text default charsetlatin This is simpler than our real table but illustrates the problem insert into testcharsetanswer valuesHere s an apostrophe note that thats a fancy apostrophe ghost command the strange ports are for Docker containers running locally bash binghost userroot passwordthe password host port databaseloyalty tabletestcharset verbose altermodify column answer text charset utf mb exactrowcount assumerbr postponecutoverflagfiletmpghostcutoverflag maxlagmillis assumemasterhost execute The migration proceeds as expected when copying rows and then waits since the cutover flag file is present If I then insert the same row again ghost crashes sql insert into testcharsetanswer valuesHere s an apostrophe The ghost output is attached It seems that the value of the answer column is coming through as uint instead of string so the character set conversion in typesgoconvertArg isnt happening The fancy apostrophe is valid in the latin character set Any advice is appreciated ghostlog we are facing an issue after an alter of a JSON column after the alter completed we found wrong data types in the JSON data data after the alter sql ootlocalhostmysql a gallery select dateupdatedJSONEXTRACTmetadata photoMetadatafocalPointx from galleryitemsv where galleryid ce c bc ad e ff dateupdated JSONEXTRACTmetadata photoMetadatafocalPointx rows in set sec where befor the alter the data was this is from snapshot of the database befor the alter table sql tbdmysql gallery select dateupdatedJSONEXTRACTmetadata photoMetadatafocalPointx from galleryitemsv where galleryid ce c bc ad e ff dateupdated JSONEXTRACTmetadata photoMetadatafocalPointx rows in set sec As you can see the FLOAT in the JSON converted into STRING versions select version version log row in set sec bash ghost version Thanks Imagine the migration alters two tables but if I read the doc correctly ghost supports single table alteration I understand that theres no good way of handling this kind of situation because even if you run migrations simultaneously two instances of ghost at some point youll end up having one table migrated while the other one still in migration Do I assume correctly that the only right way here is just not allowing such migrations in the first place if you care about zero downtime Hi ghost host userroot password databasetest tabletesttab alterdrop columns chunksize exactrowcount maxloadThreadsconnected allowonmaster assumemasterhost assumerbr initiallydropghosttable execute Copy Applied Backlog Time m stotal m scopy streamer mysqlbin State migrating ETA s Copy Applied Backlog Time m stotal m scopy streamer mysqlbin State migrating ETA s Copy Applied Backlog Time m stotal m scopy streamer mysqlbin State migrating ETA due Migrating iudpztpolicypolicy Ghost table is iudpztpolicypolicygho Migrating ib nk p inspecting ib nk p executing on dlidcdbcopy aeonlifecomcn Migration started at Thu Dec chunksize maxlagmillis ms dmlbatchsize maxload Threadsconnected criticalload niceratio throttleadditionalflagfile tmpghostthrottle Serving on unix socket tmpghostiudpztpolicypolicysock Copy Applied Backlog Time m stotal m scopy streamer mysqlbin State migrating ETA due Why the last rowcount less than I think the last rowcount will be the maximum number Thanks This PR is not related to an issue but is adding an error check where an err variable was set but not checked This could potentially help find errors when developing in the future Description This PR adds an error checks for an err variable which was assigned but never checked In case this PR introduced Go code changes X contributed code is using same conventions as original code X scriptcibuild returns with no formatting errors build errors or unit test errors This issues was found using CodeLingo codelingoio url Initialize the test environment CREATE TABLE test id int unsigned NOT NULL AUTOINCREMENT chinese double DEFAULT NULL math double NOT NULL DEFAULT english double NOT NULL DEFAULT totalscore double GENERATED ALWAYS AS chinese math english STORED PRIMARY KEY id ENGINEInnoDB DEFAULT CHARSETutf mb insert into testchinese math english values insert into testchinese math english values root mydb select from test id chinese math english totalscore When you execute the alter statement directly the totalscore column data exists alter table test modify column totalscore double root mydb select from test id chinese math english totalscore rows in set sec But when you execute through ghost the totalscore column will lose data root mydb select from testgho id chinese math english totalscore NULL NULL Related issue Description This PR will support ghost run on Azure Database for MySQL Like GCP or Aliyun RDS Azure Database also need to do some specific things with code modification This PR including things Skip port validation for Azure Database for MySQL It acts as GCP and Aliyun RDS Add document for how to use it on Azure Database for MySQL In case this PR introduced Go code changes x contributed code is using same conventions as original code x scriptcibuild returns with no formatting errors build errors or unit test errors This is an enhancement request Hi Im new to this I try to use this greate tool for modifying table structure When migrating completed but continuously pop up Copy Applied Backlog Time h m stotal h m scopy streamer mysqlbin State postponing cutover ETA due and my command is this ghost maxloadThreadsrunning criticalloadThreadsrunning chunksize maxlagmillis userxxxx passwordxxxx hostxxxx port databasetest tablet verbose alterADD COLUMN isBookmarkedThree TINYINT NOT NULL DEFAULT allowmastermaster cutoverdefault exactrowcount concurrentrowcount defaultretries panicflagfileghostpanicflag postponecutoverflagfileghostpostponeflag aliyunrds allowonmaster execute I try to delete ghostpostponeflag file it kept popping up INFO Grabbing voluntary lock ghost lock INFO Setting LOCK timeout as seconds INFO Looking for magic cutover table INFO Creating magic cutover table testt del INFO Magic cutover table created INFO Locking testt testt del INFO Tables locked INFO Session locking original magic tables is INFO Writing changelog state AllEventsUpToLockProcessed INFO Waiting for events up to lock ERROR Timeout while waiting for events up to lock ERROR ERROR Timeout while waiting for events up to lock INFO Looking for magic cutover table INFO Will now proceed to drop magic table and unlock tables INFO Dropping magic cutover table INFO Releasing lock from testt testt del INFO Tables unlocked serveral minutes later ends like ERROR Timeout while waiting for events up to lock ERROR ERROR Timeout while waiting for events up to lock INFO Looking for magic cutover table INFO Will now proceed to drop magic table and unlock tables INFO Dropping magic cutover table INFO Removing socket file tmpghosttestt sock FATAL ERROR Timeout while waiting for events up to lock Is there anything I missed Thanks Experience in existing solutions and paradigm migrations is the basis of ghost A Pull Request should be associated with an Issue We wish to have discussions in Issues A single issue may be targeted by multiple PRs If youre offering a new feature or fixing anything wed like to know beforehand in Issues and potentially well be able to point development in a particular direction Related issue Further notes in Thank you We are open to PRs but please understand if for technical reasons we are unable to accept each and any PR Description This PR briefly explain what it does In case this PR introduced Go code changes contributed code is using same conventions as original code scriptcibuild returns with no formatting errors build errors or unit test errors 