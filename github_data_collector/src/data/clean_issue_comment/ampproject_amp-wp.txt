 Feature description If a theme enqueues a navigationjs that has jQuery as a dependency currently this appears in the validated URL screen as wpincludes as the source This is not very helpful It would be helpful that if a theme or plugin enqueues a script or a style that the original themeplugin that enqueued it would be attributed as a source in some way As an example consider this demo plugin All of the scripts here should get Enqueue assets with core dependencies as the source at least indirectly And for the stylesheets the same goes for the circled stylesheets I believe that Origination already provides support here for this so this should perhaps be deferred to the incorporation of that library Also For each scriptstylesheet the list of dependencies should be listed Related Do not alter or remove anything below The following sections will be managed by moderators only Acceptance criteria One or more bullet points for acceptance criteria Implementation brief One or more bullet points for how to technically resolve the issue For significant Implementation Design it is ok use a Google document accessible by anyone QA testing instructions One or more bullet points to describe how to test the implementation in QA Demo A video or screenshots demoing the implementation Changelog entry One sentence summarizing the PR to be used in the changelog Bug Description Scripts and stylesheets enqueued at init do not get sourcing information The same goes for assets registered at wpdefaultstyles and wpscripts Additionally inline styles added via wpaddinlinestyle do not get their source attributed See demo plugin which demonstrates the issue The wpincludes source is erroneous for scripts and stylesheets shown on the page Related Expected Behaviour The source column should indicate the themeplugin that is actually responsible for the style or script being added to the page The case of the inline stylesheet is a tricky one since it is one stylesheet with multiple sources At the very least it should have the same source information as the stylesheet it is being added inline for Best case is for it to include all themesplugins that added inline styles to it Steps to reproduce Enable Standard or Transitional mode in the AMP plugin Activate the above plugin Validate a page Notice the wpincludes mentioned unexpectedly Screenshots When active and checked out the validated URL screen looks like the following with the red entries erroneously saying they are from wpincludes when they should actually be from Add Assets before wpenqueuescripts d e a ea d f e dc b Additional context Please complete the following information WordPress version Plugin version Gutenberg plugin version if applicable AMP plugin template mode PHP version OS Browser eg chrome safari Device eg iPhone Please add any additional information about the bug Ideal dumping your Site Health information here as well Do not alter or remove anything below The following sections will be managed by moderators only Acceptance criteria One or more bullet points for acceptance criteria Implementation brief One or more bullet points for how to technically resolve the issue For significant Implementation Design it is ok use a Google document accessible by anyone This may be resolved simply by adding the validation hooks earlier Origination is also a solution perhaps longterm QA testing instructions One or more bullet points to describe how to test the implementation in QA Demo A video or screenshots demoing the implementation Changelog entry One sentence summarizing the PR to be used in the changelog Feature description When doing an analysis of WordPress themes I got validation errors being reported for these attributes htmlxmllang htmlxmlns These are included in many WordPress themes because WordPress to strive to be valid XHTML WordPress has since moved to HTML and HTML specifies that the namespace is implied Since the Document class normalizes HTML documents as HTML with the HTML doctype I think it makes sense to also have DocumentloadHTML automatically normalize these attributes We should consider normalizing xmllang to just lang or removing xmllang if the lang attribute is already there The xmlns attribute here is redundant and unnecessary it can simply be removed So given html html xmlns xmllangen langen Should be normalized to just html html langen Do not alter or remove anything below The following sections will be managed by moderators only Acceptance criteria One or more bullet points for acceptance criteria Implementation brief One or more bullet points for how to technically resolve the issue For significant Implementation Design it is ok use a Google document accessible by anyone QA testing instructions One or more bullet points to describe how to test the implementation in QA Demo A video or screenshots demoing the implementation Changelog entry One sentence summarizing the PR to be used in the changelog Feature description When doing an analysis of themes on WordPress I got a DISALLOWEDATTR validation error for the profile attribute on the head element such as code in html head profile The profile attribute on the head element is part of HTML but not HTML The W validator provides this advice According to this SO answer the right way to represent this in HTML is html head link relprofile href This should perhaps be done as part of the normalization done in the Document class appending the link element to the end of the head It could also be done in a separate sanitizer though that may be overkill Since the Document class is normalizing to HTML I think it makes sense to let the class handle the profile transformation Do not alter or remove anything below The following sections will be managed by moderators only Acceptance criteria One or more bullet points for acceptance criteria Implementation brief One or more bullet points for how to technically resolve the issue For significant Implementation Design it is ok use a Google document accessible by anyone QA testing instructions One or more bullet points to describe how to test the implementation in QA Demo A video or screenshots demoing the implementation Changelog entry One sentence summarizing the PR to be used in the changelog Bug Description Adding a WordPresstv video embed via Classic Editor block results in a validation error Post content is as follows Video Was it good Interestingly if the video is added an Embed block then no validation error results This appears to be a bug with AMPWordPressTVEmbedHandler As opposed to using the renderblock filter it should instead using the embedoembedhtml filter Expected Behaviour Please describe clearly and concisely what the expected behaviour should be Steps to reproduce Please provide detailed steps on how to reproduce the bug Provide a URL where the issue can be seen on the frontend when possible otherwise go to View source in the browser and copy all to paste in a Gist and share it Go to Click on Scroll down to See error Screenshots If applicable please add screenshots to help explain your problem Bonus points for videos Additional context Please complete the following information WordPress version Plugin version Gutenberg plugin version if applicable AMP plugin template mode PHP version OS Browser eg chrome safari Device eg iPhone Please add any additional information about the bug Ideal dumping your Site Health information here as well Do not alter or remove anything below The following sections will be managed by moderators only Acceptance criteria One or more bullet points for acceptance criteria Implementation brief One or more bullet points for how to technically resolve the issue For significant Implementation Design it is ok use a Google document accessible by anyone QA testing instructions One or more bullet points to describe how to test the implementation in QA Demo A video or screenshots demoing the implementation Changelog entry One sentence summarizing the PR to be used in the changelog Summary Supersedes This is a major redo of the workspace layering to support new Anatomy of the workspace in designs cc samitron The current state is very preliminary to get the feedback ASAP Many features are still broken The following layering has been implemented WP Story editor This might seem complicated but this is the most straightforward way I see at this moment that supports the needed features while being less fragile overall Key notes here Layers are layered on top of each other using positionabsolute inset All layers use the same gridtemplate to ensure that the positions of the areas always match Lasso layer is at the very bottom to allow lasso to start on the pages area and outside of it Display area is right on top of lasso layer Critically the display area is now clipped to borders overflowhidden And element overflowing off the side of the page is no longer displayed Tools layer NavLayer in code overlays the headers footers menus on top of the display area The event propagation is blocked to avoid lasso Frames selection are on top of both display and tools Per spec frames and selection has to be shown on top of everything else in the workplace ie never clipped The frames and selection are also selectableinteractable outside the page area even if on top of other workspace elements Frames also show outline on hover The gray outline is only for debugging Note that frames are not obscured by other elements either Display templates are split into two categories Display and Frame Display is only to render the element all event handlers are removed Frame would normally only render the outline but it handles all events focus mouse keyboard Edit layer now moves the Edit mode into a separate layer This is done so that the editing element is always on top and we can when needed show graypane over the workspace safeunsafe area etc as requested by the UX You can see the actual layers by changing DEBUGANGLE constant to a nonzero value eg const DEBUGANGLE Checklist My pull request is addressing an open issue please create one otherwise My code is tested and passes existing tests My code follows the Engineering Guidelines updates are often made to the guidelines check it out periodically Feature description Blocked by When font family weight or size is changed from inspector panel or when use is typing the element dimensions might need updating to adjust to the new params For example if the text is taking more room when there previously was we should update the dimensions to fit the text If its taking less room we should also update the dimensions Note that this will need to consider rotationAngle just changing the height and width without position adjustment will make the element slide Please describe clear and concisely which problem the feature would solve or which publisher needs it would address Do not alter or remove anything below The following sections will be managed by moderators only Acceptance criteria When typing in Text element so that the text doesnt fit to the element limits the widthheight are being adjusted When the font familyweightsize is changed the element will adjust its width and height to match the new room the content takes Implementation brief One or more bullet points for how to technically resolve the issue For significant Implementation Design it is ok use a Google document accessible by anyone QA testing instructions One or more bullet points to describe how to test the implementation in QA Demo A video or screenshots demoing the implementation Changelog entry One sentence summarizing the PR to be used in the changelog Bug Description When I have DevTools open and I have Disable Cache checked about of the time that I load paired browsing the AMP version shows the modal The navigated URL is not available for paired browsing If I reload to try again then the issue normally goes away but this is because the issue happens sporadically I can reproduce it both with DevTools open and with doing a hardreload CmdShiftR There appears to be a race condition that is causing the detection in the AMP window to fail or viceversa or rather detection that the page was able to load properly In the console I see an error that may be a clue for what is going on This appears to be due to the fact that the paired browsing scripts are being added with async attributes This is resulting in inconsistent loading order and thus sporadic failures So we need to prevent adding the async attribute on these scripts which probably just means removing it from this line Expected Behaviour Please describe clearly and concisely what the expected behaviour should be Steps to reproduce Enable Transitional mode Open DevTools and Disable Cache Open paired browsing Try reloading times and notice that a couple times the above error is shown Screenshots If applicable please add screenshots to help explain your problem Bonus points for videos Additional context Please complete the following information WordPress version Plugin version Gutenberg plugin version if applicable AMP plugin template mode PHP version OS Browser eg chrome safari Device eg iPhone Please add any additional information about the bug Ideal dumping your Site Health information here as well Do not alter or remove anything below The following sections will be managed by moderators only Acceptance criteria One or more bullet points for acceptance criteria Implementation brief One or more bullet points for how to technically resolve the issue For significant Implementation Design it is ok use a Google document accessible by anyone QA testing instructions One or more bullet points to describe how to test the implementation in QA Demo A video or screenshots demoing the implementation Changelog entry One sentence summarizing the PR to be used in the changelog Summary Please reference the issue this PR addresses Fixes Checklist x My pull request is addressing an open issue please create one otherwise My code is tested and passes existing tests My code follows the Engineering Guidelines updates are often made to the guidelines check it out periodically Feature description Separating this issue from for dividing the tasks into more logical chunks Please describe clear and concisely which problem the feature would solve or which publisher needs it would address Do not alter or remove anything below The following sections will be managed by moderators only Acceptance criteria When resizing a Text element from corners its font size will adjust to fit the text into the box take as much room as possible When resizing a Text element from sides there is no font size adjustment When resizing smaller without scaling the other side will adjust accordingly meaning that if the user is reducing height then the element will compensate by increasing width Implementation brief One or more bullet points for how to technically resolve the issue For significant Implementation Design it is ok use a Google document accessible by anyone QA testing instructions One or more bullet points to describe how to test the implementation in QA Demo A video or screenshots demoing the implementation Changelog entry One sentence summarizing the PR to be used in the changelog 