Hi Chiuki I was wondering is there a way to test in espresso scenarios like chat application where you need two devices one from you send message and on the other you receive the message and also assert for received push notifications Seeking Help I am super excited about the future of Espresso from the recent talks at the Android Dev Summit Would love to see this repo updated with the new AndroidXTest APIs I am running the tests using emulator and I can see a dialog showing after the roatation Here is the screenshot and log I assume its the dialog that causes the app to not able to match id How can we solve this Thanks screenshot androidsupporttestespressoNoMatchingViewException No views in hierarchy found matching with id comsqislandandroidespressorotatescreenidcount View Hierarchy DecorViewid visibilityVISIBLE width height hasfocustrue hasfocusabletrue haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedfalse isselectedfalse layoutparams wrapxwrap grCENTER simadjustpan tyAPPLICATION fmtTRANSLUCENT wanim x f flDIMBEHIND ALTFOCUSABLEIM SPLITTOUCH HARDWAREACCELERATED tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y childcount FrameLayoutid visibilityVISIBLE width height hasfocustrue hasfocusabletrue haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedfalse isselectedfalse layoutparamsandroidwidgetFrameLayoutLayoutParamsb tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y childcount FrameLayoutid resnamecontent visibilityVISIBLE width height hasfocustrue hasfocusabletrue haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedfalse isselectedfalse layoutparamsandroidwidgetFrameLayoutLayoutParams a da tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y childcount AlertDialogLayoutid resnameparentPanel visibilityVISIBLE width height hasfocustrue hasfocusabletrue haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedfalse isselectedfalse layoutparamsandroidwidgetFrameLayoutLayoutParams d f tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y childcount LinearLayoutid resnametopPanel visibilityVISIBLE width height hasfocusfalse hasfocusablefalse haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedfalse isselectedfalse layoutparamsandroidwidgetLinearLayoutLayoutParams defa tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y childcount LinearLayoutid resnametitletemplate visibilityVISIBLE width height hasfocusfalse hasfocusablefalse haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedfalse isselectedfalse layoutparamsandroidwidgetLinearLayoutLayoutParams c a tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y childcount AppCompatImageViewid resnameicon visibilityGONE width height hasfocusfalse hasfocusablefalse haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedtrue isselectedfalse layoutparamsandroidwidgetLinearLayoutLayoutParamscb f c tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y DialogTitleid resnamealertTitle visibilityVISIBLE width height hasfocusfalse hasfocusablefalse haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedfalse isselectedfalse layoutparamsandroidwidgetLinearLayoutLayoutParams tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y textRotate Screen inputtype imetargetfalse haslinksfalse Spaceid resnametitleDividerNoCustom visibilityVISIBLE width height hasfocusfalse hasfocusablefalse haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedfalse isselectedfalse layoutparamsandroidwidgetLinearLayoutLayoutParams f b tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y FrameLayoutid resnamecontentPanel visibilityVISIBLE width height hasfocusfalse hasfocusablefalse haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedfalse isselectedfalse layoutparamsandroidwidgetLinearLayoutLayoutParams a tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y childcount ScrollViewid resnamescrollView visibilityVISIBLE width height hasfocusfalse hasfocusablefalse haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedfalse isselectedfalse layoutparamsandroidwidgetFrameLayoutLayoutParams a tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y childcount LinearLayoutid visibilityVISIBLE width height hasfocusfalse hasfocusablefalse haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedfalse isselectedfalse layoutparamsandroidwidgetFrameLayoutLayoutParamsad c tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y childcount Spaceid resnametextSpacerNoTitle visibilityGONE width height hasfocusfalse hasfocusablefalse haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedtrue isselectedfalse layoutparamsandroidwidgetLinearLayoutLayoutParamsdd tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y AppCompatTextViewid resnamemessage visibilityVISIBLE width height hasfocusfalse hasfocusablefalse haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedfalse isselectedfalse layoutparamsandroidwidgetLinearLayoutLayoutParamsd faaa tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y textDetected problems with API compatibility visit gcodevappcompat for more info inputtype imetargetfalse haslinksfalse Spaceid resnametextSpacerNoButtons visibilityGONE width height hasfocusfalse hasfocusablefalse haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedtrue isselectedfalse layoutparamsandroidwidgetLinearLayoutLayoutParamsf b b tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y FrameLayoutid resnamecustomPanel visibilityGONE width height hasfocusfalse hasfocusablefalse haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedtrue isselectedfalse layoutparamsandroidwidgetLinearLayoutLayoutParamsbff a tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y childcount FrameLayoutid resnamecustom visibilityVISIBLE width height hasfocusfalse hasfocusablefalse haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedtrue isselectedfalse layoutparamsandroidwidgetFrameLayoutLayoutParams tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y childcount ScrollViewid resnamebuttonPanel visibilityVISIBLE width height hasfocustrue hasfocusabletrue haswindowfocustrue isclickablefalse isenabledtrue isfocusedtrue isfocusabletrue islayoutrequestedfalse isselectedfalse layoutparamsandroidwidgetLinearLayoutLayoutParamsb b e tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y childcount ButtonBarLayoutid visibilityVISIBLE width height hasfocusfalse hasfocusabletrue haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedfalse isselectedfalse layoutparamsandroidwidgetFrameLayoutLayoutParamsc a tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y childcount AppCompatButtonid resnamebutton visibilityGONE width height hasfocusfalse hasfocusablefalse haswindowfocustrue isclickabletrue isenabledtrue isfocusedfalse isfocusabletrue islayoutrequestedtrue isselectedfalse layoutparamsandroidwidgetLinearLayoutLayoutParams f e tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y text inputtype imetargetfalse haslinksfalse Spaceid resnamespacer visibilityINVISIBLE width height hasfocusfalse hasfocusablefalse haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedfalse isselectedfalse layoutparamsandroidwidgetLinearLayoutLayoutParamsc ec f tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y AppCompatButtonid resnamebutton visibilityGONE width height hasfocusfalse hasfocusablefalse haswindowfocustrue isclickabletrue isenabledtrue isfocusedfalse isfocusabletrue islayoutrequestedtrue isselectedfalse layoutparamsandroidwidgetLinearLayoutLayoutParams c tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y text inputtype imetargetfalse haslinksfalse AppCompatButtonid resnamebutton visibilityVISIBLE width height hasfocusfalse hasfocusabletrue haswindowfocustrue isclickabletrue isenabledtrue isfocusedfalse isfocusabletrue islayoutrequestedfalse isselectedfalse layoutparamsandroidwidgetLinearLayoutLayoutParams cd tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y textOK inputtype imetargetfalse haslinksfalse ViewStubid resnameactionmodebarstub visibilityGONE width height hasfocusfalse hasfocusablefalse haswindowfocustrue isclickablefalse isenabledtrue isfocusedfalse isfocusablefalse islayoutrequestedtrue isselectedfalse layoutparamsandroidwidgetFrameLayoutLayoutParamscac a tagnull rootislayoutrequestedfalse hasinputconnectionfalse x y at dalviksystemVMStackgetThreadStackTraceNative Method at javalangThreadgetStackTraceThreadjava at androidsupporttestespressobaseDefaultFailureHandlergetUserFriendlyErrorDefaultFailureHandlerjava at androidsupporttestespressobaseDefaultFailureHandlerhandleDefaultFailureHandlerjava at androidsupporttestespressoViewInteractionwaitForAndHandleInteractionResultsViewInteractionjava at androidsupporttestespressoViewInteractioncheckViewInteractionjava at comsqislandespressorotatescreenMainActivityTestnoIncrementRotateScreenMainActivityTestjava at javalangreflectMethodinvokeNative Method at orgjunitrunnersmodelFrameworkMethod runReflectiveCallFrameworkMethodjava at orgjunitinternalrunnersmodelReflectiveCallablerunReflectiveCallablejava at orgjunitrunnersmodelFrameworkMethodinvokeExplosivelyFrameworkMethodjava at orgjunitinternalrunnersstatementsInvokeMethodevaluateInvokeMethodjava at androidsupporttestinternalrunnerjunit statementRunBeforesevaluateRunBeforesjava at androidsupporttestruleActivityTestRuleActivityStatementevaluateActivityTestRulejava at orgjunitrulesRunRulesevaluateRunRulesjava at orgjunitrunnersParentRunnerrunLeafParentRunnerjava at orgjunitrunnersBlockJUnit ClassRunnerrunChildBlockJUnit ClassRunnerjava at orgjunitrunnersBlockJUnit ClassRunnerrunChildBlockJUnit ClassRunnerjava at orgjunitrunnersParentRunner runParentRunnerjava at orgjunitrunnersParentRunner scheduleParentRunnerjava at orgjunitrunnersParentRunnerrunChildrenParentRunnerjava at orgjunitrunnersParentRunneraccess ParentRunnerjava at orgjunitrunnersParentRunner evaluateParentRunnerjava at orgjunitrunnersParentRunnerrunParentRunnerjava at orgjunitrunnersSuiterunChildSuitejava at orgjunitrunnersSuiterunChildSuitejava at orgjunitrunnersParentRunner runParentRunnerjava at orgjunitrunnersParentRunner scheduleParentRunnerjava at orgjunitrunnersParentRunnerrunChildrenParentRunnerjava at orgjunitrunnersParentRunneraccess ParentRunnerjava at orgjunitrunnersParentRunner evaluateParentRunnerjava at orgjunitrunnersParentRunnerrunParentRunnerjava at orgjunitrunnerJUnitCorerunJUnitCorejava at orgjunitrunnerJUnitCorerunJUnitCorejava at androidsupporttestinternalrunnerTestExecutorexecuteTestExecutorjava at androidsupporttestrunnerAndroidJUnitRunneronStartAndroidJUnitRunnerjava at androidappInstrumentationInstrumentationThreadrunInstrumentationjava Been thinking a lot about this recently because Ive seen it in a few projects and Im struggling to see what it offers over a simple Threadsleep The only context I can find is this blog post which simply states We could use SystemClocksleep but that blocks the testing thread This is a strange justification since IdlingResources cause onView and onIdle to block the testing thread and this is wanted and expected behaviour for test code tests are always run synchronously As far as I can tell using this IdlingResource is identical to using a sleep from a thread execution standpoint but the code is more verbose and harder to understand This seems to me like a misuse of IdlingResource and a testing antipattern and it seems to be used in many codebases where a sleep would be simpler Please let me know if theres some other execution property that makes this implementation advantageous Thanks 