 Best Practice Checklist Check these items before submitting a PR See the Contribution Guide for the full detail uris compatible with all clouds Stack China Government Staged artifacts use artifactsLocation artifactsLocationSasToken Use a parameter for resource locations with the defaultValue set to resourceGrouplocation Folder names for artifacts nestedtemplates scripts DSC Use literal values for apiVersion no variables Parameter files GENUNIQUE for value generation and no changemeplease values schema and other uris use https Use uniqueString whenever possible to generate names for resources While this is not required its one of the most common failure points in a deployment Update the metadatajson with the current date For details Please check this box once youve submitted the PR if youve read through the Contribution Guide and best practices checklist Changelog fix BPs and deployment failures SAS Viya Quickstart Template for Azure I am looking for a similar template but for a single machine SMP instead for separate machines for ansible controller and services I dont have any issue with a specific template but rather a problem with one resource type in general Not sure where to report this hope this is the correct repository Im trying to deploy a hostingplan website and keyvault The website has a system assigned identity and the keyvault has an access policy that allows the system assigned identity to read secrets json schema contentVersion parameters skuName type string defaultValue F allowedValues F S hostingPlanName type string defaultValue concathostingplan uniqueStringresourceGroupid appName type string defaultValue app skuCapacity type int defaultValue minValue location typestring defaultValue resourceGrouplocation variables keyvaultName concatvlt uniqueStringparametersappName resources apiVersion name parametershostingPlanName type MicrosoftWebserverfarms location parameterslocation tags displayName HostingPlan sku name parametersskuName capacity parametersskuCapacity properties name parametershostingPlanName apiVersion identity type SystemAssigned name parametersappName type MicrosoftWebsites location parameterslocation dependsOn parametershostingPlanName tags concathiddenrelated resourceIdMicrosoftWebserverfarms parametershostingPlanName empty displayName Website properties name parametersappName serverFarmId resourceIdMicrosoftWebserverfarms parametershostingPlanName name variableskeyvaultName type MicrosoftKeyVaultvaults apiVersion location parameterslocation dependsOn resourceIdMicrosoftWebsites parametersappName properties tenantId referenceconcatMicrosoftWebsites parametersappName providersMicrosoftManagedIdentityIdentitiesdefault PREVIEWtenantId sku family A name standard accessPolicies tenantId referenceconcatMicrosoftWebsites parametersappName providersMicrosoftManagedIdentityIdentitiesdefault PREVIEWtenantId objectId referenceconcatMicrosoftWebsites parametersappName providersMicrosoftManagedIdentityIdentitiesdefault PREVIEWprincipalId permissions secrets get enabledForDeployment false enabledForDiskEncryption false enabledForTemplateDeployment false resources outputs appServicePrincipalId type string value referenceconcatresourceIdMicrosoftWebsites parametersappName providersMicrosoftManagedIdentityIdentitiesdefault PREVIEWprincipalId siteUri type string value referenceconcatMicrosoftWebsites parametersappNamehostnames I would expect the deployment to work on the first run however the access policy produces the following error Deploying the template a second time works as by the the identity is found It seems the access policy is validated before any other resource is created Best Practice Checklist Check these items before submitting a PR See the Contribution Guide for the full detail uris compatible with all clouds Stack China Government Staged artifacts use artifactsLocation artifactsLocationSasToken Use a parameter for resource locations with the defaultValue set to resourceGrouplocation Folder names for artifacts nestedtemplates scripts DSC Use literal values for apiVersion no variables Parameter files GENUNIQUE for value generation and no changemeplease values schema and other uris use https Use uniqueString whenever possible to generate names for resources While this is not required its one of the most common failure points in a deployment Update the metadatajson with the current date For details x Please check this box once youve submitted the PR if youve read through the Contribution Guide and best practices checklist Changelog Template to deploy HyperV Host in Azure servicebusnamespacevnet Issue Details Readme points to docs at which show how to create firewall rules by creating a MicrosoftServiceBusnamespacesnetworkruleset resource However the template creates a MicrosoftServiceBusnamespacesVirtualNetworkRules resource instead for the same purpose This is confusing whats the right approach Best Practice Checklist Check these items before submitting a PR See the Contribution Guide for the full detail uris compatible with all clouds Stack China Government Staged artifacts use artifactsLocation artifactsLocationSasToken Use a parameter for resource locations with the defaultValue set to resourceGrouplocation Folder names for artifacts nestedtemplates scripts DSC Use literal values for apiVersion no variables Parameter files GENUNIQUE for value generation and no changemeplease values schema and other uris use https Use uniqueString whenever possible to generate names for resources While this is not required its one of the most common failure points in a deployment Update the metadatajson with the current date For details Please check this box once youve submitted the PR if youve read through the Contribution Guide and best practices checklist Changelog Best Practice Checklist Check these items before submitting a PR See the Contribution Guide for the full detail uris compatible with all clouds Stack China Government Staged artifacts use artifactsLocation artifactsLocationSasToken Use a parameter for resource locations with the defaultValue set to resourceGrouplocation Folder names for artifacts nestedtemplates scripts DSC Use literal values for apiVersion no variables Parameter files GENUNIQUE for value generation and no changemeplease values schema and other uris use https Use uniqueString whenever possible to generate names for resources While this is not required its one of the most common failure points in a deployment Update the metadatajson with the current date For details x Please check this box once youve submitted the PR if youve read through the Contribution Guide and best practices checklist Changelog Initial Version Deploy an Internal APIM with WAF v and SSL endpoints Prerequisites DNS zone and the associated certificate in a Keyvault APIM is bound to a App Insights APIM and WAF logs are sent to a Log Analytics NSG rules are defined for both subnets Create Budget to Track Cost or Usage Issue Details The template works the first time you deploy it However its not apparent how to redeploy it as part of a larger template in a CI pipeline A static start date cannot be used as start date must be within the current timegrain period but a dynamic start date results in error Budget start date cannot be updated Repro steps if necessary delete otherwise Run the template Wait for timegrain period to roll over Rerun the template There is no possible successful value for start date MESSAGE FROM ADMIN DELETE BEFORE SUBMITTING Sorry to hear you had a bad experience with one of the templates worried But in case youre just asking a question were happy to help You can also check if the question might already have been asked here Weve created an outline of recommended sections to fill out that will help make this Pull Request awesome MESSAGE FROM ADMIN DELETE BEFORE SUBMITTING Template Name goes here Template link goes here Issue Details Repro steps if necessary delete otherwise Best Practice Checklist Check these items before submitting a PR See the Contribution Guide for the full detail uris compatible with all clouds Stack China Government Staged artifacts use artifactsLocation artifactsLocationSasToken Use a parameter for resource locations with the defaultValue set to resourceGrouplocation Folder names for artifacts nestedtemplates scripts DSC Use literal values for apiVersion no variables Parameter files GENUNIQUE for value generation and no changemeplease values schema and other uris use https Use uniqueString whenever possible to generate names for resources While this is not required its one of the most common failure points in a deployment Update the metadatajson with the current date For details Please check this box once youve submitted the PR if youve read through the Contribution Guide and best practices checklist Changelog 