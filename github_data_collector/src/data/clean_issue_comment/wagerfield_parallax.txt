Hi First of all thank you for making this code public great work I was trying to use it on my university project and I was wondering how to make it receive the values of how much youve scrolled vertical and horizontal instead of cursor coordinates and have it act on scroll instead of on mouse move Any help would be good Thank you Im now trying this plugin in for the first time Assume we have this html content as following div idscene div datadepth My first Layerdiv div datadepth My second Layerdiv div I found that the animation only works with the direct child but im looking forward to use the animation with more deeper child like the following div idscene div classlevel div classlevel div datadepth My first Layerdiv div datadepth My second Layerdiv div classlevel div datadepth My first Layerdiv div datadepth My second Layerdiv div div div div So how to implement something like that Hi there Im trying to get parallax to work on Iphone with IOS Ive set up the permissions no problem and parallax is started but for some reason only the x axis responds to the gyroscope Here is the relevant code var dot dot var scene documentgetElementByIdscene if typeof DeviceOrientationEventrequestPermission function documentaddEventListenerclick if locationprotocol https locationhref https windowlocationhrefsubstring windowlocationprotocollength DeviceOrientationEventrequestPermission thenresponse if response granted windowaddEventListenerdevicemotion e dotattrdatadepth var parallaxInstance new Parallaxscene catchconsoleerror scene position relative width vw height vw zindex dot position absolute width height backgroundimage urldotsvg backgroundrepeat norepeat backgroundposition center webkituserselect none mozuserselect none msuserselect none userselect none pointerevents none media maxwidth px scene width vw height vh left vw top vh dot webkittransition s top easeout s left easeout otransition s top easeout s left easeout transition s top easeout s left easeout div id scene datarelativeinputtrue div datadepth classdot id dotdiv div Thanks in advance Tim Mt friend and I are working on making a website for a school project and I wanted to add mouse parallax I am very new to HTML and CSS and we cant figure our how to make it so just the background has parallax and it sits behind everything else Indexhtmlzip I try to use but it doesnt work Parallaxjs author Matthew Wagerfield wagerfield description Creates a parallax effect between an array of layers driving the motion from the gyroscope output of a smartdevice If no gyroscope is available the cursor position is used functionwindow document undefined Strict Mode use strict Constants var NAME Parallax var MAGICNUMBER var DEFAULTS relativeInput false clipRelativeInput false calibrationThreshold calibrationDelay supportDelay calibrateX false calibrateY true invertX false invertY true limitX false limitY false scalarX scalarY frictionX frictionY originX originY pointerEvents true precision function Parallaxelement options DOM Context thiselement element thislayers elementgetElementsByClassNamelayer Data Extraction var data calibrateX thisdatathiselement calibratex calibrateY thisdatathiselement calibratey invertX thisdatathiselement invertx invertY thisdatathiselement inverty limitX thisdatathiselement limitx limitY thisdatathiselement limity scalarX thisdatathiselement scalarx scalarY thisdatathiselement scalary frictionX thisdatathiselement frictionx frictionY thisdatathiselement frictiony originX thisdatathiselement originx originY thisdatathiselement originy pointerEvents thisdatathiselement pointerevents precision thisdatathiselement precision Delete Null Data Values for var key in data if data key null delete data key Compose Settings Object thisextendthis DEFAULTS options data States thiscalibrationTimer null thiscalibrationFlag true thisenabled false thisdepthsX thisdepthsY thisraf null Element Bounds thisbounds null thisex thisey thisew thiseh Element Center thisecx thisecy Element Range thiserx thisery Calibration thiscx thiscy Input thisix thisiy Motion thismx thismy Velocity thisvx thisvy Callbacks thisonMouseMove thisonMouseMovebindthis thisonDeviceOrientation thisonDeviceOrientationbindthis thisonOrientationTimer thisonOrientationTimerbindthis thisonCalibrationTimer thisonCalibrationTimerbindthis thisonAnimationFrame thisonAnimationFramebindthis thisonWindowResize thisonWindowResizebindthis Initialise thisinitialise Parallaxprototypeextend function if argumentslength var master arguments for var i l argumentslength i l i var object arguments i for var key in object master key object key Parallaxprototypedata functionelement name return thisdeserializeelementgetAttributedataname Parallaxprototypedeserialize functionvalue if value true return true else if value false return false else if value null return null else if isNaNparseFloatvalue isFinitevalue return parseFloatvalue else return value ParallaxprototypecamelCase functionvalue return valuereplaceg functionmatch character return character charactertoUpperCase ParallaxprototypetransformSupport functionvalue var element documentcreateElementdiv var propertySupport false var propertyValue null var featureSupport false var cssProperty null var jsProperty null for var i l thisvendorslength i l i if thisvendors i null cssProperty thisvendors i transform jsProperty thisvendors i Transform else cssProperty transform jsProperty transform if elementstyle jsProperty undefined propertySupport true break switchvalue case D featureSupport propertySupport break case D if propertySupport var body documentbody documentcreateElementbody var documentElement documentdocumentElement var documentOverflow documentElementstyleoverflow var isCreatedBody false if documentbody isCreatedBody true documentElementstyleoverflow hidden documentElementappendChildbody bodystyleoverflow hidden bodystylebackground bodyappendChildelement elementstyle jsProperty translate d px px px propertyValue windowgetComputedStyleelementgetPropertyValuecssProperty featureSupport propertyValue undefined propertyValuelength propertyValue none documentElementstyleoverflow documentOverflow bodyremoveChildelement if isCreatedBody bodyremoveAttributestyle bodyparentNoderemoveChildbody break return featureSupport Parallaxprototypeww null Parallaxprototypewh null Parallaxprototypewcx null Parallaxprototypewcy null Parallaxprototypewrx null Parallaxprototypewry null Parallaxprototypeportrait null Parallaxprototypedesktop navigatoruserAgentmatchiPhoneiPodiPadAndroidBlackBerryBB mobitabletopera mininexus i Parallaxprototypevendors null webkitwebkit mozMoz oO msms ParallaxprototypemotionSupport windowDeviceMotionEvent ParallaxprototypeorientationSupport windowDeviceOrientationEvent ParallaxprototypeorientationStatus ParallaxprototypemotionStatus ParallaxprototypepropertyCache Parallaxprototypeinitialise function if Parallaxprototypetransform DSupport undefined Parallaxprototypetransform DSupport ParallaxprototypetransformSupport D Parallaxprototypetransform DSupport ParallaxprototypetransformSupport D Configure Context Styles if thistransform DSupport thisacceleratethiselement var style windowgetComputedStylethiselement if stylegetPropertyValueposition static thiselementstyleposition relative Pointer events ifthispointerEvents thiselementstylepointerEvents none Setup thisupdateLayers thisupdateDimensions thisenable thisqueueCalibrationthiscalibrationDelay ParallaxprototypeupdateLayers function Cache Layer Elements thislayers thiselementgetElementsByClassNamelayer thisdepthsX thisdepthsY Configure Layer Styles for var i l thislayerslength i l i var layer thislayers i if thistransform DSupport thisacceleratelayer layerstyleposition i absolute relative layerstyledisplay block layerstyleleft layerstyletop Cache Layer Depth Graceful fallback on depth if depthx or depthy is absent var depth thisdatalayer depth thisdepthsXpushthisdatalayer depthx depth thisdepthsYpushthisdatalayer depthy depth ParallaxprototypeupdateDimensions function thisww windowinnerWidth thiswh windowinnerHeight thiswcx thisww thisoriginX thiswcy thiswh thisoriginY thiswrx Mathmaxthiswcx thisww thiswcx thiswry Mathmaxthiswcy thiswh thiswcy ParallaxprototypeupdateBounds function thisbounds thiselementgetBoundingClientRect thisex thisboundsleft thisey thisboundstop thisew thisboundswidth thiseh thisboundsheight thisecx thisew thisoriginX thisecy thiseh thisoriginY thiserx Mathmaxthisecx thisew thisecx thisery Mathmaxthisecy thiseh thisecy ParallaxprototypequeueCalibration functiondelay clearTimeoutthiscalibrationTimer thiscalibrationTimer setTimeoutthisonCalibrationTimer delay Parallaxprototypeenable function if thisenabled thisenabled true if thisdesktop thisorientationSupport thisportrait null windowaddEventListenerdeviceorientation thisonDeviceOrientation setTimeoutthisonOrientationTimer thissupportDelay else if thisdesktop thismotionSupport thisportrait null windowaddEventListenerdevicemotion thisonDeviceMotion setTimeoutthisonMotionTimer thissupportDelay else thiscx thiscy thisportrait false windowaddEventListenermousemove thisonMouseMove windowaddEventListenerresize thisonWindowResize thisraf requestAnimationFramethisonAnimationFrame Parallaxprototypedisable function if thisenabled thisenabled false if thisorientationSupport windowremoveEventListenerdeviceorientation thisonDeviceOrientation else if thismotionSupport windowremoveEventListenerdevicemotion thisonDeviceMotion else windowremoveEventListenermousemove thisonMouseMove windowremoveEventListenerresize thisonWindowResize cancelAnimationFramethisraf Parallaxprototypecalibrate functionx y thiscalibrateX x undefined thiscalibrateX x thiscalibrateY y undefined thiscalibrateY y Parallaxprototypeinvert functionx y thisinvertX x undefined thisinvertX x thisinvertY y undefined thisinvertY y Parallaxprototypefriction functionx y thisfrictionX x undefined thisfrictionX x thisfrictionY y undefined thisfrictionY y Parallaxprototypescalar functionx y thisscalarX x undefined thisscalarX x thisscalarY y undefined thisscalarY y Parallaxprototypelimit functionx y thislimitX x undefined thislimitX x thislimitY y undefined thislimitY y Parallaxprototypeorigin functionx y thisoriginX x undefined thisoriginX x thisoriginY y undefined thisoriginY y Parallaxprototypeclamp functionvalue min max value Mathmaxvalue min value Mathminvalue max return value Parallaxprototypecss functionelement property value var jsProperty thispropertyCache property if jsProperty for var i l thisvendorslength i l i if thisvendors i null jsProperty thiscamelCasethisvendors i property else jsProperty property if elementstyle jsProperty undefined thispropertyCache property jsProperty break elementstyle jsProperty value Parallaxprototypeaccelerate functionelement thiscsselement transform translate d rotate deg thiscsselement transformstyle preserve d thiscsselement backfacevisibility hidden ParallaxprototypesetPosition functionelement x y x xtoFixedthisprecision px y ytoFixedthisprecision px if thistransform DSupport thiscsselement transform translate dxy else if thistransform DSupport thiscsselement transform translatexy else elementstyleleft x elementstyletop y ParallaxprototypeonOrientationTimer function if thisorientationSupport thisorientationStatus thisdisable thisorientationSupport false thisenable ParallaxprototypeonMotionTimer function if thismotionSupport thismotionStatus thisdisable thismotionSupport false thisenable ParallaxprototypeonCalibrationTimer function thiscalibrationFlag true ParallaxprototypeonWindowResize function thisupdateDimensions ParallaxprototypeonAnimationFrame function thisupdateBounds var dx thisix thiscx var dy thisiy thiscy if Mathabsdx thiscalibrationThreshold Mathabsdy thiscalibrationThreshold thisqueueCalibration if thisportrait thismx thiscalibrateX dy thisiy thismy thiscalibrateY dx thisix else thismx thiscalibrateX dx thisix thismy thiscalibrateY dy thisiy thismx thisew thisscalarX thismy thiseh thisscalarY if isNaNparseFloatthislimitX thismx thisclampthismx thislimitX thislimitX if isNaNparseFloatthislimitY thismy thisclampthismy thislimitY thislimitY thisvx thismx thisvx thisfrictionX thisvy thismy thisvy thisfrictionY for var i l thislayerslength i l i var layer thislayers i var depthX thisdepthsX i var depthY thisdepthsY i var xOffset thisvx depthX thisinvertX var yOffset thisvy depthY thisinvertY thissetPositionlayer xOffset yOffset thisraf requestAnimationFramethisonAnimationFrame Parallaxprototyperotate functionbetagamma Extract Rotation var x eventbeta MAGICNUMBER var y eventgamma MAGICNUMBER Detect Orientation Change var portrait thiswh thisww if thisportrait portrait thisportrait portrait thiscalibrationFlag true Set Calibration if thiscalibrationFlag thiscalibrationFlag false thiscx x thiscy y Set Input thisix x thisiy y ParallaxprototypeonDeviceOrientation functionevent Validate environment and event properties var beta eventbeta var gamma eventgamma if thisdesktop beta null gamma null Set orientation status thisorientationStatus thisrotatebetagamma ParallaxprototypeonDeviceMotion functionevent Validate environment and event properties var beta eventrotationRatebeta var gamma eventrotationRategamma if thisdesktop beta null gamma null Set motion status thismotionStatus thisrotatebetagamma ParallaxprototypeonMouseMove functionevent Cache mouse coordinates var clientX eventclientX var clientY eventclientY Calculate Mouse Input if thisorientationSupport thisrelativeInput Clip mouse coordinates inside element bounds if thisclipRelativeInput clientX MathmaxclientX thisex clientX MathminclientX thisex thisew clientY MathmaxclientY thisey clientY MathminclientY thisey thiseh Calculate input relative to the element thisix clientX thisex thisecx thiserx thisiy clientY thisey thisecy thisery else Calculate input relative to the window thisix clientX thiswcx thiswrx thisiy clientY thiswcy thiswry Expose Parallax window NAME Parallax window document How would I use event listeners to disable this script when the window is not the focus And rerun the script when the window becomes active I guess a more accurate would even be to reset the animation each time the window comes back into focus I know the configuration option HoverOnly works for a desktop but I cannot seem to get it working on a mobile no cursor which is why Ive thought of this solution This is what I have added so far script typetextjavascript var count var myInterval Active windowaddEventListenerfocus startTimer Inactive windowaddEventListenerblur stopTimer script I have absolute positioned layers but the script sets the position to relative and top and left for all layers i had to change updateLayers function to remove this behavior Does it support absolute positioned layers When zooming page with parallax in ios safari occurring crash of page It definitely happens on iPhone XS Max ios and iPhone X ios Screenshots and video When you click the round icon nothing happens in Firefox