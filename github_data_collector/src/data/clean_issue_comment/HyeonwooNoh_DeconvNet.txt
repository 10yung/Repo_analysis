I was trying to convert deconvnet caffe model to keras with tensorflow backend I only transpose convolutional layer weights since I thought caffe and tensorflow use correlation However I believe Ive got stuck with probably batch normalization layers Im extracting bn weights but I dont know if they are required to be rotated or something else when using with keras batch normalization layer Until now Ive tried to use them by reshaping and setting to gamma and beta variables at keras batch norm layer There are four numbers in each row in the DeconvNetdataimagesetsstage trainimgsettraintxt What do these four numbers stand for I try to train DeconvNet in my own dataset So how to get these numbers Thanks VOC SEGAUGimages png VOC SEGAUGsegmentations png VOC SEGAUGimages png VOC SEGAUGsegmentations png What do these four numbers stand for Why is the ensemble From your paper I get mean Thanks for making your work available deeply appreciated Im hoping to fine tune your pretrained DeconvNet but I noticed that stage make BN layers testable Hence I assume that I should not load DeconvNettrainvalinferencecaffemodel straightaway and starts the training but Im not sure Please let me know if my concern is valid if it does can you please upload the caffemodel after stage training Thanks a lot So I setup everything and when I run the training starttrainsh I get the out of memory error Check failed error cudaSuccess vs out of memory I have GB on my GPU and constantly watching its memoryusage I even tried setting the batchsize to for both training and testing None of these helped and I still receive this error Since I get passed the network initialization and the initial memory size check my guess is something is going on in the IMAGESEGDATA layer Are you loading all the data into the GPU memory at the very beginning to reduce disk access I use the Makefileconfig copying from my machinewhich compiling successfully on the initial version of caffe but when it goes on the modified versionit made mistakes like this Makefile recipe for target buildreleasesrccaffelayerseuclideanlosslayero failed make buildreleasesrccaffelayerseuclideanlosslayero Error and when I got into that directoryusing find command shengML DeconvNetcaffe find DeconvNetcaffe name euclideanlosslayero shengML DeconvNetcaffe I can not find the euclideanlosslayeroAny mistakes I make Hi Thanks for releasing your excellent work I would like to directly use the results of stage training without the further stages I attempted to get the output using the following prototxt DeconvNetinferencedeployprototxt caffemodel snapshotstage trainiter caffemodel net caffeNetprototxtcaffemodel im Imageopenimagename im imresizedimsImageANTIALIAS in nparrayim dtypenpfloat in in in nparray in intranspose netblobs data reshape inshape netblobs data data in run net and take argmax for prediction netforward out netblobs segscore data argmaxaxis result Imagefromarrayoutastypenpuint resultsaveoutname but so far get only images with all pixels Is there something else I need to do This script with minor changes works for the fcn segmentations Hello My issue is I want to detect tiny objects in images eg eyes and trying to do so always the network learns to predict background This indeed is about the of the image so the prediction is pretty accurate I tried the same trick as yours at stage using cropped images extracting all eyes on each image Here the background is around of the image but at training stage learns to predict all image as background again I also have different classes all of these are little objects on the image Do you think your architecture is suitable for these kind of problems Exist any chance to penalize the misclassification of others categories except background Hi I have run your rundemom successfully and got the final EDeconvNetCRF result I am studying your method now and I have two questions Qustion Though I have downloaded the code producing edgebox object proposal and got the object proposal I still cannot figure out how the edgeboxcached produces Qustion I cannot find out why there are negative coordinates in object proposals in the stage training The negative coordinates is in stage trainimgsettraintxt or stage trainimgsetvaltxt part of them are in the following VOC SEGAUGimages png VOC SEGAUGsegmentations png VOC SEGAUGimages png VOC SEGAUGsegmentations png VOC SEGAUGimages png VOC SEGAUGsegmentations png VOC SEGAUGimages png VOC SEGAUGsegmentations png Thank you Lili Zhang Hi I am trying to rundemom but while executing MEXfile segmentation violation is detected whole error message is displayed lower The error appears during execution of command caffeinit configPathCNNmodelproto configPathCNNmodeldata from cacheFCN sresultsm Both variables configPathCNNmodelproto and configPathCNNmodeldata contain correct path to model and its definition I have successfully installed using Matlab R a Ubuntu modified version of caffe without any complications make all make test make runtest make matcaffe I have also set environmental variables in bashrc and run bashrc before executing rundemom bash export CAFFEROOThomemartinDeconvNetcaffe export CAFFEPYTHONPATHhomemartinDeconvNetcaffepython export PYTHONPATHhomemartinDeconvNetcaffepythonPYTHONPATH export LDLIBRARYPATHhomemartinDeconvNetcaffebuildlibLDLIBRARYPATH I know that the code was tested only with Matlab b but since the compilation using older version of Matlab was successful I dont think that would be a reason for segmentation violation I tried to load model and its definition using python interface but the modified version of caffe from HyeonwooNoh seems to be a bit older so it would need to be modified according to current master branch of caffe and in this I still havent succeed Questions Does anybody know what could cause segmentation violation How to easily adapt code in order to be able to use python interface Thank you Martin Segmentation violation detected at Wed Dec Configuration Crash Decoding Disabled Current Visual None Default Encoding UTF GNU C Library stable MATLAB Root usrlocalMATLABR a MATLAB Version R a Operating System Linux generic Ubuntu SMP Fri Aug UTC x Processor ID x Family Model Stepping GenuineIntel Virtual Machine Java b with Sun Microsystems Inc Java HotSpotTM Bit Server VM mixed mode Window System No active display Fault Count Abnormal termination Segmentation violation Register State from fault RAX RBX RCX RDX RSP f adf d RBP f c RSI RDI f d R R f R b fbc R e e R R R f fc c ee R f adf a RIP f EFL CS FS GS Stack Trace from fault x f fc e usrlocalMATLABR abinglnxa libmwflso ZN fl diag stacktracebase captureERKNS threadcontextEm x f fc d usrlocalMATLABR abinglnxa libmwflso x f fc b b usrlocalMATLABR abinglnxa libmwflso ZN fl diag terminatelogEPKcRKNS threadcontextE x f eb usrlocalMATLABR abinglnxa libmwmcrso ZN fl diag terminatelogEPKcPK ucontext x f eb fd usrlocalMATLABR abinglnxa libmwmcrso x f eb d usrlocalMATLABR abinglnxa libmwmcrso x f eb usrlocalMATLABR abinglnxa libmwmcrso x f eb f usrlocalMATLABR abinglnxa libmwmcrso x f eb f usrlocalMATLABR abinglnxa libmwmcrso x f d libx linuxgnulibpthreadso x f usrlocalcudalib libcurandso curandCreateGenerator x f f c homemartinmlDeconvNetinferencecaffematlabcaffecaffemexa x f f d b homemartinmlDeconvNetinferencecaffematlabcaffecaffemexa x f f ecb f homemartinmlDeconvNetinferencecaffematlabcaffecaffemexa x f f f df homemartinmlDeconvNetinferencecaffematlabcaffecaffemexa x f f f cc homemartinmlDeconvNetinferencecaffematlabcaffecaffemexa x f f cfa homemartinmlDeconvNetinferencecaffematlabcaffecaffemexa x f f d homemartinmlDeconvNetinferencecaffematlabcaffecaffemexa mexFunction x f a cca usrlocalMATLABR abinglnxa libmexso mexRunMexFile x f a f usrlocalMATLABR abinglnxa libmexso x f a de usrlocalMATLABR abinglnxa libmexso x f e bf usrlocalMATLABR abinglnxa libmwmdispatcherso ZN Mfhfile dispatchfhEiPP mxArraytagiS x f e usrlocalMATLABR abinglnxa libmwminterpreterso x f e usrlocalMATLABR abinglnxa libmwminterpreterso x f e abe usrlocalMATLABR abinglnxa libmwminterpreterso x f e usrlocalMATLABR abinglnxa libmwminterpreterso x f e usrlocalMATLABR abinglnxa libmwminterpreterso x f e a usrlocalMATLABR abinglnxa libmwminterpreterso x f e bf usrlocalMATLABR abinglnxa libmwmdispatcherso ZN Mfhfile dispatchfhEiPP mxArraytagiS x f e usrlocalMATLABR abinglnxa libmwminterpreterso x f e d usrlocalMATLABR abinglnxa libmwminterpreterso x f e a e usrlocalMATLABR abinglnxa libmwminterpreterso x f e usrlocalMATLABR abinglnxa libmwminterpreterso x f e usrlocalMATLABR abinglnxa libmwminterpreterso x f e a usrlocalMATLABR abinglnxa libmwminterpreterso x f e bf usrlocalMATLABR abinglnxa libmwmdispatcherso ZN Mfhfile dispatchfhEiPP mxArraytagiS x f e usrlocalMATLABR abinglnxa libmwminterpreterso x f e d usrlocalMATLABR abinglnxa libmwminterpreterso x f e a e usrlocalMATLABR abinglnxa libmwminterpreterso x f e usrlocalMATLABR abinglnxa libmwminterpreterso x f e usrlocalMATLABR abinglnxa libmwminterpreterso x f e a usrlocalMATLABR abinglnxa libmwminterpreterso x f e bf usrlocalMATLABR abinglnxa libmwmdispatcherso ZN Mfhfile dispatchfhEiPP mxArraytagiS x f e b usrlocalMATLABR abinglnxa libmwminterpreterso x f e c usrlocalMATLABR abinglnxa libmwminterpreterso x f e d f usrlocalMATLABR abinglnxa libmwminterpreterso x f e dbb usrlocalMATLABR abinglnxa libmwminterpreterso x f ed ade usrlocalMATLABR abinglnxa libmwbridgeso x f ed e usrlocalMATLABR abinglnxa libmwbridgeso mnParser x f eafbde usrlocalMATLABR abinglnxa libmwmcrso ZN mcrInstance mnParseroninterpreterthreadEv x f eade a usrlocalMATLABR abinglnxa libmwmcrso x f eade usrlocalMATLABR abinglnxa libmwmcrso x f f usrlocalMATLABR abinglnxa libmwservicesso x f f usrlocalMATLABR abinglnxa libmwservicesso x f f ebc usrlocalMATLABR abinglnxa libmwservicesso x f fd usrlocalMATLABR abinglnxa libmwuixso x f f a usrlocalMATLABR abinglnxa libmwservicesso ZSt foreachIN gnucxx normaliteratorIPN boost weakptrIN sysq wsppeHookEEESt vectorIS SaIS EEEENS duringFIS NS sharedptrIS EEEEET TSHSG x f f aab usrlocalMATLABR abinglnxa libmwservicesso x f f f usrlocalMATLABR abinglnxa libmwservicesso Z svWSProcessPendingEventsiib x f eadd f usrlocalMATLABR abinglnxa libmwmcrso x f eaddc b usrlocalMATLABR abinglnxa libmwmcrso x f eaddd usrlocalMATLABR abinglnxa libmwmcrso x f d e libx linuxgnulibpthreadso x f ce b d libx linuxgnulibcso clone This error was detected while a MEXfile was running If the MEXfile is not an official MathWorks function please examine its source code for errors Please consult the External Interfaces Guide for information on debugging MEXfiles 