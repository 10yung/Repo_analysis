 Proposed changes Converted spaces to tabs in all Dockerfiles for consistency Building with BUILDINCONTAINER now uses a multi stage docker build instead of using volumes Checklist Before creating a PR run through this checklist and mark each as complete x I have read the CONTRIBUTING doc x I have checked that all unit tests pass after adding my changes x I have updated necessary documentation x I have rebased my branch onto master x I will ensure my PR is targeting the master branch and pulling from my branch from my own fork Describe the bug I followed the steps outlined here to install nginx ingress controller in Kubernetes v I get error when i add the ingress resource Please advice To Reproduce Install ingress controller as outline above install app services and ingress with this command kubectl create f cafeyaml kubectl create f ingressyaml cafeyaml apiVersion appsv kind Deployment metadata name tea spec selector matchLabels app tea replicas template metadata labels app tea spec containers name tea image nginxdemoshello ports containerPort apiVersion v kind Service metadata name teasvc labels app tea spec ports port targetPort protocol TCP name http selector app tea apiVersion appsv kind Deployment metadata name coffee spec selector matchLabels app coffee replicas template metadata labels app coffee spec containers name coffee image nginxdemoshello ports containerPort apiVersion v kind Service metadata name coffeesvc labels app coffee spec ports port targetPort protocol TCP name http selector app coffee ingressyaml apiVersion extensionsv beta kind Ingress metadata name cafeingress spec rules host mydomaincom http paths path tea backend serviceName teasvc servicePort path coffee backend serviceName coffeesvc servicePort Expected behavior I was expecting ingress resource to be added successfully but i see errors in the ingress controller Errors W controllergo Error retrieving endpoints for the service teasvc No endpoints for target port in service teasvc W controllergo Error retrieving endpoints for the service coffeesvc No endpoints for target port in service coffeesvc notice signal process started I eventgo Eventv ObjectReferenceKindIngress Namespacedefault Namecafeingress UIDce a fe c caa ab abe APIVersionextensionsv beta ResourceVersion FieldPath type Warning reason AddedOrUpdatedWithError Configuration for defaultcafeingress was added or updated but not applied Error reloading NGINX for defaultcafeingress could not get newest config version could not get expected version notice signal process started E controllergo Error updating endpoints for defaultcafeingress Error reloading NGINX when updating endpoints could not get newest config version could not get expected version Your environment Kubernetes v Version of the Ingress Controller release version or a specific commit edge Version of Kubernetes v Kubernetes platform eg Minikube or GCP Kubeadm Using NGINX or NGINX Plus NGINX Additional context Add any other context about the problem here Any log files you want to share We have upgraded to version Running IC container as nginx user We have a use case where we want to reload nginx after a particular scenario When we run etcinitdnginx reload we get below error FAIL Reloading nginx nginx failed I saw the doreload in etcinitdnginx has below code doreload startstopdaemon stop signal HUP quiet pidfile PIDFILE RETVAL return RETVAL PIDFILE points to PIDFILEPIDFILEvarrunnginxpid However there is no nginxpid in varrun Instead its been changed to varlibnginx Is this the reason it fails to reload or is there any other reason possible Describe the bug Ingress is unable to redirect the traffic when we use multiple path eg authservice another path is saml to redirect to the same serviceName We are getting a error To Reproduce Steps to reproduce the behavior kubectl get svc uawauthserviceservice n uawdev NAME TYPE CLUSTERIP EXTERNALIP PORTS AGE uawauthserviceservice NodePort none TCP m apiVersion extensionsv beta kind Ingress metadata annotations externaldnsalphakubernetesiohostname devexamplecom creationTimestamp T Z generation name uawfileidserviceserviceingress namespace uawdev resourceVersion selfLink apisextensionsv beta namespacesuawdevingressesuawfileidserviceserviceingress uid a b b ea a feffff bf spec rules host devexamplecom http paths backend serviceName uawauthserviceservice servicePort path authservice backend serviceName uawauthserviceservice servicePort path saml Login to devexamplecomauthservicecallhello redirect to SSO page for authentication once authentication is done it is redirected to with a error Expected behavior Display a hello page Your environment Version of the Ingress Controller release version or a specific commit Could not find the version using nginxingresscontroller version Version of Kubernetes OKE v el Kubernetes platform eg Minikube or GCP Bare Metal Using NGINX or NGINX Plus Nginx Jan GET authservicecallhello HTTP Mozilla Windows NT Win x AppleWebKit KHTML like Gecko Chrome Safari Jan POST samlSSOaliasdevexamplecom HTTP Mozilla Windows NT Win x AppleWebKit KHTML like Gecko Chrome Safari Jan GET samlSSOaliasdevexamplecom HTTP Mozilla Windows NT Win x AppleWebKit KHTML like Gecko Chrome Safari Is there a way to use an annotation like serversnippets to remove a default ingress configuration For instance by default an nginx config is setting listen proxyprotocol If I wanted to remove this and put in listen is there a simple way to do this I wish the serversnippets would automatically overwrite any similar configs but it doesnt appear to do that We are upgrading from to We need to run container as Root as we have an initd service script which needs root permission Is it possible to run container as root but run nginx master as nginx instead of root looks like worker processes are already running as nginx Helm Chart version Changes done in Ingressyaml does not get affected in etcnginxnginxconf inside the pod How to confirm whether the annotations that I apply are actually getting implemented in the pod Describe the bug Regular expressions that contains not supported in path or routes and subroutes in VirtualServer and VirtualServerRoute resources To Reproduce Deploy yamls apiVersion k snginxorgv kind VirtualServer metadata name cafe namespace default spec host cafeexamplecom upstreams name tea service teasvc port routes path tea action pass tea path coffee route defaultcoffee apiVersion k snginxorgv kind VirtualServerRoute metadata name coffee namespace default spec host cafeexamplecom upstreams name latte service lattesvc port name espresso service espressosvc port subroutes path coffeelatte its works action pass latte path coffee latte americano it isnt working action pass espresso View logs on ingresscontroller pod See error I controllergo Skipping invalid VirtualServerRoute defaultcoffee specsubroutes path Invalid value coffee latte americano must be a valid regular expression error parsing regexp invalid or unsupported Perl syntax Expected behavior All regular expressions that work in bare nginx must work in path Your environment Version of the Ingress Controller release version or a specific commit Version of Kubernetes Kubernetes platform eg Minikube or GCP bare kubernetes Using NGINX or NGINX Plus NGINX Describe the bug I need to deploy the IngressController using Deployment and Service for Jenkins on premise When I deploy the service using daemonset works fine But when I use deployment and NodePort the Ingress doesnt work properly Logs are not showing any info so maybe the nginx config is generated the wrong way To Reproduce Steps to reproduce the behaviour Clone Repo Add wildcardtlssecretPODNAMESPACEdefaultwildcardsecret in specargs at deploymentnginxingressyaml Im using an internal cert as a wildcard Create the mentioned secret correctly Apply nsandsa defaultserversecret nginxconfig rbac customresourcedefinitions deploymentnginsingressyaml and servicenodeportyaml Create an Ingress sample that works when using daemonset Receiving network violation in browser Expected behaviour able to interact with the service that ingress sets Your environment Version of the Ingress Controller latest in master Version of Kubernetes Kubernetes platform eg Minikube or GCP on premise KTHW Using NGINX or NGINX Plus NGINX Additional context I can send nginxconf o logs if required but they dont seem incorrect Hi Does the ingress controller has now support for regex in paths is the same request but in OPEN state was it developed and and if yes Does it require any annotation Which version was it introduced