Hello node v npm v Im using bettersqlite along with pkg to compile my node app but after compilation I get this error Error Cannot find module buildbettersqlite node A quick fix for that was to copy the bettersqlite node into the same directory as the executable was in That resulted in a different error which I still cant find a way to resolve FATAL ERROR v ToLocalChecked Empty MaybeLocal FF AFA F RC options FF AF DF RC options FF AF EEC RC options FF BA CB RC options FF E C Require E Coding NodeJS botgenerator nodemodules bettersqlite build src util macroslzz L FF B DA RegisterModule E Coding NodeJS botgenerator nodemodules bettersqlite build src bettersqlite lzz L FF AF RC options FF AF A E RC options FF AF RC options FF BA RC options FF BA RC options FF BA RC options FF BA DE RC options FF C A DD RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C FD C RC options FF C D RC options FF C CF C RC options FF B E RC options FF B RC options FF BA B RC options FF AF AE RC options FF AF RC options FF AF EEA RC options FF AED CD RC options FF AF CC RC options FF AD F RC options FF C B CC RC options FF A BD BaseThreadInitThunk FF BE CED RtlUserThreadStart Thanks Essentially but inside userdefined functions I didnt wanted to hijack that thread as it is moving in a different direction mutating stuff Assuming SQLite allows that would it be possible to enable SELECT inside userdefined functions Currently Im getting TypeError This database connection is busy executing a query My current usecase is a custom caching mechanism Passing large BLOB or TEXT to a userdefined function is slow not necessarily the passing but reading them from disk and makes the difference between ms and ms If I could SELECT inside the userdefined function I could only process the data I need and cache the results of the function for later The userdefined function would then only accept the id as parameter instead of the data itself After running npm i bettersqlite I get integer install rootrep botnodemodulesinteger nodegyp rebuild make Entering directory rootrep botnodemodulesintegerbuild CXXtarget Releaseobjtargetintegersrcintegero SOLINKMODULEtarget Releaseobjtargetintegernode COPY Releaseintegernode COPY buildintegernode TOUCH Releaseobjtargetplaceresultingbinarystamp make Leaving directory rootrep botnodemodulesintegerbuild bettersqlite install rootrep botnodemodulesbettersqlite nodegyp rebuild make Entering directory rootrep botnodemodulesbettersqlite build TOUCH b c e d f be a df a e fintermediate ACTION depssqlite gyplocatesqlite targetextractsqlite b c e d f be a df a e fintermediate binsh botnodemodulesbettersqlite buildReleaselibhostrootrep not found rootrep botnodemodulesbettersqlite depsextractjs processonunhandledRejection err throw err CwdError ENOENT Cannot cd into rootrep botnodemodulesbettersqlite buildReleaseobjgensqlite at rootrep botnodemodulestarlibmkdirjs at FSReqCallbackoncomplete fsjs path rootrep botnodemodulesbettersqlite buildReleaseobjgensqlite code ENOENT depslocatesqlite targetmk recipe for target b c e d f be a df a e fintermediate failed make b c e d f be a df a e fintermediate Error rm b c e d f be a df a e fintermediate make Leaving directory rootrep botnodemodulesbettersqlite build gyp ERR build error gyp ERR stack Error make failed with exit code gyp ERR stack at ChildProcessonExit usrlibnodemodulesnpmnodemodulesnodegyplibbuildjs gyp ERR stack at ChildProcessemit eventsjs gyp ERR stack at ProcessChildProcesshandleonexit internalchildprocessjs gyp ERR System Linux generic gyp ERR command usrbinnode usrlibnodemodulesnpmnodemodulesnodegypbinnodegypjs rebuild gyp ERR cwd rootrep botnodemodulesbettersqlite gyp ERR node v v gyp ERR nodegyp v v gyp ERR not ok npm WARN bootstrap requires a peer of jquery but none is installed You must install peer dependencies yourself npm WARN bootstrap requires a peer of popperjs but none is installed You must install peer dependencies yourself npm WARN enmap requires a peer of bettersqlitepoolgithubeslachancebettersqlitepool but none is installed You must install peer dependencies yourself npm WARN vouchbot No description npm WARN vouchbot No repository field npm ERR code ELIFECYCLE npm ERR errno npm ERR bettersqlite install nodegyp rebuild npm ERR Exit status npm ERR npm ERR Failed at the bettersqlite install script npm ERR This is probably not a problem with npm There is likely additional logging output above npm ERR A complete log of this run can be found in npm ERR rootnpmlogs T Zdebuglog In Glitc I try to install the newest version but i get sqlite error Im solving the issue with enablepnpm but the bot do not load up then Its last error is nodemodulesbettersqlite install CCtarget Releaseobjtargetsqlite gensqlite sqlite o The following error message started showing up in my Electron console once I added bettersqlite Electron Loading non contextaware native modules in the renderer process is deprecated and will stop working at some point in the future please see for more information Ill be honestI really have no idea what this means to any great extent but the link provides some information and it seems like something that may eventually be a big problem Is this something youre aware of Is there a fix in the works From what I could understand in the link it didnt seem like a hard thing to resolve but thats based on a very limited understanding of the whole situation Any info would be great Thanks Dave Error Cannot find module buildbettersqlite node Require stack C Users ASUS Desktop expobot eb f ae e a bcbc dd edca nodemodules bettersqlite lib databasejs C Users ASUS Desktop expobot eb f ae e a bcbc dd edca nodemodules bettersqlite lib indexjs C Users ASUS Desktop expobot eb f ae e a bcbc dd edca nodemodules quickdb bin handlerjs C Users ASUS Desktop expobot eb f ae e a bcbc dd edca nodemodules quickdb indexjs C Users ASUS Desktop expobot eb f ae e a bcbc dd edca serverjs at FunctionModuleresolveFilename internalmodulescjsloaderjs at FunctionModuleload internalmodulescjsloaderjs at Modulerequire internalmodulescjsloaderjs at require internalmodulescjshelpersjs at Objectanonymous C Users ASUS Desktop expobot eb f ae e a bcbc dd edca nodemodules bettersqlite lib databasejs at Modulecompile internalmodulescjsloaderjs at ObjectModuleextensionsjs internalmodulescjsloaderjs at Moduleload internalmodulescjsloaderjs at FunctionModuleload internalmodulescjsloaderjs at Modulerequire internalmodulescjsloaderjs code MODULENOTFOUND requireStack C Users ASUS Desktop expobot eb f ae e a bcbc dd edca nodemodules bettersqlite lib databasejs C Users ASUS Desktop expobot eb f ae e a bcbc dd edca nodemodules bettersqlite lib indexjs C Users ASUS Desktop expobot eb f ae e a bcbc dd edca nodemodules quickdb bin handlerjs C Users ASUS Desktop expobot eb f ae e a bcbc dd edca nodemodules quickdb indexjs C Users ASUS Desktop expobot eb f ae e a bcbc dd edca serverjs Cant find a good way to do custom build since you cant pass custom flags when using tools like electronbuilder so I forked this repo and made a sqlcipher build In case anyone need this just npm install bettersqlite sqlcipheralso requires rebuild for electron use dbpragmakey password to pass password after initialzefirst time to set password there is an example it goes with winia winx linuxia linuxx macx precompiled binaries for openssl so other platforms or archs arent supported for now I try install the package but Error at compile time console mon sudo cnpm i save bettersqlite Installing tar npminstallrunscript bettersqlite integer found bindinggyp file auto run nodegyp rebuild root Userskozo catbilimonnodemodulesinteger integer Installing tar CXXtarget Releaseobjtargetintegersrcintegero Installing tar In file included from srcintegercpp In file included from srcintegerhpp Userskozo nodegyp includenodenodeh fatal error utilinlh file not found include utilinlh Installing tar error generated make Releaseobjtargetintegersrcintegero Error gyp ERR build error gyp ERR stack Error make failed with exit code gyp ERR stack at ChildProcessonExit usrlocallibnodemodulescnpmnodemodulesnodegyplibbuildjs gyp ERR stack at ChildProcessemit eventsjs gyp ERR stack at ProcessChildProcesshandleonexit internalchildprocessjs gyp ERR System Darwin gyp ERR command usrlocalbinnode usrlocallibnodemodulescnpmnodemodulesnpminstallnodegypbinnodegypjs rebuild gyp ERR cwd Userskozo catbilimonnodemodulesinteger integer gyp ERR node v v gyp ERR nodegyp v v gyp ERR not ok npminstallrunscripterror bettersqlite integer has bindinggyp file run nodegyp rebuild error Error Run sh c nodegyp rebuild error exit code at ChildProcessanonymous usrlocallibnodemodulescnpmnodemodulesrunscriptindexjs at ChildProcessemit eventsjs at maybeClose internalchildprocessjs at ProcessChildProcesshandleonexit internalchildprocessjs stdio Object Install fail Error Run sh c nodegyp rebuild error exit code Error Run sh c nodegyp rebuild error exit code at ChildProcessanonymous usrlocallibnodemodulescnpmnodemodulesrunscriptindexjs at ChildProcessemit eventsjs at maybeClose internalchildprocessjs at ProcessChildProcesshandleonexit internalchildprocessjs npminstall version npminstall args usrlocalbinnode usrlocallibnodemodulescnpmnodemodulesnpminstallbininstalljs fixbugversions china userconfigUserskozo cnpmrc disturl registry save bettersqlite mon which sh binsh mon make version GNU Make Copyright C Free Software Foundation Inc This is free software see the source for copying conditions There is NO warranty not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE This program built for i appledarwin Hey I updated the module so it can be used in workerthreads All static are now threadlocal to prevent collisions between contexts LZZ doesnt support the keyword threadlocal so I had to trick him by including a C macro I also created a PR to make integer contextaware JoshuaWiseinteger Update I tried it in my software for heavy processing using workerthreads its working well since I recompiled SQLite in multithread mode I get the following Error Traceback most recent call last File usrlibnodemodulesnodegypgypgypmainpy line in module sysexitgypscriptmain File usrlibnodemodulesnodegypgyppylibgypinitpy line in scriptmain return mainsysargv File usrlibnodemodulesnodegypgyppylibgypinitpy line in main return gypmainargs File usrlibnodemodulesnodegypgyppylibgypinitpy line in gypmain generatorGenerateOutputflatlist targets data params File usrlibnodemodulesnodegypgyppylibgypgeneratormakepy line in GenerateOutput partofallqualifiedtarget in neededtargets File usrlibnodemodulesnodegypgyppylibgypgeneratormakepy line in Write extramacbundleresources partofall File usrlibnodemodulesnodegypgyppylibgypgeneratormakepy line in WriteActions partofallpartofall commandname File usrlibnodemodulesnodegypgyppylibgypgeneratormakepy line in WriteDoCmd force True File usrlibnodemodulesnodegypgyppylibgypgeneratormakepy line in WriteMakeRule cmddigest hashlibsha command if command else selftargethexdigest TypeError Unicodeobjects must be encoded before hashing gyp ERR configure error gyp ERR stack Error gyp failed with exit code gyp ERR stack at ChildProcessonCpExit usrlibnodemodulesnodegyplibconfigurejs gyp ERR stack at ChildProcessemit eventsjs gyp ERR stack at ProcessChildProcesshandleonexit internalchildprocessjs gyp ERR System Linux arch ARCH gyp ERR command usrbinnode usrlibnodemodulesnodegypbinnodegypjs rebuild gyp ERR cwd homegeerayuniwinthisWebAnwendungen PraktikumWebAnwendung BackendAPIWebAnw Backendnodemodulesbettersqlite gyp ERR node v v gyp ERR nodegyp v v gyp ERR not ok npm WARN webanw backend No repository field npm ERR code ELIFECYCLE npm ERR errno npm ERR bettersqlite install nodegyp rebuild npm ERR Exit status npm ERR npm ERR Failed at the bettersqlite install script npm ERR This is probably not a problem with npm There is likely additional logging output above npm ERR A complete log of this run can be found in npm ERR homegeeraynpmlogs T Zdebuglog 