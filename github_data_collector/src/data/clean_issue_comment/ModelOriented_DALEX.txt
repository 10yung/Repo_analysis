As in the title right now it is impossible to use residual function It should have another parameter called predictfunction that is passed along with other R and python But these packages shall be installed from pip Wondering if DALEX will play nicely with sparklyr or if we can get this kind of information out of models data in spark Add warning that explainer with default yhat will take only one column as significant in ranger one can directly as for classification for numerical target variable like titanicimputed explainerkerasdalex DALEXexplainmodelkeras data asmatrixtraininputmatrix y asnumerictrainoutputmatrix label Keras Model predictfunction functionmx keraspredictm x verbose vikerasdalex variableimportanceexplainerkerasdalex type difference lossfunction lossrootmeansquare nsample The above code was working fine on a few projects Seems after an upgrade to some packages now I am getting errors and warning Not able to figure out where is the issue What has changed Preparation of a new explainer is initiated model label Keras Model data rows cols target variable values predict function functionm x keraspredictm x verbose predicted values the predictfunction returns an error when executed WARNING residual function difference between y and yhat default residuals the residualfunction returns an error when executed WARNING A new explainer has been created use type raw for raw plotting vikerasdalex variableimportanceexplainerkerasdalex type difference lossfunction lossrootmeansquare nsample Error in modulesnpint x attempt to apply nonfunction In addition Warning message This package lacks basic test coverage for new functionalities In explainR are some not described input errors If you pass them to explain you will get the nondescriptive error Check if data is null while weights are not Check if data is not a data frame while y is provided Chech if data is null while y is provided As suggested in Add the weights filed to the explain function Make it clear that not all explanations support weights and it is up to the explanation to decide how weights are being used