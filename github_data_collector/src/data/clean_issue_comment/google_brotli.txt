Memory is allocated but at the end of function never free it There is no check for the failed malloc This in turn would cause a segfault when buff is dereferenced In recent benchmarks comparing brotli with other compressors we see that brotli is often tested with a small lz window size TurboBenchCompression Benchmark is using large window brotli as default in the quality modes and Only the quality mode must be given as parameter to evaluate brotli Thanks to the submodule architecture Turbobench is frequently updated as other benchmarks I suggest putting a link on the brotli github repository so to reduce the mistakes done by using suboptimal options and to reduce the effect of other factors like IO see also the response from Jyrki Alakuijala in this post Hello I success to build Brotli and dictionarygenerator with Bazel But how to create dictionary There is no example into cpp file I try dictionarygeneratorexe DICTIONARY but help says there is not enough argument Maybe can you provide some full examples fin is defined here but may be NULL please check iffin NULL Fixes Related The underlying issue of log availability is fixed However the cmake script still emits a FATALERROR if the log function is not found at configure time Simply removing the line is enough to build with ANDROID I think that it would be good to flush currently committed changes and make new release Hello I see brotli provides a wide list of errors define BROTLIDECODERERRORCODESLIST Errors caused by invalid input Memory allocation problems Today all these error codes have only one group BROTLIDECODERRESULTERROR static BROTLINOINLINE BrotliDecoderResult SaveErrorCode BrotliDecoderState s BrotliDecoderErrorCode e switch e default return BROTLIDECODERRESULTERROR So if user want to know when decoder received corrupted source he have to list all codes It makes too tight and unreliable connection between brotli implementation and application Can you please provide several error groups like BROTLIDECODERRESULTCORRUPTEDSOURCE BROTLIDECODERRESULTALLOCATIONFAILED and etc Thank you At least two reasons decodeh and encodeh both refer to BROTLIVERSION CMake support would be improved a file FindBrotlicmake could easily return a version number in environments where pkgconfig is not available