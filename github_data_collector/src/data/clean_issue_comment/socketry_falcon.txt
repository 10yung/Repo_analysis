Im on macOS Mojave and use the latest Falcon and Im not sure whats exactly causing the connections but Im getting this error m s error AsyncTask x bddc incoming connection Addrinfo TCP fd failed pid NoMethodError undefined method headers for nilNilClass gemruby gemsprotocolhttp libprotocolhttpcontentencodingrb in call gemruby gemsprotocolhttp libprotocolhttpmiddlewarerb in call gemruby gemsasynchttp libasynchttpserverrb in block in accept gemruby gemsasynchttp libasynchttpprotocolhttp serverrb in each gemruby gemsasynchttp libasynchttpserverrb in accept gemruby gemsasyncio libasynciosocketrb in block in accepteach gemruby gemsasyncio libasynciosocketrb in block in accept gemruby gemsasync libasynctaskrb in block in makefiber I guess this would not have happened There is a nice explanation here Obviously Falcon is generating a selfsigned certificate valid for years which is much more than days Maybe something else is wrong and should be fixed in case of running rack application env rackinput is a FalconAdaptersInput with body ProtocolHTTP BodyFixed which has empty method Since body is not rewindable its the only way to define if it has content or not this issue related to problem in general this issue related to specific problem when using falcon sinja gems together not sure if it works correctly with http or not Im trying to use falcon on production in one app that Im creating Now Im blind of logs I dont know what happen when I run the app it dont show any logs of requests only the database interactions Im running my app using foreman with the command falcon serve b Everything is running on a container I didnt change anything on the configenviromentproductionrb its running all the rails default Can someone help me with this In investigating I encountered a second issue whereby any headers after one we send which is in caps with underscores were being dropped Firstly I know its not really compliant with defacto HTTP standards where all headers are capitalised with dashes between them but it is a thing that exists and I cant find anything in the HTTP standard which explicitly says it isnt supported Im quite happy to resolve this issue myself if you can give a pointer to either the right place in which case Ill submit a PR or the HTTP standard that says it shouldnt be supported in which case Ill go away and fix our code This is an attempt to resolve Were attempting to migrate our Heroku hosted application to Falcon but hitting an issue where rackurlscheme in the request environment seems to be incorrectly set to http rather than https this causes all requests to be intercepted by some middleware and throws us into an infinite loop of responses with a status code redirecting to the SSL version of the URL The attached screenshot shows the interpreted protocol the purple line indicates HTTPS while the orange one is HTTP As you can see when we deployed Falcon into our staging environment the protocol switched for all requests and then returns to HTTPS when we deploy with Puma instead Screenshot Monitoring is being done via Honeycomb using their rackhoneycomb gem the specific line in question can be found here which indicates somewhere in Falcons HTTP stack the URL scheme is not being set Rack PR merged days ago GitHub was rendering as a tab spaced ruby code with this change is a real two space ruby class D