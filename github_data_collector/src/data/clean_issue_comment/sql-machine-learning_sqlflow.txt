 Some functions have too many indentation levels For example Some are too long For example Some have both problems For example By the name the package codgencouler should generate the Couler program However it generates the Argo YAML file This doesnt make sense if we want a Argo codegen it should be named codegenargo instead of codegencouler In particular as we have a package named argo which by the name should be the one doing Argo related work SQLFlow needs the capability of translating and executing each SQL statement with or without the extending syntax This capability makes the ArgoTekton workflow tracable it also makes it possible to integrate SQLFlow with IDEs like Visual Studio Code to support stepbystep running Currently we rely on the binary cmdrepl as the step runner However cmdrepl also has other roles like a local debug mode of SQLFlow and runs a SQL program instead of a SQL statement I agree that we keep cmdrepl as a SQLFlow server client just like the Jupyter Notebook client But to make its role as a client clear we need a new tool to run each step in the ArgoTekton workflow This filename doesnt make sense An IR is not executable Instead it is the workflow or Python program converted from the IR which is executable We should move the code in this file to related packages so we could remove this file Currently the binary repl call func RunSQLProgram locally I propose to Rename repl into sqlflow Make repl call SQLFlow server just like mysql calls MySQL server Move part of RunSQLProgram in executorirgo to pkgserver and the rest to pkgstepexecutor The former part calls the later part BTW we need cmdstep which calls pkgstepexecutor and is called by the generated workflow to run each step as explained in A sideeffect of this proposal is to reduce and finally remove the file executeirgo as the IR is not executable it is the submitter program generated from the IR which is executable The function SubmitWorkflow defined in package pkgsql is only used in cmdsqlflowserver together with pkgserverNewServer Hence I propose to move the definition of this function to pkgserver as submitWorkflow A sideeffect of this proposal is to minimize and finally remove the file executeirgo because the IR is not executable it is the codegen result aka submitter programs which are executable Currently our parser doesnt generate IR Instead its output type is SQLFlowStmt and it is irgeneratorgo who converts SQLFlowStmt into IR In particular function generateTrainStmt defined in irgeneratorgo converts SQLFlowStmt into irTrainStmt The function generateTrainStmt needs to call feature derivation defined in stepfeature and verification functions defined in irgeneratorgo An illustration of the conversion process is like the following parse SQLFlowStmt irgeneratorgo ir stepfeaturederivationgo Should we move irgeneratorgo to package IR and rename generateTrainStmt into irNewTrainStmt fixed WIP need to precreate explain result tables