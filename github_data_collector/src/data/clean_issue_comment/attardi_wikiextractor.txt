Hi I am getting UnicodeDecodeErrors when I try to extract a decompressed xml dump For the record this is how I am using the WikiExtractor WikiExtractorpy wikicorpusenxml b M processes o pathtoextractionfolder I am suspecting this line to be at the origin of the problem since fileinputhookcompressed seems to result in opening the file using openfilename mode instead of openfilename mode encodingutf which would avoid the decoding error Changing the line with this one solved the issue for me input fileinputFileInputinputfile openhookfileinputhookencodedencodingutf If the tool wasnt intended to be used with an already decompressed xml dump you can close this issue Thank you Hicham Originally reported here Im sure mozillakab is happy to answer any questions needed Python Version Python on Windows bit Error C tal extractwiki wikiextractorpython WikiExtractorpy json kabwikilatestpagesarticlesmultistreamxml Traceback most recent call last File WikiExtractorpy line in main File WikiExtractorpy line in main argscompress argsprocesses File WikiExtractorpy line in processdump for line in input File C Python lib fileinputpy line in next line selfreadline File C Python lib fileinputpy line in readline return selfreadline File C Python lib encodings cp py line in decode return codecscharmapdecodeinputselferrorsdecodingtable UnicodeDecodeError charmap codec cant decode byte x d in position cha racter maps to INFOroot Aeda INFOroot La casa de papel INFOroot Imendi INFOroot Taedayt INFOroot Idwi INFOroot Keikob INFOroot Tidwin INFOroot Albert camus INFOroot Ifemes INFOroot Suduku INFOroot Ied INFOroot Awwu INFOroot Azwu INFOroot Ameruy INFO Finished process extraction of articles in s arts INFO total of page total of articl page total of used articl page Workaround I replaced the content of C Python lib encodings cp py Western Europe with the content of C Python lib encodings utf py all languages and it works cgiescape was deprecated and removed in Python Using htmlescape is recommended Thanks Hi all It seems a lot of people have problems with the template expansion function I found an old version at It works well You need to use python to run it Thanks Can I have the bibtex entry for citing this project Additional flag that allows to keep section titles hierarchy eg SectionAnarchist schools of thoughtClassicalMutualism in Anarchism Wikipedia Consider this fake article page titlebug demotitle ns ns id id revision id id parentid parentid timestamp T Ztimestamp contributor usernameUuu username id id contributor commentblahcomment modelwikitextmodel formattextxwikiformat text xmlspacepreserve Categoryone Categorytwo text sha acht hj tk v ngv b aerdsefcsha revision page Because of the way the loop that builds the list of categories works see catSet in pagesfrom the last category is not added to the list of categories here and filtering on categories doesnt work If a newline is added after Categorytwo here then the category is correctly added to catSet and will be detected The readme says that the package can be installed with setuppy but there is no setuppy in the repository Hi I run command python WikiExtractorpy json enwikilatestpagesarticlesxmlbz and expected get one json file as output but got INFO Finished process extraction of articles in s arts INFO total of page total of articl page total of used articl page and folder text with many inner folders like AA AB AC What command should I use to get one json fileI want to use it as described in this manual When extractcategories is given page categories are extracted and saved along with title and text Note that sortkeys are dropped eg CategoryCategory nameSortkey Only Category name is extracted