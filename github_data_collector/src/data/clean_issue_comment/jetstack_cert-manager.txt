Hi I have some issues to create a cert for istio Describe the bug Here is what istio suggests to do TELEMETRYDOMAINyourdesireddomain apiVersion certmanagerk siov alpha kind Certificate metadata name telemetrygwcert namespace istiosystem spec secretName telemetrygwcert issuerRef name letsencrypt kind ClusterIssuer commonName TELEMETRYDOMAIN dnsNames TELEMETRYDOMAIN acme config http ingressClass istio domains TELEMETRYDOMAIN here is the tutorial I installed certmanger v here is my clusterissuer and cert definition my domain was replaced with testdomaincom cat EOF certyaml apiVersion certmanageriov alpha kind ClusterIssuer metadata annotations name letsencryptstaging spec acme email maxmustermangmailcom privateKeySecretRef name letsencryptstaging server solvers http ingress class istio apiVersion certmanageriov alpha kind Certificate metadata name telemetrygwcert namespace istiosystem spec secretName telemetrygwcert issuerRef name letsencryptstaging kind ClusterIssuer commonName testdomaincom dnsNames testdomaincom EOF Expected behaviour it should create the cert without an error Steps to reproduce the bug kubectl apply f certyaml here the error log kubectl logs certmanager dbd ddsswp n certmanager I startgo certmanager level msgstarting controller gitcommit e f d versionv W clientconfiggo Neither kubeconfig nor master was specified Using the inClusterConfig This might not work I controllergo certmanagercontrollerbuildcontext level msgconfigured acme dns nameservers nameservers I controllergo certmanagercontroller level msgstarting leader election I metricsgo certmanagermetrics level msglistening for connections on address I leaderelectiongo attempting to acquire leader lease kubesystemcertmanagercontroller I leaderelectiongo successfully acquired lease kubesystemcertmanagercontroller I controllergo certmanagercontroller level msgstarting controller controlleringressshim I controllergo certmanagercontrolleringressshim level msgstarting control loop I controllergo certmanagercontroller level msgstarting controller controllerchallenges I controllergo certmanagercontrollerchallenges level msgstarting control loop I controllergo certmanagercontrollercertificaterequests level msgnew certificate request controller registered typeacme I controllergo certmanagercontroller level msgstarting controller controllerorders I controllergo certmanagercontrollerorders level msgstarting control loop I controllergo certmanagercontrollercertificaterequests level msgnew certificate request controller registered typevault I controllergo certmanagercontroller level msgstarting controller controllercertificaterequestsissueracme I controllergo certmanagercontrollercertificaterequestsissueracme level msgstarting control loop I controllergo certmanagercontrollercertificaterequests level msgnew certificate request controller registered typevenafi I controllergo certmanagercontroller level msgstarting controller controllercertificaterequestsissuervault I controllergo certmanagercontrollercertificaterequestsissuervault level msgstarting control loop I controllergo certmanagercontroller level msgstarting controller controllercertificaterequestsissuervenafi I controllergo certmanagercontrollercertificaterequestsissuervenafi level msgstarting control loop I controllergo certmanagercontroller level msgstarting controller controllercertificates I controllergo certmanagercontrollercertificates level msgstarting control loop I controllergo certmanagercontrollercertificaterequests level msgnew certificate request controller registered typeca I controllergo certmanagercontrollercertificaterequests level msgnew certificate request controller registered typeselfsigned I controllergo certmanagercontroller level msgstarting controller controllercertificaterequestsissuerca I controllergo certmanagercontrollercertificaterequestsissuerca level msgstarting control loop I controllergo certmanagercontroller level msgstarting controller controllerissuers I controllergo certmanagercontrollerissuers level msgstarting control loop I controllergo certmanagercontroller level msgstarting controller controllerclusterissuers I controllergo certmanagercontrollerclusterissuers level msgstarting control loop I controllergo certmanagercontroller level msgstarting controller controllerwebhookbootstrap I controllergo certmanagercontrollerwebhookbootstrap level msgstarting control loop I controllergo certmanagercontroller level msgstarting controller controllercertificaterequestsissuerselfsigned I controllergo certmanagercontrollercertificaterequestsissuerselfsigned level msgstarting control loop I controllergo certmanagercontrolleringressshim level msgsyncing item keymonitoringprometheusoperatorprometheus I syncgo certmanagercontrolleringressshim level msgnot syncing ingress resource as it does not contain a certmanagerioissuer or certmanagerioclusterissuer annotation resourcekindIngress resourcenameprometheusoperatorprometheus resourcenamespacemonitoring I controllergo certmanagercontrolleringressshim level msgfinished processing work item keymonitoringprometheusoperatorprometheus I controllergo certmanagercontrollerwebhookbootstrap level msgsyncing item keycertmanageristiodefault I controllergo certmanagercontrollerwebhookbootstrap level msgfinished processing work item keycertmanageristiodefault I controllergo certmanagercontrollerwebhookbootstrap level msgsyncing item keycertmanagercertmanagerwebhooktls I controllergo certmanagercontrollerwebhookbootstrap level msgsyncing item keycertmanagercertmanagertokenx x x I controllergo certmanagercontrollerwebhookbootstrap level msgfinished processing work item keycertmanagercertmanagertokenx x x I controllergo certmanagercontrollerwebhookbootstrap level msgsyncing item keycertmanagercertmanagerwebhooktokenlkkb I controllergo certmanagercontrollerwebhookbootstrap level msgfinished processing work item keycertmanagercertmanagerwebhooktokenlkkb I controllergo certmanagercontrollerwebhookbootstrap level msgsyncing item keycertmanagercertmanagercainjectortokendtgrj I controllergo certmanagercontrollerwebhookbootstrap level msgsyncing item keycertmanagercertmanagerwebhookca I controllergo certmanagercontrollerwebhookbootstrap level msgfinished processing work item keycertmanagercertmanagercainjectortokendtgrj I controllergo certmanagercontrollerwebhookbootstrap level msgsyncing item keycertmanagerletsencryptstaging I controllergo certmanagercontrollerwebhookbootstrap level msgfinished processing work item keycertmanagerletsencryptstaging I controllergo certmanagercontrollerwebhookbootstrap level msgsyncing item keycertmanageristiocertmanager I controllergo certmanagercontrollerwebhookbootstrap level msgfinished processing work item keycertmanageristiocertmanager I controllergo certmanagercontrollerwebhookbootstrap level msgsyncing item keycertmanageristiocertmanagerwebhook I controllergo certmanagercontrollerwebhookbootstrap level msgfinished processing work item keycertmanageristiocertmanagerwebhook I controllergo certmanagercontrollerwebhookbootstrap level msgsyncing item keycertmanageristiocertmanagercainjector I controllergo certmanagercontrollerwebhookbootstrap level msgfinished processing work item keycertmanageristiocertmanagercainjector I controllergo certmanagercontrollerwebhookbootstrap level msgsyncing item keycertmanagerdefaulttoken k br I controllergo certmanagercontrollerwebhookbootstrap level msgfinished processing work item keycertmanagerdefaulttoken k br I controllergo certmanagercontrollerwebhookbootstrapwebhookbootstrapcasecret level msgserving certificate already up to date resourcekindSecret resourcenamecertmanagerwebhooktls resourcenamespacecertmanager I controllergo certmanagercontrollerwebhookbootstrapwebhookbootstrapcasecret level msgca certificate already up to date resourcekindSecret resourcenamecertmanagerwebhookca resourcenamespacecertmanager I controllergo certmanagercontrollerwebhookbootstrap level msgfinished processing work item keycertmanagercertmanagerwebhooktls I controllergo certmanagercontrollerwebhookbootstrap level msgfinished processing work item keycertmanagercertmanagerwebhookca I controllergo certmanagercontrollerclusterissuers level msgsyncing item keyletsencryptstaging I setupgo certmanagercontrollerclusterissuers level msgACME server URL host and ACME private key registration host differ Rechecking ACME account registration relatedresourcekindSecret relatedresourcenameletsencryptstaging relatedresourcenamespacecertmanager resourcekindClusterIssuer resourcenameletsencryptstaging resourcenamespace I loggergo Calling GetAccount I setupgo certmanagercontrollerclusterissuers level msgverified existing registration with ACME server relatedresourcekindSecret relatedresourcenameletsencryptstaging relatedresourcenamespacecertmanager resourcekindClusterIssuer resourcenameletsencryptstaging resourcenamespace I conditionsgo Setting lastTransitionTime for Issuer letsencryptstaging condition Ready to UTC m I controllergo certmanagercontrollerclusterissuers level msgfinished processing work item keyletsencryptstaging I controllergo certmanagercontrollerclusterissuers level msgsyncing item keyletsencryptstaging I setupgo certmanagercontrollerclusterissuers level msgskipping reverifying ACME account as cached registration details look sufficient relatedresourcekindSecret relatedresourcenameletsencryptstaging relatedresourcenamespacecertmanager resourcekindClusterIssuer resourcenameletsencryptstaging resourcenamespace I controllergo certmanagercontrollerclusterissuers level msgfinished processing work item keyletsencryptstaging I controllergo certmanagercontrollercertificates level msgsyncing item keyistiosystemtelemetrygwcert I syncgo certmanagercontrollercertificates level msgno existing CertificateRequest resource exists creating new request relatedresourcekindSecret relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificate resourcenametelemetrygwcert resourcenamespaceistiosystem I controllergo certmanagercontrollercertificaterequestsissuerselfsigned level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuervenafi level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissueracme level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuerca level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuerselfsigned level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuervault level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuervenafi level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuerca level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuervault level msgfinished processing work item keyistiosystemtelemetrygwcert I syncgo certmanagercontrollercertificates level msgcreated certificate request relatedresourcekindSecret relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificate resourcenametelemetrygwcert resourcenamespaceistiosystem requestnametelemetrygwcert E pkigo certmanagercontrollercertificates msgerror decoding x certificate errorerror decoding cert PEM block relatedresourcekindSecret relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificate resourcenametelemetrygwcert resourcenamespaceistiosystem secretkeytlscrt I conditionsgo Setting lastTransitionTime for Certificate telemetrygwcert condition Ready to UTC m I controllergo certmanagercontrollerorders level msgsyncing item keyistiosystemtelemetrygwcert I syncgo certmanagercontrollerorders level msgCreating new ACME order as statusurl is not set resourcekindOrder resourcenametelemetrygwcert resourcenamespaceistiosystem I syncgo certmanagercontrollerorders level msgorder URL not set submitting Order to ACME server resourcekindOrder resourcenametelemetrygwcert resourcenamespaceistiosystem I syncgo certmanagercontrollerorders level msgbuild set of domains for Order resourcekindOrder resourcenametelemetrygwcert resourcenamespaceistiosystem domains testdomaincom I loggergo Calling CreateOrder I conditionsgo Setting lastTransitionTime for CertificateRequest telemetrygwcert condition Ready to UTC m I controllergo certmanagercontrollercertificates level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificates level msgsyncing item keyistiosystemtelemetrygwcert I syncgo certmanagercontrollercertificates level msgvalidating existing CSR data relatedresourcekindCertificateRequest relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificate resourcenametelemetrygwcert resourcenamespaceistiosystem I syncgo certmanagercontrollercertificates level msgCertificateRequest is not in a final state waiting until CertificateRequest is complete relatedresourcekindCertificateRequest relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificate resourcenametelemetrygwcert resourcenamespaceistiosystem state E pkigo certmanagercontrollercertificates msgerror decoding x certificate errorerror decoding cert PEM block relatedresourcekindSecret relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificate resourcenametelemetrygwcert resourcenamespaceistiosystem secretkeytlscrt I conditionsgo Setting lastTransitionTime for Certificate telemetrygwcert condition Ready to UTC m I controllergo certmanagercontrollercertificaterequestsissueracme level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissueracme level msgsyncing item keyistiosystemtelemetrygwcert I conditionsgo Setting lastTransitionTime for CertificateRequest telemetrygwcert condition Ready to UTC m I acmego certmanagercontrollercertificaterequestsissueracmesign level msgacme Order resource is not in a ready state waiting relatedresourcekindOrder relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificateRequest resourcenametelemetrygwcert resourcenamespaceistiosystem I controllergo certmanagercontrollercertificaterequestsissuerselfsigned level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuervenafi level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuervenafi level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuerselfsigned level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuerca level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuervault level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuerca level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuervault level msgfinished processing work item keyistiosystemtelemetrygwcert E controllergo certmanagercontrollercertificates msgrequeuing item due to error processing errorOperation cannot be fulfilled on certificatescertmanagerio telemetrygwcert the object has been modified please apply your changes to the latest version and try again keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificates level msgsyncing item keyistiosystemtelemetrygwcert I syncgo certmanagercontrollercertificates level msgvalidating existing CSR data relatedresourcekindCertificateRequest relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificate resourcenametelemetrygwcert resourcenamespaceistiosystem I syncgo certmanagercontrollercertificates level msgCertificateRequest is not in a final state waiting until CertificateRequest is complete relatedresourcekindCertificateRequest relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificate resourcenametelemetrygwcert resourcenamespaceistiosystem statePending E pkigo certmanagercontrollercertificates msgerror decoding x certificate errorerror decoding cert PEM block relatedresourcekindSecret relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificate resourcenametelemetrygwcert resourcenamespaceistiosystem secretkeytlscrt I controllergo certmanagercontrollercertificates level msgfinished processing work item keyistiosystemtelemetrygwcert E controllergo certmanagercontrollercertificaterequestsissueracme msgrequeuing item due to error processing errorOperation cannot be fulfilled on certificaterequestscertmanagerio telemetrygwcert the object has been modified please apply your changes to the latest version and try again keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissueracme level msgsyncing item keyistiosystemtelemetrygwcert I acmego certmanagercontrollercertificaterequestsissueracmesign level msgacme Order resource is not in a ready state waiting relatedresourcekindOrder relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificateRequest resourcenametelemetrygwcert resourcenamespaceistiosystem I controllergo certmanagercontrollercertificaterequestsissueracme level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuerselfsigned level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuervenafi level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificates level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuerselfsigned level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuerca level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissueracme level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuerca level msgfinished processing work item keyistiosystemtelemetrygwcert I acmego certmanagercontrollercertificaterequestsissueracmesign level msgacme Order resource is not in a ready state waiting relatedresourcekindOrder relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificateRequest resourcenametelemetrygwcert resourcenamespaceistiosystem I controllergo certmanagercontrollercertificaterequestsissueracme level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuervault level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuervault level msgfinished processing work item keyistiosystemtelemetrygwcert I syncgo certmanagercontrollercertificates level msgvalidating existing CSR data relatedresourcekindCertificateRequest relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificate resourcenametelemetrygwcert resourcenamespaceistiosystem I syncgo certmanagercontrollercertificates level msgCertificateRequest is not in a final state waiting until CertificateRequest is complete relatedresourcekindCertificateRequest relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificate resourcenametelemetrygwcert resourcenamespaceistiosystem statePending E pkigo certmanagercontrollercertificates msgerror decoding x certificate errorerror decoding cert PEM block relatedresourcekindSecret relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificate resourcenametelemetrygwcert resourcenamespaceistiosystem secretkeytlscrt I controllergo certmanagercontrollercertificates level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuervenafi level msgfinished processing work item keyistiosystemtelemetrygwcert I syncgo certmanagercontrollerorders level msgsubmitted Order to ACME server resourcekindOrder resourcenametelemetrygwcert resourcenamespaceistiosystem I syncgo certmanagercontrollerorders level msgupdating Order resource status resourcekindOrder resourcenametelemetrygwcert resourcenamespaceistiosystem I controllergo certmanagercontrollerorders level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissueracme level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollerorders level msgsyncing item keyistiosystemtelemetrygwcert I syncgo certmanagercontrollerorders level msgFetching Authorizations from ACME server as statusauthorizations contains unpopulated authorizations resourcekindOrder resourcenametelemetrygwcert resourcenamespaceistiosystem I acmego certmanagercontrollercertificaterequestsissueracmesign level msgacme Order resource is not in a ready state waiting relatedresourcekindOrder relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificateRequest resourcenametelemetrygwcert resourcenamespaceistiosystem I loggergo Calling GetAuthorization I controllergo certmanagercontrollercertificaterequestsissuerselfsigned level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuervenafi level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuervault level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuerca level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificates level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuervenafi level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuervault level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuerca level msgfinished processing work item keyistiosystemtelemetrygwcert I syncgo certmanagercontrollercertificates level msgvalidating existing CSR data relatedresourcekindCertificateRequest relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificate resourcenametelemetrygwcert resourcenamespaceistiosystem I syncgo certmanagercontrollercertificates level msgCertificateRequest is not in a final state waiting until CertificateRequest is complete relatedresourcekindCertificateRequest relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificate resourcenametelemetrygwcert resourcenamespaceistiosystem statePending E pkigo certmanagercontrollercertificates msgerror decoding x certificate errorerror decoding cert PEM block relatedresourcekindSecret relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificate resourcenametelemetrygwcert resourcenamespaceistiosystem secretkeytlscrt I controllergo certmanagercontrollercertificates level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissuerselfsigned level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissueracme level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissueracme level msgsyncing item keyistiosystemtelemetrygwcert I acmego certmanagercontrollercertificaterequestsissueracmesign level msgacme Order resource is not in a ready state waiting relatedresourcekindOrder relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificateRequest resourcenametelemetrygwcert resourcenamespaceistiosystem I controllergo certmanagercontrollercertificaterequestsissueracme level msgfinished processing work item keyistiosystemtelemetrygwcert I syncgo certmanagercontrollerorders level msgupdating Order resource status resourcekindOrder resourcenametelemetrygwcert resourcenamespaceistiosystem I controllergo certmanagercontrollerorders level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissueracme level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollerorders level msgsyncing item keyistiosystemtelemetrygwcert I acmego certmanagercontrollercertificaterequestsissueracmesign level msgacme Order resource is not in a ready state waiting relatedresourcekindOrder relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificateRequest resourcenametelemetrygwcert resourcenamespaceistiosystem I loggergo Calling HTTP ChallengeResponse I controllergo certmanagercontrollercertificaterequestsissueracme level msgfinished processing work item keyistiosystemtelemetrygwcert I syncgo certmanagercontrollerorders level msgCreating additional Challenge resources to complete Order resourcekindOrder resourcenametelemetrygwcert resourcenamespaceistiosystem I controllergo certmanagercontrollerchallenges level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollerchallenges level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollerorders level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollerorders level msgsyncing item keyistiosystemtelemetrygwcert I loggergo Calling HTTP ChallengeResponse I syncgo certmanagercontrollerorders level msgNo action taken resourcekindOrder resourcenametelemetrygwcert resourcenamespaceistiosystem I controllergo certmanagercontrollerorders level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollerorders level msgsyncing item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollerchallenges level msgsyncing item keyistiosystemtelemetrygwcert I loggergo Calling HTTP ChallengeResponse I loggergo Calling GetChallenge I syncgo certmanagercontrollerorders level msgNo action taken resourcekindOrder resourcenametelemetrygwcert resourcenamespaceistiosystem I controllergo certmanagercontrollerorders level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollerorders level msgsyncing item keyistiosystemtelemetrygwcert I loggergo Calling HTTP ChallengeResponse I syncgo certmanagercontrollerorders level msgNo action taken resourcekindOrder resourcenametelemetrygwcert resourcenamespaceistiosystem I controllergo certmanagercontrollerorders level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollerchallenges level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollerchallenges level msgsyncing item keyistiosystemtelemetrygwcert I podgo certmanagercontrollerchallengeshttp ensurePod level msgcreating HTTP challenge solver pod dnsNametestdomaincom resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp I servicego certmanagercontrollerchallengeshttp ensureService level msgcreating HTTP challenge solver service dnsNametestdomaincom resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp I ingressgo certmanagercontrollerchallengeshttp ensureIngress level msgcreating HTTP challenge solver ingress dnsNametestdomaincom resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp I controllergo certmanagercontrolleringressshim level msgsyncing item keyistiosystemcmacmehttpsolvergtbxf I syncgo certmanagercontrolleringressshim level msgnot syncing ingress resource as it does not contain a certmanagerioissuer or certmanagerioclusterissuer annotation resourcekindIngress resourcenamecmacmehttpsolvergtbxf resourcenamespaceistiosystem I controllergo certmanagercontrolleringressshim level msgfinished processing work item keyistiosystemcmacmehttpsolvergtbxf I podgo certmanagercontrollerchallengeshttp selfCheckhttp ensurePod level msgfound one existing HTTP solver pod dnsNametestdomaincom relatedresourcekindPod relatedresourcenamecmacmehttpsolver wqml relatedresourcenamespaceistiosystem resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp I servicego certmanagercontrollerchallengeshttp selfCheckhttp ensureService level msgfound one existing HTTP solver Service for challenge resource dnsNametestdomaincom relatedresourcekindService relatedresourcenamecmacmehttpsolverj rbj relatedresourcenamespaceistiosystem resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp I ingressgo certmanagercontrollerchallengeshttp selfCheckhttp ensureIngress level msgfound one existing HTTP solver ingress dnsNametestdomaincom relatedresourcekindIngress relatedresourcenamecmacmehttpsolvergtbxf relatedresourcenamespaceistiosystem resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp E syncgo certmanagercontrollerchallenges msgpropagation check failed errorwrong status code expected dnsNametestdomaincom resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp I controllergo certmanagercontrollerorders level msgsyncing item keyistiosystemtelemetrygwcert I loggergo Calling HTTP ChallengeResponse I syncgo certmanagercontrollerorders level msgNo action taken resourcekindOrder resourcenametelemetrygwcert resourcenamespaceistiosystem I controllergo certmanagercontrollerorders level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollerchallenges level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollerchallenges level msgsyncing item keyistiosystemtelemetrygwcert I podgo certmanagercontrollerchallengeshttp selfCheckhttp ensurePod level msgfound one existing HTTP solver pod dnsNametestdomaincom relatedresourcekindPod relatedresourcenamecmacmehttpsolver wqml relatedresourcenamespaceistiosystem resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp I servicego certmanagercontrollerchallengeshttp selfCheckhttp ensureService level msgfound one existing HTTP solver Service for challenge resource dnsNametestdomaincom relatedresourcekindService relatedresourcenamecmacmehttpsolverj rbj relatedresourcenamespaceistiosystem resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp I ingressgo certmanagercontrollerchallengeshttp selfCheckhttp ensureIngress level msgfound one existing HTTP solver ingress dnsNametestdomaincom relatedresourcekindIngress relatedresourcenamecmacmehttpsolvergtbxf relatedresourcenamespaceistiosystem resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp E syncgo certmanagercontrollerchallenges msgpropagation check failed errorwrong status code expected dnsNametestdomaincom resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp I controllergo certmanagercontrollerchallenges level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificates level msgsyncing item keyistiosystemtelemetrygwcert I syncgo certmanagercontrollercertificates level msgvalidating existing CSR data relatedresourcekindCertificateRequest relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificate resourcenametelemetrygwcert resourcenamespaceistiosystem I syncgo certmanagercontrollercertificates level msgCertificateRequest is not in a final state waiting until CertificateRequest is complete relatedresourcekindCertificateRequest relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificate resourcenametelemetrygwcert resourcenamespaceistiosystem statePending E pkigo certmanagercontrollercertificates msgerror decoding x certificate errorerror decoding cert PEM block relatedresourcekindSecret relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificate resourcenametelemetrygwcert resourcenamespaceistiosystem secretkeytlscrt I controllergo certmanagercontrollercertificates level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollercertificaterequestsissueracme level msgsyncing item keyistiosystemtelemetrygwcert I acmego certmanagercontrollercertificaterequestsissueracmesign level msgacme Order resource is not in a ready state waiting relatedresourcekindOrder relatedresourcenametelemetrygwcert relatedresourcenamespaceistiosystem resourcekindCertificateRequest resourcenametelemetrygwcert resourcenamespaceistiosystem I controllergo certmanagercontrollercertificaterequestsissueracme level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollerchallenges level msgsyncing item keyistiosystemtelemetrygwcert I podgo certmanagercontrollerchallengeshttp selfCheckhttp ensurePod level msgfound one existing HTTP solver pod dnsNametestdomaincom relatedresourcekindPod relatedresourcenamecmacmehttpsolver wqml relatedresourcenamespaceistiosystem resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp I servicego certmanagercontrollerchallengeshttp selfCheckhttp ensureService level msgfound one existing HTTP solver Service for challenge resource dnsNametestdomaincom relatedresourcekindService relatedresourcenamecmacmehttpsolverj rbj relatedresourcenamespaceistiosystem resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp I ingressgo certmanagercontrollerchallengeshttp selfCheckhttp ensureIngress level msgfound one existing HTTP solver ingress dnsNametestdomaincom relatedresourcekindIngress relatedresourcenamecmacmehttpsolvergtbxf relatedresourcenamespaceistiosystem resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp E syncgo certmanagercontrollerchallenges msgpropagation check failed errorwrong status code expected dnsNametestdomaincom resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp I controllergo certmanagercontrollerchallenges level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollerchallenges level msgsyncing item keyistiosystemtelemetrygwcert I podgo certmanagercontrollerchallengeshttp selfCheckhttp ensurePod level msgfound one existing HTTP solver pod dnsNametestdomaincom relatedresourcekindPod relatedresourcenamecmacmehttpsolver wqml relatedresourcenamespaceistiosystem resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp I servicego certmanagercontrollerchallengeshttp selfCheckhttp ensureService level msgfound one existing HTTP solver Service for challenge resource dnsNametestdomaincom relatedresourcekindService relatedresourcenamecmacmehttpsolverj rbj relatedresourcenamespaceistiosystem resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp I ingressgo certmanagercontrollerchallengeshttp selfCheckhttp ensureIngress level msgfound one existing HTTP solver ingress dnsNametestdomaincom relatedresourcekindIngress relatedresourcenamecmacmehttpsolvergtbxf relatedresourcenamespaceistiosystem resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp E syncgo certmanagercontrollerchallenges msgpropagation check failed errorwrong status code expected dnsNametestdomaincom resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp I controllergo certmanagercontrollerchallenges level msgfinished processing work item keyistiosystemtelemetrygwcert I controllergo certmanagercontrollerchallenges level msgsyncing item keyistiosystemtelemetrygwcert I podgo certmanagercontrollerchallengeshttp selfCheckhttp ensurePod level msgfound one existing HTTP solver pod dnsNametestdomaincom relatedresourcekindPod relatedresourcenamecmacmehttpsolver wqml relatedresourcenamespaceistiosystem resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp I servicego certmanagercontrollerchallengeshttp selfCheckhttp ensureService level msgfound one existing HTTP solver Service for challenge resource dnsNametestdomaincom relatedresourcekindService relatedresourcenamecmacmehttpsolverj rbj relatedresourcenamespaceistiosystem resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp I ingressgo certmanagercontrollerchallengeshttp selfCheckhttp ensureIngress level msgfound one existing HTTP solver ingress dnsNametestdomaincom relatedresourcekindIngress relatedresourcenamecmacmehttpsolvergtbxf relatedresourcenamespaceistiosystem resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp E syncgo certmanagercontrollerchallenges msgpropagation check failed errorwrong status code expected dnsNametestdomaincom resourcekindChallenge resourcenametelemetrygwcert resourcenamespaceistiosystem typehttp I controllergo certmanagercontrollerchallenges level msgfinished processing work item keyistiosystemtelemetrygwcert Anything else we need to know Environment details Kubernetes version eg v kubectl version Client Version versionInfoMajor Minor GitVersionv GitCommit fac cd a dc f d f f a aeface cc GitTreeStateclean BuildDate T Z GoVersiongo Compilergc Platformdarwinamd Server Version versionInfoMajor Minor GitVersionv GitCommit f e f eb e ebd b d e GitTreeStateclean BuildDate T Z GoVersiongo Compilergc Platformlinuxamd Cloudproviderprovisioner eg GKE kops AWS etc aws kops kops version Version istio certmanager version eg v v Install method eg helm or static manifests helm My aws Kops cluster definition kops get cluster apiVersion kopsk siov alpha kind Cluster metadata creationTimestamp T Z generation name kopsuseast blabla spec additionalPolicies node Effect Allow Action stsAssumeRole Resource api dns authorization rbac channel stable cloudProvider aws configBase s mmkopsblablastatestorekopsuseast blabla dnsZone blabla etcdClusters cpuRequest m etcdMembers instanceGroup masteruseast a name a memoryRequest Mi name main cpuRequest m etcdMembers instanceGroup masteruseast a name a memoryRequest Mi name events iam allowContainerRegistry true legacy false kubelet anonymousAuth false authenticationTokenWebhook true authorizationMode Webhook kubernetesApiAccess kubernetesVersion masterInternalName apiinternalkopsuseast blabla masterPublicName apikopsuseast blabla networkCIDR networking kubenet nonMasqueradeCIDR sshAccess xxxxxxxxxx subnets cidr name useast a type Public zone useast a cidr name useast b type Public zone useast b topology dns type Public masters public nodes public Is your feature request related to a problem Please describe Im not owner of the cluster and have limited permissions at cluster scope level Currently I am able to run certmanager with reduced permissions at cluster scope level as well as namespace option to prevent launching the clusterIssuer controller But then Im limited to a single namespace It seems there is no option to process multiple namespaces without some cluster permissions Describe the solution youd like Be able to give a list of namespaces either explicit or implicit ie all namespaces but or regexp My cluster provider or myself could initiate a PR for supporting it but we would be sure to agree on the design with Jetstack team Describe alternatives youve considered Using clusterIssuer is not possible and not a good alternative since it would allow us to get some permissions on namespaces like kubesystem we should not have Alternative considered is to launch one instance of certmanager per namespace but this is weird Additional context Some links about multiple namespaces support on controllers Some links about kind of implementation on other controllers Environment details if applicable Kubernetes version eg v v Server Version versionInfoMajor Minor GitVersionv GitCommitb cbbae ec a fc d e d e GitTreeStateclean BuildDate T Z GoVersiongo Compilergc Platformlinuxamd Cloudproviderprovisioner Rancher certmanager version eg v master Install method eg helm or static manifests patched Helm chart from master I would be happy to provide it if requested kind feature releasenote add optional secret namespace annotation to cert resource certmanageriosecretnamespace add cert resource namespace annotation for cert request and cert secret certmanageriocertificatenamespace Description in Problem Our Kubernetes cluster has a lot of users with RBAC per namespace Their applications use Istio Ingress Gateway for traffic management In the current certmanager and Istio architecture its necessary to allow all the users to manage resources in istiosystem namespace to place cert secrets and it looks quite risky in our case Describe the solution youd like If we could store cert resource in users namespace and put secrets in istiosystem namespace it would have solved the problem Solution in our pr add optional namespace annotation to cert resource Weve created a pull request with some improvements on it In case it suits everyone it would be great to include it in future releases This causes a problem with tools that expect ascii Can you please replace the unicode hyphen with a ascii hyphen curl sL tr cd tmpnewcertmanageryaml curl sL tmporigcertmanageryaml cmp tmporigcertmanageryaml tmpnewcertmanageryaml tmporigcertmanageryaml tmpnewcertmanageryaml differ char line diff tmporigcertmanageryaml tmpnewcertmanageryaml c the DNS configuration for Akamai DNS Zone Record Management the DNS configuration for Akamai DNSZone Record Management c containing the DNS configuration for Akamai DNS Zone containing the DNS configuration for Akamai DNSZone c containing the DNS configuration for Akamai DNS Zone containing the DNS configuration for Akamai DNSZone Is your feature request related to a problem Please describe Currently the certificateMatchesSpec function inspects an x certificate and compares its values to the values specified on the Certificate resource This check is tough to maintain as we have to explicitly write comparisons for every single field Further when you consider that a CA may choose to not include or set certain fields as requested it becomes brittle and potentially can lead to infinite issuance loops Describe the solution youd like We should have a better way to identify if a Certificate resource no longer matches the values on the x certificate It should be able to sanely perform a comparison without too much additional effort as well as handle the case where a CA has overridden or ignored certain parameters We could do this by hash the certificatespec parameters that are relevant and persisting this on a Certificates CertificateRequest If we then continue to use the existing implementation to detect that a certificate does not match spec we can then perform a lookup for existing CertificateRequest resources and if one is found that contains the hash of the certificate spec we know that despite these figures not matching the input was what is currently being requested and as such theres no other action to take kind feature Bugs should be filed for issues encountered whilst operating certmanager You should first attempt to resolve your issues through the community support channels eg Slack in order to rule out individual configuration errors Please provide as much detail as possible Describe the bug Not sure if it is a bug Run myappingressyaml with letsencryptstaging clusterissuer https should be working ie However I got certificate not ready Check challenge by kubectl describe challenge I get Reason Waiting for http challenge propagation wrong status code expected I can access after run myappingressyaml letsencryptstaging clusterissuer status is ready and pass official testtemplate test Expected behaviour Get right certificate should be ready to access Steps to reproduce the bug I just followed all official certmanager ingressnginx and metallb manifests installation instructions Anything else we need to know Kubernetes on bare metal Metallb protocol Layer type LoadBalancer IP address one static IP all ports are forwarded to the control plane Node http challenge clusterissuer letsencryptstaging BTW I used to run multiple containerized websites with nginxproxy and dockerletsencryptnginxproxycompanion in my network environment Just want to move them to Kubernetes cluster Environment details Kubernetes version eg v Cloudproviderprovisioner eg GKE kops AWS etc Kubernetes on bare metal Metallb certmanager version eg v Install method eg helm or static manifests manifests kind bug What this PR does why we need it Copies across the existing acme and certmanager v alpha versions to v alpha This PR does not switch anything to utilise this group nor will it be exposed to users This is just the bare minimum required so we can begin internally working on v alpha Omitting release note as this PR does not add a new apiVersion from an enduser perspective Release note releasenote NONE area api Hello I have noticed that support for using asterisk ssl certificates was added could you please let me know how can I modify the helm chart to have it ask and use an asterisk ssl certificate Thanks so much Meir Describe the bug Similar to the other ClusterRoleBinding serviceAccount references this PR aims to set the serviceAccount for the RoleBinding for the leaderelection role to use the template certmanagerserviceAccountName reference instead of include certmanagerfullname This way if a user is referencing an existing serviceAccount for their helm deployment like so yaml serviceAccount create false name mycustomname the rolebinding will correctly bind to the right serviceAccount If this is not done and a user sets the above config for their valuesyaml then the RoleBinding will refer to an unknown serviceAccount Expected behaviour RoleBinding for the leaderelection role should use the template certmanagerserviceAccountName instead of include certmanagerfullname Steps to reproduce the bug Deploy certmanager using the standard process for helm but with the following settings for the serviceAccount block yaml serviceAccount create false name mycustomname Anything else we need to know Environment details Kubernetes version eg v v gke Cloudproviderprovisioner eg GKE kops AWS etc GKE certmanager version eg v v Install method eg helm or static manifests helm kind bug 