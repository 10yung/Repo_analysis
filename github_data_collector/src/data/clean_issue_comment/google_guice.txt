It would be great if the AssistedInjection docs contain an example on how to use it to create an instance The docs go all the way but doesnt create an instance Something inspired or even copied from here would suffice I am using Guice for DI in my application While writing test cases also I want to use Guice for dependency injection Now most of the time I want to inject original instances however in some test cases I want to spy out the injector created instances to control instance behaviour Is it possible to spy all instances created by injector so that individual test cases can enforce selective behaviour while maintaining normal behaviour everywhere else After some hour or so of digging I found via wandering through a debugger stack that the stack trace below actually represents this error No implementation for comneedhamsoftwarensloginserviceActionService was bound Hard to see how this wouldnt be a bug Clearly that message should wind up in the stack trace but it does not see below When I manage check in its open source Ill point you at the fixed version of the configuration removing the binding for this service should reproduce Environment Dec INFO main orgapachecatalinastartupVersionLoggerListenerlog Server version Apache Tomcat Dec INFO main orgapachecatalinastartupVersionLoggerListenerlog Server built Dec UTC Dec INFO main orgapachecatalinastartupVersionLoggerListenerlog Server number Dec INFO main orgapachecatalinastartupVersionLoggerListenerlog OS Name Linux Dec INFO main orgapachecatalinastartupVersionLoggerListenerlog OS Version generic Dec INFO main orgapachecatalinastartupVersionLoggerListenerlog Architecture amd Dec INFO main orgapachecatalinastartupVersionLoggerListenerlog Java Home usrlibjvmjava openjdkamd Dec INFO main orgapachecatalinastartupVersionLoggerListenerlog JVM Version postUbuntu ubuntu Dec INFO main orgapachecatalinastartupVersionLoggerListenerlog JVM Vendor Ubuntu javautilloggingErrorManager comgooglecommonutilconcurrentUncheckedExecutionException javalangIllegalArgumentException at comgooglecommoncacheLocalCacheSegmentgetLocalCachejava at comgooglecommoncacheLocalCachegetLocalCachejava at comgooglecommoncacheLocalCachegetOrLoadLocalCachejava at comgooglecommoncacheLocalCacheLocalLoadingCachegetLocalCachejava at comgooglecommoncacheLocalCacheLocalLoadingCachegetUncheckedLocalCachejava at comgoogleinjectinternalutilStackTraceElementsforMemberStackTraceElementsjava at comgoogleinjectinternalErrorsformatInjectionPointErrorsjava at comgoogleinjectinternalErrorsformatSourceErrorsjava at comgoogleinjectinternalErrorsformatSourceErrorsjava at comgoogleinjectinternalErrorsformatErrorsjava at comgoogleinjectConfigurationExceptiongetMessageConfigurationExceptionjava at javabasejavalangThrowablegetLocalizedMessageThrowablejava at javabasejavalangThrowabletoStringThrowablejava at javabasejavalangStringvalueOfStringjava at javabasejavaioPrintWriterprintlnPrintWriterjava at javabasejavalangThrowableWrappedPrintWriterprintlnThrowablejava at javabasejavalangThrowableprintStackTraceThrowablejava at javabasejavalangThrowableprintStackTraceThrowablejava at orgapachejuliOneLineFormatterformatOneLineFormatterjava at orgapachejuliFileHandlerpublishFileHandlerjava at orgapachejuliAsyncFileHandlerpublishInternalAsyncFileHandlerjava at orgapachejuliAsyncFileHandlerLogEntryflushAsyncFileHandlerjava at orgapachejuliAsyncFileHandlerLoggerThreadrunAsyncFileHandlerjava Caused by javalangIllegalArgumentException at comgoogleinjectinternalasmClassReaderinitUnknown Source at comgoogleinjectinternalasmClassReaderinitUnknown Source at comgoogleinjectinternalasmClassReaderinitUnknown Source at comgoogleinjectinternalutilLineNumbersinitLineNumbersjava at comgoogleinjectinternalutilStackTraceElements loadStackTraceElementsjava at comgoogleinjectinternalutilStackTraceElements loadStackTraceElementsjava at comgooglecommoncacheLocalCacheLoadingValueReferenceloadFutureLocalCachejava at comgooglecommoncacheLocalCacheSegmentloadSyncLocalCachejava at comgooglecommoncacheLocalCacheSegmentlockedGetOrLoadLocalCachejava at comgooglecommoncacheLocalCacheSegmentgetLocalCachejava more Similar to but covering a different error condition Before javalangClassNotFoundException aA at at javalangClassLoaderloadClassClassLoaderjava Caused javalangNoClassDefFoundError aA at javalangClassgetDeclaredMethods Native Method at javalangClassprivateGetDeclaredMethodsClassjava at javalangClassgetDeclaredMethodsClassjava at comgoogleinjectinternalDeclaredMembersgetDeclaredMethodsDeclaredMembersjava at comgoogleinjectspiInjectionPointgetDeclaredMethodsInjectionPointjava at comgoogleinjectspiInjectionPointgetInjectionPointsInjectionPointjava at comgoogleinjectspiInjectionPointforInstanceMethodsAndFieldsInjectionPointjava at comgoogleinjectinternalMembersInjectorStorecreateWithListenersMembersInjectorStorejava at comgoogleinjectinternalMembersInjectorStoreaccess MembersInjectorStorejava at comgoogleinjectinternalMembersInjectorStore createMembersInjectorStorejava at comgoogleinjectinternalMembersInjectorStore createMembersInjectorStorejava at comgoogleinjectinternalFailableCache loadFailableCachejava at comgooglecommoncacheLocalCacheLoadingValueReferenceloadFutureLocalCachejava at comgooglecommoncacheLocalCacheSegmentloadSyncLocalCachejava at comgooglecommoncacheLocalCacheSegmentlockedGetOrLoadLocalCachejava at comgooglecommoncacheLocalCacheSegmentgetLocalCachejava Caused comgooglecommonutilconcurrentExecutionError at comgooglecommoncacheLocalCacheSegmentgetLocalCachejava at comgooglecommoncacheLocalCachegetLocalCachejava at comgooglecommoncacheLocalCachegetOrLoadLocalCachejava at comgooglecommoncacheLocalCacheLocalLoadingCachegetLocalCachejava at comgooglecommoncacheLocalCacheLocalLoadingCachegetUncheckedLocalCachejava at comgoogleinjectinternalFailableCachegetFailableCachejava at comgoogleinjectinternalMembersInjectorStoregetMembersInjectorStorejava at comgoogleinjectinternalConstructorInjectorStorecreateConstructorConstructorInjectorStorejava at comgoogleinjectinternalConstructorInjectorStoreaccess ConstructorInjectorStorejava at comgoogleinjectinternalConstructorInjectorStore createConstructorInjectorStorejava at comgoogleinjectinternalConstructorInjectorStore createConstructorInjectorStorejava at comgoogleinjectinternalFailableCache loadFailableCachejava at comgooglecommoncacheLocalCacheLoadingValueReferenceloadFutureLocalCachejava at comgooglecommoncacheLocalCacheSegmentloadSyncLocalCachejava at comgooglecommoncacheLocalCacheSegmentlockedGetOrLoadLocalCachejava at comgooglecommoncacheLocalCacheSegmentgetLocalCachejava Caused comgooglecommonutilconcurrentExecutionError at comgooglecommoncacheLocalCacheSegmentgetLocalCachejava at comgooglecommoncacheLocalCachegetLocalCachejava at comgooglecommoncacheLocalCachegetOrLoadLocalCachejava at comgooglecommoncacheLocalCacheLocalLoadingCachegetLocalCachejava at comgooglecommoncacheLocalCacheLocalLoadingCachegetUncheckedLocalCachejava at comgoogleinjectinternalFailableCachegetFailableCachejava at comgoogleinjectinternalConstructorInjectorStoregetConstructorInjectorStorejava at comgoogleinjectinternalConstructorBindingImplinitializeConstructorBindingImpljava at comgoogleinjectinternalInjectorImplinitializeBindingInjectorImpljava at comgoogleinjectinternalAbstractBindingProcessorProcessorinitializeBindingAbstractBindingProcessorjava at comgoogleinjectinternalAbstractBindingProcessorProcessorlambdascheduleInitialization AbstractBindingProcessorjava at comgoogleinjectinternalProcessedBindingDatainitializeBindingsProcessedBindingDatajava at comgoogleinjectinternalInternalInjectorCreatorinitializeStaticallyInternalInjectorCreatorjava at comgoogleinjectinternalInternalInjectorCreatorbuildInternalInjectorCreatorjava at comgoogleinjectinternalInjectorImplcreateChildInjectorInjectorImpljava at After javalangClassNotFoundException aA at at javalangClassLoaderloadClassClassLoaderjava Caused javalangNoClassDefFoundError aA at javalangClassgetDeclaredMethods Native Method at javalangClassprivateGetDeclaredMethodsClassjava at javalangClassgetDeclaredMethodsClassjava at comgoogleinjectinternalDeclaredMembersgetDeclaredMethodsDeclaredMembersjava at comgoogleinjectspiInjectionPointgetDeclaredMethodsInjectionPointjava at comgoogleinjectspiInjectionPointgetInjectionPointsInjectionPointjava at comgoogleinjectspiInjectionPointforInstanceMethodsAndFieldsInjectionPointjava at comgoogleinjectinternalMembersInjectorStorecreateWithListenersMembersInjectorStorejava at comgoogleinjectinternalMembersInjectorStoreaccess MembersInjectorStorejava at comgoogleinjectinternalMembersInjectorStore createMembersInjectorStorejava at comgoogleinjectinternalMembersInjectorStore createMembersInjectorStorejava at comgoogleinjectinternalFailableCache loadFailableCachejava at comgooglecommoncacheLocalCacheLoadingValueReferenceloadFutureLocalCachejava at comgooglecommoncacheLocalCacheSegmentloadSyncLocalCachejava at comgooglecommoncacheLocalCacheSegmentlockedGetOrLoadLocalCachejava at comgooglecommoncacheLocalCacheSegmentgetLocalCachejava at comgooglecommoncacheLocalCachegetLocalCachejava at comgooglecommoncacheLocalCachegetOrLoadLocalCachejava at comgooglecommoncacheLocalCacheLocalLoadingCachegetLocalCachejava at comgooglecommoncacheLocalCacheLocalLoadingCachegetUncheckedLocalCachejava at comgoogleinjectinternalFailableCachegetFailableCachejava at comgoogleinjectinternalMembersInjectorStoregetMembersInjectorStorejava at comgoogleinjectinternalConstructorInjectorStorecreateConstructorConstructorInjectorStorejava at comgoogleinjectinternalConstructorInjectorStoreaccess ConstructorInjectorStorejava at comgoogleinjectinternalConstructorInjectorStore createConstructorInjectorStorejava at comgoogleinjectinternalConstructorInjectorStore createConstructorInjectorStorejava at comgoogleinjectinternalFailableCache loadFailableCachejava at comgooglecommoncacheLocalCacheLoadingValueReferenceloadFutureLocalCachejava at comgooglecommoncacheLocalCacheSegmentloadSyncLocalCachejava at comgooglecommoncacheLocalCacheSegmentlockedGetOrLoadLocalCachejava at comgooglecommoncacheLocalCacheSegmentgetLocalCachejava at comgooglecommoncacheLocalCachegetLocalCachejava at comgooglecommoncacheLocalCachegetOrLoadLocalCachejava at comgooglecommoncacheLocalCacheLocalLoadingCachegetLocalCachejava at comgooglecommoncacheLocalCacheLocalLoadingCachegetUncheckedLocalCachejava at comgoogleinjectinternalFailableCachegetFailableCachejava at comgoogleinjectinternalConstructorInjectorStoregetConstructorInjectorStorejava at comgoogleinjectinternalConstructorBindingImplinitializeConstructorBindingImpljava at comgoogleinjectinternalInjectorImplinitializeBindingInjectorImpljava at comgoogleinjectinternalAbstractBindingProcessorProcessorinitializeBindingAbstractBindingProcessorjava at comgoogleinjectinternalAbstractBindingProcessorProcessorlambdascheduleInitialization AbstractBindingProcessorjava at comgoogleinjectinternalProcessedBindingDatainitializeBindingsProcessedBindingDatajava at comgoogleinjectinternalInternalInjectorCreatorinitializeStaticallyInternalInjectorCreatorjava Caused comgoogleinjectCreationException Unable to create injector see the following errors Failed to inspect methods in bB at error at comgoogleinjectinternalErrorsthrowCreationExceptionIfErrorsExistErrorsjava at comgoogleinjectinternalInternalInjectorCreatorinitializeStaticallyInternalInjectorCreatorjava at comgoogleinjectinternalInternalInjectorCreatorbuildInternalInjectorCreatorjava at comgoogleinjectinternalInjectorImplcreateChildInjectorInjectorImpljava at Using Guice with Kotlin is annoying because Kotlin inserts implied wildcards For example this Kotlin code class Jesse Inject var tacos ListTaco null is equivalent to this Java code class Jesse Inject List extends Taco tacos Note that Kotlin s ListTaco is equivalent to Java s List extends Taco And this is really annoying because it s invisible in the source code I claim that nobody ever wants to differentiate between types with wildcards and similar types without Ie nobody uses both KeyList extends Taco KeyListTaco in the same application on purpose I d like to implement an optin feature for Guice that canonicalizes keys to strip all wildcards from their types If I implement such a thing is anyone interested in code reviewing It could remove a particularly annoying stumbling block from Google s best dependency injector Hello there We created a binding using toProvider bindProvidedClassclassannotatedWithNamesnamedprovidedClasstoProviderClassProviderclassinSingletonclass While creating Injector the following error happens javalangClassCastException comsunproxyProxy cannot be cast to javaxinjectProvider at comgoogleinjectinternalBoundProviderFactorygetBoundProviderFactoryjava What is wrong with it I also tried to get class instance through ProvidedClass providedClass injectorgetInstanceKeygetProvidedClassclass NamesnamedprovidedClass but getting the same exception I will appreciate any suggestion Thanks Krys I would like to inject Optional properties without using the optional binder This lets me do PropertyProxyPortclass OptionalInteger proxyPort so I can bind a property with an annotation Before javalangArrayStoreException sunreflectannotationTypeNotPresentExceptionProxy at sunreflectannotationAnnotationParserparseClassArrayAnnotationParserjava at sunreflectannotationAnnotationParserparseArrayAnnotationParserjava at sunreflectannotationAnnotationParserparseMemberValueAnnotationParserjava at sunreflectannotationAnnotationParserparseAnnotation AnnotationParserjava at sunreflectannotationAnnotationParserparseAnnotations AnnotationParserjava at sunreflectannotationAnnotationParserparseAnnotationsAnnotationParserjava at javalangreflectExecutabledeclaredAnnotationsExecutablejava at javalangreflectExecutabledeclaredAnnotationsExecutablejava at javalangreflectExecutablegetAnnotationExecutablejava at javalangreflectMethodgetAnnotationMethodjava at comgoogleinjectspiInjectionPointgetAtInjectInjectionPointjava at comgoogleinjectspiInjectionPointgetInjectionPointsInjectionPointjava at comgoogleinjectspiInjectionPointforInstanceMethodsAndFieldsInjectionPointjava at comgoogleinjectinternalMembersInjectorStorecreateWithListenersMembersInjectorStorejava at comgoogleinjectinternalMembersInjectorStoreaccess MembersInjectorStorejava at comgoogleinjectinternalMembersInjectorStore createMembersInjectorStorejava at comgoogleinjectinternalMembersInjectorStore createMembersInjectorStorejava at comgoogleinjectinternalFailableCache loadFailableCachejava at comgooglecommoncacheLocalCacheLoadingValueReferenceloadFutureLocalCachejava at comgooglecommoncacheLocalCacheSegmentloadSyncLocalCachejava at comgooglecommoncacheLocalCacheSegmentlockedGetOrLoadLocalCachejava at comgooglecommoncacheLocalCacheSegmentgetLocalCachejava Caused comgooglecommonutilconcurrentUncheckedExecutionException at comgooglecommoncacheLocalCacheSegmentgetLocalCachejava at comgooglecommoncacheLocalCachegetLocalCachejava at comgooglecommoncacheLocalCachegetOrLoadLocalCachejava at comgooglecommoncacheLocalCacheLocalManualCachegetLocalCachejava at comgooglecommoncacheLocalCacheLocalManualCachegetUncheckedLocalCachejava at comgoogleinjectinternalFailableCachegetFailableCachejava at comgoogleinjectinternalMembersInjectorStoregetMembersInjectorStorejava at comgoogleinjectinternalConstructorInjectorStorecreateConstructorConstructorInjectorStorejava at comgoogleinjectinternalConstructorInjectorStoreaccess ConstructorInjectorStorejava at comgoogleinjectinternalConstructorInjectorStore createConstructorInjectorStorejava at comgoogleinjectinternalConstructorInjectorStore createConstructorInjectorStorejava at comgoogleinjectinternalFailableCache loadFailableCachejava at comgooglecommoncacheLocalCacheLoadingValueReferenceloadFutureLocalCachejava at comgooglecommoncacheLocalCacheSegmentloadSyncLocalCachejava at comgooglecommoncacheLocalCacheSegmentlockedGetOrLoadLocalCachejava at comgooglecommoncacheLocalCacheSegmentgetLocalCachejava Caused comgooglecommonutilconcurrentUncheckedExecutionException at comgooglecommoncacheLocalCacheSegmentgetLocalCachejava at comgooglecommoncacheLocalCachegetLocalCachejava at comgooglecommoncacheLocalCachegetOrLoadLocalCachejava at comgooglecommoncacheLocalCacheLocalManualCachegetLocalCachejava at comgooglecommoncacheLocalCacheLocalManualCachegetUncheckedLocalCachejava at comgoogleinjectinternalFailableCachegetFailableCachejava at comgoogleinjectinternalConstructorInjectorStoregetConstructorInjectorStorejava at comgoogleinjectinternalConstructorBindingImplinitializeConstructorBindingImpljava at comgoogleinjectinternalInjectorImplinitializeBindingInjectorImpljava at comgoogleinjectinternalAbstractBindingProcessorProcessor runAbstractBindingProcessorjava at comgoogleinjectinternalProcessedBindingDatainitializeBindingsProcessedBindingDatajava at comgoogleinjectinternalInternalInjectorCreatorinitializeStaticallyInternalInjectorCreatorjava at comgoogleinjectinternalInternalInjectorCreatorbuildInternalInjectorCreatorjava at comgoogleinjectGuicecreateInjectorGuicejava at comgoogleinjectGuicecreateInjectorGuicejava at After javalangArrayStoreException sunreflectannotationTypeNotPresentExceptionProxy at sunreflectannotationAnnotationParserparseClassArrayAnnotationParserjava at sunreflectannotationAnnotationParserparseArrayAnnotationParserjava at sunreflectannotationAnnotationParserparseMemberValueAnnotationParserjava at sunreflectannotationAnnotationParserparseAnnotation AnnotationParserjava at sunreflectannotationAnnotationParserparseAnnotations AnnotationParserjava at sunreflectannotationAnnotationParserparseAnnotationsAnnotationParserjava at javalangreflectExecutabledeclaredAnnotationsExecutablejava at javalangreflectExecutabledeclaredAnnotationsExecutablejava at javalangreflectExecutablegetAnnotationExecutablejava at javalangreflectMethodgetAnnotationMethodjava at comgoogleinjectspiInjectionPointgetAtInjectInjectionPointjava at comgoogleinjectspiInjectionPointgetInjectionPointsInjectionPointjava at comgoogleinjectspiInjectionPointforInstanceMethodsAndFieldsInjectionPointjava at comgoogleinjectinternalMembersInjectorStorecreateWithListenersMembersInjectorStorejava at comgoogleinjectinternalMembersInjectorStoreaccess MembersInjectorStorejava at comgoogleinjectinternalMembersInjectorStore createMembersInjectorStorejava at comgoogleinjectinternalMembersInjectorStore createMembersInjectorStorejava at comgoogleinjectinternalFailableCache loadFailableCachejava at comgooglecommoncacheLocalCacheLoadingValueReferenceloadFutureLocalCachejava at comgooglecommoncacheLocalCacheSegmentloadSyncLocalCachejava at comgooglecommoncacheLocalCacheSegmentlockedGetOrLoadLocalCachejava at comgooglecommoncacheLocalCacheSegmentgetLocalCachejava at comgooglecommoncacheLocalCachegetLocalCachejava at comgooglecommoncacheLocalCachegetOrLoadLocalCachejava at comgooglecommoncacheLocalCacheLocalManualCachegetLocalCachejava at comgooglecommoncacheLocalCacheLocalManualCachegetUncheckedLocalCachejava at comgoogleinjectinternalFailableCachegetFailableCachejava at comgoogleinjectinternalMembersInjectorStoregetMembersInjectorStorejava at comgoogleinjectinternalConstructorInjectorStorecreateConstructorConstructorInjectorStorejava at comgoogleinjectinternalConstructorInjectorStoreaccess ConstructorInjectorStorejava at comgoogleinjectinternalConstructorInjectorStore createConstructorInjectorStorejava at comgoogleinjectinternalConstructorInjectorStore createConstructorInjectorStorejava at comgoogleinjectinternalFailableCache loadFailableCachejava at comgooglecommoncacheLocalCacheLoadingValueReferenceloadFutureLocalCachejava at comgooglecommoncacheLocalCacheSegmentloadSyncLocalCachejava at comgooglecommoncacheLocalCacheSegmentlockedGetOrLoadLocalCachejava at comgooglecommoncacheLocalCacheSegmentgetLocalCachejava at comgooglecommoncacheLocalCachegetLocalCachejava at comgooglecommoncacheLocalCachegetOrLoadLocalCachejava at comgooglecommoncacheLocalCacheLocalManualCachegetLocalCachejava at comgooglecommoncacheLocalCacheLocalManualCachegetUncheckedLocalCachejava at comgoogleinjectinternalFailableCachegetFailableCachejava at comgoogleinjectinternalConstructorInjectorStoregetConstructorInjectorStorejava at comgoogleinjectinternalConstructorBindingImplinitializeConstructorBindingImpljava at comgoogleinjectinternalInjectorImplinitializeBindingInjectorImpljava at comgoogleinjectinternalAbstractBindingProcessorProcessor runAbstractBindingProcessorjava at comgoogleinjectinternalProcessedBindingDatainitializeBindingsProcessedBindingDatajava at comgoogleinjectinternalInternalInjectorCreatorinitializeStaticallyInternalInjectorCreatorjava Caused comgoogleinjectCreationException Unable to create injector see the following errors Failed to retrieve Inject from xxxRedactedxxx at error at comgoogleinjectinternalErrorsthrowCreationExceptionIfErrorsExistErrorsjava at comgoogleinjectinternalInternalInjectorCreatorinitializeStaticallyInternalInjectorCreatorjava at comgoogleinjectinternalInternalInjectorCreatorbuildInternalInjectorCreatorjava at comgoogleinjectGuicecreateInjectorGuicejava at comgoogleinjectGuicecreateInjectorGuicejava at The enriched error message made it possible to identify the JAR out of hundreds of candidates which needed to be recompiled against an updated dependency According to ASM page ASM version is required to support Java In f f bf e f bc a c c e c ASM was upgraded to already but a new release wasnt conducted yet Id like to write some JMH benchmarks to get some throughput stats of guice in single and multithreaded usecases I think that this would be a great addition to the codebase