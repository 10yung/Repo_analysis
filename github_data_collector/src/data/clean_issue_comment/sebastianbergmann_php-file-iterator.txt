 Use GitHub Actions instead of Travis CI Have Composer in toolscomposer and managed through composer selfupdate see updatetools target in buildxml Install Psalm using Phive as toolspsalm phive install copy psalm Install PHPCSFixer using Phive as toolsphpcsfixer phive install copy phpcsfixer Create Psalm configuration Add Psalm build step to GitHub Actionsbased CI workflow Add PHPCSFixer build step to GitHub Actionsbased CI workflow Hello we noticed that our phpunit tests started to freeze before execution for up to minute After debugging I found that the bottclneck is in the fileIteratorFacadegetFilesAsArray method It foreaches over every file in the folders recursevely even if the folders are excluded Let me explain it with the example Consider we have the following structure bash first exclude exclude php exclude php first php second second php second php and the following simple script php php require vendorautoloadphp use SebastianBergmann FileIterator Factory factory new Factory iterator factorygetFileIteratorfirst firstexclude foreach iterator as file echo filegetRealPath n n When I add a debugging code to the vendor here I get the following result bash tmpphpunitfilterfirstfirst php Excluding tmpphpunitfilterfirstexcludeexclude php Excluding tmpphpunitfilterfirstexcludeexclude php tmpphpunitfilterfirstsecondsecond php Usersmaksrafalkotmpphpunitfilterfirstsecondsecond php Please note that while firstexclude folder is excluded Iterator keeps traversing over all files from excluded folder Imagine we have hundred of thousands of files vendor folders inside excluded folder but each file is anyway processed What is the right way to do it From my opinion folders that are excluded must not be traversed Lets see how symfonyfinder does it Again create a simple script for the same folder structure php php require vendorautoloadphp use Symfony Component Finder Finder finder new Finder finderfilesinfirstexcludeexclude foreach finder as file echo filegetRealPath n n and lets see the result bash tmpphpunitfilterfirstfirst php Excluding exclude tmpphpunitfilterfirstsecondsecond php tmpphpunitfilterfirstsecondsecond php As you can see symfonyfinder meets firstexcluded folder sees that it is excluded and does not traverse it farther This is done thanks to FilterIterator and its implementation in symfonyfinder ExcludeDirectoryFilterIterator Do you think we need to implement something similar in phpfileiterator Do you have any objections or know something that is incompatible with the filter iterator Thank you 