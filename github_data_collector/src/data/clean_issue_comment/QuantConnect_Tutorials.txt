In the Historical Volatility and Implied Volatility Tutorial for example there is no documentation for the variables of the method python def bsmpriceoptiontype sigma s k r T q pass what is q Also we should be able to run it in Research with QuantConnect data After cloning the Strategy Small Capitalization Stocks Premium Anomaly and running it I receive FineFundamental object has no attribute MarketCap error Potential Solution Replace this piece of code for i in fine iMarketCap iEarningReportsBasicAverageSharesThreeMonths iEarningReportsBasicEPSTwelveMonths iValuationRatiosPERatio sortedmarketcap sorted x for x in fine if xMarketCap keylambda x xMarketCap with marketcap Calculate the market cap and add the MarketCap property to fine universe object for i in fine marketcap i iEarningReportsBasicAverageSharesThreeMonths iEarningReportsBasicEPSTwelveMonths iValuationRatiosPERatio sortedmarketcap sorted x for x in fine if marketcap x keylambda x marketcap x So both the code snippet in Methodhtml and the backtest URL in Algorithmhtml need to be updated This file does not exist Found in line Expected Behavior Lets imagine we have two stocks Y and X When going long the spread we invest k of our portfolio to buy Y while simultaneously selling the quantity of stock in X which equals the market value of our position in YBeta The regression coefficient Beta is established by finding a linear relationship between logY and logX The algorithm should put on a long spread position when the value of the spread exceeds meanspread StdDevspread and a short spread position when the value of spread exceeds meanspread StdDevspread The algorithm should close all positions when the spread crosses the mean of the spread from either direction Actual Behavior Price ratio between stock price Y and X is being used to determine the size of the position in stock X instead of using the regression coefficient Beta Also the number of shares boughtsold for stock X should be a function of the market value of stock Y The current value of spread spread which is being used to go long or short returns the first element in the spread series instead of the latest No mechanism is established to close all positions when the spread reverts to mean Potential Solution Use the regression coefficient Beta and the market value of the position in stock Y to determine position sizing in stock X Retrieve correct current value for the spread Implement a fix to close all positions when the spread reverts to mean Reproducing the Problem Running the Cointegration trading algorithm in the QC Strategy Library will reproduce this problem See the algorithm at the link below Checklist x I have completely filled out this template x I have confirmed that this issue exists on the current master branch x I have confirmed that this is not a duplicate issue by searching issues x I have provided detailed steps to reproduce the issue Expected Behavior The algorithm should place trades only when the account has enough cash to places both orders ie long order for one asset and short order for the second asset Actual Behavior The algorithm will place an order for one of the assets but not the other if it doesnt meet proper margin requirements This leads to portfolio having one long or one short position and it wont trade again once this is established resulting in imbalanced holdings and the strategy will fail to execute properly for the remainder of the backtesting period Potential Solution Add logic in OnData method to check for margin requirements and only allow orders to be placed if the account can afford both trades I have tried to test this but the result is that the algorithm places only a handful of trades rather than the anticipated several hundred see the link to the test algorithm below Proper controls should allow for significant trading volume but only when both trades can be afforded Reproducing the Problem Running the copula pairs trading algorithm in the QC Strategy Library will reproduce this problem See the algorithm at the link below Checklist x I have completely filled out this template x I have confirmed that this issue exists on the current master branch x I have confirmed that this is not a duplicate issue by searching issues x I have provided detailed steps to reproduce the issue Template inspired by premium quandl data necessary for upcoming earnings announcements need premium data for companies which announce stock repurchase program the entry signal occurs if today s close is greater than or equal to the highest close during the stock s entire history uses regression model which is calculated every month for all eligible stocks using the Fama and French three factors as independent variables