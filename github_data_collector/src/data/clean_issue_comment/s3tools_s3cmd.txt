The most recent commit b be ae e f fa c c bc edea e d to runtestspy changed the name of the third test bucket from prefixAutotest to all lowercase to match the updated AWS naming rules This was a necessary change but oddly it seems that the Buckets list test still checks for the capitalized version failing as a result when it doesnt find it Is it really possible that runtestspy has been broken for over a year or am I missing something basic Wouldnt this have been caught by running runtestspy when b be ae e f fa c c bc edea e d was accepted Version on Mac OS X Catalina How to Reproduce Configure a connection to DigitalOcean Spaces using s cmd configure This is based on the documentation for setting up s cmd provided by DO Spaces Access Key REDACTED Secret Key REDACTED Default Region S Endpoint sgp digitaloceanspacescom DNSstyle buckethostnameport template for accessing a bucket bucketssgp digitaloceanspacescom Encryption password Path to GPG program usrlocalbingpg Use HTTPS protocol True HTTP Proxy server name HTTP Proxy server port The configuration succeeds and its possible to list all buckets in the Spaces region using the s cmd ls command However when trying to create a new bucket the following error occurs even though this bucket name is available when checking from the DO web dashboard s cmd mb s s cmdbuckettest ERROR S error SignatureDoesNotMatch This seems to be a problem with s cmd because creating a new bucket using the same Spaces credential and endpoint using a different S compatible client such as CyberDuck does work So I had a variable in the URL which failed to get set in a backup script So I accidentally uploaded data to a bucket that isnt mine I cant tell exactly what happened It spent time uploading but then it said failed So where did the file go upload tmptmpfileYtibQ l px UkjuIVW e s databasedatabaselocal T targz of of in s kBs done upload tmptmpfileYtibQ l px UkjuIVW e s databasedatabaselocal T targz of of in s kBs done ERROR S error NoSuchBucket The specified bucket does not exist ERROR S error AccessDenied Access Denied Thanks On my installation YAML files whether yaml or yml get uploaded with a MIME type of texthtml when using nomimemagic as required because not disabling pythonmagic will reliably break my site due to its errors in uploading JS and CSS with the wrong MIME type for years requiring the nomimemagic workaround lsbrelease a No LSB modules are available Distributor ID Ubuntu Description Ubuntu LTS Release Codename bionic s cmd version s cmd version s cmd put aclpublic guessmimetype nomimemagic v v addheaderAccessControlAllowOrigin wikistaticmetadatacustomyaml s wwwgwernnet INFO No cache file found creating it INFO Compiling list of local files INFO Running stat and readingcalculating MD values on files this may take some time INFO Summary local files to upload upload wikistaticmetadatacustomyaml s wwwgwernnetcustomyaml of of in s kBs done Public URL of the object is PM curl I HTTP OK xamzid TpknEq FEt wMuZsGwqN YLlMvUrh v NiQHpgqGY vWgYogfhbEYNYuskrPfyCTkEoF xamzrequestid B F A B Date Sun Nov GMT LastModified Sun Nov GMT ETag e b e cc e ec cbddf bb xamzmetas cmdattrs atime ctime gid gnamegwernmd e b e cc e ec cbddf bbmode mtime uid unamegwern AcceptRanges bytes ContentType texthtml ContentLength Server AmazonS s cmd put aclpublic guessmimetype nomimemagic v v addheaderAccessControlAllowOrigin customyml s wwwgwernnet INFO No cache file found creating it INFO Compiling list of local files INFO Running stat and readingcalculating MD values on files this may take some time INFO Summary local files to upload upload customyml s wwwgwernnetcustomyml of of in s kBs done Public URL of the object is PM curl I HTTP OK xamzid r WqkhmDeaE bWabkYBjLTmpuMjOvVdt VSaymp s n gvrkNPCWxsikRTEqLuD kDTi H aw xamzrequestid E EC F AE B Date Sun Nov GMT LastModified Sun Nov GMT ETag e b e cc e ec cbddf bb xamzmetas cmdattrs atime ctime gid gnamegwernmd e b e cc e ec cbddf bbmode mtime uid unamegwern AcceptRanges bytes ContentType texthtml Since this is a YAML file using either of the most common and official file extensions for YAML and there is nothing strange or nonstandard about it I would expect it to be uploaded with a more correct MIME type Whatever a YAML files true MIME type may be textplain or applicationyaml or applicationxyaml or textyaml its definitely not texthtml and that causes web browsers to try and fail to render them as HTML which is annoying It would be better to be uploaded with a nonHTML mimetype so it gets shown more literally Incidentally this does work if you do not disable MIME magic but given its unreliability thats useless s cmd put aclpublic guessmimetype v v addheaderAccessControlAllowOrigin wikistaticmetadatacustomyaml s wwwgwernnetstatic INFO No cache file found creating it INFO Compiling list of local files INFO Running stat and readingcalculating MD values on files this may take some time INFO Summary local files to upload upload wikistaticmetadatacustomyaml s wwwgwernnetstaticcustomyaml of of in s kBs done Public URL of the object is curl I HTTP OK xamzid bXlz NXwyRQP fk Z MB XtVJXhQZNU Qt W ibX rFAR kZVuvsTxNsrI HBxgWU ng Y xamzrequestid Date Sun Nov GMT LastModified Sun Nov GMT ETag e b e cc e ec cbddf bb xamzmetas cmdattrs atime ctime gid gnamegwernmd e b e cc e ec cbddf bbmode mtime uid unamegwern AcceptRanges bytes ContentType textplain ContentLength Server AmazonS version v when I run the followed cmdhost with port error has ocuured bash s cmd debug nossl accesskeyAKIAIOSFODNN EXAMPLE secretkeywJalrXUtnFEMIK MDENGbPxRfiCYEXAMPLEKEY host hostbucket ls s cluster s txt bash s cmd debug nossl accesskeyAKIAIOSFODNN EXAMPLE secretkeywJalrXUtnFEMIK MDENGbPxRfiCYEXAMPLEKEY host hostbucket ls s cluster but when I remove port from host everything is fine successtxt Regardless to specifying p s cmd sync DOES NOT preserve original timestamp when dealing with path changes and remote copy while new uploads DO preserve original timestamp from local file How to reproduce run alpine docker image execute following commands bash echo edge etcapkrepositories echo testing etcapkrepositories apk update apk upgrade apk add s cmdtesting s cmd help The output is something like this An unexpected error has occurred Please try reproducing the error using the latest s cmd code from the git master branch found at and have a look at the known issues list If the error persists please report the following lines removing any private info as necessary to s toolsbugslistssourceforgenet Error loading some components of s cmd Import Error Invoked as usrbins cmd help Problem class ModuleNotFoundError No module named S S cmd unknown version Module import problem python default Oct GCC environment LANGNone Traceback most recent call last File usrbins cmd line in module from S ExitCodes import ModuleNotFoundError No module named S An unexpected error has occurred Please try reproducing the error using the latest s cmd code from the git master branch found at and have a look at the known issues list If the error persists please report the above lines removing any private info as necessary to s toolsbugslistssourceforgenet How to fix it Hey I am testing s cmd sync for backup purposes with requirement of awskms serversideencryption but the problem is files smaller then MiB default threshold for multipart are always uploaded because of md hash mismatch s cmd d sync deleteremoved bucketname s bucketname DEBUG XFER smallfile md mismatch src c aa df e ed dst f c e a e ae fdeceb adc Files uploaded in multipart mode do not have this problem they are not reuploaded on every run ls lash bucketname total M drwxrwxrx user user Nov K drwx user user K Nov M rwrwr user user M Nov file M rwrwr user user M Nov file M rwrwr user user M Nov file M rwrwr user user M Nov file M rwrwr user user M Nov file K rwrwr user user Nov smallfile s cmd sync deleteremoved bucketname s bucketname upload bucketnamefile s bucketnamefile of of in s MBs done upload bucketnamefile s bucketnamefile part of MB of of in s MBs done upload bucketnamefile s bucketnamefile part of kB of of in s kBs done upload bucketnamefile s bucketnamefile of of in s MBs done upload bucketnamefile s bucketnamefile of of in s MBs done upload bucketnamefile s bucketnamefile of of in s MBs done upload bucketnamesmallfile s bucketnamesmallfile of of in s Bs done Done Uploaded bytes in seconds MBs s cmd sync deleteremoved bucketname s bucketname upload bucketnamefile s bucketnamefile of of in s MBs done upload bucketnamefile s bucketnamefile of of in s MBs done upload bucketnamefile s bucketnamefile of of in s MBs done upload bucketnamefile s bucketnamefile of of in s MBs done upload bucketnamesmallfile s bucketnamesmallfile of of in s Bs done Done Uploaded bytes in seconds MBs s cmd sync deleteremoved bucketname s bucketname upload bucketnamefile s bucketnamefile of of in s MBs done upload bucketnamefile s bucketnamefile of of in s MBs done upload bucketnamefile s bucketnamefile of of in s MBs done upload bucketnamefile s bucketnamefile of of in s MBs done upload bucketnamesmallfile s bucketnamesmallfile of of in s Bs done Done Uploaded bytes in seconds MBs Using nocheckmd workarounds the problem s cmd sync behaviour is superior to aws s sync as it considers also the md hash of the source file aws s sync uses only mtime and size attributes to determine what to sync so it will silently ignore bitrotted or silently damaged files Yet with current behavior using s cmd MiB files will be uploaded every time the command is run so it will cause extra API calls for upload extra upload bandwidth and cause extra versions which use extra space one has to pay This might be related to Version used is the latest packaged in Fedora s cmd version s cmd version I can not use s cmd to put a file with addheaderXAmzmetaasdadasdad just because of underline s cmd put addheaderXAmzmetaasdadasdad testgo s zztest ERROR Parameter problem Invalid characters in header name XAmzmetaasdad Is there any solution I cannot configure or use this tool I get the above error message My keys work fine with CrossFTP