Seems to be more stable to use deparse here r tf tempfile testthatverifyoutputtf cNAcharacter NA Warning Creating reference output testthatverifyoutputtf cNAcharacter NA catreadLinestf sep n cchr NA NA Error text unexpected c supCreated on by the reprex package v sup Completely stolen the code from but renamed function to skiponghactions instead of skiponactions please feel free to change Thanks Hi testthat developers wave Ive fixed a couple of typos I found in the documentation of the package using spellingspellcheckpackage there are apparently some in the NEWSmd file but I didnt know if I should edit it or not I then regenerated the doc using devtoolsdocument I can run this fine in normal REPL But it doesnt work when I test it using Run Tests button in RStudio see attached picture r remotesinstallgithubxiaodaighdiskframe ref chunkgroupby librarydiskframe librarytestthat testthatnew groupby framework irisdf iris asdiskframe grpby expectwarningirisdf groupbySpecies summarizemeanPetalLength sumx sumPetalLengthSepalWidth sdSepalWidth PetalLength varSepalWidth SepalWidth collect grpby iris groupbySpecies summarizemeanPetalLength sumx sumPetalLengthSepalWidth sdSepalWidth PetalLength varSepalWidth SepalWidth arrange for n in namesgrpby expecttrueallgrpby n grpby n allabsgrpby n grpby n deleteirisdf This might be my misunderstanding of how expectcondition should work but r librarytestthat signal functionclass condition simpleConditionNULL classcondition cclass condition signalConditioncondition testthatconditions can be expected expectconditionsignalhello class hello OK expectconditionsignalhello signalworld class hello OK expectconditionsignalhello signalworld class world FAIL Error Test failed conditions can be expected text threw an condition with unexpected class Backtrace testthatexpectcondition globalsignalhello supCreated on by the reprex package v sup Should expectcondition succeed if at least one condition is thrown matching the requested class Currently testthat sets a number of environment variables within testdir However its possible to run test files individually eg with testthattestfile RStudio uses this when running a single testthat test file Would it make sense to set TESTTHAT or maybe TESTTHATFILE within testfile Apologies if youve already implemented this and I missed it but I think testthat needs a skiponactions function like this skiponactions function if identicalSysgetenvGITHUBACTIONS true returninvisibleTRUE skipOn GitHub Actions I can submit a PR if that would be desired My use case is the same as in I want to be able to get the non exit value from testfile Its a bit strange that testdir testcheck and the internal testfiles accept the stoponfailure but the workhorse testfile doesnt The simplest way to address this might be to export testfiles