 Some NPM modules actually include Javascript modules named docs and nodeprune breaks these because docs are removed per the default rules It would be nice then to mark a given directory to not be removed according to nodeprunes rules bash nodeprune except nodemodulesgoogleapisdocs I dont know what Im doing wrong but nodeprune keep all my nodemodules folders Screen Shot at When I added nodeprune one of our tests started failing yarn run v jest collectCoverage ci runInBand reportersdefault reportersjestjunit PASS jsmodulesobjectivesdashboardtestscreatetestjs PASS jsmodulescoretestsreactselecttestjs FAIL jstestsvendortestjs railsujs should be defined as a browser global ENOENT no such file or directory open homecircleciprojectffstaticnodemodulesrailsujslibassetscompiledrailsujsjs function runScriptInContextpaths const data fsreadFileSyncpathresolvepaths const script new vmScriptdata const context vmcreateContextsandbox at readFileSync jstestsvendortestjs at ObjectrunScriptInContext jstestsvendortestjs relevant section of our circleci config yml run name Install nodeprune command curl sfL bash run binnodeprune nodemodules run binnodeprune ffstaticnodemodules Its necessary to remove assets directory Hi I think that nodeprune is a great script but I think that often users need more then it can provide I think you could add a link to modclean or diarrhea it is my fork of modclean for users who need more customized and verbose cleaning When we create multiple receivers we should use a buffered channel of the same size as the worker size NumCPU to reduce the chance of blocking Hi Thanks for this awesome tool While Ive tested it against many projects the most common problematic thing is assets directory which is usually intended to be included in dist Istanbul reports is an example ERROR Error ENOENT no such file or directory scandir usrsrcappnodemodulesistanbulreportslibhtmlassets i suppose this could break some modules but then so could deleting the READMEmd How to reproduce json name prunetest version description main indexjs scripts test echo Error no test specified exit author license ISC dependencies eslint bash npm i added packages in s ls l nodemodulesbineslint lrwxrxrx tai staff Dec nodemodulesbineslint eslintbineslintjs nodeprune files total files removed size removed MB duration ms ls l nodemodulesbineslint ls nodemodulesbineslint No such file or directory Simple command for get the binary sh curl L suname m o usrlocalbin chmod x usrlocalbinnodeprune Avoid decompressing the binary uname s and uname m in the release URL 