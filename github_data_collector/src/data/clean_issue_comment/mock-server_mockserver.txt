Describe the issue mockservernetty doesnt stop correctly What you are trying to do Setting up a mock server during unit tests and exercising unit tests MockServer version To Reproduce Steps to reproduce the issue How you are running MockServer ie maven plugin docker etc setup server startClientAndServerport teardown serverstop Starting with mockservernetty the mock server stops asynchronously even though we explicitly run serverstop leading to subsequent requests hitting the mockserver when they shouldnt When run through sbt we see this clearly warn Thread MockServerClientAndServereventLoop main loading ionettychannelAbstractChannelAbstractUnsafe after test or run has completed This is a likely resource leak Expected behaviour when serverstop is called it shouldnt return back to the caller until the event loop is closed correctly MockServer Log info Waiting for measurement data to sync warn Thread MockServerClientAndServereventLoop main loading ionettychannelAbstractChannelAbstractUnsafe after test or run has completed This is a likely resource leak info Reading scoverage instrumentation info Reading scoverage measurements DEBUG from ionettybufferPoolThreadCache Freed threadlocal buffers from thread MockServerClientAndServereventLoop DEBUG from ionettybufferPoolThreadCache Freed threadlocal buffers from thread MockServerClientAndServereventLoop DEBUG from ionettybufferPoolThreadCache Freed threadlocal buffers from thread MockServerClientAndServereventLoop info Generating scoverage reports Describe the issue Is it possible to override expectations What you are trying to do Override expectations MockServer version To Reproduce Steps to reproduce the issue MockServer run with docker Execute node mockjs Change any mock in mockjs Execute node mockjs again Expected behaviour Mocked change is reflected MockServer Log Similar to issue but with version We noticed some random requests are logged multiple times I found one logged times Env of execution Docker version with version cmd line java Xms G Xmx G DmockserverinitializationJsonPathetcmockservermockserverexpectationsjson DmockservermaxLogEntries DfileencodingUTF jar optmockservermockservernettyjarwithdependenciesjar serverPort logLevel WARN I was not able to reproduce it locally example of a request method POST path objectI headers ApiVersion CorrelationId GenerationTime T Z TransmissionTime T Z Host localhost AcceptEncoding gzip deflate Connection close ContentType applicationjson ContentLength keepAlive false secure false body type STRING string generationTime T Z key value contentType applicationjson Regards Hi I have recently updated some system to debian buster that now uses openssl and the mockserver ssl certificat is no more valid rsa key must be bit long While the mockserver CA SSL certificat looks good The certificate built on the fly for custom domain looks have only bit curl cacert mockservercapem curl SSL certificate problem EE certificate key too weak More details here curl failed to verify the legitimacy of the server and therefore could not establish a secure connection to it To learn more about this situation and how to fix it please visit the web page mentioned above openssl sclient CAfile mockservercapem connect wwwexamplecom CONNECTED depth CN wwwexamplecom O MockServer L London ST England C UK verify errornum EE certificate key too weak verify return depth CN wwwmockservercom O MockServer L London ST England C UK verify return depth CN wwwexamplecom O MockServer L London ST England C UK verify return SSL handshake has read bytes and written bytes Verification error EE certificate key too weak New TLSv Cipher is ECDHERSAAES GCMSHA Server public key is bit Regards Ive found the docker container a little bit unstable running in ECS and wanted a way to check it has started up successfully Ive created a little Maven project that simply contains an initialisation class and the mock server plugin When I execute mvn mockserverrun I get a ClassNotFoundException on the InititalizationClass Here is my initialisation class public class InitializationClass implements ExpectationInitializer public static MockServerClient mockServerClient public void initializeExpectationsMockServerClient mockServerClient mockServerClientwhen request withMethodGET withPathhealthcheck respond response withStatusCode withBodyMockServer is running InitializationClassmockServerClient mockServerClient And this is my POM xml version encodingUTF project xmlns xmlnsxsi xsischemaLocation modelVersion modelVersion groupIdcomgroupId artifactIdtestmockartifactId version SNAPSHOTversion dependencies dependency groupIdorgmockservergroupId artifactIdmockserverclientartifactId version version dependency dependencies build plugins plugin groupIdorgmockservergroupId artifactIdmockservermavenpluginartifactId version version configuration serverPort serverPort proxyPort proxyPort logLevelDEBUGlogLevel timeout timeout initializationClassprojectbasedirsrcmainjavaInitializationClassinitializationClass configuration executions execution idprocesstestclassesid phaseprocesstestclassesphase goals goalrungoal goals execution execution idverifyid phaseverifyphase goals goalstopgoal goals execution executions plugin plugins build project Im trying to use the maven integration to start a mock server instance before running integration test My project uses a multi module structure and surefire to run integration tests The initialization code is executed correctly i see in the log the expectations being set but when the test runs mockserver throws a ClassNotFoundException ERROR ClassNotFoundException while trying to instantiate ExceptionCallback class eufoobarFooCallback javalangClassNotFoundException eufoobarFooCallback at orgcodehausplexusclassworldsstrategySelfFirstStrategyloadClassSelfFirstStrategyjava at orgcodehausplexusclassworldsrealmClassRealmunsynchronizedLoadClassClassRealmjava at orgcodehausplexusclassworldsrealmClassRealmloadClassClassRealmjava at orgcodehausplexusclassworldsrealmClassRealmloadClassClassRealmjava at javalangClassforName Native Method at javalangClassforNameClassjava at orgmockservermockactionHttpCallbackActionHandlerinstantiateCallbackHttpCallbackActionHandlerjava at orgmockservermockactionHttpCallbackActionHandlersendRequestHttpCallbackActionHandlerjava at orgmockservermockactionHttpCallbackActionHandlerhandleHttpCallbackActionHandlerjava at orgmockservermockactionActionHandlerprocessActionActionHandlerjava at orgmockservermockserverMockServerHandlerchannelRead MockServerHandlerjava at orgmockservermockserverMockServerHandlerchannelRead MockServerHandlerjava at ionettychannelSimpleChannelInboundHandlerchannelReadSimpleChannelInboundHandlerjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextfireChannelReadAbstractChannelHandlerContextjava at ionettyhandlercodecMessageToMessageDecoderchannelReadMessageToMessageDecoderjava at ionettychannelCombinedChannelDuplexHandlerchannelReadCombinedChannelDuplexHandlerjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextfireChannelReadAbstractChannelHandlerContextjava at ionettyhandlercodecMessageToMessageDecoderchannelReadMessageToMessageDecoderjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextfireChannelReadAbstractChannelHandlerContextjava at ionettyhandlercodecMessageToMessageDecoderchannelReadMessageToMessageDecoderjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextfireChannelReadAbstractChannelHandlerContextjava at ionettyhandlercodecByteToMessageDecoderchannelReadByteToMessageDecoderjava at ionettychannelCombinedChannelDuplexHandlerchannelReadCombinedChannelDuplexHandlerjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextfireChannelReadAbstractChannelHandlerContextjava at orgmockserverserverunificationPortUnificationHandlerswitchToHttpPortUnificationHandlerjava at orgmockserverserverunificationPortUnificationHandlerchannelRead PortUnificationHandlerjava at orgmockserverserverunificationPortUnificationHandlerchannelRead PortUnificationHandlerjava at ionettychannelSimpleChannelInboundHandlerchannelReadSimpleChannelInboundHandlerjava at ionettychannelAbstractChannelHandlerContextinvokeChannelReadAbstractChannelHandlerContextjava at ionettychannelAbstractChannelHandlerContextfireChannelReadAbstractChannelHandlerContextjava at ionettychannelDefaultChannelPipelinefireChannelReadDefaultChannelPipelinejava at ionettychannelnioAbstractNioByteChannelNioByteUnsafereadAbstractNioByteChanneljava at ionettychannelnioNioEventLoopprocessSelectedKeyNioEventLoopjava at ionettychannelnioNioEventLoopprocessSelectedKeysOptimizedNioEventLoopjava at ionettychannelnioNioEventLoopprocessSelectedKeysNioEventLoopjava at ionettychannelnioNioEventLooprunNioEventLoopjava at ionettyutilconcurrentSingleThreadEventExecutor runSingleThreadEventExecutorjava at ionettyutilconcurrentDefaultThreadFactoryDefaultRunnableDecoratorrunDefaultThreadFactoryjava at javalangThreadrunThreadjava Here is the sample project and the travis build log Am I doing something completely wrong I wrote public class MockWorkerInitializer implements ExpectationInitializer public static class SentencesCallback implements ExpectationCallback And then used SentencesCallbackclassgetName as the callback class name And I got ERROR ClassNotFoundException while trying to instantiate ExceptionCallback class combasistechwsitestMockWorkerInitializerSentencesCallback javalangClassNotFoundException combasistechwsitestMockWorkerInitializerSentencesCallback If the initializer is in the classpath how can the callback inside of it not be 