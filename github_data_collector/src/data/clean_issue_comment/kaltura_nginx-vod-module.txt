I am new to using nginx VOD module and have some videos I want to have a continues live stream from my videos this my nginxconf file user nobody workerprocesses errorlog logserrorlog errorlog logserrorlog notice errorlog logserrorlog info errorlog logsdebuglog debug events workerconnections http upstream jsonupstream server server vod settings vodmode mapped vodupstreamlocation json vodremoteupstreamlocation proxy vodupstreamextraargs pathOnly vodlastmodified Sun Nov GMT vodlastmodifiedtypes vod caches vodmetadatacache metadatacache m vodresponsecache responsecache m vodmappingcache mappingcache m gzip manifests gzip on gziptypes applicationvndapplempegurl file handle caching aio openfilecache max inactive m openfilecachevalid m openfilecacheminuses openfilecacheerrors on aio on location jsonhls internal proxypass proxysetheader Host httphost location proxy internal proxypass resolver location hls securelink argmd argexpires securelinkmd securelinkexpires if securelink return if securelink return vod hls alias usrlocalnginxhtml vodsecretkey mukkaukkvodfilepath vodhlsencryptionmethod aes addheader AccessControlAllowHeaders addheader AccessControlExposeHeaders ServerrangeContentLengthContentRange addheader AccessControlAllowMethods GET HEAD OPTIONS addheader AccessControlAllowOrigin expires d location hls vod hls addheader AccessControlAllowHeaders addheader AccessControlExposeHeaders ServerrangeContentLengthContentRange addheader AccessControlAllowMethods GET HEAD OPTIONS addheader AccessControlAllowOrigin expires d location php fastcgiindex indexphp fastcgipass fastcgipass unixvarrunphpfpmphpfpmsock include fastcgiparams fastcgiparam SCRIPTFILENAME documentrootfastcgiscriptname fastcgiparam SCRIPTNAME fastcgiscriptname location ht deny all location root html index indexphp indexhtm and this is my playlistphp file when I try to access show the bellow error Fatal error Uncaught Error Call to undefined function apcfetch in usrlocalnginxhtmlplaylistphp Stack trace usrlocalnginxhtmlplaylistphp getDurationMillis mp main thrown in usrlocalnginxhtmlplaylistphp on line please help me how can I solve this issue best Regards Please show me samples of configs servers using for streaming video VOD also how much online visitors in same time this config supported Can you tell me about IOPS on stremaing server VOD How mush same time connections on different video supported and how much IOPS needed SSD or RAID SSD I want use config nginx with cache and HDD TB use for storage video files and second drive is SSD TB use for nginx cache This solution will work with nginxvodmodule I need solution for not high cost Hello everyone im facing an issue here trying to generate the durations of multiple files that i want to run in live mode I thank you all in advance Since the files are not equal im using discontinuity true playlistType live The problem is filePaths array array pathtofilevideo mp array pathtofilevideo mp When i use playlistType vod both videos appears in the JSON output if i try live only one of them Thats problem n OUTPUT firstClipTime initialClipIndex initialSegmentIndex discontinuity playlistTypelivedurations sequences clips typesourcepathpathtofilevideo mp The workaround i found was to put all videos in the same array such as filePaths array array pathtofilevideo mp pathtofilevideo mp Doing that it would output both files BUT not their respective durations only of the first video And im pretty sure this isnt the only issue i just dont know whats going on OUTPUT firstClipTime initialClipIndex initialSegmentIndex discontinuitytrueplaylistTypelivedurations sequences clips typesourcepathpathtofilevideo mp clips typesourcepathpathtofilevideo mp Problem n is The video always start like ahead of its beginning and i have clue on that Problem n is When video its over it doesnt load video it just keeps loading forever i already triple checked both files are not corrupted I just want to live stream or videos one after another Thanks again Any clarification or tips would help When i set value for this params on any place nginx do nothing works only vodexpires Remove vodexpires remove all CacheControl header How to add CacheControl nocache for all not segments erankor hello We are going to deliver k VOD to PSP we have tested all formats and the best are two modes of DASH with template segments which is available via vodmodule and list with ranges not available in vodmodule The problem is that PSP player ignores SegmentTemplatestartNumber and counts segments from As a workaround nginxside URI rewrite with lua works How complicated is it in your opinion to implement arbitary startNumber Say make it configurable via json Any update for kalturanginx and kalturaffmpeg on Centos Thanks Hi i trying this module on many mp files h aac and have some errors on some files this videos work fine on local mp player kplayer on mac there are error ngxhttpvodvalidatestreams no matching streams were found while reading media header client server sitecom request GET z ump indexm u HTTP host sitecom this file warning adult file another error error mp parserparsestscatom chunk index is smaller than the previous index while reading media header client server sitecom request GET elvgmp Frag v a ts HTTP host sitecom this file warning adult file another error error mp toannexbwrite zero size packet while processing frames client server sitecom request GET cmpljmp Frag v a ts HTTP host sitecom this file warning adult file vod settings vodmode local vodfallbackupstreamlocation fallback vodlastmodified Sun Nov GMT vodlastmodifiedtypes vodsegmentduration vodhlsabsolutemasterurls off vodhlsabsoluteindexurls off vodhlscontainerformat mpegts vodhlsabsoluteiframeurls off vodforceplaylisttypevod on vodhlssegmentfilenameprefix Frag vodopenfilethreadpool defaultpool vod caches vodmetadatacache metadatacache m vodresponsecache responsecache m vodcachebuffersize k Hy little help Current nginxconf loadmodule modulesngxhttpvodmoduleso workerprocesses errorlog usrlocalnginxlogserrorlog pid usrlocalnginxlogsnginxpid events workerconnections multiaccept on use epoll http upstream remoteupstream server srvfile gofileio server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server index intindavideohu server listen ssl sslcertificate usrlocalnginxcertcrt sslcertificatekey usrlocalnginxcertkey vod settings vodmode remote vodupstreamlocation remoteupstream vodlastmodified Sun Nov GMT vodlastmodifiedtypes vod caches vodmetadatacache metadatacache m vodresponsecache responsecache m gzip manifests gzip on gziptypes applicationvndapplempegurl location remoteupstream resolver internal proxypass args location stream vod hls vodsegmentduration vodbootstrapsegmentdurations vodalignsegmentstokeyframes on addheader LastModified Sun Nov GMT addheader AccessControlAllowHeaders originrangeacceptencodingreferer addheader AccessControlExposeHeaders ServerrangeContentLengthContentRange addheader AccessControlAllowMethods GET HEAD OPTIONS addheader AccessControlAllowOrigin expires d New nginx conf loadmodule modulesngxhttpvodmoduleso loadmodule modulesngxhttpsecuretokenfiltermoduleso workerprocesses errorlog usrlocalnginxlogserrorlog pid usrlocalnginxlogsnginxpid events workerconnections multiaccept on use epoll http upstream remoteupstream server srvfile gofileio server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server cdn anonfilecom server index intindavideohu server listen ssl sslcertificate usrlocalnginxcertcrt sslcertificatekey usrlocalnginxcertkey vod settings vodmode remote vodupstreamlocation remoteupstream vodlastmodified Sun Nov GMT vodlastmodifiedtypes vod caches vodmetadatacache metadatacache m vodresponsecache responsecache m gzip manifests gzip on gziptypes applicationvndapplempegurl location remoteupstream resolver internal proxypass location stream vod hls securetokenencrypturi on securetokenencrypturikey a b c d e f a b c d e f securetokenencrypturiiv securetokenencrypturipart securetokentypes applicationvndapplempegurl vodsegmentduration vodbootstrapsegmentdurations vodalignsegmentstokeyframes off addheader AccessControlAllowHeaders originrangeacceptencodingreferer addheader AccessControlExposeHeaders ServerrangeContentLengthContentRange addheader AccessControlAllowMethods GET HEAD OPTIONS addheader AccessControlAllowOrigin Url encrypt php generate And open indexm u and loop not show and download m u Please help Hello i have some videos converted by ffmpeg For example these videos seems good in any video players included ffprobe but this repackager returning some problematic ts segments like this Bad segment without video data other video segments are ok wrong segment healthy segment current hls playlist This problematic segment crashing hls implementation in videojs or hlsjs when browser downloaded problematic segment Here is my plugin settings movies vod hls vodmode local vodsegmentduration s vodhlsabsolutemasterurls off vodhlsabsoluteindexurls off vodhlsabsoluteiframeurls off vodalignsegmentstokeyframes on Any idea for my problem Thank you The following configuration below are able to make request to files directly using files but was unsucessful forhls and dash I received Bad Gateway I am using Minio as my storage service with kalturanginxawsauthmodule as s connector and can confirm that object is accessible bucket faroseacademy key media e a e a e f e d cd emp so to access the files directly the url would be filesfaroseacademymedia e a e a e f e d cd emp however this does not work for hls this is the url ive tried hlsfaroseacademymedia e a e a e f e d cd emp masterm u This is the nginx server log PasteBin confds conf awsauth awstoken accesskey AWSACCESSKEY secretkey AWSSECRETKEY service AWSSERVICE region AWSREGION upstream s server minio server listen servername include etcnginxvhostdvodconf include etcnginxvhostdhlsconf include etcnginxvhostddashconf include etcnginxvhostdauthenticationconf location media media internal rewrite media break proxysetheader XAmzDate awsauthdate proxysetheader XAmzContentSHA e b c fc c afbf c fb ae e b ca b b proxysetheader Authorization awstoken proxysetheader Host httphost proxypass location files authrequest authlessonvideo rewrite files break proxysetheader XAmzDate awsauthdate proxysetheader XAmzContentSHA e b c fc c afbf c fb ae e b ca b b proxysetheader Authorization awstoken proxysetheader Host httphost proxypass include etcnginxvhostdhealthcheckconf vhostdvodconf vodmode remote vodupstreamlocation media vodlastmodified Sun Nov GMT vodlastmodifiedtypes vod caches vodmetadatacache metadatacache m vodresponsecache responsecache m gzip manifests gzip on gziptypes applicationvndapplempegurl vhostddashconf location dash authrequest authlessonvideo vod dash addheader AccessControlAllowHeaders addheader AccessControlExposeHeaders ServerrangeContentLengthContentRangeAuthorization addheader AccessControlAllowMethods GET HEAD OPTIONS addheader AccessControlAllowOrigin expires d vhostdhlsconf location hls authrequest authlessonvideo vod hls addheader AccessControlAllowHeaders addheader AccessControlExposeHeaders ServerrangeContentLengthContentRangeAuthorization addheader AccessControlAllowMethods GET HEAD OPTIONS addheader AccessControlAllowOrigin expires d 