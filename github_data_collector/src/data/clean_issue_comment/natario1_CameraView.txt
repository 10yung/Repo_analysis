 Describe the bug There are a lot of issues opened and closed due to stale that have errors on Huawei devices Thus I decided to open a new one to hopefully get some attention to the issue CameraView version Camera engine used both But mainly camera Reproducible in official demo app Do not own a Huawei device Device Android version HUAWEI Honor X HWJSNH HUAWEI Y HWFLAH HUAWEI P lite HWMAR HUAWEI P Pro HWVOG HUAWEI P Pro HWCLT HUAWEI Mate HWMHA ALL RUNNING ANDROID List of issues I do not have a Huawei device to test with so I can only provide the log provided in the Play Store Crashlytics does not catch this Screenshot at I wish I could provide more information about this issue but this is all I have at this moment Describe the bug CameraView version Android version Logs Fatal Exception javalangIllegalStateException Fragment TaskSelectFragment b b a af b fadbcbf not attached to a context at androidxfragmentappFragmentrequireContextFragmentjava at androidxfragmentappFragmentgetResourcesFragmentjava at androidxfragmentappFragmentgetStringFragmentjava at comxxxfragmentmainTaskSelectFragmentsetVisibleListTaskSelectFragmentjava at comxxxfragmentmainTaskSelectFragmentlambdagetTaskUpdate TaskSelectFragmentTaskSelectFragmentjava at comxxxfragmentmainLambdaTaskSelectFragmentYXeDMfhk eFjJbx Kfj CQ iorunlambda at androidosHandlerhandleCallbackHandlerjava at androidosHandlerdispatchMessageHandlerjava at androidosLooperloopLooperjava at androidappActivityThreadmainActivityThreadjava at javalangreflectMethodinvokeMethodjava at comandroidinternalosZygoteInitMethodAndArgsCallerrunZygoteInitjava at comandroidinternalosZygoteInitmainZygoteInitjava Hi everyone I face a problem please help me I use this cameraview in a Fragment When user move from this camera fragment to other fragment i use Override public void onPause superonPause cameradestroy to destroy the camera But when the user first time open this fragment i get permission for camera auto etc These permission box make fragment in onPause state and when user give permisson and return to camera the camera is destroy because of onPause function Both permission and destroy camera is important for me Please suggest me any possible solution Thanks Describe the bug Please add a clear description of what the bug is and fill the list below CameraView version Camera engine used camera Reproducible in official demo app dont know Device Android version Galaxy Note d q SMN U Android OS Version To Reproduce Steps to reproduce the behavior possibly in the demo app Go to Camera Screen Rotate the device NullPointerException rised Expected behavior Shouldnt crash on rotation XML layout Part of the XML layout with the CameraView declaration so we can read its attributes xml comotaliastudioscameraviewCameraView androidididcamera androidkeepScreenOntrue androidlayoutwidthmatchparent androidlayoutheightwrapcontent applayoutconstraintToptoTopOfparent applayoutconstraintBottomtoBottomOfparent applayoutconstraintEndtoEndOfparent applayoutconstraintStarttoStartOfparent appcameraGriddraw x appcameraPlaySoundsfalse appcameraModepicture appcameraHdron appcameraPictureSnapshotMeteringtrue appcameraWhiteBalanceauto appcameraEnginecamera appcameraAutoFocusMarkerstringcameraviewdefaultautofocusmarker appcameraPreviewtexture Logs javalangNullPointerException Attempt to invoke virtual method comotaliastudioscameraviewframeByteBufferFrameManager comotaliastudioscameraviewengineCamera EnginegetFrameManager on a null object reference javalangNullPointerException Attempt to invoke virtual method comotaliastudioscameraviewframeByteBufferFrameManager comotaliastudioscameraviewengineCamera EnginegetFrameManager on a null object reference at comotaliastudioscameraviewpictureSnapshot PictureRecorder onPreviewFrameSnapshot PictureRecorderjava at androidhardwareCameraEventHandlerhandleMessageCamerajava at androidosHandlerdispatchMessageHandlerjava at androidosLooperloopLooperjava at androidosHandlerThreadrunHandlerThreadjava Before you go Unless this is a simple fix typos bugs with obvious solution please open an issue first If the edited files were covered by tests updated tests are required for merging Please look into the tests folders and make sure you cover new code Fixes Tests yes Docs updated yes Solution If applicable briefly describe how the issue was addressed This error still persists library version comotaliastudioscameraview what happened I stopped the video stack trace EMediaMuxer stop is called in invalid state ESnapshotVideoRecorder Error onEncodingEnd javalangIllegalStateException Failed to stop the muxer javalangIllegalStateException Failed to stop the muxer at androidmediaMediaMuxernativeStopNative Method at androidmediaMediaMuxerstopMediaMuxerjava at comotaliastudioscameraviewvideoencodingMediaEncoderEngineendMediaEncoderEnginejava at comotaliastudioscameraviewvideoencodingMediaEncoderEngineaccess MediaEncoderEnginejava at comotaliastudioscameraviewvideoencodingMediaEncoderEngineController runMediaEncoderEnginejava at androidosHandlerhandleCallbackHandlerjava at androidosHandlerdispatchMessageHandlerjava at androidosLooperloopLooperjava at androidosHandlerThreadrunHandlerThreadjava ECameraEngine onVideoResult result is null something went wrong javalangIllegalStateException Failed to stop the muxer javalangIllegalStateException Failed to stop the muxer at androidmediaMediaMuxernativeStopNative Method at androidmediaMediaMuxerstopMediaMuxerjava at comotaliastudioscameraviewvideoencodingMediaEncoderEngineendMediaEncoderEnginejava at comotaliastudioscameraviewvideoencodingMediaEncoderEngineaccess MediaEncoderEnginejava at comotaliastudioscameraviewvideoencodingMediaEncoderEngineController runMediaEncoderEnginejava at androidosHandlerhandleCallbackHandlerjava at androidosHandlerdispatchMessageHandlerjava at androidosLooperloopLooperjava at androidosHandlerThreadrunHandlerThreadjava Verison Device Huawei P Pro Android Mode Camera Describe javalangIllegalStateException Handler androidosHandler a bc sending message to a Handler on a dead thread at androidosMessageQueueenqueueMessageMessageQueuejava at androidosHandlerenqueueMessageHandlerjava at androidosHandlersendMessageAtTimeHandlerjava at androidosHandlersendMessageDelayedHandlerjava at androidosHandlerpostHandlerjava at comotaliastudioscameraviewinternalutilsWorkerHandlerpostWorkerHandlerjava at comotaliastudioscameraviewvideoencodingMediaEncodernotifyMediaEncoderjava at comotaliastudioscameraviewvideoencodingMediaEncoderEnginenotifyMediaEncoderEnginejava at comotaliastudioscameraviewvideoSnapshotVideoRecorderonRendererFrameSnapshotVideoRecorderjava at comotaliastudioscameraviewpreviewGlCameraPreviewRendereronDrawFrameGlCameraPreviewjava at androidopenglGLSurfaceViewGLThreadguardedRunGLSurfaceViewjava at androidopenglGLSurfaceViewGLThreadrunGLSurfaceViewjava CameraView version Camera engine used both Reproducible in official demo app yes Device Android version Samsung A API Flash doesnt work when picture is captured with takePictureSnapshot or video is recorded When making a video snapshot with overlay watermark and some text audio is not synced with video comotaliastudioscameraviewCameraView androidididcamera androidlayoutwidthmatchparent androidlayoutheightmatchparent androidlayoutgravitycenter androidkeepScreenOntrue appcameraAudioon appcameraGestureScrollVerticalexposureCorrection appcameraEnginecamera appcameraExperimentaltrue appcameraFacingback appcameraFlashauto appcameraGestureLongTapnone appcameraGesturePinchzoom appcameraGestureTapautoFocus appcameraGridoff appcameraModevideo appcameraPlaySoundstrue appcameraPreviewglSurface appcameraVideoMaxDuration appcameraVideoMaxSize 