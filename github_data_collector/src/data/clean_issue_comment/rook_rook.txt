 Please take a look at our Contributing documentation before submitting a Pull Request Thank you for contributing to Rook Description of your changes Updates and clarifications to the Rook governance including Add a steering committee to oversee the project starting with three members jbw dyusupov travisn Rename approvers to maintainers who have push access to the repo Clarify process for adding and removing maintainers Move bassam to emeritus maintainer Add reviewers for YugabyteDB Remove inactive reviewers Other clarifications for maintainer and reviewer responsibilities Per requirements for current Rook governance this must be approved by majority of current Rook maintainers before this is merged or the changes take effect Checklist Reviewed the developer guide on Submitting a Pull Request Documentation has been updated if necessary Unit tests have been added if necessary Integration tests have been added if necessary Pending release notes updated with breaking andor notable changes if necessary Upgrade from previous release is tested and upgrade user guide is updated if necessary Code generation make codegen has been run to update object specifications if necessary Comments have been added or updated based on the standards set in CONTRIBUTINGmd Add the flag for skipping the CI if this PR does not require a build See here for more details skip ci Are you in the right place For issues or feature requests please create an issue in this repository For general technical and nontechnical questions we are happy to help you on our Rookio Slack Did you already search the existing open issues for anything similar Is this a bug report or feature request Feature Request What should the feature do Allow specification of minsize for Ceph pools RBD and CephFS What is use case behind this feature In our Rook operated Ceph cluster workerstorage nodes workers per datacenter failureDomain set to zone node labels set accordingly with specreplicatedsize set to in CephBlockPool we see minsize automatically set to on pools as well This prevents IO when one datacenter is lost although data is available Manually setting minsize to recovers from this situation and allows data access even when one site is lost See and Environment Specific environment information that helps with the feature request rootrookcephtools bf hp pv ceph osd tree ID CLASS WEIGHT TYPE NAME STATUS REWEIGHT PRIAFF root default zone dc host n ssd osd up host n ssd osd up zone dc host n ssd osd up host n ssd osd up CephBlockPool yaml apiVersion cephrookiov kind CephBlockPool metadata name rbdpool namespace rookceph spec crushRoot deviceClass erasureCoded algorithm codingChunks dataChunks failureDomain zone replicated minsize size kubectl exec ti n rookceph rookcephtools bf hp pv bash ceph osd pool get rbdpool minsize minsize ceph osd pool get rbdpool size size ceph v ceph version f aa ac a ee ea aa c e b ea e nautilus stable Is this a bug report or feature request Remove only one Bug Report Bug Report Rook rewrites configs for external ceph cluster repeatedly every few seconds Expected behavior Only rewrite configs when cluster changes Deviation from expected behavior I opmon ClusterInfo is now Empty refilling it from statusMonMapMons I opmon new external mon ceph found adding it I opmon new external mon ceph found adding it I opmon new external mon ceph found adding it I opmon saved mon endpoints to config map map dataceph ceph ceph maxMonId mappingnode csiclusterconfigjson clusterIDrookcephmonitors I cephconfig writing config file varlibrookrookcephrookcephconfig I cephconfig generated admin config in varlibrookrookceph I opmon ClusterInfo is now Empty refilling it from statusMonMapMons I opmon new external mon ceph found adding it I opmon new external mon ceph found adding it I opmon new external mon ceph found adding it I opmon saved mon endpoints to config map map maxMonId mappingnode csiclusterconfigjson clusterIDrookcephmonitors dataceph ceph ceph I cephconfig writing config file varlibrookrookcephrookcephconfig I cephconfig generated admin config in varlibrookrookceph I opmon ClusterInfo is now Empty refilling it from statusMonMapMons I opmon new external mon ceph found adding it I opmon new external mon ceph found adding it I opmon new external mon ceph found adding it I opmon saved mon endpoints to config map map csiclusterconfigjson clusterIDrookcephmonitors dataceph ceph ceph maxMonId mappingnode I cephconfig writing config file varlibrookrookcephrookcephconfig I cephconfig generated admin config in varlibrookrookceph I opmon ClusterInfo is now Empty refilling it from statusMonMapMons I opmon new external mon ceph found adding it I opmon new external mon ceph found adding it I opmon new external mon ceph found adding it I opmon saved mon endpoints to config map map csiclusterconfigjson clusterIDrookcephmonitors dataceph ceph ceph maxMonId mappingnode I cephconfig writing config file varlibrookrookcephrookcephconfig I cephconfig generated admin config in varlibrookrookceph I opmon ClusterInfo is now Empty refilling it from statusMonMapMons I opmon new external mon ceph found adding it I opmon new external mon ceph found adding it I opmon new external mon ceph found adding it I opmon saved mon endpoints to config map map mappingnode csiclusterconfigjson clusterIDrookcephmonitors dataceph ceph ceph maxMonId I cephconfig writing config file varlibrookrookcephrookcephconfig I cephconfig generated admin config in varlibrookrookceph How to reproduce it minimal and precise Please let us know any circumstances for reproduction of your bug Use rook with a external cluster with mons apiVersion v kind Namespace metadata name rooknamespace apiVersion v kind Secret metadata name rookcephmon namespace rooknamespace type Opaque data clustername rookclustername b encode fsid rookexternalfsid b encode adminsecret rookexternaladminsecret b encode monsecret rookexternalmonsecret b encode apiVersion v kind ConfigMap metadata name rookcephmonendpoints namespace rooknamespace data data rookexternalcephmondata mapping maxMonId apiVersion cephrookiov kind CephCluster metadata name rookclustername namespace rooknamespace spec external enable true dataDirHostPath varlibrook providing an image is optional do this if you want to create other CRs rgw mds nfs cephVersion image cephcephv MUST match external cluster version Environment OS CentOS Kernel el x Cloud provider or hardware configuration Bare Metal Rook version v Storage backend version ceph Kubernetes version v Kubernetes cluster type Bare Metal Storage backend status HEALTHOK Are you in the right place For issues or feature requests please create an issue in this repository For general technical and nontechnical questions we are happy to help you on our Rookio Slack Did you already search the existing open issues for anything similar Is this a bug report or feature request Feature Request What should the feature do It would be a must have to be able to set optionally on the CephCluster CRD two fields publicnetwork clusternetwork Those two configs fields would represent the same one as public network and cluster network in the ceph config global section that is to say network adresses in the CIDR notation Rook could thanks to that try to discover the interface ip addresses to use for each OSD checking the ip is contained in one of those CIDRs Today I am doing something like this using rookconfigoverride configmap and running an ansible pass outside rook logic Generated config looks like kubectl get cm rookconfigoverride n rookceph o yaml apiVersion v data config global public network cluster network osd cluster addr public ip osd cluster addr public ip osd cluster addr public ip The ansible playbook fragment I am currently using to do this looks like the following one name Ceph tasks hosts groups kubemaster become true tasks name Get nodes OSDs shell kubectl get pods n rookceph fieldselector specnodeName item l approokcephosd ojsonpathrange items osd metadatalabelscephosdid ncluster addr hostvars item netplanconfigurationnetworkethernetseno addresses ipaddraddress npublic ip hostvars item ansiblehost n end changedwhen False register nodesosds withindexeditems groups all k sraw state present resourcedefinition apiVersion v kind ConfigMap metadata name rookconfigoverride namespace item data config global public network cephpublicnetwork cluster network cephclusternetwork nodesosdsresults mapattributestdout mapregexreplace join n regexreplace n n kubeconfig etckubernetesadminconf verifyssl no withitems rookceph What is use case behind this feature It is a good practice with ceph to use two distinct networks one for ceph client exchanges with the OSDs another one for data sync between OSDs Environment Specific environment information that helps with the feature request Are you in the right place For issues or feature requests please create an issue in this repository For general technical and nontechnical questions we are happy to help you on our Rookio Slack Did you already search the existing open issues for anything similar Is this a bug report or feature request Bug Report Deviation from expected behavior After the first monitor starts the no further monitors join the quorum and die one after another Expected behavior Three monitors form quorum How to reproduce it minimal and precise Please let us know any circumstances for reproduction of your bug Kubernetes v deployed using kubespray v on ubuntu LTS Bionic Beaver Using master of rook and any version of ceph tested with v v and master Files to submit clusteryaml apiVersion cephrookiov kind CephCluster metadata name rookceph namespace rookceph spec cephVersion image cephdaemonbaselatestmaster allowUnsupported true dataDirHostPath varlibrook skipUpgradeChecks false continueUpgradeAfterChecksEvenIfNotHealthy false mon count allowMultiplePerNode false dashboard enabled true ssl true monitoring enabled false rulesNamespace rookceph network hostNetwork false rbdMirroring workers crashCollector disable true annotations resources removeOSDsIfOutAndSafeToRemove false storage cluster level storage configuration and selection useAllNodes true useAllDevices true config disruptionManagement managePodBudgets false osdMaintenanceTimeout manageMachineDisruptionBudgets false machineDisruptionBudgetNamespace openshiftmachineapi Operator Logs I rookcmd starting Rook v beta ga d with arguments usrlocalbinrook ceph operator I rookcmd flag values adddirheaderfalse alsologtostderrfalse csiattacherimagequayiok scsicsiattacherv csicephimagequayiocephcsicephcsiv csicephfsplugintemplatepathetccephcsicephfscsicephfspluginyaml csicephfsprovisionerdeptemplatepathetccephcsicephfscsicephfspluginprovisionerdepyaml csicephfsprovisionerststemplatepathetccephcsicephfscsicephfspluginprovisionerstsyaml csidrivernameprefix csienablecephfstrue csienablegrpcmetricstrue csienablerbdtrue csikubeletdirpathvarlibkubelet csiprovisionerimagequayiok scsicsiprovisionerv csirbdplugintemplatepathetccephcsirbdcsirbdpluginyaml csirbdprovisionerdeptemplatepathetccephcsirbdcsirbdpluginprovisionerdepyaml csirbdprovisionerststemplatepathetccephcsirbdcsirbdpluginprovisionerstsyaml csiregistrarimagequayiok scsicsinodedriverregistrarv csisnapshotterimagequayiok scsicsisnapshotterv enablediscoverydaemontrue enableflexdriverfalse enablemachinedisruptionbudgetfalse helpfalse kubeconfig logflushfrequency s loglevelINFO logbacktraceat logdir logfile logfilemaxsize logtostderrtrue master monhealthcheckinterval s monouttimeout m s operatorimage serviceaccount skipheadersfalse skiplogheadersfalse stderrthreshold v vmodule I cephcmd starting operator I opdiscover rookdiscover daemonset started I operator rookprovisioner cephrookioblock started using cephrookio flex vendor dir I leaderelectiongo attempting to acquire leader lease rookcephcephrookioblock I operator rookprovisioner rookioblock started using rookio flex vendor dir I operator Watching all namespaces for cluster CRDs I opcluster start watching clusters in all namespaces I leaderelectiongo attempting to acquire leader lease rookcephrookioblock I opcluster Enabling hotplug orchestration ROOKDISABLEDEVICEHOTPLUGfalse I operator setting up the controllerruntime manager I leaderelectiongo successfully acquired lease rookcephcephrookioblock I controllergo Starting provisioner controller cephrookioblockrookcephoperator c dbgp b ea eab e bbc e I eventgo Eventv ObjectReferenceKindEndpoints Namespacerookceph Namecephrookioblock UIDd b e e e be f a dd APIVersionv ResourceVersion FieldPath type Normal reason LeaderElection rookcephoperator c dbgp b ea eab e bbc e became leader I leaderelectiongo successfully acquired lease rookcephrookioblock I controllergo Starting provisioner controller rookioblockrookcephoperator c dbgp b f f eab e bbc e I eventgo Eventv ObjectReferenceKindEndpoints Namespacerookceph Namerookioblock UID aafeffeec a a a c ab APIVersionv ResourceVersion FieldPath type Normal reason LeaderElection rookcephoperator c dbgp b f f eab e bbc e became leader I operator starting the controllerruntime manager I controllergo Started provisioner controller cephrookioblockrookcephoperator c dbgp b ea eab e bbc e I controllergo Started provisioner controller rookioblockrookcephoperator c dbgp b f f eab e bbc e I opcluster starting cluster in namespace rookceph I cephcsi CSIDriver object created for driver rookcephrbdcsicephcom I cephcsi CSIDriver object created for driver rookcephcephfscsicephcom I operator successfully started Ceph CSI drivers I opcluster detecting the ceph image version for image cephdaemonbaselatestmaster I opcluster Detected ceph image version octopus W opcluster unsupported ceph version detected octopus pursuing E cephconfig clusterInfo nil I opcluster CephCluster rookceph status Creating I opmon start running mons I exec Running command cephauthtool createkeyring varlibrookrookcephmonkeyring genkey n mon cap mon allow I exec Running command cephauthtool createkeyring varlibrookrookcephclientadminkeyring genkey n clientadmin cap mon allow cap osd allow cap mgr allow cap mds allow I opmon creating mon secrets for a new cluster I opmon saved mon endpoints to config map map maxMonId mappingnode csiclusterconfigjson clusterIDrookcephmonitors data I cephconfig writing config file varlibrookrookcephrookcephconfig I cephconfig generated admin config in varlibrookrookceph I opmon targeting the mon count I opmon schedmon created canary deployment rookcephmonacanary I opmon schedmon canary monitor deployment rookcephmonacanary scheduled to hans I opmon assignmon mon a assigned to node hans I opmon schedmon created canary deployment rookcephmonbcanary I opmon schedmon canary monitor deployment rookcephmonbcanary scheduled to ludwig I opmon assignmon mon b assigned to node ludwig I opmon schedmon created canary deployment rookcephmonccanary I opmon schedmon canary monitor deployment rookcephmonccanary scheduled to benni I opmon assignmon mon c assigned to node benni I opmon assignmon cleaning up canary deployment rookcephmonacanary and canary pvc I opk sutil removing deployment rookcephmonacanary if it exists I opk sutil Removed deployment rookcephmonacanary I opk sutil rookcephmonacanary still found waiting I opk sutil rookcephmonacanary still found waiting I opk sutil confirmed rookcephmonacanary does not exist I opmon assignmon cleaning up canary deployment rookcephmonbcanary and canary pvc I opk sutil removing deployment rookcephmonbcanary if it exists I opk sutil Removed deployment rookcephmonbcanary I opk sutil rookcephmonbcanary still found waiting I opk sutil rookcephmonbcanary still found waiting I opk sutil rookcephmonbcanary still found waiting I opk sutil rookcephmonbcanary still found waiting I opk sutil rookcephmonbcanary still found waiting I opk sutil rookcephmonbcanary still found waiting I opk sutil confirmed rookcephmonbcanary does not exist I opmon assignmon cleaning up canary deployment rookcephmonccanary and canary pvc I opk sutil removing deployment rookcephmonccanary if it exists I opk sutil Removed deployment rookcephmonccanary I opk sutil rookcephmonccanary still found waiting I opk sutil confirmed rookcephmonccanary does not exist I opmon creating mon a I opmon mon a endpoint are v v I opmon saved mon endpoints to config map map dataa maxMonId mappingnodeaNamehansHostnamehansAddress bNameludwigHostnameludwigAddress cNamebenniHostnamebenniAddress csiclusterconfigjson clusterIDrookcephmonitors I cephconfig writing config file varlibrookrookcephrookcephconfig I cephconfig generated admin config in varlibrookrookceph I cephconfig writing config file varlibrookrookcephrookcephconfig I cephconfig generated admin config in varlibrookrookceph I opmon of expected mon deployments exist creating new deployments I opmon waiting for mon quorum with a I opmon mon a is not yet running I opmon mons running I exec Running command ceph quorumstatus connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmon Monitors in quorum a I opmon mons created I exec Running command ceph versions connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmon waiting for mon quorum with a I opmon mons running a I exec Running command ceph quorumstatus connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmon Monitors in quorum a I exec Running command ceph config set global monallowpooldelete true connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec Running command ceph config set global rbddefaultfeatures connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmon creating mon b I opmon mon a endpoint are v v I opmon mon b endpoint are v v I opmon saved mon endpoints to config map map dataa b maxMonId mappingnodeaNamehansHostnamehansAddress bNameludwigHostnameludwigAddress cNamebenniHostnamebenniAddress csiclusterconfigjson clusterIDrookcephmonitors I cephconfig writing config file varlibrookrookcephrookcephconfig I cephconfig generated admin config in varlibrookrookceph I cephconfig writing config file varlibrookrookcephrookcephconfig I cephconfig generated admin config in varlibrookrookceph I opmon of expected mon deployments exist creating new deployments I opmon deployment for mon rookcephmona already exists updating if needed I opk sutil updating deployment rookcephmona I opk sutil finished waiting for updated deployment rookcephmona I opmon waiting for mon quorum with a b I opmon mon b is not yet running I opmon mons running a I exec Running command ceph quorumstatus connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmon Monitors in quorum a I opmon mons created I exec Running command ceph versions connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmon waiting for mon quorum with a b I opmon mon b is not yet running I opmon mons running a I opmon mons running a b I exec Running command ceph quorumstatus connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp W opmon failed to find initial monitor b in mon map W opmon monitor b is not in quorum list I opmon mons running a b I exec Running command ceph quorumstatus connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp block repeats a few times W opmon failed to find initial monitor b in mon map W opmon monitor b is not in quorum list I opmon mons running a b I exec Running command ceph quorumstatus connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp W opmon failed to find initial monitor b in mon map W opmon monitor b is not in quorum list E opcluster failed to create cluster in namespace rookceph failed to start the mons failed to start mon pods failed to wait for mon quorum exceeded max retry count waiting for monitors to reach quorum I opcluster detecting the ceph image version for image cephdaemonbaselatestmaster I opcluster Detected ceph image version octopus W opcluster unsupported ceph version detected octopus pursuing I opmon parsing mon endpoints a b I opmon loaded maxMonID monsmap a xc fdf b xc fdf a mapping Nodemap b xc a c xc a a xc f I cephconfig writing config file varlibrookrookcephrookcephconfig I cephconfig generated admin config in varlibrookrookceph I exec Running command ceph versions connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opcluster CephCluster rookceph status Creating I opmon start running mons I opmon parsing mon endpoints a b I opmon loaded maxMonID monsmap a xc fad b xc fad mapping Nodemap b xc f c xc f b a xc f c I opmon saved mon endpoints to config map map dataa b maxMonId mappingnodeaNamehansHostnamehansAddress bNameludwigHostnameludwigAddress cNamebenniHostnamebenniAddress csiclusterconfigjson clusterIDrookcephmonitors I cephconfig writing config file varlibrookrookcephrookcephconfig I cephconfig generated admin config in varlibrookrookceph I opmon targeting the mon count I opmon schedmon created canary deployment rookcephmondcanary I opmon schedmon canary monitor deployment rookcephmondcanary scheduled to benni I opmon assignmon mon d assigned to node benni I opmon assignmon cleaning up canary deployment rookcephmondcanary and canary pvc I opk sutil removing deployment rookcephmondcanary if it exists I opk sutil Removed deployment rookcephmondcanary I opk sutil rookcephmondcanary still found waiting I opk sutil rookcephmondcanary still found waiting I opk sutil confirmed rookcephmondcanary does not exist I exec Running command ceph config set global monallowpooldelete true connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec Running command ceph config set global rbddefaultfeatures connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmon creating mon d I opmon mon a endpoint are v v I opmon mon b endpoint are v v I opmon mon d endpoint are v v I opmon saved mon endpoints to config map map dataa b d maxMonId mappingnodeaNamehansHostnamehansAddress bNameludwigHostnameludwigAddress cNamebenniHostnamebenniAddress dNamebenniHostnamebenniAddress csiclusterconfigjson clusterIDrookcephmonitors I cephconfig writing config file varlibrookrookcephrookcephconfig I cephconfig generated admin config in varlibrookrookceph I cephconfig writing config file varlibrookrookcephrookcephconfig I cephconfig generated admin config in varlibrookrookceph I opmon of expected mon deployments exist creating new deployments I opmon deployment for mon rookcephmona already exists updating if needed I opk sutil updating deployment rookcephmona I opk sutil finished waiting for updated deployment rookcephmona I opmon deployment for mon rookcephmonb already exists updating if needed I opk sutil updating deployment rookcephmonb I opk sutil finished waiting for updated deployment rookcephmonb I opmon waiting for mon quorum with a b d I opmon mon d is not yet running I opmon mons running a b I exec Running command ceph quorumstatus connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmon Monitors in quorum a I opmon mons created I exec Running command ceph versions connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmon waiting for mon quorum with a b d I opmon mon d is not yet running I opmon mons running a b I opmon mons running a b d I exec Running command ceph quorumstatus connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp W opmon failed to find initial monitor b in mon map W opmon monitor b is not in quorum list I opmon mons running a b d I exec Running command ceph quorumstatus connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp repeats a few times W opmon failed to find initial monitor b in mon map W opmon monitor b is not in quorum list I opmon mons running a b d I exec Running command ceph quorumstatus connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp W opmon failed to find initial monitor b in mon map W opmon monitor b is not in quorum list E opcluster failed to create cluster in namespace rookceph failed to start the mons failed to start mon pods failed to wait for mon quorum exceeded max retry count waiting for monitors to reach quorum I opcluster detecting the ceph image version for image cephdaemonbaselatestmaster I opcluster Detected ceph image version octopus W opcluster unsupported ceph version detected octopus pursuing I opmon parsing mon endpoints a b d I opmon loaded maxMonID monsmap b xc bc e d xc bc a xc bc mapping Nodemap a xc bf b xc bf b c xc bf e d xc bf a I cephconfig writing config file varlibrookrookcephrookcephconfig I cephconfig generated admin config in varlibrookrookceph I exec Running command ceph versions connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opcluster CephCluster rookceph status Creating I opmon start running mons I opmon parsing mon endpoints a b d I opmon loaded maxMonID monsmap a xc cb a b xc cba d xc cba mapping Nodemap a xc ba b xc ba c xc ba d xc ba c I opmon saved mon endpoints to config map map dataa b d maxMonId mappingnodeaNamehansHostnamehansAddress bNameludwigHostnameludwigAddress cNamebenniHostnamebenniAddress dNamebenniHostnamebenniAddress csiclusterconfigjson clusterIDrookcephmonitors I cephconfig writing config file varlibrookrookcephrookcephconfig I cephconfig generated admin config in varlibrookrookceph I opmon targeting the mon count I exec Running command ceph config set global monallowpooldelete true connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec Running command ceph config set global rbddefaultfeatures connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmon checking for basic quorum with existing mons I opmon mon a endpoint are v v I opmon mon b endpoint are v v I opmon mon d endpoint are v v I opmon saved mon endpoints to config map map datad a b maxMonId mappingnodeaNamehansHostnamehansAddress bNameludwigHostnameludwigAddress cNamebenniHostnamebenniAddress dNamebenniHostnamebenniAddress csiclusterconfigjson clusterIDrookcephmonitors I cephconfig writing config file varlibrookrookcephrookcephconfig I cephconfig generated admin config in varlibrookrookceph I cephconfig writing config file varlibrookrookcephrookcephconfig I cephconfig generated admin config in varlibrookrookceph I opmon deployment for mon rookcephmona already exists updating if needed I opk sutil updating deployment rookcephmona I opk sutil finished waiting for updated deployment rookcephmona I opmon waiting for mon quorum with a b d I opmon mons running a b d I exec Running command ceph quorumstatus connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmon Monitors in quorum a I opmon deployment for mon rookcephmonb already exists updating if needed I opk sutil updating deployment rookcephmonb I opk sutil finished waiting for updated deployment rookcephmonb I opmon waiting for mon quorum with a b d I opmon mons running a b d I exec Running command ceph quorumstatus connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmon Monitors in quorum a I opmon deployment for mon rookcephmond already exists updating if needed I opk sutil updating deployment rookcephmond I opk sutil finished waiting for updated deployment rookcephmond I opmon waiting for mon quorum with a b d I opmon mons running a b d I exec Running command ceph quorumstatus connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmon Monitors in quorum a I opmon mons created I exec Running command ceph versions connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmon waiting for mon quorum with a b d I opmon mons running a b d I exec Running command ceph quorumstatus connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmon Monitors in quorum a I exec Running command ceph auth getorcreatekey clientcsirbdprovisioner mon profile rbd mgr allow rw osd profile rbd connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec Running command ceph auth getorcreatekey clientcsirbdnode mon profile rbd osd profile rbd connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec Running command ceph auth getorcreatekey clientcsicephfsprovisioner mon allow r mgr allow rw osd allow rw tag cephfs metadata connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec Running command ceph auth getorcreatekey clientcsicephfsnode mon allow r mgr allow rw osd allow rw tag cephfs mds allow rw connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I cephcsi created kubernetes csi secrets for cluster rookceph I exec Running command ceph auth getorcreatekey clientcrash mon allow profile crash mgr allow profile crash connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I cephcrashcollectorcontroller created kubernetes crash collector secret for cluster rookceph I exec Running command ceph version connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec Running command ceph versions connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec Running command ceph mon enablemsgr connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I cephclient successfully enabled msgr protocol I opmgr start running mgr I exec Running command ceph auth getorcreatekey mgra mon allow mds allow osd allow connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmgr dashboard service started I exec Running command ceph mgr module enable dashboard force connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmgr successful modules mgr modules from the spec I exec Running command ceph mgr module enable prometheus force connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec Running command ceph config get mgra mgrdashboardserveraddr connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec Running command ceph mgr module enable crash force connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec Running command ceph mgr module enable rook force connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec Error ENOENT I exec Running command ceph config rm mgra mgrdashboardserveraddr connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec Running command ceph config get mgra mgrdashboardaserveraddr connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec Error ENOENT I exec Running command ceph config rm mgra mgrdashboardaserveraddr connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec Running command ceph config get mgra mgrprometheusserveraddr connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec Error ENOENT I exec Running command ceph config rm mgra mgrprometheusserveraddr connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmgr successful modules prometheus I exec Running command ceph mgr module enable orchestratorcli force connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec module crash is already enabled alwayson I opmgr successful modules crash I exec Running command ceph config get mgra mgrprometheusaserveraddr connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec Error ENOENT I exec Running command ceph config rm mgra mgrprometheusaserveraddr connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I opmgr successful modules http bind settings I exec module orchestratorcli is already enabled alwayson I exec Running command ceph orchestrator set backend rook connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec no valid command found closest matches mon feature ls withvalue mon add name IPaddr port mon rm name mon stat mon getmap int fs setdefault fsname mon dump int fs rmdatapool fsname pool osd getcrushmap int pg scrub pgid Error EINVAL invalid command I cephclient command failed trying again I exec Running command ceph dashboard createselfsignedcert connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec no valid command found closest matches mon feature ls withvalue mon add name IPaddr port mon rm name mon stat mon getmap int fs setdefault fsname mon dump int fs rmdatapool fsname pool osd getcrushmap int pg scrub pgid Error EINVAL invalid command I opmgr dashboard module is not ready yet trying again I exec Running command ceph orchestrator set backend rook connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec no valid command found closest matches mon feature ls withvalue mon add name IPaddr port mon rm name mon stat mon getmap int fs setdefault fsname mon dump int fs rmdatapool fsname pool osd getcrushmap int pg scrub pgid Error EINVAL invalid command I cephclient command failed trying again I exec Running command ceph dashboard createselfsignedcert connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec no valid command found closest matches mon feature ls withvalue mon add name IPaddr port mon rm name mon stat mon getmap int fs setdefault fsname mon dump int fs rmdatapool fsname pool osd getcrushmap int pg scrub pgid Error EINVAL invalid command I opmgr dashboard module is not ready yet trying again I exec Running command ceph orchestrator set backend rook connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec no valid command found closest matches mon feature ls withvalue mon add name IPaddr port mon rm name mon stat mon getmap int fs setdefault fsname mon dump int fs rmdatapool fsname pool osd getcrushmap int pg scrub pgid Error EINVAL invalid command I cephclient command failed trying again I exec Running command ceph dashboard createselfsignedcert connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec no valid command found closest matches mon feature ls withvalue mon add name IPaddr port mon rm name mon stat mon getmap int fs setdefault fsname mon dump int fs rmdatapool fsname pool osd getcrushmap int pg scrub pgid Error EINVAL invalid command I opmgr dashboard module is not ready yet trying again I exec Running command ceph orchestrator set backend rook connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec no valid command found closest matches mon feature ls withvalue mon add name IPaddr port mon rm name mon stat mon getmap int fs setdefault fsname mon dump int fs rmdatapool fsname pool osd getcrushmap int pg scrub pgid Error EINVAL invalid command I cephclient command failed trying again I exec Running command ceph dashboard createselfsignedcert connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec no valid command found closest matches mon feature ls withvalue mon add name IPaddr port mon rm name mon stat mon getmap int fs setdefault fsname mon dump int fs rmdatapool fsname pool osd getcrushmap int pg scrub pgid Error EINVAL invalid command I opmgr dashboard module is not ready yet trying again I exec Running command ceph orchestrator set backend rook connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec no valid command found closest matches mon feature ls withvalue mon add name IPaddr port mon rm name mon stat mon getmap int fs setdefault fsname mon dump int fs rmdatapool fsname pool osd getcrushmap int pg scrub pgid Error EINVAL invalid command I cephclient command failed trying again I exec Running command ceph dashboard createselfsignedcert connecttimeout clusterrookceph confvarlibrookrookcephrookcephconfig keyringvarlibrookrookcephclientadminkeyring format json outfile tmp I exec no valid command found closest matches mon feature ls withvalue mon add name IPaddr port mon rm name mon stat mon getmap int fs setdefault fsname mon dump int fs rmdatapool fsname pool osd getcrushmap int pg scrub pgid Error EINVAL invalid command I opmgr dashboard module is not ready yet trying again E opmgr failed modules orchestrator modules failed to set rook orchestrator backend failed to set rook as the orchestrator backend max command retries exceeded I opmgr Running command ceph dashboard setlogincredentials admin I exec no valid command found closest matches mon feature ls withvalue mon add name IPaddr port mon rm name mon stat mon getmap int fs setdefault fsname mon dump int fs rmdatapool fsname pool osd getcrushmap int pg scrub pgid Error EINVAL invalid command I cephclient command failed trying again I exec no valid command found closest matches mon feature ls withvalue mon add name IPaddr port mon rm name mon stat mon getmap int fs setdefault fsname mon dump int fs rmdatapool fsname pool osd getcrushmap int pg scrub pgid Error EINVAL invalid command I cephclient command failed trying again I exec no valid command found closest matches mon feature ls withvalue mon add name IPaddr port mon rm name mon stat mon getmap int fs setdefault fsname mon dump int fs rmdatapool fsname pool osd getcrushmap int pg scrub pgid Error EINVAL invalid command I cephclient command failed trying again I exec no valid command found closest matches mon feature ls withvalue mon add name IPaddr port mon rm name mon stat mon getmap int fs setdefault fsname mon dump int fs rmdatapool fsname pool osd getcrushmap int pg scrub pgid Error EINVAL invalid command I cephclient command failed trying again I exec no valid command found closest matches mon feature ls withvalue mon add name IPaddr port mon rm name mon stat mon getmap int fs setdefault fsname mon dump int fs rmdatapool fsname pool osd getcrushmap int pg scrub pgid Error EINVAL invalid command I cephclient command failed trying again E opmgr failed modules dashboard failed to initialize dashboard failed to set login credentials for the ceph dashboard failed to set login creds on mgr max command retries exceeded I opmgr mgr metrics service started I oposd start running osds in namespace rookceph I oposd start provisioning the osds on pvcs if needed I oposd no volume sources defined to configure OSDs on PVCs I oposd start provisioning the osds on nodes if needed I oposd of the storage nodes are valid I oposd osd provision job started for node benni I oposd osd provision job started for node hans I oposd osd provision job started for node ludwig I oposd start osds after provisioning is completed if needed I oposd osd orchestration status for node benni is starting I oposd osd orchestration status for node hans is starting I oposd osd orchestration status for node ludwig is starting I oposd nodes completed osd provisioning resource version I oposd osd orchestration status for node hans is computingDiff I oposd osd orchestration status for node hans is orchestrating I oposd osd orchestration status for node ludwig is computingDiff I oposd osd orchestration status for node benni is computingDiff I oposd osd orchestration status for node ludwig is orchestrating I oposd osd orchestration status for node benni is orchestrating I oposd osd orchestration status for node hans is failed E oposd orchestration for node hans failed OSDs Statusfailed PvcBackedOSDfalse Messagefailed to configure devices failed to configure devices with cephvolume failed to initialize devices failed cephvolume Failed to complete exit status I oposd skipping event from node hans status update since it is already completed I oposd skipping event from node hans status update since it is already completed I oposd skipping event from node hans status update since it is already completed I oposd skipping event from node hans status update since it is already completed I oposd skipping event from node hans status update since it is already completed I oposd skipping event from node hans status update since it is already completed I oposd skipping event from node hans status update since it is already completed I oposd skipping event from node hans status update since it is already completed I oposd skipping event from node hans status update since it is already completed I oposd waiting on orchestration status update from remaining nodes I oposd skipping event from node hans status update since it is already completed I oposd skipping event from node hans status update since it is already completed I oposd waiting on orchestration status update from remaining nodes I oposd waiting on orchestration status update from remaining nodes I oposd skipping event from node hans status update since it is already completed I oposd skipping event from node hans status update since it is already completed I oposd waiting on orchestration status update from remaining nodes I oposd waiting on orchestration status update from remaining nodes I oposd waiting on orchestration status update from remaining nodes I oposd waiting on orchestration status update from remaining nodes I oposd waiting on orchestration status update from remaining nodes I oposd waiting on orchestration status update from remaining nodes I oposd waiting on orchestration status update from remaining nodes I oposd waiting on orchestration status update from remaining nodes I oposd waiting on orchestration status update from remaining nodes I oposd waiting on orchestration status update from remaining nodes I oposd waiting on orchestration status update from remaining nodes I oposd waiting on orchestration status update from remaining nodes I oposd waiting on orchestration status update from remaining nodes Logs of second monitor first one that does not join rootludwig kubectl n rookceph logs rookcephmonb c c c ff xjpm debug T fd a f c setusermatchpath varlibcephmoncephbstoredb owned by set uidgid to cephceph debug T fd a f c ceph version g b f de b f de cc e d c d e c de cd fd octopus dev process cephmon pid debug T fd a f c pidfilewrite ignore empty pidfile debug T fd a f c load jerasure load lrc load isa debug T fd a f c set rocksdb option compression kNoCompression debug T fd a f c set rocksdb option levelcompactiondynamiclevelbytes true debug T fd a f c set rocksdb option writebuffersize debug T fd a f c set rocksdb option compression kNoCompression debug T fd a f c set rocksdb option levelcompactiondynamiclevelbytes true debug T fd a f c set rocksdb option writebuffersize debug T fd a f c rocksdb doopen column families default debug T fd a f c rocksdb RocksDB version debug T fd a f c rocksdb Git sha rocksdbbuildgitsha debug T fd a f c rocksdb Compile date Jan debug T fd a f c rocksdb DB SUMMARY debug T fd a f c rocksdb CURRENT file CURRENT debug T fd a f c rocksdb IDENTITY file IDENTITY debug T fd a f c rocksdb MANIFEST file MANIFEST size Bytes debug T fd a f c rocksdb SST files in varlibcephmoncephbstoredb dir Total Num files debug T fd a f c rocksdb Write Ahead Log file in varlibcephmoncephbstoredb log size debug T fd a f c rocksdb Optionserrorifexists debug T fd a f c rocksdb Optionscreateifmissing debug T fd a f c rocksdb Optionsparanoidchecks debug T fd a f c rocksdb Optionsenv x b debug T fd a f c rocksdb Optionsinfolog x b cc e debug T fd a f c rocksdb Optionsmaxfileopeningthreads debug T fd a f c rocksdb Optionsstatistics nil debug T fd a f c rocksdb Optionsusefsync debug T fd a f c rocksdb Optionsmaxlogfilesize debug T fd a f c rocksdb Optionsmaxmanifestfilesize debug T fd a f c rocksdb Optionslogfiletimetoroll debug T fd a f c rocksdb Optionskeeplogfilenum debug T fd a f c rocksdb Optionsrecyclelogfilenum debug T fd a f c rocksdb Optionsallowfallocate debug T fd a f c rocksdb Optionsallowmmapreads debug T fd a f c rocksdb Optionsallowmmapwrites debug T fd a f c rocksdb Optionsusedirectreads debug T fd a f c rocksdb Optionsusedirectioforflushandcompaction debug T fd a f c rocksdb Optionscreatemissingcolumnfamilies debug T fd a f c rocksdb Optionsdblogdir debug T fd a f c rocksdb Optionswaldir varlibcephmoncephbstoredb debug T fd a f c rocksdb Optionstablecachenumshardbits debug T fd a f c rocksdb Optionsmaxsubcompactions debug T fd a f c rocksdb Optionsmaxbackgroundflushes debug T fd a f c rocksdb OptionsWALttlseconds debug T fd a f c rocksdb OptionsWALsizelimitMB debug T fd a f c rocksdb Optionsmanifestpreallocationsize debug T fd a f c rocksdb Optionsisfdcloseonexec debug T fd a f c rocksdb Optionsadviserandomonopen debug T fd a f c rocksdb Optionsdbwritebuffersize debug T fd a f c rocksdb Optionswritebuffermanager x b eab debug T fd a f c rocksdb Optionsaccesshintoncompactionstart debug T fd a f c rocksdb Optionsnewtablereaderforcompactioninputs debug T fd a f c rocksdb Optionsrandomaccessmaxbuffersize debug T fd a f c rocksdb Optionsuseadaptivemutex debug T fd a f c rocksdb Optionsratelimiter nil debug T fd a f c rocksdb Optionssstfilemanagerratebytespersec debug T fd a f c rocksdb Optionswalrecoverymode debug T fd a f c rocksdb Optionsenablethreadtracking debug T fd a f c rocksdb Optionsenablepipelinedwrite debug T fd a f c rocksdb Optionsallowconcurrentmemtablewrite debug T fd a f c rocksdb Optionsenablewritethreadadaptiveyield debug T fd a f c rocksdb Optionswritethreadmaxyieldusec debug T fd a f c rocksdb Optionswritethreadslowyieldusec debug T fd a f c rocksdb Optionsrowcache None debug T fd a f c rocksdb Optionswalfilter None debug T fd a f c rocksdb Optionsavoidflushduringrecovery debug T fd a f c rocksdb Optionsallowingestbehind debug T fd a f c rocksdb Optionspreservedeletes debug T fd a f c rocksdb Optionstwowritequeues debug T fd a f c rocksdb Optionsmanualwalflush debug T fd a f c rocksdb Optionsatomicflush debug T fd a f c rocksdb Optionsavoidunnecessaryblockingio debug T fd a f c rocksdb Optionsmaxbackgroundjobs debug T fd a f c rocksdb Optionsmaxbackgroundcompactions debug T fd a f c rocksdb Optionsavoidflushduringshutdown debug T fd a f c rocksdb Optionswritablefilemaxbuffersize debug T fd a f c rocksdb Optionsdelayedwriterate debug T fd a f c rocksdb Optionsmaxtotalwalsize debug T fd a f c rocksdb Optionsdeleteobsoletefilesperiodmicros debug T fd a f c rocksdb Optionsstatsdumpperiodsec debug T fd a f c rocksdb Optionsstatspersistperiodsec debug T fd a f c rocksdb Optionsstatshistorybuffersize debug T fd a f c rocksdb Optionsmaxopenfiles debug T fd a f c rocksdb Optionsbytespersync debug T fd a f c rocksdb Optionswalbytespersync debug T fd a f c rocksdb Optionscompactionreadaheadsize debug T fd a f c rocksdb Compression algorithms supported debug T fd a f c rocksdb kZSTDNotFinalCompression supported debug T fd a f c rocksdb kZSTD supported debug T fd a f c rocksdb kXpressCompression supported debug T fd a f c rocksdb kLZ HCCompression supported debug T fd a f c rocksdb kLZ Compression supported debug T fd a f c rocksdb kBZip Compression supported debug T fd a f c rocksdb kZlibCompression supported debug T fd a f c rocksdb kSnappyCompression supported debug T fd a f c rocksdb Fast CRC supported Supported on x debug T fd a f c rocksdb dbversionsetcc Recovering from manifest file varlibcephmoncephbstoredbMANIFEST debug T fd a f c rocksdb dbcolumnfamilycc Options for column family default debug T fd a f c rocksdb Optionscomparator leveldbBytewiseComparator debug T fd a f c rocksdb Optionsmergeoperator debug T fd a f c rocksdb Optionscompactionfilter None debug T fd a f c rocksdb Optionscompactionfilterfactory None debug T fd a f c rocksdb Optionsmemtablefactory SkipListFactory debug T fd a f c rocksdb Optionstablefactory BlockBasedTable debug T fd a f c rocksdb tablefactory options flushblockpolicyfactory FlushBlockBySizePolicyFactory x b be e cacheindexandfilterblocks cacheindexandfilterblockswithhighpriority pinl filterandindexblocksincache pintoplevelindexandfilter indextype datablockindextype datablockhashtableutilratio hashindexallowcollision checksum noblockcache blockcache x b c c blockcachename BinnedLRUCache blockcacheoptions capacity numshardbits strictcapacitylimit highpripoolratio blockcachecompressed nil persistentcache nil blocksize blocksizedeviation blockrestartinterval indexblockrestartinterval metadatablocksize partitionfilters usedeltaencoding filterpolicy rocksdbBuiltinBloomFilter wholekeyfiltering verifycompression readampbytesperbit formatversion enableindexcompression blockalign debug T fd a f c rocksdb Optionswritebuffersize debug T fd a f c rocksdb Optionsmaxwritebuffernumber debug T fd a f c rocksdb Optionscompression NoCompression debug T fd a f c rocksdb Optionsbottommostcompression Disabled debug T fd a f c rocksdb Optionsprefixextractor nullptr debug T fd a f c rocksdb Optionsmemtableinsertwithhintprefixextractor nullptr debug T fd a f c rocksdb Optionsnumlevels debug T fd a f c rocksdb Optionsminwritebuffernumbertomerge debug T fd a f c rocksdb Optionsmaxwritebuffernumbertomaintain debug T fd a f c rocksdb Optionsbottommostcompressionoptswindowbits debug T fd a f c rocksdb Optionsbottommostcompressionoptslevel debug T fd a f c rocksdb Optionsbottommostcompressionoptsstrategy debug T fd a f c rocksdb Optionsbottommostcompressionoptsmaxdictbytes debug T fd a f c rocksdb Optionsbottommostcompressionoptszstdmaxtrainbytes debug T fd a f c rocksdb Optionsbottommostcompressionoptsenabled false debug T fd a f c rocksdb Optionscompressionoptswindowbits debug T fd a f c rocksdb Optionscompressionoptslevel debug T fd a f c rocksdb Optionscompressionoptsstrategy debug T fd a f c rocksdb Optionscompressionoptsmaxdictbytes debug T fd a f c rocksdb Optionscompressionoptszstdmaxtrainbytes debug T fd a f c rocksdb Optionscompressionoptsenabled false debug T fd a f c rocksdb Optionslevel filenumcompactiontrigger debug T fd a f c rocksdb Optionslevel slowdownwritestrigger debug T fd a f c rocksdb Optionslevel stopwritestrigger debug T fd a f c rocksdb Optionstargetfilesizebase debug T fd a f c rocksdb Optionstargetfilesizemultiplier debug T fd a f c rocksdb Optionsmaxbytesforlevelbase debug T fd a f c rocksdb Optionslevelcompactiondynamiclevelbytes debug T fd a f c rocksdb Optionsmaxbytesforlevelmultiplier debug T fd a f c rocksdb Optionsmaxbytesforlevelmultiplieraddtl debug T fd a f c rocksdb Optionsmaxbytesforlevelmultiplieraddtl debug T fd a f c rocksdb Optionsmaxbytesforlevelmultiplieraddtl debug T fd a f c rocksdb Optionsmaxbytesforlevelmultiplieraddtl debug T fd a f c rocksdb Optionsmaxbytesforlevelmultiplieraddtl debug T fd a f c rocksdb Optionsmaxbytesforlevelmultiplieraddtl debug T fd a f c rocksdb Optionsmaxbytesforlevelmultiplieraddtl debug T fd a f c rocksdb Optionsmaxsequentialskipiniterations debug T fd a f c rocksdb Optionsmaxcompactionbytes debug T fd a f c rocksdb Optionsarenablocksize debug T fd a f c rocksdb Optionssoftpendingcompactionbyteslimit debug T fd a f c rocksdb Optionshardpendingcompactionbyteslimit debug T fd a f c rocksdb Optionsratelimitdelaymaxmilliseconds debug T fd a f c rocksdb Optionsdisableautocompactions debug T fd a f c rocksdb Optionscompactionstyle kCompactionStyleLevel debug T fd a f c rocksdb Optionscompactionpri kMinOverlappingRatio debug T fd a f c rocksdb Optionscompactionoptionsuniversalsizeratio debug T fd a f c rocksdb Optionscompactionoptionsuniversalminmergewidth debug T fd a f c rocksdb Optionscompactionoptionsuniversalmaxmergewidth debug T fd a f c rocksdb Optionscompactionoptionsuniversalmaxsizeamplificationpercent debug T fd a f c rocksdb Optionscompactionoptionsuniversalcompressionsizepercent debug T fd a f c rocksdb Optionscompactionoptionsuniversalstopstyle kCompactionStopStyleTotalSize debug T fd a f c rocksdb Optionscompactionoptionsfifomaxtablefilessize debug T fd a f c rocksdb Optionscompactionoptionsfifoallowcompaction debug T fd a f c rocksdb Optionstablepropertiescollectors debug T fd a f c rocksdb Optionsinplaceupdatesupport debug T fd a f c rocksdb Optionsinplaceupdatenumlocks debug T fd a f c rocksdb Optionsmemtableprefixbloomsizeratio debug T fd a f c rocksdb Optionsmemtablewholekeyfiltering debug T fd a f c rocksdb Optionsmemtablehugepagesize debug T fd a f c rocksdb Optionsbloomlocality debug T fd a f c rocksdb Optionsmaxsuccessivemerges debug T fd a f c rocksdb Optionsoptimizefiltersforhits debug T fd a f c rocksdb Optionsparanoidfilechecks debug T fd a f c rocksdb Optionsforceconsistencychecks debug T fd a f c rocksdb Optionsreportbgiostats debug T fd a f c rocksdb Optionsttl debug T fd a f c rocksdb dbversionsetcc Recovered from manifest filevarlibcephmoncephbstoredbMANIFEST succeededmanifestfilenumber is nextfilenumber is lastsequence is lognumber is prevlognumber is maxcolumnfamily is minlognumbertokeep is debug T fd a f c rocksdb dbversionsetcc Column family default ID log number is debug T fd a f c rocksdb EVENTLOGv timemicros job event recoverystarted logfiles debug T fd a f c rocksdb dbdbimplopencc Recovering log mode debug T fd a f c rocksdb EVENTLOGv timemicros cfname default job event tablefilecreation filenumber filesize tableproperties datasize indexsize filtersize rawkeysize rawaveragekeysize rawvaluesize rawaveragevaluesize numdatablocks numentries filterpolicyname rocksdbBuiltinBloomFilter debug T fd a f c rocksdb dbversionsetcc Creating manifest debug T fd a f c rocksdb EVENTLOGv timemicros job event recoveryfinished debug T fd a f c rocksdb DB pointer x b f debug T fd d rocksdb dbdbimplcc DUMPING STATS debug T fd d rocksdb dbdbimplcc DB Stats Uptimesecs total interval Cumulative writes writes keys commit groups writes per commit group ingest GB MBs Cumulative WAL writes syncs writes per sync written GB MBs Cumulative stall HMS percent Interval writes writes keys commit groups writes per commit group ingest MB MBs Interval WAL writes syncs writes per sync written MB MBs Interval stall HMS percent Compaction Stats default Level Files Size Score ReadGB RnGB Rnp GB WriteGB WnewGB MovedGB WAmp RdMBs WrMBs Compsec CompMergeCPUsec Compcnt Avgsec KeyIn KeyDrop L KB Sum KB Int KB Compaction Stats default Priority Files Size Score ReadGB RnGB Rnp GB WriteGB WnewGB MovedGB WAmp RdMBs WrMBs Compsec CompMergeCPUsec Compcnt Avgsec KeyIn KeyDrop User KB Uptimesecs total interval FlushGB cumulative interval AddFileGB cumulative interval AddFileTotal Files cumulative interval AddFileL Files cumulative interval AddFileKeys cumulative interval Cumulative compaction GB write MBs write GB read MBs read seconds Interval compaction GB write MBs write GB read MBs read seconds Stallscount level slowdown level slowdownwithcompaction level numfiles level numfileswithcompaction stop for pendingcompactionbytes slowdown for pendingcompactionbytes memtablecompaction memtableslowdown interval total count File Read Latency Histogram By Level default Compaction Stats default Level Files Size Score ReadGB RnGB Rnp GB WriteGB WnewGB MovedGB WAmp RdMBs WrMBs Compsec CompMergeCPUsec Compcnt Avgsec KeyIn KeyDrop L KB Sum KB Int KB Compaction Stats default Priority Files Size Score ReadGB RnGB Rnp GB WriteGB WnewGB MovedGB WAmp RdMBs WrMBs Compsec CompMergeCPUsec Compcnt Avgsec KeyIn KeyDrop User KB Uptimesecs total interval FlushGB cumulative interval AddFileGB cumulative interval AddFileTotal Files cumulative interval AddFileL Files cumulative interval AddFileKeys cumulative interval Cumulative compaction GB write MBs write GB read MBs read seconds Interval compaction GB write MBs write GB read MBs read seconds Stallscount level slowdown level slowdownwithcompaction level numfiles level numfileswithcompaction stop for pendingcompactionbytes slowdown for pendingcompactionbytes memtablecompaction memtableslowdown interval total count File Read Latency Histogram By Level default debug T fd a f c starting monb rank at public addrs v v at bind addrs v v mondata varlibcephmoncephb fsid b c f b d e db debug T fd a f c monb e preinit fsid b c f b d e db debug T fd a f c monb e initialmembers ab filtering seed monmap debug T fd a f c monb probing e my rank is now was debug T fd fd e monb probing e my rank is now was debug T fd fd e monb probing e adding peer v v to list of hints repeats a few times debug T fd fd e monb probing e adding peer v v to list of hints debug T fd d rocksdb dbdbimplcc DUMPING STATS debug T fd d rocksdb dbdbimplcc DB Stats Uptimesecs total interval Cumulative writes writes keys commit groups writes per commit group ingest GB MBs Cumulative WAL writes syncs writes per sync written GB MBs Cumulative stall HMS percent Interval writes writes keys commit groups writes per commit group ingest MB MBs Interval WAL writes syncs writes per sync written MB MBs Interval stall HMS percent Compaction Stats default Level Files Size Score ReadGB RnGB Rnp GB WriteGB WnewGB MovedGB WAmp RdMBs WrMBs Compsec CompMergeCPUsec Compcnt Avgsec KeyIn KeyDrop L KB Sum KB Int KB Compaction Stats default Priority Files Size Score ReadGB RnGB Rnp GB WriteGB WnewGB MovedGB WAmp RdMBs WrMBs Compsec CompMergeCPUsec Compcnt Avgsec KeyIn KeyDrop User KB Uptimesecs total interval FlushGB cumulative interval AddFileGB cumulative interval AddFileTotal Files cumulative interval AddFileL Files cumulative interval AddFileKeys cumulative interval Cumulative compaction GB write MBs write GB read MBs read seconds Interval compaction GB write MBs write GB read MBs read seconds Stallscount level slowdown level slowdownwithcompaction level numfiles level numfileswithcompaction stop for pendingcompactionbytes slowdown for pendingcompactionbytes memtablecompaction memtableslowdown interval total count File Read Latency Histogram By Level default Compaction Stats default Level Files Size Score ReadGB RnGB Rnp GB WriteGB WnewGB MovedGB WAmp RdMBs WrMBs Compsec CompMergeCPUsec Compcnt Avgsec KeyIn KeyDrop L KB Sum KB Int KB Compaction Stats default Priority Files Size Score ReadGB RnGB Rnp GB WriteGB WnewGB MovedGB WAmp RdMBs WrMBs Compsec CompMergeCPUsec Compcnt Avgsec KeyIn KeyDrop User KB Uptimesecs total interval FlushGB cumulative interval AddFileGB cumulative interval AddFileTotal Files cumulative interval AddFileL Files cumulative interval AddFileKeys cumulative interval Cumulative compaction GB write MBs write GB read MBs read seconds Interval compaction GB write MBs write GB read MBs read seconds Stallscount level slowdown level slowdownwithcompaction level numfiles level numfileswithcompaction stop for pendingcompactionbytes slowdown for pendingcompactionbytes memtablecompaction memtableslowdown interval total count File Read Latency Histogram By Level default debug T fd fd e monb probing e adding peer v v to list of hints repeats a few times debug T fd fd e monb probing e adding peer v v to list of hints debug T fd fd e monb synchronizing e adding peer v v to list of hints repeats a few times debug T fd fd e monb synchronizing e adding peer v v to list of hints repeats a few times debug T fd fd e monb probing e adding peer v v to list of hints debug T fd d rocksdb dbdbimplcc DUMPING STATS debug T fd d rocksdb dbdbimplcc DB Stats Uptimesecs total interval Cumulative writes writes keys commit groups writes per commit group ingest GB MBs Cumulative WAL writes syncs writes per sync written GB MBs Cumulative stall HMS percent Interval writes writes keys commit groups writes per commit group ingest MB MBs Interval WAL writes syncs writes per sync written MB MBs Interval stall HMS percent Compaction Stats default Level Files Size Score ReadGB RnGB Rnp GB WriteGB WnewGB MovedGB WAmp RdMBs WrMBs Compsec CompMergeCPUsec Compcnt Avgsec KeyIn KeyDrop L KB Sum KB Int KB Compaction Stats default Priority Files Size Score ReadGB RnGB Rnp GB WriteGB WnewGB MovedGB WAmp RdMBs WrMBs Compsec CompMergeCPUsec Compcnt Avgsec KeyIn KeyDrop User KB Uptimesecs total interval FlushGB cumulative interval AddFileGB cumulative interval AddFileTotal Files cumulative interval AddFileL Files cumulative interval AddFileKeys cumulative interval Cumulative compaction GB write MBs write GB read MBs read seconds Interval compaction GB write MBs write GB read MBs read seconds Stallscount level slowdown level slowdownwithcompaction level numfiles level numfileswithcompaction stop for pendingcompactionbytes slowdown for pendingcompactionbytes memtablecompaction memtableslowdown interval total count File Read Latency Histogram By Level default Compaction Stats default Level Files Size Score ReadGB RnGB Rnp GB WriteGB WnewGB MovedGB WAmp RdMBs WrMBs Compsec CompMergeCPUsec Compcnt Avgsec KeyIn KeyDrop L KB Sum KB Int KB Compaction Stats default Priority Files Size Score ReadGB RnGB Rnp GB WriteGB WnewGB MovedGB WAmp RdMBs WrMBs Compsec CompMergeCPUsec Compcnt Avgsec KeyIn KeyDrop User KB Uptimesecs total interval FlushGB cumulative interval AddFileGB cumulative interval AddFileTotal Files cumulative interval AddFileL Files cumulative interval AddFileKeys cumulative interval Cumulative compaction GB write MBs write GB read MBs read seconds Interval compaction GB write MBs write GB read MBs read seconds Stallscount level slowdown level slowdownwithcompaction level numfiles level numfileswithcompaction stop for pendingcompactionbytes slowdown for pendingcompactionbytes memtablecompaction memtableslowdown interval total count File Read Latency Histogram By Level default debug T fd fd e monb probing e adding peer v v to list of hints repeats a few times debug T fd fd e monb probing e adding peer v v to list of hints debug T fd d rocksdb dbdbimplcc DUMPING STATS debug T fd d rocksdb dbdbimplcc DB Stats Uptimesecs total interval Cumulative writes writes keys commit groups writes per commit group ingest GB MBs Cumulative WAL writes syncs writes per sync written GB MBs Cumulative stall HMS percent Interval writes writes keys commit groups writes per commit group ingest MB MBs Interval WAL writes syncs writes per sync written MB MBs Interval stall HMS percent Compaction Stats default Level Files Size Score ReadGB RnGB Rnp GB WriteGB WnewGB MovedGB WAmp RdMBs WrMBs Compsec CompMergeCPUsec Compcnt Avgsec KeyIn KeyDrop L KB Sum KB Int KB Compaction Stats default Priority Files Size Score ReadGB RnGB Rnp GB WriteGB WnewGB MovedGB WAmp RdMBs WrMBs Compsec CompMergeCPUsec Compcnt Avgsec KeyIn KeyDrop User KB Uptimesecs total interval FlushGB cumulative interval AddFileGB cumulative interval AddFileTotal Files cumulative interval AddFileL Files cumulative interval AddFileKeys cumulative interval Cumulative compaction GB write MBs write GB read MBs read seconds Interval compaction GB write MBs write GB read MBs read seconds Stallscount level slowdown level slowdownwithcompaction level numfiles level numfileswithcompaction stop for pendingcompactionbytes slowdown for pendingcompactionbytes memtablecompaction memtableslowdown interval total count File Read Latency Histogram By Level default Compaction Stats default Level Files Size Score ReadGB RnGB Rnp GB WriteGB WnewGB MovedGB WAmp RdMBs WrMBs Compsec CompMergeCPUsec Compcnt Avgsec KeyIn KeyDrop L KB Sum KB Int KB Compaction Stats default Priority Files Size Score ReadGB RnGB Rnp GB WriteGB WnewGB MovedGB WAmp RdMBs WrMBs Compsec CompMergeCPUsec Compcnt Avgsec KeyIn KeyDrop User KB Uptimesecs total interval FlushGB cumulative interval AddFileGB cumulative interval AddFileTotal Files cumulative interval AddFileL Files cumulative interval AddFileKeys cumulative interval Cumulative compaction GB write MBs write GB read MBs read seconds Interval compaction GB write MBs write GB read MBs read seconds Stallscount level slowdown level slowdownwithcompaction level numfiles level numfileswithcompaction stop for pendingcompactionbytes slowdown for pendingcompactionbytes memtablecompaction memtableslowdown interval total count File Read Latency Histogram By Level default debug T fd fd e monb probing e adding peer v v to list of hints repeats a few times debug T fd fd e monb probing e adding peer v v to list of hints Environment OS eg from etcosrelease NAMEUbuntu VERSION LTS Bionic Beaver IDubuntu IDLIKEdebian PRETTYNAMEUbuntu LTS VERSIONID HOMEURL SUPPORTURL BUGREPORTURL PRIVACYPOLICYURL VERSIONCODENAMEbionic UBUNTUCODENAMEbionic Kernel eg uname a Linux ludwig generic Ubuntu SMP Tue Nov UTC x x x GNULinux Cloud provider or hardware configuration Hetzner IntelR CoreTM i K CPU GHz CPUs Rook version use rook version inside of a Rook Pod rook v beta ga d go go Storage backend version eg for ceph do ceph v ceph version g b f de b f de cc e d c d e c de cd fd octopus dev Kubernetes version use kubectl version Client Version versionInfoMajor Minor GitVersionv GitCommitb cbbae ec a fc d e d e GitTreeStateclean BuildDate T Z GoVersiongo Compilergc Platformlinuxamd Server Version versionInfoMajor Minor GitVersionv GitCommitb cbbae ec a fc d e d e GitTreeStateclean BuildDate T Z GoVersiongo Compilergc Platformlinuxamd Kubernetes cluster type eg Tectonic GKE OpenShift Bare deployed using kubespray Storage backend status eg for Ceph use ceph health in the Rook Ceph toolbox I dont get to that Please take a look at our Contributing documentation before submitting a Pull Request Thank you for contributing to Rook Description of your changes Currently there is no option to turn on and off the log level verbosity in csi containers This PR adds the functionality to select logging levels for csi containers Signedoffby Madhu Rajanna madhupr gmailcom Which issue is resolved by this Pull Request Resolves Checklist Reviewed the developer guide on Submitting a Pull Request Documentation has been updated if necessary Unit tests have been added if necessary Integration tests have been added if necessary Pending release notes updated with breaking andor notable changes if necessary Upgrade from previous release is tested and upgrade user guide is updated if necessary Code generation make codegen has been run to update object specifications if necessary Comments have been added or updated based on the standards set in CONTRIBUTINGmd Add the flag for skipping the CI if this PR does not require a build See here for more details test ceph So not sure if doing something wrong but have been trying to set higher cpu for prepareosd since node im trying to set osd has so many lvm devices Want to provide more cpu cephcluster crd for resources was set like this resources mgr limits cpu m memory Gi requests cpu m memory Gi mon limits cpu m memory Gi requests cpu m memory Gi osd limits cpu m memory Gi requests cpu m memory Gi prepareosd limits cpu m memory Gi requests cpu m memory Gi the job was created with correct memory however only have m of cpu resources limits cpu m memory Gi requests cpu m memory Gi when resources were set to empty limitrequests for cpu and memory was set to Not sure if anyone else has seen this Will try to change things around to see if it still occurs Signedoffby Dustin Guerrero dguerrerotwiliocom Description of your changes Changes device filter log messages to only print when a match actually occurs Which issue is resolved by this Pull Request Resolves Checklist Reviewed the developer guide on Submitting a Pull Request x Documentation has been updated if necessary x Unit tests have been added if necessary x Integration tests have been added if necessary x Pending release notes updated with breaking andor notable changes if necessary x Upgrade from previous release is tested and upgrade user guide is updated if necessary x Code generation make codegen has been run to update object specifications if necessary x Comments have been added or updated based on the standards set in CONTRIBUTINGmd Add the flag for skipping the CI if this PR does not require a build See here for more details Is this a bug report or feature request Bug Report Deviation from expected behavior The following log message prints out when scanning devices I cephosd device sdc aliases devdiskbyidataSSDSC KB G RBTYF Z CGN devdiskbyidwwn x cd e d devdiskbypathpci scsi matches device path filter devdiskbypathpci scsi false I cephosd skipping device sdc that does not match the device filterlist devdiskbypathpci scsi false true nil This is misleading because it looks like the device path filter successfully matches the device when it actually doesnt In this example it looks like devdiskbypathpci scsi is matched by the filter devdiskbypathpci scsi The log message should only print if the device path filter actually matches Expected behavior How to reproduce it minimal and precise Setup a devicePathFilter search on Tail the logs of the node prepare job eg rookcephosdpreparekubeminionrook Environment Rook version use rook version inside of a Rook Pod rook v Please take a look at our Contributing documentation before submitting a Pull Request Thank you for contributing to Rook Description of your changes The integration tests only have a single node so the upgrade checks do not provide any real safety for the cluster during the upgrade We will be able to improve the reliability and speed of the tests by disabling these checks In particular the filesystem update spends a lot of time waiting for the mds daemons Checklist Reviewed the developer guide on Submitting a Pull Request Documentation has been updated if necessary Unit tests have been added if necessary Integration tests have been added if necessary Pending release notes updated with breaking andor notable changes if necessary Upgrade from previous release is tested and upgrade user guide is updated if necessary Code generation make codegen has been run to update object specifications if necessary Comments have been added or updated based on the standards set in CONTRIBUTINGmd Add the flag for skipping the CI if this PR does not require a build See here for more details test ceph test full 