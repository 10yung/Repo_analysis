 Thanks for taking the time to submit a thorough issue report for Terasology Please fill out whichever details below seem relevant to your issue Note that suggestions general questions support should go in the forum Bug reports and crashes likely resulting from bugs in the engine go here on GitHub What you were trying to do I was attempting to use the NUI Screen Editor to edit a screen What actually happened The game crashed when certain widgets were added How to reproduce Open Terasology and start a new game Open the NUI Screen editor through the InGame MenuExtrasDeveloper ToolsNUI Screen Editor option Try adding one of the following widgets to a UI Screen rightclick on a contents button and select Add Widget engineDebugProperties engineUIRadialSection engineUIRadialRing engineHudToolbar engineBehaviorEditor There may be more widgets that cause these crashes although most of the affected ones inherit from CoreHudWidgetCoreScreenLayer If a UIRadialSection was added then the NUI editor may crash when reopened after reopening the game You will need to delete the file nuiEditorAutosavejson in order to stop the crashes Log details and game version CoreScreenLayer Exception javalangNullPointerException at orgterasologyrenderingnuiCoreScreenLayeriterateThroughCoreScreenLayerjava at orgterasologyrenderingnuiCoreScreenLayeriterateThroughCoreScreenLayerjava at orgterasologyrenderingnuiCoreScreenLayeriterateThroughCoreScreenLayerjava at orgterasologyrenderingnuiCoreScreenLayeriterateThroughCoreScreenLayerjava at orgterasologyrenderingnuiCoreScreenLayeriterateThroughCoreScreenLayerjava at orgterasologyrenderingnuiCoreScreenLayerupdateCoreScreenLayerjava at orgterasologyrenderingnuiinternalNUIManagerInternalupdateNUIManagerInternaljava at orgterasologyenginemodesStateIngameupdateUserInterfaceStateIngamejava at orgterasologyenginemodesStateIngameupdateStateIngamejava at orgterasologyengineTerasologyEnginetickTerasologyEnginejava at orgterasologyengineTerasologyEnginemainLoopTerasologyEnginejava at orgterasologyengineTerasologyEnginerunTerasologyEnginejava at orgterasologyengineTerasologymainTerasologyjava UIRadialRing Exception javalangIndexOutOfBoundsException Index Size at javautilArrayListrangeCheckArrayListjava at javautilArrayListgetArrayListjava at orgterasologyrenderingnuiwidgetsUIRadialRing onMouseOverUIRadialRingjava at orgterasologyrenderingnuiinternalCanvasImplprocessMousePositionCanvasImpljava at orgterasologyrenderingnuiinternalNUIManagerInternalupdateNUIManagerInternaljava at orgterasologyenginemodesStateIngameupdateUserInterfaceStateIngamejava at orgterasologyenginemodesStateIngameupdateStateIngamejava at orgterasologyengineTerasologyEnginetickTerasologyEnginejava at orgterasologyengineTerasologyEnginemainLoopTerasologyEnginejava at orgterasologyengineTerasologyEnginerunTerasologyEnginejava at orgterasologyengineTerasologymainTerasologyjava UIRadialSection Exception javalangNullPointerException at orgterasologyrenderingnuiinternalLinerelativeToAbsoluteLinejava at orgterasologyrenderingnuiinternalCanvasImplrelativeToAbsoluteCanvasImpljava at orgterasologyrenderingnuiinternalCanvasImpldrawTextureRawCanvasImpljava at orgterasologyrenderingnuiinternalCanvasImpldrawTextureRawCanvasImpljava at orgterasologyrenderingnuiinternalCanvasImpldrawTextureRawCanvasImpljava at orgterasologyrenderingnuiinternalCanvasImpldrawTextureCanvasImpljava at orgterasologyrenderingnuiwidgetsUIRadialSectiononDrawUIRadialSectionjava at orgterasologyrenderingnuiinternalCanvasImpldrawStyledWidgetCanvasImpljava at orgterasologyrenderingnuiinternalCanvasImpldrawWidgetCanvasImpljava at orgterasologyrenderingnuilayoutsrelativeRelativeLayoutonDrawRelativeLayoutjava at orgterasologyrenderingnuiinternalCanvasImpldrawStyledWidgetCanvasImpljava at orgterasologyrenderingnuiinternalCanvasImpldrawWidgetCanvasImpljava at orgterasologyrenderingnuiCoreScreenLayeronDrawCoreScreenLayerjava at orgterasologyrenderingnuiinternalCanvasImpldrawStyledWidgetCanvasImpljava at orgterasologyrenderingnuiinternalCanvasImpldrawWidgetCanvasImpljava at orgterasologyrenderingnuiinternalCanvasImpldrawWidgetCanvasImpljava at orgterasologyrenderingnuiwidgetsUIBoxonDrawUIBoxjava at orgterasologyrenderingnuiinternalCanvasImpldrawStyledWidgetCanvasImpljava at orgterasologyrenderingnuiinternalCanvasImpldrawWidgetCanvasImpljava at orgterasologyrenderingnuilayoutsmiglayoutMigLayoutonDrawMigLayoutjava at orgterasologyrenderingnuiinternalCanvasImpldrawStyledWidgetCanvasImpljava at orgterasologyrenderingnuiinternalCanvasImpldrawWidgetCanvasImpljava at orgterasologyrenderingnuiCoreScreenLayeronDrawCoreScreenLayerjava at orgterasologyrenderingnuieditorlayersAbstractEditorScreenonDrawAbstractEditorScreenjava at orgterasologyrenderingnuiinternalCanvasImpldrawStyledWidgetCanvasImpljava at orgterasologyrenderingnuiinternalCanvasImpldrawWidgetCanvasImpljava at orgterasologyrenderingnuiinternalNUIManagerInternalrenderNUIManagerInternaljava at orgterasologyenginemodesStateIngamerenderUserInterfaceStateIngamejava at orgterasologyenginemodesStateIngamerenderStateIngamejava at orgterasologyenginesubsystemlwjglLwjglGraphicspostUpdateLwjglGraphicsjava at orgterasologyengineTerasologyEnginetickTerasologyEnginejava at orgterasologyengineTerasologyEnginemainLoopTerasologyEnginejava at orgterasologyengineTerasologyEnginerunTerasologyEnginejava at orgterasologyengineTerasologymainTerasologyjava This has been reproduced on the commit Thanks for submitting a pull request for Terasology Please fill in some details about the PR below If the PR contains source code please make sure to run Checkstyle on it first If you add unit tests well love you forever You might also want to read How to Work on a PR Efficiently Contains Adds a RunsAfter annotation that indicates one rasterizer must be run after another How to test Add the annotation to a rasterizer Eg RegisterPlugin RunsAfterCaveRasterizerclass public class SomeRasterizer implements WorldRasterizerPlugin During world generation you can place a breakpoint at WorldBuilder line When it hits the breakpoint inspect the orderedRasterizers list and confirm that SomeRasterizer is after CaveRasterizer Outstanding before merging If anything You can use neat checkboxes Feel free to delete if not needed Need to consider use case x Still have to adjust the wiki doc Will need translation work Thanks for submitting a pull request for Terasology Please fill in some details about the PR below If the PR contains source code please make sure to run Checkstyle on it first If you add unit tests well love you forever You might also want to read How to Work on a PR Efficiently Contains This PR deals with errors thrown during directory detection specifically giving a chance to run the game again if the default directory detection fails In case of headless servers we have defaulted to choosing the home path as the current directory Fixes How to test Run the game on Windows XP If you can find something with XP on it or a wierd OS that throws our directory detection out of the window Outstanding before merging If anything You can use neat checkboxes Feel free to delete if not needed x Still have to adjust the wiki doc The doc has to be updated if in case we hit any such OSes in the future Simple fix for the game UI on the Game Select and Game Details screens the world generator will be shown as its display name ie Perlin rather than its code name ie facetedperlin If the world generators display name cannot be found such as if the generator was moved or deleted it will instead display a warning and the code name I was working on a fix to address discord RPC The RPC thread spends a majority of its time spinning on sleep this does not seem to work on my linux machine and the RPC library is marked as depreciated by discord The problem is Threadsleep is sleeping for ms between calls Thanks for taking the time to submit a thorough issue report for Terasology Please fill out whichever details below seem relevant to your issue Note that suggestions general questions support should go in the forum Bug reports and crashes likely resulting from bugs in the engine go here on GitHub What you were trying to do Er trying to find a bug to see if something would break What actually happened I succeeded and something broke game crashed How to reproduce Step Press Esc then Tab on an ingame screen highlight Back Step ClickPress enter to use the highlighted Back button Followed by a game crash crash report popup Might be related to this issue Log details and game version main ERROR oterasologyengineTerasologyEngine Uncaught exception attempting clean game shutdown javalangNullPointerException null at orgterasologyrenderingnuiTabbingManagerunfocusWidgetTabbingManagerjava at orgterasologyrenderingnuiAbstractWidgetonLoseFocusAbstractWidgetjava at orgterasologyrenderingnuiinternalNUIManagerInternalsetFocusNUIManagerInternaljava at orgterasologyrenderingnuiinternalCanvasImplpostRenderCanvasImpljava at orgterasologyrenderingnuiinternalNUIManagerInternalrenderNUIManagerInternaljava at orgterasologyenginemodesStateIngamerenderUserInterfaceStateIngamejava at orgterasologyenginemodesStateIngamerenderStateIngamejava at orgterasologyenginesubsystemlwjglLwjglGraphicspostUpdateLwjglGraphicsjava at orgterasologyengineTerasologyEnginetickTerasologyEnginejava at orgterasologyengineTerasologyEnginemainLoopTerasologyEnginejava at orgterasologyengineTerasologyEnginerunTerasologyEnginejava at orgterasologyengineTerasologymainTerasologyjava main INFO oterasologyengineTerasologyEngine Shutting down Terasology main INFO otpiReadWriteStorageManager Saving Creating game snapshot main INFO otpiReadWriteStorageManager Saving Snapshot created Writing phase starts main INFO otninternalNetworkSystemImpl Client disconnected Player main INFO otlogicconsoleConsoleImpl NOTIFICATION Player Player has left the game Computer details Running Windows Thanks for submitting a pull request for Terasology Please fill in some details about the PR below If the PR contains source code please make sure to run Checkstyle on it first If you add unit tests well love you forever You might also want to read How to Work on a PR Efficiently Description This pull request fixes by extracting NUI into a separate library TeraNUI It will break any modules which rely on NUI APIs as the namespace used has been changed to orgterasologynui the orgterasologyrenderingnui namespace is used for internal NUIrelated code Some changes have been made to NUI to ensure greater portability although assetloading classes remain within the Terasology codebase How to test Clone and switch to the nuiextractionmerge branch Run the command gradlew publishToMavenLocal in the cloned project Clone this pull request and run the game use gradlew game or run it from an IDE Main Menu UI Run the game until it reaches the main menu Verify that the menu renders correctly Explore the submenus especially the input and video screens Verify that these subscreens render correctly BuilderSampleGameplay Run the game until it reaches the main menu Choose the New Game option Set the Gameplay Template to Builder Sample Gameplay and press the Start Playing button Verify that the UI renders correctly there should be a crosshair in the centre of the screen Console UI Open the console Enter the text help into the console Verify that the text entered is visible as well as the results of the console command Use the showScreen command with various builtin screens Verify that these screens render correctly NUI Editor UI Open the ExtrasDeveloper ToolsNUI Screen Editor menu on the ingame menu Verify that the NUI Editor renders correctly View each screen using the editor Verify that these screens render correctly Outstanding before merging Remove the mavenLocal repository The extracted NUI code is moved to or a similar location Update modules to use the new orgterasologynui namespace Ensure that this pull request does not break any existing UI assets Ensure that this pull request does not cause any additional crashes Resolve most introduced TODO comments Outstanding Issues All of the dependent classes are currently included within the nui package for testing purposes many of them need to be moved to TeraMath and other related repositories Tabbing functionality is nonfunctional for now it requires changes to the NUI packages which would be Terasologyspecific so I will need to find a way of abstracting that Most of the CoreRegistry or Assets usages have been replaced with constructor parameters however there are some instances where no replacement has been made BindableButton has a classpath conflict currently with Terasologys main codebase which is why I inserted the SimpleUri and Uri classes it will not accept any other method descriptors Changing the input namespace may resolve this or removing the duplicate input classes from Terasology The classes were copied and modified as previously they depended heavily on the entitycomponent system which NUI is supposed to be independent of The UIFormat and UISkinFormat are gson deserialisers which are implementation specific classes Porting them would imply that a gsonbased JSON backend would need to be used for UI files They are instances of AbstractAssetFileFormat which is used by gestalt to separate asset implementation from asset data As such I though it best to leave these in the Terasology codebase and not move them Translator is present as an abstraction over Terasologys TranslationSystem which is used for translating strings With this the builtin NUI widgets can retain internationalisation support At the moment the interface does not do anything though as the ToStringTextRenderer which is the only place where it is used is never initialised with a translator PropertyProvider still needs to be extracted although it relies heavily on Terasologys reflection infastructure which will need to be moved into a seperate package as well Notes This also relates to This depends on API Changes Font has been changed from an asset class to an interface Texture has been removed and TextureRegion has been renamed to UITextureRegion Thanks for taking the time to submit a thorough issue report for Terasology Please fill out whichever details below seem relevant to your issue Note that suggestions general questions support should go in the forum Bug reports and crashes likely resulting from bugs in the engine go here on GitHub What I did You can activate a module by either clicking the Activate button or by double clicking the module name Generally modules cannot be activated if they havent been downloaded since the activate button is grayed out but you can still double click them if you havent activateddeactivated a module from the list yet This broke quite some features of the UI What happened The activate button changed its text from Deactivated to Activated despite the module not being present locally unknown This also caused the module highlight feature to break Activated modules no longer showed a green color unknown Also the activated modules could no longer be apparently deactivated How to reproduce Open Terasology and try making a new world Double click on a module which has not been downloaded yet Notice how the activate button changes text but remains grayed out Try activating a downloaded module and notice how it does not change its color Try deactivating any downloaded and activated module it would not work Thanks for taking the time to submit a thorough issue report for Terasology Please fill out whichever details below seem relevant to your issue Note that suggestions general questions support should go in the forum Bug reports and crashes likely resulting from bugs in the engine go here on GitHub What you were trying to do Playing around with some NUI I tried to change a parameter in a ui file I created then loading the changes ingame followed by pressing the escape key to exit the UI What actually happened The UI did not close How to reproduce Step Launch Terasology and load a world preferably with a module like the TutoralNui Step Try opening a UI and then close it it should Step Update something in the corresponding ui file in IntelliJ something like the text parameter Step Open the UI again Step Try to close the UI by pressing the escape key It should throw an error Log details The error that is thrown on pressing the escape key Contains Fixes some Checkstyle errors in math 