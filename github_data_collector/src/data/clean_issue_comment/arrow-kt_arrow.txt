Added prettier show instances for arrowcore datatypes Higherkind types now also use show instances instead of just toString to render content Lists render the haskell way instead of List I personally like that more and it makes defining Sequence Map etc as Sequence much easier I also made the show instance for strings show certain escape characters differently n as n which renders as n Not so sure about that but it does make text in some situations easier to read Related to With these changes its not necessary to add dependencies manually when applying Arrow Ank Gradle Plugin arrowank included For a sealed class with following shape you can generate a val name LensExample String sealed class Example abstract val name String data class Oneoverride val name String val int Int Example data class Twooverride val name String val long Long Example data class Threeoverride val name String val double Double Example This allows for updatingmodifying the name value without ever having to write manual boilerplate to unwrap using when to copy Define some API s to launch IO operations within a CoroutineScope in a way that in case of cancellation we avoid issues by making sure they get disposed When I try to build the current master of Arrow e ca f bc abb e fbb b b I get a StackOverflowError from kapt Im on Ubuntu My coworker on macOS doesnt have this problem This is currently not blocking me I dont need to build Arrow anymore just filing the issue for reference CC nomisRev Here is the truncated build output arrow gitmaster java version openjdk version OpenJDK Runtime Environment build u b ubuntu b OpenJDK Bit Server VM build b mixed mode arrow gitmaster gradlew clean build Configurations specified but the install task does not exist in project arrowbenchmarksfx Configurations specified but the install task does not exist in project arrowkiobenchmarks Configurations specified but the install task does not exist in project arrowmetatestmodels Configurations specified but the install task does not exist in project arrowscalabenchmarks Task arrowmetakaptKotlin w kapt Incremental annotation processing requested but support is disabled because the following processors are not incremental comgoogleautoserviceprocessorAutoServiceProcessor NONINCREMENTAL Task arrowkindedjkaptKotlin w kapt Incremental annotation processing requested but support is disabled because the following processors are not incremental arrowcoreextensionsExtensionProcessor NONINCREMENTAL arrowfoldAutoFoldProcessor NONINCREMENTAL arrowgenericCoproductProcessor NONINCREMENTAL arrowgenericProductProcessor NONINCREMENTAL arrowhigherkindsHigherKindsProcessor NONINCREMENTAL arrowopticsOpticsProcessor NONINCREMENTAL Task arrowcoredatakaptKotlin w kapt Incremental annotation processing requested but support is disabled because the following processors are not incremental arrowcoreextensionsExtensionProcessor NONINCREMENTAL arrowfoldAutoFoldProcessor NONINCREMENTAL arrowgenericCoproductProcessor NONINCREMENTAL arrowgenericProductProcessor NONINCREMENTAL arrowhigherkindsHigherKindsProcessor NONINCREMENTAL arrowopticsOpticsProcessor NONINCREMENTAL Task arrowcoredatacompileKotlin some warnings Task arrowcorekaptKotlin FAILED e kapt An exception occurred javalangStackOverflowError at javalangAbstractStringBuilderappendAbstractStringBuilderjava at javalangStringBuilderappendStringBuilderjava at javalangStringBuilderappendStringBuilderjava at javalangAbstractStringBuilderappendAbstractStringBuilderjava at javalangStringBuilderappendStringBuilderjava at javalangStringBuilderappendStringBuilderjava at kotlinsequencesSequencesKtSequencesKtjoinToSequenceskt at kotlinsequencesSequencesKtSequencesKtjoinToStringSequenceskt at kotlinsequencesSequencesKtSequencesKtjoinToStringdefaultSequenceskt at kotlintextStringsKtStringsJVMKtreplaceStringsJVMkt at kotlintextStringsKtStringsJVMKtreplacedefaultStringsJVMkt at arrowmetaencoderjvmStringTypeExtensionsKtremoveVarianceStringTypeExtensionskt at arrowmetaencoderjvmKotlinPoetEncoderDefaultImplstoMetaKotlinPoetEncoderkt at arrowmetaencoderjvmKotlinPoetEncoderDefaultImplstypeNameToMetaImplKotlinPoetEncoderkt at arrowmetaencoderjvmTypeElementEncoderDefaultImplstypeNameToMetaImplTypeElementEncoderkt at arrowmetaencoderjvmJvmMetaApiDefaultImplstypeNameToMetaImplJvmMetaApikt at arrowmetaprocessorMetaProcessortypeNameToMetaImplMetaProcessorkt at arrowmetaprocessorMetaProcessortypeNameToMeta invokeMetaProcessorkt at arrowmetaprocessorMetaProcessortypeNameToMeta invokeMetaProcessorkt at arrowmetainternalMemoizeKey invokememoizationkt at arrowmetainternalMemoizeKey invokememoizationkt at arrowmetainternalMemoizedHandlerinvokememoizationkt at arrowmetainternalMemoizationKtmemoize invokememoizationkt at arrowmetaencoderjvmKotlinPoetEncoderDefaultImplstoMetaKotlinPoetEncoderkt at arrowmetaencoderjvmTypeElementEncoderDefaultImplstoMetaTypeElementEncoderkt at arrowmetaencoderjvmJvmMetaApiDefaultImplstoMetaJvmMetaApikt at arrowmetaprocessorMetaProcessortoMetaMetaProcessorkt at arrowmetaencoderjvmKotlinPoetEncoderDefaultImplstoMetaKotlinPoetEncoderkt at arrowmetaencoderjvmKotlinPoetEncoderDefaultImplstypeNameToMetaImplKotlinPoetEncoderkt at arrowmetaencoderjvmTypeElementEncoderDefaultImplstypeNameToMetaImplTypeElementEncoderkt at arrowmetaencoderjvmJvmMetaApiDefaultImplstypeNameToMetaImplJvmMetaApikt at arrowmetaprocessorMetaProcessortypeNameToMetaImplMetaProcessorkt at arrowmetaprocessorMetaProcessortypeNameToMeta invokeMetaProcessorkt at arrowmetaprocessorMetaProcessortypeNameToMeta invokeMetaProcessorkt at arrowmetainternalMemoizeKey invokememoizationkt at arrowmetainternalMemoizeKey invokememoizationkt at arrowmetainternalMemoizedHandlerinvokememoizationkt at arrowmetainternalMemoizationKtmemoize invokememoizationkt at arrowmetaencoderjvmKotlinPoetEncoderDefaultImplstoMetaKotlinPoetEncoderkt at arrowmetaencoderjvmTypeElementEncoderDefaultImplstoMetaTypeElementEncoderkt at arrowmetaencoderjvmJvmMetaApiDefaultImplstoMetaJvmMetaApikt at arrowmetaprocessorMetaProcessortoMetaMetaProcessorkt at arrowmetaencoderjvmKotlinPoetEncoderDefaultImplstoMetaKotlinPoetEncoderkt etc FAILURE Build failed with an exception What went wrong Execution failed for task arrowcorekaptKotlin Compilation error See log for more details Here is the full build output with info logging See What version are you currently using SNAPSHOT with latest master The error orgjetbrainskotlinideaKotlinFileType cannot be cast to orgjetbrainskotlincomintellijopenapifileTypesLanguageFileType is all I get when I run ank atm This is likely related to iwalker rachelcarmena This also shows that ank could use some tests This is also kind of concerning because the build was fine I suspect that we use an old version of ank somewhere in our build Dont prepend a newline to the code and handle multiline output better Not sure why the arrow docs dont have a newline prepended but I currently get that for all my snippets What version are you currently using What would you like to see Not all of the code examples in the source have ank marked up so that it will be validated when the docs are generated Some of the sample code has errors docsdocsarrowcorepatternserrorhandlingREADMEmd for example contains the code fun F MonadErrorF NukeExceptionattack ME KindF Impacted MEtupledaim armflatMapME nuke target launchFnuke target val result EithermonadErrorNukeExceptionattack resultfix LeftMissedByMeters or val result EithermonadErrorNukeExceptionattack result fix attack takes a parameter but val result attack does not pass any parameter Also the extension function attack is defined as having a parameter ME but the code does not specify the type for ME