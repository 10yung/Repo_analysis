 Please answer these questions before submitting your issue Thanks For questions please use one of our forums What version of Go are you using go version pre go version go version go openbsdamd pre Does this issue reproduce with the latest release Yes What operating system and processor architecture are you using go env detailssummarycodego envcode Outputsummarybrpre go env GO MODULE GOARCHamd GOBIN GOCACHEhomeredactedcachegobuild GOENVhomeredactedconfiggoenv GOEXE GOFLAGS GOHOSTARCHamd GOHOSTOSopenbsd GONOPROXY GONOSUMDB GOOSopenbsd GOPATHhomeredactedgo GOPRIVATE GOPROXY GOROOTusrlocalgo GOSUMDBsumgolangorg GOTMPDIR GOTOOLDIRusrlocalgopkgtoolopenbsdamd GCCGOgccgo ARar CCcc CXXc CGOENABLED GOMOD CGOCFLAGSg O CGOCPPFLAGS CGOCXXFLAGSg O CGOFFLAGSg O CGOLDFLAGSg O PKGCONFIGpkgconfig GOGCCFLAGSfPIC m pthread fnocaretdiagnostics Qunusedarguments fmessagelength fdebugprefixmaptmpgobuild tmpgobuild gnorecordgccswitches predetails What did you do If possible provide a recipe for reproducing the error A complete runnable program is good A link on playgolangorg is best Passing nil to promises or execpromises prevents that value from being changed in the future see pledge I wanted to prevent both promises and execpromises from being further modified What did you expect to see For there to be a function to pass nil for both promises and execpromises akin to unveilopenbsdgos UnveilBlock What did you see instead Currently to prevent future modification of promises and execpromises you need to call PledgePromises which locks down execpromises followed by PledgeExecpromises which locks down promises This is rather unwieldy and requires you to respecify your current promises and execpromises as passing to the above functions would limit you to only being able to call exit Im using govim with xtoolsgopls at cba a a This crash seems easy to reproduce For instance I created a new file in an empty package and then typed this in package main type stateFunc func stateFunc type dd struct func d d and then at the end where the receiver type goes after Id already typed d I triggered completion and gopls crashed detailssummaryHeres an excerpt from the govim logsummary p T vim start T recvJSONMsg functionfunctionGOVIMinternalBufChanged lnum col added end lines func d d T vim end T run waiting to read a JSON message T info only failed to parse buffer homecalebpmiscgoplsbuggo homecalebpmiscgoplsbuggo missing before newline in parameter list and more errors T gopls server start T goplsDidChange call params T protocolDidChangeTextDocumentParams T TextDocument protocolVersionedTextDocumentIdentifier T Version T TextDocumentIdentifier protocolTextDocumentIdentifierURIfilehomecalebpmiscgoplsbuggo T T ContentChanges T T Range protocolRange T Start protocolPositionLine Character T End protocolPositionLine Character T T RangeLength T Text func d d n T T T T gopls server end T gopls server start T goplsDidChange return err nil T gopls server end T vim start T sendJSONMsg null T vim end T vim start T recvJSONMsg functionfunctionGOVIMinternalSetUserBusy T vim end T run waiting to read a JSON message T vim start T sendJSONMsg null T vim end T vim start T recvJSONMsg functionfunctionGOVIMinternalComplete T vim end T run waiting to read a JSON message T vim start T sendJSONMsg expr bufnum bufnr line line col col T vim end T vim start T recvJSONMsg callback bufnum col line T vim end T run waiting to read a JSON message T gopls server start T goplsCompletion call params T protocolCompletionParams T Context protocolCompletionContext T TextDocumentPositionParams protocolTextDocumentPositionParams T TextDocument protocolTextDocumentIdentifierURIfilehomecalebpmiscgoplsbuggo T Position protocolPositionLine Character T T WorkDoneProgressParams protocolWorkDoneProgressParams T PartialResultParams protocolPartialResultParams T T gopls server end T gopls client start T LogMessage callback protocolLogMessageParamsType Message gopackagesLoad n tsnapshot n tquery filehomecalebpmiscgoplsbuggo n tpackages T gopls client end T gopls client start T LogMessage callback protocolLogMessageParamsType Message gopackagesLoad n tpackage githubcomcesparemiscgopls n tfiles homecalebpmiscgoplsbuggo T gopls client end T gopls stderr runtime goroutine stack exceeds byte limit T gopls stderr fatal error stack overflow T gopls stderr T gopls stderr runtime stack T gopls stderr runtimethrow xcb f c xe T gopls stderr homecalebappsgosrcruntimepanicgo x T gopls stderr runtimenewstack T gopls stderr homecalebappsgosrcruntimestackgo x e T gopls stderr runtimemorestack T gopls stderr homecalebappsgosrcruntimeasmamd s x f T gopls stderr T gopls stderr goroutine running T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x e fp xc bc sp xc bc pc x c e T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bc sp xc bc pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bc d sp xc bc pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bc sp xc bc d pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bc sp xc bc pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bc b sp xc bc pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bc f sp xc bc b pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bc sp xc bc f pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bc sp xc bc pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bc d sp xc bc pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bc sp xc bc d pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bc sp xc bc pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bc a sp xc bc pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bc f sp xc bc a pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bc sp xc bc f pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bc sp xc bc pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bc c sp xc bc pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bc sp xc bc c pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bc sp xc bc pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bc a sp xc bc pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bc e sp xc bc a pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bc sp xc bc e pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bc sp xc bc pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bc c sp xc bc pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bca sp xc bc c pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bca sp xc bca pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bca sp xc bca pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bcae sp xc bca pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bcb sp xc bcae pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bcb sp xc bcb pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bcbb sp xc bcb pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bcc sp xc bcbb pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bcc sp xc bcc pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bcc sp xc bcc pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bccd sp xc bcc pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bcd sp xc bccd pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bcd sp xc bcd pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bcdb sp xc bcd pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bcdf sp xc bcdb pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bce sp xc bcdf pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bce sp xc bce pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bced sp xc bce pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bcf sp xc bced pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bcf sp xc bcf pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bcfa sp xc bcf pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bcff sp xc bcfa pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bd sp xc bcff pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bd sp xc bd pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bd c sp xc bd pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bd sp xc bd c pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bd sp xc bd pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bd a sp xc bd pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bd e sp xc bd a pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bd sp xc bd e pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bd sp xc bd pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bd c sp xc bd pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bd sp xc bd c pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bd sp xc bd pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bd sp xc bd pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bd e sp xc bd pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bd sp xc bd e pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bd sp xc bd pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bd b sp xc bd pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bd sp xc bd b pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bd sp xc bd pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bd sp xc bd pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bd d sp xc bd pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bd sp xc bd d pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bd sp xc bd pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bd b sp xc bd pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bd f sp xc bd b pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bd sp xc bd f pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bd sp xc bd pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bd d sp xc bd pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bd sp xc bd d pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bd sp xc bd pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bd a sp xc bd pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bd f sp xc bd a pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bd sp xc bd f pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bd sp xc bd pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bd c sp xc bd pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bda sp xc bd c pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bda sp xc bda pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bdaa sp xc bda pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bdae sp xc bdaa pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bdb sp xc bdae pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bdb sp xc bdb pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bdbc sp xc bdb pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bdc sp xc bdbc pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bdc sp xc bdc pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bdc sp xc bdc pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bdce sp xc bdc pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bdd sp xc bdce pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bdd sp xc bdd pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bddb sp xc bdd pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bde sp xc bddb pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bde sp xc bde pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bde sp xc bde pc x f T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde b xc xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo x b fp xc bded sp xc bde pc x b b T gopls stderr golangorgxtoolsinternallspsourcetypeIsValid xde ca xc b xc T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspsourceutilgo xdf fp xc bdf sp xc bded pc x f T gopls stderr additional frames elided T gopls stderr created by golangorgxtoolsinternaljsonrpc ConnRun T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internaljsonrpc jsonrpc go x T gopls stderr T gopls stderr goroutine syscall T gopls stderr syscallSyscall x x xc d x x f cf af x x fa a T gopls stderr homecalebappsgosrcsyscallasmlinuxamd s x T gopls stderr syscallread x xc d x x x x ffe x T gopls stderr homecalebappsgosrcsyscallzsyscalllinuxamd go x a T gopls stderr syscallRead T gopls stderr homecalebappsgosrcsyscallsyscallunixgo T gopls stderr internalpollFDRead xc c xc d x x x x x T gopls stderr homecalebappsgosrcinternalpollfdunixgo x T gopls stderr osFileread T gopls stderr homecalebappsgosrcosfileunixgo T gopls stderr osFileRead xc xc d x x x x xc b T gopls stderr homecalebappsgosrcosfilego x T gopls stderr bufioReaderfill xc ce T gopls stderr homecalebappsgosrcbufiobufiogo x T gopls stderr bufioReaderReadSlice xc ce xa x x x x xc a T gopls stderr homecalebappsgosrcbufiobufiogo x d T gopls stderr bufioReaderReadBytes xc ce xa x xc c xc x x T gopls stderr homecalebappsgosrcbufiobufiogo x T gopls stderr bufioReaderReadString T gopls stderr homecalebappsgosrcbufiobufiogo T gopls stderr golangorgxtoolsinternaljsonrpc headerStreamRead xc f xdf d xc c c x xc ce xc c c xc x a e xc b T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internaljsonrpc streamgo x T gopls stderr golangorgxtoolsinternallspprotocolloggingStreamRead xc f xdf d xc c c xc df xc ce c xdf d xc ffb x x T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspprotocolloggo x T gopls stderr golangorgxtoolsinternaljsonrpc ConnRun xc ce c xdf d xc c c x xc f T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internaljsonrpc jsonrpc go xa T gopls stderr golangorgxtoolsinternallspServerRun T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspservergo T gopls stderr golangorgxtoolsinternallspcmdServeRun xc dfd xdf c xc c b xc f x x x x T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspcmdservego x ce T gopls stderr golangorgxtoolsinternaltoolRun xdf c xc c b xdf xc dfd xc f x x x x T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internaltooltoolgo x d T gopls stderr golangorgxtoolsinternallspcmdApplicationRun xc dfd xdf c xc c b xc f x x x x T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internallspcmdcmdgo x c T gopls stderr golangorgxtoolsinternaltoolRun xdf c xc c b xdf xc dfd xc d x x x x T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internaltooltoolgo x d T gopls stderr golangorgxtoolsinternaltoolMain xdf c xc c b xdf xc dfd xc d x x T gopls stderr homecalebpgopkgmodgolangorgxtoolsv cba a a ee internaltooltoolgo x f T gopls stderr mainmain T gopls stderr homecalebpgopkgmodgolangorgxtoolsgoplsv cba a a ee maingo xdb T gopls stderr T gopls stderr goroutine syscall T gopls stderr ossignalsignalrecv x T gopls stderr homecalebappsgosrcruntimesigqueuego x c T gopls stderr ossignalloop T gopls stderr homecalebappsgosrcossignalsignalunixgo x T gopls stderr created by ossignalinit T gopls stderr homecalebappsgosrcossignalsignalunixgo x p details The code is bouncing between the first and last line in the highlighted range in the typeIsValid function here That function was added in CL though I dont know if the underlying issue existed before cc quasilyte stamblerre Please answer these questions before submitting your issue Thanks For questions please use one of our forums What version of Go are you using go version pre go version go linuxamd pre What operating system and processor architecture are you using go env detailssummarycodego envcode Outputsummarybrpre GO MODULE GOARCHamd GOBIN GOCACHEhomeusercachegobuild GOENVhomeuserconfiggoenv GOEXE GOFLAGS GOHOSTARCHamd GOHOSTOSlinux GONOPROXY GONOSUMDB GOOSlinux GOPATHhomeusergo GOPRIVATE GOPROXY GOROOTusrlocalgo GOSUMDBsumgolangorg GOTMPDIR GOTOOLDIRusrlocalgopkgtoollinuxamd GCCGOgccgo ARar CCgcc CXXg CGOENABLED GOMOD CGOCFLAGSg O CGOCPPFLAGS CGOCXXFLAGSg O CGOFFLAGSg O CGOLDFLAGSg O PKGCONFIGpkgconfig GOGCCFLAGSfPIC m pthread fmessagelength fdebugprefixmaptmpgobuild tmpgobuild gnorecordgccswitches predetails What did you do I have created an empty package and a SWIG interface for it containing only goimport time What did you expect to see A successful build by doing go build What did you see instead The build failed with the following error tmpgobuild b dummyswiggo cant find import time Please answer these questions before submitting your issue Thanks What did you do I created a package added code to it then added a test package to the same directory What did you expect to see No errors I can start working on that package What did you see instead On finishing typing my package name all of the imports in my nontest code had could not import errors Logs Build info golangorgxtoolsgopls master golangorgxtoolsgoplsv cba a a ee h nzvuLbmeJAcY QpRizKDzip dbZHStOlteBZR PH githubcomBurntSushitomlv h WXkYYl Yr qBf K EBnL mak OimBfB XUf Vl OQ githubcomsergigodiffv h Kpca qRNrduNnOQeazBd ysaKrUJiIuISHxogkT RPQ golangorgxmodv c efee ee h WG RUwxtNT qqaXX DPA zHFNmD xaBpxzHt WcAE golangorgxsyncv c h gQV CLnAEikrhgkHFbMAEhagSSnXWGV qUMm mrU golangorgxtoolsv cba a a ee h KOkk e xd OeCDJGwacvr ICCbCsShrHiqPEdsA hg golangorgxxerrorsv b add h atklqdjdhuosWIl AIbOeHJjicWYPqR bpxqxYG pA honnefcogotoolsv h JgtbtFHMiCmsznwGVTUWbgGovpVqnlf dEJTNAXeM mvdanccxurlsv v h KaMb GLhlcSXeqhbRJODnUUBvlw jt yrjFIHAuA Go info go version go linuxamd GO MODULE GOARCHamd GOBIN GOCACHEhomejakecachegobuild GOENVhomejakeconfiggoenv GOEXE GOFLAGS GOHOSTARCHamd GOHOSTOSlinux GONOPROXY GONOSUMDB GOOSlinux GOPATHhomejakego GOPRIVATE GOPROXY GOROOTusrlibgo GOSUMDBsumgolangorg GOTMPDIR GOTOOLDIRusrlibgopkgtoollinuxamd GCCGOgccgo ARar CCgcc CXXg CGOENABLED GOMODhomejakezikaerohhortbothortbotgomod CGOCFLAGSg O CGOCPPFLAGS CGOCXXFLAGSg O CGOFFLAGSg O CGOLDFLAGSg O PKGCONFIGpkgconfig GOGCCFLAGSfPIC m pthread fmessagelength fdebugprefixmaptmpgobuild tmpgobuild gnorecordgccswitches argon Key IDKey appear to thrash memory by allocating a typically large buffer and using it once This might not scale well where every login on a hightraffic site calls this API to check a password Could API variants be added which take a config struct that optionally contains a buffer so we can use a buffer pool aead markrushakoff bradfitz Im not sure if this is supposed to work ie buildmode pie for ARM but nothing seems to suggest it shouldnt What version of Go are you using go version pre go version go version go linuxamd pre Does this issue reproduce with the latest release Yes What operating system and processor architecture are you using go env detailssummarycodego envcode Outputsummarybrpre go env GO MODULE GOARCHamd GOBIN GOCACHEhomedaenneycachegobuild GOENVhomedaenneyconfiggoenv GOEXE GOFLAGS GOHOSTARCHamd GOHOSTOSlinux GONOPROXY GONOSUMDB GOOSlinux GOPATHdataDevelopmentgo GOPRIVATE GOPROXY GOROOThomedaenneyApplicationsasdfinstallsgolang go GOSUMDBsumgolangorg GOTMPDIR GOTOOLDIRhomedaenneyApplicationsasdfinstallsgolang gopkgtoollinuxamd GCCGOgccgo ARar CCgcc CXXg CGOENABLED GOMOD CGOCFLAGSg O CGOCPPFLAGS CGOCXXFLAGSg O CGOFFLAGSg O CGOLDFLAGSg O PKGCONFIGpkgconfig GOGCCFLAGSfPIC m pthread fmessagelength fdebugprefixmaptmpgobuild tmpgobuild gnorecordgccswitches predetails What did you do maingo go package main func main printhello sh env GOOSlinux env GOARCHarm go build o test buildmode pie What did you expect to see No error and a resulting test binary What did you see instead homedaenneyApplicationsasdfinstallsgolang gopkgtoollinuxamd link running gcc failed exit status gcc error unrecognized command line option marm did you mean mabm The error also occurs if I add GOARM It triggers on a combination of buildmode pie and GOARCHarm Dropping buildmode pie the build succeeds gcc version gcc GCC Copyright C Free Software Foundation Inc This is free software see the source for copying conditions There is NO warranty not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE uname a Linux monoceros arch SMP PREEMPT Sat Jan x GNULinux pacman Qq grep gcc armnoneeabigcc gcc gcclibs Please answer these questions before submitting your issue Thanks For questions please use one of our forums What version of Go are you using go version pre go version go version go linuxamd pre Does this issue reproduce with the latest release Yes What operating system and processor architecture are you using go env detailssummarycodego envcode Outputsummarybrpre go env GO MODULE GOARCHamd GOBIN GOCACHEhomesh dmcachegobuild GOENVhomesh dmconfiggoenv GOEXE GOFLAGS GOHOSTARCHamd GOHOSTOSlinux GONOPROXY GONOSUMDB GOOSlinux GOPATHhomesh dmgo GOPRIVATE GOPROXY GOROOTusrlocalgo GOSUMDBsumgolangorg GOTMPDIR GOTOOLDIRusrlocalgopkgtoollinuxamd GCCGOgccgo ARar CCgcc CXXg CGOENABLED GOMOD CGOCFLAGSg O CGOCPPFLAGS CGOCXXFLAGSg O CGOFFLAGSg O CGOLDFLAGSg O PKGCONFIGpkgconfig GOGCCFLAGSfPIC m pthread fmessagelength fdebugprefixmaptmpgobuild tmpgobuild gnorecordgccswitches predetails What did you do I found a new cryptographical hash function named BLAKE It also has Go implementation What did you expect to see BLAKE support in Go What did you see instead No BLAKE support in Go Octal literals parsing was implemented in strconv in golangorgcl and in mathbig in golangorgcl Underscore separator parsing was implemented in strconv in golangorgcl and in mathbig golangorgcl Thus octal underscore literal parsing in goconstant is removed as redundant This CL resolves TODO left by gri in golangorgcl There are two trybot invocations that were started on January th They still havent finished They look like this All builds other than linuxamd passed linuxamd gets to the end and then doesnt complete Its log is detailsbr builder linuxamd rev af eda f bf a b d d bec a a buildlet GCE VM buildletlinuxstretchrn cea started UTC m status still running Events T Z checkingforsnapshot T Z finishcheckingforsnapshot after ms T Z getbuildlet T Z finishgetbuildlet after m s T Z usingbuildlet T Z writesnapshottar T Z finishwritesnapshottar after s T Z makeandtest T Z startinghelpers T Z gethelper helper T Z gethelper helper T Z gethelper helper T Z gethelper helper T Z discoveringtests T Z getteststats T Z finishgetteststats after s T Z startingtests tests T Z runtestsmulti gotestarchivetar gotestarchivezip gotestbufio T Z finishruntestsmulti after s gotestarchivetar gotestarchivezip gotestbufio T Z runtestsmulti gotestbytes gotestcompressbzip gotestcompressflate T Z finishruntestsmulti after s gotestbytes gotestcompressbzip gotestcompressflate T Z runtestsmulti gotestcompressgzip gotestcompresslzw gotestcompresszlib T Z finishruntestsmulti after s gotestcompressgzip gotestcompresslzw gotestcompresszlib T Z runtestsmulti gotestcontainerheap gotestcontainerlist gotestcontainerring gotestcontext T Z finishruntestsmulti after s gotestcontainerheap gotestcontainerlist gotestcontainerring gotestcontext T Z runtestsmulti gotestcrypto gotestcryptoaes gotestcryptocipher gotestcryptodes gotestcryptodsa T Z finishruntestsmulti after s gotestcrypto gotestcryptoaes gotestcryptocipher gotestcryptodes gotestcryptodsa T Z runtestsmulti gotestcryptoecdsa gotestcryptoed gotestcryptoelliptic gotestcryptohmac gotestcryptointernalsubtle gotestcryptomd T Z finishruntestsmulti after s gotestcryptoecdsa gotestcryptoed gotestcryptoelliptic gotestcryptohmac gotestcryptointernalsubtle gotestcryptomd T Z runtestsmulti gotestcryptorand gotestcryptorc gotestcryptorsa gotestcryptosha gotestcryptosha gotestcryptosha T Z finishruntestsmulti after s gotestcryptorand gotestcryptorc gotestcryptorsa gotestcryptosha gotestcryptosha gotestcryptosha T Z runtestsmulti gotestcryptosubtle gotestcryptotls gotestcryptox T Z finishruntestsmulti after s gotestcryptosubtle gotestcryptotls gotestcryptox T Z runtestsmulti gotestdatabasesql gotestdatabasesqldriver gotestdebugdwarf gotestdebugelf gotestdebuggosym gotestdebugmacho T Z finishruntestsmulti after s gotestdatabasesql gotestdatabasesqldriver gotestdebugdwarf gotestdebugelf gotestdebuggosym gotestdebugmacho T Z runtestsmulti gotestdebugpe gotestdebugplan obj gotestencodingascii gotestencodingasn gotestencodingbase gotestencodingbase gotestencodingbinary gotestencodingcsv gotestencodinggob T Z finishruntestsmulti after s gotestdebugpe gotestdebugplan obj gotestencodingascii gotestencodingasn gotestencodingbase gotestencodingbase gotestencodingbinary gotestencodingcsv gotestencodinggob T Z runtestsmulti gotestencodinghex gotestencodingjson gotestencodingpem gotestencodingxml gotesterrors gotestexpvar T Z finishruntestsmulti after s gotestencodinghex gotestencodingjson gotestencodingpem gotestencodingxml gotesterrors gotestexpvar T Z runtestsmulti gotestflag gotestfmt gotestgoast T Z finishruntestsmulti after s gotestflag gotestfmt gotestgoast T Z runtestsmulti gotestgobuild gotestgoconstant gotestgodoc gotestgoformat gotestgoimporter gotestgointernalgccgoimporter gotestgointernalgcimporter T Z finishruntestsmulti after s gotestgobuild gotestgoconstant gotestgodoc gotestgoformat gotestgoimporter gotestgointernalgccgoimporter gotestgointernalgcimporter T Z runtestsmulti gotestgointernalsrcimporter gotestgoparser gotestgoprinter gotestgoscanner gotestgotoken T Z finishgethelper after s helper T Z emptyhelperready T Z gotemptytesthelper GCE VM buildletlinuxstretchrn e f T Z finishgethelper after s helper T Z emptyhelperready T Z gotemptytesthelper GCE VM buildletlinuxstretchrn b fd T Z finishruntestsmulti after s gotestgointernalsrcimporter gotestgoparser gotestgoprinter gotestgoscanner gotestgotoken T Z runtestsmulti gotestgotypes gotesthash gotesthashadler gotesthashcrc T Z finishgethelper after s helper T Z emptyhelperready T Z gotemptytesthelper GCE VM buildletlinuxstretchrn fbd c T Z finishgethelper after s helper T Z emptyhelperready T Z gotemptytesthelper GCE VM buildletlinuxstretchrne e f T Z testhelpersetup T Z runtestgotestcmdgo T Z finishruntestsmulti after s gotestgotypes gotesthash gotesthashadler gotesthashcrc T Z runtestsmulti gotesthashcrc gotesthashfnv gotesthashmaphash gotesthtml gotesthtmltemplate T Z testhelpersetup T Z runtestreboot T Z testhelpersetup T Z runtestcgotest T Z testhelpersetup T Z runtestruntimecpu T Z finishruntestsmulti after s gotesthashcrc gotesthashfnv gotesthashmaphash gotesthtml gotesthtmltemplate T Z runtestsmulti gotestimage gotestimagecolor gotestimagedraw gotestimagegif gotestimagejpeg T Z finishruntestsmulti after s gotestimage gotestimagecolor gotestimagedraw gotestimagegif gotestimagejpeg T Z runtestsmulti gotestimagepng gotestindexsuffixarray T Z finishruntestsmulti after s gotestimagepng gotestindexsuffixarray T Z runtestsmulti gotestinternalcpu gotestinternalfmtsort T Z finishruntestsmulti after s gotestinternalcpu gotestinternalfmtsort T Z runtestsmulti gotestinternalpoll gotestinternalreflectlite gotestinternalsingleflight gotestinternaltrace T Z finishruntestsmulti after s gotestinternalpoll gotestinternalreflectlite gotestinternalsingleflight gotestinternaltrace T Z runtestsmulti gotestinternalxcoff gotestio gotestioioutil gotestlog T Z finishruntestsmulti after s gotestinternalxcoff gotestio gotestioioutil gotestlog T Z runtestsmulti gotestlogsyslog gotestmath gotestmathbig gotestmathbits T Z finishruntestsmulti after s gotestlogsyslog gotestmath gotestmathbig gotestmathbits T Z runtestsmulti gotestmathcmplx gotestmathrand gotestmime T Z finishruntestsmulti after s gotestmathcmplx gotestmathrand gotestmime T Z runtestsmulti gotestmimemultipart gotestmimequotedprintable T Z finishruntestsmulti after s gotestmimemultipart gotestmimequotedprintable T Z runtestgotestnet T Z finishruntestgotestnet after s T Z runtestgotestnethttp T Z finishruntestruntimecpu after s T Z runtesttestshared T Z finishruntestcgotest after s T Z runtestrace T Z finishruntestgotestnethttp after s T Z runtestsmulti gotestnethttpcgi gotestnethttpcookiejar gotestnethttpfcgi gotestnethttphttptest T Z finishruntestsmulti after s gotestnethttpcgi gotestnethttpcookiejar gotestnethttpfcgi gotestnethttphttptest T Z runtestsmulti gotestnethttphttptrace gotestnethttphttputil gotestnethttpinternal gotestnethttppprof gotestnetinternalsocktest T Z finishruntestsmulti after s gotestnethttphttptrace gotestnethttphttputil gotestnethttpinternal gotestnethttppprof gotestnetinternalsocktest T Z runtestsmulti gotestnetmail gotestnetrpc gotestnetrpcjsonrpc gotestnetsmtp gotestnettextproto gotestneturl T Z finishruntestsmulti after s gotestnetmail gotestnetrpc gotestnetrpcjsonrpc gotestnetsmtp gotestnettextproto gotestneturl T Z runtestsmulti gotestos gotestosexec T Z finishruntestsmulti after s gotestos gotestosexec T Z runtestsmulti gotestossignal gotestosuser gotestpath gotestpathfilepath T Z finishruntestsmulti after s gotestossignal gotestosuser gotestpath gotestpathfilepath T Z runtestsmulti gotestplugin gotestreflect gotestregexp gotestregexpsyntax T Z finishruntestsmulti after s gotestplugin gotestreflect gotestregexp gotestregexpsyntax T Z runtestgotestruntime T Z finishruntesttestshared after s T Z runtesttest T Z finishruntestrace after s T Z runtesttest T Z finishruntestgotestcmdgo after m s T Z runtesttestcarchive T Z stillwaitingontest gotestruntime T Z finishruntestreboot after m s T Z runtesttestplugin T Z finishruntestgotestruntime after s T Z runtestsmulti gotestruntimedebug gotestruntimeinternalatomic gotestruntimeinternalmath gotestruntimeinternalsys gotestruntimepprof T Z finishruntesttest after s T Z runtestgotestcmdcompileinternalgc T Z finishruntestsmulti after s gotestruntimedebug gotestruntimeinternalatomic gotestruntimeinternalmath gotestruntimeinternalsys gotestruntimepprof T Z runtestsmulti gotestruntimepprofinternalprofile gotestruntimetrace gotestsort goteststrconv T Z finishruntestsmulti after s gotestruntimepprofinternalprofile gotestruntimetrace gotestsort goteststrconv T Z runtestsmulti goteststrings gotestsync gotestsyncatomic T Z finishruntestsmulti after s goteststrings gotestsync gotestsyncatomic T Z runtestsmulti gotestsyscall gotesttesting gotesttestingiotest T Z finishruntesttestcarchive after s T Z runtestgotestcmdcompileinternalssa T Z finishruntesttestplugin after s T Z runtesttest T Z finishruntestsmulti after s gotestsyscall gotesttesting gotesttestingiotest T Z runtestsmulti gotesttestingquick gotesttextscanner gotesttexttabwriter gotesttexttemplate gotesttexttemplateparse gotesttime T Z finishruntestgotestcmdcompileinternalgc after s T Z runtesttest T Z finishruntestsmulti after s gotesttestingquick gotesttextscanner gotesttexttabwriter gotesttexttemplate gotesttexttemplateparse gotesttime T Z runtestsmulti gotestunicode gotestunicodeutf gotestunicodeutf gotestcmdaddr line gotestcmdapi gotestcmdasminternalasm gotestcmdasminternallex T Z finishruntestsmulti after s gotestunicode gotestunicodeutf gotestunicodeutf gotestcmdaddr line gotestcmdapi gotestcmdasminternalasm gotestcmdasminternallex T Z runtestgotestcmdcompile T Z finishruntestgotestcmdcompileinternalssa after s T Z runtesttest T Z finishruntesttest after s T Z runtesttest T Z finishruntestgotestcmdcompile after s T Z runtestgotestcmdcompileinternallogopt T Z finishruntestgotestcmdcompileinternallogopt after ms T Z runtestsmulti gotestcmdcompileinternalsyntax gotestcmdcompileinternaltest gotestcmdcompileinternaltypes gotestcmdcover gotestcmddoc gotestcmdfix T Z finishruntesttest after s T Z runtestapi T Z finishruntesttest after s T Z runtesttest T Z finishruntestsmulti after s gotestcmdcompileinternalsyntax gotestcmdcompileinternaltest gotestcmdcompileinternaltypes gotestcmdcover gotestcmddoc gotestcmdfix T Z runtestsmulti gotestcmdgointernalauth gotestcmdgointernalcache gotestcmdgointernalgenerate gotestcmdgointernalget gotestcmdgointernalimports gotestcmdgointernalload gotestcmdgointernallockedfile gotestcmdgointernallockedfileinternalfilelock T Z finishruntestsmulti after s gotestcmdgointernalauth gotestcmdgointernalcache gotestcmdgointernalgenerate gotestcmdgointernalget gotestcmdgointernalimports gotestcmdgointernalload gotestcmdgointernallockedfile gotestcmdgointernallockedfileinternalfilelock T Z runtestsmulti gotestcmdgointernalmodconv gotestcmdgointernalmodfetch gotestcmdgointernalmodfetchcodehost gotestcmdgointernalmodfetchzipsumtest T Z finishruntesttest after s T Z runtesttest T Z finishruntestsmulti after s gotestcmdgointernalmodconv gotestcmdgointernalmodfetch gotestcmdgointernalmodfetchcodehost gotestcmdgointernalmodfetchzipsumtest T Z runtestsmulti gotestcmdgointernalmodload gotestcmdgointernalmvs gotestcmdgointernalpar gotestcmdgointernalrenameio gotestcmdgointernalsearch gotestcmdgointernaltxtar gotestcmdgointernalweb T Z finishruntestapi after s T Z runtestgotestcmdvet T Z finishruntestsmulti after s gotestcmdgointernalmodload gotestcmdgointernalmvs gotestcmdgointernalpar gotestcmdgointernalrenameio gotestcmdgointernalsearch gotestcmdgointernaltxtar gotestcmdgointernalweb T Z runtestsmulti gotestcmdgointernalwork gotestcmdgofmt gotestcmdinternalbuildid gotestcmdinternaldwarf gotestcmdinternaledit gotestcmdinternalgoobj gotestcmdinternalobj gotestcmdinternalobjarm T Z finishruntesttest after s T Z runtesttest T Z finishruntestsmulti after s gotestcmdgointernalwork gotestcmdgofmt gotestcmdinternalbuildid gotestcmdinternaldwarf gotestcmdinternaledit gotestcmdinternalgoobj gotestcmdinternalobj gotestcmdinternalobjarm T Z runtestsmulti gotestcmdinternalobjriscv gotestcmdinternalobjx gotestcmdinternalobjabi gotestcmdinternalsrc gotestcmdinternaltest json T Z finishruntestsmulti after s gotestcmdinternalobjriscv gotestcmdinternalobjx gotestcmdinternalobjabi gotestcmdinternalsrc gotestcmdinternaltest json T Z runtestgotestcmdlink T Z finishruntesttest after s T Z runtesttest T Z finishruntestgotestcmdvet after s T Z runtesttestcshared T Z finishruntesttest after s T Z runtestdocprogs T Z finishruntestgotestcmdlink after s T Z runtestsmulti gotestcmdlinkinternalld gotestcmdlinkinternalsym gotestcmdnm T Z finishruntesttest after s T Z runtestpieinternal T Z finishruntestsmulti after s gotestcmdlinkinternalld gotestcmdlinkinternalsym gotestcmdnm T Z runtestsmulti gotestcmdobjdump gotestcmdpack gotestcmdtrace T Z finishruntestdocprogs after s T Z runtestcgoerrors T Z finishruntestsmulti after s gotestcmdobjdump gotestcmdpack gotestcmdtrace T Z runtestosusergo T Z finishruntestpieinternal after s T Z runtestsynccpu T Z finishruntestosusergo after ms T Z runtestcmdgotestterminal T Z finishruntesttestcshared after s T Z runtestmovedgoroot T Z finishruntestcmdgotestterminal after ms T Z runtestnolibgcccryptox T Z finishruntestcgoerrors after s T Z runtestcgostdio T Z finishruntestnolibgcccryptox after s T Z runtestnolibgccnet T Z finishruntestmovedgoroot after s T Z runtestpieinternalcgo T Z finishruntestnolibgccnet after s T Z runtestnolibgccosuser T Z finishruntestsynccpu after s T Z runtestcodewalk T Z finishruntestcgostdio after s T Z runtestwiki T Z finishruntestnolibgccosuser after ms T Z runtestcgolife T Z finishruntestcodewalk after s T Z runtestcgofortran T Z finishruntestwiki after s T Z runtesttestsovar T Z finishruntestcgolife after s T Z runtestswigstdio T Z finishruntestpieinternalcgo after s T Z runtestbenchgo T Z finishruntestswigstdio after s T Z runtesttestgodefs T Z finishruntestcgofortran after s T Z runtesttestso T Z finishruntesttestsovar after s T Z runtesttestsanitizersmsan T Z finishruntestbenchgo after s T Z runtesttestsigfwd T Z finishruntesttestgodefs after s T Z runtesttestasan T Z finishruntesttestsanitizersmsan after s T Z nonewtestsremain T Z closedhelper T Z finishruntesttestso after s T Z nonewtestsremain T Z closedhelper T Z finishruntesttestasan after s T Z finishruntesttestsigfwd after s T Z nonewtestsremain T Z closedhelper T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test T Z stillwaitingontest test s now Build log linuxamd at af eda f bf a b d d bec a a Testing packages ok archivetar s ok archivezip s ok bufio s ok bytes s ok compressbzip s ok compressflate s ok compressgzip s ok compresslzw s ok compresszlib s ok containerheap s ok containerlist s ok containerring s ok context s ok crypto s ok cryptoaes s ok cryptocipher s ok cryptodes s ok cryptodsa s ok cryptoecdsa s ok cryptoed s ok cryptoelliptic s ok cryptohmac s ok cryptointernalsubtle s ok cryptomd s ok cryptorand s ok cryptorc s ok cryptorsa s ok cryptosha s ok cryptosha s ok cryptosha s ok cryptosubtle s ok cryptotls s ok cryptox s ok databasesql s ok databasesqldriver s ok debugdwarf s ok debugelf s ok debuggosym s ok debugmacho s ok debugpe s ok debugplan obj s ok encodingascii s ok encodingasn s ok encodingbase s ok encodingbase s ok encodingbinary s ok encodingcsv s ok encodinggob s ok encodinghex s ok encodingjson s ok encodingpem s ok encodingxml s ok errors s ok expvar s ok flag s ok fmt s ok goast s ok gobuild s ok goconstant s ok godoc s ok goformat s ok goimporter s ok gointernalgccgoimporter s ok gointernalgcimporter s ok gointernalsrcimporter s ok goparser s ok goprinter s ok goscanner s ok gotoken s ok gotypes s ok hash s ok hashadler s ok hashcrc s ok hashcrc s ok hashfnv s ok hashmaphash s ok html s ok htmltemplate s ok image s ok imagecolor s ok imagedraw s ok imagegif s ok imagejpeg s ok imagepng s ok indexsuffixarray s ok internalcpu s ok internalfmtsort s ok internalpoll s ok internalreflectlite s ok internalsingleflight s ok internaltrace s ok internalxcoff s ok io s ok ioioutil s ok log s ok logsyslog s ok math s ok mathbig s ok mathbits s ok mathcmplx s ok mathrand s ok mime s ok mimemultipart s ok mimequotedprintable s ok net s ok nethttp s ok nethttpcgi s ok nethttpcookiejar s ok nethttpfcgi s ok nethttphttptest s ok nethttphttptrace s ok nethttphttputil s ok nethttpinternal s ok nethttppprof s ok netinternalsocktest s ok netmail s ok netrpc s ok netrpcjsonrpc s ok netsmtp s ok nettextproto s ok neturl s ok os s ok osexec s ok ossignal s ok osuser s ok path s ok pathfilepath s ok plugin s ok reflect s ok regexp s ok regexpsyntax s ok runtime s ok runtimedebug s ok runtimeinternalatomic s ok runtimeinternalmath s ok runtimeinternalsys s ok runtimepprof s ok runtimepprofinternalprofile s ok runtimetrace s ok sort s ok strconv s ok strings s ok sync s ok syncatomic s ok syscall s ok testing s ok testingiotest s ok testingquick s ok textscanner s ok texttabwriter s ok texttemplate s ok texttemplateparse s ok time s ok unicode s ok unicodeutf s ok unicodeutf s ok cmdaddr line s ok cmdapi s ok cmdasminternalasm s ok cmdasminternallex s ok cmdcompile s ok cmdcompileinternalgc s ok cmdcompileinternallogopt s ok cmdcompileinternalssa s ok cmdcompileinternalsyntax s ok cmdcompileinternaltest s no tests to run ok cmdcompileinternaltypes s ok cmdcover s ok cmddoc s ok cmdfix s ok cmdgo s ok cmdgointernalauth s ok cmdgointernalcache s ok cmdgointernalgenerate s ok cmdgointernalget s ok cmdgointernalimports s ok cmdgointernalload s ok cmdgointernallockedfile s ok cmdgointernallockedfileinternalfilelock s ok cmdgointernalmodconv s ok cmdgointernalmodfetch s ok cmdgointernalmodfetchcodehost s ok cmdgointernalmodfetchzipsumtest s ok cmdgointernalmodload s ok cmdgointernalmvs s ok cmdgointernalpar s ok cmdgointernalrenameio s ok cmdgointernalsearch s ok cmdgointernaltxtar s ok cmdgointernalweb s ok cmdgointernalwork s ok cmdgofmt s ok cmdinternalbuildid s ok cmdinternaldwarf s ok cmdinternaledit s ok cmdinternalgoobj s ok cmdinternalobj s ok cmdinternalobjarm s ok cmdinternalobjriscv s ok cmdinternalobjx s ok cmdinternalobjabi s ok cmdinternalsrc s ok cmdinternaltest json s ok cmdlink s ok cmdlinkinternalld s ok cmdlinkinternalsym s ok cmdnm s ok cmdobjdump s ok cmdpack s ok cmdtrace s ok cmdvet s osuser with tag osusergo ok osuser s GOMAXPROCS runtime cpu quick ok runtime s cmdgo terminal test skipping terminal test stdoutstderr not terminals moved GOROOT ok fmt s Testing without libgcc ok cryptox s ok net s ok osuser s internal linking of buildmodepie ok reflect s ok osuser s sync cpu ok sync s Testing race detector ok runtimerace s ok flag s ok net s ok os s ok osexec s ok encodinggob s ok flag s ok osexec s misccgostdio PASS misccgolife PASS misccgofortran PASS ok misccgofortran s miscswigstdio PASS ok miscswigstdio s misccgotest PASS ok misccgotest s PASS ok misccgotest s PASS ok misccgotest s PASS ok misccgotesttls s PASS ok misccgotesttls s PASS ok misccgotesttls s PASS ok misccgonocgo s PASS ok misccgonocgo s PASS ok misccgonocgo s PASS ok misccgotest s PASS ok misccgotest s PASS ok misccgotest s PASS ok misccgotesttls s PASS ok misccgonocgo s misccgotestgodefs PASS misccgotestso ok misccgotestso s misccgotestsovar ok misccgotestsovar s misccgotestcarchive PASS misccgotestcshared PASS misccgotestshared ok misccgotestshared s misccgotestplugin ok misccgotestplugin s misccgotestasan ok testasan ms misccgotestsanitizers PASS misccgoerrors PASS misccgotestsigfwd ok testsigfwd docprogs ok run s docarticleswiki ok docarticleswiki s doccodewalk ok commandlinearguments s testbenchgo test details Note the many repeated stillwaitingontest test events at the end cc toothrot cagedmantis Please answer these questions before submitting your issue Thanks For questions please use one of our forums What version of Go are you using go version pre go version go version go pre Does this issue reproduce with the latest release not sure What operating system and processor architecture are you using go env Windows CentOS What did you do I wrote two different components in golang and compiled them into C dynamic libraries Then built a c executable with these two dynamic libraries Both these libraries have a running goroutine receiving msg from net and call back c functionsnot the same one though to notify events In the test environment with a light workload everything works all right But when it comes to heavy load production env it crashes randomly Sometimes I can get exception infomation from stderr saying runtime unknown pc other times it just simply crashes Ive carefully checked c layer and didnt see any suspicious part c layer is quite simple And I also notice that windows is more vulnerable Rarely see it crashes on Linux So I wonder if the problem is coming from the go part Can two go shared libraries really coexist together in one process If not How can I solve this I dont wanna rewrite everything What did you expect to see Running normally What did you see instead randomly crashes sometimes get exception report like following one pre Exception xc x x x d c b PC x d c b runtime unknown pc x d c b stack framesp x f fp x stack x x f f f f f f f d c fb f f f fed d be f ed d c f c f fed d be f a b f b f fef f c f f b f d f e f f ed f f f f b f f a d dbe f cbd f f f d fed d ddf f ed f b f bebc f fffffffffffffffe bebc f a f fed d ccc f b fed d be ed f c ed f d e f e ed bebc f f ed runtime unknown pc x d c b stack framesp x f fp x stack x x f f f f f f f d c fb f f f fed d be f ed d c f c f fed d be f a b f b f fef f c f f b f d f e f f ed f f f f b f f a d dbe f cbd f f f d fed d ddf f ed f b f bebc f fffffffffffffffe bebc f a f fed d ccc f b fed d be ed f c ed f d e f e ed bebc f f ed goroutine syscall mainCfuncOnRspOrderInsert x cbd x b x b xee xee x x c f c f c f x f cgogotypesgo x c mainRecvRun Dworkspacegosrcccfinvestlibitgmaingo xeff created by mainLibITGReqUserLogin Dworkspacegosrcccfinvestlibitgmaingo x a goroutine IO wait internalpollruntimepollWait x b x x d a CGosrcruntimenetpollgo x d internalpollpollDescwait xc c c x x d x x CGosrcinternalpollfdpollruntimego xa internalpollioSrvExecIO x d b xc c x d ed x xc a d x CGosrcinternalpollfdwindowsgo x internalpollFDRead xc c xc a x x x x x CGosrcinternalpollfdwindowsgo x b netnetFDRead xc c xc a x x x c df x x CGosrcnetfdwindowsgo x netconnRead xc c xc a x x x x x CGosrcnetnetgo x ccfinvestlibitgitgrecvUntilFull x d c xc c xc a x x xc d e x Dworkspacegosrcccfinvestlibitgitgitggo xc ccfinvestlibitgitgItgrecvUntilFull Dworkspacegosrcccfinvestlibitgitgitggo ccfinvestlibitgitgItgrecvRun xc b f Dworkspacegosrcccfinvestlibitgitgitggo xaf created by ccfinvestlibitgitgItgStart Dworkspacegosrcccfinvestlibitgitgitggo x db goroutine select githubcomglobalsignmgonewcoarseTimeProviderfunc x d xc a Dworkspacegosrcgithubcomglobalsignmgocoarsetimego x created by githubcomglobalsignmgonewcoarseTimeProvider Dworkspacegosrcgithubcomglobalsignmgocoarsetimego x goroutine chan receive ccfinvestlibitgitgItgsendRun xc b f Dworkspacegosrcccfinvestlibitgitgitggo x d created by ccfinvestlibitgitgItgStart Dworkspacegosrcccfinvestlibitgitgitggo x goroutine sleep runtimegoparkunlock CGosrcruntimeprocgo timeSleep x fc ac CGosrcruntimetimego x e ccfinvestlibitgitgItgkeepAliveRun xc b f Dworkspacegosrcccfinvestlibitgitgitggo x created by ccfinvestlibitgitgItgStart Dworkspacegosrcccfinvestlibitgitgitggo x rax x d c rbx x c rcx x e rdi x rsi x rbp x rsp x f r x d e r x c r x r x f r x f a r x r x d f r x rip x d c b rflags x cs x fs x gs x b pre