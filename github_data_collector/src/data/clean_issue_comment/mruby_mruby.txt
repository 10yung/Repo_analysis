 Add mrbccleanuplocalvariables function with MRBAPI In mirb command the variable is defined after the r switch The Fixnum constant is now an alias for the Integer class Remove struct mrbstatefixnumclass member If necessary use struct mrbstateintegerclass instead Is the following behavior intentional Files ruby arb a ruby brb p a mruby console binmruby r arb brb Ruby console ruby r arb brb Traceback most recent call last brb in main undefined local variable or method a for mainObject NameError build mruby in ubuntu bit with ASAN poc a basdfasdfasdf adaf asdf asdfa sdf asdfasdfasdfa sdf c foo foonil nil nil d nil sdfg srand a did a dinitializea result result ERROR AddressSanitizer requested allocation size x x after adjustments for alignment red zones etc exceeds maximum supported size of x thread T x a in realloc homecasperfuzzfuzzdepsllvm srcprojectscompilerrtlibasanasanmalloclinuxcc x a in mrbdefaultallocf homecaspertargetsgrammamrubydbgBUILDsrcstatec x f ab in mrbreallocsimple homecaspertargetsgrammamrubydbgBUILDsrcgcc x f dae in mrbrealloc homecaspertargetsgrammamrubydbgBUILDsrcgcc x f in mrbmalloc homecaspertargetsgrammamrubydbgBUILDsrcgcc x e in aryexpandcapa homecaspertargetsgrammamrubydbgBUILDsrcarrayc x d ed in mrbaryset homecaspertargetsgrammamrubydbgBUILDsrcarrayc x b in mrbaryaset homecaspertargetsgrammamrubydbgBUILDsrcarrayc x f in mrbvmexec homecaspertargetsgrammamrubydbgBUILDsrcvmc x in mrbvmrun homecaspertargetsgrammamrubydbgBUILDsrcvmc x da f in mrbtoprun homecaspertargetsgrammamrubydbgBUILDsrcvmc x a d in mrbloadexec homecaspertargetsgrammamrubydbgBUILDmrbgemsmrubycompilercoreparsey x a d in mrbloadfilecxt homecaspertargetsgrammamrubydbgBUILDmrbgemsmrubycompilercoreparsey x f ff in main homecaspertargetsgrammamrubydbgBUILDmrbgemsmrubybinmrubytoolsmrubymrubyc x f e cb in libcstartmain buildglibcOTsEL glibc csucsulibcstartc HINT if you dont care about these errors you may set allocatormayreturnnull SUMMARY AddressSanitizer allocationsizetoobig homecasperfuzzfuzzdepsllvm srcprojectscompilerrtlibasanasanmalloclinuxcc in realloc ABORTING For better scripting side UTF support Latest success Supports Ubuntu Ubuntu gcc Ubuntu clang macOS MinGW MSVC Cygwin When supporting mruby in gomruby it caused some stack unwinding error Unexpected NULL stack pointer occur in the mrbprotect Logs Logs with sanitizer Note that this bit flags are not compatible with the native flags defined in include fcntlh 