 See fixes Updated and or nor to instead call a new recursivematches method on the defaultrb file The recursivematches method checks if the document is a Hash and doesnt try to call matches on it Recursive support was cleaner to add with the addition of a proper notrb for the not operator The original issue that this PR fixes was that nested conditionals like or inside of a elemMatch would raise NoMethodError undefined method matches for a b Hash since a Hash value would get evaluated internally inside the elemMatch execution