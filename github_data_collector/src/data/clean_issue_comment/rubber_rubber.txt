Suggesting production as alias for new instance could be misleading Better is to use web ded globally anymore Having rubber here also causes problems for folks using gitunreleased versions of rubber Hi Im using rubber At the end of the deploy it tries to restart apache And it appears to succeed But then the server remains down and Ill need to run rubberapachestart separately to get it back up again here is the log of the deploy with relevant bits command finished in ms executing rubberapachereload executing rubberapacheserialreload executing rubberapacheserialtaskserialreloadproductionapp executing sudo p sudo password bash l c if ps ax grep v grep grep c apache devnull then service apache start else service apache reload fi servers productionapp foocom productionapp foocom executing command out productionapp foocom Reloading web server config apache out productionapp foocom out productionapp foocom out productionapp foocom out productionapp foocom out productionapp foocom OK command finished in ms executing rubberapacheserialtaskserialreloadproductionapp executing sudo p sudo password bash l c if ps ax grep v grep grep c apache devnull then service apache start else service apache reload fi servers productionapp foocom productionapp foocom executing command out productionapp foocom Reloading web server config apache out productionapp foocom out productionapp foocom out productionapp foocom out productionapp foocom out productionapp foocom OK command finished in ms executing rubberpostrestart triggering after callbacks for rubberpostrestart executing rubbermonitstart executing multiple commands in parallel else sudo p sudo password bash l c service monit status service monit start else sudo p sudo password bash l c service monit status service monit start servers productionapp foocom productionapp foocom productionapp foocom executing command productionapp foocom executing command out productionapp foocom monit is not running out productionapp foocom Please use START variable in etcdefaultmonit out productionapp foocom to enabledisable monit startup out productionapp foocom Starting daemon monitor monit out productionapp foocom monit is not running out productionapp foocom out productionapp foocom out productionapp foocom Please use START variable in etcdefaultmonit out productionapp foocom to enabledisable monit startup out productionapp foocom out productionapp foocom out productionapp foocom OK out productionapp foocom Starting daemon monitor monit out productionapp foocom out productionapp foocom out productionapp foocom out productionapp foocom out productionapp foocom OK command finished in ms triggering after callbacks for deploy executing cleanup executing multiple commands in parallel Let me know if I need to provide any more debugging details cap rubberbootstrap failed binbash l c sudo p sudo password bash l tmpenablemultiverse After ssh I run below command manully at server sudo p sudo password bash l tmpenablemultiverse tmpenablemultiverse line etcaptsourceslistdrubbermultiversesourcelist No such file or directory cat etcaptsourceslist No such file or directory Rubber Template rubber vulcanize completepassengernginx AWS Image details imagetype t micro imageid amic c dd Since machines are region specific you can use below region region useast Hi Im trying to deploy to new droplet on Digital Ocean and running into the following notice about a deprecated APIv shell devopenbound rebrandopenbound cap rubbercreate triggering load callbacks executing rubberinit executing rubbercreate Instance alias eg web or web web web web Instance roles eg webappdbprimarytrue webappdbprimarytrue Creating instance x MBopenboundproductiondefaultopenboundproductionwebNew York Usersiarvmgemsruby rstacksproductiongemsexcon libexconmiddlewaresexpectsrb in responsecall Expected Actual Gone ExconErrorsGone exconerrorresponse body status ERROR errormessage API v has reached endoflife Please use API v message API v has reached endoflife Please use API v headers CFRAY c e d f EWR CacheControl nocache Connection keepalive ContentLength ContentType applicationjson charsetutf Date Tue Feb GMT Server cloudflarenginx SetCookie cfduidd f f d fb fb eead expiresWed Feb GMT path domaindigitaloceancom HttpOnly XContentTypeOptions nosniff XFrameOptions SAMEORIGIN XGateway Edge Gateway XRequestId ec de c bc ca c e e a XRuntime XXssProtection modeblock localaddress localport reasonphrase Gone remoteip status statusline HTTP Gone r n from Usersiarvmgemsruby rstacksproductiongemsexcon libexconmiddlewaresresponseparserrb in responsecall from Usersiarvmgemsruby rstacksproductiongemsexcon libexconconnectionrb in response from Usersiarvmgemsruby rstacksproductiongemsexcon libexconconnectionrb in request from Usersiarvmgemsruby rstacksproductiongemsfogcore libfogcoreconnectionrb in request from Usersiarvmgemsruby rstacksproductiongemsfogxml libfogxmlconnectionrb in request from Usersiarvmgemsruby rstacksproductiongemsfog libfogdigitaloceancomputerb in block in request from Usersiarvmgemsruby rstacksproductiongemsfog libfogdigitaloceancomputerb in retryeventlock from Usersiarvmgemsruby rstacksproductiongemsfog libfogdigitaloceancomputerb in request from Usersiarvmgemsruby rstacksproductiongemsfog libfogdigitaloceanrequestscomputelistregionsrb in listregions from Usersiarvmgemsruby rstacksproductiongemsfog libfogdigitaloceanmodelscomputeregionsrb in all from Usersiarvmgemsruby rstacksproductiongemsfogcore libfogcorecollectionrb in lazyload from Usersiarvmgemsruby rstacksproductiongemsfogcore libfogcorecollectionrb in each from Usersiarvmgemsruby rstacksproductiongemsrubber librubberclouddigitaloceanrb in find from Usersiarvmgemsruby rstacksproductiongemsrubber librubberclouddigitaloceanrb in createinstance from Usersiarvmgemsruby rstacksproductiongemsrubber librubberthreadsafeproxyrb in methodmissing from Usersiarvmgemsruby rstacksproductiongemsrubber librubberrecipesrubberinstancesrb in createinstance from Usersiarvmgemsruby rstacksproductiongemsrubber librubberrecipesrubberinstancesrb in block levels in createinstances Using gem rubber I have a hardened instance with IPtables rules The keyserver should use port which is more alowed aptkey adv keyserver keyserverubuntucom recvkeys F B CAC B F OR add a list of ports that must be opened in certain stages bootstrap deploy etc Im trying to break apart our single installation into different servers The first is a new database server We are on DigitalOcean Using Ubuntu I know that is not working in Rubber it seems I do ALIASdb ROLESdbprimarytrue mysqlmastermonit cap rubbercreate But things fail on bootstrap trying to install mysql or more accurately reconfigure mysql failed binbash l c sudo p sudo password bash l tmpreconfiguremysql on zmdb xxxxcom It seems the install of mysql is not right It wont start Were on the Master branch of rubber Were deep in the doo doo now as we had banked on rubber being able to spin up new servers for us Help These templates make two new roles available filebeat filebeatlogz The later role only installs the logzio TLS certificates Hello Kevin and rubber crew We have started using Filebeat along with logzio and the logstasher gem for consolidated awesome logging I want to integrate this into our Rubber environment and Id like to do it the correct way so that we can add the template to this repo when were done via a PR of course My main question is can we do a custom template that DOESNT use a apt package We have a current setup script which does the following installation curl L O sudo dpkg i filebeat amd deb wget sudo mkdir p etcpkitlscerts sudo cp COMODORSADomainValidationSecureServerCAcrt etcpkitlscerts and then we have monit files and a custom filebeatyml file which which can easily be created with a configrubberfilebeat files But using something OTHER than a package for the main template ie rubberfilebeatyml has me a bit confused Please let me know how to proceed Thanks 