API Platform versions affected Description Following the docs on how to implement cursor based pagination throws Warning Illegal string offset direction How to reproduce Add the following annotations to an entity ApiResourceattributes paginationpartialtrue paginationviacursorfieldid directionDESC ApiFilterRangeFilterclass propertiesid ApiFilterOrderFilterclass propertiesidDESC Possible Solution I think this bug comes from PartialCollectionViewNormalizer line Instead of field direction and field field it should be fields Q A Bug fix no New feature yes BC breaks no Deprecations no Tickets License MIT Doc PR When having many validation groups generators for resources you need to make every generator as a public service and this doesnt work with instanceof configuration where you could add a custom marker and make those services public because symfony doesnt detect that those services are used and removes from container This adds ApiPlatform Core Validator ValidationGroupsGeneratorInterface so apps can leverage the autoconfiguration autowiring of those generators Generators are collected and registered in a custom service locator but consumers wont need anymore any configuration for them if will implement the interface For not breaking backwards compatibility left the full service container as a fallback TODO Add more tests if needed Make docs PR API Platform versions affected I have the given resource entities Account Group and AccountGroup AccountGroup contains a referenceId so an account can be part of a group with a specific reference Account has a php var CollectionAccountGroup List of account group connections ORM OneToManytargetEntityApp Entity AccountGroup mappedByaccount cascadepersist remove Groupsaccountoutput itemquery elastica ApiSubresource protected groups For various reasons i also have an assignGroups property that is not an ORM field but a logic field i validate inside the persister to check permissions and add the groups one by one php var CollectionAccountGroup List of new account groups to set Groupsassigngroupsinput Audit Ignore protected assignGroups As you can see they both have different Groups annotations so i was not really worried Everything works fine except when i enable the mercuretrue flag on Account i now get this issue php App Tests Api Rest Account AccountItemTesttestUpdateAccountSuccess ApiPlatform Core Exception InvalidArgumentException Unable to generate an IRI for App Entity AccountGroup varwwwhtmlvendorapiplatformcoresrcBridgeSymfonyRoutingIriConverterphp varwwwhtmlvendorapiplatformcoresrcBridgeSymfonyRoutingIriConverterphp varwwwhtmlvendorapiplatformcoresrcSerializerAbstractItemNormalizerphp varwwwhtmlvendorapiplatformcoresrcSerializerAbstractItemNormalizerphp varwwwhtmlvendorapiplatformcoresrcSerializerAbstractItemNormalizerphp varwwwhtmlvendorsymfonyserializerNormalizerAbstractObjectNormalizerphp varwwwhtmlvendorapiplatformcoresrcSerializerAbstractItemNormalizerphp varwwwhtmlvendorapiplatformcoresrcJsonLdSerializerItemNormalizerphp varwwwhtmlvendorsymfonyserializerSerializerphp varwwwhtmlvendorsymfonyserializerSerializerphp varwwwhtmlvendorapiplatformcoresrcBridgeDoctrineEventListenerPublishMercureUpdatesListenerphp varwwwhtmlvendorapiplatformcoresrcBridgeDoctrineEventListenerPublishMercureUpdatesListenerphp varwwwhtmlvendorsymfonydoctrinebridgeContainerAwareEventManagerphp varwwwhtmlvendordoctrineormlibDoctrineORMUnitOfWorkphp varwwwhtmlvendordoctrineormlibDoctrineORMUnitOfWorkphp varwwwhtmlvendordoctrineormlibDoctrineORMEntityManagerphp varwwwhtmlsrcDataPersisterBaseDataPersisterphp varwwwhtmlsrcServiceBaseServicephp varwwwhtmltestsAppApiTestCasephp varwwwhtmltestsAppApiTestCasephp varwwwhtmltestsApiRestAccountAccountItemTestphp Caused by Symfony Component Routing Exception InvalidParameterException Parameter id for route apiaccountgroupsgetitem must match given to generate a corresponding URL The reason for this is that the accountGroups contains a list of entities that is not persisted and also should not be persisted at all but it seems like the Mercure Publisher does not care about the serialization groups at for the given context I solved it easily by setting accountsetAssignGroupsnew ArrayCollection before entityManagerpersist Because of this simple solution that took me some hours to figure out i am not really sure if this is a design issue with Mercure Publisher API Platform persisting logic or my code in general My main question is as assignGroups was not designed for output at all why is it being triggered by Mercure Publisher I would assume that the Mercure Publisher would only care about the query item get normalization context when serializing and not all fields Here is my normalization context just in case php itemOperations get securityisgrantedVIEW object normalizationcontextAccountAPIREAD Normalization groups const APIREAD groups lifecycle accountoutput API Platform versions affected is not affected Description How to reproduce When using this property in an ApiResource php var self public foo I get the error Class elf does not exist on api docs Additional Context img width altScreenshot src API Platform versions affected Description When I upgrade apiplatformcore to I have the following problem on api docs There is no PropertyInfo extractor supporting the class DateInterval How to reproduce I think we just have to put a property with a DateInterval in an exposed entity and it will reproduce the problem Possible Solution No idea Additional Context ApiPlatform Core Exception RuntimeException There is no PropertyInfo extractor supporting the class DateInterval at vendorapiplatformcoresrcBridgeSymfonyPropertyInfoMetadataPropertyPropertyInfoPropertyNameCollectionFactoryphp at ApiPlatform Core Bridge Symfony PropertyInfo Metadata Property PropertyInfoPropertyNameCollectionFactorycreateDateInterval array vendorapiplatformcoresrcMetadataPropertyFactoryInheritedPropertyNameCollectionFactoryphp at ApiPlatform Core Metadata Property Factory InheritedPropertyNameCollectionFactorycreateDateInterval array vendorapiplatformcoresrcMetadataPropertyFactoryExtractorPropertyNameCollectionFactoryphp at ApiPlatform Core Metadata Property Factory ExtractorPropertyNameCollectionFactorycreateDateInterval array vendorapiplatformcoresrcMetadataPropertyFactoryExtractorPropertyNameCollectionFactoryphp at ApiPlatform Core Metadata Property Factory ExtractorPropertyNameCollectionFactorycreateDateInterval array vendorapiplatformcoresrcMetadataPropertyFactoryCachedPropertyNameCollectionFactoryphp at ApiPlatform Core Metadata Property Factory CachedPropertyNameCollectionFactoryApiPlatform Core Metadata Property Factory closure vendorapiplatformcoresrcCacheCachedTraitphp at ApiPlatform Core Metadata Property Factory CachedPropertyNameCollectionFactorygetCachedpropertynamecollection bf de e d c a da c b objectClosure vendorapiplatformcoresrcMetadataPropertyFactoryCachedPropertyNameCollectionFactoryphp at ApiPlatform Core Metadata Property Factory CachedPropertyNameCollectionFactorycreateDateInterval array vendorapiplatformcoresrcJsonSchemaSchemaFactoryphp at ApiPlatform Core JsonSchema SchemaFactorybuildSchemaDateInterval json output null null objectSchema array false vendorapiplatformcoresrcHydraJsonSchemaSchemaFactoryphp at ApiPlatform Core Hydra JsonSchema SchemaFactorybuildSchemaDateInterval json output null null objectSchema array vendorapiplatformcoresrcJsonSchemaTypeFactoryphp at ApiPlatform Core JsonSchema TypeFactorygetClassTypeDateInterval json null array objectSchema vendorapiplatformcoresrcJsonSchemaTypeFactoryphp at ApiPlatform Core JsonSchema TypeFactorygetTypeobjectType json null array objectSchema vendorapiplatformcoresrcJsonSchemaSchemaFactoryphp at ApiPlatform Core JsonSchema SchemaFactorybuildPropertySchemaobjectSchema Warehouse operationTime objectPropertyMetadata array json vendorapiplatformcoresrcJsonSchemaSchemaFactoryphp at ApiPlatform Core JsonSchema SchemaFactorybuildSchemaApp Domain TourBuilding Model Entity Warehouse Warehouse json output item get objectSchema array false vendorapiplatformcoresrcHydraJsonSchemaSchemaFactoryphp at ApiPlatform Core Hydra JsonSchema SchemaFactorybuildSchemaApp Domain TourBuilding Model Entity Warehouse Warehouse json output item get objectSchema null false vendorapiplatformcoresrcSwaggerSerializerDocumentationNormalizerphp at ApiPlatform Core Swagger Serializer DocumentationNormalizergetJsonSchemafalse objectArrayObject App Domain TourBuilding Model Entity Warehouse Warehouse output item get json null false vendorapiplatformcoresrcSwaggerSerializerDocumentationNormalizerphp at ApiPlatform Core Swagger Serializer DocumentationNormalizeraddSchemasfalse arraydescription Warehouse resource response objectArrayObject App Domain TourBuilding Model Entity Warehouse Warehouse item get arrayapplicationldjson jsonld applicationjson json texthtml html vendorapiplatformcoresrcSwaggerSerializerDocumentationNormalizerphp at ApiPlatform Core Swagger Serializer DocumentationNormalizerupdateGetOperationfalse objectArrayObject arrayapplicationldjson jsonld applicationjson json texthtml html item objectResourceMetadata App Domain TourBuilding Model Entity Warehouse Warehouse Warehouse get objectArrayObject vendorapiplatformcoresrcSwaggerSerializerDocumentationNormalizerphp at ApiPlatform Core Swagger Serializer DocumentationNormalizergetPathOperationfalse get arraymethod GET inputformats arrayjsonld arrayapplicationldjson json arrayapplicationjson html arraytexthtml outputformats arrayjsonld arrayapplicationldjson json arrayapplicationjson html arraytexthtml GET item App Domain TourBuilding Model Entity Warehouse Warehouse objectResourceMetadata objectArrayObject objectArrayObject vendorapiplatformcoresrcSwaggerSerializerDocumentationNormalizerphp at ApiPlatform Core Swagger Serializer DocumentationNormalizeraddPathsfalse objectArrayObject objectArrayObject App Domain TourBuilding Model Entity Warehouse Warehouse Warehouse objectResourceMetadata item objectArrayObject vendorapiplatformcoresrcSwaggerSerializerDocumentationNormalizerphp at ApiPlatform Core Swagger Serializer DocumentationNormalizernormalizeobjectDocumentation json arrayspecversion vendorapiplatformcoresrcSwaggerSerializerApiGatewayNormalizerphp at ApiPlatform Core Swagger Serializer ApiGatewayNormalizernormalizeobjectDocumentation json arrayspecversion vendorsymfonyserializerSerializerphp at Symfony Component Serializer SerializernormalizeobjectDocumentation json arrayspecversion vendorapiplatformcoresrcBridgeSymfonyBundleActionSwaggerUiActionphp at ApiPlatform Core Bridge Symfony Bundle Action SwaggerUiActiongetContextobjectRequest objectDocumentation vendorapiplatformcoresrcBridgeSymfonyBundleActionSwaggerUiActionphp at ApiPlatform Core Bridge Symfony Bundle Action SwaggerUiActioninvokeobjectRequest vendorsymfonyhttpkernelHttpKernelphp at Symfony Component HttpKernel HttpKernelhandleRawobjectRequest vendorsymfonyhttpkernelHttpKernelphp at Symfony Component HttpKernel HttpKernelhandleobjectRequest true vendorsymfonyhttpkernelKernelphp at Symfony Component HttpKernel KernelhandleobjectRequest publicindexphp Please update this template with something that matches your PR Q A Bug fix no performance New feature hmm performance BC breaks no Deprecations no Tickets fixes License MIT Doc PR The code of getAllowedAttributes is quite heavy and relate on a lot of micro cache despite being a medium hot path Just add a local cache on it but this is a draft The cache key only relates on options that I dont think is enough Relates on context isnt possible because of context cacheKey Should I just remove it and pass ontext Hi I use apiplatform with pomm and I upgrade package Im writing a persister but I have a problem In fact the function getResourceClass of ResourceClassResolver exclude values Traversable Why The pomm object implements this interface Description When accept applicationjson why we cant have simple id Iri should be used only on applicationldjson In AbstractItemNormalizernormalizeRelation we could return identifiers instead of iri on json format Example JSON now json id Pair driver apidriversDriver vehicle apivehiclesVehicle JSON proposition json id Pair driver Driver vehicle Vehicle JSONLD json context apicontextsPair id apipairs type hydraCollection hydramember id apipairsPair type Pair id Pair driver apidriversDriver vehicle apivehiclesVehicle The service definition in differs from constructor so the YAML exporter is not recognizing the swaggerVersions at the moment And only if defaultContext is the last one we can change it Please change the file Thanks Q A Bug fix yes New feature no BC breaks no Deprecations no Tickets no License MIT Doc PR apiplatformdocs The service definition in differs from constructor so the YAML exporter is not recognizing the swaggerVersions at the moment And only if defaultContext is the last one we can change it Given apiplatform formats json applicationjson and a request with Accept applicationjsonkeyvalue i get Requested format applicationjsonkeyval is not supported Supported MIME types are applicationjson It feels like a bug as it forces me to configure each possible mimetype variant whereas all are applicationjson really