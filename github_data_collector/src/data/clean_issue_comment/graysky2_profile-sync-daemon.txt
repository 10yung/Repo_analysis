Note that if youre using overlayfs mode your user needs to have sudo right to usrbinpsdoverlayhelper or else psd will refuse to run in overlayfs mode piraspberrypi psd p Profilesyncdaemon v on Raspbian GNULinux buster Systemd service is currently active Systemd resynctimer is currently active Overlayfs v is currently active I forgot sudo setting but psd p shows overlayfs is active both floccus and passman get resets andor locked by passwords and their de novo setting gets lost on browser exit same with adblock and perhaps more WTF I have a configuration that resembles home is mounted when I log in and unmounted when I log out Problem is every time I log in psd p sees an ungraceful state and makes a new crash recovery backup I can log in systemctl user stop psd log out log back in and itll do it again I think its probably a systemd problem or a pam problem and theres an issue with exactly when home gets mounted and unmounted but I have no idea how to debug that Im fully willing to debug to be clear After any power loss i need manual restore chromium folder systemctl user stop psd cd config rm rf chromium cp pR chromiumbackupcrashrecovery chromium systemctl user start psd This a very terrible In syslog i have Jul localhost systemd Started Timer for profilesyncdaemon Hour Jul localhost profilesyncdaemon Ungraceful state detected for homeuserconfigchromium so fixing Jul localhost profilesyncdaemon mv cannot move homeuserconfigchromiumbackovfs homeuserconfigchromium Directory not empty Jul localhost profilesyncdaemon mchromium sync successful m After few minutes of debug i found some problems Whats happening by step Run chromium and press hard reset button on PC Poweron PC profilesyncdaemon detects Ungraceful state by existance broken symlink configchromium profilesyncdaemon deletes symlink configchromium profilesyncdaemon begin copying configchromiumback into configchromiumcrashrecoveryNOW for backup purposes That takes a long time But user fast like lightning and he launches Chromium after minutes from boot On this moment not finished Chromium creates own configchromium with default config After long time ago profilesyncdaemon has finished backup process And tries move configchromiumbackovfs to configchromium But chrome already launched and configchromium already exists We got error Directory not empty Need some kind of locking mechanism for browser launch before crashrecovery copying not finished May be link configchromium to devnull not sure And USEBACKUPSno wont fix this A description of the alleged problem was written here earlier but I was wrong Need more time for debug it later why USEBACKUPSno wont fix this issue Psd will manage the following per homexxxconfigpsdpsdconf browserpsname firefoxfirefox ownergroup id xxx sync target homexxxmozillafirefoxkvjnd deveditiondefault tmpfs dir runuser xxxfirefoxkvjnd deveditiondefault profile size M recovery dirs delete with the c option dir pathsize homexxxmozillafirefoxkvjnd deveditiondefaultbackupcrashrecovery M dir pathsize homexxxmozillafirefoxeipdkzzbdefaultbackupcrashrecovery M browserpsname firefoxfirefox ownergroup id xxx sync target homexxxmozillafirefoxeipdkzzbdefault tmpfs dir runuser xxxfirefoxeipdkzzbdefault profile size M recovery dirs delete with the c option dir pathsize homexxxmozillafirefoxkvjnd deveditiondefaultbackupcrashrecovery M dir pathsize homexxxmozillafirefoxeipdkzzbdefaultbackupcrashrecovery M If I try to clean the recovery dirs then it cleans both of them on the first try which leaves none for the other one psd c Profilesyncdaemon v on Arch Linux Deleting crashrecovery dirs for profile homexxxmozillafirefoxkvjnd deveditiondefault homexxxmozillafirefoxkvjnd deveditiondefaultbackupcrashrecovery homexxxmozillafirefoxeipdkzzbdefaultbackupcrashrecovery Found no crashrecovery dirs for homexxxmozillafirefoxeipdkzzbdefault Given that theres an opera operabeta operadeveloper and operalegacy and googlechrome googlechromebeta nd googlechromeunstable Im just slightly surprised that theres only one for Firefox not counting the Ubuntu firefoxtrunk Hi I tried installing using the src from github running make install from a wheelgroup enabled account with no home directory I found myself stuck with the user unable to view the profiles which usrbinpsd reported as belonging to root I uninstalled and then reinstalled having added my normal user to the wheel group to enable sudo so that I could then run sudo make install systemctl user start psd then reported that systemctl could not find a psdservice file I located the file in usrlibsystemduserpsd and reran the command with the fully qualified file path for the unit service file systemctl user start usrlibsystemduserpsd and the following was reported Failed to start usrlibsystemduserpsdmount Unit usrlibsystemduserpsdmount not found psd p reports psd p Profilesyncdaemon v on Fedora Workstation Edition Systemd service is currently inactive Systemd resynctimer is currently inactive Overlayfs technology is currently inactive Psd will manage the following per homexxxxxconfigpsdpsdconf browserpsname firefoxfirefox ownergroup id xxxxx sync target homexxxxxmozillafirefoxxxxxxxdefault tmpfs dir runuser xxxxxfirefoxxxxxxxdefault profile size M recovery dirs none uname a fc x SMP Sat Oct UTC x x x GNULinux Several times I lost last part of my work on browser open tabs bookmarks history This happens when my laptop fails to resume a known hardware fault Talking about psd is there a way to workaround it Forcing the psd service to sync profile when pc calls for a suspend Or actually is this already done I have been using psd for the last few weeks because Google Chrome calls fsync about every second In my test psd does save some battery and Id like to have it working reliably for when I buy a SSD The problem is that because of psd when I close Chrome and logoutreboot my settings are restored from a state of days or weeks ago probably the state of when I last started Chrome I leave it open for a long time I generally lose all my open tabs recent bookmarks and even extensions This happens most of the time psd was installed and configured as the following sudo apt install profilesyncdaemon sudo visudo f etcsudoersd personal teresaejunior ALLALL NOPASSWD usrbinpsdoverlayhelper egrep v configpsdpsdconf USEOVERLAYFSyes BROWSERSgooglechrome systemctl user enable psdservice systemctl user start psdservice In an attempt to stop psd from restoring old configurations I have tried setting BACKUPLIMIT and now USEBACKUPSno but neither made any difference The current status is systemctl user status psd psdservice Profilesyncdaemon Loaded loaded usrlibsystemduserpsdservice enabled vendor preset enabled Active active exited since Sat h ago Docs manpsd manprofilesyncdaemon Process ExecStartbintrue codeexited status SUCCESS Main PID codeexited status SUCCESS mai laptop systemd Starting Profilesyncdaemon mai laptop systemd Started Profilesyncdaemon ll config grep chrome drwx teresaejunior teresaejunior K mai googlechromebackovfs drwx teresaejunior teresaejunior K mai googlechromebackup lrwxrwxrwx teresaejunior teresaejunior mai googlechrome runuser teresaejuniorgooglechrome This fixes I successfully tested it all other places seem to properly quote directory strings Im still not fully satisfied with commonbrowsersfirefox Maybe someone with more bash experience has an idea I didnt test any upgrade scripts though and didnt use a version before The code assumes that profile paths do not contain whitespaces There are points where this fails commonbrowsersfirefox will detect the segments as individual path due to use of while constructing DIRArr The other place where this fails is sed s ng at My profile is called m fzdx Default User This could be related to 