 Fixes Send back whether the agent is going to be shutting down as soon as we report work is finished This way the server will know not to send new work to the agent in the time between the JobCompletedEvent and process shutdown This PR has two goals Make IExecutionContext and AgentTaskPluginExecutionContext share a common interface Update GitCliManager and GitCommandManger to use this common interface Minor fix of a string for ID CreateUserWithSameUIDInsideContainer In a few cases users have had issues putting tar onto their path This would let them specify the location of a tar executable directly via an environment variable Unable to access build variables with more than one i have a build pipeline and am unable to access vars that have more than one period in the example below I can see the vars SourceBranch DefinitionName but RepositoryName is null variables SourceBranch variables BuildSourceBranch DefinitionName variables BuildDefinitionName repo variables BuildRepositoryName I know the value is not null because if i print out the vars using I can see it there GetChildItem Env Pdbstr creates corrupt pdbs for mixed mode assemblies There is a known issue at MS which causes eg WPA to crash at db d ff d fff dc msdia GSI fixHashIn x f dd vctools pdb dbi gsicpp db d ff e fff dc b msdia GSI readHash x f dd vctools pdb dbi gsicpp db d ff fff dc cf msdia PSGSI readStream xeb f dd vctools pdb dbi gsicpp db d ff c fff dc msdia PSGSI fInit x f dd vctools pdb dbi gsicpp db d ff f fff dbb msdia DBI OpenPublics x f dd vctools pdb dbi dbicpp for managed C targets The solution is to use a recent pdbstr version and not that ancient one which breaks pdbs and causes issues when someone actually tries to debug source server indexed binaries Agent Version and Platform Version of your agent OS of the machine running the agent Windows Azure DevOps Type and Version TFS Whats not working Source indexing creates corrupt pdbs Agent and Workers Diagnostic Logs T Z Unable to index one or more source files for symbols file D B a s bin x Debug IvtGPUResourceServerpdb Agent Version and Platform Agent version on macOS and Windows Azure DevOps Type and Version Whats not working Im using the Multi repo checkout feature in a YAML pipeline with the following syntax yaml checkout foo clean true submodules recursive path sbarexternalfoo persistCredentials true The postjob step which cleans up credentials in this repo is failing on both macOS and Windows With diagnostic output enabled you can see that the targetPath is incorrect The clean up attempt tries to execute a git command in the default checkout location sfoo rather than the custom path I have specified sbarexternalfoo command git config unsetall http debug Starting process debug File name usrbingit debug Arguments config unsetall http debug Working directory Usersazdowork sfoo debug Exited process with exit code debug Finished process with exit code and elapsed time This produces an error on Windows that causes the entire job to fail On macOS this is only treated as a warning macOS warning An unsuccessful attempt was made using git command line to remove httpextraheader from the git config Attempting to modify the git config file directly to remove the credential Windows error The directory name is invalid debug Processed vso tasklogissue typeerror The directory name is invalid debug Processed vso taskcomplete resultFailed debug at SystemDiagnosticsProcessStartWithCreateProcessProcessStartInfo startInfo at SystemDiagnosticsProcessStart at MicrosoftVisualStudioServicesAgentUtilProcessInvokerExecuteAsyncString workingDirectory String fileName String arguments IDictionary environment Boolean requireExitCodeZero Encoding outputEncoding Boolean killProcessOnCancel InputQueue redirectStandardIn Boolean inheritConsoleHandler Boolean keepStandardInOpen Boolean highPriorityProcess CancellationToken cancellationToken at AgentPluginsRepositoryGitCliManagerExecuteGitCommandAsyncAgentTaskPluginExecutionContext context String repoRoot String command String options CancellationToken cancellationToken at AgentPluginsRepositoryGitCliManagerGitConfigUnsetAgentTaskPluginExecutionContext context String repositoryPath String configKey at AgentPluginsRepositoryGitSourceProviderRemoveGitConfigAgentTaskPluginExecutionContext executionContext GitCliManager gitCommandManager String targetPath String configKey String configValue at AgentPluginsRepositoryGitSourceProviderPostJobCleanupAsyncAgentTaskPluginExecutionContext executionContext RepositoryResource repository at AgentPluginsRepositoryCleanupTaskRunAsyncAgentTaskPluginExecutionContext executionContext CancellationToken token at AgentPluginHostProgramMainString args 