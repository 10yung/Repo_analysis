pipx creates virtualenvs by calling out to the terminal using run DEFAULTPYTHON m venv clear selfroot where DEFAULTPYTHON is sysexecutable Is it possible to call out to or expose the embedded python within PyOxidizer My top level CLI is pipx but I imagine maybe I can expose the underlying python as pipx python In which case I can just change my DEFAULTPYTHON and things can work as is I know that its also possible to create virtualenvs with import venv venvcreatevenv but that would be a lot of code to rewrite On Windows by default a console window is opened how could I hide that window It seems the recommended way is to run pythonw rather than python Is there a way to tell pyoxidizer to hide the window Still trying to package Borg Backup currently uses PyInstaller and seemingly hit a roadblock Maybe someone spots an issue Changed config rest as in the template packagingrule type pipinstallsimple package borgbackup embeddedpythonrun mode module module borgmain Error when running binary Traceback most recent call last File borgarchiver line in module from archive import Archive ArchiveChecker ArchiveRecreater Statistics isspecial File borgarchive line in module from cache import ChunkListEntry File borgcache line in module from cryptokey import PlaintextKey File borgcryptokey line in module from platform import SaveFile File borgplatform line in module from posix import processalive localpidalive ImportError cannot import name processalive from posix unknown location While compiling this line shows up which should be good adding embedded built extension module borgplatformposix Not sure why its still not finding the module The source file is a pyx and the compiling is done in setuppy in a standard way I hope Could those relativ imports be a problem If one of the entries in syspaths contain a built extension and it is imported the binary always seg faults eg scandir in repl mode gdb x ffff cab in PyModuleCreate from usrlib libpython mso x ffff f in PyInitscandir from usrlib python sitepackagesscandircpython mx linuxgnuso x in PyImportLoadDynamicModuleWithSpec specModuleSpecnamescandir loaderExtensionFileLoadernamescandir pathusrlib python sitepackagesscandircpython mx linuxgnuso at remote x ffff c originusrlib python sitepackagesscandircpython mx linuxgnuso loaderstateNone submodulesearchlocationsNone setfileattrTrue cachedNone at remote x ffff c fpoptimized out at Pythonimportdlc x in impcreatedynamicimpl moduleoptimized out specModuleSpecnamescandir loaderExtensionFileLoadernamescandir pathusrlib python sitepackagesscandircpython mx linuxgnuso at remote x ffff c originusrlib python sitepackagesscandircpython mx linuxgnuso loaderstateNone submodulesearchlocationsNone setfileattrTrue cachedNone at remote x ffff c fileoptimized out at Pythonimportc impcreatedynamic moduleoptimized out argsoptimized out nargsoptimized out at Pythonclinicimportch x eb in PyMethodDefRawFastCallDict method x a a d impmethods selfmodule at remote x ffff dd args x ffff b e nargs kwargs at Objectscallc x b in PyCFunctionFastCallDict funcbuiltin method createdynamic of module object at remote x ffff dd args x ffff b e nargs kwargs at Objectscallc PyCFunctionCall funcbuiltin method createdynamic of module object at remote x ffff dd argsoptimized out kwargs at Objectscallc x d f in docallcore funcoptimized out callargsModuleSpecnamescandir loaderExtensionFileLoadernamescandir pathusrlib python sitepackagesscandircpython mx linuxgnuso at remote x ffff c originusrlib python sitepackagesscandircpython mx linuxgnuso loaderstateNone submodulesearchlocationsNone setfileattrTrue cachedNone at remote x ffff c kwdictoptimized out at Pythoncevalc PyEvalEvalFrameDefault fFrame x ffff ae for file frozen importlibbootstrap line in callwithframesremoved fbuiltin method createdynamic of module object at remote x ffff dd argsModuleSpecnamescandir loaderExtensionFileLoadernamescandir pathusrlib python sitepackagesscandircpython mx linuxgnuso at remote x ffff c originusrlib python sitepackagesscandircpython mx linuxgnuso loaderstateNone submodulesearchlocationsNone setfileattrTrue cachedNone at remote x ffff c kwds throwflagoptimized out at Pythoncevalc x da dd in PyEvalEvalFrameEx foptimized out throwflag at Pythoncevalc PyEvalEvalCodeWithName cooptimized out globalsoptimized out localsoptimized out argsoptimized out argcount kwnames x kwargs x ffff bac kwcount kwstep defs x defcount kwdefs x closure x namecallwithframesremoved qualnamecallwithframesremoved at Pythoncevalc x feb in PyFunctionFastCallKeywords funcoptimized out stack x nargs kwnamesoptimized out at Objectscallc x d b in callfunction ppstack x fffffff a opargoptimized out kwnames x at Pythoncevalc x d in PyEvalEvalFrameDefault fFrame x ffff b for file frozen importlibbootstrapexternal line in createmodule selfExtensionFileLoadernamescandir pathusrlib python sitepackagesscandircpython mx linuxgnuso at remote x ffff c specModuleSpecnamescandir loader originusrlib python sitepackagesscandircpython mx linuxgnuso loaderstateNone submodulesearchlocationsNone setfileattrTrue cachedNone at remote x ffff c throwflagoptimized out at Pythoncevalc x df in functioncodefastcall cooptimized out argsoptimized out nargsoptimized out globalsoptimized out at Objectscallc x d b in callfunction ppstack x fffffff c opargoptimized out kwnames x at Pythoncevalc x d fec in PyEvalEvalFrameDefault fFrame x ffff d for file frozen importlibbootstrap line in modulefromspec specModuleSpecnamescandir loaderExtensionFileLoadernamescandir pathusrlib python sitepackagesscandircpython mx linuxgnuso at remote x ffff c originusrlib python sitepackagesscandircpython mx linuxgnuso loaderstateNone submodulesearchlocationsNone setfileattrTrue cachedNone at remote x ffff c moduleNone throwflagoptimized out at Pythoncevalc x df in functioncodefastcall cooptimized out argsoptimized out nargsoptimized out globalsoptimized out at Objectscallc x d b in callfunction ppstack x fffffff eb opargoptimized out kwnames x at Pythoncevalc x d e in PyEvalEvalFrameDefault fFrame x ffff b for file frozen importlibbootstrap line in loadunlocked specModuleSpecnamescandir loaderExtensionFileLoadernamescandir pathusrlib python sitepackagesscandircpython mx linuxgnuso at remote x ffff c originusrlib python sitepackagesscandircpython mx linuxgnuso loaderstateNone submodulesearchlocationsNone setfileattrTrue cachedNone at remote x ffff c throwflagoptimized out at Pythoncevalc x df in functioncodefastcall cooptimized out argsoptimized out nargsoptimized out globalsoptimized out at Objectscallc x d b in callfunction ppstack x fffffffa a opargoptimized out kwnames x at Pythoncevalc x d e in PyEvalEvalFrameDefault fFrame x ffff e a for file frozen importlibbootstrap line in findandloadunlocked namescandir importbuiltin method import of module object at remote x fffType RET for more q to quit c to continue without paging f fbde pathNone parent specModuleSpecnamescandir loaderExtensionFileLoadernamescandir pathusrlib python sitepackagesscandircpython mx linuxgnuso at remote x ffff c originusrlib python sitepackagesscandircpython mx linuxgnuso loaderstateNone submodulesearchlocationsNone setfileattrTrue cachedNone at remote x ffff c throwflagoptimized out at Pythoncevalc x df in functioncodefastcall cooptimized out argsoptimized out nargsoptimized out globalsoptimized out at Objectscallc x d b in callfunction ppstack x fffffffa opargoptimized out kwnames x at Pythoncevalc x d e in PyEvalEvalFrameDefault fFrame x ffff e for file frozen importlibbootstrap line in findandload namescandir importbuiltin method import of module object at remote x ffff fbde moduleobject at remote x ffff throwflagoptimized out at Pythoncevalc x df in functioncodefastcall cooptimized out argsoptimized out nargsoptimized out globalsoptimized out at Objectscallc x aae in objectvacall callablefunction at remote x ffff fa vargs x fffffffa f at Objectscallc x b in PyObjectCallMethodIdObjArgs objoptimized out nameoptimized out at Objectscallc x in importfindandload absnameoptimized out at Pythonimportc PyImportImportModuleLevelObject namescandir globalsoptimized out localsoptimized out fromlistNone level at Pythonimportc x d eb in importname foptimized out namescandir fromlistNone level at Pythoncevalc PyEvalEvalFrameDefault fFrame x ffff feda for file usrlib python sitepackagesscandirpy line in module throwflagoptimized out at Pythoncevalc x da dd in PyEvalEvalFrameEx foptimized out throwflag at Pythoncevalc PyEvalEvalCodeWithName cooptimized out globalsoptimized out localsoptimized out argsoptimized out argcount kwnames x kwargs x kwcount kwstep defs x defcount kwdefs x closure x name x qualname x at Pythoncevalc x d cbf in PyEvalEvalCodeEx counknown at remote x ffff f globalsunknown at remote x f locals x args x argcount kws x kwcount defs x defcount kwdefs x closure x at Pythoncevalc PyEvalEvalCode counknown at remote x ffff f globalsunknown at remote x f locals x at Pythoncevalc x ce d in builtinexecimpl moduleoptimized out sourcecode at remote x ffff b globalsname scandir doc scandir a better directory iterator and faster oswalk now in the Python stdlib n nscandir is a generator version of oslistdir that returns an niterator over files in a directory and also exposes the extra ninformation most OSes provide while iterating files in a directory nsuch as type and stat information n nThis module also includes a version of oswalk that uses scandir nto speed it up significantly n nSee READMEmd or for rationale and ndocs or read PEP for nmore details on its inclusion into Python n nscandir is released under the new BSD clause license See nLICENSEtxt for the full license text n package loader SourceFileLoadernamescandir pathusrlib python sitepackagesscandirpy at remote x ffff b d spec ModuleSpecnamescandir loader originusrlib python sitepackagesscandirpy loatruncated localsname scandir doc scandir a better directory iterator and faster oswalk now in the Python stdlib n nscandir is a generator version of oslistdir that returns an niterator over files in a directory and also exposes the extra ninformation most OSes provide while iterating files in a directory nsuch as type and stat information n nThis module also includes a version of oswalk that uses scandir nto speed it up significantly n nSee READMEmd or for rationale and ndocs or read PEP for nmore details on its inclusion into Python n nscandir is released under the new BSD clause license See nLICENSEtxt for the full license text n package loader SourceFileLoadernamescandir pathusrlib python sitepackagesscandirpy at remote x ffff b d spec ModuleSpecnamescandir loader originusrlib python sitepackagesscandirpy loatruncated at Pythonbltinmodulec builtinexec moduleoptimized out argsoptimized out nargsoptimized out at Pythonclinicbltinmodulech x eb in PyMethodDefRawFastCallDict method x a d d builtinmethods selfmodule at remote x ffff fbde args x ffff b nargs kwargs at Objectscallc x b in PyCFunctionFastCallDict funcbuiltin method exec of module object at remote x ffff fbde args x ffff b nargs kwargs at Objectscallc PyCFunctionCall funcbuiltin method exec of module object at remote x ffff fbde argsoptimized out kwargs at Objectscallc x d f in docallcore funcoptimized out callargscode at remote x ffff b name scandir doc scandir a better directory iterator and faster oswalk now in the Python stdlib n nscandir is a generator version of oslistdir that returns an niterator over files in a directory and also exposes the extra ninformation most OSes provide while iterating files in a directory nsuch as type and stat information n nThis module also includes a version of oswalk that uses scandir nto speed it up significantly n nSee READMEmd or for rationale and ndocs or read PEP for nmore details on its inclusion into Python n nscandir is released under the new BSD clause license See nLICENSEtxt for the full license text n package loader SourceFileLoadernamescandir pathusrlib python sitepackagesscandirpy at remote x ffff b d spec ModuleSpecnamescandir loader originusrlib pythontruncated kwdictoptimized out at Pythoncevalc PyEvalEvalFrameDefault fFrame x ffff a d for file frozen importlibbootstrap line in callwithframesremoved fbuiltin method exec of module object at remote x ffff fbde argscode at remote x ffff b name scandir doc scandir a better directory iterator and faster oswalk now in the Python stdlib n nscandir is a generator version of oslistdir that returns an niterator over files in a directory and also exposes the extra ninformation most OSes provide while iterating files in a directory nsuch as type and stat n nThis module also includes a version of oswalk that uses scandir nto speed it up significantly n nSee READMEmd or for rationale and ndocs or read PEP for nmore details on its inclusion into Python n nscandir is released under the new BSD clause license See nLICENSEtxt for the full license text n package loader SourceFileLoaderntruncated throwflagoptimized out at Pythoncevalc x da dd in PyEvalEvalFrameEx foptimized out throwflag at Pythoncevalc PyEvalEvalCodeWithName cooptimized out globalsoptimized out localsoptimized out argsoptimized out argcount kwnames x kwargs x ffff ae c kwcount kwstep defs x defcount kwdefs x closure x namecallwithframesremoved qualnamecallwithframesremoved at Pythoncevalc x feb in PyFunctionFastCallKeywords funcoptimized out stack x nargs kwnamesoptimized out at Objectscallc x d b in callfunction ppstack x fffffffabd opargoptimized out kwnames x at Pythoncevalc x d in PyEvalEvalFrameDefault fFrame x ffff ae for file frozen importlibbootstrapexternal line in execmodule selfSourceFileLoadernamescandir pathusrlib python sitepackagesscandirpy at remote x ffff b d modulemodule at remote x ffff ad codecode at remote x ffff b throwflagoptimized out at Pythoncevalc x df in functioncodefastcall cooptimized out argsoptimized out nargsoptimized out globalsoptimized out at Objectscallc x d b in callfunction ppstack x fffffffadc opargoptimized out kwnames x at Pythoncevalc x d fec in PyEvalEvalFrameDefault fFrame x ffff a de for file frozen importlibbootstrap line in loadunlocked specModuleSpecnamescandir loaderSourceFileLoadernamescandir pathusrlib python sitepackagesscandirpy at remote x ffff b d originusrlib python sitepackagesscandirpy loaderstateNone submodulesearchlocationsNone setfileattrTrue cachedusrlib python sitepackagespycachescandircpython pyc initializingTrue at remote x ffff b modulemodule at remote x ffff ad throwflagoptimized out at Pythoncevalc x df in functioncodefastcall cooptimized out argsoptimized out nargsoptimized out globalsoptimized out at Objectscallc x d b in callfunction ppstack x fffffffb opargoptimized out kwnames x at Pythoncevalc x d e in PyEvalEvalFrameDefault fFrame x ffff be for file frozen importlibbootstrap line in findandloadunlocked namescandir importbuiltin method import of module object at remote x ffff fbde pathNone parent specModuleSpecnamescandir loaderSourceFileLoadernamescandir pathusrlib python sitepackagesscandirpy at remote x ffff b d originusrlib python sitepackagesscandirpy loaderstateNone submodulesearchlocationsNone setfileattrTrue cachedusrlib python sitepackagespycachescandircpython pyc initializingTrue at remote x ffff b throwflagoptimized out at Pythoncevalc x df in functioncodefastcall cooptimized out argsoptimized out nargsoptimized out globalsoptimized out at Objectscallc x d b in callfunction ppstack x fffffffb opargoptimized out kwnames x at Pythoncevalc x d e in PyEvalEvalFrameDefault fFrame x ffff a for file frozen importlibbootstrap line in findandload namescandir importbuiltin method import of module object at remote x ffff fbde moduleobject at remote x ffff throwflagoptimized out at Pythoncevalc x df in functioncodefastcall cooptimized out argsoptimized out nargsoptimized out globalsoptimized out at Objectscallc x aae in objectvacall callablefunction at remote x ffff fa vargs x fffffffb at Objectscallc x b in PyObjectCallMethodIdObjArgs objoptimized out nameoptimized out at Objectscallc x in importfindandload absnameoptimized out at Pythonimportc PyImportImportModuleLevelObject namescandir globalsoptimized out localsoptimized out fromlistNone level at Pythonimportc x d eb in importname foptimized out namescandir fromlistNone level at Pythoncevalc PyEvalEvalFrameDefault fFrame x ffff baca for file stdin line in module throwflagoptimized out at Pythoncevalc x da dd in PyEvalEvalFrameEx foptimized out throwflag at Pythoncevalc PyEvalEvalCodeWithName cooptimized out globalsoptimized out localsoptimized out argsoptimized out argcount kwnames x kwargs x kwcount kwstep defs x defcount kwdefs x closure x name x qualname x at Pythoncevalc x d cbf in PyEvalEvalCodeEx counknown at remote x ffff f globalsunknown at remote x f locals x args x argcount kws x kwcount defs x defcount kwdefs x closure x at Pythoncevalc PyEvalEvalCode counknown at remote x ffff f globalsunknown at remote x f locals x at Pythoncevalc x b in runmod modoptimized out filenameoptimized out globalsname main doc None package None loader type at remote x ffff spec None annotations builtins module at remote x ffff fbde localsname main doc None package None loader type at remote x ffff spec None annotations builtins module at remote x ffff fbde flagsoptimized out arenaoptimized out at Pythonpythonrunc PyRunInteractiveOneObjectEx fpoptimized out filenameoptimized out flagsoptimized out at Pythonpythonrunc x afe in PyRunInteractiveLoopFlags fp x a c e filenamestroptimized out flags x fffffffbad at Pythonpythonrunc x f in PyRunAnyFileExFlags fp x a c e filename x a ce stdin closeit flags x fffffffbad at Pythonpythonrunc x f b in pyembedpyinterpMainPythonInterpreterrunrepl self x fffffffc at pyembedsrcpyinterprs x f a in pyembedpyinterpMainPythonInterpreterrun self x fffffffc at pyembedsrcpyinterprs x f fc in pyembedpyinterpMainPythonInterpreterrunandhandleerror self x fffffffc at pyembedsrcpyinterprs x f b in pyembedpyinterpMainPythonInterpreterrunasmain self x fffffffc at pyembedsrcpyinterprs x bb in requestsdec main at srcmainrs The backtrace is almost the same for pythonrunmodeeval and I assume for other run modes If it can not be fixed maybe an ImportError can be raised instead In order to programatically inspect and validate the contents of the executable from Python code the internal package list needs to be exposed This also provides the ability for Python code to implement package listing support in the various frameworks such as pkgresources and importlibmetadatas finddistributions Related to Related to If nothing else they are annoying when there are real link error related warnings dupundefined syms hidden among so many warnings about missing pdb If this isnt easy to fix maybe disable this one warning code LNK console T Z libpyembed b a f ff rlibselectmoduleobj warning LNK PDB selectpdb was not found with libpyembed b a f ff rlibselectmoduleobj or at D pyapp build target x pcwindowsmsvc debug deps selectpdb linking object as if no debug info T Z libpyembed b a f ff rlibautodecoderobj warning LNK PDB liblzmapdb was not found with libpyembed b a f ff rlibautodecoderobj or at D pyapp build target x pcwindowsmsvc debug deps liblzmapdb linking object as if no debug info T Z libpyembed b a f ff rlibconnectionobj warning LNK PDB sqlite pdb was not found with libpyembed b a f ff rlibconnectionobj or at D pyapp build target x pcwindowsmsvc debug deps sqlite pdb linking object as if no debug info T Z libpyembed b a f ff rlibrandlibobj warning LNK PDB osslstaticpdb was not found with libpyembed b a f ff rlibrandlibobj or at D pyapp build target x pcwindowsmsvc debug deps osslstaticpdb linking object as if no debug info T Z libpyembed b a f ff rlibmathobj warning LNK PDB pythoncorepdb was not found with libpyembed b a f ff rlibmathobj or at D pyapp build target x pcwindowsmsvc debug deps pythoncorepdb linking object as if no debug info T Z libpyembed b a f ff rlibxmlparseobj warning LNK PDB pyexpatpdb was not found with libpyembed b a f ff rlibxmlparseobj or at D pyapp build target x pcwindowsmsvc debug deps pyexpatpdb linking object as if no debug info T Z libpyembed b a f ff rlibzutilobj warning LNK PDB pythoncorepdb was not found with libpyembed b a f ff rlibzutilobj or at D pyapp build target x pcwindowsmsvc debug deps pythoncorepdb linking object as if no debug info They are included in the win standalone archive so I guess it might be solvable by adding more paths to the linker bash find name pdb pythonbuildcorepythoncorepdb pythonbuildextensionsasyncioasynciopdb pythonbuildextensionsbz bz pdb pythonbuildextensionsctypesctypespdb pythonbuildextensionsdecimaldecimalpdb pythonbuildextensionselementtreeelementtreepdb pythonbuildextensionshashlibhashlibpdb pythonbuildextensionslzmalzmapdb pythonbuildextensionsmsimsipdb pythonbuildextensionsmultiprocessingmultiprocessingpdb pythonbuildextensionsoverlappedoverlappedpdb pythonbuildextensionsqueuequeuepdb pythonbuildextensionssocketsocketpdb pythonbuildextensionssqlite sqlite pdb pythonbuildextensionssslsslpdb pythonbuildextensionspyexpatpyexpatpdb pythonbuildextensionsselectselectpdb pythonbuildextensionsunicodedataunicodedatapdb pythonbuildextensionswinsoundwinsoundpdb pythonbuildlibliblzmapdb pythonbuildlibsqlite pdb If I have a syntax error in pyembed code cargo install path pyoxidizer will happily include it and push it into the generated projects I know I can manually check it but it would be nice if the normal build process checked it It would be great if pre compiled pyembed objects were included into the generated projects to reduce build times for the generated projects CPython Python default Oct Type copyright credits or license for more information IPython An enhanced Interactive Python Type for help In ls instawow initpy mainpy pycache importwrapperpy versionpy clipy configpy exceptionspy managerpy matcherspy migrations modelspy promptspy resolverspy utilspy watemplates waupdaterpy In from importlibresources import contents readbinary In readbinaryinstawow mainpy Out bfrom instawowcli import main n n nif name main n main n In listcontentsinstawow Out migrations configpy modelspy versionpy resolverspy waupdaterpy initpy pycache promptspy clipy utilspy exceptionspy matcherspy importwrapperpy mainpy managerpy watemplates PyOxidizer from importlibresources import contents readbinary readbinaryinstawow mainpy Traceback most recent call last File stdin line in module File importlibresources line in readbinary File importlibresources line in openbinary FileNotFoundError resource not found contentsinstawow watemplatesCOPYINGWeakAurasCompanion watemplatesdatalua watemplatesinitlua watemplatesWeakAurasCompaniontoc PyOxidizer also handles isresource differently from importlibresources import isresource isresourceinstawow foo Traceback most recent call last File stdin line in module File importlibresources line in isresource FileNotFoundError resource not found Compare with the default reader In from importlibresources import isresource In isresourceinstawow foo Out False One small problem with the Windows CI is that HOME is empty resulting in the app building at pyapp which is also odd as it should be a Windows path not a Unix path But more interesting is that the Built App job log doesnt emit that alwaysimportant hello world eg ends with console packaging application into Dpyapp build apps pyapp x pcwindowsmsvc debug copying Dpyapp build target x pcwindowsmsvc debug pyappexe to Dpyapp build apps pyapp x pcwindowsmsvc debug pyappexe resolving packaging state writing license for bz to Dpyapp build apps pyapp x pcwindowsmsvc debug LICENSEbzip txt writing license for ctypes to Dpyapp build apps pyapp x pcwindowsmsvc debug LICENSElibffitxt writing license for hashlib to Dpyapp build apps pyapp x pcwindowsmsvc debug LICENSEopenssltxt writing license for lzma to Dpyapp build apps pyapp x pcwindowsmsvc debug LICENSEliblzmatxt writing license for sqlite to Dpyapp build apps pyapp x pcwindowsmsvc debug LICENSEsqlitetxt writing license for ssl to Dpyapp build apps pyapp x pcwindowsmsvc debug LICENSEopenssltxt writing license for python to Dpyapp build apps pyapp x pcwindowsmsvc debug LICENSEpythontxt pyapp packaged into Dpyapp build apps pyapp x pcwindowsmsvc debug section Finishing Build Oxidized Application Windows 